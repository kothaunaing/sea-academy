function dI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var gn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cw={exports:{}},zh={},Aw={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var su=Symbol.for("react.element"),fI=Symbol.for("react.portal"),pI=Symbol.for("react.fragment"),mI=Symbol.for("react.strict_mode"),gI=Symbol.for("react.profiler"),vI=Symbol.for("react.provider"),yI=Symbol.for("react.context"),_I=Symbol.for("react.forward_ref"),wI=Symbol.for("react.suspense"),EI=Symbol.for("react.memo"),TI=Symbol.for("react.lazy"),y1=Symbol.iterator;function xI(t){return t===null||typeof t!="object"?null:(t=y1&&t[y1]||t["@@iterator"],typeof t=="function"?t:null)}var kw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nw=Object.assign,Rw={};function Go(t,e,n){this.props=t,this.context=e,this.refs=Rw,this.updater=n||kw}Go.prototype.isReactComponent={};Go.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Go.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Pw(){}Pw.prototype=Go.prototype;function T2(t,e,n){this.props=t,this.context=e,this.refs=Rw,this.updater=n||kw}var x2=T2.prototype=new Pw;x2.constructor=T2;Nw(x2,Go.prototype);x2.isPureReactComponent=!0;var _1=Array.isArray,Ow=Object.prototype.hasOwnProperty,b2={current:null},Lw={key:!0,ref:!0,__self:!0,__source:!0};function Dw(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Ow.call(e,r)&&!Lw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:su,type:t,key:s,ref:o,props:i,_owner:b2.current}}function bI(t,e){return{$$typeof:su,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function I2(t){return typeof t=="object"&&t!==null&&t.$$typeof===su}function II(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var w1=/\/+/g;function ff(t,e){return typeof t=="object"&&t!==null&&t.key!=null?II(""+t.key):e.toString(36)}function gc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case su:case fI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ff(o,0):r,_1(i)?(n="",t!=null&&(n=t.replace(w1,"$&/")+"/"),gc(i,e,n,"",function(u){return u})):i!=null&&(I2(i)&&(i=bI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(w1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",_1(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+ff(s,a);o+=gc(s,e,n,l,i)}else if(l=xI(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+ff(s,a++),o+=gc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $u(t,e,n){if(t==null)return t;var r=[],i=0;return gc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function SI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var sn={current:null},vc={transition:null},CI={ReactCurrentDispatcher:sn,ReactCurrentBatchConfig:vc,ReactCurrentOwner:b2};be.Children={map:$u,forEach:function(t,e,n){$u(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $u(t,function(){e++}),e},toArray:function(t){return $u(t,function(e){return e})||[]},only:function(t){if(!I2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};be.Component=Go;be.Fragment=pI;be.Profiler=gI;be.PureComponent=T2;be.StrictMode=mI;be.Suspense=wI;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CI;be.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Nw({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=b2.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Ow.call(e,l)&&!Lw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:su,type:t.type,key:i,ref:s,props:r,_owner:o}};be.createContext=function(t){return t={$$typeof:yI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vI,_context:t},t.Consumer=t};be.createElement=Dw;be.createFactory=function(t){var e=Dw.bind(null,t);return e.type=t,e};be.createRef=function(){return{current:null}};be.forwardRef=function(t){return{$$typeof:_I,render:t}};be.isValidElement=I2;be.lazy=function(t){return{$$typeof:TI,_payload:{_status:-1,_result:t},_init:SI}};be.memo=function(t,e){return{$$typeof:EI,type:t,compare:e===void 0?null:e}};be.startTransition=function(t){var e=vc.transition;vc.transition={};try{t()}finally{vc.transition=e}};be.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};be.useCallback=function(t,e){return sn.current.useCallback(t,e)};be.useContext=function(t){return sn.current.useContext(t)};be.useDebugValue=function(){};be.useDeferredValue=function(t){return sn.current.useDeferredValue(t)};be.useEffect=function(t,e){return sn.current.useEffect(t,e)};be.useId=function(){return sn.current.useId()};be.useImperativeHandle=function(t,e,n){return sn.current.useImperativeHandle(t,e,n)};be.useInsertionEffect=function(t,e){return sn.current.useInsertionEffect(t,e)};be.useLayoutEffect=function(t,e){return sn.current.useLayoutEffect(t,e)};be.useMemo=function(t,e){return sn.current.useMemo(t,e)};be.useReducer=function(t,e,n){return sn.current.useReducer(t,e,n)};be.useRef=function(t){return sn.current.useRef(t)};be.useState=function(t){return sn.current.useState(t)};be.useSyncExternalStore=function(t,e,n){return sn.current.useSyncExternalStore(t,e,n)};be.useTransition=function(){return sn.current.useTransition()};be.version="18.2.0";Aw.exports=be;var M=Aw.exports;const Mw=Sw(M),AI=dI({__proto__:null,default:Mw},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kI=M,NI=Symbol.for("react.element"),RI=Symbol.for("react.fragment"),PI=Object.prototype.hasOwnProperty,OI=kI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,LI={key:!0,ref:!0,__self:!0,__source:!0};function jw(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)PI.call(e,r)&&!LI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:NI,type:t,key:s,ref:o,props:i,_owner:OI.current}}zh.Fragment=RI;zh.jsx=jw;zh.jsxs=jw;Cw.exports=zh;var _=Cw.exports,_0={},Fw={exports:{}},Sn={},$w={exports:{}},Vw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,$){var D=H.length;H.push($);e:for(;0<D;){var R=D-1>>>1,L=H[R];if(0<i(L,$))H[R]=$,H[D]=L,D=R;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var $=H[0],D=H.pop();if(D!==$){H[0]=D;e:for(var R=0,L=H.length,F=L>>>1;R<F;){var q=2*(R+1)-1,U=H[q],O=q+1,V=H[O];if(0>i(U,D))O<L&&0>i(V,U)?(H[R]=V,H[O]=D,R=O):(H[R]=U,H[q]=D,R=q);else if(O<L&&0>i(V,D))H[R]=V,H[O]=D,R=O;else break e}}return $}function i(H,$){var D=H.sortIndex-$.sortIndex;return D!==0?D:H.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,c=null,d=3,f=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(H){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=H)r(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function g(H){if(y=!1,E(H),!v)if(n(l)!==null)v=!0,B(T);else{var $=n(u);$!==null&&z(g,$.startTime-H)}}function T(H,$){v=!1,y&&(y=!1,p(S),S=-1),f=!0;var D=d;try{for(E($),c=n(l);c!==null&&(!(c.expirationTime>$)||H&&!C());){var R=c.callback;if(typeof R=="function"){c.callback=null,d=c.priorityLevel;var L=R(c.expirationTime<=$);$=t.unstable_now(),typeof L=="function"?c.callback=L:c===n(l)&&r(l),E($)}else r(l);c=n(l)}if(c!==null)var F=!0;else{var q=n(u);q!==null&&z(g,q.startTime-$),F=!1}return F}finally{c=null,d=D,f=!1}}var x=!1,b=null,S=-1,k=5,I=-1;function C(){return!(t.unstable_now()-I<k)}function A(){if(b!==null){var H=t.unstable_now();I=H;var $=!0;try{$=b(!0,H)}finally{$?N():(x=!1,b=null)}}else x=!1}var N;if(typeof m=="function")N=function(){m(A)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,j=P.port2;P.port1.onmessage=A,N=function(){j.postMessage(null)}}else N=function(){w(A,0)};function B(H){b=H,x||(x=!0,N())}function z(H,$){S=w(function(){H(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){v||f||(v=!0,B(T))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(d){case 1:case 2:case 3:var $=3;break;default:$=d}var D=d;d=$;try{return H()}finally{d=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,$){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var D=d;d=H;try{return $()}finally{d=D}},t.unstable_scheduleCallback=function(H,$,D){var R=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?R+D:R):D=R,H){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=D+L,H={id:h++,callback:$,priorityLevel:H,startTime:D,expirationTime:L,sortIndex:-1},D>R?(H.sortIndex=D,e(u,H),n(l)===null&&H===n(u)&&(y?(p(S),S=-1):y=!0,z(g,D-R))):(H.sortIndex=L,e(l,H),v||f||(v=!0,B(T))),H},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(H){var $=d;return function(){var D=d;d=$;try{return H.apply(this,arguments)}finally{d=D}}}})(Vw);$w.exports=Vw;var DI=$w.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uw=M,xn=DI;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bw=new Set,gl={};function Ns(t,e){So(t,e),So(t+"Capture",e)}function So(t,e){for(gl[t]=e,t=0;t<e.length;t++)Bw.add(e[t])}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w0=Object.prototype.hasOwnProperty,MI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E1={},T1={};function jI(t){return w0.call(T1,t)?!0:w0.call(E1,t)?!1:MI.test(t)?T1[t]=!0:(E1[t]=!0,!1)}function FI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $I(t,e,n,r){if(e===null||typeof e>"u"||FI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function on(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jt[t]=new on(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jt[e]=new on(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jt[t]=new on(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jt[t]=new on(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jt[t]=new on(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jt[t]=new on(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jt[t]=new on(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jt[t]=new on(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jt[t]=new on(t,5,!1,t.toLowerCase(),null,!1,!1)});var S2=/[\-:]([a-z])/g;function C2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(S2,C2);jt[e]=new on(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(S2,C2);jt[e]=new on(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(S2,C2);jt[e]=new on(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jt[t]=new on(t,1,!1,t.toLowerCase(),null,!1,!1)});jt.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jt[t]=new on(t,1,!1,t.toLowerCase(),null,!0,!0)});function A2(t,e,n,r){var i=jt.hasOwnProperty(e)?jt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($I(e,n,i,r)&&(n=null),r||i===null?jI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Hr=Uw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vu=Symbol.for("react.element"),Gs=Symbol.for("react.portal"),Qs=Symbol.for("react.fragment"),k2=Symbol.for("react.strict_mode"),E0=Symbol.for("react.profiler"),qw=Symbol.for("react.provider"),zw=Symbol.for("react.context"),N2=Symbol.for("react.forward_ref"),T0=Symbol.for("react.suspense"),x0=Symbol.for("react.suspense_list"),R2=Symbol.for("react.memo"),Jr=Symbol.for("react.lazy"),Hw=Symbol.for("react.offscreen"),x1=Symbol.iterator;function va(t){return t===null||typeof t!="object"?null:(t=x1&&t[x1]||t["@@iterator"],typeof t=="function"?t:null)}var rt=Object.assign,pf;function ja(t){if(pf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pf=e&&e[1]||""}return`
`+pf+t}var mf=!1;function gf(t,e){if(!t||mf)return"";mf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{mf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ja(t):""}function VI(t){switch(t.tag){case 5:return ja(t.type);case 16:return ja("Lazy");case 13:return ja("Suspense");case 19:return ja("SuspenseList");case 0:case 2:case 15:return t=gf(t.type,!1),t;case 11:return t=gf(t.type.render,!1),t;case 1:return t=gf(t.type,!0),t;default:return""}}function b0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qs:return"Fragment";case Gs:return"Portal";case E0:return"Profiler";case k2:return"StrictMode";case T0:return"Suspense";case x0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zw:return(t.displayName||"Context")+".Consumer";case qw:return(t._context.displayName||"Context")+".Provider";case N2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R2:return e=t.displayName||null,e!==null?e:b0(t.type)||"Memo";case Jr:e=t._payload,t=t._init;try{return b0(t(e))}catch{}}return null}function UI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return b0(e);case 8:return e===k2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ii(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ww(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BI(t){var e=Ww(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Uu(t){t._valueTracker||(t._valueTracker=BI(t))}function Kw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ww(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Mc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function I0(t,e){var n=e.checked;return rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function b1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ii(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Gw(t,e){e=e.checked,e!=null&&A2(t,"checked",e,!1)}function S0(t,e){Gw(t,e);var n=Ii(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?C0(t,e.type,n):e.hasOwnProperty("defaultValue")&&C0(t,e.type,Ii(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function I1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function C0(t,e,n){(e!=="number"||Mc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fa=Array.isArray;function co(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ii(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function A0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function S1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(Fa(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ii(n)}}function Qw(t,e){var n=Ii(e.value),r=Ii(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function C1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Yw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function k0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Yw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bu,Xw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bu=Bu||document.createElement("div"),Bu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ya={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qI=["Webkit","ms","Moz","O"];Object.keys(Ya).forEach(function(t){qI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ya[e]=Ya[t]})});function Jw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ya.hasOwnProperty(t)&&Ya[t]?(""+e).trim():e+"px"}function Zw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Jw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var zI=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function N0(t,e){if(e){if(zI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function R0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var P0=null;function P2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var O0=null,ho=null,fo=null;function A1(t){if(t=lu(t)){if(typeof O0!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=Qh(e),O0(t.stateNode,t.type,e))}}function eE(t){ho?fo?fo.push(t):fo=[t]:ho=t}function tE(){if(ho){var t=ho,e=fo;if(fo=ho=null,A1(t),e)for(t=0;t<e.length;t++)A1(e[t])}}function nE(t,e){return t(e)}function rE(){}var vf=!1;function iE(t,e,n){if(vf)return t(e,n);vf=!0;try{return nE(t,e,n)}finally{vf=!1,(ho!==null||fo!==null)&&(rE(),tE())}}function yl(t,e){var n=t.stateNode;if(n===null)return null;var r=Qh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var L0=!1;if(Mr)try{var ya={};Object.defineProperty(ya,"passive",{get:function(){L0=!0}}),window.addEventListener("test",ya,ya),window.removeEventListener("test",ya,ya)}catch{L0=!1}function HI(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Xa=!1,jc=null,Fc=!1,D0=null,WI={onError:function(t){Xa=!0,jc=t}};function KI(t,e,n,r,i,s,o,a,l){Xa=!1,jc=null,HI.apply(WI,arguments)}function GI(t,e,n,r,i,s,o,a,l){if(KI.apply(this,arguments),Xa){if(Xa){var u=jc;Xa=!1,jc=null}else throw Error(ee(198));Fc||(Fc=!0,D0=u)}}function Rs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function k1(t){if(Rs(t)!==t)throw Error(ee(188))}function QI(t){var e=t.alternate;if(!e){if(e=Rs(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return k1(i),t;if(s===r)return k1(i),e;s=s.sibling}throw Error(ee(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function oE(t){return t=QI(t),t!==null?aE(t):null}function aE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=aE(t);if(e!==null)return e;t=t.sibling}return null}var lE=xn.unstable_scheduleCallback,N1=xn.unstable_cancelCallback,YI=xn.unstable_shouldYield,XI=xn.unstable_requestPaint,lt=xn.unstable_now,JI=xn.unstable_getCurrentPriorityLevel,O2=xn.unstable_ImmediatePriority,uE=xn.unstable_UserBlockingPriority,$c=xn.unstable_NormalPriority,ZI=xn.unstable_LowPriority,cE=xn.unstable_IdlePriority,Hh=null,dr=null;function eS(t){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(Hh,t,void 0,(t.current.flags&128)===128)}catch{}}var Yn=Math.clz32?Math.clz32:rS,tS=Math.log,nS=Math.LN2;function rS(t){return t>>>=0,t===0?32:31-(tS(t)/nS|0)|0}var qu=64,zu=4194304;function $a(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Vc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=$a(a):(s&=o,s!==0&&(r=$a(s)))}else o=n&~i,o!==0?r=$a(o):s!==0&&(r=$a(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yn(e),i=1<<n,r|=t[n],e&=~i;return r}function iS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Yn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=iS(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function M0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hE(){var t=qu;return qu<<=1,!(qu&4194240)&&(qu=64),t}function yf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ou(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yn(e),t[e]=n}function oS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Yn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function L2(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Fe=0;function dE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fE,D2,pE,mE,gE,j0=!1,Hu=[],hi=null,di=null,fi=null,_l=new Map,wl=new Map,ei=[],aS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function R1(t,e){switch(t){case"focusin":case"focusout":hi=null;break;case"dragenter":case"dragleave":di=null;break;case"mouseover":case"mouseout":fi=null;break;case"pointerover":case"pointerout":_l.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wl.delete(e.pointerId)}}function _a(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=lu(e),e!==null&&D2(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function lS(t,e,n,r,i){switch(e){case"focusin":return hi=_a(hi,t,e,n,r,i),!0;case"dragenter":return di=_a(di,t,e,n,r,i),!0;case"mouseover":return fi=_a(fi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return _l.set(s,_a(_l.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,wl.set(s,_a(wl.get(s)||null,t,e,n,r,i)),!0}return!1}function vE(t){var e=es(t.target);if(e!==null){var n=Rs(e);if(n!==null){if(e=n.tag,e===13){if(e=sE(n),e!==null){t.blockedOn=e,gE(t.priority,function(){pE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=F0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);P0=r,n.target.dispatchEvent(r),P0=null}else return e=lu(n),e!==null&&D2(e),t.blockedOn=n,!1;e.shift()}return!0}function P1(t,e,n){yc(t)&&n.delete(e)}function uS(){j0=!1,hi!==null&&yc(hi)&&(hi=null),di!==null&&yc(di)&&(di=null),fi!==null&&yc(fi)&&(fi=null),_l.forEach(P1),wl.forEach(P1)}function wa(t,e){t.blockedOn===e&&(t.blockedOn=null,j0||(j0=!0,xn.unstable_scheduleCallback(xn.unstable_NormalPriority,uS)))}function El(t){function e(i){return wa(i,t)}if(0<Hu.length){wa(Hu[0],t);for(var n=1;n<Hu.length;n++){var r=Hu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(hi!==null&&wa(hi,t),di!==null&&wa(di,t),fi!==null&&wa(fi,t),_l.forEach(e),wl.forEach(e),n=0;n<ei.length;n++)r=ei[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ei.length&&(n=ei[0],n.blockedOn===null);)vE(n),n.blockedOn===null&&ei.shift()}var po=Hr.ReactCurrentBatchConfig,Uc=!0;function cS(t,e,n,r){var i=Fe,s=po.transition;po.transition=null;try{Fe=1,M2(t,e,n,r)}finally{Fe=i,po.transition=s}}function hS(t,e,n,r){var i=Fe,s=po.transition;po.transition=null;try{Fe=4,M2(t,e,n,r)}finally{Fe=i,po.transition=s}}function M2(t,e,n,r){if(Uc){var i=F0(t,e,n,r);if(i===null)Af(t,e,r,Bc,n),R1(t,r);else if(lS(i,t,e,n,r))r.stopPropagation();else if(R1(t,r),e&4&&-1<aS.indexOf(t)){for(;i!==null;){var s=lu(i);if(s!==null&&fE(s),s=F0(t,e,n,r),s===null&&Af(t,e,r,Bc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Af(t,e,r,null,n)}}var Bc=null;function F0(t,e,n,r){if(Bc=null,t=P2(r),t=es(t),t!==null)if(e=Rs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Bc=t,null}function yE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JI()){case O2:return 1;case uE:return 4;case $c:case ZI:return 16;case cE:return 536870912;default:return 16}default:return 16}}var ai=null,j2=null,_c=null;function _E(){if(_c)return _c;var t,e=j2,n=e.length,r,i="value"in ai?ai.value:ai.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return _c=i.slice(t,1<r?1-r:void 0)}function wc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wu(){return!0}function O1(){return!1}function Cn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Wu:O1,this.isPropagationStopped=O1,this}return rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wu)},persist:function(){},isPersistent:Wu}),e}var Qo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},F2=Cn(Qo),au=rt({},Qo,{view:0,detail:0}),dS=Cn(au),_f,wf,Ea,Wh=rt({},au,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ea&&(Ea&&t.type==="mousemove"?(_f=t.screenX-Ea.screenX,wf=t.screenY-Ea.screenY):wf=_f=0,Ea=t),_f)},movementY:function(t){return"movementY"in t?t.movementY:wf}}),L1=Cn(Wh),fS=rt({},Wh,{dataTransfer:0}),pS=Cn(fS),mS=rt({},au,{relatedTarget:0}),Ef=Cn(mS),gS=rt({},Qo,{animationName:0,elapsedTime:0,pseudoElement:0}),vS=Cn(gS),yS=rt({},Qo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_S=Cn(yS),wS=rt({},Qo,{data:0}),D1=Cn(wS),ES={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xS[t])?!!e[t]:!1}function $2(){return bS}var IS=rt({},au,{key:function(t){if(t.key){var e=ES[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$2,charCode:function(t){return t.type==="keypress"?wc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),SS=Cn(IS),CS=rt({},Wh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M1=Cn(CS),AS=rt({},au,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$2}),kS=Cn(AS),NS=rt({},Qo,{propertyName:0,elapsedTime:0,pseudoElement:0}),RS=Cn(NS),PS=rt({},Wh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),OS=Cn(PS),LS=[9,13,27,32],V2=Mr&&"CompositionEvent"in window,Ja=null;Mr&&"documentMode"in document&&(Ja=document.documentMode);var DS=Mr&&"TextEvent"in window&&!Ja,wE=Mr&&(!V2||Ja&&8<Ja&&11>=Ja),j1=" ",F1=!1;function EE(t,e){switch(t){case"keyup":return LS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ys=!1;function MS(t,e){switch(t){case"compositionend":return TE(e);case"keypress":return e.which!==32?null:(F1=!0,j1);case"textInput":return t=e.data,t===j1&&F1?null:t;default:return null}}function jS(t,e){if(Ys)return t==="compositionend"||!V2&&EE(t,e)?(t=_E(),_c=j2=ai=null,Ys=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wE&&e.locale!=="ko"?null:e.data;default:return null}}var FS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!FS[t.type]:e==="textarea"}function xE(t,e,n,r){eE(r),e=qc(e,"onChange"),0<e.length&&(n=new F2("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Za=null,Tl=null;function $S(t){LE(t,0)}function Kh(t){var e=Zs(t);if(Kw(e))return t}function VS(t,e){if(t==="change")return e}var bE=!1;if(Mr){var Tf;if(Mr){var xf="oninput"in document;if(!xf){var V1=document.createElement("div");V1.setAttribute("oninput","return;"),xf=typeof V1.oninput=="function"}Tf=xf}else Tf=!1;bE=Tf&&(!document.documentMode||9<document.documentMode)}function U1(){Za&&(Za.detachEvent("onpropertychange",IE),Tl=Za=null)}function IE(t){if(t.propertyName==="value"&&Kh(Tl)){var e=[];xE(e,Tl,t,P2(t)),iE($S,e)}}function US(t,e,n){t==="focusin"?(U1(),Za=e,Tl=n,Za.attachEvent("onpropertychange",IE)):t==="focusout"&&U1()}function BS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kh(Tl)}function qS(t,e){if(t==="click")return Kh(e)}function zS(t,e){if(t==="input"||t==="change")return Kh(e)}function HS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zn=typeof Object.is=="function"?Object.is:HS;function xl(t,e){if(Zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!w0.call(e,i)||!Zn(t[i],e[i]))return!1}return!0}function B1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function q1(t,e){var n=B1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=B1(n)}}function SE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?SE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function CE(){for(var t=window,e=Mc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Mc(t.document)}return e}function U2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function WS(t){var e=CE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&SE(n.ownerDocument.documentElement,n)){if(r!==null&&U2(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=q1(n,s);var o=q1(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KS=Mr&&"documentMode"in document&&11>=document.documentMode,Xs=null,$0=null,el=null,V0=!1;function z1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;V0||Xs==null||Xs!==Mc(r)||(r=Xs,"selectionStart"in r&&U2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),el&&xl(el,r)||(el=r,r=qc($0,"onSelect"),0<r.length&&(e=new F2("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xs)))}function Ku(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Js={animationend:Ku("Animation","AnimationEnd"),animationiteration:Ku("Animation","AnimationIteration"),animationstart:Ku("Animation","AnimationStart"),transitionend:Ku("Transition","TransitionEnd")},bf={},AE={};Mr&&(AE=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function Gh(t){if(bf[t])return bf[t];if(!Js[t])return t;var e=Js[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in AE)return bf[t]=e[n];return t}var kE=Gh("animationend"),NE=Gh("animationiteration"),RE=Gh("animationstart"),PE=Gh("transitionend"),OE=new Map,H1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(t,e){OE.set(t,e),Ns(e,[t])}for(var If=0;If<H1.length;If++){var Sf=H1[If],GS=Sf.toLowerCase(),QS=Sf[0].toUpperCase()+Sf.slice(1);Li(GS,"on"+QS)}Li(kE,"onAnimationEnd");Li(NE,"onAnimationIteration");Li(RE,"onAnimationStart");Li("dblclick","onDoubleClick");Li("focusin","onFocus");Li("focusout","onBlur");Li(PE,"onTransitionEnd");So("onMouseEnter",["mouseout","mouseover"]);So("onMouseLeave",["mouseout","mouseover"]);So("onPointerEnter",["pointerout","pointerover"]);So("onPointerLeave",["pointerout","pointerover"]);Ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Va="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Va));function W1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,GI(r,e,void 0,t),t.currentTarget=null}function LE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;W1(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;W1(i,a,u),s=l}}}if(Fc)throw t=D0,Fc=!1,D0=null,t}function We(t,e){var n=e[H0];n===void 0&&(n=e[H0]=new Set);var r=t+"__bubble";n.has(r)||(DE(e,t,2,!1),n.add(r))}function Cf(t,e,n){var r=0;e&&(r|=4),DE(n,t,r,e)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function bl(t){if(!t[Gu]){t[Gu]=!0,Bw.forEach(function(n){n!=="selectionchange"&&(YS.has(n)||Cf(n,!1,t),Cf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gu]||(e[Gu]=!0,Cf("selectionchange",!1,e))}}function DE(t,e,n,r){switch(yE(e)){case 1:var i=cS;break;case 4:i=hS;break;default:i=M2}n=i.bind(null,e,n,t),i=void 0,!L0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Af(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=es(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}iE(function(){var u=s,h=P2(n),c=[];e:{var d=OE.get(t);if(d!==void 0){var f=F2,v=t;switch(t){case"keypress":if(wc(n)===0)break e;case"keydown":case"keyup":f=SS;break;case"focusin":v="focus",f=Ef;break;case"focusout":v="blur",f=Ef;break;case"beforeblur":case"afterblur":f=Ef;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=L1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=pS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=kS;break;case kE:case NE:case RE:f=vS;break;case PE:f=RS;break;case"scroll":f=dS;break;case"wheel":f=OS;break;case"copy":case"cut":case"paste":f=_S;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=M1}var y=(e&4)!==0,w=!y&&t==="scroll",p=y?d!==null?d+"Capture":null:d;y=[];for(var m=u,E;m!==null;){E=m;var g=E.stateNode;if(E.tag===5&&g!==null&&(E=g,p!==null&&(g=yl(m,p),g!=null&&y.push(Il(m,g,E)))),w)break;m=m.return}0<y.length&&(d=new f(d,v,null,n,h),c.push({event:d,listeners:y}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==P0&&(v=n.relatedTarget||n.fromElement)&&(es(v)||v[jr]))break e;if((f||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,f?(v=n.relatedTarget||n.toElement,f=u,v=v?es(v):null,v!==null&&(w=Rs(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(f=null,v=u),f!==v)){if(y=L1,g="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(y=M1,g="onPointerLeave",p="onPointerEnter",m="pointer"),w=f==null?d:Zs(f),E=v==null?d:Zs(v),d=new y(g,m+"leave",f,n,h),d.target=w,d.relatedTarget=E,g=null,es(h)===u&&(y=new y(p,m+"enter",v,n,h),y.target=E,y.relatedTarget=w,g=y),w=g,f&&v)t:{for(y=f,p=v,m=0,E=y;E;E=Bs(E))m++;for(E=0,g=p;g;g=Bs(g))E++;for(;0<m-E;)y=Bs(y),m--;for(;0<E-m;)p=Bs(p),E--;for(;m--;){if(y===p||p!==null&&y===p.alternate)break t;y=Bs(y),p=Bs(p)}y=null}else y=null;f!==null&&K1(c,d,f,y,!1),v!==null&&w!==null&&K1(c,w,v,y,!0)}}e:{if(d=u?Zs(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var T=VS;else if($1(d))if(bE)T=zS;else{T=BS;var x=US}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(T=qS);if(T&&(T=T(t,u))){xE(c,T,n,h);break e}x&&x(t,d,u),t==="focusout"&&(x=d._wrapperState)&&x.controlled&&d.type==="number"&&C0(d,"number",d.value)}switch(x=u?Zs(u):window,t){case"focusin":($1(x)||x.contentEditable==="true")&&(Xs=x,$0=u,el=null);break;case"focusout":el=$0=Xs=null;break;case"mousedown":V0=!0;break;case"contextmenu":case"mouseup":case"dragend":V0=!1,z1(c,n,h);break;case"selectionchange":if(KS)break;case"keydown":case"keyup":z1(c,n,h)}var b;if(V2)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Ys?EE(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(wE&&n.locale!=="ko"&&(Ys||S!=="onCompositionStart"?S==="onCompositionEnd"&&Ys&&(b=_E()):(ai=h,j2="value"in ai?ai.value:ai.textContent,Ys=!0)),x=qc(u,S),0<x.length&&(S=new D1(S,t,null,n,h),c.push({event:S,listeners:x}),b?S.data=b:(b=TE(n),b!==null&&(S.data=b)))),(b=DS?MS(t,n):jS(t,n))&&(u=qc(u,"onBeforeInput"),0<u.length&&(h=new D1("onBeforeInput","beforeinput",null,n,h),c.push({event:h,listeners:u}),h.data=b))}LE(c,e)})}function Il(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=yl(t,n),s!=null&&r.unshift(Il(t,s,i)),s=yl(t,e),s!=null&&r.push(Il(t,s,i))),t=t.return}return r}function Bs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function K1(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=yl(n,s),l!=null&&o.unshift(Il(n,l,a))):i||(l=yl(n,s),l!=null&&o.push(Il(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var XS=/\r\n?/g,JS=/\u0000|\uFFFD/g;function G1(t){return(typeof t=="string"?t:""+t).replace(XS,`
`).replace(JS,"")}function Qu(t,e,n){if(e=G1(e),G1(t)!==e&&n)throw Error(ee(425))}function zc(){}var U0=null,B0=null;function q0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var z0=typeof setTimeout=="function"?setTimeout:void 0,ZS=typeof clearTimeout=="function"?clearTimeout:void 0,Q1=typeof Promise=="function"?Promise:void 0,eC=typeof queueMicrotask=="function"?queueMicrotask:typeof Q1<"u"?function(t){return Q1.resolve(null).then(t).catch(tC)}:z0;function tC(t){setTimeout(function(){throw t})}function kf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),El(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);El(e)}function pi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Y1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yo=Math.random().toString(36).slice(2),or="__reactFiber$"+Yo,Sl="__reactProps$"+Yo,jr="__reactContainer$"+Yo,H0="__reactEvents$"+Yo,nC="__reactListeners$"+Yo,rC="__reactHandles$"+Yo;function es(t){var e=t[or];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jr]||n[or]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Y1(t);t!==null;){if(n=t[or])return n;t=Y1(t)}return e}t=n,n=t.parentNode}return null}function lu(t){return t=t[or]||t[jr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function Qh(t){return t[Sl]||null}var W0=[],eo=-1;function Di(t){return{current:t}}function Xe(t){0>eo||(t.current=W0[eo],W0[eo]=null,eo--)}function ze(t,e){eo++,W0[eo]=t.current,t.current=e}var Si={},Yt=Di(Si),dn=Di(!1),ms=Si;function Co(t,e){var n=t.type.contextTypes;if(!n)return Si;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function fn(t){return t=t.childContextTypes,t!=null}function Hc(){Xe(dn),Xe(Yt)}function X1(t,e,n){if(Yt.current!==Si)throw Error(ee(168));ze(Yt,e),ze(dn,n)}function ME(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ee(108,UI(t)||"Unknown",i));return rt({},n,r)}function Wc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Si,ms=Yt.current,ze(Yt,t),ze(dn,dn.current),!0}function J1(t,e,n){var r=t.stateNode;if(!r)throw Error(ee(169));n?(t=ME(t,e,ms),r.__reactInternalMemoizedMergedChildContext=t,Xe(dn),Xe(Yt),ze(Yt,t)):Xe(dn),ze(dn,n)}var Ir=null,Yh=!1,Nf=!1;function jE(t){Ir===null?Ir=[t]:Ir.push(t)}function iC(t){Yh=!0,jE(t)}function Mi(){if(!Nf&&Ir!==null){Nf=!0;var t=0,e=Fe;try{var n=Ir;for(Fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ir=null,Yh=!1}catch(i){throw Ir!==null&&(Ir=Ir.slice(t+1)),lE(O2,Mi),i}finally{Fe=e,Nf=!1}}return null}var to=[],no=0,Kc=null,Gc=0,Nn=[],Rn=0,gs=null,Cr=1,Ar="";function Gi(t,e){to[no++]=Gc,to[no++]=Kc,Kc=t,Gc=e}function FE(t,e,n){Nn[Rn++]=Cr,Nn[Rn++]=Ar,Nn[Rn++]=gs,gs=t;var r=Cr;t=Ar;var i=32-Yn(r)-1;r&=~(1<<i),n+=1;var s=32-Yn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Cr=1<<32-Yn(e)+i|n<<i|r,Ar=s+t}else Cr=1<<s|n<<i|r,Ar=t}function B2(t){t.return!==null&&(Gi(t,1),FE(t,1,0))}function q2(t){for(;t===Kc;)Kc=to[--no],to[no]=null,Gc=to[--no],to[no]=null;for(;t===gs;)gs=Nn[--Rn],Nn[Rn]=null,Ar=Nn[--Rn],Nn[Rn]=null,Cr=Nn[--Rn],Nn[Rn]=null}var wn=null,vn=null,Ze=!1,Wn=null;function $E(t,e){var n=On(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Z1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wn=t,vn=pi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wn=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=gs!==null?{id:Cr,overflow:Ar}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=On(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wn=t,vn=null,!0):!1;default:return!1}}function K0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function G0(t){if(Ze){var e=vn;if(e){var n=e;if(!Z1(t,e)){if(K0(t))throw Error(ee(418));e=pi(n.nextSibling);var r=wn;e&&Z1(t,e)?$E(r,n):(t.flags=t.flags&-4097|2,Ze=!1,wn=t)}}else{if(K0(t))throw Error(ee(418));t.flags=t.flags&-4097|2,Ze=!1,wn=t}}}function ev(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wn=t}function Yu(t){if(t!==wn)return!1;if(!Ze)return ev(t),Ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!q0(t.type,t.memoizedProps)),e&&(e=vn)){if(K0(t))throw VE(),Error(ee(418));for(;e;)$E(t,e),e=pi(e.nextSibling)}if(ev(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vn=pi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=wn?pi(t.stateNode.nextSibling):null;return!0}function VE(){for(var t=vn;t;)t=pi(t.nextSibling)}function Ao(){vn=wn=null,Ze=!1}function z2(t){Wn===null?Wn=[t]:Wn.push(t)}var sC=Hr.ReactCurrentBatchConfig;function zn(t,e){if(t&&t.defaultProps){e=rt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Qc=Di(null),Yc=null,ro=null,H2=null;function W2(){H2=ro=Yc=null}function K2(t){var e=Qc.current;Xe(Qc),t._currentValue=e}function Q0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function mo(t,e){Yc=t,H2=ro=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(cn=!0),t.firstContext=null)}function $n(t){var e=t._currentValue;if(H2!==t)if(t={context:t,memoizedValue:e,next:null},ro===null){if(Yc===null)throw Error(ee(308));ro=t,Yc.dependencies={lanes:0,firstContext:t}}else ro=ro.next=t;return e}var ts=null;function G2(t){ts===null?ts=[t]:ts.push(t)}function UE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,G2(e)):(n.next=i.next,i.next=n),e.interleaved=n,Fr(t,r)}function Fr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zr=!1;function Q2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Or(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Fr(t,n)}return i=r.interleaved,i===null?(e.next=e,G2(r)):(e.next=i.next,i.next=e),r.interleaved=e,Fr(t,n)}function Ec(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,L2(t,n)}}function tv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xc(t,e,n,r){var i=t.updateQueue;Zr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var c=i.baseState;o=0,h=u=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((r&d)===d){h!==null&&(h=h.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,y=a;switch(d=e,f=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){c=v.call(f,c,d);break e}c=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,d=typeof v=="function"?v.call(f,c,d):v,d==null)break e;c=rt({},c,d);break e;case 2:Zr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=f,l=c):h=h.next=f,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(h===null&&(l=c),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ys|=o,t.lanes=o,t.memoizedState=c}}function nv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ee(191,i));i.call(r)}}}var qE=new Uw.Component().refs;function Y0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:rt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xh={isMounted:function(t){return(t=t._reactInternals)?Rs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=rn(),i=vi(t),s=Or(r,i);s.payload=e,n!=null&&(s.callback=n),e=mi(t,s,i),e!==null&&(Xn(e,t,i,r),Ec(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=rn(),i=vi(t),s=Or(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=mi(t,s,i),e!==null&&(Xn(e,t,i,r),Ec(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rn(),r=vi(t),i=Or(n,r);i.tag=2,e!=null&&(i.callback=e),e=mi(t,i,r),e!==null&&(Xn(e,t,r,n),Ec(e,t,r))}};function rv(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!xl(n,r)||!xl(i,s):!0}function zE(t,e,n){var r=!1,i=Si,s=e.contextType;return typeof s=="object"&&s!==null?s=$n(s):(i=fn(e)?ms:Yt.current,r=e.contextTypes,s=(r=r!=null)?Co(t,i):Si),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function iv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xh.enqueueReplaceState(e,e.state,null)}function X0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=qE,Q2(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=$n(s):(s=fn(e)?ms:Yt.current,i.context=Co(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Y0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Xh.enqueueReplaceState(i,i.state,null),Xc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ta(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===qE&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function Xu(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sv(t){var e=t._init;return e(t._payload)}function HE(t){function e(p,m){if(t){var E=p.deletions;E===null?(p.deletions=[m],p.flags|=16):E.push(m)}}function n(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function i(p,m){return p=yi(p,m),p.index=0,p.sibling=null,p}function s(p,m,E){return p.index=E,t?(E=p.alternate,E!==null?(E=E.index,E<m?(p.flags|=2,m):E):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,m,E,g){return m===null||m.tag!==6?(m=jf(E,p.mode,g),m.return=p,m):(m=i(m,E),m.return=p,m)}function l(p,m,E,g){var T=E.type;return T===Qs?h(p,m,E.props.children,g,E.key):m!==null&&(m.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Jr&&sv(T)===m.type)?(g=i(m,E.props),g.ref=Ta(p,m,E),g.return=p,g):(g=Cc(E.type,E.key,E.props,null,p.mode,g),g.ref=Ta(p,m,E),g.return=p,g)}function u(p,m,E,g){return m===null||m.tag!==4||m.stateNode.containerInfo!==E.containerInfo||m.stateNode.implementation!==E.implementation?(m=Ff(E,p.mode,g),m.return=p,m):(m=i(m,E.children||[]),m.return=p,m)}function h(p,m,E,g,T){return m===null||m.tag!==7?(m=cs(E,p.mode,g,T),m.return=p,m):(m=i(m,E),m.return=p,m)}function c(p,m,E){if(typeof m=="string"&&m!==""||typeof m=="number")return m=jf(""+m,p.mode,E),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Vu:return E=Cc(m.type,m.key,m.props,null,p.mode,E),E.ref=Ta(p,null,m),E.return=p,E;case Gs:return m=Ff(m,p.mode,E),m.return=p,m;case Jr:var g=m._init;return c(p,g(m._payload),E)}if(Fa(m)||va(m))return m=cs(m,p.mode,E,null),m.return=p,m;Xu(p,m)}return null}function d(p,m,E,g){var T=m!==null?m.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return T!==null?null:a(p,m,""+E,g);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Vu:return E.key===T?l(p,m,E,g):null;case Gs:return E.key===T?u(p,m,E,g):null;case Jr:return T=E._init,d(p,m,T(E._payload),g)}if(Fa(E)||va(E))return T!==null?null:h(p,m,E,g,null);Xu(p,E)}return null}function f(p,m,E,g,T){if(typeof g=="string"&&g!==""||typeof g=="number")return p=p.get(E)||null,a(m,p,""+g,T);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Vu:return p=p.get(g.key===null?E:g.key)||null,l(m,p,g,T);case Gs:return p=p.get(g.key===null?E:g.key)||null,u(m,p,g,T);case Jr:var x=g._init;return f(p,m,E,x(g._payload),T)}if(Fa(g)||va(g))return p=p.get(E)||null,h(m,p,g,T,null);Xu(m,g)}return null}function v(p,m,E,g){for(var T=null,x=null,b=m,S=m=0,k=null;b!==null&&S<E.length;S++){b.index>S?(k=b,b=null):k=b.sibling;var I=d(p,b,E[S],g);if(I===null){b===null&&(b=k);break}t&&b&&I.alternate===null&&e(p,b),m=s(I,m,S),x===null?T=I:x.sibling=I,x=I,b=k}if(S===E.length)return n(p,b),Ze&&Gi(p,S),T;if(b===null){for(;S<E.length;S++)b=c(p,E[S],g),b!==null&&(m=s(b,m,S),x===null?T=b:x.sibling=b,x=b);return Ze&&Gi(p,S),T}for(b=r(p,b);S<E.length;S++)k=f(b,p,S,E[S],g),k!==null&&(t&&k.alternate!==null&&b.delete(k.key===null?S:k.key),m=s(k,m,S),x===null?T=k:x.sibling=k,x=k);return t&&b.forEach(function(C){return e(p,C)}),Ze&&Gi(p,S),T}function y(p,m,E,g){var T=va(E);if(typeof T!="function")throw Error(ee(150));if(E=T.call(E),E==null)throw Error(ee(151));for(var x=T=null,b=m,S=m=0,k=null,I=E.next();b!==null&&!I.done;S++,I=E.next()){b.index>S?(k=b,b=null):k=b.sibling;var C=d(p,b,I.value,g);if(C===null){b===null&&(b=k);break}t&&b&&C.alternate===null&&e(p,b),m=s(C,m,S),x===null?T=C:x.sibling=C,x=C,b=k}if(I.done)return n(p,b),Ze&&Gi(p,S),T;if(b===null){for(;!I.done;S++,I=E.next())I=c(p,I.value,g),I!==null&&(m=s(I,m,S),x===null?T=I:x.sibling=I,x=I);return Ze&&Gi(p,S),T}for(b=r(p,b);!I.done;S++,I=E.next())I=f(b,p,S,I.value,g),I!==null&&(t&&I.alternate!==null&&b.delete(I.key===null?S:I.key),m=s(I,m,S),x===null?T=I:x.sibling=I,x=I);return t&&b.forEach(function(A){return e(p,A)}),Ze&&Gi(p,S),T}function w(p,m,E,g){if(typeof E=="object"&&E!==null&&E.type===Qs&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Vu:e:{for(var T=E.key,x=m;x!==null;){if(x.key===T){if(T=E.type,T===Qs){if(x.tag===7){n(p,x.sibling),m=i(x,E.props.children),m.return=p,p=m;break e}}else if(x.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Jr&&sv(T)===x.type){n(p,x.sibling),m=i(x,E.props),m.ref=Ta(p,x,E),m.return=p,p=m;break e}n(p,x);break}else e(p,x);x=x.sibling}E.type===Qs?(m=cs(E.props.children,p.mode,g,E.key),m.return=p,p=m):(g=Cc(E.type,E.key,E.props,null,p.mode,g),g.ref=Ta(p,m,E),g.return=p,p=g)}return o(p);case Gs:e:{for(x=E.key;m!==null;){if(m.key===x)if(m.tag===4&&m.stateNode.containerInfo===E.containerInfo&&m.stateNode.implementation===E.implementation){n(p,m.sibling),m=i(m,E.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else e(p,m);m=m.sibling}m=Ff(E,p.mode,g),m.return=p,p=m}return o(p);case Jr:return x=E._init,w(p,m,x(E._payload),g)}if(Fa(E))return v(p,m,E,g);if(va(E))return y(p,m,E,g);Xu(p,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,m!==null&&m.tag===6?(n(p,m.sibling),m=i(m,E),m.return=p,p=m):(n(p,m),m=jf(E,p.mode,g),m.return=p,p=m),o(p)):n(p,m)}return w}var ko=HE(!0),WE=HE(!1),uu={},fr=Di(uu),Cl=Di(uu),Al=Di(uu);function ns(t){if(t===uu)throw Error(ee(174));return t}function Y2(t,e){switch(ze(Al,e),ze(Cl,t),ze(fr,uu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:k0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=k0(e,t)}Xe(fr),ze(fr,e)}function No(){Xe(fr),Xe(Cl),Xe(Al)}function KE(t){ns(Al.current);var e=ns(fr.current),n=k0(e,t.type);e!==n&&(ze(Cl,t),ze(fr,n))}function X2(t){Cl.current===t&&(Xe(fr),Xe(Cl))}var tt=Di(0);function Jc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rf=[];function J2(){for(var t=0;t<Rf.length;t++)Rf[t]._workInProgressVersionPrimary=null;Rf.length=0}var Tc=Hr.ReactCurrentDispatcher,Pf=Hr.ReactCurrentBatchConfig,vs=0,nt=null,yt=null,xt=null,Zc=!1,tl=!1,kl=0,oC=0;function Ft(){throw Error(ee(321))}function Z2(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zn(t[n],e[n]))return!1;return!0}function em(t,e,n,r,i,s){if(vs=s,nt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Tc.current=t===null||t.memoizedState===null?cC:hC,t=n(r,i),tl){s=0;do{if(tl=!1,kl=0,25<=s)throw Error(ee(301));s+=1,xt=yt=null,e.updateQueue=null,Tc.current=dC,t=n(r,i)}while(tl)}if(Tc.current=eh,e=yt!==null&&yt.next!==null,vs=0,xt=yt=nt=null,Zc=!1,e)throw Error(ee(300));return t}function tm(){var t=kl!==0;return kl=0,t}function sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?nt.memoizedState=xt=t:xt=xt.next=t,xt}function Vn(){if(yt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var e=xt===null?nt.memoizedState:xt.next;if(e!==null)xt=e,yt=t;else{if(t===null)throw Error(ee(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},xt===null?nt.memoizedState=xt=t:xt=xt.next=t}return xt}function Nl(t,e){return typeof e=="function"?e(t):e}function Of(t){var e=Vn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=yt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((vs&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=c,o=r):l=l.next=c,nt.lanes|=h,ys|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Zn(r,e.memoizedState)||(cn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,nt.lanes|=s,ys|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Lf(t){var e=Vn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Zn(s,e.memoizedState)||(cn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function GE(){}function QE(t,e){var n=nt,r=Vn(),i=e(),s=!Zn(r.memoizedState,i);if(s&&(r.memoizedState=i,cn=!0),r=r.queue,nm(JE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||xt!==null&&xt.memoizedState.tag&1){if(n.flags|=2048,Rl(9,XE.bind(null,n,r,i,e),void 0,null),St===null)throw Error(ee(349));vs&30||YE(n,e,i)}return i}function YE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function XE(t,e,n,r){e.value=n,e.getSnapshot=r,ZE(e)&&e3(t)}function JE(t,e,n){return n(function(){ZE(e)&&e3(t)})}function ZE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zn(t,n)}catch{return!0}}function e3(t){var e=Fr(t,1);e!==null&&Xn(e,t,1,-1)}function ov(t){var e=sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nl,lastRenderedState:t},e.queue=t,t=t.dispatch=uC.bind(null,nt,t),[e.memoizedState,t]}function Rl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function t3(){return Vn().memoizedState}function xc(t,e,n,r){var i=sr();nt.flags|=t,i.memoizedState=Rl(1|e,n,void 0,r===void 0?null:r)}function Jh(t,e,n,r){var i=Vn();r=r===void 0?null:r;var s=void 0;if(yt!==null){var o=yt.memoizedState;if(s=o.destroy,r!==null&&Z2(r,o.deps)){i.memoizedState=Rl(e,n,s,r);return}}nt.flags|=t,i.memoizedState=Rl(1|e,n,s,r)}function av(t,e){return xc(8390656,8,t,e)}function nm(t,e){return Jh(2048,8,t,e)}function n3(t,e){return Jh(4,2,t,e)}function r3(t,e){return Jh(4,4,t,e)}function i3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function s3(t,e,n){return n=n!=null?n.concat([t]):null,Jh(4,4,i3.bind(null,e,t),n)}function rm(){}function o3(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Z2(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function a3(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Z2(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function l3(t,e,n){return vs&21?(Zn(n,e)||(n=hE(),nt.lanes|=n,ys|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,cn=!0),t.memoizedState=n)}function aC(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var r=Pf.transition;Pf.transition={};try{t(!1),e()}finally{Fe=n,Pf.transition=r}}function u3(){return Vn().memoizedState}function lC(t,e,n){var r=vi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},c3(t))h3(e,n);else if(n=UE(t,e,n,r),n!==null){var i=rn();Xn(n,t,r,i),d3(n,e,r)}}function uC(t,e,n){var r=vi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(c3(t))h3(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Zn(a,o)){var l=e.interleaved;l===null?(i.next=i,G2(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=UE(t,e,i,r),n!==null&&(i=rn(),Xn(n,t,r,i),d3(n,e,r))}}function c3(t){var e=t.alternate;return t===nt||e!==null&&e===nt}function h3(t,e){tl=Zc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function d3(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,L2(t,n)}}var eh={readContext:$n,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},cC={readContext:$n,useCallback:function(t,e){return sr().memoizedState=[t,e===void 0?null:e],t},useContext:$n,useEffect:av,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xc(4194308,4,i3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xc(4194308,4,t,e)},useInsertionEffect:function(t,e){return xc(4,2,t,e)},useMemo:function(t,e){var n=sr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=sr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=lC.bind(null,nt,t),[r.memoizedState,t]},useRef:function(t){var e=sr();return t={current:t},e.memoizedState=t},useState:ov,useDebugValue:rm,useDeferredValue:function(t){return sr().memoizedState=t},useTransition:function(){var t=ov(!1),e=t[0];return t=aC.bind(null,t[1]),sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=nt,i=sr();if(Ze){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),St===null)throw Error(ee(349));vs&30||YE(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,av(JE.bind(null,r,s,t),[t]),r.flags|=2048,Rl(9,XE.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=sr(),e=St.identifierPrefix;if(Ze){var n=Ar,r=Cr;n=(r&~(1<<32-Yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=kl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=oC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hC={readContext:$n,useCallback:o3,useContext:$n,useEffect:nm,useImperativeHandle:s3,useInsertionEffect:n3,useLayoutEffect:r3,useMemo:a3,useReducer:Of,useRef:t3,useState:function(){return Of(Nl)},useDebugValue:rm,useDeferredValue:function(t){var e=Vn();return l3(e,yt.memoizedState,t)},useTransition:function(){var t=Of(Nl)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:GE,useSyncExternalStore:QE,useId:u3,unstable_isNewReconciler:!1},dC={readContext:$n,useCallback:o3,useContext:$n,useEffect:nm,useImperativeHandle:s3,useInsertionEffect:n3,useLayoutEffect:r3,useMemo:a3,useReducer:Lf,useRef:t3,useState:function(){return Lf(Nl)},useDebugValue:rm,useDeferredValue:function(t){var e=Vn();return yt===null?e.memoizedState=t:l3(e,yt.memoizedState,t)},useTransition:function(){var t=Lf(Nl)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:GE,useSyncExternalStore:QE,useId:u3,unstable_isNewReconciler:!1};function Ro(t,e){try{var n="",r=e;do n+=VI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Df(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function J0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fC=typeof WeakMap=="function"?WeakMap:Map;function f3(t,e,n){n=Or(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){nh||(nh=!0,lp=r),J0(t,e)},n}function p3(t,e,n){n=Or(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){J0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){J0(t,e),typeof r!="function"&&(gi===null?gi=new Set([this]):gi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function lv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=CC.bind(null,t,e,n),e.then(t,t))}function uv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Or(-1,1),e.tag=2,mi(n,e,1))),n.lanes|=1),t)}var pC=Hr.ReactCurrentOwner,cn=!1;function tn(t,e,n,r){e.child=t===null?WE(e,null,n,r):ko(e,t.child,n,r)}function hv(t,e,n,r,i){n=n.render;var s=e.ref;return mo(e,i),r=em(t,e,n,r,s,i),n=tm(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$r(t,e,i)):(Ze&&n&&B2(e),e.flags|=1,tn(t,e,r,i),e.child)}function dv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!hm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,m3(t,e,s,r,i)):(t=Cc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:xl,n(o,r)&&t.ref===e.ref)return $r(t,e,i)}return e.flags|=1,t=yi(s,r),t.ref=e.ref,t.return=e,e.child=t}function m3(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(xl(s,r)&&t.ref===e.ref)if(cn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(cn=!0);else return e.lanes=t.lanes,$r(t,e,i)}return Z0(t,e,n,r,i)}function g3(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(so,mn),mn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ze(so,mn),mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ze(so,mn),mn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ze(so,mn),mn|=r;return tn(t,e,i,n),e.child}function v3(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Z0(t,e,n,r,i){var s=fn(n)?ms:Yt.current;return s=Co(e,s),mo(e,i),n=em(t,e,n,r,s,i),r=tm(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$r(t,e,i)):(Ze&&r&&B2(e),e.flags|=1,tn(t,e,n,i),e.child)}function fv(t,e,n,r,i){if(fn(n)){var s=!0;Wc(e)}else s=!1;if(mo(e,i),e.stateNode===null)bc(t,e),zE(e,n,r),X0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=$n(u):(u=fn(n)?ms:Yt.current,u=Co(e,u));var h=n.getDerivedStateFromProps,c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&iv(e,o,r,u),Zr=!1;var d=e.memoizedState;o.state=d,Xc(e,r,o,i),l=e.memoizedState,a!==r||d!==l||dn.current||Zr?(typeof h=="function"&&(Y0(e,n,h,r),l=e.memoizedState),(a=Zr||rv(e,n,a,r,d,l,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,BE(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:zn(e.type,a),o.props=u,c=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=$n(l):(l=fn(n)?ms:Yt.current,l=Co(e,l));var f=n.getDerivedStateFromProps;(h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||d!==l)&&iv(e,o,r,l),Zr=!1,d=e.memoizedState,o.state=d,Xc(e,r,o,i);var v=e.memoizedState;a!==c||d!==v||dn.current||Zr?(typeof f=="function"&&(Y0(e,n,f,r),v=e.memoizedState),(u=Zr||rv(e,n,u,r,d,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return ep(t,e,n,r,s,i)}function ep(t,e,n,r,i,s){v3(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&J1(e,n,!1),$r(t,e,s);r=e.stateNode,pC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ko(e,t.child,null,s),e.child=ko(e,null,a,s)):tn(t,e,a,s),e.memoizedState=r.state,i&&J1(e,n,!0),e.child}function y3(t){var e=t.stateNode;e.pendingContext?X1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&X1(t,e.context,!1),Y2(t,e.containerInfo)}function pv(t,e,n,r,i){return Ao(),z2(i),e.flags|=256,tn(t,e,n,r),e.child}var tp={dehydrated:null,treeContext:null,retryLane:0};function np(t){return{baseLanes:t,cachePool:null,transitions:null}}function _3(t,e,n){var r=e.pendingProps,i=tt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ze(tt,i&1),t===null)return G0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=td(o,r,0,null),t=cs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=np(n),e.memoizedState=tp,t):im(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return mC(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=yi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=yi(a,s):(s=cs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?np(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=tp,r}return s=t.child,t=s.sibling,r=yi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function im(t,e){return e=td({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ju(t,e,n,r){return r!==null&&z2(r),ko(e,t.child,null,n),t=im(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Df(Error(ee(422))),Ju(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=td({mode:"visible",children:r.children},i,0,null),s=cs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ko(e,t.child,null,o),e.child.memoizedState=np(o),e.memoizedState=tp,s);if(!(e.mode&1))return Ju(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ee(419)),r=Df(s,r,void 0),Ju(t,e,o,r)}if(a=(o&t.childLanes)!==0,cn||a){if(r=St,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Fr(t,i),Xn(r,t,i,-1))}return cm(),r=Df(Error(ee(421))),Ju(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=AC.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,vn=pi(i.nextSibling),wn=e,Ze=!0,Wn=null,t!==null&&(Nn[Rn++]=Cr,Nn[Rn++]=Ar,Nn[Rn++]=gs,Cr=t.id,Ar=t.overflow,gs=e),e=im(e,r.children),e.flags|=4096,e)}function mv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Q0(t.return,e,n)}function Mf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function w3(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(tn(t,e,r.children,n),r=tt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mv(t,n,e);else if(t.tag===19)mv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ze(tt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Jc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Mf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Jc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Mf(e,!0,n,null,s);break;case"together":Mf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $r(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ys|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=yi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gC(t,e,n){switch(e.tag){case 3:y3(e),Ao();break;case 5:KE(e);break;case 1:fn(e.type)&&Wc(e);break;case 4:Y2(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ze(Qc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ze(tt,tt.current&1),e.flags|=128,null):n&e.child.childLanes?_3(t,e,n):(ze(tt,tt.current&1),t=$r(t,e,n),t!==null?t.sibling:null);ze(tt,tt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return w3(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ze(tt,tt.current),r)break;return null;case 22:case 23:return e.lanes=0,g3(t,e,n)}return $r(t,e,n)}var E3,rp,T3,x3;E3=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rp=function(){};T3=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ns(fr.current);var s=null;switch(n){case"input":i=I0(t,i),r=I0(t,r),s=[];break;case"select":i=rt({},i,{value:void 0}),r=rt({},r,{value:void 0}),s=[];break;case"textarea":i=A0(t,i),r=A0(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=zc)}N0(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(gl.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(gl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&We("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};x3=function(t,e,n,r){n!==r&&(e.flags|=4)};function xa(t,e){if(!Ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function $t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function vC(t,e,n){var r=e.pendingProps;switch(q2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(e),null;case 1:return fn(e.type)&&Hc(),$t(e),null;case 3:return r=e.stateNode,No(),Xe(dn),Xe(Yt),J2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Yu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wn!==null&&(hp(Wn),Wn=null))),rp(t,e),$t(e),null;case 5:X2(e);var i=ns(Al.current);if(n=e.type,t!==null&&e.stateNode!=null)T3(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return $t(e),null}if(t=ns(fr.current),Yu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[or]=e,r[Sl]=s,t=(e.mode&1)!==0,n){case"dialog":We("cancel",r),We("close",r);break;case"iframe":case"object":case"embed":We("load",r);break;case"video":case"audio":for(i=0;i<Va.length;i++)We(Va[i],r);break;case"source":We("error",r);break;case"img":case"image":case"link":We("error",r),We("load",r);break;case"details":We("toggle",r);break;case"input":b1(r,s),We("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},We("invalid",r);break;case"textarea":S1(r,s),We("invalid",r)}N0(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Qu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Qu(r.textContent,a,t),i=["children",""+a]):gl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&We("scroll",r)}switch(n){case"input":Uu(r),I1(r,s,!0);break;case"textarea":Uu(r),C1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=zc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Yw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[or]=e,t[Sl]=r,E3(t,e,!1,!1),e.stateNode=t;e:{switch(o=R0(n,r),n){case"dialog":We("cancel",t),We("close",t),i=r;break;case"iframe":case"object":case"embed":We("load",t),i=r;break;case"video":case"audio":for(i=0;i<Va.length;i++)We(Va[i],t);i=r;break;case"source":We("error",t),i=r;break;case"img":case"image":case"link":We("error",t),We("load",t),i=r;break;case"details":We("toggle",t),i=r;break;case"input":b1(t,r),i=I0(t,r),We("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=rt({},r,{value:void 0}),We("invalid",t);break;case"textarea":S1(t,r),i=A0(t,r),We("invalid",t);break;default:i=r}N0(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Zw(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Xw(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&vl(t,l):typeof l=="number"&&vl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(gl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&We("scroll",t):l!=null&&A2(t,s,l,o))}switch(n){case"input":Uu(t),I1(t,r,!1);break;case"textarea":Uu(t),C1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ii(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?co(t,!!r.multiple,s,!1):r.defaultValue!=null&&co(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=zc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $t(e),null;case 6:if(t&&e.stateNode!=null)x3(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(n=ns(Al.current),ns(fr.current),Yu(e)){if(r=e.stateNode,n=e.memoizedProps,r[or]=e,(s=r.nodeValue!==n)&&(t=wn,t!==null))switch(t.tag){case 3:Qu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[or]=e,e.stateNode=r}return $t(e),null;case 13:if(Xe(tt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&vn!==null&&e.mode&1&&!(e.flags&128))VE(),Ao(),e.flags|=98560,s=!1;else if(s=Yu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ee(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ee(317));s[or]=e}else Ao(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$t(e),s=!1}else Wn!==null&&(hp(Wn),Wn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tt.current&1?_t===0&&(_t=3):cm())),e.updateQueue!==null&&(e.flags|=4),$t(e),null);case 4:return No(),rp(t,e),t===null&&bl(e.stateNode.containerInfo),$t(e),null;case 10:return K2(e.type._context),$t(e),null;case 17:return fn(e.type)&&Hc(),$t(e),null;case 19:if(Xe(tt),s=e.memoizedState,s===null)return $t(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)xa(s,!1);else{if(_t!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Jc(t),o!==null){for(e.flags|=128,xa(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ze(tt,tt.current&1|2),e.child}t=t.sibling}s.tail!==null&&lt()>Po&&(e.flags|=128,r=!0,xa(s,!1),e.lanes=4194304)}else{if(!r)if(t=Jc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ze)return $t(e),null}else 2*lt()-s.renderingStartTime>Po&&n!==1073741824&&(e.flags|=128,r=!0,xa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=lt(),e.sibling=null,n=tt.current,ze(tt,r?n&1|2:n&1),e):($t(e),null);case 22:case 23:return um(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?mn&1073741824&&($t(e),e.subtreeFlags&6&&(e.flags|=8192)):$t(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function yC(t,e){switch(q2(e),e.tag){case 1:return fn(e.type)&&Hc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return No(),Xe(dn),Xe(Yt),J2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return X2(e),null;case 13:if(Xe(tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));Ao()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xe(tt),null;case 4:return No(),null;case 10:return K2(e.type._context),null;case 22:case 23:return um(),null;case 24:return null;default:return null}}var Zu=!1,Bt=!1,_C=typeof WeakSet=="function"?WeakSet:Set,ae=null;function io(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){it(t,e,r)}else n.current=null}function ip(t,e,n){try{n()}catch(r){it(t,e,r)}}var gv=!1;function wC(t,e){if(U0=Uc,t=CE(),U2(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,c=t,d=null;t:for(;;){for(var f;c!==n||i!==0&&c.nodeType!==3||(a=o+i),c!==s||r!==0&&c.nodeType!==3||(l=o+r),c.nodeType===3&&(o+=c.nodeValue.length),(f=c.firstChild)!==null;)d=c,c=f;for(;;){if(c===t)break t;if(d===n&&++u===i&&(a=o),d===s&&++h===r&&(l=o),(f=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(B0={focusedElem:t,selectionRange:n},Uc=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,w=v.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?y:zn(e.type,y),w);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(g){it(e,e.return,g)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return v=gv,gv=!1,v}function nl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ip(e,n,s)}i=i.next}while(i!==r)}}function Zh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function sp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function b3(t){var e=t.alternate;e!==null&&(t.alternate=null,b3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[or],delete e[Sl],delete e[H0],delete e[nC],delete e[rC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function I3(t){return t.tag===5||t.tag===3||t.tag===4}function vv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||I3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function op(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zc));else if(r!==4&&(t=t.child,t!==null))for(op(t,e,n),t=t.sibling;t!==null;)op(t,e,n),t=t.sibling}function ap(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ap(t,e,n),t=t.sibling;t!==null;)ap(t,e,n),t=t.sibling}var kt=null,Hn=!1;function Yr(t,e,n){for(n=n.child;n!==null;)S3(t,e,n),n=n.sibling}function S3(t,e,n){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(Hh,n)}catch{}switch(n.tag){case 5:Bt||io(n,e);case 6:var r=kt,i=Hn;kt=null,Yr(t,e,n),kt=r,Hn=i,kt!==null&&(Hn?(t=kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):kt.removeChild(n.stateNode));break;case 18:kt!==null&&(Hn?(t=kt,n=n.stateNode,t.nodeType===8?kf(t.parentNode,n):t.nodeType===1&&kf(t,n),El(t)):kf(kt,n.stateNode));break;case 4:r=kt,i=Hn,kt=n.stateNode.containerInfo,Hn=!0,Yr(t,e,n),kt=r,Hn=i;break;case 0:case 11:case 14:case 15:if(!Bt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ip(n,e,o),i=i.next}while(i!==r)}Yr(t,e,n);break;case 1:if(!Bt&&(io(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){it(n,e,a)}Yr(t,e,n);break;case 21:Yr(t,e,n);break;case 22:n.mode&1?(Bt=(r=Bt)||n.memoizedState!==null,Yr(t,e,n),Bt=r):Yr(t,e,n);break;default:Yr(t,e,n)}}function yv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _C),e.forEach(function(r){var i=kC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:kt=a.stateNode,Hn=!1;break e;case 3:kt=a.stateNode.containerInfo,Hn=!0;break e;case 4:kt=a.stateNode.containerInfo,Hn=!0;break e}a=a.return}if(kt===null)throw Error(ee(160));S3(s,o,i),kt=null,Hn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){it(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)C3(e,t),e=e.sibling}function C3(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(e,t),rr(t),r&4){try{nl(3,t,t.return),Zh(3,t)}catch(y){it(t,t.return,y)}try{nl(5,t,t.return)}catch(y){it(t,t.return,y)}}break;case 1:qn(e,t),rr(t),r&512&&n!==null&&io(n,n.return);break;case 5:if(qn(e,t),rr(t),r&512&&n!==null&&io(n,n.return),t.flags&32){var i=t.stateNode;try{vl(i,"")}catch(y){it(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Gw(i,s),R0(a,o);var u=R0(a,s);for(o=0;o<l.length;o+=2){var h=l[o],c=l[o+1];h==="style"?Zw(i,c):h==="dangerouslySetInnerHTML"?Xw(i,c):h==="children"?vl(i,c):A2(i,h,c,u)}switch(a){case"input":S0(i,s);break;case"textarea":Qw(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?co(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?co(i,!!s.multiple,s.defaultValue,!0):co(i,!!s.multiple,s.multiple?[]:"",!1))}i[Sl]=s}catch(y){it(t,t.return,y)}}break;case 6:if(qn(e,t),rr(t),r&4){if(t.stateNode===null)throw Error(ee(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){it(t,t.return,y)}}break;case 3:if(qn(e,t),rr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{El(e.containerInfo)}catch(y){it(t,t.return,y)}break;case 4:qn(e,t),rr(t);break;case 13:qn(e,t),rr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(am=lt())),r&4&&yv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Bt=(u=Bt)||h,qn(e,t),Bt=u):qn(e,t),rr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ae=t,h=t.child;h!==null;){for(c=ae=h;ae!==null;){switch(d=ae,f=d.child,d.tag){case 0:case 11:case 14:case 15:nl(4,d,d.return);break;case 1:io(d,d.return);var v=d.stateNode;if(typeof v.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){it(r,n,y)}}break;case 5:io(d,d.return);break;case 22:if(d.memoizedState!==null){wv(c);continue}}f!==null?(f.return=d,ae=f):wv(c)}h=h.sibling}e:for(h=null,c=t;;){if(c.tag===5){if(h===null){h=c;try{i=c.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=c.stateNode,l=c.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Jw("display",o))}catch(y){it(t,t.return,y)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(y){it(t,t.return,y)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:qn(e,t),rr(t),r&4&&yv(t);break;case 21:break;default:qn(e,t),rr(t)}}function rr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(I3(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(vl(i,""),r.flags&=-33);var s=vv(t);ap(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=vv(t);op(t,a,o);break;default:throw Error(ee(161))}}catch(l){it(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function EC(t,e,n){ae=t,A3(t)}function A3(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var i=ae,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Zu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Bt;a=Zu;var u=Bt;if(Zu=o,(Bt=l)&&!u)for(ae=i;ae!==null;)o=ae,l=o.child,o.tag===22&&o.memoizedState!==null?Ev(i):l!==null?(l.return=o,ae=l):Ev(i);for(;s!==null;)ae=s,A3(s),s=s.sibling;ae=i,Zu=a,Bt=u}_v(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ae=s):_v(t)}}function _v(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bt||Zh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Bt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:zn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&nv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}nv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&El(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Bt||e.flags&512&&sp(e)}catch(d){it(e,e.return,d)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function wv(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function Ev(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zh(4,e)}catch(l){it(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){it(e,i,l)}}var s=e.return;try{sp(e)}catch(l){it(e,s,l)}break;case 5:var o=e.return;try{sp(e)}catch(l){it(e,o,l)}}}catch(l){it(e,e.return,l)}if(e===t){ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ae=a;break}ae=e.return}}var TC=Math.ceil,th=Hr.ReactCurrentDispatcher,sm=Hr.ReactCurrentOwner,Dn=Hr.ReactCurrentBatchConfig,Ne=0,St=null,dt=null,Ot=0,mn=0,so=Di(0),_t=0,Pl=null,ys=0,ed=0,om=0,rl=null,ln=null,am=0,Po=1/0,br=null,nh=!1,lp=null,gi=null,ec=!1,li=null,rh=0,il=0,up=null,Ic=-1,Sc=0;function rn(){return Ne&6?lt():Ic!==-1?Ic:Ic=lt()}function vi(t){return t.mode&1?Ne&2&&Ot!==0?Ot&-Ot:sC.transition!==null?(Sc===0&&(Sc=hE()),Sc):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:yE(t.type)),t):1}function Xn(t,e,n,r){if(50<il)throw il=0,up=null,Error(ee(185));ou(t,n,r),(!(Ne&2)||t!==St)&&(t===St&&(!(Ne&2)&&(ed|=n),_t===4&&ti(t,Ot)),pn(t,r),n===1&&Ne===0&&!(e.mode&1)&&(Po=lt()+500,Yh&&Mi()))}function pn(t,e){var n=t.callbackNode;sS(t,e);var r=Vc(t,t===St?Ot:0);if(r===0)n!==null&&N1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&N1(n),e===1)t.tag===0?iC(Tv.bind(null,t)):jE(Tv.bind(null,t)),eC(function(){!(Ne&6)&&Mi()}),n=null;else{switch(dE(r)){case 1:n=O2;break;case 4:n=uE;break;case 16:n=$c;break;case 536870912:n=cE;break;default:n=$c}n=M3(n,k3.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function k3(t,e){if(Ic=-1,Sc=0,Ne&6)throw Error(ee(327));var n=t.callbackNode;if(go()&&t.callbackNode!==n)return null;var r=Vc(t,t===St?Ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ih(t,r);else{e=r;var i=Ne;Ne|=2;var s=R3();(St!==t||Ot!==e)&&(br=null,Po=lt()+500,us(t,e));do try{IC();break}catch(a){N3(t,a)}while(!0);W2(),th.current=s,Ne=i,dt!==null?e=0:(St=null,Ot=0,e=_t)}if(e!==0){if(e===2&&(i=M0(t),i!==0&&(r=i,e=cp(t,i))),e===1)throw n=Pl,us(t,0),ti(t,r),pn(t,lt()),n;if(e===6)ti(t,r);else{if(i=t.current.alternate,!(r&30)&&!xC(i)&&(e=ih(t,r),e===2&&(s=M0(t),s!==0&&(r=s,e=cp(t,s))),e===1))throw n=Pl,us(t,0),ti(t,r),pn(t,lt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ee(345));case 2:Qi(t,ln,br);break;case 3:if(ti(t,r),(r&130023424)===r&&(e=am+500-lt(),10<e)){if(Vc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){rn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=z0(Qi.bind(null,t,ln,br),e);break}Qi(t,ln,br);break;case 4:if(ti(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Yn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=lt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*TC(r/1960))-r,10<r){t.timeoutHandle=z0(Qi.bind(null,t,ln,br),r);break}Qi(t,ln,br);break;case 5:Qi(t,ln,br);break;default:throw Error(ee(329))}}}return pn(t,lt()),t.callbackNode===n?k3.bind(null,t):null}function cp(t,e){var n=rl;return t.current.memoizedState.isDehydrated&&(us(t,e).flags|=256),t=ih(t,e),t!==2&&(e=ln,ln=n,e!==null&&hp(e)),t}function hp(t){ln===null?ln=t:ln.push.apply(ln,t)}function xC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Zn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ti(t,e){for(e&=~om,e&=~ed,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yn(e),r=1<<n;t[n]=-1,e&=~r}}function Tv(t){if(Ne&6)throw Error(ee(327));go();var e=Vc(t,0);if(!(e&1))return pn(t,lt()),null;var n=ih(t,e);if(t.tag!==0&&n===2){var r=M0(t);r!==0&&(e=r,n=cp(t,r))}if(n===1)throw n=Pl,us(t,0),ti(t,e),pn(t,lt()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qi(t,ln,br),pn(t,lt()),null}function lm(t,e){var n=Ne;Ne|=1;try{return t(e)}finally{Ne=n,Ne===0&&(Po=lt()+500,Yh&&Mi())}}function _s(t){li!==null&&li.tag===0&&!(Ne&6)&&go();var e=Ne;Ne|=1;var n=Dn.transition,r=Fe;try{if(Dn.transition=null,Fe=1,t)return t()}finally{Fe=r,Dn.transition=n,Ne=e,!(Ne&6)&&Mi()}}function um(){mn=so.current,Xe(so)}function us(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ZS(n)),dt!==null)for(n=dt.return;n!==null;){var r=n;switch(q2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hc();break;case 3:No(),Xe(dn),Xe(Yt),J2();break;case 5:X2(r);break;case 4:No();break;case 13:Xe(tt);break;case 19:Xe(tt);break;case 10:K2(r.type._context);break;case 22:case 23:um()}n=n.return}if(St=t,dt=t=yi(t.current,null),Ot=mn=e,_t=0,Pl=null,om=ed=ys=0,ln=rl=null,ts!==null){for(e=0;e<ts.length;e++)if(n=ts[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ts=null}return t}function N3(t,e){do{var n=dt;try{if(W2(),Tc.current=eh,Zc){for(var r=nt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Zc=!1}if(vs=0,xt=yt=nt=null,tl=!1,kl=0,sm.current=null,n===null||n.return===null){_t=1,Pl=e,dt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ot,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=uv(o);if(f!==null){f.flags&=-257,cv(f,o,a,s,e),f.mode&1&&lv(s,u,e),e=f,l=u;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){lv(s,u,e),cm();break e}l=Error(ee(426))}}else if(Ze&&a.mode&1){var w=uv(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),cv(w,o,a,s,e),z2(Ro(l,a));break e}}s=l=Ro(l,a),_t!==4&&(_t=2),rl===null?rl=[s]:rl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=f3(s,l,e);tv(s,p);break e;case 1:a=l;var m=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(gi===null||!gi.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var g=p3(s,a,e);tv(s,g);break e}}s=s.return}while(s!==null)}O3(n)}catch(T){e=T,dt===n&&n!==null&&(dt=n=n.return);continue}break}while(!0)}function R3(){var t=th.current;return th.current=eh,t===null?eh:t}function cm(){(_t===0||_t===3||_t===2)&&(_t=4),St===null||!(ys&268435455)&&!(ed&268435455)||ti(St,Ot)}function ih(t,e){var n=Ne;Ne|=2;var r=R3();(St!==t||Ot!==e)&&(br=null,us(t,e));do try{bC();break}catch(i){N3(t,i)}while(!0);if(W2(),Ne=n,th.current=r,dt!==null)throw Error(ee(261));return St=null,Ot=0,_t}function bC(){for(;dt!==null;)P3(dt)}function IC(){for(;dt!==null&&!YI();)P3(dt)}function P3(t){var e=D3(t.alternate,t,mn);t.memoizedProps=t.pendingProps,e===null?O3(t):dt=e,sm.current=null}function O3(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=yC(n,e),n!==null){n.flags&=32767,dt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_t=6,dt=null;return}}else if(n=vC(n,e,mn),n!==null){dt=n;return}if(e=e.sibling,e!==null){dt=e;return}dt=e=t}while(e!==null);_t===0&&(_t=5)}function Qi(t,e,n){var r=Fe,i=Dn.transition;try{Dn.transition=null,Fe=1,SC(t,e,n,r)}finally{Dn.transition=i,Fe=r}return null}function SC(t,e,n,r){do go();while(li!==null);if(Ne&6)throw Error(ee(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(oS(t,s),t===St&&(dt=St=null,Ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ec||(ec=!0,M3($c,function(){return go(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Dn.transition,Dn.transition=null;var o=Fe;Fe=1;var a=Ne;Ne|=4,sm.current=null,wC(t,n),C3(n,t),WS(B0),Uc=!!U0,B0=U0=null,t.current=n,EC(n),XI(),Ne=a,Fe=o,Dn.transition=s}else t.current=n;if(ec&&(ec=!1,li=t,rh=i),s=t.pendingLanes,s===0&&(gi=null),eS(n.stateNode),pn(t,lt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(nh)throw nh=!1,t=lp,lp=null,t;return rh&1&&t.tag!==0&&go(),s=t.pendingLanes,s&1?t===up?il++:(il=0,up=t):il=0,Mi(),null}function go(){if(li!==null){var t=dE(rh),e=Dn.transition,n=Fe;try{if(Dn.transition=null,Fe=16>t?16:t,li===null)var r=!1;else{if(t=li,li=null,rh=0,Ne&6)throw Error(ee(331));var i=Ne;for(Ne|=4,ae=t.current;ae!==null;){var s=ae,o=s.child;if(ae.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ae=u;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:nl(8,h,s)}var c=h.child;if(c!==null)c.return=h,ae=c;else for(;ae!==null;){h=ae;var d=h.sibling,f=h.return;if(b3(h),h===u){ae=null;break}if(d!==null){d.return=f,ae=d;break}ae=f}}}var v=s.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}ae=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ae=o;else e:for(;ae!==null;){if(s=ae,s.flags&2048)switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,ae=p;break e}ae=s.return}}var m=t.current;for(ae=m;ae!==null;){o=ae;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,ae=E;else e:for(o=m;ae!==null;){if(a=ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Zh(9,a)}}catch(T){it(a,a.return,T)}if(a===o){ae=null;break e}var g=a.sibling;if(g!==null){g.return=a.return,ae=g;break e}ae=a.return}}if(Ne=i,Mi(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(Hh,t)}catch{}r=!0}return r}finally{Fe=n,Dn.transition=e}}return!1}function xv(t,e,n){e=Ro(n,e),e=f3(t,e,1),t=mi(t,e,1),e=rn(),t!==null&&(ou(t,1,e),pn(t,e))}function it(t,e,n){if(t.tag===3)xv(t,t,n);else for(;e!==null;){if(e.tag===3){xv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gi===null||!gi.has(r))){t=Ro(n,t),t=p3(e,t,1),e=mi(e,t,1),t=rn(),e!==null&&(ou(e,1,t),pn(e,t));break}}e=e.return}}function CC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=rn(),t.pingedLanes|=t.suspendedLanes&n,St===t&&(Ot&n)===n&&(_t===4||_t===3&&(Ot&130023424)===Ot&&500>lt()-am?us(t,0):om|=n),pn(t,e)}function L3(t,e){e===0&&(t.mode&1?(e=zu,zu<<=1,!(zu&130023424)&&(zu=4194304)):e=1);var n=rn();t=Fr(t,e),t!==null&&(ou(t,e,n),pn(t,n))}function AC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),L3(t,n)}function kC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(e),L3(t,n)}var D3;D3=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||dn.current)cn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return cn=!1,gC(t,e,n);cn=!!(t.flags&131072)}else cn=!1,Ze&&e.flags&1048576&&FE(e,Gc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;bc(t,e),t=e.pendingProps;var i=Co(e,Yt.current);mo(e,n),i=em(null,e,r,t,i,n);var s=tm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fn(r)?(s=!0,Wc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Q2(e),i.updater=Xh,e.stateNode=i,i._reactInternals=e,X0(e,r,t,n),e=ep(null,e,r,!0,s,n)):(e.tag=0,Ze&&s&&B2(e),tn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(bc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=RC(r),t=zn(r,t),i){case 0:e=Z0(null,e,r,t,n);break e;case 1:e=fv(null,e,r,t,n);break e;case 11:e=hv(null,e,r,t,n);break e;case 14:e=dv(null,e,r,zn(r.type,t),n);break e}throw Error(ee(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zn(r,i),Z0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zn(r,i),fv(t,e,r,i,n);case 3:e:{if(y3(e),t===null)throw Error(ee(387));r=e.pendingProps,s=e.memoizedState,i=s.element,BE(t,e),Xc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ro(Error(ee(423)),e),e=pv(t,e,r,n,i);break e}else if(r!==i){i=Ro(Error(ee(424)),e),e=pv(t,e,r,n,i);break e}else for(vn=pi(e.stateNode.containerInfo.firstChild),wn=e,Ze=!0,Wn=null,n=WE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ao(),r===i){e=$r(t,e,n);break e}tn(t,e,r,n)}e=e.child}return e;case 5:return KE(e),t===null&&G0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,q0(r,i)?o=null:s!==null&&q0(r,s)&&(e.flags|=32),v3(t,e),tn(t,e,o,n),e.child;case 6:return t===null&&G0(e),null;case 13:return _3(t,e,n);case 4:return Y2(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ko(e,null,r,n):tn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zn(r,i),hv(t,e,r,i,n);case 7:return tn(t,e,e.pendingProps,n),e.child;case 8:return tn(t,e,e.pendingProps.children,n),e.child;case 12:return tn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ze(Qc,r._currentValue),r._currentValue=o,s!==null)if(Zn(s.value,o)){if(s.children===i.children&&!dn.current){e=$r(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Or(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Q0(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ee(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Q0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}tn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,mo(e,n),i=$n(i),r=r(i),e.flags|=1,tn(t,e,r,n),e.child;case 14:return r=e.type,i=zn(r,e.pendingProps),i=zn(r.type,i),dv(t,e,r,i,n);case 15:return m3(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zn(r,i),bc(t,e),e.tag=1,fn(r)?(t=!0,Wc(e)):t=!1,mo(e,n),zE(e,r,i),X0(e,r,i,n),ep(null,e,r,!0,t,n);case 19:return w3(t,e,n);case 22:return g3(t,e,n)}throw Error(ee(156,e.tag))};function M3(t,e){return lE(t,e)}function NC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(t,e,n,r){return new NC(t,e,n,r)}function hm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function RC(t){if(typeof t=="function")return hm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===N2)return 11;if(t===R2)return 14}return 2}function yi(t,e){var n=t.alternate;return n===null?(n=On(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Cc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")hm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Qs:return cs(n.children,i,s,e);case k2:o=8,i|=8;break;case E0:return t=On(12,n,e,i|2),t.elementType=E0,t.lanes=s,t;case T0:return t=On(13,n,e,i),t.elementType=T0,t.lanes=s,t;case x0:return t=On(19,n,e,i),t.elementType=x0,t.lanes=s,t;case Hw:return td(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qw:o=10;break e;case zw:o=9;break e;case N2:o=11;break e;case R2:o=14;break e;case Jr:o=16,r=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=On(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function cs(t,e,n,r){return t=On(7,t,r,e),t.lanes=n,t}function td(t,e,n,r){return t=On(22,t,r,e),t.elementType=Hw,t.lanes=n,t.stateNode={isHidden:!1},t}function jf(t,e,n){return t=On(6,t,null,e),t.lanes=n,t}function Ff(t,e,n){return e=On(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yf(0),this.expirationTimes=yf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function dm(t,e,n,r,i,s,o,a,l){return t=new PC(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=On(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Q2(s),t}function OC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function j3(t){if(!t)return Si;t=t._reactInternals;e:{if(Rs(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(fn(n))return ME(t,n,e)}return e}function F3(t,e,n,r,i,s,o,a,l){return t=dm(n,r,!0,t,i,s,o,a,l),t.context=j3(null),n=t.current,r=rn(),i=vi(n),s=Or(r,i),s.callback=e??null,mi(n,s,i),t.current.lanes=i,ou(t,i,r),pn(t,r),t}function nd(t,e,n,r){var i=e.current,s=rn(),o=vi(i);return n=j3(n),e.context===null?e.context=n:e.pendingContext=n,e=Or(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=mi(i,e,o),t!==null&&(Xn(t,i,o,s),Ec(t,i,o)),o}function sh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function bv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fm(t,e){bv(t,e),(t=t.alternate)&&bv(t,e)}function LC(){return null}var $3=typeof reportError=="function"?reportError:function(t){console.error(t)};function pm(t){this._internalRoot=t}rd.prototype.render=pm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));nd(t,e,null,null)};rd.prototype.unmount=pm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_s(function(){nd(null,t,null,null)}),e[jr]=null}};function rd(t){this._internalRoot=t}rd.prototype.unstable_scheduleHydration=function(t){if(t){var e=mE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ei.length&&e!==0&&e<ei[n].priority;n++);ei.splice(n,0,t),n===0&&vE(t)}};function mm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function id(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Iv(){}function DC(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=sh(o);s.call(u)}}var o=F3(e,r,t,0,null,!1,!1,"",Iv);return t._reactRootContainer=o,t[jr]=o.current,bl(t.nodeType===8?t.parentNode:t),_s(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=sh(l);a.call(u)}}var l=dm(t,0,!1,null,null,!1,!1,"",Iv);return t._reactRootContainer=l,t[jr]=l.current,bl(t.nodeType===8?t.parentNode:t),_s(function(){nd(e,l,n,r)}),l}function sd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=sh(o);a.call(l)}}nd(e,o,t,i)}else o=DC(n,e,t,i,r);return sh(o)}fE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$a(e.pendingLanes);n!==0&&(L2(e,n|1),pn(e,lt()),!(Ne&6)&&(Po=lt()+500,Mi()))}break;case 13:_s(function(){var r=Fr(t,1);if(r!==null){var i=rn();Xn(r,t,1,i)}}),fm(t,1)}};D2=function(t){if(t.tag===13){var e=Fr(t,134217728);if(e!==null){var n=rn();Xn(e,t,134217728,n)}fm(t,134217728)}};pE=function(t){if(t.tag===13){var e=vi(t),n=Fr(t,e);if(n!==null){var r=rn();Xn(n,t,e,r)}fm(t,e)}};mE=function(){return Fe};gE=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};O0=function(t,e,n){switch(e){case"input":if(S0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Qh(r);if(!i)throw Error(ee(90));Kw(r),S0(r,i)}}}break;case"textarea":Qw(t,n);break;case"select":e=n.value,e!=null&&co(t,!!n.multiple,e,!1)}};nE=lm;rE=_s;var MC={usingClientEntryPoint:!1,Events:[lu,Zs,Qh,eE,tE,lm]},ba={findFiberByHostInstance:es,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},jC={bundleType:ba.bundleType,version:ba.version,rendererPackageName:ba.rendererPackageName,rendererConfig:ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=oE(t),t===null?null:t.stateNode},findFiberByHostInstance:ba.findFiberByHostInstance||LC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tc.isDisabled&&tc.supportsFiber)try{Hh=tc.inject(jC),dr=tc}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MC;Sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mm(e))throw Error(ee(200));return OC(t,e,null,n)};Sn.createRoot=function(t,e){if(!mm(t))throw Error(ee(299));var n=!1,r="",i=$3;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=dm(t,1,!1,null,null,n,!1,r,i),t[jr]=e.current,bl(t.nodeType===8?t.parentNode:t),new pm(e)};Sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=oE(e),t=t===null?null:t.stateNode,t};Sn.flushSync=function(t){return _s(t)};Sn.hydrate=function(t,e,n){if(!id(e))throw Error(ee(200));return sd(null,t,e,!0,n)};Sn.hydrateRoot=function(t,e,n){if(!mm(t))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=$3;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=F3(e,null,t,1,n??null,i,!1,s,o),t[jr]=e.current,bl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new rd(e)};Sn.render=function(t,e,n){if(!id(e))throw Error(ee(200));return sd(null,t,e,!1,n)};Sn.unmountComponentAtNode=function(t){if(!id(t))throw Error(ee(40));return t._reactRootContainer?(_s(function(){sd(null,null,t,!1,function(){t._reactRootContainer=null,t[jr]=null})}),!0):!1};Sn.unstable_batchedUpdates=lm;Sn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!id(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return sd(t,e,n,!1,r)};Sn.version="18.2.0-next-9e3b772b8-20220608";function V3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(V3)}catch(t){console.error(t)}}V3(),Fw.exports=Sn;var U3=Fw.exports,Sv=U3;_0.createRoot=Sv.createRoot,_0.hydrateRoot=Sv.hydrateRoot;const FC="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%20width='500'%20height='500'%3e%3cpath%20d='M41.9375%208.625C41.273438%208.648438%2040.664063%209%2040.3125%209.5625L21.5%2038.34375L9.3125%2027.8125C8.789063%2027.269531%208.003906%2027.066406%207.28125%2027.292969C6.5625%2027.515625%206.027344%2028.125%205.902344%2028.867188C5.777344%2029.613281%206.078125%2030.363281%206.6875%2030.8125L20.625%2042.875C21.0625%2043.246094%2021.640625%2043.410156%2022.207031%2043.328125C22.777344%2043.242188%2023.28125%2042.917969%2023.59375%2042.4375L43.6875%2011.75C44.117188%2011.121094%2044.152344%2010.308594%2043.78125%209.644531C43.410156%208.984375%2042.695313%208.589844%2041.9375%208.625Z'%20fill='%231EE97C'%20/%3e%3c/svg%3e",$C="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%20width='500'%20height='500'%3e%3cpath%20d='M9.15625%206.3125L6.3125%209.15625L22.15625%2025L6.21875%2040.96875L9.03125%2043.78125L25%2027.84375L40.9375%2043.78125L43.78125%2040.9375L27.84375%2025L43.6875%209.15625L40.84375%206.3125L25%2022.15625Z'%20fill='%23E91E25'%20/%3e%3c/svg%3e",VC="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M15%203C14.168432%203%2013.456063%203.5067238%2013.154297%204.2285156L2.3007812%2022.947266L2.3007812%2022.949219%20A%202%202%200%200%200%202%2024%20A%202%202%200%200%200%204%2026%20A%202%202%200%200%200%204.140625%2025.994141L4.1445312%2026L15%2026L25.855469%2026L25.859375%2025.992188%20A%202%202%200%200%200%2026%2026%20A%202%202%200%200%200%2028%2024%20A%202%202%200%200%200%2027.699219%2022.947266L27.683594%2022.919922%20A%202%202%200%200%200%2027.681641%2022.917969L16.845703%204.2285156C16.543937%203.5067238%2015.831568%203%2015%203%20z%20M%2013.787109%2011.359375L16.212891%2011.359375L16.011719%2017.832031L13.988281%2017.832031L13.787109%2011.359375%20z%20M%2015.003906%2019.810547C15.825906%2019.810547%2016.318359%2020.252813%2016.318359%2021.007812C16.318359%2021.748812%2015.825906%2022.189453%2015.003906%2022.189453C14.175906%2022.189453%2013.679688%2021.748813%2013.679688%2021.007812C13.679688%2020.252813%2014.174906%2019.810547%2015.003906%2019.810547%20z'%20fill='%23E91E25'%20/%3e%3c/svg%3e",UC="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M3,12v-2c0-0.386,0.223-0.738,0.572-0.904s0.762-0.115,1.062,0.13L15,17.708l10.367-8.482%20c0.299-0.245,0.712-0.295,1.062-0.13C26.779,9.261,27,9.614,27,10v2c0,0.3-0.135,0.584-0.367,0.774l-11,9%20c-0.369,0.301-0.898,0.301-1.267,0l-11-9C3.135,12.584,3,12.3,3,12z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",BC="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M17,3h2c0.386,0,0.738,0.223,0.904,0.572s0.115,0.762-0.13,1.062L11.292,15l8.482,10.367%20c0.245,0.299,0.295,0.712,0.13,1.062S19.386,27,19,27h-2c-0.3,0-0.584-0.135-0.774-0.367l-9-11c-0.301-0.369-0.301-0.898,0-1.267%20l9-11C16.416,3.135,16.7,3,17,3z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",qC="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M19,7h-6.774l0.564-1.551c0.604-1.662-0.134-3.512-1.716-4.302c-0.691-0.345-1.532-0.064-1.877,0.627L6.339,7.504%20C5.532,8.042,5,8.958,5,10v7c0,2.209,1.791,4,4,4h6.989c2.344,0,4.373-1.628,4.881-3.915L22,12v-2C22,8.343,20.657,7,19,7z'%20opacity='.35'%20fill='%232E2E2E'%20/%3e%3cpath%20d='M7,19.5c0-0.386,0-10.614,0-11C7,7.672,6.328,7,5.5,7S4,7.672,4,8.5c0,0.386,0,10.614,0,11C4,20.328,4.672,21,5.5,21S7,20.328,7,19.5z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",zC="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M12,6h4V3.706c0-0.615,0.742-0.924,1.178-0.491l4.104,4.075c0.395,0.391,0.395,1.03,0,1.421l-4.104,4.075C16.742,13.218,16,12.908,16,12.294V10h-4c-4.351,0-5,2.661-5,4H3C3,10.31,5.357,6,12,6z'%20opacity='.35'%20fill='%232E2E2E'%20/%3e%3cpath%20d='M8,22c0.513,0,1.024-0.196,1.415-0.587c0.78-0.781,0.78-2.046,0-2.827C8.786,17.951,7,15.753,7,14c0-6.845,5-8,5-8c-6.643,0-9,4.31-9,8c0,3.726,3.22,7.049,3.587,7.415C6.978,21.805,7.488,22,8,22z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",HC="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M12,27h-2c-0.386,0-0.738-0.223-0.904-0.572s-0.115-0.762,0.13-1.062L17.708,15L9.226,4.633%20c-0.245-0.299-0.295-0.712-0.13-1.062S9.614,3,10,3h2c0.3,0,0.584,0.135,0.774,0.367l9,11c0.301,0.369,0.301,0.898,0,1.267l-9,11%20C12.584,26.865,12.3,27,12,27z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",WC="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M11.5%206C8.4802259%206%206%208.4802259%206%2011.5L6%2036.5C6%2039.519774%208.4802259%2042%2011.5%2042L36.5%2042C39.519774%2042%2042%2039.519774%2042%2036.5L42%2011.5C42%208.4802259%2039.519774%206%2036.5%206L11.5%206%20z%20M%2011.5%209L36.5%209C37.898226%209%2039%2010.101774%2039%2011.5L39%2036.5C39%2037.898226%2037.898226%2039%2036.5%2039L11.5%2039C10.101774%2039%209%2037.898226%209%2036.5L9%2011.5C9%2010.101774%2010.101774%209%2011.5%209%20z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",KC="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%204C11.832031%204%208.152344%206.113281%206%209.34375L6%206L4%206L4%2013L11%2013L11%2011L7.375%2011C9.101563%208.019531%2012.296875%206%2016%206C21.535156%206%2026%2010.464844%2026%2016C26%2021.535156%2021.535156%2026%2016%2026C10.464844%2026%206%2021.535156%206%2016L4%2016C4%2022.617188%209.382813%2028%2016%2028C22.617188%2028%2028%2022.617188%2028%2016C28%209.382813%2022.617188%204%2016%204%20Z%20M%2015%208L15%2017L22%2017L22%2015L17%2015L17%208Z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",GC="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M10%202L9%203L5%203C4.4%203%204%203.4%204%204C4%204.6%204.4%205%205%205L7%205L17%205L19%205C19.6%205%2020%204.6%2020%204C20%203.4%2019.6%203%2019%203L15%203L14%202L10%202%20z%20M%205%207L5%2020C5%2021.1%205.9%2022%207%2022L17%2022C18.1%2022%2019%2021.1%2019%2020L19%207L5%207%20z%20M%209%209C9.6%209%2010%209.4%2010%2010L10%2019C10%2019.6%209.6%2020%209%2020C8.4%2020%208%2019.6%208%2019L8%2010C8%209.4%208.4%209%209%209%20z%20M%2015%209C15.6%209%2016%209.4%2016%2010L16%2019C16%2019.6%2015.6%2020%2015%2020C14.4%2020%2014%2019.6%2014%2019L14%2010C14%209.4%2014.4%209%2015%209%20z'%20fill='%23FF4A33'%20/%3e%3c/svg%3e",QC="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M11%203H13V21H11z'%20fill='%230F0F0F'%20/%3e%3cpath%20d='M3%2011H21V13H3z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",YC="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20128%20128'%20width='512'%20height='512'%3e%3cpath%20d='M79.335938%2015.667969C78.064453%2015.622266%2076.775%2015.762109%2075.5%2016.099609C72.1%2016.999609%2069.299609%2019.199219%2067.599609%2022.199219L64%2028.699219C63.2%2030.099219%2063.699609%2032.000781%2065.099609%2032.800781L82.400391%2042.800781C82.900391%2043.100781%2083.400391%2043.199219%2083.900391%2043.199219C84.200391%2043.199219%2084.399219%2043.199609%2084.699219%2043.099609C85.499219%2042.899609%2086.1%2042.399219%2086.5%2041.699219L90.199219%2035.199219C91.899219%2032.199219%2092.4%2028.700781%2091.5%2025.300781C90.6%2021.900781%2088.400391%2019.100391%2085.400391%2017.400391C83.525391%2016.337891%2081.455078%2015.744141%2079.335938%2015.667969%20z%20M%2060.097656%2038.126953C59.128906%2038.201172%2058.199219%2038.724609%2057.699219%2039.599609L27.5%2092C24.1%2097.8%2022.200781%20104.30039%2021.800781%20110.90039L21%20123.80078C20.9%20124.90078%2021.5%20125.99961%2022.5%20126.59961C23%20126.89961%2023.5%20127%2024%20127C24.6%20127%2025.199219%20126.8%2025.699219%20126.5L36.5%20119.40039C42%20115.70039%2046.7%20110.8%2050%20105L80.300781%2052.599609C81.100781%2051.199609%2080.599219%2049.3%2079.199219%2048.5C77.799219%2047.7%2075.899609%2048.199609%2075.099609%2049.599609L44.800781%20102C41.900781%20106.9%2037.899609%20111.20039%2033.099609%20114.40039L27.300781%20118.19922L27.699219%20111.30078C27.999219%20105.60078%2029.699609%20100%2032.599609%2095L62.900391%2042.599609C63.700391%2041.199609%2063.200781%2039.3%2061.800781%2038.5C61.275781%2038.2%2060.678906%2038.082422%2060.097656%2038.126953%20z%20M%2049%20121C47.3%20121%2046%20122.3%2046%20124C46%20125.7%2047.3%20127%2049%20127L89%20127C90.7%20127%2092%20125.7%2092%20124C92%20122.3%2090.7%20121%2089%20121L49%20121%20z%20M%20104%20121%20A%203%203%200%200%200%20101%20124%20A%203%203%200%200%200%20104%20127%20A%203%203%200%200%200%20107%20124%20A%203%203%200%200%200%20104%20121%20z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",XC="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M5%203C3.9057453%203%203%203.9057453%203%205L3%2019C3%2020.094255%203.9057453%2021%205%2021L19%2021C20.094255%2021%2021%2020.094255%2021%2019L21%207L17%203L5%203%20z%20M%205%205L16.171875%205L19%207.828125L19%2019L5%2019L5%205%20z%20M%207%207L7%2010L15%2010L15%207L7%207%20z%20M%2011.5%2012%20A%202.5%202.5%200%200%200%209%2014.5%20A%202.5%202.5%200%200%200%2011.5%2017%20A%202.5%202.5%200%200%200%2014%2014.5%20A%202.5%202.5%200%200%200%2011.5%2012%20z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",JC="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M27,18v2c0,0.386-0.223,0.738-0.572,0.904c-0.349,0.166-0.762,0.115-1.062-0.13L15,12.292L4.633,20.774%20c-0.299,0.245-0.712,0.295-1.062,0.13C3.221,20.739,3,20.386,3,20v-2c0-0.3,0.135-0.584,0.367-0.774l11-9%20c0.369-0.301,0.898-0.301,1.267,0l11,9C26.865,17.416,27,17.7,27,18z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",ZC="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M15%200C13.35499%200%2012%201.3549904%2012%203L8%203C6.3550302%203%205%204.3550302%205%206L5%2024C5%2025.64497%206.3550302%2027%208%2027L22%2027C23.64497%2027%2025%2025.64497%2025%2024L25%206C25%204.3550302%2023.64497%203%2022%203L18%203C18%201.3549904%2016.64501%200%2015%200%20z%20M%2015%202C15.564129%202%2016%202.4358706%2016%203C16%203.5641294%2015.564129%204%2015%204C14.435871%204%2014%203.5641294%2014%203C14%202.4358706%2014.435871%202%2015%202%20z%20M%208%205L12%205L12%206C12%206.552%2012.448%207%2013%207L17%207C17.552%207%2018%206.552%2018%206L18%205L22%205C22.56503%205%2023%205.4349698%2023%206L23%2024C23%2024.56503%2022.56503%2025%2022%2025L8%2025C7.4349698%2025%207%2024.56503%207%2024L7%206C7%205.4349698%207.4349698%205%208%205%20z%20M%2011%2011%20A%201.0001%201.0001%200%201%200%2011%2013L19%2013%20A%201.0001%201.0001%200%201%200%2019%2011L11%2011%20z%20M%2011%2015%20A%201.0001%201.0001%200%201%200%2011%2017L16%2017%20A%201.0001%201.0001%200%201%200%2016%2015L11%2015%20z%20M%2011%2019%20A%201.0001%201.0001%200%201%200%2011%2021L19%2021%20A%201.0001%201.0001%200%201%200%2019%2019L11%2019%20z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",eA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16.03125%204C14.921875%204%2013.8125%204.15625%2012.71875%204.46875L11.9375%204.6875L12%205.5C12.042969%206.238281%2011.679688%206.949219%2011%207.34375C10.320313%207.738281%209.523438%207.6875%208.90625%207.28125L8.25%206.84375L7.65625%207.375C6.023438%208.957031%204.910156%2010.957031%204.375%2013.09375L4.1875%2013.875L4.875%2014.21875C5.535156%2014.550781%206%2015.210938%206%2016C6%2016.789063%205.535156%2017.449219%204.875%2017.78125L4.15625%2018.125L4.375%2018.90625C4.636719%2019.957031%205.019531%2021.007813%205.59375%2022C6.167969%2022.992188%206.878906%2023.871094%207.65625%2024.625L8.25%2025.1875L8.90625%2024.75C9.523438%2024.34375%2010.316406%2024.261719%2011%2024.65625C11.683594%2025.050781%2012.042969%2025.761719%2012%2026.5L11.9375%2027.3125L12.71875%2027.53125C14.109375%2027.925781%2015.558594%2028.039063%2017%2027.90625L17%2032L32%2032L32%2018L27.59375%2018L27.125%2017.78125C26.464844%2017.449219%2026%2016.789063%2026%2016C26%2015.210938%2026.464844%2014.550781%2027.125%2014.21875L27.84375%2013.875L27.625%2013.09375C27.363281%2012.042969%2026.980469%2010.992188%2026.40625%2010C25.832031%209.007813%2025.121094%208.128906%2024.34375%207.375L23.78125%206.8125L23.09375%207.28125C22.476563%207.6875%2021.683594%207.738281%2021%207.34375L20.96875%207.3125C20.3125%206.914063%2019.957031%206.222656%2020%205.5L20.0625%204.6875L19.28125%204.46875C18.222656%204.167969%2017.140625%204%2016.03125%204%20Z%20M%2016%206.09375C16.742188%206.09375%2017.496094%206.179688%2018.21875%206.34375C18.429688%207.4375%2018.960938%208.460938%2020%209.0625C21.050781%209.667969%2022.21875%209.597656%2023.28125%209.21875C23.785156%209.757813%2024.273438%2010.335938%2024.65625%2011C25.042969%2011.671875%2025.285156%2012.378906%2025.5%2013.09375C24.648438%2013.824219%2024%2014.792969%2024%2016C24%2016.730469%2024.214844%2017.410156%2024.5625%2018L21.65625%2018C21.882813%2017.378906%2022%2016.703125%2022%2016C22%2012.699219%2019.300781%2010%2016%2010C12.699219%2010%2010%2012.699219%2010%2016C10%2019.300781%2012.699219%2022%2016%2022C16.34375%2022%2016.671875%2021.960938%2017%2021.90625L17%2025.90625C15.910156%2026.007813%2014.832031%2025.921875%2013.78125%2025.6875C13.574219%2024.582031%2013.050781%2023.542969%2012%2022.9375C10.949219%2022.332031%209.78125%2022.402344%208.71875%2022.78125C8.210938%2022.238281%207.726563%2021.664063%207.34375%2021C6.957031%2020.328125%206.714844%2019.621094%206.5%2018.90625C7.351563%2018.175781%208%2017.207031%208%2016C8%2014.792969%207.351563%2013.824219%206.5%2013.09375C6.933594%2011.667969%207.710938%2010.371094%208.75%209.25C9.800781%209.609375%2010.960938%209.660156%2012%209.0625C13.039063%208.464844%2013.570313%207.4375%2013.78125%206.34375C14.523438%206.175781%2015.257813%206.09375%2016%206.09375%20Z%20M%2016%2012C18.21875%2012%2020%2013.78125%2020%2016C20%2016.730469%2019.785156%2017.40625%2019.4375%2018L17%2018L17%2019.84375C16.675781%2019.933594%2016.351563%2020%2016%2020C13.78125%2020%2012%2018.21875%2012%2016C12%2013.78125%2013.78125%2012%2016%2012%20Z%20M%2019%2020L30%2020L30%2021L19%2021%20Z%20M%2019%2023L30%2023L30%2030L19%2030%20Z%20M%2026.28125%2023.78125L24%2026.0625L22.71875%2024.78125L21.28125%2026.21875L23.28125%2028.21875L24%2028.90625L24.71875%2028.21875L27.71875%2025.21875Z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",tA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M4%207L4%209L28%209L28%207%20Z%20M%204%2015L4%2017L28%2017L28%2015%20Z%20M%204%2023L4%2025L28%2025L28%2023Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",nA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%202.59375L15.28125%203.28125L2.28125%2016.28125L3.71875%2017.71875L5%2016.4375L5%2028L14%2028L14%2018L18%2018L18%2028L27%2028L27%2016.4375L28.28125%2017.71875L29.71875%2016.28125L16.71875%203.28125%20Z%20M%2016%205.4375L25%2014.4375L25%2026L20%2026L20%2016L12%2016L12%2026L7%2026L7%2014.4375Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",rA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M20.5%204C18.203405%204%2016.305701%205.7666235%2016.050781%208L12.5%208C10.032499%208%208%2010.032499%208%2012.5L8%2039.5C8%2041.967501%2010.032499%2044%2012.5%2044L35.5%2044C37.967501%2044%2040%2041.967501%2040%2039.5L40%2012.5C40%2010.032499%2037.967501%208%2035.5%208L31.949219%208C31.694299%205.7666235%2029.796595%204%2027.5%204L20.5%204%20z%20M%2020.5%207L27.5%207C28.346499%207%2029%207.6535009%2029%208.5C29%209.3464991%2028.346499%2010%2027.5%2010L20.5%2010C19.653501%2010%2019%209.3464991%2019%208.5C19%207.6535009%2019.653501%207%2020.5%207%20z%20M%2012.5%2011L16.769531%2011C17.581237%2012.2019%2018.954719%2013%2020.5%2013L27.5%2013C29.045281%2013%2030.418763%2012.2019%2031.230469%2011L35.5%2011C36.346499%2011%2037%2011.653501%2037%2012.5L37%2039.5C37%2040.346499%2036.346499%2041%2035.5%2041L12.5%2041C11.653501%2041%2011%2040.346499%2011%2039.5L11%2012.5C11%2011.653501%2011.653501%2011%2012.5%2011%20z%20M%2032.470703%2018.986328%20A%201.50015%201.50015%200%200%200%2031.439453%2019.439453L28.5%2022.378906L27.560547%2021.439453%20A%201.50015%201.50015%200%201%200%2025.439453%2023.560547L27.439453%2025.560547%20A%201.50015%201.50015%200%200%200%2029.560547%2025.560547L33.560547%2021.560547%20A%201.50015%201.50015%200%200%200%2032.470703%2018.986328%20z%20M%2015.5%2021%20A%201.50015%201.50015%200%201%200%2015.5%2024L21.5%2024%20A%201.50015%201.50015%200%201%200%2021.5%2021L15.5%2021%20z%20M%2032.486328%2027.978516%20A%201.50015%201.50015%200%200%200%2031.439453%2028.439453L30%2029.878906L28.560547%2028.439453%20A%201.50015%201.50015%200%200%200%2027.484375%2027.984375%20A%201.50015%201.50015%200%200%200%2026.439453%2030.560547L27.878906%2032L26.439453%2033.439453%20A%201.50015%201.50015%200%201%200%2028.560547%2035.560547L30%2034.121094L31.439453%2035.560547%20A%201.50015%201.50015%200%201%200%2033.560547%2033.439453L32.121094%2032L33.560547%2030.560547%20A%201.50015%201.50015%200%200%200%2032.486328%2027.978516%20z%20M%2015.5%2030%20A%201.50015%201.50015%200%201%200%2015.5%2033L21.5%2033%20A%201.50015%201.50015%200%201%200%2021.5%2030L15.5%2030%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",iA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%204C9.382813%204%204%209.382813%204%2016C4%2022.617188%209.382813%2028%2016%2028C22.617188%2028%2028%2022.617188%2028%2016C28%209.382813%2022.617188%204%2016%204%20Z%20M%2016%206C21.535156%206%2026%2010.464844%2026%2016C26%2021.535156%2021.535156%2026%2016%2026C10.464844%2026%206%2021.535156%206%2016C6%2010.464844%2010.464844%206%2016%206%20Z%20M%2016%2010C13.800781%2010%2012%2011.800781%2012%2014L14%2014C14%2012.882813%2014.882813%2012%2016%2012C17.117188%2012%2018%2012.882813%2018%2014C18%2014.765625%2017.507813%2015.445313%2016.78125%2015.6875L16.375%2015.8125C15.558594%2016.082031%2015%2016.863281%2015%2017.71875L15%2019L17%2019L17%2017.71875L17.40625%2017.59375C18.945313%2017.082031%2020%2015.621094%2020%2014C20%2011.800781%2018.199219%2010%2016%2010%20Z%20M%2015%2020L15%2022L17%2022L17%2020Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",sA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20x='0'%20y='0'%20viewBox='0%200%20128%20128'%20width='512'%20height='512'%3e%3ccircle%20cx='64'%20cy='64'%20r='55'%20fill='%23fff'%20/%3e%3cpath%20fill='%23444b54'%20d='M64,122C32,122,6,96,6,64S32,6,64,6s58,26,58,58S96,122,64,122z%20M64,12c-28.7,0-52,23.3-52,52s23.3,52,52,52%20s52-23.3,52-52S92.7,12,64,12z'%20/%3e%3cpath%20fill='%23444b54'%20d='M64,90c-1.7,0-3-1.3-3-3V61c0-1.7,1.3-3,3-3s3,1.3,3,3v26C67,88.7,65.7,90,64,90z'%20/%3e%3cpath%20fill='%23444b54'%20d='M64,49c-1.7,0-3-1.3-3-3v-5c0-1.7,1.3-3,3-3s3,1.3,3,3v5C67,47.7,65.7,49,64,49z'%20/%3e%3c/svg%3e",oA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M6%203L6%2029L17.765625%2029C19.233126%2030.826376%2021.480367%2032%2024%2032C26.396%2032%2028.534%2030.929859%2030%2029.255859L30%2032L32%2032L32%2026L26%2026L26%2028L28.445312%2028C27.347313%2029.221%2025.768%2030%2024%2030C20.691%2030%2018%2027.309%2018%2024C18%2020.691%2020.691%2018%2024%2018C27.309%2018%2030%2020.691%2030%2024L32%2024C32%2020.280606%2029.444687%2017.153349%2026%2016.261719L26%209.5859375L19.414062%203L6%203%20z%20M%208%205L18%205L18%2011L24%2011L24%2016C21.979283%2016%2020.136244%2016.75962%2018.726562%2018L11%2018L11%2020L17.082031%2020C16.722543%2020.619242%2016.445366%2021.290505%2016.261719%2022L11%2022L11%2024L16%2024C16%2025.060938%2016.211142%2026.072669%2016.587891%2027L8%2027L8%205%20z%20M%2020%206.4140625L22.585938%209L20%209L20%206.4140625%20z%20M%2011%2014L11%2016L21%2016L21%2014L11%2014%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",aA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M4.0097656%203C2.9179106%203%202.0097656%203.9049841%202.0097656%204.9980469L2%2023L6%2019L20%2019C21.093063%2019%2022%2018.093063%2022%2017L22%205C22%203.9069372%2021.093063%203%2020%203L4.0097656%203%20z%20M%204.0097656%205L20%205L20%2017L5.171875%2017L4.0039062%2018.167969L4.0097656%205%20z%20M%2011%207L11%209L13%209L13%207L11%207%20z%20M%2011%2011L11%2015L13%2015L13%2011L11%2011%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",lA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='480'%20height='480'%3e%3cpath%20d='M11%203L11%2011L3%2011L3%2013L11%2013L11%2021L13%2021L13%2013L21%2013L21%2011L13%2011L13%203L11%203%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",uA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M11%203H13V21H11z'%20transform='rotate(90%2012%2012)'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",cA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='480'%20height='480'%3e%3cpath%20d='M18%202%20A%203%203%200%200%200%2015%205%20A%203%203%200%200%200%2015.054688%205.5605469L7.9394531%209.7109375%20A%203%203%200%200%200%206%209%20A%203%203%200%200%200%203%2012%20A%203%203%200%200%200%206%2015%20A%203%203%200%200%200%207.9355469%2014.287109L15.054688%2018.439453%20A%203%203%200%200%200%2015%2019%20A%203%203%200%200%200%2018%2022%20A%203%203%200%200%200%2021%2019%20A%203%203%200%200%200%2018%2016%20A%203%203%200%200%200%2016.0625%2016.712891L8.9453125%2012.560547%20A%203%203%200%200%200%209%2012%20A%203%203%200%200%200%208.9453125%2011.439453L16.060547%207.2890625%20A%203%203%200%200%200%2018%208%20A%203%203%200%200%200%2021%205%20A%203%203%200%200%200%2018%202%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",hA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%208C7.664063%208%201.25%2015.34375%201.25%2015.34375L0.65625%2016L1.25%2016.65625C1.25%2016.65625%207.097656%2023.324219%2014.875%2023.9375C15.246094%2023.984375%2015.617188%2024%2016%2024C16.382813%2024%2016.753906%2023.984375%2017.125%2023.9375C24.902344%2023.324219%2030.75%2016.65625%2030.75%2016.65625L31.34375%2016L30.75%2015.34375C30.75%2015.34375%2024.335938%208%2016%208%20Z%20M%2016%2010C18.203125%2010%2020.234375%2010.601563%2022%2011.40625C22.636719%2012.460938%2023%2013.675781%2023%2015C23%2018.613281%2020.289063%2021.582031%2016.78125%2021.96875C16.761719%2021.972656%2016.738281%2021.964844%2016.71875%2021.96875C16.480469%2021.980469%2016.242188%2022%2016%2022C15.734375%2022%2015.476563%2021.984375%2015.21875%2021.96875C11.710938%2021.582031%209%2018.613281%209%2015C9%2013.695313%209.351563%2012.480469%209.96875%2011.4375L9.9375%2011.4375C11.71875%2010.617188%2013.773438%2010%2016%2010%20Z%20M%2016%2012C14.34375%2012%2013%2013.34375%2013%2015C13%2016.65625%2014.34375%2018%2016%2018C17.65625%2018%2019%2016.65625%2019%2015C19%2013.34375%2017.65625%2012%2016%2012%20Z%20M%207.25%2012.9375C7.09375%2013.609375%207%2014.285156%207%2015C7%2016.753906%207.5%2018.394531%208.375%2019.78125C5.855469%2018.324219%204.105469%2016.585938%203.53125%2016C4.011719%2015.507813%205.351563%2014.203125%207.25%2012.9375%20Z%20M%2024.75%2012.9375C26.648438%2014.203125%2027.988281%2015.507813%2028.46875%2016C27.894531%2016.585938%2026.144531%2018.324219%2023.625%2019.78125C24.5%2018.394531%2025%2016.753906%2025%2015C25%2014.285156%2024.90625%2013.601563%2024.75%2012.9375Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",dA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M11.5%206C8.4802259%206%206%208.4802259%206%2011.5L6%2017.5%20A%201.50015%201.50015%200%201%200%209%2017.5L9%2011.5C9%2010.101774%2010.101774%209%2011.5%209L17.5%209%20A%201.50015%201.50015%200%201%200%2017.5%206L11.5%206%20z%20M%2030.5%206%20A%201.50015%201.50015%200%201%200%2030.5%209L36.5%209C37.898226%209%2039%2010.101774%2039%2011.5L39%2017.5%20A%201.50015%201.50015%200%201%200%2042%2017.5L42%2011.5C42%208.4802259%2039.519774%206%2036.5%206L30.5%206%20z%20M%207.4765625%2028.978516%20A%201.50015%201.50015%200%200%200%206%2030.5L6%2036.5C6%2039.519774%208.4802259%2042%2011.5%2042L17.5%2042%20A%201.50015%201.50015%200%201%200%2017.5%2039L11.5%2039C10.101774%2039%209%2037.898226%209%2036.5L9%2030.5%20A%201.50015%201.50015%200%200%200%207.4765625%2028.978516%20z%20M%2040.476562%2028.978516%20A%201.50015%201.50015%200%200%200%2039%2030.5L39%2036.5C39%2037.898226%2037.898226%2039%2036.5%2039L30.5%2039%20A%201.50015%201.50015%200%201%200%2030.5%2042L36.5%2042C39.519774%2042%2042%2039.519774%2042%2036.5L42%2030.5%20A%201.50015%201.50015%200%200%200%2040.476562%2028.978516%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",fA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M19%203C13.488281%203%209%207.488281%209%2013C9%2015.394531%209.839844%2017.589844%2011.25%2019.3125L3.28125%2027.28125L4.71875%2028.71875L12.6875%2020.75C14.410156%2022.160156%2016.605469%2023%2019%2023C24.511719%2023%2029%2018.511719%2029%2013C29%207.488281%2024.511719%203%2019%203%20Z%20M%2019%205C23.429688%205%2027%208.570313%2027%2013C27%2017.429688%2023.429688%2021%2019%2021C14.570313%2021%2011%2017.429688%2011%2013C11%208.570313%2014.570313%205%2019%205Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",pA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M9%202C5.1458514%202%202%205.1458514%202%209C2%2012.854149%205.1458514%2016%209%2016C10.747998%2016%2012.345009%2015.348024%2013.574219%2014.28125L14%2014.707031L14%2016L19.585938%2021.585938C20.137937%2022.137937%2021.033938%2022.137938%2021.585938%2021.585938C22.137938%2021.033938%2022.137938%2020.137938%2021.585938%2019.585938L16%2014L14.707031%2014L14.28125%2013.574219C15.348024%2012.345009%2016%2010.747998%2016%209C16%205.1458514%2012.854149%202%209%202%20z%20M%209%204C11.773268%204%2014%206.2267316%2014%209C14%2011.773268%2011.773268%2014%209%2014C6.2267316%2014%204%2011.773268%204%209C4%206.2267316%206.2267316%204%209%204%20z'%20fill='%23F0F0F0'%20/%3e%3c/svg%3e",mA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%20width='500'%20height='500'%3e%3cpath%20d='M9.15625%206.3125L6.3125%209.15625L22.15625%2025L6.21875%2040.96875L9.03125%2043.78125L25%2027.84375L40.9375%2043.78125L43.78125%2040.9375L27.84375%2025L43.6875%209.15625L40.84375%206.3125L25%2022.15625Z'%20fill='%23313131'%20/%3e%3c/svg%3e",gA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M18.5%205C15.480226%205%2013%207.4802259%2013%2010.5L13%2032.5C13%2035.519774%2015.480226%2038%2018.5%2038L34.5%2038C37.519774%2038%2040%2035.519774%2040%2032.5L40%2010.5C40%207.4802259%2037.519774%205%2034.5%205L18.5%205%20z%20M%2018.5%208L34.5%208C35.898226%208%2037%209.1017741%2037%2010.5L37%2032.5C37%2033.898226%2035.898226%2035%2034.5%2035L18.5%2035C17.101774%2035%2016%2033.898226%2016%2032.5L16%2010.5C16%209.1017741%2017.101774%208%2018.5%208%20z%20M%2011%2010L9.78125%2010.8125C8.66825%2011.5545%208%2012.803625%208%2014.140625L8%2033.5C8%2038.747%2012.253%2043%2017.5%2043L30.859375%2043C32.197375%2043%2033.4465%2042.33175%2034.1875%2041.21875L35%2040L17.5%2040C13.91%2040%2011%2037.09%2011%2033.5L11%2010%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",vA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='480'%20height='480'%20viewBox='0%200%2048%2048'%3e%3cpath%20fill='%23FFC107'%20d='M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z'%20/%3e%3cpath%20fill='%23FF3D00'%20d='M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z'%20/%3e%3cpath%20fill='%234CAF50'%20d='M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z'%20/%3e%3cpath%20fill='%231976D2'%20d='M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z'%20/%3e%3c/svg%3e",yA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%204C10.886719%204%206.617188%207.160156%204.875%2011.625L6.71875%2012.375C8.175781%208.640625%2011.710938%206%2016%206C19.242188%206%2022.132813%207.589844%2023.9375%2010L20%2010L20%2012L27%2012L27%205L25%205L25%208.09375C22.808594%205.582031%2019.570313%204%2016%204%20Z%20M%2025.28125%2019.625C23.824219%2023.359375%2020.289063%2026%2016%2026C12.722656%2026%209.84375%2024.386719%208.03125%2022L12%2022L12%2020L5%2020L5%2027L7%2027L7%2023.90625C9.1875%2026.386719%2012.394531%2028%2016%2028C21.113281%2028%2025.382813%2024.839844%2027.125%2020.375Z'%20fill='%23313131'%20/%3e%3c/svg%3e",_A="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2026%2026'%20width='208'%20height='208'%3e%3cpath%20d='M6%200C4.34375%200%203%201.34375%203%203L3%2023C3%2024.65625%204.34375%2026%206%2026L20%2026C21.65625%2026%2023%2024.65625%2023%2023L23%2017.8125L21%2019.5625L21%2023C21%2023.550781%2020.550781%2024%2020%2024L6%2024C5.449219%2024%205%2023.550781%205%2023L5%203C5%202.449219%205.449219%202%206%202L20%202C20.550781%202%2021%202.449219%2021%203L21%206.4375L23%208.1875L23%203C23%201.34375%2021.65625%200%2020%200%20Z%20M%2016.5%206.46875C16.25%206.542969%2016%206.796875%2016%207.46875L16%2010L10%2010C9.449219%2010%209%2010.449219%209%2011L9%2015C9%2015.550781%209.449219%2016%2010%2016L16%2016L16%2018.5C16%2019.78125%2017%2019.5%2017%2019.5L24.5%2013L17%206.5C17%206.5%2016.75%206.394531%2016.5%206.46875Z'%20fill='%23313131'%20/%3e%3c/svg%3e",wA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M12.5%204C10.032499%204%208%206.0324991%208%208.5L8%2039.5C8%2041.967501%2010.032499%2044%2012.5%2044L35.5%2044C37.967501%2044%2040%2041.967501%2040%2039.5L40%2018.5%20A%201.50015%201.50015%200%200%200%2039.560547%2017.439453L39.544922%2017.423828L26.560547%204.4394531%20A%201.50015%201.50015%200%200%200%2025.5%204L12.5%204%20z%20M%2012.5%207L24%207L24%2015.5C24%2017.967501%2026.032499%2020%2028.5%2020L37%2020L37%2039.5C37%2040.346499%2036.346499%2041%2035.5%2041L12.5%2041C11.653501%2041%2011%2040.346499%2011%2039.5L11%208.5C11%207.6535009%2011.653501%207%2012.5%207%20z%20M%2027%209.1210938L34.878906%2017L28.5%2017C27.653501%2017%2027%2016.346499%2027%2015.5L27%209.1210938%20z%20M%2019%2022.998047C18.391%2022.998047%2017.841328%2023.365687%2017.611328%2023.929688L13.111328%2034.929688C12.797328%2035.696688%2013.164641%2036.573719%2013.931641%2036.886719C14.698641%2037.202719%2015.575672%2036.834406%2015.888672%2036.066406L16.326172%2034.998047L21.673828%2034.998047L22.111328%2036.066406C22.349328%2036.647406%2022.909%2036.998047%2023.5%2036.998047C23.689%2036.998047%2023.881359%2036.963719%2024.068359%2036.886719C24.834359%2036.573719%2025.202672%2035.696688%2024.888672%2034.929688L20.388672%2023.929688C20.158672%2023.365688%2019.609%2022.998047%2019%2022.998047%20z%20M%2030.476562%2023.978516%20A%201.50015%201.50015%200%200%200%2029%2025.5L29%2027L27.5%2027%20A%201.50015%201.50015%200%201%200%2027.5%2030L29%2030L29%2031.5%20A%201.50015%201.50015%200%201%200%2032%2031.5L32%2030L33.5%2030%20A%201.50015%201.50015%200%201%200%2033.5%2027L32%2027L32%2025.5%20A%201.50015%201.50015%200%200%200%2030.476562%2023.978516%20z%20M%2019%2028.460938L20.447266%2031.998047L17.552734%2031.998047L19%2028.460938%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",EA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M26.886719%203.0234375C26.437415%203.0492805%2025.990861%203.1581308%2025.574219%203.3847656C24.740935%203.8380352%2024.23601%204.6408958%2023.933594%205.484375%20A%201.50015%201.50015%200%200%200%2023.931641%205.4863281C23.856851%205.6965582%2023.895729%205.5996163%2023.880859%205.6503906C23.865989%205.7011646%2023.846326%205.768146%2023.822266%205.8515625C23.774136%206.0183955%2023.709041%206.2482122%2023.630859%206.5214844C23.474496%207.0680287%2023.269926%207.787416%2023.066406%208.5019531C22.659368%209.9310274%2022.255859%2011.345703%2022.255859%2011.345703%20A%201.50015%201.50015%200%200%200%2022.255859%2011.349609C22.141471%2011.755416%2022.046189%2011.970637%2022.005859%2012.033203%20A%201.50015%201.50015%200%200%200%2022.003906%2012.037109C20.528039%2014.338252%2018.938262%2016.655605%2017.394531%2019L10.5%2019C8.0324991%2019%206%2021.032499%206%2023.5L6%2039.5C6%2041.967501%208.0324991%2044%2010.5%2044L14.5%2044C15.757335%2044%2016.892811%2043.465209%2017.712891%2042.621094C20.020827%2043.120886%2022.596814%2043.674636%2024.695312%2044.117188C25.795053%2044.349109%2026.761579%2044.550006%2027.490234%2044.697266C28.21796%2044.844337%2028.488997%2044.922925%2028.96875%2044.96875C29.276882%2044.99849%2029.582707%2045.013672%2029.884766%2045.013672C34.166546%2045.013672%2037.951276%2042.101357%2039.046875%2037.871094C39.884581%2034.63323%2041.600002%2027.921603%2041.607422%2027.892578C41.746989%2027.37849%2041.941717%2026.687301%2041.986328%2025.859375%20A%201.50015%201.50015%200%200%200%2041.986328%2025.857422C42.082078%2024.068723%2041.461123%2022.328247%2040.242188%2021.039062%20A%201.50015%201.50015%200%200%200%2040.242188%2021.037109C39.003328%2019.728222%2037.266509%2019.003801%2035.439453%2019%20A%201.50015%201.50015%200%200%200%2035.435547%2019L31.466797%2019C31.818422%2017.742495%2032.16537%2016.527227%2032.417969%2015.541016%20A%201.50015%201.50015%200%200%200%2032.417969%2015.539062C33.021899%2013.169223%2033.163006%2011.052777%2032.796875%209.0214844%20A%201.50015%201.50015%200%200%200%2032.796875%209.0195312C32.612962%208.0064557%2032.266053%206.5283049%2031.216797%205.1679688C30.454227%204.1798868%2029.406708%203.4604803%2028.21875%203.1621094%20A%201.50015%201.50015%200%200%200%2028.214844%203.1621094C27.787706%203.0556602%2027.336023%202.9975943%2026.886719%203.0234375%20z%20M%2027.083984%206.0097656C27.153229%206.0089389%2027.277677%206.0200946%2027.488281%206.0722656C28.020323%206.2058951%2028.434367%206.4720819%2028.841797%207C29.43854%207.7736637%2029.69161%208.705806%2029.845703%209.5546875C30.125167%2011.106826%2030.039576%2012.7275%2029.511719%2014.798828C29.151131%2016.206389%2028.056641%2020.09375%2028.056641%2020.09375%20A%201.50015%201.50015%200%200%200%2029.5%2022L35.435547%2022C36.491612%2022.0027%2037.39379%2022.393048%2038.0625%2023.099609C38.717564%2023.792425%2039.04448%2024.683965%2038.990234%2025.697266C38.966844%2026.13134%2038.851324%2026.59751%2038.712891%2027.107422%20A%201.50015%201.50015%200%200%200%2038.707031%2027.128906C38.707031%2027.128906%2036.979062%2033.886003%2036.142578%2037.119141C35.380177%2040.062877%2032.818985%2042.013672%2029.884766%2042.013672C29.676824%2042.013672%2029.467681%2042.002682%2029.257812%2041.982422%20A%201.50015%201.50015%200%200%200%2029.255859%2041.982422C29.484761%2042.004222%2028.797548%2041.902023%2028.083984%2041.757812C27.370421%2041.613604%2026.409589%2041.412593%2025.314453%2041.181641C23.401221%2040.778161%2021.082509%2040.278628%2018.935547%2039.814453C18.94375%2039.705129%2019%2039.611242%2019%2039.5L19%2022.011719C20.770748%2019.246238%2022.705347%2016.498683%2024.527344%2013.658203L24.529297%2013.65625C24.857875%2013.14567%2025.005183%2012.649533%2025.142578%2012.162109C25.143578%2012.158509%2025.544977%2010.748377%2025.951172%209.3222656C26.154528%208.6083028%2026.357942%207.891987%2026.513672%207.3476562C26.591532%207.0754909%2026.658135%206.8463076%2026.705078%206.6835938C26.728548%206.6022368%2026.746996%206.5377315%2026.759766%206.4941406C26.916091%206.0606215%2027.022027%206.0117998%2027.007812%206.0195312C27.000698%206.0234013%2027.014739%206.0105924%2027.083984%206.0097656%20z%20M%2010.5%2022L16%2022L16%2039.5C16%2040.346499%2015.346499%2041%2014.5%2041L10.5%2041C9.6535009%2041%209%2040.346499%209%2039.5L9%2023.5C9%2022.653501%209.6535009%2022%2010.5%2022%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",TA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M11.677734%202.1816406C11.255625%202.2202656%2010.879797%202.5279063%2010.779297%202.9726562L10.224609%205.4179688L7.5136719%208.4296875C7.1826719%208.7966875%207%209.2735781%207%209.7675781L7%2019C7%2020.105%207.895%2021%209%2021L17.03125%2021C17.77225%2021%2018.443141%2020.563719%2018.744141%2019.886719L21.746094%2013.130859C21.913094%2012.756859%2022%2012.351406%2022%2011.941406L22%2011C22%209.9%2021.1%209%2020%209L13%209C13%209%2014%206.6292813%2014%204.8632812C14%203.2502813%2012.962422%202.5443281%2012.107422%202.2363281C11.964672%202.1845781%2011.818437%202.1687656%2011.677734%202.1816406%20z%20M%203.5%209C2.672%209%202%209.672%202%2010.5L2%2019.5C2%2020.328%202.672%2021%203.5%2021C4.328%2021%205%2020.328%205%2019.5L5%2010.5C5%209.672%204.328%209%203.5%209%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",xA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M10.5%207C6.9280619%207%204%209.9280619%204%2013.5L4%2030.5C4%2034.071938%206.9280619%2037%2010.5%2037L12%2037L12%2042.5C12%2044.46599%2014.427297%2045.67893%2016%2044.5L26%2037L37.5%2037C41.071938%2037%2044%2034.071938%2044%2030.5L44%2013.5C44%209.9280619%2041.071938%207%2037.5%207L10.5%207%20z%20M%2010.5%2010L37.5%2010C39.450062%2010%2041%2011.549938%2041%2013.5L41%2030.5C41%2032.450062%2039.450062%2034%2037.5%2034L25.5%2034%20A%201.50015%201.50015%200%200%200%2024.599609%2034.300781L15%2041.5L15%2035.5%20A%201.50015%201.50015%200%200%200%2013.5%2034L10.5%2034C8.5499381%2034%207%2032.450062%207%2030.5L7%2013.5C7%2011.549938%208.5499381%2010%2010.5%2010%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",bA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M26%203%20A%201%201%200%200%200%2025.716797%203.0429688%20A%201%201%200%200%200%2025.636719%203.0683594L3.6503906%2010.060547L3.6503906%2010.064453%20A%201%201%200%200%200%203%2011%20A%201%201%200%200%200%203.4824219%2011.853516L10.164062%2017.154297L23.373047%206.6269531L12.845703%2019.835938L18.142578%2026.513672%20A%201%201%200%200%200%2019%2027%20A%201%201%200%200%200%2019.935547%2026.349609L19.939453%2026.349609L26.9375%204.34375%20A%201%201%200%200%200%2026.957031%204.2832031%20A%201%201%200%200%200%2027%204%20A%201%201%200%200%200%2026%203%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",IA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='480'%20height='480'%3e%3cpath%20d='M6%202C4.897%202%204%202.897%204%204L4%2020C4%2021.103%204.897%2022%206%2022L18%2022C19.103%2022%2020%2021.103%2020%2020L20%2015.25L18.001953%2016.748047L18.001953%2020L6%2020L6%204L18%204L18%207.25L20%208.75L20%204C20%202.897%2019.103%202%2018%202L6%202%20z%20M%2016%208.25L16%2011L11%2011L11%2013L16%2013L16%2015.75L21%2012L16%208.25%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",SA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M12%203%20A%204%204%200%200%200%208%207%20A%204%204%200%200%200%2012%2011%20A%204%204%200%200%200%2016%207%20A%204%204%200%200%200%2012%203%20z%20M%2012%2014C8.996%2014%203%2015.508%203%2018.5L3%2020C3%2020.552%203.448%2021%204%2021L20%2021C20.552%2021%2021%2020.552%2021%2020L21%2018.5C21%2015.508%2015.004%2014%2012%2014%20z'%20/%3e%3c/svg%3e",CA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M17,18H4c-1.105,0-2-0.895-2-2V6c0-1.105,0.895-2,2-2h13c1.105,0,2,0.895,2,2v10C19,17.105,18.105,18,17,18z'%20opacity='.35'%20/%3e%3ccircle%20cx='14.5'%20cy='7.5'%20r='1.5'%20/%3e%3cpath%20d='M4,15.125C4,15.604,4.364,16,4.812,16h11.375C16.636,16,17,15.611,17,15.125C17,13.932,15.829,12,14.969,12%20c-0.896,0-1.383,1.001-2.969,1.001C10.015,13.001,8.875,9,7.25,9S4,12.817,4,15.125z'%20/%3e%3cpath%20d='M20,6h-1v10c0,1.105-0.895,2-2,2H5c0,1.105,0.895,2,2,2h13c1.105,0,2-0.895,2-2V8C22,6.895,21.105,6,20,6z'%20/%3e%3c/svg%3e",AA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M14,15.5V8h3l-5-5L7,8h3v7.5c0,0.3,0.2,0.5,0.5,0.5h3C13.8,16,14,15.8,14,15.5z'%20opacity='.3'%20/%3e%3cpath%20d='M2%2020H22V22H2zM13.5%2017h-3C9.7%2017%209%2016.3%209%2015.5V9H4.6L12%201.6%2019.4%209H15v6.5C15%2016.3%2014.3%2017%2013.5%2017zM11%2015h2V7h1.6L12%204.4%209.4%207H11V15z'%20/%3e%3c/svg%3e",kA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M14.984375%200.98632812%20A%201.0001%201.0001%200%200%200%2014%202L14%205%20A%201.0001%201.0001%200%201%200%2016%205L16%202%20A%201.0001%201.0001%200%200%200%2014.984375%200.98632812%20z%20M%205.796875%204.7988281%20A%201.0001%201.0001%200%200%200%205.1015625%206.515625L7.2226562%208.6367188%20A%201.0001%201.0001%200%201%200%208.6367188%207.2226562L6.515625%205.1015625%20A%201.0001%201.0001%200%200%200%205.796875%204.7988281%20z%20M%2024.171875%204.7988281%20A%201.0001%201.0001%200%200%200%2023.484375%205.1015625L21.363281%207.2226562%20A%201.0001%201.0001%200%201%200%2022.777344%208.6367188L24.898438%206.515625%20A%201.0001%201.0001%200%200%200%2024.171875%204.7988281%20z%20M%2015%208%20A%207%207%200%200%200%208%2015%20A%207%207%200%200%200%2015%2022%20A%207%207%200%200%200%2022%2015%20A%207%207%200%200%200%2015%208%20z%20M%202%2014%20A%201.0001%201.0001%200%201%200%202%2016L5%2016%20A%201.0001%201.0001%200%201%200%205%2014L2%2014%20z%20M%2025%2014%20A%201.0001%201.0001%200%201%200%2025%2016L28%2016%20A%201.0001%201.0001%200%201%200%2028%2014L25%2014%20z%20M%207.9101562%2021.060547%20A%201.0001%201.0001%200%200%200%207.2226562%2021.363281L5.1015625%2023.484375%20A%201.0001%201.0001%200%201%200%206.515625%2024.898438L8.6367188%2022.777344%20A%201.0001%201.0001%200%200%200%207.9101562%2021.060547%20z%20M%2022.060547%2021.060547%20A%201.0001%201.0001%200%200%200%2021.363281%2022.777344L23.484375%2024.898438%20A%201.0001%201.0001%200%201%200%2024.898438%2023.484375L22.777344%2021.363281%20A%201.0001%201.0001%200%200%200%2022.060547%2021.060547%20z%20M%2014.984375%2023.986328%20A%201.0001%201.0001%200%200%200%2014%2025L14%2028%20A%201.0001%201.0001%200%201%200%2016%2028L16%2025%20A%201.0001%201.0001%200%200%200%2014.984375%2023.986328%20z'%20/%3e%3c/svg%3e",NA="/assets/dark-i8sdGySW.svg",RA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M12%2018.071L6.429%2012.5%204.929%2014%2012%2021.071%2019.071%2014%2017.571%2012.5z'%20/%3e%3cpath%20d='M4%2010H20V12H4z'%20transform='rotate(-90%2012%2011)'%20/%3e%3c/svg%3e",PA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M4,19V5c0-1.657,1.343-3,3-3h7l6,6v11c0,1.657-1.343,3-3,3H7C5.343,22,4,20.657,4,19z'%20opacity='.35'%20/%3e%3cpath%20d='M14,6V2l6,6h-4C14.895,8,14,7.105,14,6z'%20/%3e%3c/svg%3e",OA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M23.277344%204.0175781C15.193866%204.3983176%209%2011.343391%209%2019.380859L9%2026.648438L6.3496094%2031.980469%20A%201.50015%201.50015%200%200%200%206.3359375%2032.009766C5.2696804%2034.277268%206.9957076%2037%209.5019531%2037L18%2037C18%2040.295865%2020.704135%2043%2024%2043C27.295865%2043%2030%2040.295865%2030%2037L38.496094%2037C41.002339%2037%2042.730582%2034.277829%2041.664062%2032.009766%20A%201.50015%201.50015%200%200%200%2041.650391%2031.980469L39%2026.648438L39%2019C39%2010.493798%2031.863289%203.6133643%2023.277344%204.0175781%20z%20M%2023.417969%207.0136719C30.338024%206.6878857%2036%2012.162202%2036%2019L36%2027%20A%201.50015%201.50015%200%200%200%2036.15625%2027.667969L38.949219%2033.289062C39.128826%2033.674017%2038.921017%2034%2038.496094%2034L9.5019531%2034C9.077027%2034%208.8709034%2033.674574%209.0507812%2033.289062C9.0507812%2033.289062%209.0507812%2033.287109%209.0507812%2033.287109L11.84375%2027.667969%20A%201.50015%201.50015%200%200%200%2012%2027L12%2019.380859C12%2012.880328%2016.979446%207.3169324%2023.417969%207.0136719%20z%20M%2021%2037L27%2037C27%2038.674135%2025.674135%2040%2024%2040C22.325865%2040%2021%2038.674135%2021%2037%20z'%20/%3e%3c/svg%3e",LA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M10.5%206C6.9280619%206%204%208.9280619%204%2012.5L4%2028.5L4%2034.535156C4%2036.486795%206.3899087%2037.705105%207.96875%2036.558594%20A%201.50015%201.50015%200%200%200%207.9707031%2036.558594L12.291016%2033.416016C13.114957%2036.061625%2015.594339%2038%2018.5%2038L31.011719%2038L40.029297%2044.558594%20A%201.50015%201.50015%200%200%200%2040.03125%2044.558594C41.610044%2045.705105%2044%2044.486795%2044%2042.535156L44%2036.5L44%2020.5C44%2016.928062%2041.071938%2014%2037.5%2014L36%2014L36%2012.5C36%208.9280619%2033.071938%206%2029.5%206L10.5%206%20z%20M%2010.5%209L29.5%209C31.450062%209%2033%2010.549938%2033%2012.5L33%2023.5C33%2025.450062%2031.450062%2027%2029.5%2027L16.5%2027%20A%201.50015%201.50015%200%200%200%2015.617188%2027.287109L7%2033.554688L7%2028.5L7%2012.5C7%2010.549938%208.5499381%209%2010.5%209%20z%20M%2036%2017L37.5%2017C39.450062%2017%2041%2018.549938%2041%2020.5L41%2036.5L41%2041.554688L32.382812%2035.287109%20A%201.50015%201.50015%200%200%200%2031.5%2035L18.5%2035C16.549938%2035%2015%2033.450062%2015%2031.5L15%2031.445312L16.988281%2030L29.5%2030C33.071938%2030%2036%2027.071938%2036%2023.5L36%2017%20z'%20/%3e%3c/svg%3e",DA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2026%2026'%20width='208'%20height='208'%3e%3cpath%20d='M5%201L10.3125%2011L4%2011L1%207L0%207L1%2013L0%2019L1%2019L4%2015L10.3125%2015L5%2025L7.1875%2025L15.90625%2015L24%2015C25.101563%2015%2026%2014.101563%2026%2013C26%2011.898438%2025.101563%2011%2024%2011L15.90625%2011L7.1875%201Z'%20/%3e%3c/svg%3e",MA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M5.40625%205.40625C-0.441406%2011.253906%20-0.441406%2020.746094%205.40625%2026.59375L6.8125%2025.1875C1.726563%2020.101563%201.726563%2011.898438%206.8125%206.8125%20Z%20M%2026.59375%205.40625L25.1875%206.8125C30.273438%2011.898438%2030.273438%2020.101563%2025.1875%2025.1875L26.59375%2026.59375C32.441406%2020.746094%2032.441406%2011.253906%2026.59375%205.40625%20Z%20M%209.625%209.625C6.117188%2013.132813%206.117188%2018.867188%209.625%2022.375L11.0625%2020.9375C8.320313%2018.195313%208.320313%2013.804688%2011.0625%2011.0625%20Z%20M%2022.375%209.625L20.9375%2011.0625C23.679688%2013.804688%2023.679688%2018.195313%2020.9375%2020.9375L22.375%2022.375C25.882813%2018.867188%2025.882813%2013.132813%2022.375%209.625%20Z%20M%2016%2013C14.355469%2013%2013%2014.355469%2013%2016C13%2017.644531%2014.355469%2019%2016%2019C17.644531%2019%2019%2017.644531%2019%2016C19%2014.355469%2017.644531%2013%2016%2013%20Z%20M%2016%2015C16.5625%2015%2017%2015.4375%2017%2016C17%2016.5625%2016.5625%2017%2016%2017C15.4375%2017%2015%2016.5625%2015%2016C15%2015.4375%2015.4375%2015%2016%2015Z'%20/%3e%3c/svg%3e",jA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='240'%20height='240'%3e%3clinearGradient%20id='SO5UwR~UHtGc~sBTMNyFWa'%20x1='21.302'%20x2='27.254'%20y1='21.302'%20y2='27.254'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0'%20stop-color='%2332bdef'%20/%3e%3cstop%20offset='1'%20stop-color='%231ea2e4'%20/%3e%3c/linearGradient%3e%3ccircle%20cx='24'%20cy='24'%20r='4'%20fill='url(%23SO5UwR~UHtGc~sBTMNyFWa)'%20/%3e%3clinearGradient%20id='SO5UwR~UHtGc~sBTMNyFWb'%20x1='21.302'%20x2='27.254'%20y1='7.302'%20y2='13.254'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0'%20stop-color='%2332bdef'%20/%3e%3cstop%20offset='1'%20stop-color='%231ea2e4'%20/%3e%3c/linearGradient%3e%3ccircle%20cx='24'%20cy='10'%20r='4'%20fill='url(%23SO5UwR~UHtGc~sBTMNyFWb)'%20/%3e%3clinearGradient%20id='SO5UwR~UHtGc~sBTMNyFWc'%20x1='21.302'%20x2='27.254'%20y1='35.302'%20y2='41.254'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0'%20stop-color='%2332bdef'%20/%3e%3cstop%20offset='1'%20stop-color='%231ea2e4'%20/%3e%3c/linearGradient%3e%3ccircle%20cx='24'%20cy='38'%20r='4'%20fill='url(%23SO5UwR~UHtGc~sBTMNyFWc)'%20/%3e%3c/svg%3e",FA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M10%202L9%203L4%203L4%205L20%205L20%203L15%203L14%202L10%202%20z%20M%205%207L5%2022L14.220703%2022L16.230469%2020L14%2020L14%209L16%209L16%2015.978516L16.464844%2015.515625L17.878906%2014.101562L19%2015.222656L19%207L5%207%20z%20M%208%209L10%209L10%2020L8%2020L8%209%20z%20M%2017.878906%2016.929688L16.464844%2018.34375L18.585938%2020.464844L16.464844%2022.585938L17.878906%2024L20%2021.878906L22.121094%2024L23.535156%2022.585938L21.414062%2020.464844L23.535156%2018.34375L22.121094%2016.929688L20%2019.050781L17.878906%2016.929688%20z'%20/%3e%3c/svg%3e",$A="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M20.011,3.989c-1.318-1.318-3.455-1.318-4.773,0L4.208,14.998c-0.302,0.302-0.503,0.689-0.576,1.11l-0.615,3.567c-0.133,0.772,0.538,1.442,1.31,1.308l3.525-0.613c0.418-0.073,0.804-0.273,1.104-0.573L20.011,8.761C21.33,7.443,21.33,5.307,20.011,3.989z'%20opacity='.35'%20/%3e%3cpolygon%20points='13.075,6.144%2017.848,10.917%2019.832,8.94%2015.059,4.167'%20/%3e%3cpath%20d='M3.392,17.5l-0.375,2.175c-0.133,0.772,0.538,1.442,1.31,1.308l2.171-0.378L3.392,17.5z'%20/%3e%3c/svg%3e",VA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M16.414,7.586c-0.781-0.781-2.047-0.781-2.828,0l-6,6c-0.781,0.781-0.781,2.047,0,2.828c0.781,0.781,2.047,0.781,2.828,0l6-6C17.195,9.633,17.195,8.367,16.414,7.586z'%20/%3e%3cpath%20d='M20.389,3.611c-2.148-2.148-5.63-2.148-7.778,0c-0.171,0.171-0.829,0.829-1,1c-1.548,1.548-1.963,3.786-1.279,5.722%20c-1.936-0.684-4.173-0.27-5.721,1.278c-0.171,0.171-0.829,0.829-1,1c-2.148,2.148-2.148,5.63,0,7.778%20c2.148,2.148,5.63,2.148,7.778,0c0.171-0.171,0.829-0.829,1-1c1.548-1.548,1.963-3.786,1.279-5.722%20c1.936,0.684,4.173,0.27,5.721-1.278c0.171-0.171,0.829-0.829,1-1C22.537,9.241,22.537,5.759,20.389,3.611z'%20opacity='.35'%20/%3e%3c/svg%3e",UA={link:VA,deleteIcon:FA,editPencil:$A,moreOption:jA,download:RA,offline:DA,online:MA,chat:LA,notification:OA,file:PA,light:kA,dark:NA,upload:AA,trueIcon:FC,falseIcon:$C,error:VC,down:UC,back:BC,thumbUp:qC,redo:zC,next:HC,finish:WC,history:KC,trash:GC,add:QC,edit:YC,save:XC,up:JC,clipboard:ZC,admin:eA,menu:tA,home:nA,result:rA,help:iA,about:sA,update:oA,faq:aA,plus:lA,minus:uA,share:cA,review:hA,fullScreen:dA,search:fA,searchLeft:pA,close:mA,copy:gA,google:vA,refresh:yA,exit:_A,exam:wA,like:EA,liked:TA,comment:xA,send:bA,logout:IA,user:SA,image:CA};function De(t){return UA[t]||null}const Ue=({data:t})=>{const{clickFn:e,image:n}=t,r=De(n),{theme:i}=M.useContext(ce),s=()=>{e&&e()};return _.jsx("button",{onClick:s,className:`shadow-md border  rounded-full p-2 h-10 w-10  font-medium flex  justify-center items-center hover:opacity-70 transition-all ${i==="light"?"bg-gray-50/50 border-gray-200":"bg-slate-500/70 text-white border-slate-500/70"}`,children:_.jsx("img",{src:r})})};function BA(t,e){let n=!1;return e.forEach(r=>{r.id===t&&(n=!0)}),n}let Cv;function qA(t){t(!0),clearTimeout(Cv),Cv=setTimeout(()=>{t(!1)},[4e3])}function En(){scrollTo({top:0,behavior:"smooth"})}function dp(){const t=window.innerHeight,n=document.documentElement.scrollHeight-t;scrollTo({top:n+200,behavior:"smooth"})}function bn(t){document.body.style.overflow=t}function Ps(t,e){M.useEffect(()=>{const n=r=>{t.current&&!t.current.contains(r.target)&&e(!1)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[])}function B3(t){try{const e=t.split(":"),n=Number(e[0]),r=Number(e[1]),i=Number(e[2]);return`${$f(n,"hours")} ${$f(r,"minutes")} ${$f(i,"seconds")}`}catch{return null}}function $f(t,e){return t?`${t} ${e}`:""}function Av(t){return t>=10?t:`0${t}`}const Re=({data:t})=>{const{clickFn:e,text:n,image:r}=t,i=De(r),{theme:s}=M.useContext(ce),o=()=>{e&&e()};return _.jsxs("button",{onClick:o,className:`min-h-10 shadow-md hover:opacity-70 border  font-medium px-2 py-1 rounded-lg flex justify-center items-center gap-x-1 transition-all ${s==="light"?"bg-blue-200/60 border-gray-200":"bg-blue-200/60 text-white border-slate-500/70"}`,children:[r&&_.jsx("img",{className:" h-7",src:i}),n&&_.jsx("span",{children:n})]})},Oo=({data:t})=>{const{yesButton:e,noButton:n,text:r,setValue:i}=t,{theme:s}=M.useContext(ce),o=M.useRef(null);return Ps(o,i),M.useEffect(()=>(bn("hidden"),()=>{bn("auto")}),[]),_.jsx("div",{className:"fixed flex items-center z-20 bg-black/60 justify-center top-0 left-0 right-0 bottom-0",children:_.jsx("div",{ref:o,className:`w-4/5 sm:w-3/5 md:w-2/5 min-h-40 grid gap-y-3 rounded-md items-center border  ${s==="light"?"border-gray-300 bg-white":"border-slate-500/70 text-white bg-slate-600"}`,children:_.jsxs("div",{children:[_.jsx("div",{className:"text-center",children:r}),_.jsxs("div",{className:"flex justify-center mt-2 items-center gap-x-3 ",children:[_.jsx(Re,{data:{clickFn:e,image:"trueIcon",text:"Yes"}}),_.jsx(Re,{data:{clickFn:n,image:"falseIcon",text:"No"}})]})]})})})},zA=({data:t})=>{const{pageTitle:e,currentPage:n,totalPage:r,percentage:i,answerLength:s,questionsLength:o}=t,{stopTest:a,formattedTime:l,theme:u}=M.useContext(ce),[h,c]=M.useState(!1),d=()=>{a(),c(!1)},f=()=>{c(!1)};return _.jsxs(_.Fragment,{children:[_.jsxs("div",{className:" font-medium text-lg flex items-center justify-start",children:[_.jsx(Ue,{data:{clickFn:()=>c(!0),image:"back"}}),_.jsx("div",{className:`ml-2 ${u==="light"?"":"text-white"}`,children:e}),h&&_.jsx(Oo,{data:{yesButton:d,noButton:f,text:"Are you sure to stop the test ?",setValue:c}})]}),_.jsxs("div",{className:`flex justify-between items-center sticky left-0 pt-1 right-0 z-10 ${u==="light"?"":"text-white"}`,children:[_.jsxs("div",{children:["Page ",n," of ",r]}),_.jsxs("div",{className:`w-2/3 border h-7 relative ${u==="light"?"border-gray-300":"border-slate-500/70"}`,children:[_.jsx("div",{style:{width:`${i}%`},className:`text-center h-full ${u==="light"?"bg-lime-200":"bg-slate-500/70"}`}),_.jsxs("div",{className:"absolute top-0 left-2 font-medium",children:[s," ","/"," ",o]})]}),_.jsx("div",{className:"min-h-12 font-medium fixed right-0 top-1/4 h-10 min-w-20 bg-lime-200/50 backdrop-blur-lg flex items-center justify-center rounded-bl-lg rounded-tl-lg border-r-4 border-r-blue-400",children:l})]})]})},HA=({data:t})=>{const{currentQuestions:e,chooseAnswer:n}=t,{answeredQuestions:r,theme:i}=M.useContext(ce);return _.jsx("div",{children:e.map((s,o)=>_.jsxs("div",{children:[_.jsxs("div",{className:`grid gap-y-2 ${i==="light"?"":"text-white"}`,children:[_.jsxs("div",{className:"flex gap-x-3 items-center",children:[_.jsx("div",{className:"bg-blue-600 rounded-sm shadow-lg h-9 w-9 text-white font-bold flex justify-center items-center ",children:s.id}),_.jsx("div",{className:"flex-1 font-padauk",children:s.question})]}),_.jsx("div",{className:"grid gap-y-2",children:s.choices.map((a,l)=>{let u,h=!1;return r.forEach(c=>{s.id===c.id&&(u=c)}),(u==null?void 0:u.userAnswer)===a&&(h=!0),_.jsxs("div",{onClick:()=>{n(s.id,a)},className:`border  h-12 flex gap-x-3 p-2 cursor-pointer items-center rounded-lg font-padauk ${i==="light"?`${h?"border-blue-500 border-dotted font-bold bg-lime-50":"border-lime-200 hover:bg-slate-50"}`:`${h?"border-slate-500/70 border-dotted font-bold bg-slate-500/70":"border-slate-500/70 hover:bg-slate-500/70"}`}`,children:[_.jsx("input",{onChange:()=>{n(s.id,a)},className:"h-5 w-5",name:`question-${s.id}`,type:"radio",checked:!!h}),_.jsx("div",{children:a})]},`choice-${s.id}-${l}-${a}`)})})]}),_.jsx(WA,{})]},`question-${s.id}-${o}-${s.question}`))})},WA=()=>_.jsx("div",{className:" border border-dashed border-gray-500 mb-7 mt-7"}),KA=()=>(M.useContext(ce),_.jsxs("div",{className:"flex gap-x-2 items-center",children:[_.jsx("img",{className:"w-8 ",src:De("error")}),_.jsx("div",{className:"text-red-600 font-bold",children:"You need to answer all questions before proceeding!"})]}));/**
 * @remix-run/router v1.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ol(){return Ol=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ol.apply(this,arguments)}var ui;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ui||(ui={}));const kv="popstate";function GA(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=Os(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),fp("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof s=="string"?s:oh(s))}function r(i,s){od(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return YA(e,n,r,t)}function pt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function od(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function QA(){return Math.random().toString(36).substr(2,8)}function Nv(t,e){return{usr:t.state,key:t.key,idx:e}}function fp(t,e,n,r){return n===void 0&&(n=null),Ol({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Os(e):e,{state:n,key:e&&e.key||r||QA()})}function oh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Os(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function YA(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ui.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(Ol({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function c(){a=ui.Pop;let w=h(),p=w==null?null:w-u;u=w,l&&l({action:a,location:y.location,delta:p})}function d(w,p){a=ui.Push;let m=fp(y.location,w,p);n&&n(m,w),u=h()+1;let E=Nv(m,u),g=y.createHref(m);try{o.pushState(E,"",g)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(g)}s&&l&&l({action:a,location:y.location,delta:1})}function f(w,p){a=ui.Replace;let m=fp(y.location,w,p);n&&n(m,w),u=h();let E=Nv(m,u),g=y.createHref(m);o.replaceState(E,"",g),s&&l&&l({action:a,location:y.location,delta:0})}function v(w){let p=i.location.origin!=="null"?i.location.origin:i.location.href,m=typeof w=="string"?w:oh(w);return pt(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let y={get action(){return a},get location(){return t(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(kv,c),l=w,()=>{i.removeEventListener(kv,c),l=null}},createHref(w){return e(i,w)},createURL:v,encodeLocation(w){let p=v(w);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:d,replace:f,go(w){return o.go(w)}};return y}var Rv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Rv||(Rv={}));function XA(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Os(e):e,i=gm(r.pathname||"/",n);if(i==null)return null;let s=q3(t);JA(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=a6(s[a],c6(i));return o}function q3(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(pt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=_i([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(pt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),q3(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:s6(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of z3(s.path))i(s,o,l)}),e}function z3(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=z3(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function JA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:o6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ZA=/^:[\w-]+$/,e6=3,t6=2,n6=1,r6=10,i6=-2,Pv=t=>t==="*";function s6(t,e){let n=t.split("/"),r=n.length;return n.some(Pv)&&(r+=i6),e&&(r+=t6),n.filter(i=>!Pv(i)).reduce((i,s)=>i+(ZA.test(s)?e6:s===""?n6:r6),r)}function o6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function a6(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=l6({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!h)return null;Object.assign(r,h.params);let c=a.route;s.push({params:r,pathname:_i([i,h.pathname]),pathnameBase:m6(_i([i,h.pathnameBase])),route:c}),h.pathnameBase!=="/"&&(i=_i([i,h.pathnameBase]))}return s}function l6(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=u6(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,h,c)=>{let{paramName:d,isOptional:f}=h;if(d==="*"){let y=a[c]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const v=a[c];return f&&!v?u[d]=void 0:u[d]=h6(v||"",d),u},{}),pathname:s,pathnameBase:o,pattern:t}}function u6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),od(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function c6(t){try{return decodeURI(t)}catch(e){return od(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function h6(t,e){try{return decodeURIComponent(t)}catch(n){return od(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function gm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function d6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Os(t):t;return{pathname:n?n.startsWith("/")?n:f6(n,e):e,search:g6(r),hash:v6(i)}}function f6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Vf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function p6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function H3(t,e){let n=p6(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function W3(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Os(t):(i=Ol({},t),pt(!i.pathname||!i.pathname.includes("?"),Vf("?","pathname","search",i)),pt(!i.pathname||!i.pathname.includes("#"),Vf("#","pathname","hash",i)),pt(!i.search||!i.search.includes("#"),Vf("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let c=e.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),c-=1;i.pathname=d.join("/")}a=c>=0?e[c]:"/"}let l=d6(i,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const _i=t=>t.join("/").replace(/\/\/+/g,"/"),m6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),g6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,v6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function y6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const K3=["post","put","patch","delete"];new Set(K3);const _6=["get",...K3];new Set(_6);/**
 * React Router v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ll(){return Ll=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ll.apply(this,arguments)}const vm=M.createContext(null),w6=M.createContext(null),Ls=M.createContext(null),ad=M.createContext(null),ji=M.createContext({outlet:null,matches:[],isDataRoute:!1}),G3=M.createContext(null);function E6(t,e){let{relative:n}=e===void 0?{}:e;cu()||pt(!1);let{basename:r,navigator:i}=M.useContext(Ls),{hash:s,pathname:o,search:a}=Y3(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:_i([r,o])),i.createHref({pathname:l,search:a,hash:s})}function cu(){return M.useContext(ad)!=null}function Xo(){return cu()||pt(!1),M.useContext(ad).location}function Q3(t){M.useContext(Ls).static||M.useLayoutEffect(t)}function An(){let{isDataRoute:t}=M.useContext(ji);return t?L6():T6()}function T6(){cu()||pt(!1);let t=M.useContext(vm),{basename:e,future:n,navigator:r}=M.useContext(Ls),{matches:i}=M.useContext(ji),{pathname:s}=Xo(),o=JSON.stringify(H3(i,n.v7_relativeSplatPath)),a=M.useRef(!1);return Q3(()=>{a.current=!0}),M.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let c=W3(u,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:_i([e,c.pathname])),(h.replace?r.replace:r.push)(c,h.state,h)},[e,r,o,s,t])}function ym(){let{matches:t}=M.useContext(ji),e=t[t.length-1];return e?e.params:{}}function Y3(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(Ls),{matches:i}=M.useContext(ji),{pathname:s}=Xo(),o=JSON.stringify(H3(i,r.v7_relativeSplatPath));return M.useMemo(()=>W3(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function x6(t,e){return b6(t,e)}function b6(t,e,n,r){cu()||pt(!1);let{navigator:i}=M.useContext(Ls),{matches:s}=M.useContext(ji),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Xo(),h;if(e){var c;let w=typeof e=="string"?Os(e):e;l==="/"||(c=w.pathname)!=null&&c.startsWith(l)||pt(!1),h=w}else h=u;let d=h.pathname||"/",f=l==="/"?d:d.slice(l.length)||"/",v=XA(t,{pathname:f}),y=k6(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:_i([l,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:_i([l,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return e&&y?M.createElement(ad.Provider,{value:{location:Ll({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ui.Pop}},y):y}function I6(){let t=O6(),e=y6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,s)}const S6=M.createElement(I6,null);class C6 extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(ji.Provider,{value:this.props.routeContext},M.createElement(G3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function A6(t){let{routeContext:e,match:n,children:r}=t,i=M.useContext(vm);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(ji.Provider,{value:e},r)}function k6(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id]));h>=0||pt(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let c=o[h];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(u=h),c.route.id){let{loaderData:d,errors:f}=n,v=c.route.loader&&d[c.route.id]===void 0&&(!f||f[c.route.id]===void 0);if(c.route.lazy||v){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,c,d)=>{let f,v=!1,y=null,w=null;n&&(f=a&&c.route.id?a[c.route.id]:void 0,y=c.route.errorElement||S6,l&&(u<0&&d===0?(D6("route-fallback",!1),v=!0,w=null):u===d&&(v=!0,w=c.route.hydrateFallbackElement||null)));let p=e.concat(o.slice(0,d+1)),m=()=>{let E;return f?E=y:v?E=w:c.route.Component?E=M.createElement(c.route.Component,null):c.route.element?E=c.route.element:E=h,M.createElement(A6,{match:c,routeContext:{outlet:h,matches:p,isDataRoute:n!=null},children:E})};return n&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?M.createElement(C6,{location:n.location,revalidation:n.revalidation,component:y,error:f,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var X3=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(X3||{}),ah=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ah||{});function N6(t){let e=M.useContext(vm);return e||pt(!1),e}function R6(t){let e=M.useContext(w6);return e||pt(!1),e}function P6(t){let e=M.useContext(ji);return e||pt(!1),e}function J3(t){let e=P6(),n=e.matches[e.matches.length-1];return n.route.id||pt(!1),n.route.id}function O6(){var t;let e=M.useContext(G3),n=R6(ah.UseRouteError),r=J3(ah.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function L6(){let{router:t}=N6(X3.UseNavigateStable),e=J3(ah.UseNavigateStable),n=M.useRef(!1);return Q3(()=>{n.current=!0}),M.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ll({fromRouteId:e},s)))},[t,e])}const Ov={};function D6(t,e,n){!e&&!Ov[t]&&(Ov[t]=!0)}function en(t){pt(!1)}function M6(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ui.Pop,navigator:s,static:o=!1,future:a}=t;cu()&&pt(!1);let l=e.replace(/^\/*/,"/"),u=M.useMemo(()=>({basename:l,navigator:s,static:o,future:Ll({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Os(r));let{pathname:h="/",search:c="",hash:d="",state:f=null,key:v="default"}=r,y=M.useMemo(()=>{let w=gm(h,l);return w==null?null:{location:{pathname:w,search:c,hash:d,state:f,key:v},navigationType:i}},[l,h,c,d,f,v,i]);return y==null?null:M.createElement(Ls.Provider,{value:u},M.createElement(ad.Provider,{children:n,value:y}))}function j6(t){let{children:e,location:n}=t;return x6(pp(e),n)}new Promise(()=>{});function pp(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,i)=>{if(!M.isValidElement(r))return;let s=[...e,i];if(r.type===M.Fragment){n.push.apply(n,pp(r.props.children,s));return}r.type!==en&&pt(!1),!r.props.index||!r.props.children||pt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=pp(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mp(){return mp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mp.apply(this,arguments)}function F6(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function $6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function V6(t,e){return t.button===0&&(!e||e==="_self")&&!$6(t)}const U6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],B6="6";try{window.__reactRouterVersion=B6}catch{}const q6="startTransition",Lv=AI[q6];function z6(t){let{basename:e,children:n,future:r,window:i}=t,s=M.useRef();s.current==null&&(s.current=GA({window:i,v5Compat:!0}));let o=s.current,[a,l]=M.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=M.useCallback(c=>{u&&Lv?Lv(()=>l(c)):l(c)},[l,u]);return M.useLayoutEffect(()=>o.listen(h),[o,h]),M.createElement(M6,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const H6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",W6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Z3=M.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h,unstable_viewTransition:c}=e,d=F6(e,U6),{basename:f}=M.useContext(Ls),v,y=!1;if(typeof u=="string"&&W6.test(u)&&(v=u,H6))try{let E=new URL(window.location.href),g=u.startsWith("//")?new URL(E.protocol+u):new URL(u),T=gm(g.pathname,f);g.origin===E.origin&&T!=null?u=T+g.search+g.hash:y=!0}catch{}let w=E6(u,{relative:i}),p=K6(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,unstable_viewTransition:c});function m(E){r&&r(E),E.defaultPrevented||p(E)}return M.createElement("a",mp({},d,{href:v||w,onClick:y||s?r:m,ref:n,target:l}))});var Dv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Dv||(Dv={}));var Mv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Mv||(Mv={}));function K6(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=An(),u=Xo(),h=Y3(t,{relative:o});return M.useCallback(c=>{if(V6(c,n)){c.preventDefault();let d=r!==void 0?r:oh(u)===oh(h);l(t,{replace:d,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,h,r,i,n,t,s,o,a])}function G6(t,e,n){const r=e.name,i=Q6(t,e.quizzes),s=Y6(i),o=t.length,a=e.gradingRules.length!==0?X6(s,e.gradingRules)||"There is an error in your grading rules":"Level is not defined",l=J6(),u=Z6();return{testName:r,results:i,score:s,totalScore:o,level:a,date:l,time:u,timeTaken:n}}function Q6(t,e){return e.map(r=>{const{id:i,question:s,answer:o}=r;let a;t.forEach(u=>{i===u.id&&(a=u)});const{userAnswer:l}=a;return l===r.answer?{id:i,question:s,userAnswer:l,answer:o,isTrue:!0}:{id:i,question:s,userAnswer:l,answer:o,isTrue:!1}})}function Y6(t){let e=0;return t.forEach(n=>{n.isTrue&&e++}),e}function X6(t,e){let n;try{e.forEach(r=>{t>=Number(r.from)&&t<=Number(r.to)&&(n=r.level)})}catch(r){console.log(r.message)}return n}function J6(){const t=new Date,e=t.getDate(),n=t.getMonth()+1,r=t.getFullYear();return`${e}/${n}/${r}`}function Z6(){const t=new Date;let e=t.getHours();const n=t.getMinutes(),r=e>12?"PM":"AM";e=e%12||12;const i=n<10?`0${n}`:n;return`${e}:${i} ${r}`}var jv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re=function(t,e){if(!t)throw Jo(e)},Jo=function(t){return new Error("Firebase Database ("+e5.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ek=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},_m={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,c=(s&3)<<4|a>>4;let d=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(d=64)),r.push(n[h],n[c],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(t5(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ek(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const c=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||c==null)throw new tk;const d=s<<2|a>>4;if(r.push(d),u!==64){const f=a<<4&240|u>>2;if(r.push(f),c!==64){const v=u<<6&192|c;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const n5=function(t){const e=t5(t);return _m.encodeByteArray(e,!0)},lh=function(t){return n5(t).replace(/\./g,"")},uh=function(t){try{return _m.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t){return r5(void 0,t)}function r5(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!rk(n)||(t[n]=r5(t[n],e[n]));return t}function rk(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=()=>ik().__FIREBASE_DEFAULTS__,ok=()=>{if(typeof process>"u"||typeof jv>"u")return;const t=jv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ak=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&uh(t[1]);return e&&JSON.parse(e)},ld=()=>{try{return sk()||ok()||ak()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},i5=t=>{var e,n;return(n=(e=ld())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},wm=t=>{const e=i5(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},s5=()=>{var t;return(t=ld())===null||t===void 0?void 0:t.config},o5=t=>{var e;return(e=ld())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[lh(JSON.stringify(n)),lh(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function lk(){var t;const e=(t=ld())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function a5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ck(){const t=mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function l5(){return e5.NODE_ADMIN===!0}function hk(){return!lk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function u5(){try{return typeof indexedDB=="object"}catch{return!1}}function dk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="FirebaseError";class Er extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fk,Object.setPrototypeOf(this,Er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hu.prototype.create)}}class hu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?pk(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Er(i,a,r)}}function pk(t,e){return t.replace(mk,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const mk=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(t){return JSON.parse(t)}function Rt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Dl(uh(s[0])||""),n=Dl(uh(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},gk=function(t){const e=c5(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},vk=function(t){const e=c5(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Lo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function gp(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ch(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Ml(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Fv(s)&&Fv(o)){if(!Ml(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Fv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ua(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ba(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let c=0;c<16;c++)r[c]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let c=0;c<16;c++)r[c]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let c=16;c<80;c++){const d=r[c-3]^r[c-8]^r[c-14]^r[c-16];r[c]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,h;for(let c=0;c<80;c++){c<40?c<20?(u=a^s&(o^a),h=1518500249):(u=s^o^a,h=1859775393):c<60?(u=s&o|a&(s|o),h=2400959708):(u=s^o^a,h=3395469782);const d=(i<<5|i>>>27)+u+l+h+r[c]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function _k(t,e){const n=new wk(t,e);return n.subscribe.bind(n)}class wk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Ek(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Uf),i.error===void 0&&(i.error=Uf),i.complete===void 0&&(i.complete=Uf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ek(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Uf(){}function Tk(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,re(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ud=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t){return t&&t._delegate?t._delegate:t}class Vr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Em;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Sk(e))try{this.getOrInitializeService({instanceIdentifier:Yi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Yi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yi){return this.instances.has(e)}getOptions(e=Yi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ik(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yi){return this.component?this.component.multipleInstances?e:Yi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ik(t){return t===Yi?void 0:t}function Sk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Te||(Te={}));const Ak={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},kk=Te.INFO,Nk={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},Rk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Nk[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cd{constructor(e){this.name=e,this._logLevel=kk,this._logHandler=Rk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ak[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}const Pk=(t,e)=>e.some(n=>t instanceof n);let $v,Vv;function Ok(){return $v||($v=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Lk(){return Vv||(Vv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h5=new WeakMap,vp=new WeakMap,d5=new WeakMap,Bf=new WeakMap,bm=new WeakMap;function Dk(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(wi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&h5.set(n,t)}).catch(()=>{}),bm.set(e,t),e}function Mk(t){if(vp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});vp.set(t,e)}let yp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||d5.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jk(t){yp=t(yp)}function Fk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(qf(this),e,...n);return d5.set(r,e.sort?e.sort():[e]),wi(r)}:Lk().includes(t)?function(...e){return t.apply(qf(this),e),wi(h5.get(this))}:function(...e){return wi(t.apply(qf(this),e))}}function $k(t){return typeof t=="function"?Fk(t):(t instanceof IDBTransaction&&Mk(t),Pk(t,Ok())?new Proxy(t,yp):t)}function wi(t){if(t instanceof IDBRequest)return Dk(t);if(Bf.has(t))return Bf.get(t);const e=$k(t);return e!==t&&(Bf.set(t,e),bm.set(e,t)),e}const qf=t=>bm.get(t);function Vk(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=wi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(wi(o.result),l.oldVersion,l.newVersion,wi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Uk=["get","getKey","getAll","getAllKeys","count"],Bk=["put","add","delete","clear"],zf=new Map;function Uv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zf.get(e))return zf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Bk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Uk.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return zf.set(e,s),s}jk(t=>({...t,get:(e,n,r)=>Uv(e,n)||t.get(e,n,r),has:(e,n)=>!!Uv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function zk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _p="@firebase/app",Bv="0.9.29";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new cd("@firebase/app"),Hk="@firebase/app-compat",Wk="@firebase/analytics-compat",Kk="@firebase/analytics",Gk="@firebase/app-check-compat",Qk="@firebase/app-check",Yk="@firebase/auth",Xk="@firebase/auth-compat",Jk="@firebase/database",Zk="@firebase/database-compat",eN="@firebase/functions",tN="@firebase/functions-compat",nN="@firebase/installations",rN="@firebase/installations-compat",iN="@firebase/messaging",sN="@firebase/messaging-compat",oN="@firebase/performance",aN="@firebase/performance-compat",lN="@firebase/remote-config",uN="@firebase/remote-config-compat",cN="@firebase/storage",hN="@firebase/storage-compat",dN="@firebase/firestore",fN="@firebase/firestore-compat",pN="firebase",mN="10.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="[DEFAULT]",gN={[_p]:"fire-core",[Hk]:"fire-core-compat",[Kk]:"fire-analytics",[Wk]:"fire-analytics-compat",[Qk]:"fire-app-check",[Gk]:"fire-app-check-compat",[Yk]:"fire-auth",[Xk]:"fire-auth-compat",[Jk]:"fire-rtdb",[Zk]:"fire-rtdb-compat",[eN]:"fire-fn",[tN]:"fire-fn-compat",[nN]:"fire-iid",[rN]:"fire-iid-compat",[iN]:"fire-fcm",[sN]:"fire-fcm-compat",[oN]:"fire-perf",[aN]:"fire-perf-compat",[lN]:"fire-rc",[uN]:"fire-rc-compat",[cN]:"fire-gcs",[hN]:"fire-gcs-compat",[dN]:"fire-fst",[fN]:"fire-fst-compat","fire-js":"fire-js",[pN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new Map,Ep=new Map;function vN(t,e){try{t.container.addComponent(e)}catch(n){ws.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ci(t){const e=t.name;if(Ep.has(e))return ws.debug(`There were multiple attempts to register component ${e}.`),!1;Ep.set(e,t);for(const n of hh.values())vN(n,t);return!0}function du(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ei=new hu("app","Firebase",yN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=mN;function f5(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:wp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ei.create("bad-app-name",{appName:String(i)});if(n||(n=s5()),!n)throw Ei.create("no-options");const s=hh.get(i);if(s){if(Ml(n,s.options)&&Ml(r,s.config))return s;throw Ei.create("duplicate-app",{appName:i})}const o=new Ck(i);for(const l of Ep.values())o.addComponent(l);const a=new _N(n,r,o);return hh.set(i,a),a}function hd(t=wp){const e=hh.get(t);if(!e&&t===wp&&s5())return f5();if(!e)throw Ei.create("no-app",{appName:t});return e}function Mn(t,e,n){var r;let i=(r=gN[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ws.warn(a.join(" "));return}Ci(new Vr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="firebase-heartbeat-database",EN=1,jl="firebase-heartbeat-store";let Hf=null;function p5(){return Hf||(Hf=Vk(wN,EN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ei.create("idb-open",{originalErrorMessage:t.message})})),Hf}async function TN(t){try{const n=(await p5()).transaction(jl),r=await n.objectStore(jl).get(m5(t));return await n.done,r}catch(e){if(e instanceof Er)ws.warn(e.message);else{const n=Ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ws.warn(n.message)}}}async function qv(t,e){try{const r=(await p5()).transaction(jl,"readwrite");await r.objectStore(jl).put(e,m5(t)),await r.done}catch(n){if(n instanceof Er)ws.warn(n.message);else{const r=Ei.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ws.warn(r.message)}}}function m5(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=1024,bN=30*24*60*60*1e3;class IN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=zv();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=bN}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zv(),{heartbeatsToSend:r,unsentEntries:i}=SN(this._heartbeatsCache.heartbeats),s=lh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function zv(){return new Date().toISOString().substring(0,10)}function SN(t,e=xN){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Hv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Hv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class CN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return u5()?dk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await TN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return qv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return qv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Hv(t){return lh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t){Ci(new Vr("platform-logger",e=>new qk(e),"PRIVATE")),Ci(new Vr("heartbeat",e=>new IN(e),"PRIVATE")),Mn(_p,Bv,t),Mn(_p,Bv,"esm2017"),Mn("fire-js","")}AN("");var kN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ie,Im=Im||{},me=kN||self;function dd(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function fu(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function NN(t){return Object.prototype.hasOwnProperty.call(t,Wf)&&t[Wf]||(t[Wf]=++RN)}var Wf="closure_uid_"+(1e9*Math.random()>>>0),RN=0;function PN(t,e,n){return t.call.apply(t.bind,arguments)}function ON(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Kt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Kt=PN:Kt=ON,Kt.apply(null,arguments)}function nc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function At(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function $i(){this.s=this.s,this.o=this.o}var LN=0;$i.prototype.s=!1;$i.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),LN!=0)&&NN(this)};$i.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const g5=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Sm(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Wv(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(dd(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Gt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Gt.prototype.h=function(){this.defaultPrevented=!0};var DN=function(){if(!me.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};me.addEventListener("test",n,e),me.removeEventListener("test",n,e)}catch{}return t}();function Fl(t){return/^[\s\xa0]*$/.test(t)}function fd(){var t=me.navigator;return t&&(t=t.userAgent)?t:""}function ar(t){return fd().indexOf(t)!=-1}function Cm(t){return Cm[" "](t),t}Cm[" "]=function(){};function MN(t,e){var n=A9;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var jN=ar("Opera"),Do=ar("Trident")||ar("MSIE"),v5=ar("Edge"),Tp=v5||Do,y5=ar("Gecko")&&!(fd().toLowerCase().indexOf("webkit")!=-1&&!ar("Edge"))&&!(ar("Trident")||ar("MSIE"))&&!ar("Edge"),FN=fd().toLowerCase().indexOf("webkit")!=-1&&!ar("Edge");function _5(){var t=me.document;return t?t.documentMode:void 0}var xp;e:{var Kf="",Gf=function(){var t=fd();if(y5)return/rv:([^\);]+)(\)|;)/.exec(t);if(v5)return/Edge\/([\d\.]+)/.exec(t);if(Do)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(FN)return/WebKit\/(\S+)/.exec(t);if(jN)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Gf&&(Kf=Gf?Gf[1]:""),Do){var Qf=_5();if(Qf!=null&&Qf>parseFloat(Kf)){xp=String(Qf);break e}}xp=Kf}var bp;if(me.document&&Do){var Kv=_5();bp=Kv||parseInt(xp,10)||void 0}else bp=void 0;var $N=bp;function $l(t,e){if(Gt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(y5){e:{try{Cm(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:VN[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&$l.$.h.call(this)}}At($l,Gt);var VN={2:"touch",3:"pen",4:"mouse"};$l.prototype.h=function(){$l.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var pu="closure_listenable_"+(1e6*Math.random()|0),UN=0;function BN(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++UN,this.fa=this.ia=!1}function pd(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Am(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function qN(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function w5(t){const e={};for(const n in t)e[n]=t[n];return e}const Gv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E5(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<Gv.length;s++)n=Gv[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function md(t){this.src=t,this.g={},this.h=0}md.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Sp(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new BN(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Ip(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=g5(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(pd(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Sp(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var km="closure_lm_"+(1e6*Math.random()|0),Yf={};function T5(t,e,n,r,i){if(r&&r.once)return b5(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)T5(t,e[s],n,r,i);return null}return n=Pm(n),t&&t[pu]?t.O(e,n,fu(r)?!!r.capture:!!r,i):x5(t,e,n,!1,r,i)}function x5(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=fu(i)?!!i.capture:!!i,a=Rm(t);if(a||(t[km]=a=new md(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=zN(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)DN||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(S5(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function zN(){function t(n){return e.call(t.src,t.listener,n)}const e=HN;return t}function b5(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)b5(t,e[s],n,r,i);return null}return n=Pm(n),t&&t[pu]?t.P(e,n,fu(r)?!!r.capture:!!r,i):x5(t,e,n,!0,r,i)}function I5(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)I5(t,e[s],n,r,i);else r=fu(r)?!!r.capture:!!r,n=Pm(n),t&&t[pu]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Sp(s,n,r,i),-1<n&&(pd(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Rm(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Sp(e,n,r,i)),(n=-1<t?e[t]:null)&&Nm(n))}function Nm(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[pu])Ip(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(S5(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Rm(e))?(Ip(n,t),n.h==0&&(n.src=null,e[km]=null)):pd(t)}}}function S5(t){return t in Yf?Yf[t]:Yf[t]="on"+t}function HN(t,e){if(t.fa)t=!0;else{e=new $l(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Nm(t),t=n.call(r,e)}return t}function Rm(t){return t=t[km],t instanceof md?t:null}var Xf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pm(t){return typeof t=="function"?t:(t[Xf]||(t[Xf]=function(e){return t.handleEvent(e)}),t[Xf])}function Ct(){$i.call(this),this.i=new md(this),this.S=this,this.J=null}At(Ct,$i);Ct.prototype[pu]=!0;Ct.prototype.removeEventListener=function(t,e,n,r){I5(this,t,e,n,r)};function Lt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Gt(e,t);else if(e instanceof Gt)e.target=e.target||t;else{var i=e;e=new Gt(r,t),E5(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=rc(o,r,!0,e)&&i}if(o=e.g=t,i=rc(o,r,!0,e)&&i,i=rc(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=rc(o,r,!1,e)&&i}Ct.prototype.N=function(){if(Ct.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)pd(n[r]);delete t.g[e],t.h--}}this.J=null};Ct.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Ct.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function rc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Ip(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var Om=me.JSON.stringify;class WN{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function KN(){var t=Lm;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class GN{constructor(){this.h=this.g=null}add(e,n){const r=C5.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var C5=new WN(()=>new QN,t=>t.reset());class QN{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function YN(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function XN(t){me.setTimeout(()=>{throw t},0)}let Vl,Ul=!1,Lm=new GN,A5=()=>{const t=me.Promise.resolve(void 0);Vl=()=>{t.then(JN)}};var JN=()=>{for(var t;t=KN();){try{t.h.call(t.g)}catch(n){XN(n)}var e=C5;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ul=!1};function gd(t,e){Ct.call(this),this.h=t||1,this.g=e||me,this.j=Kt(this.qb,this),this.l=Date.now()}At(gd,Ct);ie=gd.prototype;ie.ga=!1;ie.T=null;ie.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Lt(this,"tick"),this.ga&&(Dm(this),this.start()))}};ie.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Dm(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}ie.N=function(){gd.$.N.call(this),Dm(this),delete this.g};function Mm(t,e,n){if(typeof t=="function")n&&(t=Kt(t,n));else if(t&&typeof t.handleEvent=="function")t=Kt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:me.setTimeout(t,e||0)}function k5(t){t.g=Mm(()=>{t.g=null,t.i&&(t.i=!1,k5(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class ZN extends $i{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:k5(this)}N(){super.N(),this.g&&(me.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bl(t){$i.call(this),this.h=t,this.g={}}At(Bl,$i);var Qv=[];function N5(t,e,n,r){Array.isArray(n)||(n&&(Qv[0]=n.toString()),n=Qv);for(var i=0;i<n.length;i++){var s=T5(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function R5(t){Am(t.g,function(e,n){this.g.hasOwnProperty(n)&&Nm(e)},t),t.g={}}Bl.prototype.N=function(){Bl.$.N.call(this),R5(this)};Bl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function vd(){this.g=!0}vd.prototype.Ea=function(){this.g=!1};function e9(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var h=u[0];u=u[1];var c=h.split("_");o=2<=c.length&&c[1]=="type"?o+(h+"="+u+"&"):o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function t9(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function oo(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+r9(t,n)+(r?" "+r:"")})}function n9(t,e){t.info(function(){return"TIMEOUT: "+e})}vd.prototype.info=function(){};function r9(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Om(n)}catch{return e}}var Ds={},Yv=null;function yd(){return Yv=Yv||new Ct}Ds.Ta="serverreachability";function P5(t){Gt.call(this,Ds.Ta,t)}At(P5,Gt);function ql(t){const e=yd();Lt(e,new P5(e))}Ds.STAT_EVENT="statevent";function O5(t,e){Gt.call(this,Ds.STAT_EVENT,t),this.stat=e}At(O5,Gt);function nn(t){const e=yd();Lt(e,new O5(e,t))}Ds.Ua="timingevent";function L5(t,e){Gt.call(this,Ds.Ua,t),this.size=e}At(L5,Gt);function mu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return me.setTimeout(function(){t()},e)}var _d={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},D5={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function jm(){}jm.prototype.h=null;function Xv(t){return t.h||(t.h=t.i())}function M5(){}var gu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Fm(){Gt.call(this,"d")}At(Fm,Gt);function $m(){Gt.call(this,"c")}At($m,Gt);var Cp;function wd(){}At(wd,jm);wd.prototype.g=function(){return new XMLHttpRequest};wd.prototype.i=function(){return{}};Cp=new wd;function vu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Bl(this),this.P=i9,t=Tp?125:void 0,this.V=new gd(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new j5}function j5(){this.i=null,this.g="",this.h=!1}var i9=45e3,F5={},Ap={};ie=vu.prototype;ie.setTimeout=function(t){this.P=t};function kp(t,e,n){t.L=1,t.A=Td(Ur(e)),t.u=n,t.S=!0,$5(t,null)}function $5(t,e){t.G=Date.now(),yu(t),t.B=Ur(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),K5(n.i,"t",r),t.o=0,n=t.l.J,t.h=new j5,t.g=pT(t.l,n?e:null,!t.u),0<t.O&&(t.M=new ZN(Kt(t.Pa,t,t.g),t.O)),N5(t.U,t.g,"readystatechange",t.nb),e=t.I?w5(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ql(),e9(t.j,t.v,t.B,t.m,t.W,t.u)}ie.nb=function(t){t=t.target;const e=this.M;e&&lr(t)==3?e.l():this.Pa(t)};ie.Pa=function(t){try{if(t==this.g)e:{const h=lr(this.g);var e=this.g.Ia();const c=this.g.da();if(!(3>h)&&(h!=3||Tp||this.g&&(this.h.h||this.g.ja()||ty(this.g)))){this.J||h!=4||e==7||(e==8||0>=c?ql(3):ql(2)),Ed(this);var n=this.g.da();this.ca=n;t:if(V5(this)){var r=ty(this.g);t="";var i=r.length,s=lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){rs(this),sl(this);var o="";break t}this.h.i=new me.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,t9(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Fl(a)){var u=a;break t}}u=null}if(n=u)oo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Np(this,n);else{this.i=!1,this.s=3,nn(12),rs(this),sl(this);break e}}this.S?(U5(this,h,o),Tp&&this.i&&h==3&&(N5(this.U,this.V,"tick",this.mb),this.V.start())):(oo(this.j,this.m,o,null),Np(this,o)),h==4&&rs(this),this.i&&!this.J&&(h==4?cT(this.l,this):(this.i=!1,yu(this)))}else I9(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,nn(12)):(this.s=0,nn(13)),rs(this),sl(this)}}}catch{}finally{}};function V5(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function U5(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=s9(t,n),i==Ap){e==4&&(t.s=4,nn(14),r=!1),oo(t.j,t.m,null,"[Incomplete Response]");break}else if(i==F5){t.s=4,nn(15),oo(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else oo(t.j,t.m,i,null),Np(t,i);V5(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,nn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Hm(e),e.M=!0,nn(11))):(oo(t.j,t.m,n,"[Invalid Chunked Response]"),rs(t),sl(t))}ie.mb=function(){if(this.g){var t=lr(this.g),e=this.g.ja();this.o<e.length&&(Ed(this),U5(this,t,e),this.i&&t!=4&&yu(this))}};function s9(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Ap:(n=Number(e.substring(n,r)),isNaN(n)?F5:(r+=1,r+n>e.length?Ap:(e=e.slice(r,r+n),t.o=r+n,e)))}ie.cancel=function(){this.J=!0,rs(this)};function yu(t){t.Y=Date.now()+t.P,B5(t,t.P)}function B5(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=mu(Kt(t.lb,t),e)}function Ed(t){t.C&&(me.clearTimeout(t.C),t.C=null)}ie.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(n9(this.j,this.B),this.L!=2&&(ql(),nn(17)),rs(this),this.s=2,sl(this)):B5(this,this.Y-t)};function sl(t){t.l.H==0||t.J||cT(t.l,t)}function rs(t){Ed(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Dm(t.V),R5(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Np(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Rp(n.i,t))){if(!t.K&&Rp(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)ph(n),Sd(n);else break e;zm(n),nn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=mu(Kt(n.ib,n),6e3));if(1>=Y5(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else is(n,11)}else if((t.K||n.g==t)&&ph(n),!Fl(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const h=u[3];h!=null&&(n.ra=h,n.l.info("VER="+n.ra));const c=u[4];c!=null&&(n.Ga=c,n.l.info("SVER="+n.Ga));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const v=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var s=r.i;s.g||v.indexOf("spdy")==-1&&v.indexOf("quic")==-1&&v.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Vm(s,s.h),s.h=null))}if(r.F){const y=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.Da=y,Ye(r.I,r.F,y))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=fT(r,r.J?r.pa:null,r.Y),o.K){X5(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Ed(a),yu(a)),r.g=o}else lT(r);0<n.j.length&&Cd(n)}else u[0]!="stop"&&u[0]!="close"||is(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?is(n,7):qm(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}ql(4)}catch{}}function o9(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(dd(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function a9(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(dd(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function q5(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(dd(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=a9(t),r=o9(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var z5=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function l9(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function hs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof hs){this.h=t.h,dh(this,t.j),this.s=t.s,this.g=t.g,fh(this,t.m),this.l=t.l;var e=t.i,n=new zl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Jv(this,n),this.o=t.o}else t&&(e=String(t).match(z5))?(this.h=!1,dh(this,e[1]||"",!0),this.s=qa(e[2]||""),this.g=qa(e[3]||"",!0),fh(this,e[4]),this.l=qa(e[5]||"",!0),Jv(this,e[6]||"",!0),this.o=qa(e[7]||"")):(this.h=!1,this.i=new zl(null,this.h))}hs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(za(e,Zv,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(za(e,Zv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(za(n,n.charAt(0)=="/"?h9:c9,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",za(n,f9)),t.join("")};function Ur(t){return new hs(t)}function dh(t,e,n){t.j=n?qa(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function fh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Jv(t,e,n){e instanceof zl?(t.i=e,p9(t.i,t.h)):(n||(e=za(e,d9)),t.i=new zl(e,t.h))}function Ye(t,e,n){t.i.set(e,n)}function Td(t){return Ye(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function qa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function za(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,u9),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function u9(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Zv=/[#\/\?@]/g,c9=/[#\?:]/g,h9=/[#\?]/g,d9=/[#\?@]/g,f9=/#/g;function zl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Vi(t){t.g||(t.g=new Map,t.h=0,t.i&&l9(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ie=zl.prototype;ie.add=function(t,e){Vi(this),this.i=null,t=ea(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function H5(t,e){Vi(t),e=ea(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function W5(t,e){return Vi(t),e=ea(t,e),t.g.has(e)}ie.forEach=function(t,e){Vi(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};ie.ta=function(){Vi(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};ie.Z=function(t){Vi(this);let e=[];if(typeof t=="string")W5(this,t)&&(e=e.concat(this.g.get(ea(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};ie.set=function(t,e){return Vi(this),this.i=null,t=ea(this,t),W5(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ie.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function K5(t,e,n){H5(t,e),0<n.length&&(t.i=null,t.g.set(ea(t,e),Sm(n)),t.h+=n.length)}ie.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function ea(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function p9(t,e){e&&!t.j&&(Vi(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(H5(this,r),K5(this,i,n))},t)),t.j=e}var m9=class{constructor(t,e){this.g=t,this.map=e}};function G5(t){this.l=t||g9,me.PerformanceNavigationTiming?(t=me.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(me.g&&me.g.Ka&&me.g.Ka()&&me.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var g9=10;function Q5(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Y5(t){return t.h?1:t.g?t.g.size:0}function Rp(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Vm(t,e){t.g?t.g.add(e):t.h=e}function X5(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}G5.prototype.cancel=function(){if(this.i=J5(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function J5(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Sm(t.i)}var v9=class{stringify(t){return me.JSON.stringify(t,void 0)}parse(t){return me.JSON.parse(t,void 0)}};function y9(){this.g=new v9}function _9(t,e,n){const r=n||"";try{q5(t,function(i,s){let o=i;fu(i)&&(o=Om(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function w9(t,e){const n=new vd;if(me.Image){const r=new Image;r.onload=nc(ic,n,r,"TestLoadImage: loaded",!0,e),r.onerror=nc(ic,n,r,"TestLoadImage: error",!1,e),r.onabort=nc(ic,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=nc(ic,n,r,"TestLoadImage: timeout",!1,e),me.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ic(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function xd(t){this.l=t.ec||null,this.j=t.ob||!1}At(xd,jm);xd.prototype.g=function(){return new bd(this.l,this.j)};xd.prototype.i=function(t){return function(){return t}}({});function bd(t,e){Ct.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Um,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}At(bd,Ct);var Um=0;ie=bd.prototype;ie.open=function(t,e){if(this.readyState!=Um)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Hl(this)};ie.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||me).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};ie.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_u(this)),this.readyState=Um};ie.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Hl(this)),this.g&&(this.readyState=3,Hl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof me.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Z5(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Z5(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}ie.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?_u(this):Hl(this),this.readyState==3&&Z5(this)}};ie.Za=function(t){this.g&&(this.response=this.responseText=t,_u(this))};ie.Ya=function(t){this.g&&(this.response=t,_u(this))};ie.ka=function(){this.g&&_u(this)};function _u(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Hl(t)}ie.setRequestHeader=function(t,e){this.v.append(t,e)};ie.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ie.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Hl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(bd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var E9=me.JSON.parse;function st(t){Ct.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=eT,this.L=this.M=!1}At(st,Ct);var eT="",T9=/^https?$/i,x9=["POST","PUT"];ie=st.prototype;ie.Oa=function(t){this.M=t};ie.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Cp.g(),this.C=this.u?Xv(this.u):Xv(Cp),this.g.onreadystatechange=Kt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){ey(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=me.FormData&&t instanceof me.FormData,!(0<=g5(x9,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{rT(this),0<this.B&&((this.L=b9(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Kt(this.ua,this)):this.A=Mm(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){ey(this,s)}};function b9(t){return Do&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ie.ua=function(){typeof Im<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Lt(this,"timeout"),this.abort(8))};function ey(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,tT(t),Id(t)}function tT(t){t.F||(t.F=!0,Lt(t,"complete"),Lt(t,"error"))}ie.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Lt(this,"complete"),Lt(this,"abort"),Id(this))};ie.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Id(this,!0)),st.$.N.call(this)};ie.La=function(){this.s||(this.G||this.v||this.l?nT(this):this.kb())};ie.kb=function(){nT(this)};function nT(t){if(t.h&&typeof Im<"u"&&(!t.C[1]||lr(t)!=4||t.da()!=2)){if(t.v&&lr(t)==4)Mm(t.La,0,t);else if(Lt(t,"readystatechange"),lr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(z5)[1]||null;!i&&me.self&&me.self.location&&(i=me.self.location.protocol.slice(0,-1)),r=!T9.test(i?i.toLowerCase():"")}n=r}if(n)Lt(t,"complete"),Lt(t,"success");else{t.m=6;try{var s=2<lr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",tT(t)}}finally{Id(t)}}}}function Id(t,e){if(t.g){rT(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Lt(t,"ready");try{n.onreadystatechange=r}catch{}}}function rT(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(me.clearTimeout(t.A),t.A=null)}ie.isActive=function(){return!!this.g};function lr(t){return t.g?t.g.readyState:0}ie.da=function(){try{return 2<lr(this)?this.g.status:-1}catch{return-1}};ie.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ie.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),E9(e)}};function ty(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case eT:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function I9(t){const e={};t=(t.g&&2<=lr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Fl(t[r]))continue;var n=YN(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}qN(e,function(r){return r.join(", ")})}ie.Ia=function(){return this.m};ie.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function iT(t){let e="";return Am(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Bm(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=iT(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ye(t,e,n))}function Ia(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function sT(t){this.Ga=0,this.j=[],this.l=new vd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ia("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ia("baseRetryDelayMs",5e3,t),this.hb=Ia("retryDelaySeedMs",1e4,t),this.eb=Ia("forwardChannelMaxRetries",2,t),this.xa=Ia("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new G5(t&&t.concurrentRequestLimit),this.Ja=new y9,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ie=sT.prototype;ie.ra=8;ie.H=1;function qm(t){if(oT(t),t.H==3){var e=t.W++,n=Ur(t.I);if(Ye(n,"SID",t.K),Ye(n,"RID",e),Ye(n,"TYPE","terminate"),wu(t,n),e=new vu(t,t.l,e),e.L=2,e.A=Td(Ur(n)),n=!1,me.navigator&&me.navigator.sendBeacon)try{n=me.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&me.Image&&(new Image().src=e.A,n=!0),n||(e.g=pT(e.l,null),e.g.ha(e.A)),e.G=Date.now(),yu(e)}dT(t)}function Sd(t){t.g&&(Hm(t),t.g.cancel(),t.g=null)}function oT(t){Sd(t),t.u&&(me.clearTimeout(t.u),t.u=null),ph(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&me.clearTimeout(t.m),t.m=null)}function Cd(t){if(!Q5(t.i)&&!t.m){t.m=!0;var e=t.Na;Vl||A5(),Ul||(Vl(),Ul=!0),Lm.add(e,t),t.C=0}}function S9(t,e){return Y5(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=mu(Kt(t.Na,t,e),hT(t,t.C)),t.C++,!0)}ie.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new vu(this,this.l,t);let s=this.s;if(this.U&&(s?(s=w5(s),E5(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=aT(this,i,e),n=Ur(this.I),Ye(n,"RID",t),Ye(n,"CVER",22),this.F&&Ye(n,"X-HTTP-Session-Id",this.F),wu(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(iT(s)))+"&"+e:this.o&&Bm(n,this.o,s)),Vm(this.i,i),this.bb&&Ye(n,"TYPE","init"),this.P?(Ye(n,"$req",e),Ye(n,"SID","null"),i.aa=!0,kp(i,n,null)):kp(i,n,e),this.H=2}}else this.H==3&&(t?ny(this,t):this.j.length==0||Q5(this.i)||ny(this))};function ny(t,e){var n;e?n=e.m:n=t.W++;const r=Ur(t.I);Ye(r,"SID",t.K),Ye(r,"RID",n),Ye(r,"AID",t.V),wu(t,r),t.o&&t.s&&Bm(r,t.o,t.s),n=new vu(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=aT(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Vm(t.i,n),kp(n,r,e)}function wu(t,e){t.na&&Am(t.na,function(n,r){Ye(e,r,n)}),t.h&&q5({},function(n,r){Ye(e,r,n)})}function aT(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Kt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].g;const h=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{_9(h,o,"req"+u+"_")}catch{r&&r(h)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function lT(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Vl||A5(),Ul||(Vl(),Ul=!0),Lm.add(e,t),t.A=0}}function zm(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=mu(Kt(t.Ma,t),hT(t,t.A)),t.A++,!0)}ie.Ma=function(){if(this.u=null,uT(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=mu(Kt(this.jb,this),t)}};ie.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,nn(10),Sd(this),uT(this))};function Hm(t){t.B!=null&&(me.clearTimeout(t.B),t.B=null)}function uT(t){t.g=new vu(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ur(t.wa);Ye(e,"RID","rpc"),Ye(e,"SID",t.K),Ye(e,"AID",t.V),Ye(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ye(e,"TO",t.qa),Ye(e,"TYPE","xmlhttp"),wu(t,e),t.o&&t.s&&Bm(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Td(Ur(e)),n.u=null,n.S=!0,$5(n,t)}ie.ib=function(){this.v!=null&&(this.v=null,Sd(this),zm(this),nn(19))};function ph(t){t.v!=null&&(me.clearTimeout(t.v),t.v=null)}function cT(t,e){var n=null;if(t.g==e){ph(t),Hm(t),t.g=null;var r=2}else if(Rp(t.i,e))n=e.F,X5(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=yd(),Lt(r,new L5(r,n)),Cd(t)}else lT(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&S9(t,e)||r==2&&zm(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:is(t,5);break;case 4:is(t,10);break;case 3:is(t,6);break;default:is(t,2)}}}function hT(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function is(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Kt(t.pb,t);n||(n=new hs("//www.google.com/images/cleardot.gif"),me.location&&me.location.protocol=="http"||dh(n,"https"),Td(n)),w9(n.toString(),r)}else nn(2);t.H=0,t.h&&t.h.za(e),dT(t),oT(t)}ie.pb=function(t){t?(this.l.info("Successfully pinged google.com"),nn(2)):(this.l.info("Failed to ping google.com"),nn(1))};function dT(t){if(t.H=0,t.ma=[],t.h){const e=J5(t.i);(e.length!=0||t.j.length!=0)&&(Wv(t.ma,e),Wv(t.ma,t.j),t.i.i.length=0,Sm(t.j),t.j.length=0),t.h.ya()}}function fT(t,e,n){var r=n instanceof hs?Ur(n):new hs(n);if(r.g!="")e&&(r.g=e+"."+r.g),fh(r,r.m);else{var i=me.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new hs(null);r&&dh(s,r),e&&(s.g=e),i&&fh(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Ye(r,n,e),Ye(r,"VER",t.ra),wu(t,r),r}function pT(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new st(new xd({ob:n})):new st(t.va),e.Oa(t.J),e}ie.isActive=function(){return!!this.h&&this.h.isActive(this)};function mT(){}ie=mT.prototype;ie.Ba=function(){};ie.Aa=function(){};ie.za=function(){};ie.ya=function(){};ie.isActive=function(){return!0};ie.Va=function(){};function mh(){if(Do&&!(10<=Number($N)))throw Error("Environmental error: no available transport.")}mh.prototype.g=function(t,e){return new In(t,e)};function In(t,e){Ct.call(this),this.g=new sT(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Fl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Fl(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ta(this)}At(In,Ct);In.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;nn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=fT(t,null,t.Y),Cd(t)};In.prototype.close=function(){qm(this.g)};In.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Om(t),t=n);e.j.push(new m9(e.fb++,t)),e.H==3&&Cd(e)};In.prototype.N=function(){this.g.h=null,delete this.j,qm(this.g),delete this.g,In.$.N.call(this)};function gT(t){Fm.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}At(gT,Fm);function vT(){$m.call(this),this.status=1}At(vT,$m);function ta(t){this.g=t}At(ta,mT);ta.prototype.Ba=function(){Lt(this.g,"a")};ta.prototype.Aa=function(t){Lt(this.g,new gT(t))};ta.prototype.za=function(t){Lt(this.g,new vT)};ta.prototype.ya=function(){Lt(this.g,"b")};function C9(){this.blockSize=-1}function er(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}At(er,C9);er.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Jf(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}er.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Jf(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Jf(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Jf(this,r),i=0;break}}this.h=i,this.i+=e};er.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function $e(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var A9={};function Wm(t){return-128<=t&&128>t?MN(t,function(e){return new $e([e|0],0>e?-1:0)}):new $e([t|0],0>t?-1:0)}function ur(t){if(isNaN(t)||!isFinite(t))return vo;if(0>t)return Nt(ur(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Pp;return new $e(e,0)}function yT(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Nt(yT(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ur(Math.pow(e,8)),r=vo,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=ur(Math.pow(e,s)),r=r.R(s).add(ur(o))):(r=r.R(n),r=r.add(ur(o)))}return r}var Pp=4294967296,vo=Wm(0),Op=Wm(1),ry=Wm(16777216);ie=$e.prototype;ie.ea=function(){if(Pn(this))return-Nt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Pp+r)*e,e*=Pp}return t};ie.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(kr(this))return"0";if(Pn(this))return"-"+Nt(this).toString(t);for(var e=ur(Math.pow(t,6)),n=this,r="";;){var i=vh(n,e).g;n=gh(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,kr(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};ie.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function kr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Pn(t){return t.h==-1}ie.X=function(t){return t=gh(this,t),Pn(t)?-1:kr(t)?0:1};function Nt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new $e(n,~t.h).add(Op)}ie.abs=function(){return Pn(this)?Nt(this):this};ie.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new $e(n,n[n.length-1]&-2147483648?-1:0)};function gh(t,e){return t.add(Nt(e))}ie.R=function(t){if(kr(this)||kr(t))return vo;if(Pn(this))return Pn(t)?Nt(this).R(Nt(t)):Nt(Nt(this).R(t));if(Pn(t))return Nt(this.R(Nt(t)));if(0>this.X(ry)&&0>t.X(ry))return ur(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,sc(n,2*r+2*i),n[2*r+2*i+1]+=s*l,sc(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,sc(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,sc(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new $e(n,0)};function sc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Sa(t,e){this.g=t,this.h=e}function vh(t,e){if(kr(e))throw Error("division by zero");if(kr(t))return new Sa(vo,vo);if(Pn(t))return e=vh(Nt(t),e),new Sa(Nt(e.g),Nt(e.h));if(Pn(e))return e=vh(t,Nt(e)),new Sa(Nt(e.g),e.h);if(30<t.g.length){if(Pn(t)||Pn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Op,r=e;0>=r.X(t);)n=iy(n),r=iy(r);var i=qs(n,1),s=qs(r,1);for(r=qs(r,2),n=qs(n,2);!kr(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=qs(r,1),n=qs(n,1)}return e=gh(t,i.R(e)),new Sa(i,e)}for(i=vo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=ur(n),o=s.R(e);Pn(o)||0<o.X(t);)n-=r,s=ur(n),o=s.R(e);kr(s)&&(s=Op),i=i.add(s),t=gh(t,o)}return new Sa(i,t)}ie.gb=function(t){return vh(this,t).h};ie.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new $e(n,this.h&t.h)};ie.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new $e(n,this.h|t.h)};ie.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new $e(n,this.h^t.h)};function iy(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new $e(n,t.h)}function qs(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new $e(i,t.h)}mh.prototype.createWebChannel=mh.prototype.g;In.prototype.send=In.prototype.u;In.prototype.open=In.prototype.m;In.prototype.close=In.prototype.close;_d.NO_ERROR=0;_d.TIMEOUT=8;_d.HTTP_ERROR=6;D5.COMPLETE="complete";M5.EventType=gu;gu.OPEN="a";gu.CLOSE="b";gu.ERROR="c";gu.MESSAGE="d";Ct.prototype.listen=Ct.prototype.O;st.prototype.listenOnce=st.prototype.P;st.prototype.getLastError=st.prototype.Sa;st.prototype.getLastErrorCode=st.prototype.Ia;st.prototype.getStatus=st.prototype.da;st.prototype.getResponseJson=st.prototype.Wa;st.prototype.getResponseText=st.prototype.ja;st.prototype.send=st.prototype.ha;st.prototype.setWithCredentials=st.prototype.Oa;er.prototype.digest=er.prototype.l;er.prototype.reset=er.prototype.reset;er.prototype.update=er.prototype.j;$e.prototype.add=$e.prototype.add;$e.prototype.multiply=$e.prototype.R;$e.prototype.modulo=$e.prototype.gb;$e.prototype.compare=$e.prototype.X;$e.prototype.toNumber=$e.prototype.ea;$e.prototype.toString=$e.prototype.toString;$e.prototype.getBits=$e.prototype.D;$e.fromNumber=ur;$e.fromString=yT;var k9=function(){return new mh},N9=function(){return yd()},Zf=_d,R9=D5,P9=Ds,sy={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},oc=M5,O9=st,L9=er,yo=$e;const oy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let na="10.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new cd("@firebase/firestore");function Ca(){return Es.logLevel}function ne(t,...e){if(Es.logLevel<=Te.DEBUG){const n=e.map(Km);Es.debug(`Firestore (${na}): ${t}`,...n)}}function yr(t,...e){if(Es.logLevel<=Te.ERROR){const n=e.map(Km);Es.error(`Firestore (${na}): ${t}`,...n)}}function Mo(t,...e){if(Es.logLevel<=Te.WARN){const n=e.map(Km);Es.warn(`Firestore (${na}): ${t}`,...n)}}function Km(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${na}) INTERNAL ASSERTION FAILED: `+t;throw yr(e),new Error(e)}function He(t,e){t||fe()}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends Er{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class D9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ut.UNAUTHENTICATED))}shutdown(){}}class M9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class j9{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Lr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Lr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(He(typeof r.accessToken=="string"),new _T(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string"),new Ut(e)}}class F9{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $9{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new F9(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class V9{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U9{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(He(typeof n.token=="string"),this.R=n.token,new V9(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=B9(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Le(t,e){return t<e?-1:t>e?1:0}function jo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new te(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new wt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ge(e)}static min(){return new ge(new wt(0,0))}static max(){return new ge(new wt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(),r===void 0?r=e.length-n:r>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Wl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class qe extends Wl{construct(e,n,r){return new qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new te(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new qe(n)}static emptyPath(){return new qe([])}}const q9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Wl{construct(e,n,r){return new Pt(e,n,r)}static isValidIdentifier(e){return q9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new te(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new te(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new te(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new te(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(qe.fromString(e))}static fromName(e){return new he(qe.fromString(e).popFirst(5))}static empty(){return new he(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new qe(e.slice()))}}function z9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new wt(n+1,0):new wt(n,r));return new Ai(i,he.empty(),e)}function H9(t){return new Ai(t.readTime,t.key,-1)}class Ai{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ai(ge.min(),he.empty(),-1)}static max(){return new Ai(ge.max(),he.empty(),-1)}}function W9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class G9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eu(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==K9)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):J.reject(n)}static resolve(e){return new J((n,r)=>{n(e)})}static reject(e){return new J((n,r)=>{r(e)})}static waitFor(e){return new J((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=J.resolve(!1);for(const r of e)n=n.next(i=>i?J.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new J((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new J((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Lr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ol(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Qm(r.target.error);this.V.reject(new ol(e,i))}}static open(e,n,r,i){try{return new Gm(n,e.transaction(i,r))}catch(s){throw new ol(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Y9(n)}}class ss{constructor(e,n,r){this.name=e,this.version=n,this.p=r,ss.S(mt())===12.2&&yr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ne("SimpleDb","Removing database:",e),Zi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!u5())return!1;if(ss.C())return!0;const e=mt(),n=ss.S(e),r=0<n&&n<10,i=ss.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(ne("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new ol(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new te(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new te(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ol(e,o))},i.onupgradeneeded=s=>{ne("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{ne("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=Gm.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),J.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(ne("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Q9{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Zi(this.k.delete())}}class ol extends te{constructor(e,n){super(Q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Tu(t){return t.name==="IndexedDbTransactionError"}class Y9{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ne("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Zi(r)}add(e){return ne("SimpleDb","ADD",this.store.name,e,e),Zi(this.store.add(e))}get(e){return Zi(this.store.get(e)).next(n=>(n===void 0&&(n=null),ne("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ne("SimpleDb","DELETE",this.store.name,e),Zi(this.store.delete(e))}count(){return ne("SimpleDb","COUNT",this.store.name),Zi(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new J((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new J((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new J((r,i)=>{n.onerror=s=>{const o=Qm(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new J((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new Q9(a),u=n(a.primaryKey,a.value,l);if(u instanceof J){const h=u.catch(c=>(l.done(),J.reject(c)));r.push(h)}l.isDone?i():l.$===null?a.continue():a.continue(l.$)}}).next(()=>J.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Zi(t){return new J((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Qm(r.target.error);n(i)}})}let ay=!1;function Qm(t){const e=ss.S(mt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ay||(ay=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}Ym._e=-1;function Ad(t){return t==null}function yh(t){return t===0&&1/t==-1/0}function X9(t){return typeof t=="number"&&Number.isInteger(t)&&!yh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ms(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ET(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gt=class Lp{constructor(e,n){this.comparator=e,this.root=n||Ti.EMPTY}insert(e,n){return new Lp(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ti.BLACK,null,null))}remove(e){return new Lp(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ti.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ac(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ac(this.root,e,this.comparator,!1)}getReverseIterator(){return new ac(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ac(this.root,e,this.comparator,!0)}},ac=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ti=class xr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??xr.RED,this.left=i??xr.EMPTY,this.right=s??xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new xr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return xr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}};Ti.EMPTY=null,Ti.RED=!0,Ti.BLACK=!1;Ti.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ti(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uy(this.data.getIterator())}getIteratorFrom(e){return new uy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Dt(this.comparator);return n.data=e,n}}class uy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new yn([])}unionWith(e){let n=new Dt(Pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new TT("Invalid base64 string: "+s):s}}(e);return new Xt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const J9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ki(t){if(He(!!t),typeof t=="string"){let e=0;const n=J9.exec(t);if(He(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ht(t.seconds),nanos:ht(t.nanos)}}function ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ts(t){return typeof t=="string"?Xt.fromBase64String(t):Xt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Xm(t){const e=t.mapValue.fields.__previous_value__;return kd(e)?Xm(e):e}function Kl(t){const e=ki(t.mapValue.fields.__local_write_time__.timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Gl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Gl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function xs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kd(t)?4:eR(t)?9007199254740991:10:fe()}function _r(t,e){if(t===e)return!0;const n=xs(t);if(n!==xs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kl(t).isEqual(Kl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ki(i.timestampValue),a=ki(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ts(i.bytesValue).isEqual(Ts(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ht(i.geoPointValue.latitude)===ht(s.geoPointValue.latitude)&&ht(i.geoPointValue.longitude)===ht(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ht(i.integerValue)===ht(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ht(i.doubleValue),a=ht(s.doubleValue);return o===a?yh(o)===yh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return jo(t.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(ly(o)!==ly(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!_r(o[l],a[l])))return!1;return!0}(t,e);default:return fe()}}function Ql(t,e){return(t.values||[]).find(n=>_r(n,e))!==void 0}function Fo(t,e){if(t===e)return 0;const n=xs(t),r=xs(e);if(n!==r)return Le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ht(s.integerValue||s.doubleValue),l=ht(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return cy(t.timestampValue,e.timestampValue);case 4:return cy(Kl(t),Kl(e));case 5:return Le(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ts(s),l=Ts(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Le(a[u],l[u]);if(h!==0)return h}return Le(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Le(ht(s.latitude),ht(o.latitude));return a!==0?a:Le(ht(s.longitude),ht(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const h=Fo(a[u],l[u]);if(h)return h}return Le(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===lc.mapValue&&o===lc.mapValue)return 0;if(s===lc.mapValue)return 1;if(o===lc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let c=0;c<l.length&&c<h.length;++c){const d=Le(l[c],h[c]);if(d!==0)return d;const f=Fo(a[l[c]],u[h[c]]);if(f!==0)return f}return Le(l.length,h.length)}(t.mapValue,e.mapValue);default:throw fe()}}function cy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const n=ki(t),r=ki(e),i=Le(n.seconds,r.seconds);return i!==0?i:Le(n.nanos,r.nanos)}function $o(t){return Dp(t)}function Dp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ki(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Dp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Dp(n.fields[o])}`;return i+"}"}(t.mapValue):fe()}function _h(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Mp(t){return!!t&&"integerValue"in t}function Jm(t){return!!t&&"arrayValue"in t}function hy(t){return!!t&&"nullValue"in t}function dy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ac(t){return!!t&&"mapValue"in t}function al(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ms(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=al(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=al(t.arrayValue.values[n]);return e}return Object.assign({},t)}function eR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ac(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=al(n)}setAll(e){let n=Pt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=al(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ac(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ac(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ms(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new un(al(this.value))}}function xT(t){const e=[];return Ms(t.fields,(n,r)=>{const i=new Pt([n]);if(Ac(r)){const s=xT(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new qt(e,0,ge.min(),ge.min(),ge.min(),un.empty(),0)}static newFoundDocument(e,n,r,i){return new qt(e,1,n,ge.min(),r,i,0)}static newNoDocument(e,n){return new qt(e,2,n,ge.min(),ge.min(),un.empty(),0)}static newUnknownDocument(e,n){return new qt(e,3,n,ge.min(),ge.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n){this.position=e,this.inclusive=n}}function fy(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),n.key):r=Fo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function py(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_r(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n="asc"){this.field=e,this.dir=n}}function tR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{}class ft extends bT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new rR(e,n,r):n==="array-contains"?new oR(e,r):n==="in"?new aR(e,r):n==="not-in"?new lR(e,r):n==="array-contains-any"?new uR(e,r):new ft(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new iR(e,r):new sR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fo(n,this.value)):n!==null&&xs(this.value)===xs(n)&&this.matchesComparison(Fo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tr extends bT{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new tr(e,n)}matches(e){return IT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function IT(t){return t.op==="and"}function ST(t){return nR(t)&&IT(t)}function nR(t){for(const e of t.filters)if(e instanceof tr)return!1;return!0}function jp(t){if(t instanceof ft)return t.field.canonicalString()+t.op.toString()+$o(t.value);if(ST(t))return t.filters.map(e=>jp(e)).join(",");{const e=t.filters.map(n=>jp(n)).join(",");return`${t.op}(${e})`}}function CT(t,e){return t instanceof ft?function(r,i){return i instanceof ft&&r.op===i.op&&r.field.isEqual(i.field)&&_r(r.value,i.value)}(t,e):t instanceof tr?function(r,i){return i instanceof tr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&CT(o,i.filters[a]),!0):!1}(t,e):void fe()}function AT(t){return t instanceof ft?function(n){return`${n.field.canonicalString()} ${n.op} ${$o(n.value)}`}(t):t instanceof tr?function(n){return n.op.toString()+" {"+n.getFilters().map(AT).join(" ,")+"}"}(t):"Filter"}class rR extends ft{constructor(e,n,r){super(e,n,r),this.key=he.fromName(r.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class iR extends ft{constructor(e,n){super(e,"in",n),this.keys=kT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class sR extends ft{constructor(e,n){super(e,"not-in",n),this.keys=kT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function kT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>he.fromName(r.referenceValue))}class oR extends ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jm(n)&&Ql(n.arrayValue,this.value)}}class aR extends ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ql(this.value.arrayValue,n)}}class lR extends ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ql(this.value.arrayValue,n)}}class uR extends ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ql(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function my(t,e=null,n=[],r=[],i=null,s=null,o=null){return new cR(t,e,n,r,i,s,o)}function Zm(t){const e=ve(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ad(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$o(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$o(r)).join(",")),e.ce=n}return e.ce}function eg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!CT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!py(t.startAt,e.startAt)&&py(t.endAt,e.endAt)}function Fp(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function hR(t,e,n,r,i,s,o,a){return new js(t,e,n,r,i,s,o,a)}function Nd(t){return new js(t)}function gy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tg(t){return t.collectionGroup!==null}function _o(t){const e=ve(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Dt(Pt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Yl(s,r))}),n.has(Pt.keyField().canonicalString())||e.le.push(new Yl(Pt.keyField(),r))}return e.le}function pr(t){const e=ve(t);return e.he||(e.he=dR(e,_o(t))),e.he}function dR(t,e){if(t.limitType==="F")return my(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Yl(i.field,s)});const n=t.endAt?new Vo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vo(t.startAt.position,t.startAt.inclusive):null;return my(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $p(t,e){const n=t.filters.concat([e]);return new js(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function wh(t,e,n){return new js(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rd(t,e){return eg(pr(t),pr(e))&&t.limitType===e.limitType}function NT(t){return`${Zm(pr(t))}|lt:${t.limitType}`}function Hs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>AT(i)).join(", ")}]`),Ad(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>$o(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>$o(i)).join(",")),`Target(${r})`}(pr(t))}; limitType=${t.limitType})`}function Pd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):he.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of _o(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=fy(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,_o(r),i)||r.endAt&&!function(o,a,l){const u=fy(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,_o(r),i))}(t,e)}function fR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function RT(t){return(e,n)=>{let r=!1;for(const i of _o(t)){const s=pR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function pR(t,e,n){const r=t.field.isKeyField()?he.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Fo(l,u):fe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return ET(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=new gt(he.comparator);function Br(){return mR}const PT=new gt(he.comparator);function Ha(...t){let e=PT;for(const n of t)e=e.insert(n.key,n);return e}function OT(t){let e=PT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function os(){return ll()}function LT(){return ll()}function ll(){return new ra(t=>t.toString(),(t,e)=>t.isEqual(e))}const gR=new gt(he.comparator),vR=new Dt(he.comparator);function xe(...t){let e=vR;for(const n of t)e=e.add(n);return e}const yR=new Dt(Le);function _R(){return yR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yh(e)?"-0":e}}function MT(t){return{integerValue:""+t}}function wR(t,e){return X9(e)?MT(e):DT(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(){this._=void 0}}function ER(t,e,n){return t instanceof Xl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&kd(s)&&(s=Xm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Uo?FT(t,e):t instanceof Jl?$T(t,e):function(i,s){const o=jT(i,s),a=vy(o)+vy(i.Ie);return Mp(o)&&Mp(i.Ie)?MT(a):DT(i.serializer,a)}(t,e)}function TR(t,e,n){return t instanceof Uo?FT(t,e):t instanceof Jl?$T(t,e):n}function jT(t,e){return t instanceof Eh?function(r){return Mp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Xl extends Od{}class Uo extends Od{constructor(e){super(),this.elements=e}}function FT(t,e){const n=VT(e);for(const r of t.elements)n.some(i=>_r(i,r))||n.push(r);return{arrayValue:{values:n}}}class Jl extends Od{constructor(e){super(),this.elements=e}}function $T(t,e){let n=VT(e);for(const r of t.elements)n=n.filter(i=>!_r(i,r));return{arrayValue:{values:n}}}class Eh extends Od{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function vy(t){return ht(t.integerValue||t.doubleValue)}function VT(t){return Jm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,n){this.field=e,this.transform=n}}function xR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Uo&&i instanceof Uo||r instanceof Jl&&i instanceof Jl?jo(r.elements,i.elements,_r):r instanceof Eh&&i instanceof Eh?_r(r.Ie,i.Ie):r instanceof Xl&&i instanceof Xl}(t.transform,e.transform)}class bR{constructor(e,n){this.version=e,this.transformResults=n}}class jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ld{}function BT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ng(t.key,jn.none()):new xu(t.key,t.data,jn.none());{const n=t.data,r=un.empty();let i=new Dt(Pt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ui(t.key,r,new yn(i.toArray()),jn.none())}}function IR(t,e,n){t instanceof xu?function(i,s,o){const a=i.value.clone(),l=_y(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ui?function(i,s,o){if(!kc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=_y(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(qT(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ul(t,e,n,r){return t instanceof xu?function(s,o,a,l){if(!kc(s.precondition,o))return a;const u=s.value.clone(),h=wy(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ui?function(s,o,a,l){if(!kc(s.precondition,o))return a;const u=wy(s.fieldTransforms,l,o),h=o.data;return h.setAll(qT(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(s,o,a){return kc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function SR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=jT(r.transform,i||null);s!=null&&(n===null&&(n=un.empty()),n.set(r.field,s))}return n||null}function yy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&jo(r,i,(s,o)=>xR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xu extends Ld{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ui extends Ld{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function qT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function _y(t,e,n){const r=new Map;He(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,TR(o,a,n[i]))}return r}function wy(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,ER(s,o,e))}return r}class ng extends Ld{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CR extends Ld{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&IR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ul(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ul(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=LT();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=BT(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xe())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,(n,r)=>yy(n,r))&&jo(this.baseMutations,e.baseMutations,(n,r)=>yy(n,r))}}class rg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){He(e.mutations.length===r.length);let i=function(){return gR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new rg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,Ce;function RR(t){switch(t){default:return fe();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function zT(t){if(t===void 0)return yr("GRPC error has no .code"),Q.UNKNOWN;switch(t){case ct.OK:return Q.OK;case ct.CANCELLED:return Q.CANCELLED;case ct.UNKNOWN:return Q.UNKNOWN;case ct.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case ct.INTERNAL:return Q.INTERNAL;case ct.UNAVAILABLE:return Q.UNAVAILABLE;case ct.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case ct.NOT_FOUND:return Q.NOT_FOUND;case ct.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case ct.ABORTED:return Q.ABORTED;case ct.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case ct.DATA_LOSS:return Q.DATA_LOSS;default:return fe()}}(Ce=ct||(ct={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=new yo([4294967295,4294967295],0);function Ey(t){const e=PR().encode(t),n=new L9;return n.update(e),new Uint8Array(n.digest())}function Ty(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new yo([n,r],0),new yo([i,s],0)]}class ig{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wa(`Invalid padding: ${n}`);if(r<0)throw new Wa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wa(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=yo.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(yo.fromNumber(r)));return i.compare(OR)===1&&(i=new yo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Ey(e),[r,i]=Ty(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new ig(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=Ey(e),[r,i]=Ty(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,bu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Dd(ge.min(),i,new gt(Le),Br(),xe())}}class bu{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new bu(r,n,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class HT{constructor(e,n){this.targetId=e,this.fe=n}}class WT{constructor(e,n,r=Xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class xy{constructor(){this.ge=0,this.pe=Iy(),this.ye=Xt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=xe(),n=xe(),r=xe();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:fe()}}),new bu(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=Iy()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,He(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class LR{constructor(e){this.Be=e,this.ke=new Map,this.qe=Br(),this.Qe=by(),this.Ke=new gt(Le)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(Fp(s))if(r===0){const o=new he(s.path);this.We(n,o,qt.newNoDocument(o,ge.min()))}else He(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ts(r).toUint8Array()}catch(l){if(l instanceof TT)return Mo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ig(o,i,s)}catch(l){return Mo(l instanceof Wa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Fp(a.target)){const l=new he(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,qt.newNoDocument(l,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=xe();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Ye(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new Dd(e,n,this.Ke,this.qe,r);return this.qe=Br(),this.Qe=by(),this.Ke=new gt(Le),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new xy,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Dt(Le),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new xy),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function by(){return new gt(he.comparator)}function Iy(){return new gt(he.comparator)}const DR={asc:"ASCENDING",desc:"DESCENDING"},MR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jR={and:"AND",or:"OR"};class FR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vp(t,e){return t.useProto3Json||Ad(e)?e:{value:e}}function Th(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $R(t,e){return Th(t,e.toTimestamp())}function mr(t){return He(!!t),ge.fromTimestamp(function(n){const r=ki(n);return new wt(r.seconds,r.nanos)}(t))}function sg(t,e){return Up(t,e).canonicalString()}function Up(t,e){const n=function(i){return new qe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function GT(t){const e=qe.fromString(t);return He(ZT(e)),e}function Bp(t,e){return sg(t.databaseId,e.path)}function e0(t,e){const n=GT(e);if(n.get(1)!==t.databaseId.projectId)throw new te(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(YT(n))}function QT(t,e){return sg(t.databaseId,e)}function VR(t){const e=GT(t);return e.length===4?qe.emptyPath():YT(e)}function qp(t){return new qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YT(t){return He(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Sy(t,e,n){return{name:Bp(t,e),fields:n.value.mapValue.fields}}function UR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(He(h===void 0||typeof h=="string"),Xt.fromBase64String(h||"")):(He(h===void 0||h instanceof Uint8Array),Xt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?Q.UNKNOWN:zT(u.code);return new te(h,u.message||"")}(o);n=new WT(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=e0(t,r.document.name),s=mr(r.document.updateTime),o=r.document.createTime?mr(r.document.createTime):ge.min(),a=new un({mapValue:{fields:r.document.fields}}),l=qt.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Nc(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=e0(t,r.document),s=r.readTime?mr(r.readTime):ge.min(),o=qt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Nc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=e0(t,r.document),s=r.removedTargetIds||[];n=new Nc([],s,i,null)}else{if(!("filter"in e))return fe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new NR(i,s),a=r.targetId;n=new HT(a,o)}}return n}function BR(t,e){let n;if(e instanceof xu)n={update:Sy(t,e.key,e.value)};else if(e instanceof ng)n={delete:Bp(t,e.key)};else if(e instanceof Ui)n={update:Sy(t,e.key,e.data),updateMask:XR(e.fieldMask)};else{if(!(e instanceof CR))return fe();n={verify:Bp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Xl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Uo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Jl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Eh)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw fe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:$R(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fe()}(t,e.precondition)),n}function qR(t,e){return t&&t.length>0?(He(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?mr(i.updateTime):mr(s);return o.isEqual(ge.min())&&(o=mr(s)),new bR(o,i.transformResults||[])}(n,e))):[]}function zR(t,e){return{documents:[QT(t,e.path)]}}function HR(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QT(t,i);const s=function(u){if(u.length!==0)return JT(tr.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(d){return{field:Ws(d.field),direction:GR(d.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Vp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ut:n,parent:i}}function WR(t){let e=VR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){He(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(c){const d=XT(c);return d instanceof tr&&ST(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(c){return c.map(d=>function(v){return new Yl(Ks(v.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(c){let d;return d=typeof c=="object"?c.value:c,Ad(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(c){const d=!!c.before,f=c.values||[];return new Vo(f,d)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const d=!c.before,f=c.values||[];return new Vo(f,d)}(n.endAt)),hR(e,i,o,s,a,"F",l,u)}function KR(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ks(n.unaryFilter.field);return ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ks(n.unaryFilter.field);return ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ks(n.unaryFilter.field);return ft.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ks(n.unaryFilter.field);return ft.create(o,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(n){return ft.create(Ks(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return tr.create(n.compositeFilter.filters.map(r=>XT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(t):fe()}function GR(t){return DR[t]}function QR(t){return MR[t]}function YR(t){return jR[t]}function Ws(t){return{fieldPath:t.canonicalString()}}function Ks(t){return Pt.fromServerFormat(t.fieldPath)}function JT(t){return t instanceof ft?function(n){if(n.op==="=="){if(dy(n.value))return{unaryFilter:{field:Ws(n.field),op:"IS_NAN"}};if(hy(n.value))return{unaryFilter:{field:Ws(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(dy(n.value))return{unaryFilter:{field:Ws(n.field),op:"IS_NOT_NAN"}};if(hy(n.value))return{unaryFilter:{field:Ws(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ws(n.field),op:QR(n.op),value:n.value}}}(t):t instanceof tr?function(n){const r=n.getFilters().map(i=>JT(i));return r.length===1?r[0]:{compositeFilter:{op:YR(n.op),filters:r}}}(t):fe()}function XR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ZT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n,r,i,s=ge.min(),o=ge.min(),a=Xt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ci(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.ct=e}}function ZR(t){const e=WR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this._n=new tP}addToCollectionParentIndex(e,n){return this._n.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(Ai.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(Ai.min())}updateCollectionGroup(e,n,r){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class tP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Dt(qe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dt(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Bo(0)}static Ln(){return new Bo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(){this.changes=new ra(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?J.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ul(r.mutation,i,yn.empty(),wt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,xe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=xe()){const i=os();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ha();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=os();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,xe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Br();const o=ll(),a=function(){return ll()}();return n.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Ui)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),ul(h.mutation,u,h.mutation.getFieldMask(),wt.now())):o.set(u.key,yn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var c;return a.set(u,new rP(h,(c=o.get(u))!==null&&c!==void 0?c:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ll();let i=new gt((o,a)=>o-a),s=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||yn.empty();h=a.applyToLocalView(u,h),r.set(l,h);const c=(i.get(a.batchId)||xe()).add(l);i=i.insert(a.batchId,c)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,c=LT();h.forEach(d=>{if(!s.has(d)){const f=BT(n.get(d),r.get(d));f!==null&&c.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,c))}return J.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tg(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):J.resolve(os());let a=-1,l=s;return o.next(u=>J.forEach(u,(h,c)=>(a<c.largestBatchId&&(a=c.largestBatchId),s.get(h)?J.resolve():this.remoteDocumentCache.getEntry(e,h).next(d=>{l=l.insert(h,d)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,xe())).next(h=>({batchId:a,changes:OT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(r=>{let i=Ha();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ha();return this.indexManager.getCollectionParents(e,s).next(a=>J.forEach(a,l=>{const u=function(c,d){return new js(d,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((c,d)=>{o=o.insert(c,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,qt.newInvalidDocument(h)))});let a=Ha();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&ul(h.mutation,u,yn.empty(),wt.now()),Pd(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return J.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:mr(i.createTime)}}(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:ZR(i.bundledQuery),readTime:mr(i.readTime)}}(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this.overlays=new gt(he.comparator),this.hr=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const r=os();return J.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),J.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),J.resolve()}getOverlaysForCollection(e,n,r){const i=os(),s=n.length+1,o=new he(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return J.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new gt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=os(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=os(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return J.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new kR(n,r));let s=this.hr.get(n);s===void 0&&(s=xe(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.Pr=new Dt(Tt.Ir),this.Tr=new Dt(Tt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Tt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Tt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new he(new qe([])),r=new Tt(n,e),i=new Tt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new he(new qe([])),r=new Tt(n,e),i=new Tt(n,e+1);let s=xe();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Tt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Tt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return he.comparator(e.key,n.key)||Le(e.pr,n.pr)}static Er(e,n){return Le(e.pr,n.pr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Dt(Tt.Ir)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new AR(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Tt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return J.resolve(o)}lookupMutationBatch(e,n){return J.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return J.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Tt(n,0),i=new Tt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),J.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Dt(Le);return n.forEach(i=>{const s=new Tt(i,0),o=new Tt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),J.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;he.isDocumentKey(s)||(s=s.child(""));const o=new Tt(new he(s),0);let a=new Dt(Le);return this.wr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.pr)),!0)},o),J.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){He(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return J.forEach(n.mutations,i=>{const s=new Tt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Tt(n,0),i=this.wr.firstAfterOrEqual(r);return J.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.vr=e,this.docs=function(){return new gt(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return J.resolve(r?r.document.mutableCopy():qt.newInvalidDocument(n))}getEntries(e,n){let r=Br();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():qt.newInvalidDocument(i))}),J.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Br();const o=n.path,a=new he(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||W9(H9(h),r)<=0||(i.has(h.key)||Pd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return J.resolve(s)}getAllFromCollectionGroup(e,n,r,i){fe()}Fr(e,n){return J.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new uP(this)}getSize(e){return J.resolve(this.size)}}class uP extends nP{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),J.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e){this.persistence=e,this.Mr=new ra(n=>Zm(n),eg),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.Or=0,this.Nr=new og,this.targetCount=0,this.Lr=Bo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),J.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Bo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.qn(n),J.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),J.waitFor(s).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return J.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),J.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),J.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return J.resolve(r)}containsKey(e,n){return J.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,n){this.Br={},this.overlays={},this.kr=new Ym(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new cP(this),this.indexManager=new eP,this.remoteDocumentCache=function(i){return new lP(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new JR(n),this.$r=new sP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new aP(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const i=new dP(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return J.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class dP extends G9{constructor(e){super(),this.currentSequenceNumber=e}}class ag{constructor(e){this.persistence=e,this.zr=new og,this.jr=null}static Hr(e){return new ag(e)}get Jr(){if(this.jr)return this.jr;throw fe()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),J.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),J.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Jr,r=>{const i=he.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,ge.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return J.or([()=>J.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=xe(),i=xe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new lg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return hk()?8:ss.v(mt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new fP;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Ca()<=Te.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Hs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),J.resolve()):(Ca()<=Te.DEBUG&&ne("QueryEngine","Query:",Hs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Ca()<=Te.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Hs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pr(n))):J.resolve())}ji(e,n){if(gy(n))return J.resolve(null);let r=pr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=wh(n,null,"F"),r=pr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=xe(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Zi(n,a);return this.Xi(n,u,o,l.readTime)?this.ji(e,wh(n,null,"F")):this.es(e,u,n,l)}))})))}Hi(e,n,r,i){return gy(n)||i.isEqual(ge.min())?J.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?J.resolve(null):(Ca()<=Te.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hs(n)),this.es(e,o,n,z9(i,-1)).next(a=>a))})}Zi(e,n){let r=new Dt(RT(e));return n.forEach((i,s)=>{Pd(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Ca()<=Te.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Hs(n)),this.zi.getDocumentsMatchingQuery(e,n,Ai.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new gt(Le),this.rs=new ra(s=>Zm(s),eg),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iP(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function gP(t,e,n,r){return new mP(t,e,n,r)}async function ex(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=xe();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})}function vP(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const c=u.batch,d=c.keys();let f=J.resolve();return d.forEach(v=>{f=f.next(()=>h.getEntry(l,v)).next(y=>{const w=u.docVersions.get(v);He(w!==null),y.version.compareTo(w)<0&&(c.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),h.addEntry(y)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,c))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=xe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function tx(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function yP(t,e){const n=ve(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((h,c)=>{const d=i.get(c);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,h.removedDocuments,c).next(()=>n.Qr.addMatchingKeys(s,h.addedDocuments,c)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(c)!==null?f=f.withResumeToken(Xt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):h.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(h.resumeToken,r)),i=i.insert(c,f),function(y,w,p){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size>0}(d,f,h)&&a.push(n.Qr.updateTargetData(s,f))});let l=Br(),u=xe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(_P(s,o,e.documentUpdates).next(h=>{l=h.cs,u=h.ls})),!r.isEqual(ge.min())){const h=n.Qr.getLastRemoteSnapshotVersion(s).next(c=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return J.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.ns=i,s))}function _P(t,e,n){let r=xe(),i=xe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Br();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ge.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ne("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{cs:o,ls:i}})}function wP(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function EP(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,J.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new ci(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function zp(t,e,n){const r=ve(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Tu(o))throw o;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function Cy(t,e,n){const r=ve(t);let i=ge.min(),s=xe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const c=ve(l),d=c.rs.get(h);return d!==void 0?J.resolve(c.ns.get(d)):c.Qr.getTargetData(u,h)}(r,o,pr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:ge.min(),n?s:xe())).next(a=>(TP(r,fR(e),a),{documents:a,hs:s})))}function TP(t,e,n){let r=t.ss.get(e)||ge.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class Ay{constructor(){this.activeTargetIds=_R()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xP{constructor(){this.no=new Ay,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Ay,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc=null;function t0(){return uc===null?uc=function(){return 268435456+Math.round(2147483648*Math.random())}():uc++,"0x"+uc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class CP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){const a=t0(),l=this.bo(n,r.toUriEncodedString());ne("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,s,o),this.Co(n,l,u,i).then(h=>(ne("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Mo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+na}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){const i=IP[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const s=t0();return new Promise((o,a)=>{const l=new O9;l.setWithCredentials(!0),l.listenOnce(R9.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Zf.NO_ERROR:const h=l.getResponseJson();ne(Vt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Zf.TIMEOUT:ne(Vt,`RPC '${e}' ${s} timed out`),a(new te(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Zf.HTTP_ERROR:const c=l.getStatus();if(ne(Vt,`RPC '${e}' ${s} failed with status:`,c,"response text:",l.getResponseText()),c>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const v=function(w){const p=w.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(p)>=0?p:Q.UNKNOWN}(f.status);a(new te(v,f.message))}else a(new te(Q.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new te(Q.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{ne(Vt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);ne(Vt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Fo(e,n,r){const i=t0(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=k9(),a=N9(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");ne(Vt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const c=o.createWebChannel(h,l);let d=!1,f=!1;const v=new SP({lo:w=>{f?ne(Vt,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(d||(ne(Vt,`Opening RPC '${e}' stream ${i} transport.`),c.open(),d=!0),ne(Vt,`RPC '${e}' stream ${i} sending:`,w),c.send(w))},ho:()=>c.close()}),y=(w,p,m)=>{w.listen(p,E=>{try{m(E)}catch(g){setTimeout(()=>{throw g},0)}})};return y(c,oc.EventType.OPEN,()=>{f||ne(Vt,`RPC '${e}' stream ${i} transport opened.`)}),y(c,oc.EventType.CLOSE,()=>{f||(f=!0,ne(Vt,`RPC '${e}' stream ${i} transport closed`),v.Vo())}),y(c,oc.EventType.ERROR,w=>{f||(f=!0,Mo(Vt,`RPC '${e}' stream ${i} transport errored:`,w),v.Vo(new te(Q.UNAVAILABLE,"The operation could not be completed")))}),y(c,oc.EventType.MESSAGE,w=>{var p;if(!f){const m=w.data[0];He(!!m);const E=m,g=E.error||((p=E[0])===null||p===void 0?void 0:p.error);if(g){ne(Vt,`RPC '${e}' stream ${i} received error:`,g);const T=g.status;let x=function(k){const I=ct[k];if(I!==void 0)return zT(I)}(T),b=g.message;x===void 0&&(x=Q.INTERNAL,b="Unknown error status: "+T+" with message "+g.message),f=!0,v.Vo(new te(x,b)),c.close()}else ne(Vt,`RPC '${e}' stream ${i} received:`,m),v.mo(m)}}),y(a,P9.STAT_EVENT,w=>{w.stat===sy.PROXY?ne(Vt,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===sy.NOPROXY&&ne(Vt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.Ro()},0),v}}function n0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(t){return new FR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new nx(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(yr(n.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new te(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class AP extends rx{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=UR(this.serializer,e),r=function(s){if(!("targetChange"in s))return ge.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?mr(o.readTime):ge.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=qp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Fp(l)?{documents:zR(s,l)}:{query:HR(s,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=KT(s,o.resumeToken);const u=Vp(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=Th(s,o.snapshotVersion.toTimestamp());const u=Vp(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=KR(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=qp(this.serializer),n.removeTarget=e,this.t_(n)}}class kP extends rx{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(He(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=qR(e.writeResults,e.commitTime),r=mr(e.commitTime);return this.listener.T_(r,n)}return He(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=qp(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>BR(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new te(Q.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,Up(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new te(Q.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Up(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(Q.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class RP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(yr(n),this.g_=!1):ne("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(async()=>{Fs(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ve(l);u.v_.add(4),await Iu(u),u.x_.set("Unknown"),u.v_.delete(4),await jd(u)}(this))})}),this.x_=new RP(r,i)}}async function jd(t){if(Fs(t))for(const e of t.F_)await e(!0)}async function Iu(t){for(const e of t.F_)await e(!1)}function ix(t,e){const n=ve(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),dg(n)?hg(n):ia(n).Jo()&&cg(n,e))}function ug(t,e){const n=ve(t),r=ia(n);n.C_.delete(e),r.Jo()&&sx(n,e),n.C_.size===0&&(r.Jo()?r.Xo():Fs(n)&&n.x_.set("Unknown"))}function cg(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ia(t).c_(e)}function sx(t,e){t.O_.Oe(e),ia(t).l_(e)}function hg(t){t.O_=new LR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ia(t).start(),t.x_.p_()}function dg(t){return Fs(t)&&!ia(t).Ho()&&t.C_.size>0}function Fs(t){return ve(t).v_.size===0}function ox(t){t.O_=void 0}async function OP(t){t.C_.forEach((e,n)=>{cg(t,e)})}async function LP(t,e){ox(t),dg(t)?(t.x_.S_(e),hg(t)):t.x_.set("Unknown")}async function DP(t,e,n){if(t.x_.set("Online"),e instanceof WT&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))}(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xh(t,r)}else if(e instanceof Nc?t.O_.$e(e):e instanceof HT?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(ge.min()))try{const r=await tx(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.C_.get(u);h&&s.C_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.C_.get(l);if(!h)return;s.C_.set(l,h.withResumeToken(Xt.EMPTY_BYTE_STRING,h.snapshotVersion)),sx(s,l);const c=new ci(h.target,l,u,h.sequenceNumber);cg(s,c)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),await xh(t,r)}}async function xh(t,e,n){if(!Tu(e))throw e;t.v_.add(1),await Iu(t),t.x_.set("Offline"),n||(n=()=>tx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await jd(t)})}function ax(t,e){return e().catch(n=>xh(t,n,e))}async function Fd(t){const e=ve(t),n=Ni(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;MP(e);)try{const i=await wP(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,jP(e,i)}catch(i){await xh(e,i)}lx(e)&&ux(e)}function MP(t){return Fs(t)&&t.D_.length<10}function jP(t,e){t.D_.push(e);const n=Ni(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function lx(t){return Fs(t)&&!Ni(t).Ho()&&t.D_.length>0}function ux(t){Ni(t).start()}async function FP(t){Ni(t).d_()}async function $P(t){const e=Ni(t);for(const n of t.D_)e.I_(n.mutations)}async function VP(t,e,n){const r=t.D_.shift(),i=rg.from(r,e,n);await ax(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Fd(t)}async function UP(t,e){e&&Ni(t).P_&&await async function(r,i){if(function(o){return RR(o)&&o!==Q.ABORTED}(i.code)){const s=r.D_.shift();Ni(r).Zo(),await ax(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Fd(r)}}(t,e),lx(t)&&ux(t)}async function Ny(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=Fs(n);n.v_.add(3),await Iu(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await jd(n)}async function BP(t,e){const n=ve(t);e?(n.v_.delete(2),await jd(n)):e||(n.v_.add(2),await Iu(n),n.x_.set("Unknown"))}function ia(t){return t.N_||(t.N_=function(n,r,i){const s=ve(n);return s.R_(),new AP(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:OP.bind(null,t),To:LP.bind(null,t),u_:DP.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),dg(t)?hg(t):t.x_.set("Unknown")):(await t.N_.stop(),ox(t))})),t.N_}function Ni(t){return t.L_||(t.L_=function(n,r,i){const s=ve(n);return s.R_(),new kP(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:FP.bind(null,t),To:UP.bind(null,t),E_:$P.bind(null,t),T_:VP.bind(null,t)}),t.F_.push(async e=>{e?(t.L_.Zo(),await Fd(t)):(await t.L_.stop(),t.D_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new fg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pg(t,e){if(yr("AsyncQueue",`${e}: ${t}`),Tu(t))return new te(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||he.comparator(n.key,r.key):(n,r)=>he.comparator(n.key,r.key),this.keyedMap=Ha(),this.sortedSet=new gt(this.comparator)}static emptySet(e){return new wo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new wo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(){this.B_=new gt(he.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):fe():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class qo{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new qo(e,n,wo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class zP{constructor(){this.queries=new ra(e=>NT(e),Rd),this.onlineState="Unknown",this.W_=new Set}}async function cx(t,e){const n=ve(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new qP,r=e.U_()?0:1);try{switch(r){case 0:s.q_=await n.onListen(i,!0);break;case 1:s.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=pg(o,`Initialization of query '${Hs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&mg(n)}async function hx(t,e){const n=ve(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function HP(t,e){const n=ve(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&mg(n)}function WP(t,e,n){const r=ve(t),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(e)}function mg(t){t.W_.forEach(e=>{e.next()})}var Hp,Py;(Py=Hp||(Hp={})).j_="default",Py.Cache="cache";class dx{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new qo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==Hp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e){this.key=e}}class px{constructor(e){this.key=e}}class KP{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=xe(),this.mutatedKeys=xe(),this.ha=RT(e),this.Pa=new wo(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new Ry,i=n?n.Pa:this.Pa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,c)=>{const d=i.get(h),f=Pd(this.query,c)?c:null,v=!!d&&this.mutatedKeys.has(d.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let w=!1;d&&f?d.data.isEqual(f.data)?v!==y&&(r.track({type:3,doc:f}),w=!0):this.da(d,f)||(r.track({type:2,doc:f}),w=!0,(l&&this.ha(f,l)>0||u&&this.ha(f,u)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),w=!0):d&&!f&&(r.track({type:1,doc:d}),w=!0,(l||u)&&(a=!0)),w&&(f?(o=o.add(f),s=y?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((h,c)=>function(f,v){const y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return y(f)-y(v)}(h.type,c.type)||this.ha(h.doc,c.doc)),this.Aa(r),i=i!=null&&i;const a=n&&!i?this.Ra():[],l=this.la.size===0&&this.current&&!i?1:0,u=l!==this.ca;return this.ca=l,o.length!==0||u?{snapshot:new qo(this.query,e.Pa,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Ry,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=xe(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new px(r))}),this.la.forEach(r=>{e.has(r)||n.push(new fx(r))}),n}fa(e){this.ua=e.hs,this.la=xe();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return qo.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class GP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class QP{constructor(e){this.key=e,this.pa=!1}}class YP{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new ra(a=>NT(a),Rd),this.Sa=new Map,this.ba=new Set,this.Da=new gt(he.comparator),this.Ca=new Map,this.va=new og,this.Fa={},this.Ma=new Map,this.xa=Bo.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function XP(t,e,n=!0){const r=wx(t);let i;const s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await mx(r,e,n,!0),i}async function JP(t,e){const n=wx(t);await mx(n,e,!0,!1)}async function mx(t,e,n,r){const i=await EP(t.localStore,pr(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await ZP(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&ix(t.remoteStore,i),a}async function ZP(t,e,n,r,i){t.Na=(c,d,f)=>async function(y,w,p,m){let E=w.view.Ta(p);E.Xi&&(E=await Cy(y.localStore,w.query,!1).then(({documents:b})=>w.view.Ta(b,E)));const g=m&&m.targetChanges.get(w.targetId),T=m&&m.targetMismatches.get(w.targetId)!=null,x=w.view.applyChanges(E,y.isPrimaryClient,g,T);return Ly(y,w.targetId,x.Va),x.snapshot}(t,c,d,f);const s=await Cy(t.localStore,e,!0),o=new KP(e,s.hs),a=o.Ta(s.documents),l=bu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);Ly(t,n,u.Va);const h=new GP(e,n,o);return t.wa.set(e,h),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),u.snapshot}async function eO(t,e,n){const r=ve(t),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!Rd(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await zp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ug(r.remoteStore,i.targetId),Wp(r,i.targetId)}).catch(Eu)):(Wp(r,i.targetId),await zp(r.localStore,i.targetId,!0))}async function tO(t,e){const n=ve(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ug(n.remoteStore,r.targetId))}async function nO(t,e,n){const r=uO(t);try{const i=await function(o,a){const l=ve(o),u=wt.now(),h=a.reduce((f,v)=>f.add(v.key),xe());let c,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let v=Br(),y=xe();return l.os.getEntries(f,h).next(w=>{v=w,v.forEach((p,m)=>{m.isValidDocument()||(y=y.add(p))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,v)).next(w=>{c=w;const p=[];for(const m of a){const E=SR(m,c.get(m.key).overlayedDocument);E!=null&&p.push(new Ui(m.key,E,xT(E.value.mapValue),jn.exists(!0)))}return l.mutationQueue.addMutationBatch(f,u,p,a)}).next(w=>{d=w;const p=w.applyToLocalDocumentSet(c,y);return l.documentOverlayCache.saveOverlays(f,w.batchId,p)})}).then(()=>({batchId:d.batchId,changes:OT(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Fa[o.currentUser.toKey()];u||(u=new gt(Le)),u=u.insert(a,l),o.Fa[o.currentUser.toKey()]=u}(r,i.batchId,n),await Su(r,i.changes),await Fd(r.remoteStore)}catch(i){const s=pg(i,"Failed to persist write");n.reject(s)}}async function gx(t,e){const n=ve(t);try{const r=await yP(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ca.get(s);o&&(He(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?He(o.pa):i.removedDocuments.size>0&&(He(o.pa),o.pa=!1))}),await Su(n,r,e)}catch(r){await Eu(r)}}function Oy(t,e,n){const r=ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.wa.forEach((s,o)=>{const a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ve(o);l.onlineState=a;let u=!1;l.queries.forEach((h,c)=>{for(const d of c.Q_)d.G_(a)&&(u=!0)}),u&&mg(l)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function rO(t,e,n){const r=ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ca.get(e),s=i&&i.key;if(s){let o=new gt(he.comparator);o=o.insert(s,qt.newNoDocument(s,ge.min()));const a=xe().add(s),l=new Dd(ge.min(),new Map,new gt(Le),o,a);await gx(r,l),r.Da=r.Da.remove(s),r.Ca.delete(e),gg(r)}else await zp(r.localStore,e,!1).then(()=>Wp(r,e,n)).catch(Eu)}async function iO(t,e){const n=ve(t),r=e.batch.batchId;try{const i=await vP(n.localStore,e);yx(n,r,null),vx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Su(n,i)}catch(i){await Eu(i)}}async function sO(t,e,n){const r=ve(t);try{const i=await function(o,a){const l=ve(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(c=>(He(c!==null),h=c.keys(),l.mutationQueue.removeMutationBatch(u,c))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);yx(r,e,n),vx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Su(r,i)}catch(i){await Eu(i)}}function vx(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function yx(t,e,n){const r=ve(t);let i=r.Fa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function Wp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||_x(t,r)})}function _x(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);n!==null&&(ug(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),gg(t))}function Ly(t,e,n){for(const r of n)r instanceof fx?(t.va.addReference(r.key,e),oO(t,r)):r instanceof px?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||_x(t,r.key)):fe()}function oO(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.ba.add(r),gg(t))}function gg(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new he(qe.fromString(e)),r=t.xa.next();t.Ca.set(r,new QP(n)),t.Da=t.Da.insert(n,r),ix(t.remoteStore,new ci(pr(Nd(n.path)),r,"TargetPurposeLimboResolution",Ym._e))}}async function Su(t,e,n){const r=ve(t),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{o.push(r.Na(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const h=lg.Ki(l.targetId,u);s.push(h)}}))}),await Promise.all(o),r.ya.u_(i),await async function(l,u){const h=ve(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>J.forEach(u,d=>J.forEach(d.qi,f=>h.persistence.referenceDelegate.addReference(c,d.targetId,f)).next(()=>J.forEach(d.Qi,f=>h.persistence.referenceDelegate.removeReference(c,d.targetId,f)))))}catch(c){if(!Tu(c))throw c;ne("LocalStore","Failed to update sequence numbers: "+c)}for(const c of u){const d=c.targetId;if(!c.fromCache){const f=h.ns.get(d),v=f.snapshotVersion,y=f.withLastLimboFreeSnapshotVersion(v);h.ns=h.ns.insert(d,y)}}}(r.localStore,s))}async function aO(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=await ex(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(l=>{l.reject(new te(Q.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Su(n,r.us)}}function lO(t,e){const n=ve(t),r=n.Ca.get(e);if(r&&r.pa)return xe().add(r.key);{let i=xe();const s=n.Sa.get(e);if(!s)return i;for(const o of s){const a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function wx(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rO.bind(null,e),e.ya.u_=HP.bind(null,e.eventManager),e.ya.La=WP.bind(null,e.eventManager),e}function uO(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sO.bind(null,e),e}class Dy{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Md(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return gP(this.persistence,new pP,e.initialUser,this.serializer)}createPersistence(e){return new hP(ag.Hr,this.serializer)}createSharedClientState(e){return new xP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class cO{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Oy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aO.bind(null,this.syncEngine),await BP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zP}()}createDatastore(e){const n=Md(e.databaseInfo.databaseId),r=function(s){return new CP(s)}(e.databaseInfo);return function(s,o,a,l){return new NP(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new PP(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Oy(this.syncEngine,n,0),function(){return ky.D()?new ky:new bP}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,h){const c=new YP(i,s,o,a,l,u);return h&&(c.Oa=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=ve(r);ne("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await Iu(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ut.UNAUTHENTICATED,this.clientId=wT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{ne("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ne("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new te(Q.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=pg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function r0(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ex(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function My(t,e){t.asyncQueue.verifyOperationInProgress();const n=await fO(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ny(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Ny(e.remoteStore,i)),t._onlineComponents=e}function dO(t){return t.name==="FirebaseError"?t.code===Q.FAILED_PRECONDITION||t.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function fO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await r0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!dO(n))throw n;Mo("Error using user provided cache. Falling back to memory cache: "+n),await r0(t,new Dy)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await r0(t,new Dy);return t._offlineComponents}async function Tx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await My(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await My(t,new cO))),t._onlineComponents}function pO(t){return Tx(t).then(e=>e.syncEngine)}async function Kp(t){const e=await Tx(t),n=e.eventManager;return n.onListen=XP.bind(null,e.syncEngine),n.onUnlisten=eO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=JP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=tO.bind(null,e.syncEngine),n}function mO(t,e,n={}){const r=new Lr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new Ex({next:d=>{o.enqueueAndForget(()=>hx(s,c));const f=d.docs.has(a);!f&&d.fromCache?u.reject(new te(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&l&&l.source==="server"?u.reject(new te(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),c=new dx(Nd(a.path),h,{includeMetadataChanges:!0,ta:!0});return cx(s,c)}(await Kp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t,e,n){if(!n)throw new te(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gO(t,e,n,r){if(e===!0&&r===!0)throw new te(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Fy(t){if(!he.isDocumentKey(t))throw new te(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $y(t){if(he.isDocumentKey(t))throw new te(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $d(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function Fn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$d(t);throw new te(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function vO(t,e){if(e<=0)throw new te(Q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new te(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new te(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new te(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new te(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new te(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new te(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new te(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new D9;switch(r.type){case"firstParty":return new $9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=jy.get(n);r&&(ne("ComponentProvider","Removing Datastore"),jy.delete(n),r.terminate())}(this),Promise.resolve()}}function yO(t,e,n,r={}){var i;const s=(t=Fn(t,Vd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ut.MOCK_USER;else{a=Tm(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new te(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ut(u)}t._authCredentials=new M9(new _T(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Kr(this.firestore,e,this._query)}}class Qt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}}class xi extends Kr{constructor(e,n,r){super(e,n,Nd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new he(e))}withConverter(e){return new xi(this.firestore,e,this._path)}}function Mt(t,e,...n){if(t=Be(t),bx("collection","path",e),t instanceof Vd){const r=qe.fromString(e,...n);return $y(r),new xi(t,null,r)}{if(!(t instanceof Qt||t instanceof xi))throw new te(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return $y(r),new xi(t.firestore,null,r)}}function Pe(t,e,...n){if(t=Be(t),arguments.length===1&&(e=wT.newId()),bx("doc","path",e),t instanceof Vd){const r=qe.fromString(e,...n);return Fy(r),new Qt(t,null,new he(r))}{if(!(t instanceof Qt||t instanceof xi))throw new te(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return Fy(r),new Qt(t.firestore,t instanceof xi?t.converter:null,new he(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new nx(this,"async_queue_retry"),this.cu=()=>{const n=n0();n&&ne("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=n0();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=n0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new Lr;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Tu(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw yr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const i=fg.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&fe()}verifyOperationInProgress(){}async Tu(){let e;do e=this.nu,await e;while(e!==this.nu)}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function Uy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ri extends Vd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new _O}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ix(this),this._firestoreClient.terminate()}}function wO(t,e){const n=typeof t=="object"?t:hd(),r=typeof t=="string"?t:e||"(default)",i=du(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=wm("firestore");s&&yO(i,...s)}return i}function vg(t){return t._firestoreClient||Ix(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Ix(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,h){return new Z9(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,xx(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new hO(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zo(Xt.fromBase64String(e))}catch(n){throw new te(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zo(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=/^__.*__$/;class TO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ui(e,this.data,this.fieldMask,n,this.fieldTransforms):new xu(e,this.data,n,this.fieldTransforms)}}class Sx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ui(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Cx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class Bd{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new Bd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return bh(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(Cx(this.Vu)&&EO.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class xO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Md(e)}Cu(e,n,r,i=!1){return new Bd({Vu:e,methodName:n,Du:r,path:Pt.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Au(t){const e=t._freezeSettings(),n=Md(t._databaseId);return new xO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ax(t,e,n,r,i,s={}){const o=t.Cu(s.merge||s.mergeFields?2:0,e,n,i);Eg("Data must be an object, but it was:",o,r);const a=Nx(r,o);let l,u;if(s.merge)l=new yn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const c of s.mergeFields){const d=Gp(e,c,n);if(!o.contains(d))throw new te(Q.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);Px(h,d)||h.push(d)}l=new yn(h),u=o.fieldTransforms.filter(c=>l.covers(c.field))}else l=null,u=o.fieldTransforms;return new TO(new un(a),l,u)}class qd extends Cu{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qd}}function bO(t,e,n){return new Bd({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class _g extends Cu{_toFieldTransform(e){return new UT(e.path,new Xl)}isEqual(e){return e instanceof _g}}class wg extends Cu{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=bO(this,e,!0),r=this.vu.map(s=>sa(s,n)),i=new Uo(r);return new UT(e.path,i)}isEqual(e){return e instanceof wg&&Ml(this.vu,e.vu)}}function IO(t,e,n,r){const i=t.Cu(1,e,n);Eg("Data must be an object, but it was:",i,r);const s=[],o=un.empty();Ms(r,(l,u)=>{const h=Tg(e,l,n);u=Be(u);const c=i.yu(h);if(u instanceof qd)s.push(h);else{const d=sa(u,c);d!=null&&(s.push(h),o.set(h,d))}});const a=new yn(s);return new Sx(o,a,i.fieldTransforms)}function SO(t,e,n,r,i,s){const o=t.Cu(1,e,n),a=[Gp(e,r,n)],l=[i];if(s.length%2!=0)throw new te(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Gp(e,s[d])),l.push(s[d+1]);const u=[],h=un.empty();for(let d=a.length-1;d>=0;--d)if(!Px(u,a[d])){const f=a[d];let v=l[d];v=Be(v);const y=o.yu(f);if(v instanceof qd)u.push(f);else{const w=sa(v,y);w!=null&&(u.push(f),h.set(f,w))}}const c=new yn(u);return new Sx(h,c,o.fieldTransforms)}function kx(t,e,n,r=!1){return sa(n,t.Cu(r?4:3,e))}function sa(t,e){if(Rx(t=Be(t)))return Eg("Unsupported field value:",e,t),Nx(t,e);if(t instanceof Cu)return function(r,i){if(!Cx(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=sa(a,i.wu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Be(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=wt.fromDate(r);return{timestampValue:Th(i.serializer,s)}}if(r instanceof wt){const s=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Th(i.serializer,s)}}if(r instanceof yg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zo)return{bytesValue:KT(i.serializer,r._byteString)};if(r instanceof Qt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sg(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${$d(r)}`)}(t,e)}function Nx(t,e){const n={};return ET(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(t,(r,i)=>{const s=sa(i,e.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Rx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof wt||t instanceof yg||t instanceof zo||t instanceof Qt||t instanceof Cu)}function Eg(t,e,n){if(!Rx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=$d(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function Gp(t,e,n){if((e=Be(e))instanceof Ud)return e._internalPath;if(typeof e=="string")return Tg(t,e);throw bh("Field path arguments must be of type string or ",t,!1,void 0,n)}const CO=new RegExp("[~\\*/\\[\\]]");function Tg(t,e,n){if(e.search(CO)>=0)throw bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ud(...e.split("."))._internalPath}catch{throw bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new te(Q.INVALID_ARGUMENT,a+t+l)}function Px(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AO extends xg{data(){return super.data()}}function bg(t,e){return typeof e=="string"?Tg(t,e):e instanceof Ud?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ig{}class zd extends Ig{}function cl(t,e,...n){let r=[];e instanceof Ig&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Cg).length,a=s.filter(l=>l instanceof Sg).length;if(o>1||o>0&&a>0)throw new te(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Sg extends zd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Sg(e,n,r)}_apply(e){const n=this._parse(e);return Lx(e._query,n),new Kr(e.firestore,e.converter,$p(e._query,n))}_parse(e){const n=Au(e.firestore);return function(s,o,a,l,u,h,c){let d;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new te(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){qy(c,h);const f=[];for(const v of c)f.push(By(l,s,v));d={arrayValue:{values:f}}}else d=By(l,s,c)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||qy(c,h),d=kx(a,o,c,h==="in"||h==="not-in");return ft.create(u,h,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Cg extends Ig{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Cg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:tr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Lx(o,l),o=$p(o,l)}(e._query,n),new Kr(e.firestore,e.converter,$p(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ag extends zd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ag(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new te(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new te(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yl(s,o)}(e._query,this._field,this._direction);return new Kr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new js(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Qp(t,e="asc"){const n=e,r=bg("orderBy",t);return Ag._create(r,n)}class kg extends zd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new kg(e,n,r)}_apply(e){return new Kr(e.firestore,e.converter,wh(e._query,this._limit,this._limitType))}}function Yp(t){return vO("limit",t),kg._create("limit",t,"F")}class Ng extends zd{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Ng(e,n,r)}_apply(e){const n=NO(e,this.type,this._docOrFields,this._inclusive);return new Kr(e.firestore,e.converter,function(i,s){return new js(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function Ox(...t){return Ng._create("startAfter",t,!1)}function NO(t,e,n,r){if(n[0]=Be(n[0]),n[0]instanceof xg)return function(s,o,a,l,u){if(!l)throw new te(Q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const c of _o(s))if(c.field.isKeyField())h.push(_h(o,l.key));else{const d=l.data.field(c.field);if(kd(d))throw new te(Q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const f=c.field.canonicalString();throw new te(Q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}h.push(d)}return new Vo(h,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Au(t.firestore);return function(o,a,l,u,h,c){const d=o.explicitOrderBy;if(h.length>d.length)throw new te(Q.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const f=[];for(let v=0;v<h.length;v++){const y=h[v];if(d[v].field.isKeyField()){if(typeof y!="string")throw new te(Q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof y}`);if(!tg(o)&&y.indexOf("/")!==-1)throw new te(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${y}' contains a slash.`);const w=o.path.child(qe.fromString(y));if(!he.isDocumentKey(w))throw new te(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${w}' is not because it contains an odd number of segments.`);const p=new he(w);f.push(_h(a,p))}else{const w=kx(l,u,y);f.push(w)}}return new Vo(f,c)}(t._query,t.firestore._databaseId,i,e,n,r)}}function By(t,e,n){if(typeof(n=Be(n))=="string"){if(n==="")throw new te(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tg(e)&&n.indexOf("/")!==-1)throw new te(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(qe.fromString(n));if(!he.isDocumentKey(r))throw new te(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _h(t,new he(r))}if(n instanceof Qt)return _h(t,n._key);throw new te(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$d(n)}.`)}function qy(t,e){if(!Array.isArray(t)||t.length===0)throw new te(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Lx(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new te(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class RO{convertValue(e,n="none"){switch(xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ms(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new yg(ht(e.latitude),ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Xm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Kl(e));default:return null}}convertTimestamp(e){const n=ki(e);return new wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=qe.fromString(e);He(ZT(r));const i=new Gl(r.get(1),r.get(3)),s=new he(r.popFirst(5));return i.isEqual(n)||yr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mx extends xg{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(bg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Rc extends Mx{data(e={}){return super.data(e)}}class PO{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ka(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Rc(this._firestore,this._userDataWriter,r.key,r,new Ka(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Rc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ka(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Rc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ka(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:OO(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function OO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(t){t=Fn(t,Qt);const e=Fn(t.firestore,Ri);return mO(vg(e),t._key).then(n=>Vx(e,t,n))}class Fx extends RO{constructor(e){super(),this.firestore=e}convertBytes(e){return new zo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,n)}}function $x(t,e,n){t=Fn(t,Qt);const r=Fn(t.firestore,Ri),i=Dx(t.converter,e,n);return Hd(r,[Ax(Au(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,jn.none())])}function Jt(t,e,n,...r){t=Fn(t,Qt);const i=Fn(t.firestore,Ri),s=Au(i);let o;return o=typeof(e=Be(e))=="string"||e instanceof Ud?SO(s,"updateDoc",t._key,e,n,r):IO(s,"updateDoc",t._key,e),Hd(i,[o.toMutation(t._key,jn.exists(!0))])}function ku(t){return Hd(Fn(t.firestore,Ri),[new ng(t._key,jn.none())])}function Pi(t,e){const n=Fn(t.firestore,Ri),r=Pe(t),i=Dx(t.converter,e);return Hd(n,[Ax(Au(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,jn.exists(!1))]).then(()=>r)}function wr(t,...e){var n,r,i;t=Be(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Uy(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Uy(e[o])){const c=e[o];e[o]=(n=c.next)===null||n===void 0?void 0:n.bind(c),e[o+1]=(r=c.error)===null||r===void 0?void 0:r.bind(c),e[o+2]=(i=c.complete)===null||i===void 0?void 0:i.bind(c)}let l,u,h;if(t instanceof Qt)u=Fn(t.firestore,Ri),h=Nd(t._key.path),l={next:c=>{e[o]&&e[o](Vx(u,t,c))},error:e[o+1],complete:e[o+2]};else{const c=Fn(t,Kr);u=Fn(c.firestore,Ri),h=c._query;const d=new Fx(u);l={next:f=>{e[o]&&e[o](new PO(u,d,c,f))},error:e[o+1],complete:e[o+2]},kO(t._query)}return function(d,f,v,y){const w=new Ex(y),p=new dx(f,w,v);return d.asyncQueue.enqueueAndForget(async()=>cx(await Kp(d),p)),()=>{w.Qa(),d.asyncQueue.enqueueAndForget(async()=>hx(await Kp(d),p))}}(vg(u),h,a,l)}function Hd(t,e){return function(r,i){const s=new Lr;return r.asyncQueue.enqueueAndForget(async()=>nO(await pO(r),i,s)),s.promise}(vg(t),e)}function Vx(t,e,n){const r=n.docs.get(e._key),i=new Fx(t);return new Mx(t,i,e._key,r,new Ka(n.hasPendingWrites,n.fromCache),e.converter)}function Gn(){return new _g("serverTimestamp")}function LO(...t){return new wg("arrayUnion",t)}(function(e,n=!0){(function(i){na=i})(Fi),Ci(new Vr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ri(new j9(r.getProvider("auth-internal")),new U9(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new te(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(u.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Mn(oy,"4.5.0",e),Mn(oy,"4.5.0","esm2017")})();var DO="firebase",MO="10.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn(DO,MO,"app");function Rg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Ux(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jO=Ux,Bx=new hu("auth","Firebase",Ux());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new cd("@firebase/auth");function FO(t,...e){Ih.logLevel<=Te.WARN&&Ih.warn(`Auth (${Fi}): ${t}`,...e)}function Pc(t,...e){Ih.logLevel<=Te.ERROR&&Ih.error(`Auth (${Fi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t,...e){throw Pg(t,...e)}function gr(t,...e){return Pg(t,...e)}function qx(t,e,n){const r=Object.assign(Object.assign({},jO()),{[e]:n});return new hu("auth","Firebase",r).create(e,{appName:t.name})}function $O(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Un(t,"argument-error"),qx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Bx.create(t,...e)}function de(t,e,...n){if(!t)throw Pg(e,...n)}function Nr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pc(e),new Error(e)}function qr(t,e){t||Nr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function VO(){return zy()==="http:"||zy()==="https:"}function zy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VO()||uk()||"connection"in navigator)?navigator.onLine:!0}function BO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n){this.shortDelay=e,this.longDelay=n,qr(n>e,"Short delay should be less than long delay!"),this.isMobile=xm()||a5()}get(){return UO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(t,e){qr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=new Nu(3e4,6e4);function Bi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function qi(t,e,n,r,i={}){return Hx(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Zo(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),zx.fetch()(Wx(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function Hx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},qO),e);try{const i=new WO(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw cc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw cc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw cc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw cc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw qx(t,h,u);Un(t,h)}}catch(i){if(i instanceof Er)throw i;Un(t,"network-request-failed",{message:String(i)})}}async function Ru(t,e,n,r,i={}){const s=await qi(t,e,n,r,i);return"mfaPendingCredential"in s&&Un(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Wx(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Og(t.config,i):`${t.config.apiScheme}://${i}`}function HO(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class WO{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(gr(this.auth,"network-request-failed")),zO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=gr(t,e,r);return i.customData._tokenResponse=n,i}function Hy(t){return t!==void 0&&t.enterprise!==void 0}class KO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return HO(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function GO(t,e){return qi(t,"GET","/v2/recaptchaConfig",Bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QO(t,e){return qi(t,"POST","/v1/accounts:delete",e)}async function YO(t,e){return qi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XO(t,e=!1){const n=Be(t),r=await n.getIdToken(e),i=Lg(r);de(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:hl(i0(i.auth_time)),issuedAtTime:hl(i0(i.iat)),expirationTime:hl(i0(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function i0(t){return Number(t)*1e3}function Lg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Pc("JWT malformed, contained fewer than 3 sections"),null;try{const i=uh(n);return i?JSON.parse(i):(Pc("Failed to decode base64 JWT payload"),null)}catch(i){return Pc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function JO(t){const e=Lg(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Er&&ZO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ZO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hl(this.lastLoginAt),this.creationTime=hl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Zl(t,YO(n,{idToken:r}));de(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?r7(s.providerUserInfo):[],a=n7(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Kx(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,c)}async function t7(t){const e=Be(t);await Sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function n7(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function r7(t){return t.map(e=>{var{providerId:n}=e,r=Rg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i7(t,e){const n=await Hx(t,{},async()=>{const r=Zo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Wx(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",zx.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function s7(t,e){return qi(t,"POST","/v2/accounts:revokeToken",Bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):JO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return de(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await i7(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new eu;return r&&(de(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(de(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(de(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new eu,this.toJSON())}_performRefresh(){return Nr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ds{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Rg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new e7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Kx(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Zl(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return XO(this,e)}reload(){return t7(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ds(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Sh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Zl(this,QO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,h;const c=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,p=(u=n.createdAt)!==null&&u!==void 0?u:void 0,m=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:E,emailVerified:g,isAnonymous:T,providerData:x,stsTokenManager:b}=n;de(E&&b,e,"internal-error");const S=eu.fromJSON(this.name,b);de(typeof E=="string",e,"internal-error"),Xr(c,e.name),Xr(d,e.name),de(typeof g=="boolean",e,"internal-error"),de(typeof T=="boolean",e,"internal-error"),Xr(f,e.name),Xr(v,e.name),Xr(y,e.name),Xr(w,e.name),Xr(p,e.name),Xr(m,e.name);const k=new ds({uid:E,auth:e,email:d,emailVerified:g,displayName:c,isAnonymous:T,photoURL:v,phoneNumber:f,tenantId:y,stsTokenManager:S,createdAt:p,lastLoginAt:m});return x&&Array.isArray(x)&&(k.providerData=x.map(I=>Object.assign({},I))),w&&(k._redirectEventId=w),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new eu;i.updateFromServerResponse(n);const s=new ds({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Sh(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=new Map;function Rr(t){qr(t instanceof Function,"Expected a class definition");let e=Wy.get(t);return e?(qr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Wy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Gx.type="NONE";const Ky=Gx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t,e,n){return`firebase:${t}:${e}:${n}`}class Eo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Oc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Oc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ds._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Eo(Rr(Ky),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Rr(Ky);const o=Oc(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const c=ds._fromJSON(e,h);u!==s&&(a=c),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Eo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Eo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Qx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Zx(e))return"Blackberry";if(eb(e))return"Webos";if(Dg(e))return"Safari";if((e.includes("chrome/")||Yx(e))&&!e.includes("edge/"))return"Chrome";if(Jx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Qx(t=mt()){return/firefox\//i.test(t)}function Dg(t=mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Yx(t=mt()){return/crios\//i.test(t)}function Xx(t=mt()){return/iemobile/i.test(t)}function Jx(t=mt()){return/android/i.test(t)}function Zx(t=mt()){return/blackberry/i.test(t)}function eb(t=mt()){return/webos/i.test(t)}function Wd(t=mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function o7(t=mt()){var e;return Wd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function a7(){return ck()&&document.documentMode===10}function tb(t=mt()){return Wd(t)||Jx(t)||eb(t)||Zx(t)||/windows phone/i.test(t)||Xx(t)}function l7(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(t,e=[]){let n;switch(t){case"Browser":n=Gy(mt());break;case"Worker":n=`${Gy(mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c7(t,e={}){return qi(t,"GET","/v2/passwordPolicy",Bi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7=6;class d7{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:h7,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qy(this),this.idTokenSubscription=new Qy(this),this.beforeStateQueue=new u7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Eo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Be(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await c7(this),n=new d7(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new hu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await s7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Rr(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await Eo.create(this,[Rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&FO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function zi(t){return Be(t)}class Qy{constructor(e){this.auth=e,this.observer=null,this.addObserver=_k(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function p7(t){Kd=t}function rb(t){return Kd.loadJS(t)}function m7(){return Kd.recaptchaEnterpriseScript}function g7(){return Kd.gapiScript}function v7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const y7="recaptcha-enterprise",_7="NO_RECAPTCHA";class w7{constructor(e){this.type=y7,this.auth=zi(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{GO(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new KO(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Hy(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(_7)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Hy(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=m7();l.length!==0&&(l+=a),rb(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Yy(t,e,n,r=!1){const i=new w7(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Jp(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Yy(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Yy(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E7(t,e){const n=du(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ml(s,e??{}))return i;Un(i,"already-initialized")}return n.initialize({options:e})}function T7(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Rr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function x7(t,e,n){const r=zi(t);de(r._canInitEmulator,r,"emulator-config-failed"),de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=ib(e),{host:o,port:a}=b7(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||I7()}function ib(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function b7(t){const e=ib(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Xy(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Xy(o)}}}function Xy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function I7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Nr("not implemented")}_getIdTokenResponse(e){return Nr("not implemented")}_linkToIdToken(e,n){return Nr("not implemented")}_getReauthenticationResolver(e){return Nr("not implemented")}}async function S7(t,e){return qi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C7(t,e){return Ru(t,"POST","/v1/accounts:signInWithPassword",Bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A7(t,e){return Ru(t,"POST","/v1/accounts:signInWithEmailLink",Bi(t,e))}async function k7(t,e){return Ru(t,"POST","/v1/accounts:signInWithEmailLink",Bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends Mg{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new tu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new tu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jp(e,n,"signInWithPassword",C7);case"emailLink":return A7(e,{email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jp(e,r,"signUpPassword",S7);case"emailLink":return k7(e,{idToken:n,email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(t,e){return Ru(t,"POST","/v1/accounts:signInWithIdp",Bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N7="http://localhost";class bs extends Mg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Rg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new bs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return To(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,To(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,To(e,n)}buildRequest(){const e={requestUri:N7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R7(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function P7(t){const e=Ua(Ba(t)).link,n=e?Ua(Ba(e)).deep_link_id:null,r=Ua(Ba(t)).deep_link_id;return(r?Ua(Ba(r)).link:null)||r||n||e||t}class jg{constructor(e){var n,r,i,s,o,a;const l=Ua(Ba(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,c=R7((i=l.mode)!==null&&i!==void 0?i:null);de(u&&h&&c,"argument-error"),this.apiKey=u,this.operation=c,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=P7(e);try{return new jg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){this.providerId=oa.PROVIDER_ID}static credential(e,n){return tu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=jg.parseLink(n);return de(r,"argument-error"),tu._fromEmailAndCode(e,r.code,r.tenantId)}}oa.PROVIDER_ID="password";oa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends Fg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends Pu{constructor(){super("facebook.com")}static credential(e){return bs._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ni.credential(e.oauthAccessToken)}catch{return null}}}ni.FACEBOOK_SIGN_IN_METHOD="facebook.com";ni.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Pu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bs._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Sr.credential(n,r)}catch{return null}}}Sr.GOOGLE_SIGN_IN_METHOD="google.com";Sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends Pu{constructor(){super("github.com")}static credential(e){return bs._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ri.credential(e.oauthAccessToken)}catch{return null}}}ri.GITHUB_SIGN_IN_METHOD="github.com";ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends Pu{constructor(){super("twitter.com")}static credential(e,n){return bs._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ii.credential(n,r)}catch{return null}}}ii.TWITTER_SIGN_IN_METHOD="twitter.com";ii.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O7(t,e){return Ru(t,"POST","/v1/accounts:signUp",Bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ds._fromIdTokenResponse(e,r,i),o=Jy(r);return new Is({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Jy(r);return new Is({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Jy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends Er{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ch.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ch(e,n,r,i)}}function sb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ch._fromErrorAndOperation(t,s,e,r):s})}async function L7(t,e,n=!1){const r=await Zl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Is._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D7(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Zl(t,sb(r,i,e,t),n);de(s.idToken,r,"internal-error");const o=Lg(s.idToken);de(o,r,"internal-error");const{sub:a}=o;return de(t.uid===a,r,"user-mismatch"),Is._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Un(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ob(t,e,n=!1){const r="signIn",i=await sb(t,r,e),s=await Is._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function M7(t,e){return ob(zi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ab(t){const e=zi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function j7(t,e,n){const r=zi(t),o=await Jp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",O7).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&ab(t),l}),a=await Is._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function F7(t,e,n){return M7(Be(t),oa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ab(t),r})}function $7(t,e,n,r){return Be(t).onIdTokenChanged(e,n,r)}function V7(t,e,n){return Be(t).beforeAuthStateChanged(e,n)}function U7(t,e,n,r){return Be(t).onAuthStateChanged(e,n,r)}function B7(t){return Be(t).signOut()}const Ah="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ah,"1"),this.storage.removeItem(Ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q7(){const t=mt();return Dg(t)||Wd(t)}const z7=1e3,H7=10;class ub extends lb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=q7()&&l7(),this.fallbackToPolling=tb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);a7()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,H7):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},z7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ub.type="LOCAL";const W7=ub;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb extends lb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cb.type="SESSION";const hb=cb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Gd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await K7(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=$g("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(c){const d=c;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(){return window}function Q7(t){vr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(){return typeof vr().WorkerGlobalScope<"u"&&typeof vr().importScripts=="function"}async function Y7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function X7(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function J7(){return db()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="firebaseLocalStorageDb",Z7=1,kh="firebaseLocalStorage",pb="fbase_key";class Ou{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qd(t,e){return t.transaction([kh],e?"readwrite":"readonly").objectStore(kh)}function e8(){const t=indexedDB.deleteDatabase(fb);return new Ou(t).toPromise()}function Zp(){const t=indexedDB.open(fb,Z7);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(kh,{keyPath:pb})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(kh)?e(r):(r.close(),await e8(),e(await Zp()))})})}async function Zy(t,e,n){const r=Qd(t,!0).put({[pb]:e,value:n});return new Ou(r).toPromise()}async function t8(t,e){const n=Qd(t,!1).get(e),r=await new Ou(n).toPromise();return r===void 0?null:r.value}function e_(t,e){const n=Qd(t,!0).delete(e);return new Ou(n).toPromise()}const n8=800,r8=3;class mb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>r8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return db()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gd._getInstance(J7()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Y7(),!this.activeServiceWorker)return;this.sender=new G7(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||X7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zp();return await Zy(e,Ah,"1"),await e_(e,Ah),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Zy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>t8(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>e_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Qd(i,!1).getAll();return new Ou(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),n8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mb.type="LOCAL";const i8=mb;new Nu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(t,e){return e?Rr(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg extends Mg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return To(e,this._buildIdpRequest())}_linkToIdToken(e,n){return To(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return To(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function s8(t){return ob(t.auth,new Vg(t),t.bypassAuthState)}function o8(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),D7(n,new Vg(t),t.bypassAuthState)}async function a8(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),L7(n,new Vg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return s8;case"linkViaPopup":case"linkViaRedirect":return a8;case"reauthViaPopup":case"reauthViaRedirect":return o8;default:Un(this.auth,"internal-error")}}resolve(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8=new Nu(2e3,1e4);async function u8(t,e,n){const r=zi(t);$O(t,e,Fg);const i=gb(r,n);return new as(r,"signInViaPopup",e,i).executeNotNull()}class as extends vb{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,as.currentPopupAction&&as.currentPopupAction.cancel(),as.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){qr(this.filter.length===1,"Popup operations only handle one event");const e=$g();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,as.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,l8.get())};e()}}as.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8="pendingRedirect",Lc=new Map;class h8 extends vb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Lc.get(this.auth._key());if(!e){try{const r=await d8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Lc.set(this.auth._key(),e)}return this.bypassAuthState||Lc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function d8(t,e){const n=m8(e),r=p8(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function f8(t,e){Lc.set(t._key(),e)}function p8(t){return Rr(t._redirectPersistence)}function m8(t){return Oc(c8,t.config.apiKey,t.name)}async function g8(t,e,n=!1){const r=zi(t),i=gb(r,e),o=await new h8(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v8=10*60*1e3;class y8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_8(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!yb(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(gr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=v8&&this.cachedEventUids.clear(),this.cachedEventUids.has(t_(e))}saveEventToCache(e){this.cachedEventUids.add(t_(e)),this.lastProcessedEventTime=Date.now()}}function t_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _8(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w8(t,e={}){return qi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T8=/^https?/;async function x8(t){if(t.config.emulator)return;const{authorizedDomains:e}=await w8(t);for(const n of e)try{if(b8(n))return}catch{}Un(t,"unauthorized-domain")}function b8(t){const e=Xp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!T8.test(n))return!1;if(E8.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8=new Nu(3e4,6e4);function n_(){const t=vr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function S8(t){return new Promise((e,n)=>{var r,i,s;function o(){n_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{n_(),n(gr(t,"network-request-failed"))},timeout:I8.get()})}if(!((i=(r=vr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=vr().gapi)===null||s===void 0)&&s.load)o();else{const a=v7("iframefcb");return vr()[a]=()=>{gapi.load?o():n(gr(t,"network-request-failed"))},rb(`${g7()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Dc=null,e})}let Dc=null;function C8(t){return Dc=Dc||S8(t),Dc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8=new Nu(5e3,15e3),k8="__/auth/iframe",N8="emulator/auth/iframe",R8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},P8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function O8(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Og(e,N8):`https://${t.config.authDomain}/${k8}`,r={apiKey:e.apiKey,appName:t.name,v:Fi},i=P8.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Zo(r).slice(1)}`}async function L8(t){const e=await C8(t),n=vr().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:O8(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:R8,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=gr(t,"network-request-failed"),a=vr().setTimeout(()=>{s(o)},A8.get());function l(){vr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},M8=500,j8=600,F8="_blank",$8="http://localhost";class r_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function V8(t,e,n,r=M8,i=j8){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},D8),{width:r.toString(),height:i.toString(),top:s,left:o}),u=mt().toLowerCase();n&&(a=Yx(u)?F8:n),Qx(u)&&(e=e||$8,l.scrollbars="yes");const h=Object.entries(l).reduce((d,[f,v])=>`${d}${f}=${v},`,"");if(o7(u)&&a!=="_self")return U8(e||"",a),new r_(null);const c=window.open(e||"",a,h);de(c,t,"popup-blocked");try{c.focus()}catch{}return new r_(c)}function U8(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B8="__/auth/handler",q8="emulator/auth/handler",z8=encodeURIComponent("fac");async function i_(t,e,n,r,i,s){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Fi,eventId:i};if(e instanceof Fg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",gp(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,c]of Object.entries(s||{}))o[h]=c}if(e instanceof Pu){const h=e.getScopes().filter(c=>c!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${z8}=${encodeURIComponent(l)}`:"";return`${H8(t)}?${Zo(a).slice(1)}${u}`}function H8({config:t}){return t.emulator?Og(t,q8):`https://${t.authDomain}/${B8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="webStorageSupport";class W8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hb,this._completeRedirectFn=g8,this._overrideRedirectResult=f8}async _openPopup(e,n,r,i){var s;qr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await i_(e,n,r,Xp(),i);return V8(e,o,$g())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await i_(e,n,r,Xp(),i);return Q7(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(qr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await L8(e),r=new y8(e);return n.register("authEvent",i=>(de(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(s0,{type:s0},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[s0];o!==void 0&&n(!!o),Un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=x8(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tb()||Dg()||Wd()}}const K8=W8;var s_="@firebase/auth",o_="1.6.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Y8(t){Ci(new Vr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;de(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nb(t)},u=new f7(r,i,s,l);return T7(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ci(new Vr("auth-internal",e=>{const n=zi(e.getProvider("auth").getImmediate());return(r=>new G8(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mn(s_,o_,Q8(t)),Mn(s_,o_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8=5*60,J8=o5("authIdTokenMaxAge")||X8;let a_=null;const Z8=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>J8)return;const i=n==null?void 0:n.token;a_!==i&&(a_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function eL(t=hd()){const e=du(t,"auth");if(e.isInitialized())return e.getImmediate();const n=E7(t,{popupRedirectResolver:K8,persistence:[i8,W7,hb]}),r=o5("authTokenSyncURL");if(r&&r.match(/^\/[^\/].*/)){const s=Z8(r);V7(n,s,()=>s(n.currentUser)),$7(n,o=>s(o))}const i=i5("auth");return i&&x7(n,`http://${i}`),n}function tL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}p7({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=gr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",tL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Y8("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b="firebasestorage.googleapis.com",wb="storageBucket",nL=2*60*1e3,rL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at extends Er{constructor(e,n,r=0){super(o0(e),`Firebase Storage: ${n} (${o0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,at.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return o0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ot;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ot||(ot={}));function o0(t){return"storage/"+t}function Ug(){const t="An unknown error occurred, please check the error payload for server response.";return new at(ot.UNKNOWN,t)}function iL(t){return new at(ot.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function sL(t){return new at(ot.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function oL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new at(ot.UNAUTHENTICATED,t)}function aL(){return new at(ot.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function lL(t){return new at(ot.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function uL(){return new at(ot.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function cL(){return new at(ot.CANCELED,"User canceled the upload/download.")}function hL(t){return new at(ot.INVALID_URL,"Invalid URL '"+t+"'.")}function dL(t){return new at(ot.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function fL(){return new at(ot.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wb+"' property when initializing the app?")}function pL(){return new at(ot.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function mL(){return new at(ot.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function gL(t){return new at(ot.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function e2(t){return new at(ot.INVALID_ARGUMENT,t)}function Eb(){return new at(ot.APP_DELETED,"The Firebase app was deleted.")}function vL(t){return new at(ot.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function dl(t,e){return new at(ot.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Aa(t){throw new at(ot.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=_n.makeFromUrl(e,n)}catch{return new _n(e,"")}if(r.path==="")return r;throw dL(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(g){g.path.charAt(g.path.length-1)==="/"&&(g.path_=g.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(g){g.path_=decodeURIComponent(g.path)}const h="v[A-Za-z0-9_]+",c=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${c}/${h}/b/${i}/o${d}`,"i"),v={bucket:1,path:3},y=n===_b?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",p=new RegExp(`^https?://${y}/${i}/${w}`,"i"),E=[{regex:a,indices:l,postModify:s},{regex:f,indices:v,postModify:u},{regex:p,indices:{bucket:1,path:2},postModify:u}];for(let g=0;g<E.length;g++){const T=E[g],x=T.regex.exec(e);if(x){const b=x[T.indices.bucket];let S=x[T.indices.path];S||(S=""),r=new _n(b,S),T.postModify(r);break}}if(r==null)throw hL(e);return r}}class yL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...w){u||(u=!0,e.apply(null,w))}function c(w){i=setTimeout(()=>{i=null,t(f,l())},w)}function d(){s&&clearTimeout(s)}function f(w,...p){if(u){d();return}if(w){d(),h.call(null,w,...p);return}if(l()||o){d(),h.call(null,w,...p);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,c(E)}let v=!1;function y(w){v||(v=!0,d(),!u&&(i!==null?(w||(a=2),clearTimeout(i),c(0)):w||(a=1)))}return c(0),s=setTimeout(()=>{o=!0,y(!0)},n),y}function wL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(t){return t!==void 0}function TL(t){return typeof t=="object"&&!Array.isArray(t)}function Bg(t){return typeof t=="string"||t instanceof String}function l_(t){return qg()&&t instanceof Blob}function qg(){return typeof Blob<"u"}function u_(t,e,n,r){if(r<e)throw e2(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw e2(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Tb(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(fs||(fs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,n,r,i,s,o,a,l,u,h,c,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=c,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,v)=>{this.resolve_=f,this.reject_=v,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new hc(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===fs.NO_ERROR,l=s.getStatus();if(!a||xL(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===fs.ABORT;r(!1,new hc(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new hc(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());EL(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Ug();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?Eb():cL();o(l)}else{const l=uL();o(l)}};this.canceled_?n(!1,new hc(!1,null,!0)):this.backoffId_=_L(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&wL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function IL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function SL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function CL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function AL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function kL(t,e,n,r,i,s,o=!0){const a=Tb(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return CL(u,e),IL(u,n),SL(u,s),AL(u,r),new bL(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function RL(...t){const e=NL();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(qg())return new Blob(t);throw new at(ot.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function PL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(t){if(typeof atob>"u")throw gL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class a0{constructor(e,n){this.data=e,this.contentType=n||null}}function LL(t,e){switch(t){case cr.RAW:return new a0(xb(e));case cr.BASE64:case cr.BASE64URL:return new a0(bb(t,e));case cr.DATA_URL:return new a0(ML(e),jL(e))}throw Ug()}function xb(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function DL(t){let e;try{e=decodeURIComponent(t)}catch{throw dl(cr.DATA_URL,"Malformed data URL.")}return xb(e)}function bb(t,e){switch(t){case cr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw dl(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case cr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw dl(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=OL(e)}catch(i){throw i.message.includes("polyfill")?i:dl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Ib{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw dl(cr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=FL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function ML(t){const e=new Ib(t);return e.base64?bb(cr.BASE64,e.rest):DL(e.rest)}function jL(t){return new Ib(t).contentType}function FL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,n){let r=0,i="";l_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(l_(this.data_)){const r=this.data_,i=PL(r,e,n);return i===null?null:new si(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new si(r,!0)}}static getBlob(...e){if(qg()){const n=e.map(r=>r instanceof si?r.data_:r);return new si(RL.apply(null,n))}else{const n=e.map(o=>Bg(o)?LL(cr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new si(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(t){let e;try{e=JSON.parse(t)}catch{return null}return TL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function VL(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Cb(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UL(t,e){return e}class Zt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||UL}}let dc=null;function BL(t){return!Bg(t)||t.length<2?t:Cb(t)}function Ab(){if(dc)return dc;const t=[];t.push(new Zt("bucket")),t.push(new Zt("generation")),t.push(new Zt("metageneration")),t.push(new Zt("name","fullPath",!0));function e(s,o){return BL(o)}const n=new Zt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Zt("size");return i.xform=r,t.push(i),t.push(new Zt("timeCreated")),t.push(new Zt("updated")),t.push(new Zt("md5Hash",null,!0)),t.push(new Zt("cacheControl",null,!0)),t.push(new Zt("contentDisposition",null,!0)),t.push(new Zt("contentEncoding",null,!0)),t.push(new Zt("contentLanguage",null,!0)),t.push(new Zt("contentType",null,!0)),t.push(new Zt("metadata","customMetadata",!0)),dc=t,dc}function qL(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new _n(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function zL(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return qL(r,t),r}function kb(t,e,n){const r=Sb(e);return r===null?null:zL(t,r,n)}function HL(t,e,n,r){const i=Sb(e);if(i===null||!Bg(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const h=t.bucket,c=t.fullPath,d="/b/"+o(h)+"/o/"+o(c),f=Yd(d,n,r),v=Tb({alt:"media",token:u});return f+v})[0]}function WL(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class zg{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(t){if(!t)throw Ug()}function KL(t,e){function n(r,i){const s=kb(t,i,e);return Nb(s!==null),s}return n}function GL(t,e){function n(r,i){const s=kb(t,i,e);return Nb(s!==null),HL(s,i,t.host,t._protocol)}return n}function Rb(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=aL():i=oL():n.getStatus()===402?i=sL(t.bucket):n.getStatus()===403?i=lL(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Pb(t){const e=Rb(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=iL(t.path)),s.serverResponse=i.serverResponse,s}return n}function QL(t,e,n){const r=e.fullServerUrl(),i=Yd(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new zg(i,s,GL(t,n),o);return a.errorHandler=Pb(e),a}function YL(t,e){const n=e.fullServerUrl(),r=Yd(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,u){}const a=new zg(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Pb(e),a}function XL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function JL(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=XL(null,e)),r}function ZL(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let g=0;g<2;g++)E=E+Math.random().toString().slice(2);return E}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=JL(e,r,i),h=WL(u,n),c="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,d=`\r
--`+l+"--",f=si.getBlob(c,r,d);if(f===null)throw pL();const v={name:u.fullPath},y=Yd(s,t.host,t._protocol),w="POST",p=t.maxUploadRetryTime,m=new zg(y,w,KL(t,n),p);return m.urlParams=v,m.headers=o,m.body=f.uploadData(),m.errorHandler=Rb(e),m}class eD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Aa("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Aa("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Aa("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Aa("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Aa("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class tD extends eD{initXhr(){this.xhr_.responseType="text"}}function Hg(){return new tD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n){this._service=e,n instanceof _n?this._location=n:this._location=_n.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ss(e,n)}get root(){const e=new _n(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Cb(this._location.path)}get storage(){return this._service}get parent(){const e=$L(this._location.path);if(e===null)return null;const n=new _n(this._location.bucket,e);return new Ss(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw vL(e)}}function nD(t,e,n){t._throwIfRoot("uploadBytes");const r=ZL(t.storage,t._location,Ab(),new si(e,!0),n);return t.storage.makeRequestWithTokens(r,Hg).then(i=>({metadata:i,ref:t}))}function rD(t){t._throwIfRoot("getDownloadURL");const e=QL(t.storage,t._location,Ab());return t.storage.makeRequestWithTokens(e,Hg).then(n=>{if(n===null)throw mL();return n})}function iD(t){t._throwIfRoot("deleteObject");const e=YL(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Hg)}function sD(t,e){const n=VL(t._location.path,e),r=new _n(t._location.bucket,n);return new Ss(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t){return/^[A-Za-z]+:\/\//.test(t)}function aD(t,e){return new Ss(t,e)}function Ob(t,e){if(t instanceof Wg){const n=t;if(n._bucket==null)throw fL();const r=new Ss(n,n._bucket);return e!=null?Ob(r,e):r}else return e!==void 0?sD(t,e):t}function lD(t,e){if(e&&oD(e)){if(t instanceof Wg)return aD(t,e);throw e2("To use ref(service, url), the first argument must be a Storage instance.")}else return Ob(t,e)}function c_(t,e){const n=e==null?void 0:e[wb];return n==null?null:_n.makeFromBucketSpec(n,t)}function uD(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Tm(i,t.app.options.projectId))}class Wg{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=_b,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nL,this._maxUploadRetryTime=rL,this._requests=new Set,i!=null?this._bucket=_n.makeFromBucketSpec(i,this._host):this._bucket=c_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_n.makeFromBucketSpec(this._url,e):this._bucket=c_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){u_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){u_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ss(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new yL(Eb());{const o=kL(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const h_="@firebase/storage",d_="0.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="storage";function t2(t,e,n){return t=Be(t),nD(t,e,n)}function n2(t){return t=Be(t),rD(t)}function f_(t){return t=Be(t),iD(t)}function Ga(t,e){return t=Be(t),lD(t,e)}function cD(t=hd(),e){t=Be(t);const r=du(t,Lb).getImmediate({identifier:e}),i=wm("storage");return i&&hD(r,...i),r}function hD(t,e,n,r={}){uD(t,e,n,r)}function dD(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Wg(n,r,i,e,Fi)}function fD(){Ci(new Vr(Lb,dD,"PUBLIC").setMultipleInstances(!0)),Mn(h_,d_,""),Mn(h_,d_,"esm2017")}fD();var p_={};const m_="@firebase/database",g_="1.0.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Db="";function pD(t){Db=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Rt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Dl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Wr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new mD(e)}}catch{}return new gD},ls=Mb("localStorage"),r2=Mb("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=new cd("@firebase/database"),vD=function(){let t=1;return function(){return t++}}(),jb=function(t){const e=xk(t),n=new yk;n.update(e);const r=n.digest();return _m.encodeByteArray(r)},Lu=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Lu.apply(null,r):typeof r=="object"?e+=Rt(r):e+=r,e+=" "}return e};let ps=null,v_=!0;const yD=function(t,e){re(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(xo.logLevel=Te.VERBOSE,ps=xo.log.bind(xo),e&&r2.set("logging_enabled",!0)):typeof t=="function"?ps=t:(ps=null,r2.remove("logging_enabled"))},zt=function(...t){if(v_===!0&&(v_=!1,ps===null&&r2.get("logging_enabled")===!0&&yD(!0)),ps){const e=Lu.apply(null,t);ps(e)}},Du=function(t){return function(...e){zt(t,...e)}},i2=function(...t){const e="FIREBASE INTERNAL ERROR: "+Lu(...t);xo.error(e)},zr=function(...t){const e=`FIREBASE FATAL ERROR: ${Lu(...t)}`;throw xo.error(e),new Error(e)},Tn=function(...t){const e="FIREBASE WARNING: "+Lu(...t);xo.warn(e)},_D=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Tn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Fb=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},wD=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ho="[MIN_NAME]",Cs="[MAX_NAME]",aa=function(t,e){if(t===e)return 0;if(t===Ho||e===Cs)return-1;if(e===Ho||t===Cs)return 1;{const n=y_(t),r=y_(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},ED=function(t,e){return t===e?0:t<e?-1:1},ka=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Rt(e))},Kg=function(t){if(typeof t!="object"||t===null)return Rt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Rt(e[r]),n+=":",n+=Kg(t[e[r]]);return n+="}",n},$b=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Bn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Vb=function(t){re(!Fb(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const h=u.join("");let c="";for(l=0;l<64;l+=8){let d=parseInt(h.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),c=c+d}return c.toLowerCase()},TD=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},xD=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},bD=new RegExp("^-?(0*)\\d{1,10}$"),ID=-2147483648,SD=2147483647,y_=function(t){if(bD.test(t)){const e=Number(t);if(e>=ID&&e<=SD)return e}return null},Mu=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Tn("Exception was thrown by user callback.",n),e},Math.floor(0))}},CD=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},fl=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Tn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(zt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Tn(e)}}class bo{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}bo.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="5",Ub="v",Bb="s",qb="r",zb="f",Hb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Wb="ls",Kb="p",s2="ac",Gb="websocket",Qb="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ls.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ls.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function ND(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Xb(t,e,n){re(typeof e=="string","typeof type must == string"),re(typeof n=="object","typeof params must == object");let r;if(e===Gb)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Qb)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);ND(t)&&(n.ns=t.namespace);const i=[];return Bn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(){this.counters_={}}incrementCounter(e,n=1){Wr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return nk(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0={},u0={};function Qg(t){const e=t.toString();return l0[e]||(l0[e]=new RD),l0[e]}function PD(t,e){const n=t.toString();return u0[n]||(u0[n]=e()),u0[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Mu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="start",LD="close",DD="pLPCommand",MD="pRTLPCB",Jb="id",Zb="pw",e4="ser",jD="cb",FD="seg",$D="ts",VD="d",UD="dframe",t4=1870,n4=30,BD=t4-n4,qD=25e3,zD=3e4;class ao{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Du(e),this.stats_=Qg(n),this.urlFn=l=>(this.appCheckToken&&(l[s2]=this.appCheckToken),Xb(n,Qb,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new OD(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(zD)),wD(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Yg((...s)=>{const[o,a,l,u,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===__)this.id=a,this.password=l;else if(o===LD)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[__]="t",r[e4]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[jD]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Ub]=Gg,this.transportSessionId&&(r[Bb]=this.transportSessionId),this.lastSessionId&&(r[Wb]=this.lastSessionId),this.applicationId&&(r[Kb]=this.applicationId),this.appCheckToken&&(r[s2]=this.appCheckToken),typeof location<"u"&&location.hostname&&Hb.test(location.hostname)&&(r[qb]=zb);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ao.forceAllow_=!0}static forceDisallow(){ao.forceDisallow_=!0}static isAvailable(){return ao.forceAllow_?!0:!ao.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!TD()&&!xD()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Rt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=n5(n),i=$b(r,BD);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[UD]="t",r[Jb]=e,r[Zb]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Rt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Yg{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=vD(),window[DD+this.uniqueCallbackIdentifier]=e,window[MD+this.uniqueCallbackIdentifier]=n,this.myIFrame=Yg.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){zt("frame writing exception"),a.stack&&zt(a.stack),zt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||zt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Jb]=this.myID,e[Zb]=this.myPW,e[e4]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+n4+r.length<=t4;){const o=this.pendingSegs.shift();r=r+"&"+FD+i+"="+o.seg+"&"+$D+i+"="+o.ts+"&"+VD+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(qD)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{zt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=16384,WD=45e3;let Nh=null;typeof MozWebSocket<"u"?Nh=MozWebSocket:typeof WebSocket<"u"&&(Nh=WebSocket);class Kn{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Du(this.connId),this.stats_=Qg(n),this.connURL=Kn.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[Ub]=Gg,typeof location<"u"&&location.hostname&&Hb.test(location.hostname)&&(o[qb]=zb),n&&(o[Bb]=n),r&&(o[Wb]=r),i&&(o[s2]=i),s&&(o[Kb]=s),Xb(e,Gb,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ls.set("previous_websocket_failure",!0);try{let r;l5(),this.mySock=new Nh(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Kn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Nh!==null&&!Kn.forceDisallow_}static previouslyFailed(){return ls.isInMemoryStorage||ls.get("previous_websocket_failure")===!0}markConnectionHealthy(){ls.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Dl(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(re(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Rt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=$b(n,HD);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(WD))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Kn.responsesRequiredToBeHealthy=2;Kn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ao,Kn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Kn&&Kn.isAvailable();let r=n&&!Kn.previouslyFailed();if(e.webSocketOnly&&(n||Tn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Kn];else{const i=this.transports_=[];for(const s of nu.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);nu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}nu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=6e4,GD=5e3,QD=10*1024,YD=100*1024,c0="t",w_="d",XD="s",E_="r",JD="e",T_="o",x_="a",b_="n",I_="p",ZD="h";class eM{constructor(e,n,r,i,s,o,a,l,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Du("c:"+this.id+":"),this.transportManager_=new nu(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=fl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>YD?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>QD?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(c0 in e){const n=e[c0];n===x_?this.upgradeIfSecondaryHealthy_():n===E_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===T_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ka("t",e),r=ka("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:I_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:x_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:b_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ka("t",e),r=ka("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ka(c0,e);if(w_ in e){const r=e[w_];if(n===ZD){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===b_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===XD?this.onConnectionShutdown_(r):n===E_?this.onReset_(r):n===JD?i2("Server Error: "+r):n===T_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):i2("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Gg!==r&&Tn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),fl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(KD))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(GD))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:I_,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ls.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e){this.allowedEvents_=e,this.listeners_={},re(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){re(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh extends i4{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!xm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Rh}getInitialEvent(e){return re(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=32,C_=768;class Je{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ve(){return new Je("")}function Ae(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Oi(t){return t.pieces_.length-t.pieceNum_}function Qe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Je(t.pieces_,e)}function s4(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function tM(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function o4(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function a4(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Je(e,0)}function It(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Je)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Je(n,0)}function Se(t){return t.pieceNum_>=t.pieces_.length}function Ln(t,e){const n=Ae(t),r=Ae(e);if(n===null)return e;if(n===r)return Ln(Qe(t),Qe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function l4(t,e){if(Oi(t)!==Oi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Qn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Oi(t)>Oi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class nM{constructor(e,n){this.errorPrefix_=n,this.parts_=o4(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ud(this.parts_[r]);u4(this)}}function rM(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ud(e),u4(t)}function iM(t){const e=t.parts_.pop();t.byteLength_-=ud(e),t.parts_.length>0&&(t.byteLength_-=1)}function u4(t){if(t.byteLength_>C_)throw new Error(t.errorPrefix_+"has a key path longer than "+C_+" bytes ("+t.byteLength_+").");if(t.parts_.length>S_)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+S_+") or object contains a cycle "+Xi(t))}function Xi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg extends i4{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Xg}getInitialEvent(e){return re(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=1e3,sM=60*5*1e3,A_=30*1e3,oM=1.3,aM=3e4,lM="server_kill",k_=3;class Dr extends r4{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Dr.nextPersistentConnectionId_++,this.log_=Du("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Na,this.maxReconnectDelay_=sM,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!l5())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Xg.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Rh.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Rt(s)),re(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Em,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),re(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),re(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,u=a.s;Dr.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Wr(e,"w")){const r=Lo(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Tn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||vk(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=A_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=gk(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),re(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Rt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):i2("Unrecognized action received from server: "+Rt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){re(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Na,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Na,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>aM&&(this.reconnectDelay_=Na),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*oM)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Dr.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(c){re(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(c)};this.realtime_={close:l,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[c,d]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?zt("getToken() completed but was canceled"):(zt("getToken() completed. Creating connection."),this.authToken_=c&&c.accessToken,this.appCheckToken_=d&&d.token,a=new eM(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{Tn(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(lM)},s))}catch(c){this.log_("Failed to get token: "+c),o||(this.repoInfo_.nodeAdmin&&Tn(c),l())}}}interrupt(e){zt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){zt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],gp(this.interruptReasons_)&&(this.reconnectDelay_=Na,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Kg(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new Je(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){zt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=k_&&(this.reconnectDelay_=A_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){zt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=k_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Db.replace(/\./g,"-")]=1,xm()?e["framework.cordova"]=1:a5()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Rh.getInstance().currentlyOnline();return gp(this.interruptReasons_)&&e}}Dr.nextPersistentConnectionId_=0;Dr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ke(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ke(Ho,e),i=new ke(Ho,n);return this.compare(r,i)!==0}minPost(){return ke.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc;class c4 extends Xd{static get __EMPTY_NODE(){return fc}static set __EMPTY_NODE(e){fc=e}compare(e,n){return aa(e.name,n.name)}isDefinedOn(e){throw Jo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ke.MIN}maxPost(){return new ke(Cs,fc)}makePost(e,n){return re(typeof e=="string","KeyIndex indexValue must always be a string."),new ke(e,fc)}toString(){return".key"}}const Io=new c4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class bt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??bt.RED,this.left=i??hn.EMPTY_NODE,this.right=s??hn.EMPTY_NODE}copy(e,n,r,i,s){return new bt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return hn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return hn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}bt.RED=!0;bt.BLACK=!1;class uM{copy(e,n,r,i,s){return this}insert(e,n,r){return new bt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class hn{constructor(e,n=hn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new hn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,bt.BLACK,null,null))}remove(e){return new hn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,bt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new pc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new pc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new pc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new pc(this.root_,null,this.comparator_,!0,e)}}hn.EMPTY_NODE=new uM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(t,e){return aa(t.name,e.name)}function Jg(t,e){return aa(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o2;function hM(t){o2=t}const h4=function(t){return typeof t=="number"?"number:"+Vb(t):"string:"+t},d4=function(t){if(t.isLeafNode()){const e=t.val();re(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Wr(e,".sv"),"Priority must be a string or number.")}else re(t===o2||t.isEmpty(),"priority of unexpected type.");re(t===o2||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N_;class Et{constructor(e,n=Et.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,re(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),d4(this.priorityNode_)}static set __childrenNodeConstructor(e){N_=e}static get __childrenNodeConstructor(){return N_}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Et(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Et.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Se(e)?this:Ae(e)===".priority"?this.priorityNode_:Et.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Et.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ae(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(re(r!==".priority"||Oi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Et.__childrenNodeConstructor.EMPTY_NODE.updateChild(Qe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+h4(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Vb(this.value_):e+=this.value_,this.lazyHash_=jb(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Et.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Et.__childrenNodeConstructor?-1:(re(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Et.VALUE_TYPE_ORDER.indexOf(n),s=Et.VALUE_TYPE_ORDER.indexOf(r);return re(i>=0,"Unknown leaf type: "+n),re(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Et.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f4,p4;function dM(t){f4=t}function fM(t){p4=t}class pM extends Xd{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?aa(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ke.MIN}maxPost(){return new ke(Cs,new Et("[PRIORITY-POST]",p4))}makePost(e,n){const r=f4(e);return new ke(n,new Et("[PRIORITY-POST]",r))}toString(){return".priority"}}const Wt=new pM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=Math.log(2);class gM{constructor(e){const n=s=>parseInt(Math.log(s)/mM,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ph=function(t,e,n,r){t.sort(e);const i=function(l,u){const h=u-l;let c,d;if(h===0)return null;if(h===1)return c=t[l],d=n?n(c):c,new bt(d,c.node,bt.BLACK,null,null);{const f=parseInt(h/2,10)+l,v=i(l,f),y=i(f+1,u);return c=t[f],d=n?n(c):c,new bt(d,c.node,bt.BLACK,v,y)}},s=function(l){let u=null,h=null,c=t.length;const d=function(v,y){const w=c-v,p=c;c-=v;const m=i(w+1,p),E=t[w],g=n?n(E):E;f(new bt(g,E.node,y,null,m))},f=function(v){u?(u.left=v,u=v):(h=v,u=v)};for(let v=0;v<l.count;++v){const y=l.nextBitIsOne(),w=Math.pow(2,l.count-(v+1));y?d(w,bt.BLACK):(d(w,bt.BLACK),d(w,bt.RED))}return h},o=new gM(t.length),a=s(o);return new hn(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h0;const zs={};class Pr{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return re(zs&&Wt,"ChildrenNode.ts has not been loaded"),h0=h0||new Pr({".priority":zs},{".priority":Wt}),h0}get(e){const n=Lo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof hn?n:null}hasIndex(e){return Wr(this.indexSet_,e.toString())}addIndex(e,n){re(e!==Io,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(ke.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Ph(r,e.getCompare()):a=zs;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new Pr(h,u)}addToIndexes(e,n){const r=ch(this.indexes_,(i,s)=>{const o=Lo(this.indexSet_,s);if(re(o,"Missing index implementation for "+s),i===zs)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(ke.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),Ph(a,o.getCompare())}else return zs;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new ke(e.name,a))),l.insert(e,e.node)}});return new Pr(r,this.indexSet_)}removeFromIndexes(e,n){const r=ch(this.indexes_,i=>{if(i===zs)return i;{const s=n.get(e.name);return s?i.remove(new ke(e.name,s)):i}});return new Pr(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ra;class Me{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&d4(this.priorityNode_),this.children_.isEmpty()&&re(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ra||(Ra=new Me(new hn(Jg),null,Pr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ra}updatePriority(e){return this.children_.isEmpty()?this:new Me(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ra:n}}getChild(e){const n=Ae(e);return n===null?this:this.getImmediateChild(n).getChild(Qe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(re(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ke(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Ra:this.priorityNode_;return new Me(i,o,s)}}updateChild(e,n){const r=Ae(e);if(r===null)return n;{re(Ae(e)!==".priority"||Oi(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Qe(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Wt,(o,a)=>{n[o]=a.val(e),r++,s&&Me.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+h4(this.getPriority().val())+":"),this.forEachChild(Wt,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":jb(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new ke(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ke(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ke(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,ke.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,ke.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ju?-1:0}withIndex(e){if(e===Io||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Me(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Io||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Wt),i=n.getIterator(Wt);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Io?null:this.indexMap_.get(e.toString())}}Me.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class vM extends Me{constructor(){super(new hn(Jg),Me.EMPTY_NODE,Pr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Me.EMPTY_NODE}isEmpty(){return!1}}const ju=new vM;Object.defineProperties(ke,{MIN:{value:new ke(Ho,Me.EMPTY_NODE)},MAX:{value:new ke(Cs,ju)}});c4.__EMPTY_NODE=Me.EMPTY_NODE;Et.__childrenNodeConstructor=Me;hM(ju);fM(ju);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=!0;function Ht(t,e=null){if(t===null)return Me.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),re(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Et(n,Ht(e))}if(!(t instanceof Array)&&yM){const n=[];let r=!1;if(Bn(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Ht(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new ke(o,l)))}}),n.length===0)return Me.EMPTY_NODE;const s=Ph(n,cM,o=>o.name,Jg);if(r){const o=Ph(n,Wt.getCompare());return new Me(s,Ht(e),new Pr({".priority":o},{".priority":Wt}))}else return new Me(s,Ht(e),Pr.Default)}else{let n=Me.EMPTY_NODE;return Bn(t,(r,i)=>{if(Wr(t,r)&&r.substring(0,1)!=="."){const s=Ht(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ht(e))}}dM(Ht);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M extends Xd{constructor(e){super(),this.indexPath_=e,re(!Se(e)&&Ae(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?aa(e.name,n.name):s}makePost(e,n){const r=Ht(e),i=Me.EMPTY_NODE.updateChild(this.indexPath_,r);return new ke(n,i)}maxPost(){const e=Me.EMPTY_NODE.updateChild(this.indexPath_,ju);return new ke(Cs,e)}toString(){return o4(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM extends Xd{compare(e,n){const r=e.node.compareTo(n.node);return r===0?aa(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ke.MIN}maxPost(){return ke.MAX}makePost(e,n){const r=Ht(e);return new ke(n,r)}toString(){return".value"}}const EM=new wM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(t){return{type:"value",snapshotNode:t}}function xM(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function bM(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function R_(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function IM(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Wt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return re(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return re(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ho}hasEnd(){return this.endSet_}getIndexEndValue(){return re(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return re(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Cs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return re(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Wt}copy(){const e=new Zg;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function P_(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Wt?n="$priority":t.index_===EM?n="$value":t.index_===Io?n="$key":(re(t.index_ instanceof _M,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Rt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Rt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Rt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Rt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Rt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function O_(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Wt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh extends r4{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Du("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(re(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Oh.getListenId_(e,r),a={};this.listens_[o]=a;const l=P_(e._queryParams);this.restRequest_(s+".json",l,(u,h)=>{let c=h;if(u===404&&(c=null,u=null),u===null&&this.onDataUpdate_(s,c,!1,r),Lo(this.listens_,o)===a){let d;u?u===401?d="permission_denied":d="rest_error:"+u:d="ok",i(d,null)}})}unlisten(e,n){const r=Oh.getListenId_(e,n);delete this.listens_[r]}get(e){const n=P_(e._queryParams),r=e._path.toString(),i=new Em;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Zo(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Dl(a.responseText)}catch{Tn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Tn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(){this.rootNode_=Me.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(){return{value:null,children:new Map}}function m4(t,e,n){if(Se(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ae(e);t.children.has(r)||t.children.set(r,Lh());const i=t.children.get(r);e=Qe(e),m4(i,e,n)}}function a2(t,e,n){t.value!==null?n(e,t.value):CM(t,(r,i)=>{const s=new Je(e.toString()+"/"+r);a2(i,s,n)})}function CM(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Bn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_=10*1e3,kM=30*1e3,NM=5*60*1e3;class RM{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new AM(e);const r=L_+(kM-L_)*Math.random();fl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Bn(e,(i,s)=>{s>0&&Wr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),fl(this.reportStats_.bind(this),Math.floor(Math.random()*2*NM))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(hr||(hr={}));function g4(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function v4(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function y4(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=hr.ACK_USER_WRITE,this.source=g4()}operationForChild(e){if(Se(this.path)){if(this.affectedTree.value!=null)return re(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Je(e));return new Dh(Ve(),n,this.revert)}}else return re(Ae(this.path)===e,"operationForChild called for unrelated child."),new Dh(Qe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=hr.OVERWRITE}operationForChild(e){return Se(this.path)?new As(this.source,Ve(),this.snap.getImmediateChild(e)):new As(this.source,Qe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=hr.MERGE}operationForChild(e){if(Se(this.path)){const n=this.children.subtree(new Je(e));return n.isEmpty()?null:n.value?new As(this.source,Ve(),n.value):new ru(this.source,Ve(),n)}else return re(Ae(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ru(this.source,Qe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Se(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ae(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function PM(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(IM(o.childName,o.snapshotNode))}),Pa(t,i,"child_removed",e,r,n),Pa(t,i,"child_added",e,r,n),Pa(t,i,"child_moved",s,r,n),Pa(t,i,"child_changed",e,r,n),Pa(t,i,"value",e,r,n),i}function Pa(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>LM(t,a,l)),o.forEach(a=>{const l=OM(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function OM(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function LM(t,e,n){if(e.childName==null||n.childName==null)throw Jo("Should only compare child_ events.");const r=new ke(e.childName,e.snapshotNode),i=new ke(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(t,e){return{eventCache:t,serverCache:e}}function pl(t,e,n,r){return _4(new e1(e,n,r),t.serverCache)}function w4(t,e,n,r){return _4(t.eventCache,new e1(e,n,r))}function l2(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ks(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d0;const DM=()=>(d0||(d0=new hn(ED)),d0);class Ge{constructor(e,n=DM()){this.value=e,this.children=n}static fromObject(e){let n=new Ge(null);return Bn(e,(r,i)=>{n=n.set(new Je(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ve(),value:this.value};if(Se(e))return null;{const r=Ae(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Qe(e),n);return s!=null?{path:It(new Je(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Se(e))return this;{const n=Ae(e),r=this.children.get(n);return r!==null?r.subtree(Qe(e)):new Ge(null)}}set(e,n){if(Se(e))return new Ge(n,this.children);{const r=Ae(e),s=(this.children.get(r)||new Ge(null)).set(Qe(e),n),o=this.children.insert(r,s);return new Ge(this.value,o)}}remove(e){if(Se(e))return this.children.isEmpty()?new Ge(null):new Ge(null,this.children);{const n=Ae(e),r=this.children.get(n);if(r){const i=r.remove(Qe(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Ge(null):new Ge(this.value,s)}else return this}}get(e){if(Se(e))return this.value;{const n=Ae(e),r=this.children.get(n);return r?r.get(Qe(e)):null}}setTree(e,n){if(Se(e))return n;{const r=Ae(e),s=(this.children.get(r)||new Ge(null)).setTree(Qe(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Ge(this.value,o)}}fold(e){return this.fold_(Ve(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(It(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Ve(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Se(e))return null;{const s=Ae(e),o=this.children.get(s);return o?o.findOnPath_(Qe(e),It(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ve(),n)}foreachOnPath_(e,n,r){if(Se(e))return this;{this.value&&r(n,this.value);const i=Ae(e),s=this.children.get(i);return s?s.foreachOnPath_(Qe(e),It(n,i),r):new Ge(null)}}foreach(e){this.foreach_(Ve(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(It(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.writeTree_=e}static empty(){return new Jn(new Ge(null))}}function ml(t,e,n){if(Se(e))return new Jn(new Ge(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Ln(i,e);return s=s.updateChild(o,n),new Jn(t.writeTree_.set(i,s))}else{const i=new Ge(n),s=t.writeTree_.setTree(e,i);return new Jn(s)}}}function D_(t,e,n){let r=t;return Bn(n,(i,s)=>{r=ml(r,It(e,i),s)}),r}function M_(t,e){if(Se(e))return Jn.empty();{const n=t.writeTree_.setTree(e,new Ge(null));return new Jn(n)}}function u2(t,e){return $s(t,e)!=null}function $s(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ln(n.path,e)):null}function j_(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Wt,(r,i)=>{e.push(new ke(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ke(r,i.value))}),e}function bi(t,e){if(Se(e))return t;{const n=$s(t,e);return n!=null?new Jn(new Ge(n)):new Jn(t.writeTree_.subtree(e))}}function c2(t){return t.writeTree_.isEmpty()}function Wo(t,e){return E4(Ve(),t.writeTree_,e)}function E4(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(re(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=E4(It(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(It(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T4(t,e){return C4(e,t)}function MM(t,e,n,r,i){re(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ml(t.visibleWrites,e,n)),t.lastWriteId=r}function jM(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function FM(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);re(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&$M(a,r.path)?i=!1:Qn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return VM(t),!0;if(r.snap)t.visibleWrites=M_(t.visibleWrites,r.path);else{const a=r.children;Bn(a,l=>{t.visibleWrites=M_(t.visibleWrites,It(r.path,l))})}return!0}else return!1}function $M(t,e){if(t.snap)return Qn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Qn(It(t.path,n),e))return!0;return!1}function VM(t){t.visibleWrites=x4(t.allWrites,UM,Ve()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function UM(t){return t.visible}function x4(t,e,n){let r=Jn.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Qn(n,o)?(a=Ln(n,o),r=ml(r,a,s.snap)):Qn(o,n)&&(a=Ln(o,n),r=ml(r,Ve(),s.snap.getChild(a)));else if(s.children){if(Qn(n,o))a=Ln(n,o),r=D_(r,a,s.children);else if(Qn(o,n))if(a=Ln(o,n),Se(a))r=D_(r,Ve(),s.children);else{const l=Lo(s.children,Ae(a));if(l){const u=l.getChild(Qe(a));r=ml(r,Ve(),u)}}}else throw Jo("WriteRecord should have .snap or .children")}}return r}function b4(t,e,n,r,i){if(!r&&!i){const s=$s(t.visibleWrites,e);if(s!=null)return s;{const o=bi(t.visibleWrites,e);if(c2(o))return n;if(n==null&&!u2(o,Ve()))return null;{const a=n||Me.EMPTY_NODE;return Wo(o,a)}}}else{const s=bi(t.visibleWrites,e);if(!i&&c2(s))return n;if(!i&&n==null&&!u2(s,Ve()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Qn(u.path,e)||Qn(e,u.path))},a=x4(t.allWrites,o,e),l=n||Me.EMPTY_NODE;return Wo(a,l)}}}function BM(t,e,n){let r=Me.EMPTY_NODE;const i=$s(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Wt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=bi(t.visibleWrites,e);return n.forEachChild(Wt,(o,a)=>{const l=Wo(bi(s,new Je(o)),a);r=r.updateImmediateChild(o,l)}),j_(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=bi(t.visibleWrites,e);return j_(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function qM(t,e,n,r,i){re(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=It(e,n);if(u2(t.visibleWrites,s))return null;{const o=bi(t.visibleWrites,s);return c2(o)?i.getChild(n):Wo(o,i.getChild(n))}}function zM(t,e,n,r){const i=It(e,n),s=$s(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=bi(t.visibleWrites,i);return Wo(o,r.getNode().getImmediateChild(n))}else return null}function HM(t,e){return $s(t.visibleWrites,e)}function WM(t,e,n,r,i,s,o){let a;const l=bi(t.visibleWrites,e),u=$s(l,Ve());if(u!=null)a=u;else if(n!=null)a=Wo(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],c=o.getCompare(),d=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=d.getNext();for(;f&&h.length<i;)c(f,r)!==0&&h.push(f),f=d.getNext();return h}else return[]}function KM(){return{visibleWrites:Jn.empty(),allWrites:[],lastWriteId:-1}}function h2(t,e,n,r){return b4(t.writeTree,t.treePath,e,n,r)}function I4(t,e){return BM(t.writeTree,t.treePath,e)}function F_(t,e,n,r){return qM(t.writeTree,t.treePath,e,n,r)}function Mh(t,e){return HM(t.writeTree,It(t.treePath,e))}function GM(t,e,n,r,i,s){return WM(t.writeTree,t.treePath,e,n,r,i,s)}function t1(t,e,n){return zM(t.writeTree,t.treePath,e,n)}function S4(t,e){return C4(It(t.treePath,e),t.writeTree)}function C4(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;re(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),re(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,R_(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,bM(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,xM(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,R_(r,e.snapshotNode,i.oldSnap));else throw Jo("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const A4=new YM;class n1{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new e1(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return t1(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ks(this.viewCache_),s=GM(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function XM(t,e){re(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),re(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function JM(t,e,n,r,i){const s=new QM;let o,a;if(n.type===hr.OVERWRITE){const u=n;u.source.fromUser?o=d2(t,e,u.path,u.snap,r,i,s):(re(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Se(u.path),o=jh(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===hr.MERGE){const u=n;u.source.fromUser?o=ej(t,e,u.path,u.children,r,i,s):(re(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=f2(t,e,u.path,u.children,r,i,a,s))}else if(n.type===hr.ACK_USER_WRITE){const u=n;u.revert?o=rj(t,e,u.path,r,i,s):o=tj(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===hr.LISTEN_COMPLETE)o=nj(t,e,n.path,r,s);else throw Jo("Unknown operation type: "+n.type);const l=s.getChanges();return ZM(e,o,l),{viewCache:o,changes:l}}function ZM(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=l2(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(TM(l2(e)))}}function k4(t,e,n,r,i,s){const o=e.eventCache;if(Mh(r,n)!=null)return e;{let a,l;if(Se(n))if(re(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=ks(e),h=u instanceof Me?u:Me.EMPTY_NODE,c=I4(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const u=h2(r,ks(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=Ae(n);if(u===".priority"){re(Oi(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const c=F_(r,n,h,l);c!=null?a=t.filter.updatePriority(h,c):a=o.getNode()}else{const h=Qe(n);let c;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const d=F_(r,n,o.getNode(),l);d!=null?c=o.getNode().getImmediateChild(u).updateChild(h,d):c=o.getNode().getImmediateChild(u)}else c=t1(r,u,e.serverCache);c!=null?a=t.filter.updateChild(o.getNode(),u,c,h,i,s):a=o.getNode()}}return pl(e,a,o.isFullyInitialized()||Se(n),t.filter.filtersNodes())}}function jh(t,e,n,r,i,s,o,a){const l=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(Se(n))u=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);u=h.updateFullNode(l.getNode(),f,null)}else{const f=Ae(n);if(!l.isCompleteForPath(n)&&Oi(n)>1)return e;const v=Qe(n),w=l.getNode().getImmediateChild(f).updateChild(v,r);f===".priority"?u=h.updatePriority(l.getNode(),w):u=h.updateChild(l.getNode(),f,w,v,A4,null)}const c=w4(e,u,l.isFullyInitialized()||Se(n),h.filtersNodes()),d=new n1(i,c,s);return k4(t,c,n,i,d,a)}function d2(t,e,n,r,i,s,o){const a=e.eventCache;let l,u;const h=new n1(i,e,s);if(Se(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=pl(e,u,!0,t.filter.filtersNodes());else{const c=Ae(n);if(c===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=pl(e,u,a.isFullyInitialized(),a.isFiltered());else{const d=Qe(n),f=a.getNode().getImmediateChild(c);let v;if(Se(d))v=r;else{const y=h.getCompleteChild(c);y!=null?s4(d)===".priority"&&y.getChild(a4(d)).isEmpty()?v=y:v=y.updateChild(d,r):v=Me.EMPTY_NODE}if(f.equals(v))l=e;else{const y=t.filter.updateChild(a.getNode(),c,v,d,h,o);l=pl(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function $_(t,e){return t.eventCache.isCompleteForChild(e)}function ej(t,e,n,r,i,s,o){let a=e;return r.foreach((l,u)=>{const h=It(n,l);$_(e,Ae(h))&&(a=d2(t,a,h,u,i,s,o))}),r.foreach((l,u)=>{const h=It(n,l);$_(e,Ae(h))||(a=d2(t,a,h,u,i,s,o))}),a}function V_(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function f2(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;Se(n)?u=r:u=new Ge(null).setTree(n,r);const h=e.serverCache.getNode();return u.children.inorderTraversal((c,d)=>{if(h.hasChild(c)){const f=e.serverCache.getNode().getImmediateChild(c),v=V_(t,f,d);l=jh(t,l,new Je(c),v,i,s,o,a)}}),u.children.inorderTraversal((c,d)=>{const f=!e.serverCache.isCompleteForChild(c)&&d.value===null;if(!h.hasChild(c)&&!f){const v=e.serverCache.getNode().getImmediateChild(c),y=V_(t,v,d);l=jh(t,l,new Je(c),y,i,s,o,a)}}),l}function tj(t,e,n,r,i,s,o){if(Mh(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Se(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return jh(t,e,n,l.getNode().getChild(n),i,s,a,o);if(Se(n)){let u=new Ge(null);return l.getNode().forEachChild(Io,(h,c)=>{u=u.set(new Je(h),c)}),f2(t,e,n,u,i,s,a,o)}else return e}else{let u=new Ge(null);return r.foreach((h,c)=>{const d=It(n,h);l.isCompleteForPath(d)&&(u=u.set(h,l.getNode().getChild(d)))}),f2(t,e,n,u,i,s,a,o)}}function nj(t,e,n,r,i){const s=e.serverCache,o=w4(e,s.getNode(),s.isFullyInitialized()||Se(n),s.isFiltered());return k4(t,o,n,r,A4,i)}function rj(t,e,n,r,i,s){let o;if(Mh(r,n)!=null)return e;{const a=new n1(r,e,i),l=e.eventCache.getNode();let u;if(Se(n)||Ae(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=h2(r,ks(e));else{const c=e.serverCache.getNode();re(c instanceof Me,"serverChildren would be complete if leaf node"),h=I4(r,c)}h=h,u=t.filter.updateFullNode(l,h,s)}else{const h=Ae(n);let c=t1(r,h,e.serverCache);c==null&&e.serverCache.isCompleteForChild(h)&&(c=l.getImmediateChild(h)),c!=null?u=t.filter.updateChild(l,h,c,Qe(n),a,s):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(l,h,Me.EMPTY_NODE,Qe(n),a,s):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=h2(r,ks(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Mh(r,Ve())!=null,pl(e,u,o,t.filter.filtersNodes())}}function ij(t,e){const n=ks(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Se(e)&&!n.getImmediateChild(Ae(e)).isEmpty())?n.getChild(e):null}function U_(t,e,n,r){e.type===hr.MERGE&&e.source.queryId!==null&&(re(ks(t.viewCache_),"We should always have a full cache before handling merges"),re(l2(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=JM(t.processor_,i,e,n,r);return XM(t.processor_,s.viewCache),re(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,sj(t,s.changes,s.viewCache.eventCache.getNode(),null)}function sj(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return PM(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let B_;function oj(t){re(!B_,"__referenceConstructor has already been defined"),B_=t}function r1(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return re(s!=null,"SyncTree gave us an op for an invalid query."),U_(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(U_(o,e,n,r));return s}}function i1(t,e){let n=null;for(const r of t.views.values())n=n||ij(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q_;function aj(t){re(!q_,"__referenceConstructor has already been defined"),q_=t}class z_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ge(null),this.pendingWriteTree_=KM(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function lj(t,e,n,r,i){return MM(t.pendingWriteTree_,e,n,r,i),i?Zd(t,new As(g4(),e,n)):[]}function lo(t,e,n=!1){const r=jM(t.pendingWriteTree_,e);if(FM(t.pendingWriteTree_,e)){let s=new Ge(null);return r.snap!=null?s=s.set(Ve(),!0):Bn(r.children,o=>{s=s.set(new Je(o),!0)}),Zd(t,new Dh(r.path,s,n))}else return[]}function Jd(t,e,n){return Zd(t,new As(v4(),e,n))}function uj(t,e,n){const r=Ge.fromObject(n);return Zd(t,new ru(v4(),e,r))}function cj(t,e,n,r){const i=O4(t,r);if(i!=null){const s=L4(i),o=s.path,a=s.queryId,l=Ln(o,e),u=new As(y4(a),l,n);return D4(t,o,u)}else return[]}function hj(t,e,n,r){const i=O4(t,r);if(i){const s=L4(i),o=s.path,a=s.queryId,l=Ln(o,e),u=Ge.fromObject(n),h=new ru(y4(a),l,u);return D4(t,o,h)}else return[]}function N4(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Ln(o,e),u=i1(a,l);if(u)return u});return b4(i,e,s,n,!0)}function Zd(t,e){return R4(e,t.syncPointTree_,null,T4(t.pendingWriteTree_,Ve()))}function R4(t,e,n,r){if(Se(t.path))return P4(t,e,n,r);{const i=e.get(Ve());n==null&&i!=null&&(n=i1(i,Ve()));let s=[];const o=Ae(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,h=S4(r,o);s=s.concat(R4(a,l,u,h))}return i&&(s=s.concat(r1(i,t,r,n))),s}}function P4(t,e,n,r){const i=e.get(Ve());n==null&&i!=null&&(n=i1(i,Ve()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=S4(r,o),h=t.operationForChild(o);h&&(s=s.concat(P4(h,a,l,u)))}),i&&(s=s.concat(r1(i,t,r,n))),s}function O4(t,e){return t.tagToQueryMap.get(e)}function L4(t){const e=t.indexOf("$");return re(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Je(t.substr(0,e))}}function D4(t,e,n){const r=t.syncPointTree_.get(e);re(r,"Missing sync point for query tag that we're tracking");const i=T4(t.pendingWriteTree_,e);return r1(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new s1(n)}node(){return this.node_}}class o1{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=It(this.path_,e);return new o1(this.syncTree_,n)}node(){return N4(this.syncTree_,this.path_)}}const dj=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},H_=function(t,e,n){if(!t||typeof t!="object")return t;if(re(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return fj(t[".sv"],e,n);if(typeof t[".sv"]=="object")return pj(t[".sv"],e);re(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},fj=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:re(!1,"Unexpected server value: "+t)}},pj=function(t,e,n){t.hasOwnProperty("increment")||re(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&re(!1,"Unexpected increment value: "+r);const i=e.node();if(re(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},mj=function(t,e,n,r){return a1(e,new o1(n,t),r)},gj=function(t,e,n){return a1(t,new s1(e),n)};function a1(t,e,n){const r=t.getPriority().val(),i=H_(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=H_(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Et(a,Ht(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Et(i))),o.forEachChild(Wt,(a,l)=>{const u=a1(l,e.getImmediateChild(a),n);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function u1(t,e){let n=e instanceof Je?e:new Je(e),r=t,i=Ae(n);for(;i!==null;){const s=Lo(r.node.children,i)||{children:{},childCount:0};r=new l1(i,r,s),n=Qe(n),i=Ae(n)}return r}function la(t){return t.node.value}function M4(t,e){t.node.value=e,p2(t)}function j4(t){return t.node.childCount>0}function vj(t){return la(t)===void 0&&!j4(t)}function ef(t,e){Bn(t.node.children,(n,r)=>{e(new l1(n,t,r))})}function F4(t,e,n,r){n&&!r&&e(t),ef(t,i=>{F4(i,e,!0,r)}),n&&r&&e(t)}function yj(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Fu(t){return new Je(t.parent===null?t.name:Fu(t.parent)+"/"+t.name)}function p2(t){t.parent!==null&&_j(t.parent,t.name,t)}function _j(t,e,n){const r=vj(n),i=Wr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,p2(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,p2(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=/[\[\].#$\/\u0000-\u001F\u007F]/,Ej=/[\[\].#$\u0000-\u001F\u007F]/,f0=10*1024*1024,$4=function(t){return typeof t=="string"&&t.length!==0&&!wj.test(t)},Tj=function(t){return typeof t=="string"&&t.length!==0&&!Ej.test(t)},xj=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Tj(t)},V4=function(t,e,n){const r=n instanceof Je?new nM(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Xi(r));if(typeof e=="function")throw new Error(t+"contains a function "+Xi(r)+" with contents = "+e.toString());if(Fb(e))throw new Error(t+"contains "+e.toString()+" "+Xi(r));if(typeof e=="string"&&e.length>f0/3&&ud(e)>f0)throw new Error(t+"contains a string greater than "+f0+" utf8 bytes "+Xi(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Bn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!$4(o)))throw new Error(t+" contains an invalid key ("+o+") "+Xi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);rM(r,o),V4(t,a,r),iM(r)}),i&&s)throw new Error(t+' contains ".value" child '+Xi(r)+" in addition to actual children.")}},bj=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!$4(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!xj(n))throw new Error(Tk(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Sj(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!l4(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Vs(t,e,n){Sj(t,n),Cj(t,r=>Qn(r,e)||Qn(e,r))}function Cj(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(Aj(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Aj(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();ps&&zt("event: "+n.toString()),Mu(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj="repo_interrupt",Nj=25;class Rj{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ij,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Lh(),this.transactionQueueTree_=new l1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Pj(t,e,n){if(t.stats_=Qg(t.repoInfo_),t.forceRestClient_||CD())t.server_=new Oh(t.repoInfo_,(r,i,s,o)=>{W_(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>K_(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Rt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Dr(t.repoInfo_,e,(r,i,s,o)=>{W_(t,r,i,s,o)},r=>{K_(t,r)},r=>{Lj(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=PD(t.repoInfo_,()=>new RM(t.stats_,t.server_)),t.infoData_=new SM,t.infoSyncTree_=new z_({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Jd(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),c1(t,"connected",!1),t.serverSyncTree_=new z_({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const u=o(a,l);Vs(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function Oj(t){const n=t.infoData_.getNode(new Je(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function U4(t){return dj({timestamp:Oj(t)})}function W_(t,e,n,r,i){t.dataUpdateCount++;const s=new Je(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=ch(n,u=>Ht(u));o=hj(t.serverSyncTree_,s,l,i)}else{const l=Ht(n);o=cj(t.serverSyncTree_,s,l,i)}else if(r){const l=ch(n,u=>Ht(u));o=uj(t.serverSyncTree_,s,l)}else{const l=Ht(n);o=Jd(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=d1(t,s)),Vs(t.eventQueue_,a,o)}function K_(t,e){c1(t,"connected",e),e===!1&&Mj(t)}function Lj(t,e){Bn(e,(n,r)=>{c1(t,n,r)})}function c1(t,e,n){const r=new Je("/.info/"+e),i=Ht(n);t.infoData_.updateSnapshot(r,i);const s=Jd(t.infoSyncTree_,r,i);Vs(t.eventQueue_,r,s)}function Dj(t){return t.nextWriteId_++}function Mj(t){B4(t,"onDisconnectEvents");const e=U4(t),n=Lh();a2(t.onDisconnect_,Ve(),(i,s)=>{const o=mj(i,s,t.serverSyncTree_,e);m4(n,i,o)});let r=[];a2(n,Ve(),(i,s)=>{r=r.concat(Jd(t.serverSyncTree_,i,s));const o=Vj(t,i);d1(t,o)}),t.onDisconnect_=Lh(),Vs(t.eventQueue_,Ve(),r)}function jj(t){t.persistentConnection_&&t.persistentConnection_.interrupt(kj)}function B4(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),zt(n,...e)}function q4(t,e,n){return N4(t.serverSyncTree_,e,n)||Me.EMPTY_NODE}function h1(t,e=t.transactionQueueTree_){if(e||tf(t,e),la(e)){const n=H4(t,e);re(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Fj(t,Fu(e),n)}else j4(e)&&ef(e,n=>{h1(t,n)})}function Fj(t,e,n){const r=n.map(u=>u.currentWriteId),i=q4(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const h=n[u];re(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const c=Ln(e,h.path);s=s.updateChild(c,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,u=>{B4(t,"transaction put response",{path:l.toString(),status:u});let h=[];if(u==="ok"){const c=[];for(let d=0;d<n.length;d++)n[d].status=2,h=h.concat(lo(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&c.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();tf(t,u1(t.transactionQueueTree_,e)),h1(t,t.transactionQueueTree_),Vs(t.eventQueue_,e,h);for(let d=0;d<c.length;d++)Mu(c[d])}else{if(u==="datastale")for(let c=0;c<n.length;c++)n[c].status===3?n[c].status=4:n[c].status=0;else{Tn("transaction at "+l.toString()+" failed: "+u);for(let c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=u}d1(t,e)}},o)}function d1(t,e){const n=z4(t,e),r=Fu(n),i=H4(t,n);return $j(t,i,r),r}function $j(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=Ln(n,l.path);let h=!1,c;if(re(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,c=l.abortReason,i=i.concat(lo(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=Nj)h=!0,c="maxretry",i=i.concat(lo(t.serverSyncTree_,l.currentWriteId,!0));else{const d=q4(t,l.path,o);l.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){V4("transaction failed: Data returned ",f,l.path);let v=Ht(f);typeof f=="object"&&f!=null&&Wr(f,".priority")||(v=v.updatePriority(d.getPriority()));const w=l.currentWriteId,p=U4(t),m=gj(v,d,p);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=m,l.currentWriteId=Dj(t),o.splice(o.indexOf(w),1),i=i.concat(lj(t.serverSyncTree_,l.path,m,l.currentWriteId,l.applyLocally)),i=i.concat(lo(t.serverSyncTree_,w,!0))}else h=!0,c="nodata",i=i.concat(lo(t.serverSyncTree_,l.currentWriteId,!0))}Vs(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(c==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(c),!1,null))))}tf(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Mu(r[a]);h1(t,t.transactionQueueTree_)}function z4(t,e){let n,r=t.transactionQueueTree_;for(n=Ae(e);n!==null&&la(r)===void 0;)r=u1(r,n),e=Qe(e),n=Ae(e);return r}function H4(t,e){const n=[];return W4(t,e,n),n.sort((r,i)=>r.order-i.order),n}function W4(t,e,n){const r=la(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);ef(e,i=>{W4(t,i,n)})}function tf(t,e){const n=la(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,M4(e,n.length>0?n:void 0)}ef(e,r=>{tf(t,r)})}function Vj(t,e){const n=Fu(z4(t,e)),r=u1(t.transactionQueueTree_,e);return yj(r,i=>{p0(t,i)}),p0(t,r),F4(r,i=>{p0(t,i)}),n}function p0(t,e){const n=la(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(re(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(re(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(lo(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?M4(e,void 0):n.length=s+1,Vs(t.eventQueue_,Fu(e),i);for(let o=0;o<r.length;o++)Mu(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Bj(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Tn(`Invalid query segment '${n}' in query '${t}'`)}return e}const G_=function(t,e){const n=qj(t),r=n.namespace;n.domain==="firebase.com"&&zr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&zr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||_D();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Yb(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Je(n.pathString)}},qj=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let c=t.indexOf("?");c===-1&&(c=t.length),e=t.substring(0,Math.min(h,c)),h<c&&(i=Uj(t.substring(h,c)));const d=Bj(t.substring(Math.min(t.length,c)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const f=e.slice(0,u);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Se(this._path)?null:s4(this._path)}get ref(){return new ua(this._repo,this._path)}get _queryIdentifier(){const e=O_(this._queryParams),n=Kg(e);return n==="{}"?"default":n}get _queryObject(){return O_(this._queryParams)}isEqual(e){if(e=Be(e),!(e instanceof f1))return!1;const n=this._repo===e._repo,r=l4(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+tM(this._path)}}class ua extends f1{constructor(e,n){super(e,n,new Zg,!1)}get parent(){const e=a4(this._path);return e===null?null:new ua(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}oj(ua);aj(ua);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj="FIREBASE_DATABASE_EMULATOR_HOST",m2={};let Hj=!1;function Wj(t,e,n,r){t.repoInfo_=new Yb(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Kj(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||zr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),zt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=G_(s,i),a=o.repoInfo,l,u;typeof process<"u"&&p_&&(u=p_[zj]),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=G_(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const h=i&&l?new bo(bo.OWNER):new kD(t.name,t.options,e);bj("Invalid Firebase Database URL",o),Se(o.path)||zr("Database URL must point to the root of a Firebase Database (not including a child path).");const c=Qj(a,t,h,new AD(t.name,n));return new Yj(c,t)}function Gj(t,e){const n=m2[e];(!n||n[t.key]!==t)&&zr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),jj(t),delete n[t.key]}function Qj(t,e,n,r){let i=m2[e.name];i||(i={},m2[e.name]=i);let s=i[t.toURLString()];return s&&zr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Rj(t,Hj,n,r),i[t.toURLString()]=s,s}class Yj{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Pj(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ua(this._repo,Ve())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Gj(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&zr("Cannot call "+e+" on a deleted database.")}}function Xj(t=hd(),e){const n=du(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=wm("database");r&&Jj(n,...r)}return n}function Jj(t,e,n,r={}){t=Be(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&zr("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&zr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new bo(bo.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Tm(r.mockUserToken,t.app.options.projectId);s=new bo(o)}Wj(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(t){pD(Fi),Ci(new Vr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Kj(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Mn(m_,g_,t),Mn(m_,g_,"esm2017")}Dr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Dr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Zj();function g2(t,e){localStorage.setItem(t,JSON.stringify(e))}function Q_(t){let e=localStorage.getItem(t);try{return JSON.parse(e)}catch{return null}}const eF={apiKey:"AIzaSyCwF75LGVuWriGfXEyHzoGBvobiOdMEwHs",authDomain:"star-education-academy.firebaseapp.com",projectId:"star-education-academy",storageBucket:"star-education-academy.appspot.com",messagingSenderId:"693801186794",appId:"1:693801186794:web:b202cdffa55530e687ee93",measurementId:"G-JN1DV2YT81",databaseURL:"https://star-education-academy-default-rtdb.asia-southeast1.firebasedatabase.app"},nf=f5(eF),ue=eL(nf),tF=new Sr,Oe=wO(nf),Qa=cD(nf);Xj(nf);const Ko=(t,e,n)=>{M.useEffect(()=>{try{if(n){const r=Mt(Oe,t),i=wr(r,s=>{const o=s.docs.map(a=>({...a.data(),[t==="users"?"uid":"id"]:a.id}));o.length!==0&&e(o)});return()=>{i()}}}catch(r){console.log(r.message)}},[n])},nF=(t,e,n)=>{M.useEffect(()=>{var r;try{if(n){const i=Pe(Oe,t,(r=ue==null?void 0:ue.currentUser)==null?void 0:r.uid),s=wr(i,o=>{const a={uid:o.id,...o.data()};return a!=null&&a.name&&e(a),()=>s()})}}catch(i){console.log(i.message)}},[n])};function Us(t,e){let n;return t.forEach(r=>{r.uid===e&&(n=r)}),n}const rF=({data:t})=>{const{nextPage:e,prevPage:n,isEnded:r,startIndex:i}=t,{startTimer:s,formattedTime:o,stopTest:a,currentTest:l,answeredQuestions:u}=M.useContext(ce),h=An(),c=async()=>{try{const v=Mt(Oe,"notifications"),y={uid:ue.currentUser.uid,type:["took","test"],testName:l.name,isReadBy:[],timestamp:new Date().getTime()};await Pi(v,y)}catch(v){console.log(v.message)}},d=async()=>{try{const v=Mt(Pe(Oe,"users",ue.currentUser.uid),"history"),y=G6(u,l,o),w=await Pi(v,y),p=(await jx(w)).id;h(`/app/history/${p}`)}catch(v){console.log(v.message)}},f=()=>{s(),d(),a(),c()};return _.jsxs("div",{className:"flex justify-center gap-x-5",children:[i!==0&&_.jsx(Re,{data:{clickFn:n,text:"Previous",image:"back"}}),r?_.jsx(Re,{data:{clickFn:f,text:"Finish",image:"finish"}}):_.jsx(Re,{data:{clickFn:e,text:"Next",image:"next"}})]})},nr=()=>{const[t,e]=M.useState(!0),[n,r]=M.useState(0),{theme:i}=M.useContext(ce);if(M.useEffect(()=>{const s=setInterval(()=>{r(Math.min(n+1,100)),n===100&&(e(!1),r(0))},5);return()=>{clearInterval(s)}},[n]),t&&(document.title="Loading..."),t)return _.jsx("div",{className:`transition-all fixed z-30  top-0 right-0 left-0 bottom-0 flex  items-center justify-center ${i==="light"?"bg-white":"bg-slate-600 text-white"}`,children:_.jsxs("div",{className:"flex flex-col items-center justify-center gap-y-4",children:[_.jsx("img",{className:"w-20 rounded-lg",src:"/images/sea-logo.jpg"}),_.jsx("div",{className:"h-3 w-[200px] rounded-md overflow-hidden",children:_.jsx("div",{style:{width:`${n}%`},className:"h-full bg-blue-300"})}),_.jsxs("p",{className:"text-lg",children:[n,"%"]})]})})},iF=()=>{const{answeredQuestions:t,setAnsweredQuestions:e,currentTest:n,seaLocalStorage:r,seconds:i,hours:s,minutes:o}=M.useContext(ce),a=t.length,l=n.quizzes.length,[u,h]=M.useState((r==null?void 0:r.startIndex)||0),[c,d]=M.useState(!1),[f,v]=M.useState(!1),[y,w]=M.useState(!1),p=10;let m=n.quizzes.slice(u,u+p);const E=n.name,g=Math.ceil(l/p),T=Math.ceil((u+p)/p),x=Math.round(a/l*100);M.useEffect(()=>(En(),En()),[]),M.useEffect(()=>{g2("sea-localStorage",{answeredQuestions:t,currentTest:n,startIndex:u,timer:{seconds:i,minutes:o,hours:s}})},[t,n,u,i]),M.useEffect(()=>{a===l&&u+p>=l?d(!0):d(!1)},[u,t]),M.useEffect(()=>{a>=u+p?v(!0):v(!1)},[t,u]);const I={pageTitle:E,currentPage:T,totalPage:g,percentage:x,answerLength:a,questionsLength:l,currentQuestions:m,isEnded:c,chooseAnswer:(C,A)=>{const N=BA(C,t);e(N?t.map(P=>C===P.id?{id:C,userAnswer:A}:P):[...t,{id:C,userAnswer:A}])},nextPage:()=>{f?(h(u+p),a<=u+p&&En()):qA(w)},prevPage:()=>{h(Math.max(u-p,0))},startIndex:u};return _.jsxs("div",{className:"p-3 grid gap-y-3",children:[_.jsx(nr,{}),_.jsx(zA,{data:I}),_.jsx(HA,{data:I}),y&&_.jsx(KA,{}),_.jsx(rF,{data:I})]})},rf=({title:t,text:e})=>{const{isLogin:n,theme:r}=M.useContext(ce),i=An();return _.jsxs("div",{className:"grid p-5 gap-y-2",children:[e&&_.jsx("div",{className:` ${r==="light"?"":"text-white"}`,children:e}),_.jsx("div",{children:_.jsx(Re,{data:{clickFn:()=>i(n?"/app/posts":"/login"),image:"redo",text:n?"Return Home":"Login"}})})]})},sF=()=>{const{theme:t,userData:e}=M.useContext(ce),[n,r]=M.useState(null),i=`${n==null?void 0:n.testName} - Results`,s=Math.round((n==null?void 0:n.score)/(n==null?void 0:n.totalScore)*100),o=An(),{resultId:a}=ym(),l=()=>{try{const h=Mt(Pe(Oe,"users",e.uid),"history"),c=Pe(h,a);return wr(c,f=>{const v={id:f.id,...f.data()};r(v)})}catch(h){return console.log(h.message),()=>{}}};M.useEffect(()=>{const h=l();return()=>{h()}},[a]),M.useEffect(()=>(En(),En()),[]);const u=async()=>{try{await navigator.share({title:"Check out my score!",text:`I scored ${n.score} out of ${n.totalScore} in '${n.testName}'.
Website URL - https://wwww.seaacademy.onrender.com
        `})}catch{console.log("Error")}};return _.jsxs("div",{className:"p-5 ",children:[_.jsx(nr,{}),n?_.jsxs("div",{className:"",children:[_.jsxs("div",{className:"flex items-center gap-x-1 h-10 font-medium mb-4",children:[_.jsx(Ue,{data:{image:"back",clickFn:()=>o("/app/history")}}),_.jsx("div",{className:`text-lg pl-2 place-items-center bg-blue-40 ${t==="light"?"text-gray-500":"text-white"}`,children:i})]}),_.jsxs("div",{className:"flex items-center gap-x-1 mb-2",children:[_.jsx("div",{children:_.jsx("div",{className:"grid items-center justify-center bg-blue-300/50 h-40 w-40 rounded-full",children:_.jsx("div",{className:"grid items-center justify-center bg-blue-400/50 h-32 w-32 rounded-full",children:_.jsx("div",{className:"grid items-center justify-center bg-blue-500/50 h-28 w-28 rounded-full",children:_.jsx("div",{className:`grid  h-20 w-20 items-center justify-center rounded-full ${t==="light"?"bg-slate-50":"bg-slate-600"}`,children:_.jsxs("div",{className:`flex flex-col items-center justify-center font-medium ${t==="light"?"text-blue-500":"text-white"}`,children:[_.jsx("div",{className:"text-sm font-bold",children:"Your Score"}),_.jsxs("div",{className:" text-lg ",children:[n.score," / ",n.totalScore]})]})})})})})}),_.jsx("div",{className:`grid items-center justify-center font-bold
             text-lg ${t==="light"?"text-blue-700":"text-white"}`,children:_.jsx("div",{children:n.level})})]}),_.jsxs("div",{className:"mt-1 mb-2 h-2 border flex ",children:[_.jsx("div",{className:`h-full ${t==="light"?"bg-lime-400":"bg-slate-500"}`,style:{width:`${s}%`}}),_.jsx("div",{className:"h-full bg-gray-200",style:{width:`${100-s}%`}})]}),_.jsxs("div",{className:`grid grid-cols-2 gap-y-2 border p-2 rounded-lg ${t==="light"?"bg-white border-gray-200":"border-slate-500/70 text-white"}`,children:[_.jsx(Ki,{text:"Score Percentage",value:`${s}%`,color:"text-lime-500"}),_.jsx(Ki,{text:"Total Questions",value:n.totalScore,color:"text-lime-500"}),_.jsx(Ki,{text:"Correct",value:n.score,color:"text-green-500"}),_.jsx(Ki,{text:"Wrong",value:n.totalScore-n.score,color:"text-red-500"}),_.jsx(Ki,{text:"Date",value:n.date,color:"text-lime-500"}),_.jsx(Ki,{text:"Time",value:n.time,color:"text-lime-500"}),_.jsx(Ki,{text:"Time taken",value:B3(n.timeTaken)||"Unknown",color:"text-lime-500"})]}),_.jsxs("div",{className:`grid grid-cols-3 justify-center gap-y-2 mt-5 ${t==="light"?"":"text-white"}`,children:[_.jsxs("div",{className:"flex flex-col items-center justify-center",children:[_.jsx(Ue,{data:{clickFn:()=>o(`/app/history/${a}/reviews`),image:"review"}}),_.jsx("div",{className:"text-sm",children:"Review Answers"})]}),_.jsxs("div",{className:"flex flex-col items-center justify-center",children:[_.jsx(Ue,{data:{clickFn:u,image:"share"}}),_.jsx("div",{className:"text-sm",children:"Share Score"})]}),_.jsxs("div",{className:"flex flex-col items-center justify-center",children:[_.jsx(Ue,{data:{clickFn:()=>o("/app/posts"),image:"home"}}),_.jsx("div",{className:"text-sm",children:"Home"})]})]})]}):_.jsx(rf,{text:"Unavailable"})]})},Ki=({text:t,value:e,color:n})=>_.jsxs("div",{children:[_.jsxs("div",{className:`font-medium ${n}`,children:["● ",e]}),_.jsx("div",{className:"text-sm",children:t})]}),K4=({image:t,clickFn:e,active:n})=>{const{theme:r}=M.useContext(ce);return _.jsx("button",{className:`transition-all rounded-full p-2  ${r==="light"?`hover:bg-slate-200/70 ${n?"bg-slate-200/70":""}`:`hover:bg-slate-600/70 ${n?"bg-slate-500/70":""}`} mr-2`,onClick:e,children:_.jsx("img",{className:"w-8",src:De(t)})})};function ca(t,e=15){const n=t.slice(0,e);return e>=t.length?n:`${n}...`}const Hi=({image:t,name:e,size:n="size-10",fontSize:r="text-lg"})=>{const i=t&&t.trim(),s=e&&e.trim(),o=i&&s,a=()=>{const l=e.trim().split(" ");return l.length<=3?l[0][0].toUpperCase():`${l[0][0]}${l[1][0]}`.toUpperCase()};if(i||o)return _.jsx("img",{className:`${n} rounded-full object-cover`,src:t});if(s)return _.jsx("div",{className:`flex font-roboto justify-center ${r} items-center  rounded-full font-bold text-white bg-blue-400 ${n}`,children:a()});if(!o)return _.jsx("div",{className:`flex font-roboto justify-center ${r} items-center  rounded-full font-bold text-white bg-blue-400 ${n}`,children:"U"})},oF=({data:t})=>{const{setIsMenuOpen:e}=t,[n,r]=M.useState(!1),i=M.useRef(null),s=An(),{setIsLogIn:o,theme:a,userData:l,refreshUserData:u,inspecting:h,isOnline:c}=M.useContext(ce),d=async()=>{try{await B7(ue),e(!1),o(!1)}catch(y){console.log(y.message)}};Ps(i,r);const f=async()=>{const y=Pe(Oe,"users",ue.currentUser.uid);await Jt(y,{isOnline:!1,lastSeen:new Date().getTime()})},v=async()=>{const y=Pe(Oe,"users",ue.currentUser.uid);await Jt(y,{isOnline:!0})};return _.jsxs("div",{ref:i,className:"p-2 ",children:[_.jsx("button",{onClick:()=>r(!n),className:`transition-all p-1 rounded-md cursor-pointer w-full min-h-14 ${a==="light"?`${n?"bg-slate-200/70":"hover:bg-slate-200/70"}`:`${n?"bg-slate-500/70":"hover:bg-slate-500/70"}`}`,children:_.jsxs("div",{className:"flex gap-x-2 items-center mb-2",children:[_.jsxs("div",{className:"relative w-10",children:[_.jsx(Hi,{image:l==null?void 0:l.image,name:l==null?void 0:l.name}),_.jsx("div",{className:`absolute bottom-0 right-0 size-3 rounded-full ${l!=null&&l.isOnline?"bg-green-500":"bg-gray-500"}`})]}),_.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[_.jsxs("div",{className:"font-medium",children:[l==null?void 0:l.name," ",_.jsxs("span",{className:"text-blue-500",children:["(",l.isAdmin?"admin":"user",")"]})]}),h&&_.jsx(Ue,{data:{clickFn:u,image:"exit"}})]})]})}),n&&_.jsxs("div",{className:`fixed bottom-[70px] left-1 border w-4/6 sm:w-3/5 md:w-4/6  p-2 rounded-md ${a==="light"?"border-gray-200 bg-white ":"bg-slate-500 text-white border-slate-500 "}`,children:[_.jsxs("div",{children:[_.jsxs("button",{onClick:()=>{l!=null&&l.isOnline?f():v()},className:`flex w-full p-1 rounded-md gap-x-2 items-center  ${a==="light"?"hover:bg-gray-200/70":"hover:bg-slate-600 text-white"}`,children:[_.jsx("img",{className:"w-6",src:De(l!=null&&l.isOnline?"offline":"online")}),_.jsxs("div",{children:["Switch to ",l!=null&&l.isOnline?"offline":"online"]})]}),_.jsxs("button",{onClick:()=>{s("/app/settings"),e(!1),r(!1)},className:`flex w-full p-1 rounded-md gap-x-2 items-center  ${a==="light"?"hover:bg-gray-200/70":"hover:bg-slate-600 text-white"}`,children:[_.jsx("img",{className:"w-6",src:De("admin")}),_.jsx("div",{children:"Settings"})]})]}),_.jsxs("button",{onClick:d,className:`flex w-full p-1 rounded-md gap-x-2 items-center ${a==="light"?"hover:bg-gray-200/70":"hover:bg-slate-600 text-white"}`,children:[_.jsx("img",{className:"w-6",src:De("logout")}),_.jsx("div",{children:"Log out"})]})]})]})},aF=({data:t})=>{const{isMenuOpen:e,setIsMenuOpen:n}=t,r=M.useRef(null),i=Xo(),{setHeaderTitle:s,theme:o,userData:a}=M.useContext(ce),l=["/app/admin","/app/admin/posts","/app/admin/users","/app/admin/helps","/app/admin/tests"],u=["/app/posts","/app/tests"],h=i.pathname.includes("/app/history"),c=l.includes(i.pathname),d=u.includes(i.pathname),f=i.pathname==="/app/help",v=i.pathname==="/app/settings",y=i.pathname==="/login",w=i.pathname==="/app/notifications",p=i.pathname==="/app/chatroom";if(h)s("History");else if(f)s("Help");else if(c)switch(i.pathname){case"/app/admin":s("Admin");break;case"/app/admin/posts":s("Admin - Posts");break;case"/app/admin/users":s("Admin - Users");break;case"/app/admin/tests":s("Admin - Tests");break;case"/app/admin/help":s("Admin - Help");break}else v?s("Settings"):(y||d)&&s("STAR EDUCATION ACADEMY");const m=[{text:"Home",image:"home",path:"/app/posts",active:d,clickFn:()=>n(!1)},{text:"History",image:"history",path:"/app/history",active:h,clickFn:()=>n(!1)},{text:"Help",image:"help",path:"/app/help",active:f,clickFn:()=>n(!1)},{text:"Notifications",image:"notification",path:"/app/notifications",color:"bg-red-600",active:w,clickFn:()=>n(!1)},{text:"Chat Room",image:"chat",path:"/app/chatroom",color:"bg-red-600",active:p,clickFn:()=>n(!1)},{text:"Admin",image:"admin",path:"/app/admin",active:c,clickFn:()=>n(!1)}],E=["Admin","Notifications"],g=m.filter(T=>a.isAdmin?!0:!E.includes(T.text));return M.useEffect(()=>{bn(e?"hidden":"auto")},[e]),Ps(r,n),_.jsx("div",{style:{left:e?0:"-1500px",right:e?0:""},className:"z-30 transition-all duration-300 fixed top-0 bottom-0 bg-black/40",children:_.jsxs("div",{ref:r,className:`flex flex-col backdrop-blur-sm  justify-between transition-all duration-300 h-full bg-slate-50 w-5/6 sm:w-3/5 md:w-3/6 lg:w-2/6 shadow-lg shadow-black ${o==="light"?"bg-white/60 ":" bg-slate-500/60 text-white"}`,children:[_.jsxs("div",{children:[_.jsx("div",{className:"flex p-3 items-center",children:_.jsxs("div",{className:"font-medium text-md flex-1 flex items-center",children:[_.jsx(K4,{clickFn:()=>n(!1),image:e?"close":"menu",active:e}),_.jsx("div",{className:`font-bold  ${o==="light"?"text-blue-500":" text-slate-700"}`,children:"STAR EDUCATION ACADEMY"})]})}),_.jsx("div",{className:"mr-2",children:g.map(T=>_.jsx(lF,{data:{active:T.active,image:T.image,path:T.path,text:T.text,items:T==null?void 0:T.items,clickFn:T.clickFn,color:T.color}},T.text))})]}),_.jsx(oF,{data:{setIsMenuOpen:n}})]})})},lF=({data:t})=>{const{active:e,image:n,text:r,items:i,path:s,clickFn:o,color:a}=t,l=An(),{theme:u,currentTest:h}=M.useContext(ce),c=()=>{o&&o()};return _.jsxs("button",{onClick:()=>{l(s),c()},className:`p-2 pl-2 transition-all font-medium rounded-tr-3xl rounded-br-3xl flex relative items-center gap-x-1 w-full  hover:shadow-md 
      ${u==="light"?` ${e?"bg-blue-500/70":"hover:bg-slate-200/70"}`:` ${e?"bg-blue-500/70":"hover:bg-slate-500/70"}`}
      `,children:[_.jsx("img",{className:`h-9 w-9 p-1 transition-all
        `,src:De(n)}),_.jsx("div",{children:r}),i>=0&&_.jsx("div",{className:` flex items-center rounded-full justify-center w-6 h-6 text-sm  top-0 -left-1 font-bold text-white ${a||"bg-black"}`,children:i}),h&&r==="Home"&&_.jsxs("div",{className:"text-sm",children:["(Taking ",ca(h.name,45),")"]})]})},G4=({theme:t,setTheme:e})=>{const n=()=>{e(t==="light"?"dark":"light")};return _.jsxs("div",{className:`flex items-center gap-x-2 ${t==="light"?"":"text-white"} `,children:[_.jsx("div",{children:"Theme"}),_.jsx(Ue,{data:{clickFn:n,image:t==="light"?"light":"dark"}})]})},uF=()=>{const{headerTitle:t,theme:e,setTheme:n,isLogin:r}=M.useContext(ce),[i,s]=M.useState(!1);return _.jsxs("header",{className:`p-2 w-full shadow-sm flex justify-between items-center sticky top-0 right-0 left-0 z-20 ${e==="light"?"bg-slate-50 ":"bg-slate-500"}`,children:[_.jsxs("div",{className:"flex items-center",children:[r&&_.jsxs(_.Fragment,{children:[_.jsx(K4,{clickFn:()=>s(!0),image:"menu",active:i}),_.jsx(aF,{data:{isMenuOpen:i,setIsMenuOpen:s}})]}),_.jsx("div",{className:"font-medium text-md flex-1 flex items-center gap-x-2",children:_.jsx("div",{className:`font-bold ${e==="light"?"text-blue-500":"text-slate-700"}`,children:t})})]}),_.jsxs("div",{className:"flex gap-x-2 items-center",children:[_.jsx("div",{className:"hidden md:block",children:_.jsx(G4,{setTheme:n,theme:e})}),_.jsx("img",{className:"size-12 rounded-full",src:"images/sea-logo.jpg"})]})]})},uo=()=>_.jsx("div",{className:"h-0.5 border border-dashed border-gray-200 mb-2 mt-2"}),cF=()=>{var y;const{theme:t,userData:e}=M.useContext(ce),n=0,r=10,[i,s]=M.useState(r),[o,a]=M.useState(!1),[l,u]=M.useState({}),h=(y=l==null?void 0:l.results)==null?void 0:y.slice(n,i),c=`${l==null?void 0:l.testName} - Review your answers`,{resultId:d}=ym(),f=()=>{try{const w=Mt(Pe(Oe,"users",e.uid),"history"),p=Pe(w,d);return wr(p,E=>{const g={id:E.id,...E.data()};u(g)})}catch(w){console.log(w.message)}};M.useEffect(()=>{const w=f();return()=>{w()}},[d]),M.useEffect(()=>(En(),En()),[]);const v=()=>{s(i+r)};return M.useEffect(()=>{var w;i>=((w=l==null?void 0:l.results)==null?void 0:w.length)&&a(!0)},[i]),document.title=c,_.jsxs("div",{className:"p-5",children:[_.jsx(nr,{}),l?_.jsxs("div",{className:"grid gap-y-5",children:[_.jsx("div",{className:`font-medium text-lg ${t==="light"?"":"text-white"}`,children:c}),h==null?void 0:h.map(w=>{const{id:p,question:m,isTrue:E,answer:g,userAnswer:T}=w;return E?_.jsxs("div",{className:"grid font-padauk gap-y-2",children:[_.jsxs("div",{className:"flex gap-x-3 items-center",children:[_.jsx("div",{className:"bg-green-500 h-9 w-9 text-white font-bold rounded-sm flex justify-center items-center ",children:p}),_.jsx("div",{className:`flex-1 ${t==="light"?"":"text-white"}`,children:m})]}),_.jsx("div",{children:_.jsxs("div",{className:"grid gap-y-1",children:[_.jsx("div",{className:"text-green-500 font-bold",children:"Correct (your answer)"}),_.jsxs("div",{className:"min-h-12  flex gap-x-3 p-2 border text-green-500 border-green-500 rounded-lg items-center shadow-md shadow-lime-200",children:[_.jsx("img",{className:"w-5 h-5",src:De("trueIcon")}),_.jsx("div",{children:g})]})]})}),_.jsx(uo,{})]},`result-${p}`):_.jsxs("div",{className:"grid font-padauk gap-y-2",children:[_.jsxs("div",{className:"flex gap-x-3 items-center",children:[_.jsx("div",{className:"bg-red-500 h-9 w-9 text-white font-bold rounded-sm flex justify-center items-center ",children:p}),_.jsx("div",{className:`flex-1 ${t==="light"?"":"text-white"}`,children:m})]}),_.jsxs("div",{className:"grid gap-y-1",children:[_.jsxs("div",{className:"grid gap-y-1",children:[_.jsx("div",{className:"text-red-500 font-bold",children:"Incorrect (your answer)"}),_.jsxs("div",{className:"min-h-12 flex gap-x-3 p-2 border text-red-500 border-red-500 rounded-lg items-center shadow-md shadow-red-200",children:[_.jsx("img",{className:"w-5 h-5",src:De("falseIcon")}),_.jsx("div",{children:T})]})]}),_.jsxs("div",{className:"grid gap-y-1",children:[_.jsx("div",{className:"text-green-500 font-bold",children:"Correct"}),_.jsxs("div",{className:" min-h-12  flex gap-x-3 p-2 border text-green-500 shadow-md shadow-lime-200 border-green-500 rounded-lg items-center",children:[_.jsx("img",{className:"w-5 h-5",src:De("trueIcon")}),_.jsx("div",{children:g})]})]})]}),_.jsx(uo,{})]},`result-${p}`)}),o?"":_.jsx("div",{className:"flex justify-center",children:_.jsx(Re,{data:{image:"down",text:"See More",clickFn:v}})}),_.jsx("div",{children:_.jsx(Z3,{to:`/app/history/${d}`,children:_.jsx(Re,{data:{image:"back",text:"Back to results"}})})})]}):_.jsx(rf,{text:"Unavailable"})]})},hF=()=>{const{deleteFromHistory:t,theme:e,history:n,setHistory:r,userData:i}=M.useContext(ce),s=An(),[o,a]=M.useState(null),[l,u]=M.useState(!1),[h,c]=M.useState(!1),[d,f]=M.useState(!1),[v,y]=M.useState([]),w=()=>{try{const x=Mt(Pe(Oe,"users",i.uid),"history");return wr(x,S=>{const k=S.docs.map(I=>({id:I.id,...I.data()}));k.length!==0&&r(k)})}catch(x){return console.log(x.message),()=>{}}};M.useEffect(()=>{En();const x=w();return()=>{En(),x()}},[]);const p=x=>{d||s(`/app/history/${x.id}`)},m=()=>{t(o),a(null),u(!1)},E=()=>{u(!1),a(null)},g=(x,b)=>{x.target.checked?y([...v,b]):y(v.filter(S=>S!==b))},T=()=>{const x=n.filter(b=>!v.includes(b.id));r(x),y([]),c(!1),f(!1)};return _.jsxs("div",{className:"p-5",children:[_.jsx(nr,{}),h&&_.jsx(Oo,{data:{text:`Are you sure to delete ${v.length} ${v.length<=1?"item":"items"} ?`,yesButton:T,noButton:()=>c(!1),setValue:c}}),l&&_.jsx(Oo,{data:{text:"Are you sure to delete ?",yesButton:m,noButton:E,setValue:u}}),n.length!==0?_.jsxs("div",{className:"grid gap-y-2  ",children:[_.jsxs("div",{className:"flex items-center gap-x-2 justify-between",children:[_.jsx(Re,{data:{clickFn:()=>{f(!d),y([])},text:d?"Done":"Select"}}),d&&_.jsxs("div",{className:"flex items-center gap-x-2",children:[_.jsxs("div",{className:"font-medium rounded-lg",children:[v.length," ",v.length<=1?"item":"items"," selected"]}),_.jsx(Ue,{data:{clickFn:()=>{v.length&&c(!0)},image:"trash"}})]})]}),n.map((x,b)=>_.jsxs("div",{className:`min-h-20 border rounded-md gap-x-3 ${e==="light"?"border-slate-200 shadow-gray-200":"border-slate-500/70 text-white shadow-slate-500"}`,children:[_.jsx("div",{className:`font-medium border-b p-2 rounded-tl-md rounded-tr-md ${e==="light"?"bg-slate-100 border-b-slate-200":"bg-slate-500/70 border-b-slate-400"}`,children:x.testName}),_.jsxs("div",{className:"p-2 flex items-center gap-x-2",children:[d&&_.jsx("input",{checked:v.includes(x.id),onChange:S=>g(S,x.id),className:"form-checkbox rounded-lg border-2 w-6 h-6 border-gray-200 checked:bg-transparent ",type:"checkbox"}),_.jsx("div",{onClick:()=>p(x),className:"flex flex-1 items-center gap-x-3 cursor-pointer",children:_.jsxs("div",{className:"flex-1 sm:flex items-center gap-x-3 ",children:[_.jsxs("div",{className:"",children:["Score: ",x.score," / ",x.results.length," "]}),_.jsxs("div",{className:"",children:["Message: ",ca(x.level,15)]}),_.jsxs("div",{className:" ",children:["Date: ",x.date," (",` ${x.time}`,")"]}),_.jsxs("div",{className:"",children:["Time taken: ",B3(x.timeTaken)||"Unknown"]})]})}),!1]})]},`shadow-md history-item-${x.id}`)),_.jsx(Z3,{to:"/posts",children:_.jsx(Re,{data:{image:"redo",text:"Return Home"}})})]}):_.jsx(rf,{text:"No items"})]})},dF=()=>{const[t,e]=M.useState(0),n=()=>{const r=window.innerHeight,i=document.documentElement.scrollHeight,s=window.scrollY,o=i-r,a=s/o*100;e(a)};return M.useEffect(()=>(window.addEventListener("scroll",n),()=>{window.removeEventListener("scroll",n)}),[]),_.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-20",children:_.jsx("div",{style:{width:`${t}%`},className:"h-1 bg-blue-600"})})},fF=()=>{const{users:t,theme:e}=M.useContext(ce),n=An(),r=[{name:"Posts",image:"home",path:"/app/admin/posts"},{name:"Tests",image:"exam",path:"/app/admin/tests"},{name:"Users",image:"user",path:"/app/admin/users"}];return _.jsxs("div",{className:"p-5 grid gap-y-2",children:[_.jsx(nr,{}),r.map(i=>_.jsxs("button",{onClick:()=>{n(i.path)},className:`transition-all flex items-center gap-x-2 border  p-2 rounded-lg hover:shadow-md  hover:font-bold min-h-[70px] ${e==="light"?"border-gray-200 hover:bg-slate-100 hover:shadow-gray-500 ":"border-slate-500/70 hover:bg-slate-500/70 text-white"}`,children:[_.jsx("img",{className:"w-7 ",src:De(i.image)}),_.jsx("div",{children:i.name})]},i.name))]})},pF=["January","February","March","April","May","June","July","August","September","October","November","December"];function Wi(t){const n=new Date().getTime()-t,r=Math.floor(n/1e3),i=Math.floor(r/60),s=Math.floor(i/60),o=Math.floor(s/24),a=Math.floor(o/7),l=Math.floor(o/30),u=Math.floor(l/12),h=new Date(t),c=h.getFullYear(),d=h.getMonth(),f=h.getDate(),v=`${pF[d]} ${f}, ${c}`;if(u>0)return v;if(l>0)return`${l}m • ${v}`;if(a>0)return`${a}w • ${v}`;if(o>0)return`${o}d`;if(s>0)return`${s}h`;if(i>0)return`${i}min`;if(r>0)return`${r}s`}const sf=({options:t,left:e="-left-[102px]"})=>{const[n,r]=M.useState(!1),i=M.useRef(null),{theme:s}=M.useContext(ce);Ps(i,r);const o=()=>{r(!n)};return _.jsxs("button",{className:`relative rounded-full p-1 ${s==="light"?"bg-slate-100":"bg-slate-500/70"}`,onClick:o,ref:i,children:[_.jsx("img",{className:"w-6",src:De("moreOption")}),n&&_.jsx("div",{className:`border p-1 rounded-md  grid absolute ${e} bottom-0 w-[100px] ${s==="light"?"border-gray-200 bg-white":"border-gray-500/70 bg-slate-500"}`,children:t.map(a=>{if(a)return _.jsxs("button",{onClick:a.onClick,className:`flex rounded-md items-center gap-x-1 b  p-2 ${s==="light"?"hover:bg-slate-100":"hover:bg-slate-600"}`,children:[_.jsx("img",{className:"w-6",src:De(a.icon)}),_.jsx("p",{children:a.text})]},a.text)})})]})},mF=["January","February","March","April","May","June","July","August","September","October","November","December"],gF=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function iu(t){const n=new Date().getTime()-t,r=Math.floor(n/1e3),i=Math.floor(r/60),s=Math.floor(i/60),o=Math.floor(s/24),a=Math.floor(o/7),l=Math.floor(o/30),u=Math.floor(l/12),h=new Date(t),c=h.getFullYear(),d=h.getMonth(),f=h.getDate(),v=gF[h.getDay()],y=mF[d],w=`${y} ${f}, ${c}`,p=h.toLocaleTimeString([],{hour:"numeric",minute:"numeric",hour12:!0});if(u>0)return`${p} • ${w}`;if(l>0)return`${p} • ${y} ${f}`;if(a>0)return`${v}, ${p} • ${y} ${f}`;if(o>0)return`${v}, ${p}`;if(s>0)return p;if(i>0)return p;if(r>0)return p}const Q4=({post:t,collectionName:e})=>{const{id:n}=t,[r,i]=M.useState([]),[s,o]=M.useState([]),{users:a,theme:l}=M.useContext(ce),[u,h]=M.useState(!1),[c,d]=M.useState(!1),f=e==="posts",v=Mt(Pe(Oe,e,n),"comments"),y=Mt(Pe(Oe,e,n),"likes"),w=()=>wr(y,S=>{const k=S.docs.map(I=>({id:I.id,...I.data()})).sort((I,C)=>{var P,j;const A=new Date((P=I.timestamp)!=null&&P.seconds?I.timestamp.seconds*1e3:I.timestamp);return new Date((j=C.timestamp)!=null&&j.seconds?C.timestamp.seconds*1e3:C.timestamp)-A});i(k)}),p=()=>wr(v,S=>{const k=S.docs.map(I=>({id:I.id,...I.data()})).sort((I,C)=>{var P,j;const A=new Date((P=I.timestamp)!=null&&P.seconds?I.timestamp.seconds*1e3:I.timestamp);return new Date((j=C.timestamp)!=null&&j.seconds?C.timestamp.seconds*1e3:C.timestamp)-A});o(k)});M.useEffect(()=>{const b=w(),S=p();return()=>{b(),S()}},[]);const m=async()=>{try{const b=Mt(Oe,"notifications"),S={uid:ue.currentUser.uid,type:["like",f?"post":"test"],[f?"description":"testName"]:f?t.description:t.name,isReadBy:[],timestamp:Gn()};await Pi(b,S)}catch(b){console.log(b.message)}},E=()=>{let b=!1;return r.forEach(S=>{var k;S.uid===((k=ue==null?void 0:ue.currentUser)==null?void 0:k.uid)&&(b=!0)}),b},g=async()=>{try{const b=Pe(y,ue.currentUser.uid),S=E(),k={uid:ue.currentUser.uid,timestamp:Gn()};S?await ku(b):(await $x(b,k),m())}catch(b){console.log(b.message)}},T=E(),x=()=>{var S;return Us(a,(S=r[0])==null?void 0:S.uid)||null};return _.jsxs("div",{className:"mt-2",children:[_.jsxs("div",{className:"transition-all mb-1 flex justify-between",children:[_.jsx("button",{onClick:()=>{h(!u),d(!1)},className:`transition-all ${l==="light"?`${u?"bg-slate-200":"hover:bg-slate-200"}`:`${u?"bg-slate-500/70":"hover:bg-slate-500/70"}`}  p-1 rounded-lg`,children:x()?_.jsx("span",{children:r.length===1?x().name:`${x().name} and ${r.length-1} others`}):_.jsxs("span",{children:[r.length," ",r.length>1?"likes":"like"]})}),_.jsxs("button",{onClick:()=>{d(!c),h(!1)},className:`transition-all ${l==="light"?`${c?"bg-slate-200":"hover:bg-slate-200"}`:`${c?"bg-slate-500/70":"hover:bg-slate-500/70"}`}  p-1 rounded-lg`,children:[s.length," ",s.length>1?"comments":"comment"]})]}),_.jsxs("div",{className:`border-t pt-2 flex gap-x-2 ${l==="light"?"border-t-slate-300":"border-t-slate-500/70"}`,children:[_.jsx(Re,{data:{clickFn:g,image:T?"liked":"like",text:T?"Liked":"Like"}}),_.jsx(Re,{data:{clickFn:()=>{d(!c),h(!1)},image:"comment",text:"Comment"}})]}),u&&_.jsx(vF,{likes:r,users:a}),c&&_.jsx(yF,{isPost:f,post:t,id:n,comments:s,collectionName:e})]})},vF=({likes:t})=>{const{users:e}=M.useContext(ce);return _.jsx("div",{className:"mt-2 grid gap-y-2",children:t.map(n=>{const r=Us(e,n.uid);return _.jsxs("div",{className:"flex gap-x-2 items-center",children:[_.jsx(Hi,{image:r==null?void 0:r.image,name:r==null?void 0:r.name}),_.jsx("div",{children:r==null?void 0:r.name})]},`user-${r==null?void 0:r.uid}`)})})},yF=({post:t,isPost:e,comments:n,id:r,collectionName:i})=>{const[s,o]=M.useState(""),{users:a,theme:l,userData:u}=M.useContext(ce),h=30,c=0,[d,f]=M.useState(h),v=Mt(Pe(Oe,i,r),"comments"),[y,w]=M.useState(null),p=async()=>{try{const T=Mt(Oe,"notifications"),x={uid:ue.currentUser.uid,type:["comment",e?"post":"test"],[e?"description":"testName"]:e?t.description:t.name,isReadBy:[],comment:s.trim(),timestamp:Gn()};await Pi(T,x)}catch(T){console.log(T.message)}},m=async()=>{if(s.trim()){const T={uid:ue.currentUser.uid,text:s.trim(),timestamp:Gn()};await Pi(v,T),o(""),p()}},E=async()=>{const T=Pe(v,y);if(s.trim()){const x={text:s.trim(),editedTime:new Date().getTime()};await Jt(T,x),o(""),w(null)}},g=async T=>{const x=Pe(v,T);try{await ku(x)}catch(b){console.log(b.message)}};return _.jsxs("div",{className:"mt-2",children:[_.jsx("div",{className:"grid gap-y-2",children:n.slice(c,d).sort((T,x)=>{var k,I;const b=new Date((k=T.timestamp)!=null&&k.seconds?T.timestamp.seconds*1e3:T.timestamp),S=new Date((I=x.timestamp)!=null&&I.seconds?x.timestamp.seconds*1e3:x.timestamp);return b-S}).map(T=>{var k;const x=Us(a,T.uid);console.log(x);const b=T.uid===((k=ue==null?void 0:ue.currentUser)==null?void 0:k.uid),S=b&&{text:"Edit",icon:"editPencil",onClick:()=>{w(T.id),o(T.text)}};return _.jsxs("div",{className:"flex justify-between items-start",children:[_.jsxs("div",{className:"flex gap-x-1",children:[_.jsx("div",{children:_.jsx(Hi,{image:x==null?void 0:x.image,name:x==null?void 0:x.name})}),_.jsxs("div",{className:"max-w-[250px]",children:[_.jsxs("div",{className:`p-2  rounded-lg ${l==="light"?"bg-slate-100":"bg-slate-500/70 text-white"}`,children:[_.jsx("div",{className:"font-bold",children:x==null?void 0:x.name}),_.jsx("div",{children:T.text})]}),_.jsx("div",{className:`text-sm mt-1 ${l==="light"?"text-gray-600":"text-white"}`,children:T!=null&&T.editedTime?_.jsxs("span",{children:["edited ",iu(T.editedTime)]}):_.jsx("span",{children:iu(T.timestamp)})})]})]}),b||u!=null&&u.isAdmin?_.jsx(sf,{options:[S,{text:"Delete",icon:"deleteIcon",onClick:()=>g(T.id)}]}):""]},`${T.uid}-${T.id}`)})}),_.jsxs("div",{className:"mt-2 flex gap-x-1",children:[_.jsx("input",{autoFocus:!0,onChange:T=>o(T.target.value),value:s,className:`h-10 flex-1 rounded-lg pl-2 border ${l==="light"?"border-gray-300 focus:outline-blue-500":"outline-none bg-slate-500/70 border-slate-500/70"}`,placeholder:"Write a comment..."}),_.jsxs("div",{className:"flex gap-x-1",children:[y&&_.jsx(Re,{data:{image:"falseIcon",clickFn:()=>{w(null),o("")}}}),_.jsx(Re,{data:{clickFn:()=>{s.trim()&&(y?E():m())},image:"send"}})]})]})]})},_F=({t,takeTest:e})=>{var s;const{users:n,theme:r}=M.useContext(ce),i=Us(n,t.uid);return _.jsxs("div",{className:`flex flex-col justify-between min-h-60 border shadow-md  rounded-md bg-gradient-to-tr ${r==="light"?"border-blue-200 shadow-gray-200":"border-blue-200 text-white shadow-slate-500"}`,children:[_.jsxs("div",{className:"flex gap-x-2 mb-2 p-2",children:[_.jsx("img",{className:"size-10 rounded-full shadow-md object-cover",src:i.image}),_.jsxs("div",{children:[_.jsx("div",{className:"font-medium",children:i.name}),_.jsx("div",{className:` text-sm ${r==="light"?"text-gray-500 ":"text-white"}`,children:Wi((s=t.time)!=null&&s.seconds?t.time.seconds*1e3:t.time)})]}),_.jsxs("span",{className:`rounded-md flex items-center p-1 ${r==="light"?"bg-slate-100 ":"bg-slate-500/70 "}`,children:[t.quizzes.length,t.quizzes.length>1?" questions":" question"]})]}),t.image&&_.jsx("div",{className:"m-2 min-h-32",children:_.jsx("img",{className:"w-full",src:`images/tests/${t.image}`})}),_.jsxs("div",{className:`rounded-bl-lg rounded-br-lg border-t  p-2 pb-5 ${r==="light"?"border-t-slate-300":"border-t-slate-500/70"}`,children:[_.jsx("div",{className:"font-medium text-lg",children:t.name}),_.jsx("div",{className:" mb-2",children:t.description.trim()||"No description"}),_.jsx(Re,{data:{clickFn:()=>e(t),text:"Take the test"}}),_.jsx(Q4,{post:t,collectionName:"tests"})]})]})},wF=()=>{const{setCurrentTest:t,startTimer:e,users:n,theme:r,isLogin:i,posts:s,setPosts:o,tests:a,setTests:l}=M.useContext(ce),{page:u}=ym(),h=Xo(),c=An(),d=h.pathname==="/app/posts",f=h.pathname==="/app/tests",v=[{name:"Posts",active:d,image:"home",path:"/app/posts"},{name:"Tests",active:f,image:"exam",path:"/app/tests"}];Ko("posts",o,i),Ko("tests",l,i);const y=p=>{scrollTo({top:0}),t(p),e()},w=()=>{switch(u){case"posts":return _.jsx("div",{className:"grid gap-y-2 mb-2",children:s.length===0?_.jsx("div",{className:"h-[300px] flex flex-col justify-center items-center",children:_.jsx("p",{className:`text-center ${r==="light"?"":"text-white"}`,children:"No posts"})}):s.sort((p,m)=>{var T,x;const E=new Date((T=p.time)!=null&&T.seconds?p.time.seconds*1e3:p.time);return new Date((x=m.timestamp)!=null&&x.seconds?m.time.seconds*1e3:m.time)-E}).map(p=>{var E,g,T;const m=Us(n,p.uid);if(!p.draft)return _.jsxs("div",{className:`w-full border rounded-md shadow-md p-2 ${r==="light"?"border-blue-200 shadow-gray-200":"border-blue-200 text-white shadow-slate-500"}`,children:[_.jsxs("div",{className:"top-section flex gap-x-2 mb-2",children:[_.jsx("img",{className:"size-10 rounded-full shadow-md object-cover",src:m.image}),_.jsxs("div",{children:[_.jsx("div",{className:"font-medium",children:m.name}),_.jsx("div",{className:` text-sm ${r==="light"?"text-gray-500":"text-white"}`,children:Wi((E=p.time)!=null&&E.seconds?p.time.seconds*1e3:p.time)})]})]}),p.description&&_.jsx("div",{className:"mb-2",dangerouslySetInnerHTML:{__html:p.description}}),p.images.length!==0&&_.jsx("div",{className:"image grid gap-y-2",children:_.jsx(EF,{data:{post:p}})}),p.files&&((g=p==null?void 0:p.files)==null?void 0:g.length)!==0&&_.jsx(TF,{files:p.files}),(p==null?void 0:p.links)&&((T=p==null?void 0:p.links)==null?void 0:T.length)!==0&&_.jsx(xF,{links:p.links}),_.jsx(Q4,{post:p,collectionName:"posts"})]},`post-${p.id}`)})});case"tests":return _.jsx("div",{className:"grid gap-y-2 mb-2",children:a.length===0?_.jsx("div",{className:"h-[300px] flex flex-col justify-center items-center",children:_.jsx("p",{className:`text-center ${r==="light"?"":"text-white"}`,children:"No tests"})}):a.sort((p,m)=>{var T,x;const E=new Date((T=p.timestamp)!=null&&T.seconds?p.timestamp.seconds*1e3:p.timestamp);return new Date((x=m.timestamp)!=null&&x.seconds?m.timestamp.seconds*1e3:m.timestamp)-E}).map(p=>{if(p.isUploaded)return _.jsx(_F,{t:p,takeTest:y},`tests-${p.id}-${p.name}`)})})}};return _.jsxs("div",{children:[_.jsx(nr,{}),_.jsxs("div",{className:"grid p-5",children:[_.jsx("div",{className:"flex mb-2 -mt-5 justify-center",children:_.jsx("div",{className:`flex -mt-[2px] gap-x-1 w-2/3 justify-center rounded-bl-lg rounded-br-lg shadow-sm p-2 ${r==="light"?"bg-slate-50/50":"bg-slate-500/70"}`,children:v.map(p=>_.jsxs("button",{onClick:()=>c(p.path),className:`transition text-slate-700 shadow-sm rounded-lg border-solid flex font-bold gap-x-1 items-center p-2 pl-3 pr-3 ${r==="light"?`${p.active?" bg-blue-500/70":"hover:bg-slate-200 border-transparent"}`:`${p.active?" bg-blue-500/70":"hover:bg-slate-500 border-transparent"}`} font-bold text-md`,children:[_.jsx("img",{className:"w-6",src:De(p.image)}),_.jsx("div",{children:p.name})]},p.name))})}),w()]})]})},EF=({data:t})=>{const{post:e}=t,n=0,[r,i]=M.useState(4),[s,o]=M.useState(!0),a=e.images.slice(n,r),l=e.images.length-4,u=()=>{o(!1),i(e.images.length)};return a.map((h,c)=>_.jsxs("div",{className:"relative ",children:[_.jsx("img",{className:"w-full shadow-md min-h-48",src:h.imageURL,alt:h.name}),_.jsx("div",{className:"z-20 absolute right-1 top-1"}),c+1===4&&s&&l?_.jsx("div",{onClick:u,className:"z-10 absolute top-0 right-0 left-0 bottom-0 flex cursor-pointer items-center justify-center",children:_.jsxs("div",{className:"font-medium text-8xl text-white",children:["+",l]})}):""]},`post-${e.id}-image-${h.imageURL}`))},TF=({files:t})=>{const{theme:e}=M.useContext(ce);return _.jsx("div",{className:"grid gap-y-2 mt-2",children:t.map((n,r)=>_.jsx("a",{href:n.fileURL,download:n.name,target:"_blank",children:_.jsxs("div",{className:`p-1 cursor-pointer  min-h-14 rounded-md flex gap-x-1 items-center font-bold border  border-l-4 border-l-green-500 ${e==="light"?"bg-slate-50 border-gray-300 text-blue-600":"bg-slate-500/70 border-slate-500/70 text-white"}`,children:[_.jsx("img",{className:"w-7 ",src:De("download")}),_.jsxs("div",{children:[_.jsx("p",{className:"underline",children:n.name}),(n==null?void 0:n.size)&&_.jsxs("p",{children:[(n.size/(1024*1024)).toFixed(2)," MB"]})]})]})},`${r}-${n.fileURL}`))})},xF=({links:t})=>{const{theme:e}=M.useContext(ce);return _.jsx("div",{className:"grid gap-y-2 mt-2",children:t.map((n,r)=>_.jsx("a",{href:n.link,target:"_blank",children:_.jsxs("div",{className:`p-1 cursor-pointer  min-h-14 rounded-md flex ga-x-1 items-center font-bold border  border-l-4 border-l-green-500 ${e==="light"?"bg-slate-50 border-gray-300 text-blue-600":"bg-slate-500/70 border-slate-500/70 text-white"}`,children:[_.jsx("img",{className:"w-7 ",src:De("link")}),_.jsx("div",{children:_.jsx("p",{className:"underline",children:n.title})})]})},`${r}-${n.link}`))})},bF=()=>{const e=new Date().getFullYear(),{theme:n}=M.useContext(ce);return _.jsxs("footer",{className:`w-full flex flex-col items-center p-1 bg-slate-50 border-t  mt-auto ${n==="light"?"border-t-gray-100":"bg-slate-600 text-white border-t-slate-500"}`,children:[_.jsxs("div",{children:["SEA copyright 2015 - ",e]}),_.jsx("div",{children:"All rights reserved."}),_.jsx("div",{children:"Author: Than Aung Naing"})]})},Fh=({message:t,bgColor:e="bg-slate-200"})=>_.jsx("div",{className:"z-30 fixed flex justify-center bottom-5 left-0 right-0 ",children:_.jsx("div",{className:`${e} font-bold p-3 rounded-lg`,children:t})}),IF=({data:t})=>{const{isLogin:e,refreshUserData:n,setHeaderTitle:r,theme:i}=M.useContext(ce),[s,o]=M.useState(""),[a,l]=M.useState(""),[u,h]=M.useState(""),[c,d]=M.useState(null),[f,v]=M.useState("login"),y=An();let w;document.title="Login",M.useEffect(()=>{e&&y("/"),r("STAR EDUCATION ACADEMY")},[]),bn("auto");const p=async(x,b,S,k)=>{try{const I=Pe(Oe,"users",ue.currentUser.uid),C=await jx(I),A={name:x,email:b,password:S,image:k,isAdmin:!1,createdAt:new Date().getTime()};C.exists()||await $x(I,A),n()}catch(I){console.log(I.message)}},m=async()=>{try{await u8(ue,tF),p(ue.currentUser.displayName,ue.currentUser.email,"",ue.currentUser.photoURL)}catch(x){clearTimeout(w),d(x.message),w=setTimeout(()=>{d(null)},3e3)}},E=async()=>{try{await F7(ue,a,u)}catch(x){clearTimeout(w),d(x.message),w=setTimeout(()=>{d(null)},3e3)}},g=async()=>{try{await j7(ue,a,u),p(s,a,u,null)}catch(x){clearTimeout(w),d(x.message),w=setTimeout(()=>{d(null)},3e3)}},T=()=>{switch(f){case"login":return _.jsxs("div",{children:[_.jsx("div",{className:`text-md rounded-md font-medium  p-1 pl-2 border-b  ${i==="light"?"text-lime-700 bg-lime-100/70 border-b-lime-300":"text-white bg-slate-500/70 border-slate-500/70"}`,children:"You must log in first."}),_.jsxs("div",{className:"mt-10 flex flex-col items-center ",children:[_.jsx("div",{className:"text-lg font-medium text-blue-500",children:"Log in"}),_.jsxs("div",{className:"grid p-2 w-5/6 sm:w-3/5 lg:w-4/6 gap-y-2",children:[_.jsx(Oa,{data:{type:"text",value:a,setValue:l,placeholder:"Enter your email"}}),_.jsx(Oa,{data:{type:"password",value:u,setValue:h,placeholder:"Enter your password"}}),c&&_.jsx(Fh,{message:c,bgColor:"bg-red-300"}),_.jsx("button",{onClick:E,className:"transition-all bg-blue-400 text-white font-medium h-10 rounded-lg border border-transparent hover:border-lime-500",children:"Log in"})]}),_.jsx(Y_,{}),_.jsx("div",{children:_.jsx(Re,{data:{clickFn:m,image:"google",text:"Sign in with Google"}})}),_.jsx(Y_,{}),_.jsx("div",{children:_.jsx(Re,{data:{clickFn:()=>v("signup"),text:"Create new Account"}})})]})]});case"signup":return _.jsxs("div",{children:[_.jsx("div",{className:`text-md rounded-md font-medium  p-1 pl-2 border-b  ${i==="light"?"text-lime-700 bg-lime-100/70 border-b-lime-300":" bg-slate-500/70 border-slate-500/70 text-white"}`,children:"You must log in first."}),_.jsxs("div",{className:"mt-10 flex flex-col items-center ",children:[_.jsx("div",{className:"text-lg font-medium text-blue-500",children:"Create new account"}),_.jsxs("div",{className:"grid p-2 w-5/6 sm:w-3/5 lg:w-4/6 gap-y-2",children:[_.jsx(Oa,{data:{type:"text",value:s,setValue:o,placeholder:"Enter your name"}}),_.jsx(Oa,{data:{type:"text",value:a,setValue:l,placeholder:"Enter your email"}}),_.jsx(Oa,{data:{type:"password",value:u,setValue:h,placeholder:"Enter your password"}}),c&&_.jsx(Fh,{message:c,bgColor:"bg-red-300"}),_.jsx("button",{onClick:()=>{s.trim()&&g()},className:"transition-all bg-blue-400 text-white font-medium h-10 rounded-lg border border-transparent hover:border-lime-500",children:"Sign up"}),_.jsx("div",{children:_.jsx(Re,{data:{clickFn:()=>v("login"),text:"Back",image:"back"}})})]})]})]})}};return _.jsxs("div",{className:"Login mb-5",children:[_.jsx(nr,{}),T()]})},Oa=({data:t})=>{const{value:e,setValue:n,placeholder:r,type:i}=t,{theme:s}=M.useContext(ce);return _.jsx("input",{type:i,value:e,onChange:o=>n(o.target.value),className:`h-10  pl-1 border rounded-lg   ${s==="light"?"border-gray-200 focus:outline-blue-500":"bg-slate-500/70 outline-none border-slate-500/70 text-white"}`,placeholder:r})},Y_=()=>{const{theme:t}=M.useContext(ce);return _.jsx("div",{className:`mt-2 mb-2 ${t==="light"?"":"text-white"}`,children:"OR"})},SF=()=>{const{userData:t,refreshUserData:e,theme:n,setTheme:r,isOnline:i}=M.useContext(ce),[s,o]=M.useState(t.name||""),[a,l]=M.useState(null),[u,h]=M.useState(!1),c=M.useRef(null),[d,f]=M.useState(null),v=async()=>{var E;if(s.trim())try{const g=Pe(Oe,"users",(E=ue==null?void 0:ue.currentUser)==null?void 0:E.uid),T={name:s.trim()};await Jt(g,T),e(),m("Updated name successfully!")}catch(g){m(g.message)}};Ps(c,h);const y=async()=>{var g;const E=Ga(Qa,`profile/${ue.currentUser.uid}/${t.name}-${a.name}`);try{const T=Pe(Oe,"users",(g=ue==null?void 0:ue.currentUser)==null?void 0:g.uid);m("Uploading image...");const x=await t2(E,a),S={image:await n2(x.ref)};await Jt(T,S),l(null),m("Updated profile picture successfully!")}catch(T){m(T.message)}},w=()=>{a&&y(),s.trim()!==t.name&&v()};let p;const m=(E,g=3e3)=>{clearTimeout(p),f(E),p=setTimeout(()=>{f(null)},g)};return _.jsxs("div",{className:"Settings p-2",children:[_.jsx(nr,{}),_.jsxs("div",{className:"p-2",children:[_.jsxs("div",{className:"relative size-20",children:[_.jsx(Hi,{name:t.name||s||"User",image:a?URL.createObjectURL(a):t.image,size:"size-full",fontSize:"text-3xl"}),_.jsx("input",{type:"file",accept:"image/*",id:"imageInput",className:"hidden",onChange:E=>l(E.target.files[0])}),_.jsx("label",{htmlFor:"imageInput",className:` p-1 rounded-full absolute -bottom-1 -right-1 cursor-pointer ${n==="light"?"bg-gray-200":"bg-slate-500/70"}`,children:_.jsx("img",{className:"w-5",src:De("edit")})})]}),_.jsxs("div",{className:`${n==="light"?"":"text-white"}`,children:["Hi, ",ca(t.name||s||"User",25),"!"]})]}),_.jsxs("div",{className:`grid gap-y-2 border  p-2 rounded-md ${n==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[_.jsxs("div",{children:[_.jsx("div",{children:"Name"}),_.jsxs("div",{ref:c,className:"flex gap-x-2 items-center",children:[!u&&_.jsx("div",{children:s||t.name||"User"}),u&&_.jsx("input",{autoFocus:!0,value:s,onChange:E=>o(E.target.value),className:` ${n==="light"?"focus:outline-blue-500":"bg-slate-500/70 outline-none"}`,placeholder:"Enter your full name"}),_.jsx("button",{onClick:()=>{h(!u)},className:` p-1 rounded-full cursor-pointer ${n==="light"?"bg-gray-200":"bg-slate-500/70"}`,children:_.jsx("img",{className:"w-5",src:De(u?"save":"edit")})})]})]}),_.jsxs("div",{children:[_.jsx("div",{children:"Email"}),_.jsx("div",{children:t.email||"example@gmail.com"})]})]}),_.jsx("div",{className:"flex gap-x-2 mt-2",children:a||s.trim()!==t.name?_.jsx(Re,{data:{clickFn:()=>{i?w():console.log("You are offline")},image:"save",text:"Update"}}):""}),d&&_.jsx(Fh,{message:d}),_.jsx("div",{className:`mt-4 ${n==="light"?"":"text-white"} md:hidden`,children:_.jsx(G4,{setTheme:r,theme:n})})]})},$h=({data:t})=>{const{text:e,onChangeFn:n,value:r,placeholder:i}=t,{theme:s}=M.useContext(ce);return _.jsxs("div",{className:"grid items-center gap-y-2",children:[_.jsx("div",{className:"font-medium",children:e}),_.jsx("input",{onChange:n,value:r,className:`border rounded-md h-10 pl-1 pr-1  w-full outline-2  ${s==="light"?"focus:outline-blue-300 border-gray-300":"border-slate-500/70 outline-none bg-slate-500/70"}`,placeholder:i})]})},CF=({data:t})=>{const{close:e}=t,{theme:n}=M.useContext(ce),[r,i]=M.useState(""),[s,o]=M.useState(""),a=r.trim(),l=Mt(Oe,"tests"),u=async d=>{try{await Pi(l,d)}catch(f){console.log(f.message)}},h=()=>{const d={uid:ue.currentUser.uid,isUploaded:!1,name:r,description:s,quizzes:[],gradingRules:[],time:Gn()};u(d),e()},c=()=>{a&&h()};return M.useEffect(()=>(bn("hidden"),()=>{bn("auto")}),[]),_.jsx("div",{className:"fixed flex items-center z-20 bg-black/60 justify-center top-0 left-0 right-0 bottom-0",children:_.jsxs("div",{className:`border w-4/5 sm:w-4/5 md:w-3/5 lg:w-2/5 rounded-md p-10 pb-5 grid gap-y-5 ${n==="light"?"bg-white border-gray-300":"bg-slate-600 border-slate-500/70 text-white"}`,children:[_.jsxs("div",{className:"grid gap-y-2",children:[_.jsx($h,{data:{text:"Name",onChangeFn:d=>i(d.target.value),value:r,placeholder:"Type test name here"}}),_.jsx($h,{data:{text:"Description",onChangeFn:d=>o(d.target.value),value:s,placeholder:"Type description here"}})]}),_.jsxs("div",{className:"flex items-center gap-x-3 justify-center",children:[_.jsx(Re,{data:{clickFn:c,text:"Save",image:"save"}}),_.jsx(Re,{data:{clickFn:e,text:"Cancel"}})]})]})})},AF=({data:t})=>{const{options:e,value:n,setValue:r}=t,{theme:i}=M.useContext(ce),[s,o]=M.useState(!1),a=M.useRef(null);Ps(a,o);const l=()=>{o(!s)},u=h=>{r(h)};return _.jsxs("div",{ref:a,className:"w-full relative font-padauk",children:[_.jsxs("button",{onClick:l,className:`border flex items-center rounded-lg justify-between h-10 w-full cursor-pointer hover:border-blue-500 shadow-sm gap-x-2 px-2 ${i==="light"?"border-gray-300 hover:bg-gray-50":"hover:bg-slate-500/70 text-white border-slate-500/70"}`,children:[_.jsx("span",{children:n||"Select correct answer"}),_.jsx("img",{className:"h-6 w-6",src:De(s?"up":"down")})]}),s&&e.length!==0?_.jsx("div",{className:`absolute grid gap-y-1 min-w-full p-2 rounded-md border -top-40 ${i==="light"?"border-gray-200 bg-white":"text-white bg-slate-500/70 border-slate-500/70"}`,children:e.map(h=>_.jsx("div",{onClick:()=>{l(),u(h)},className:`p-1 cursor-pointer rounded-lg transition-all ${i==="light"?`${h===n?"bg-black font-medium text-white ":"hover:bg-gray-200"}`:`${h===n?"bg-slate-600 font-medium text-white ":"hover:bg-slate-600"}`}`,children:h},`choice-${h}`))}):""]})},oi=({data:t})=>{const{choice:e,handleFn:n,value:r,placeholder:i}=t,{theme:s}=M.useContext(ce);return _.jsxs("div",{className:"grid gap-y-2 font-padauk",children:[_.jsx("div",{className:`font-medium ${s==="light"?"":"text-white"}`,children:e}),_.jsx("input",{onChange:o=>n(e,o),value:r,className:` w-full border rounded-md h-10 pl-1 pr-1  ${s==="light"?"focus:outline-blue-500 border-gray-300":"text-white outline-none border-slate-500/70 bg-slate-600"}`,placeholder:i})]})},kF=({data:t})=>{const{cancel:e,quizzes:n,setQuizzes:r,editData:i,clearEditData:s}=t,{theme:o}=M.useContext(ce),[a,l]=M.useState(i?i.question:""),[u,h]=M.useState(i?i.choices[0]:""),[c,d]=M.useState(i?i.choices[1]:""),[f,v]=M.useState(i?i.choices[2]:""),[y,w]=M.useState(i?i.choices[3]:""),[p,m]=M.useState(i?i.answer:"");let E=[];const g=u.trim()&&c.trim()&&f.trim()&&y.trim(),T=a.trim()&&u.trim()&&c.trim()&&f.trim()&&y.trim()&&p.trim();g&&(E=[u,c,f,y]);const x=(A,N)=>{A.toLowerCase()==="question"?l(N.target.value):m(N.target.value)},b=()=>{let A,N;T&&(A={id:n.length===0?1:n[n.length-1].id+1,question:a,choices:E,answer:p},N=[...n,A],r(N),dp(),e())},S=()=>{const A=i.id,N={id:A,question:a,choices:E,answer:p},P=n.map(j=>A===j.id?N:j);r(P),e(),s()},k=(A,N)=>{A.toLowerCase()==="choice 1"?h(N.target.value):A.toLowerCase()==="choice 2"?d(N.target.value):A.toLowerCase()==="choice 3"?v(N.target.value):w(N.target.value)},I=()=>{i?S():b()},C=()=>{e(),s()};return M.useEffect(()=>(bn("hidden"),()=>{bn("auto")}),[]),_.jsx("div",{className:"fixed flex items-center z-20 bg-black/60 justify-center top-0 left-0 right-0 bottom-0",children:_.jsxs("div",{className:`border w-5/6 sm:w-4/5 md:w-3/5 lg:w-2/5 grid gap-y-2  p-3  top-0 left-0 right-0 bottom-0 rounded-lg relative ${o==="light"?"bg-white border-gray-200":"text-white border-slate-500/70 bg-slate-600"}`,children:[_.jsx("div",{className:`top-1 shadow-md border rounded-full right-1 h-9 w-9 text-white font-medium flex justify-center absolute items-center ${o==="light"?"bg-black border-gray-200":"bg-slate-500/70 border-slate-600"}`,children:i?i.number:n.length+1}),_.jsxs("div",{className:"grid gap-y-2",children:[_.jsx(oi,{data:{handleFn:x,value:a,choice:"Question",placeholder:"Enter question"}}),_.jsx(oi,{data:{handleFn:k,value:u,choice:"Choice 1",placeholder:"Enter choice 1"}}),_.jsx(oi,{data:{handleFn:k,value:c,choice:"Choice 2",placeholder:"Enter choice 2"}}),_.jsx(oi,{data:{handleFn:k,value:f,choice:"Choice 3",placeholder:"Enter choice 3"}}),_.jsx(oi,{data:{handleFn:k,value:y,choice:"Choice 4",placeholder:"Enter choice 4"}}),_.jsxs("div",{className:"flex items-center gap-x-5",children:[_.jsx("div",{className:"font-medium",children:"Answer"}),_.jsx(AF,{data:{options:E,value:p,setValue:m}})]})]}),_.jsxs("div",{className:"flex justify-end gap-x-2",children:[_.jsx(Re,{data:{clickFn:I,text:"Save",image:"save"}}),_.jsx(Re,{data:{clickFn:C,text:"Cancel"}})]})]})})},NF=({data:t})=>{const{theme:e}=M.useContext(ce),{testName:n,numbers:r,changePage:i}=t;return _.jsx("div",{className:`text-lg p-1 font-medium sticky top-0 z-10 flex justify-between items-center ${e==="light"?"":"text-white"}`,children:_.jsxs("div",{className:"flex items-center gap-x-2",children:[_.jsx(Ue,{data:{clickFn:()=>i("test"),image:"back"}}),_.jsxs("div",{children:[n,_.jsxs("span",{className:"text-sm",children:[" • "," ",r," ",r>1?"questions":"question"]})]})]})})},RF=({data:t})=>{const{quizzes:e,editQuestion:n,askToDelete:r,add:i,changePage:s}=t,{theme:o}=M.useContext(ce);return _.jsxs("div",{className:"grid gap-y-2",children:[_.jsx("div",{className:`pl-1 font-medium ${o==="light"?"":"text-white"}`,children:"Questions"}),e.map((a,l)=>_.jsxs("div",{className:`border font-padauk p-2 relative ${o==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[_.jsxs("div",{className:"absolute bottom-2 right-2 flex items-center gap-x-2",children:[_.jsx(Ue,{data:{clickFn:()=>n(a,l),image:"edit"}}),_.jsx(Ue,{data:{clickFn:()=>r(a.id),image:"trash"}})]}),_.jsxs("div",{className:"flex items-center justify-between gap-x-2",children:[_.jsx("div",{className:"overflow-x-auto p-0.5 flex-1",children:a.question}),_.jsx("div",{className:`top-0 shadow-md border rounded-full right-1 h-9 w-9 text-white font-medium flex justify-center absolute items-center ${o==="light"?"bg-black border-gray-200":"bg-slate-500/70 border-slate-600"}`,children:l+1})]}),_.jsx("div",{className:"pl-2 pt-2 grid gap-y-1",children:a.choices.map((u,h)=>_.jsxs("div",{className:"flex gap-x-2",children:[_.jsx("div",{className:`w-8 flex h-8 items-center  justify-center text-white font-medium rounded-md ${o==="light"?"bg-black":"bg-slate-500/70"}`,children:h+1}),_.jsx("div",{className:"flex-1",children:u})]},`choice-${l}-${h}`))})]},`question-${l}`)),_.jsx("div",{className:"flex justify-center sticky bottom-5",children:_.jsx(Ue,{data:{clickFn:i,image:"add"}})})]})},PF=({data:t})=>{const{currentTest:e,setCurrentTest:n,setIsRulesAdding:r,setEditData:i}=t,{theme:s}=M.useContext(ce),{gradingRules:o}=e,[a,l]=M.useState(null),u=v=>{const y=o.filter(p=>p.id!==v),w={...e,gradingRules:y};n(w)},h=v=>{l(v)},c=v=>{i(v),r(!0)},d=()=>{u(a),l(null)},f=()=>{l(null)};return _.jsxs("div",{className:"grid gap-y-3",children:[_.jsx("div",{className:`pl-1 font-medium ${s==="light"?"":"text-white"}`,children:"Grading Rules"}),a&&_.jsx(Oo,{data:{yesButton:d,noButton:f,text:"Are you sure to delete?"}}),o.map((v,y)=>_.jsxs("div",{className:`flex font-padauk items-center justify-between border  p-2 ${s==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[_.jsxs("div",{className:"grid flex-1 grid-cols-3 justify-between mr-10",children:[_.jsx(m0,{data:{text:"From",value:v.from}}),_.jsx(m0,{data:{text:"To",value:v.to}}),_.jsx(m0,{data:{text:"Level",value:v.level}})]}),_.jsxs("div",{className:"flex items-center gap-x-1 h-full ",children:[_.jsx(Ue,{data:{clickFn:()=>c(v),image:"edit"}}),_.jsx(Ue,{data:{clickFn:()=>h(v.id),image:"trash"}})]})]},`rule-${y}-${v.from}-${v.to}-${v.level}`)),_.jsx("div",{className:"flex justify-center sticky bottom-5",children:_.jsx(Ue,{data:{clickFn:()=>r(!0),image:"add"}})})]})},m0=({data:t})=>{const{text:e,value:n}=t,{theme:r}=M.useContext(ce);return _.jsxs("div",{className:"grid gap-y-1",children:[_.jsx("div",{className:"font-medium",children:e}),_.jsx("div",{className:`font-medium max-h-10 ${r==="light"?"text-slate-600":"text-white"}`,children:typeof n=="string"?ca(n,15):n})]})},OF=({data:t})=>{const{currentTest:e,setCurrentTest:n,editData:r,setEditData:i,setIsRulesAdding:s}=t,{theme:o}=M.useContext(ce),{gradingRules:a}=e,[l,u]=M.useState(r?r.from:null),[h,c]=M.useState(r?r.to:null),[d,f]=M.useState(r?r.level:""),v=l&&h&&d.trim(),y=()=>{const g={id:a.length===0?1:a[a.length-1].id+1,from:Number(l),to:Number(h),level:d},T={...e,gradingRules:[...a,g]};n(T)},w=()=>{const g=r.id,T={id:g,from:Number(l),to:Number(h),level:d},x=a.map(S=>g===S.id?T:S),b={...e,gradingRules:x};n(b)},p=()=>{s(!1),i(null)},m=()=>{v&&(r?w():y(),p())},E=(g,T)=>{const x=T.target.value;g.toLowerCase()==="from"?u(x):g.toLowerCase()==="to"?c(x):f(x)};return M.useEffect(()=>(bn("hidden"),()=>{bn("auto")}),[]),_.jsx("div",{className:"fixed z-20 bg-black/50 top-0 right-0 left-0 bottom-0 flex justify-center items-center",children:_.jsxs("div",{className:`border w-5/6 sm:w-4/5 md:w-3/5 lg:w-2/5 grid gap-y-2 p-3  top-0 left-0 right-0 bottom-0 rounded-lg relative ${o==="light"?"border-gray-200 bg-white":"text-white bg-slate-600 border-slate-500/70"}`,children:[_.jsx(oi,{data:{handleFn:E,value:l!==null?l:"",choice:"From",placeholder:"Enter 'from' value"}}),_.jsx(oi,{data:{handleFn:E,value:h!==null?h:"",choice:"To",placeholder:"Enter 'to' value"}}),_.jsx(oi,{data:{handleFn:E,value:d,choice:"Level",placeholder:"Enter level"}}),_.jsxs("div",{className:"flex justify-end gap-x-2",children:[_.jsx(Re,{data:{clickFn:m,text:"Save",image:"save"}}),_.jsx(Re,{data:{clickFn:p,text:"Cancel"}})]})]})})},X_=({data:t})=>{const{currentTest:e,setCurrentTest:n,title:r}=t,{theme:i}=M.useContext(ce),{description:s,name:o}=e,[a,l]=M.useState(r==="Description"?s:o),[u,h]=M.useState(!1),c=y=>{l(y.target.value)},d=()=>{if(r==="Description"){const y={...e,description:a};n(y)}else{const y={...e,name:a};n(y)}},f=()=>{d(),h(!1)},v=()=>{h(!1),l(r==="Description"?s:o)};return _.jsxs("div",{className:"grid gap-y-2",children:[_.jsx("div",{className:`font-medium ${i==="light"?"":"text-white"}`,children:r}),u?_.jsx("textarea",{autoFocus:!0,placeholder:`Type ${r.toLowerCase()} here`,onChange:c,className:`p-1 border border-gray-200 outline-none ${i==="light"?"":"text-white bg-slate-600"}`,value:a}):_.jsx("div",{className:`text-gray-500 p-1 ${i==="light"?"":"text-white"}`,children:a||"No description"}),u?_.jsxs("div",{className:"flex gap-x-2",children:[_.jsx(Ue,{data:{clickFn:f,image:"save"}}),_.jsx(Ue,{data:{clickFn:v,image:"falseIcon"}})]}):_.jsx(Ue,{data:{clickFn:()=>h(!0),image:"edit"}})]})},LF=({data:t})=>{const{setHeaderTitle:e}=M.useContext(ce),{setPage:n,currentTest:r,setCurrentTest:i}=t,[s,o]=M.useState(!1),[a,l]=M.useState(!1),[u,h]=M.useState(r.quizzes),[c,d]=M.useState(null),[f,v]=M.useState(null);M.useEffect(()=>{e(r.name)});const y=async(A,N)=>{try{const P=Pe(Oe,"tests",A);await Jt(P,N)}catch(P){console.log(P.message)}};M.useEffect(()=>{w()},[r,u]);const w=()=>{y(r.id,{...r,quizzes:u})},p=()=>{o(!0)},m=()=>{o(!1),v(null)},E=A=>{v(A)},g=()=>{b(f),v(null)},T=()=>{v(null)},x=A=>{n(A)},b=A=>{const N=u.filter(P=>P.id!==A);h(N)},S=(A,N)=>{const P={...A,number:N+1};d(P),p()},k=()=>{d(null)},I={testName:r.name,numbers:u.length,changePage:x},C={quizzes:u,editQuestion:S,askToDelete:E,add:p};return _.jsxs("div",{className:"grid gap-y-2 z-65 p-5",children:[_.jsx(NF,{data:I}),_.jsx(uo,{}),_.jsx(X_,{data:{title:"Test Name",currentTest:r,setCurrentTest:i}}),_.jsx(X_,{data:{title:"Description",currentTest:r,setCurrentTest:i}}),_.jsx(uo,{}),_.jsx(PF,{data:{currentTest:r,setEditData:d,setCurrentTest:i,setIsRulesAdding:l}}),_.jsx(uo,{}),_.jsx(RF,{data:C}),s&&_.jsx(kF,{data:{cancel:m,setQuizzes:h,quizzes:u,editData:c,clearEditData:k}}),a&&_.jsx(OF,{data:{currentTest:r,setCurrentTest:i,editData:c,setEditData:d,setIsRulesAdding:l}}),f&&_.jsx(Oo,{data:{yesButton:g,noButton:T,text:"Are you sure to delete ?"}}),_.jsx(uo,{})]})},p1=({text:t,length:e})=>{const n=An(),{theme:r}=M.useContext(ce);return _.jsxs("div",{className:`flex items-center gap-x-1 mb-2 ${r==="light"?"":"text-white"}`,children:[_.jsx(Ue,{data:{clickFn:()=>n("/admin"),image:"back"}}),_.jsxs("p",{children:[t," (",e,")"]})]})},DF=()=>{const[t,e]=M.useState("test"),{theme:n,isLogin:r,tests:i,setTests:s}=M.useContext(ce),[o,a]=M.useState({}),[l,u]=M.useState(!1),[h,c]=M.useState(!1),[d,f]=M.useState(null);Ko("tests",s,r),M.useEffect(()=>(En(),En()),[]);const v=b=>{a(b),e("editTest")},y=b=>{f(b),c(!0)},w=async b=>{const S=Pe(Oe,"tests",b.id);await Jt(S,{isUploaded:!b.isUploaded})},p=()=>{T(d),f(null),c(!1)},m=()=>{c(!1)},E=()=>{u(!0)},g=()=>{u(!1)},T=async b=>{try{const S=Pe(Oe,"tests",b);await ku(S)}catch(S){console.log(S.message)}};return(()=>{switch(t){case"test":return _.jsxs("div",{className:"p-5 grid gap-y-2",children:[_.jsx("div",{className:"flex justify-between",children:_.jsx(p1,{text:"Tests",length:i.length})}),l&&_.jsx(CF,{data:{close:g}}),h&&_.jsx(Oo,{data:{yesButton:p,noButton:m,text:"Are you sure to delete ?"}}),_.jsx("div",{className:"grid gap-y-2",children:i.map(b=>_.jsxs("div",{className:`flex items-center border p-2 rounded-md min-h-[100px] ${n==="light"?"border-gray-100":"border-slate-500/70 text-white"}`,children:[_.jsxs("div",{className:"flex flex-1 gap-x-2 items-center",children:[_.jsx("input",{checked:b.isUploaded,onChange:()=>w(b),className:"size-6",type:"checkbox"}),_.jsxs("div",{children:[_.jsx("div",{className:"font-medium",children:b.name}),_.jsxs("div",{className:`text-sm ${n==="light"?"text-gray-500":"text-white"}`,children:[b.quizzes.length,b.quizzes.length>1?" questions":" question",b.isUploaded?" (Uploaded)":" (Not uploaded)"]})]})]}),_.jsx("div",{className:"flex gap-x-2",children:_.jsx(sf,{options:[{text:"Edit",icon:"editPencil",onClick:()=>{v(b)}},{text:"Delete",icon:"deleteIcon",onClick:()=>y(b.id)}]})})]},`tests-${b.id}`))}),_.jsx("div",{children:_.jsx(Re,{data:{clickFn:E,text:"New Test",image:"add"}})})]});case"editTest":return _.jsx(LF,{data:{setPage:e,currentTest:o,setCurrentTest:a}})}})()},MF=()=>{const{setUserData:t,users:e,theme:n}=M.useContext(ce);M.useEffect(()=>(En(),En()),[]);const r=An(),i=o=>{t(o),r("/app/posts")},s=async o=>{const a=Pe(Oe,"users",o.uid);await Jt(a,{isAdmin:!o.isAdmin})};return _.jsxs("div",{className:"mt-2 p-5",children:[_.jsx(p1,{text:"Users",length:e==null?void 0:e.length}),_.jsx("div",{className:"mt-2 grid gap-y-2",children:e.map(o=>{var a,l,u,h,c;return _.jsxs("div",{className:`hover:border-blue-300 border p-2  ${n==="light"?`hover:bg-slate-50 ${((a=ue==null?void 0:ue.currentUser)==null?void 0:a.uid)===o.uid?"bg-slate-50 border-blue-300 ":"border-gray-200"}`:`hover:bg-slate-500/70 text-white ${((l=ue==null?void 0:ue.currentUser)==null?void 0:l.uid)===o.uid?" border-blue-300 bg-slate-500/70":"border-slate-500/70 "}`}`,children:[_.jsxs("div",{className:"flex items-center justify-between mb-2",children:[_.jsxs("div",{className:"flex w-5/6 gap-x-2 items-center",children:[_.jsx(Hi,{image:o.image,name:o.name}),_.jsxs("div",{children:[_.jsxs("div",{className:"font-medium",children:[o.name," ",_.jsxs("span",{className:`${o!=null&&o.isAdmin?"text-blue-500":"text-white"}`,children:["(",o!=null&&o.isAdmin?"admin":"user",")"," ",((u=ue==null?void 0:ue.currentUser)==null?void 0:u.uid)===o.uid?"(You)":""]})]}),_.jsx("div",{className:"text-md ",children:o.email}),_.jsxs("div",{className:"text-md",children:["Created: ",Wi(o.createdAt)]}),_.jsx("div",{className:"text-md font-medium text-lime-600",children:"History: Unknown"})]})]}),((h=ue==null?void 0:ue.currentUser)==null?void 0:h.uid)!==o.uid&&_.jsx(Ue,{data:{clickFn:()=>i(o),image:"review"}})]}),((c=ue==null?void 0:ue.currentUser)==null?void 0:c.uid)!==o.uid&&_.jsx(Re,{data:{image:"admin",clickFn:()=>s(o),text:o.isAdmin?"Remove from admin":"Set as admin"}})]},o.uid)})})]})},jF=({data:t,children:e})=>{const{setValue:n}=t,{theme:r}=M.useContext(ce),i=M.useRef(null);return Ps(i,n),M.useEffect(()=>(bn("hidden"),()=>{bn("auto")}),[]),_.jsx("div",{className:"fixed flex items-center z-20 bg-black/60 justify-center top-0 left-0 right-0 bottom-0 ",children:_.jsx("div",{ref:i,className:`w-4/5 sm:w-3/5 md:w-2/5 p-5 min-h-40 grid gap-y-3 rounded-md items-center border  ${r==="light"?"border-gray-300 bg-white":"border-slate-500/70 text-white bg-slate-600"}`,children:e})})},FF=({data:t})=>{const{links:e,setLinks:n,setIsLinkAdding:r}=t,[i,s]=M.useState(""),[o,a]=M.useState(""),l=i.trim()&&o.trim(),u=()=>{if(l){const h={id:e.length===0?1:e[e.length-1].id+1,title:i.trim(),link:o.trim()},c=[...e,h];n(c),r(!1)}};return _.jsxs(jF,{data:{setValue:r},children:[_.jsxs("div",{className:"grid gap-y-2",children:[_.jsx($h,{data:{text:"Title",onChangeFn:h=>s(h.target.value),value:i,placeholder:"Enter title..."}}),_.jsx($h,{data:{text:"Link",onChangeFn:h=>a(h.target.value),value:o,placeholder:"Enter link..."}})]}),_.jsx("div",{children:_.jsx(Re,{data:{image:"add",text:"Add Link",clickFn:u}})})]})};function $F(){this.__data__=[],this.size=0}var VF=$F;function UF(t,e){return t===e||t!==t&&e!==e}var Y4=UF,BF=Y4;function qF(t,e){for(var n=t.length;n--;)if(BF(t[n][0],e))return n;return-1}var of=qF,zF=of,HF=Array.prototype,WF=HF.splice;function KF(t){var e=this.__data__,n=zF(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():WF.call(e,n,1),--this.size,!0}var GF=KF,QF=of;function YF(t){var e=this.__data__,n=QF(e,t);return n<0?void 0:e[n][1]}var XF=YF,JF=of;function ZF(t){return JF(this.__data__,t)>-1}var e$=ZF,t$=of;function n$(t,e){var n=this.__data__,r=t$(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var r$=n$,i$=VF,s$=GF,o$=XF,a$=e$,l$=r$;function ha(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ha.prototype.clear=i$;ha.prototype.delete=s$;ha.prototype.get=o$;ha.prototype.has=a$;ha.prototype.set=l$;var af=ha,u$=af;function c$(){this.__data__=new u$,this.size=0}var h$=c$;function d$(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var f$=d$;function p$(t){return this.__data__.get(t)}var m$=p$;function g$(t){return this.__data__.has(t)}var v$=g$,y$=typeof gn=="object"&&gn&&gn.Object===Object&&gn,X4=y$,_$=X4,w$=typeof self=="object"&&self&&self.Object===Object&&self,E$=_$||w$||Function("return this")(),Gr=E$,T$=Gr,x$=T$.Symbol,m1=x$,J_=m1,J4=Object.prototype,b$=J4.hasOwnProperty,I$=J4.toString,La=J_?J_.toStringTag:void 0;function S$(t){var e=b$.call(t,La),n=t[La];try{t[La]=void 0;var r=!0}catch{}var i=I$.call(t);return r&&(e?t[La]=n:delete t[La]),i}var C$=S$,A$=Object.prototype,k$=A$.toString;function N$(t){return k$.call(t)}var R$=N$,Z_=m1,P$=C$,O$=R$,L$="[object Null]",D$="[object Undefined]",ew=Z_?Z_.toStringTag:void 0;function M$(t){return t==null?t===void 0?D$:L$:ew&&ew in Object(t)?P$(t):O$(t)}var lf=M$;function j$(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Z4=j$,F$=lf,$$=Z4,V$="[object AsyncFunction]",U$="[object Function]",B$="[object GeneratorFunction]",q$="[object Proxy]";function z$(t){if(!$$(t))return!1;var e=F$(t);return e==U$||e==B$||e==V$||e==q$}var eI=z$,H$=Gr,W$=H$["__core-js_shared__"],K$=W$,g0=K$,tw=function(){var t=/[^.]+$/.exec(g0&&g0.keys&&g0.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function G$(t){return!!tw&&tw in t}var Q$=G$,Y$=Function.prototype,X$=Y$.toString;function J$(t){if(t!=null){try{return X$.call(t)}catch{}try{return t+""}catch{}}return""}var tI=J$,Z$=eI,eV=Q$,tV=Z4,nV=tI,rV=/[\\^$.*+?()[\]{}|]/g,iV=/^\[object .+?Constructor\]$/,sV=Function.prototype,oV=Object.prototype,aV=sV.toString,lV=oV.hasOwnProperty,uV=RegExp("^"+aV.call(lV).replace(rV,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function cV(t){if(!tV(t)||eV(t))return!1;var e=Z$(t)?uV:iV;return e.test(nV(t))}var hV=cV;function dV(t,e){return t==null?void 0:t[e]}var fV=dV,pV=hV,mV=fV;function gV(t,e){var n=mV(t,e);return pV(n)?n:void 0}var da=gV,vV=da,yV=Gr,_V=vV(yV,"Map"),g1=_V,wV=da,EV=wV(Object,"create"),uf=EV,nw=uf;function TV(){this.__data__=nw?nw(null):{},this.size=0}var xV=TV;function bV(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var IV=bV,SV=uf,CV="__lodash_hash_undefined__",AV=Object.prototype,kV=AV.hasOwnProperty;function NV(t){var e=this.__data__;if(SV){var n=e[t];return n===CV?void 0:n}return kV.call(e,t)?e[t]:void 0}var RV=NV,PV=uf,OV=Object.prototype,LV=OV.hasOwnProperty;function DV(t){var e=this.__data__;return PV?e[t]!==void 0:LV.call(e,t)}var MV=DV,jV=uf,FV="__lodash_hash_undefined__";function $V(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=jV&&e===void 0?FV:e,this}var VV=$V,UV=xV,BV=IV,qV=RV,zV=MV,HV=VV;function fa(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}fa.prototype.clear=UV;fa.prototype.delete=BV;fa.prototype.get=qV;fa.prototype.has=zV;fa.prototype.set=HV;var WV=fa,rw=WV,KV=af,GV=g1;function QV(){this.size=0,this.__data__={hash:new rw,map:new(GV||KV),string:new rw}}var YV=QV;function XV(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var JV=XV,ZV=JV;function eU(t,e){var n=t.__data__;return ZV(e)?n[typeof e=="string"?"string":"hash"]:n.map}var cf=eU,tU=cf;function nU(t){var e=tU(this,t).delete(t);return this.size-=e?1:0,e}var rU=nU,iU=cf;function sU(t){return iU(this,t).get(t)}var oU=sU,aU=cf;function lU(t){return aU(this,t).has(t)}var uU=lU,cU=cf;function hU(t,e){var n=cU(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var dU=hU,fU=YV,pU=rU,mU=oU,gU=uU,vU=dU;function pa(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}pa.prototype.clear=fU;pa.prototype.delete=pU;pa.prototype.get=mU;pa.prototype.has=gU;pa.prototype.set=vU;var nI=pa,yU=af,_U=g1,wU=nI,EU=200;function TU(t,e){var n=this.__data__;if(n instanceof yU){var r=n.__data__;if(!_U||r.length<EU-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new wU(r)}return n.set(t,e),this.size=n.size,this}var xU=TU,bU=af,IU=h$,SU=f$,CU=m$,AU=v$,kU=xU;function ma(t){var e=this.__data__=new bU(t);this.size=e.size}ma.prototype.clear=IU;ma.prototype.delete=SU;ma.prototype.get=CU;ma.prototype.has=AU;ma.prototype.set=kU;var NU=ma,RU="__lodash_hash_undefined__";function PU(t){return this.__data__.set(t,RU),this}var OU=PU;function LU(t){return this.__data__.has(t)}var DU=LU,MU=nI,jU=OU,FU=DU;function Vh(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new MU;++e<n;)this.add(t[e])}Vh.prototype.add=Vh.prototype.push=jU;Vh.prototype.has=FU;var $U=Vh;function VU(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var UU=VU;function BU(t,e){return t.has(e)}var qU=BU,zU=$U,HU=UU,WU=qU,KU=1,GU=2;function QU(t,e,n,r,i,s){var o=n&KU,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var u=s.get(t),h=s.get(e);if(u&&h)return u==e&&h==t;var c=-1,d=!0,f=n&GU?new zU:void 0;for(s.set(t,e),s.set(e,t);++c<a;){var v=t[c],y=e[c];if(r)var w=o?r(y,v,c,e,t,s):r(v,y,c,t,e,s);if(w!==void 0){if(w)continue;d=!1;break}if(f){if(!HU(e,function(p,m){if(!WU(f,m)&&(v===p||i(v,p,n,r,s)))return f.push(m)})){d=!1;break}}else if(!(v===y||i(v,y,n,r,s))){d=!1;break}}return s.delete(t),s.delete(e),d}var rI=QU,YU=Gr,XU=YU.Uint8Array,JU=XU;function ZU(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var eB=ZU;function tB(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var nB=tB,iw=m1,sw=JU,rB=Y4,iB=rI,sB=eB,oB=nB,aB=1,lB=2,uB="[object Boolean]",cB="[object Date]",hB="[object Error]",dB="[object Map]",fB="[object Number]",pB="[object RegExp]",mB="[object Set]",gB="[object String]",vB="[object Symbol]",yB="[object ArrayBuffer]",_B="[object DataView]",ow=iw?iw.prototype:void 0,v0=ow?ow.valueOf:void 0;function wB(t,e,n,r,i,s,o){switch(n){case _B:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case yB:return!(t.byteLength!=e.byteLength||!s(new sw(t),new sw(e)));case uB:case cB:case fB:return rB(+t,+e);case hB:return t.name==e.name&&t.message==e.message;case pB:case gB:return t==e+"";case dB:var a=sB;case mB:var l=r&aB;if(a||(a=oB),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;r|=lB,o.set(t,e);var h=iB(a(t),a(e),r,i,s,o);return o.delete(t),h;case vB:if(v0)return v0.call(t)==v0.call(e)}return!1}var EB=wB;function TB(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var xB=TB,bB=Array.isArray,v1=bB,IB=xB,SB=v1;function CB(t,e,n){var r=e(t);return SB(t)?r:IB(r,n(t))}var AB=CB;function kB(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}var NB=kB;function RB(){return[]}var PB=RB,OB=NB,LB=PB,DB=Object.prototype,MB=DB.propertyIsEnumerable,aw=Object.getOwnPropertySymbols,jB=aw?function(t){return t==null?[]:(t=Object(t),OB(aw(t),function(e){return MB.call(t,e)}))}:LB,FB=jB;function $B(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var VB=$B;function UB(t){return t!=null&&typeof t=="object"}var hf=UB,BB=lf,qB=hf,zB="[object Arguments]";function HB(t){return qB(t)&&BB(t)==zB}var WB=HB,lw=WB,KB=hf,iI=Object.prototype,GB=iI.hasOwnProperty,QB=iI.propertyIsEnumerable,YB=lw(function(){return arguments}())?lw:function(t){return KB(t)&&GB.call(t,"callee")&&!QB.call(t,"callee")},XB=YB,Uh={exports:{}};function JB(){return!1}var ZB=JB;Uh.exports;(function(t,e){var n=Gr,r=ZB,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;t.exports=u})(Uh,Uh.exports);var sI=Uh.exports,eq=9007199254740991,tq=/^(?:0|[1-9]\d*)$/;function nq(t,e){var n=typeof t;return e=e??eq,!!e&&(n=="number"||n!="symbol"&&tq.test(t))&&t>-1&&t%1==0&&t<e}var rq=nq,iq=9007199254740991;function sq(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=iq}var oI=sq,oq=lf,aq=oI,lq=hf,uq="[object Arguments]",cq="[object Array]",hq="[object Boolean]",dq="[object Date]",fq="[object Error]",pq="[object Function]",mq="[object Map]",gq="[object Number]",vq="[object Object]",yq="[object RegExp]",_q="[object Set]",wq="[object String]",Eq="[object WeakMap]",Tq="[object ArrayBuffer]",xq="[object DataView]",bq="[object Float32Array]",Iq="[object Float64Array]",Sq="[object Int8Array]",Cq="[object Int16Array]",Aq="[object Int32Array]",kq="[object Uint8Array]",Nq="[object Uint8ClampedArray]",Rq="[object Uint16Array]",Pq="[object Uint32Array]",Ke={};Ke[bq]=Ke[Iq]=Ke[Sq]=Ke[Cq]=Ke[Aq]=Ke[kq]=Ke[Nq]=Ke[Rq]=Ke[Pq]=!0;Ke[uq]=Ke[cq]=Ke[Tq]=Ke[hq]=Ke[xq]=Ke[dq]=Ke[fq]=Ke[pq]=Ke[mq]=Ke[gq]=Ke[vq]=Ke[yq]=Ke[_q]=Ke[wq]=Ke[Eq]=!1;function Oq(t){return lq(t)&&aq(t.length)&&!!Ke[oq(t)]}var Lq=Oq;function Dq(t){return function(e){return t(e)}}var Mq=Dq,Bh={exports:{}};Bh.exports;(function(t,e){var n=X4,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(Bh,Bh.exports);var jq=Bh.exports,Fq=Lq,$q=Mq,uw=jq,cw=uw&&uw.isTypedArray,Vq=cw?$q(cw):Fq,aI=Vq,Uq=VB,Bq=XB,qq=v1,zq=sI,Hq=rq,Wq=aI,Kq=Object.prototype,Gq=Kq.hasOwnProperty;function Qq(t,e){var n=qq(t),r=!n&&Bq(t),i=!n&&!r&&zq(t),s=!n&&!r&&!i&&Wq(t),o=n||r||i||s,a=o?Uq(t.length,String):[],l=a.length;for(var u in t)(e||Gq.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Hq(u,l)))&&a.push(u);return a}var Yq=Qq,Xq=Object.prototype;function Jq(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Xq;return t===n}var Zq=Jq;function ez(t,e){return function(n){return t(e(n))}}var tz=ez,nz=tz,rz=nz(Object.keys,Object),iz=rz,sz=Zq,oz=iz,az=Object.prototype,lz=az.hasOwnProperty;function uz(t){if(!sz(t))return oz(t);var e=[];for(var n in Object(t))lz.call(t,n)&&n!="constructor"&&e.push(n);return e}var cz=uz,hz=eI,dz=oI;function fz(t){return t!=null&&dz(t.length)&&!hz(t)}var pz=fz,mz=Yq,gz=cz,vz=pz;function yz(t){return vz(t)?mz(t):gz(t)}var _z=yz,wz=AB,Ez=FB,Tz=_z;function xz(t){return wz(t,Tz,Ez)}var bz=xz,hw=bz,Iz=1,Sz=Object.prototype,Cz=Sz.hasOwnProperty;function Az(t,e,n,r,i,s){var o=n&Iz,a=hw(t),l=a.length,u=hw(e),h=u.length;if(l!=h&&!o)return!1;for(var c=l;c--;){var d=a[c];if(!(o?d in e:Cz.call(e,d)))return!1}var f=s.get(t),v=s.get(e);if(f&&v)return f==e&&v==t;var y=!0;s.set(t,e),s.set(e,t);for(var w=o;++c<l;){d=a[c];var p=t[d],m=e[d];if(r)var E=o?r(m,p,d,e,t,s):r(p,m,d,t,e,s);if(!(E===void 0?p===m||i(p,m,n,r,s):E)){y=!1;break}w||(w=d=="constructor")}if(y&&!w){var g=t.constructor,T=e.constructor;g!=T&&"constructor"in t&&"constructor"in e&&!(typeof g=="function"&&g instanceof g&&typeof T=="function"&&T instanceof T)&&(y=!1)}return s.delete(t),s.delete(e),y}var kz=Az,Nz=da,Rz=Gr,Pz=Nz(Rz,"DataView"),Oz=Pz,Lz=da,Dz=Gr,Mz=Lz(Dz,"Promise"),jz=Mz,Fz=da,$z=Gr,Vz=Fz($z,"Set"),Uz=Vz,Bz=da,qz=Gr,zz=Bz(qz,"WeakMap"),Hz=zz,v2=Oz,y2=g1,_2=jz,w2=Uz,E2=Hz,lI=lf,ga=tI,dw="[object Map]",Wz="[object Object]",fw="[object Promise]",pw="[object Set]",mw="[object WeakMap]",gw="[object DataView]",Kz=ga(v2),Gz=ga(y2),Qz=ga(_2),Yz=ga(w2),Xz=ga(E2),Ji=lI;(v2&&Ji(new v2(new ArrayBuffer(1)))!=gw||y2&&Ji(new y2)!=dw||_2&&Ji(_2.resolve())!=fw||w2&&Ji(new w2)!=pw||E2&&Ji(new E2)!=mw)&&(Ji=function(t){var e=lI(t),n=e==Wz?t.constructor:void 0,r=n?ga(n):"";if(r)switch(r){case Kz:return gw;case Gz:return dw;case Qz:return fw;case Yz:return pw;case Xz:return mw}return e});var Jz=Ji,y0=NU,Zz=rI,eH=EB,tH=kz,vw=Jz,yw=v1,_w=sI,nH=aI,rH=1,ww="[object Arguments]",Ew="[object Array]",mc="[object Object]",iH=Object.prototype,Tw=iH.hasOwnProperty;function sH(t,e,n,r,i,s){var o=yw(t),a=yw(e),l=o?Ew:vw(t),u=a?Ew:vw(e);l=l==ww?mc:l,u=u==ww?mc:u;var h=l==mc,c=u==mc,d=l==u;if(d&&_w(t)){if(!_w(e))return!1;o=!0,h=!1}if(d&&!h)return s||(s=new y0),o||nH(t)?Zz(t,e,n,r,i,s):eH(t,e,l,n,r,i,s);if(!(n&rH)){var f=h&&Tw.call(t,"__wrapped__"),v=c&&Tw.call(e,"__wrapped__");if(f||v){var y=f?t.value():t,w=v?e.value():e;return s||(s=new y0),i(y,w,n,r,s)}}return d?(s||(s=new y0),tH(t,e,n,r,i,s)):!1}var oH=sH,aH=oH,xw=hf;function uI(t,e,n,r,i){return t===e?!0:t==null||e==null||!xw(t)&&!xw(e)?t!==t&&e!==e:aH(t,e,n,r,uI,i)}var lH=uI,uH=lH;function cH(t,e){return uH(t,e)}var hH=cH,cI={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(t,e){(function(r,i){t.exports=i()})(typeof self<"u"?self:gn,function(){return function(n){var r={};function i(s){if(r[s])return r[s].exports;var o=r[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=r,i.d=function(s,o,a){i.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:a})},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="",i(i.s=109)}([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(17),o=i(18),a=i(19),l=i(45),u=i(46),h=i(47),c=i(48),d=i(49),f=i(12),v=i(32),y=i(33),w=i(31),p=i(1),m={Scope:p.Scope,create:p.create,find:p.find,query:p.query,register:p.register,Container:s.default,Format:o.default,Leaf:a.default,Embed:c.default,Scroll:l.default,Block:h.default,Inline:u.default,Text:d.default,Attributor:{Attribute:f.default,Class:v.default,Style:y.default,Store:w.default}};r.default=m},function(n,r,i){var s=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var E in m)m.hasOwnProperty(E)&&(p[E]=m[E])};return function(p,m){w(p,m);function E(){this.constructor=p}p.prototype=m===null?Object.create(m):(E.prototype=m.prototype,new E)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=function(w){s(p,w);function p(m){var E=this;return m="[Parchment] "+m,E=w.call(this,m)||this,E.message=m,E.name=E.constructor.name,E}return p}(Error);r.ParchmentError=o;var a={},l={},u={},h={};r.DATA_KEY="__blot";var c;(function(w){w[w.TYPE=3]="TYPE",w[w.LEVEL=12]="LEVEL",w[w.ATTRIBUTE=13]="ATTRIBUTE",w[w.BLOT=14]="BLOT",w[w.INLINE=7]="INLINE",w[w.BLOCK=11]="BLOCK",w[w.BLOCK_BLOT=10]="BLOCK_BLOT",w[w.INLINE_BLOT=6]="INLINE_BLOT",w[w.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",w[w.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",w[w.ANY=15]="ANY"})(c=r.Scope||(r.Scope={}));function d(w,p){var m=v(w);if(m==null)throw new o("Unable to create "+w+" blot");var E=m,g=w instanceof Node||w.nodeType===Node.TEXT_NODE?w:E.create(p);return new E(g,p)}r.create=d;function f(w,p){return p===void 0&&(p=!1),w==null?null:w[r.DATA_KEY]!=null?w[r.DATA_KEY].blot:p?f(w.parentNode,p):null}r.find=f;function v(w,p){p===void 0&&(p=c.ANY);var m;if(typeof w=="string")m=h[w]||a[w];else if(w instanceof Text||w.nodeType===Node.TEXT_NODE)m=h.text;else if(typeof w=="number")w&c.LEVEL&c.BLOCK?m=h.block:w&c.LEVEL&c.INLINE&&(m=h.inline);else if(w instanceof HTMLElement){var E=(w.getAttribute("class")||"").split(/\s+/);for(var g in E)if(m=l[E[g]],m)break;m=m||u[w.tagName]}return m==null?null:p&c.LEVEL&m.scope&&p&c.TYPE&m.scope?m:null}r.query=v;function y(){for(var w=[],p=0;p<arguments.length;p++)w[p]=arguments[p];if(w.length>1)return w.map(function(g){return y(g)});var m=w[0];if(typeof m.blotName!="string"&&typeof m.attrName!="string")throw new o("Invalid definition");if(m.blotName==="abstract")throw new o("Cannot register abstract class");if(h[m.blotName||m.attrName]=m,typeof m.keyName=="string")a[m.keyName]=m;else if(m.className!=null&&(l[m.className]=m),m.tagName!=null){Array.isArray(m.tagName)?m.tagName=m.tagName.map(function(g){return g.toUpperCase()}):m.tagName=m.tagName.toUpperCase();var E=Array.isArray(m.tagName)?m.tagName:[m.tagName];E.forEach(function(g){(u[g]==null||m.className==null)&&(u[g]=m)})}return m}r.register=y},function(n,r,i){var s=i(51),o=i(11),a=i(3),l=i(20),u="\0",h=function(c){Array.isArray(c)?this.ops=c:c!=null&&Array.isArray(c.ops)?this.ops=c.ops:this.ops=[]};h.prototype.insert=function(c,d){var f={};return c.length===0?this:(f.insert=c,d!=null&&typeof d=="object"&&Object.keys(d).length>0&&(f.attributes=d),this.push(f))},h.prototype.delete=function(c){return c<=0?this:this.push({delete:c})},h.prototype.retain=function(c,d){if(c<=0)return this;var f={retain:c};return d!=null&&typeof d=="object"&&Object.keys(d).length>0&&(f.attributes=d),this.push(f)},h.prototype.push=function(c){var d=this.ops.length,f=this.ops[d-1];if(c=a(!0,{},c),typeof f=="object"){if(typeof c.delete=="number"&&typeof f.delete=="number")return this.ops[d-1]={delete:f.delete+c.delete},this;if(typeof f.delete=="number"&&c.insert!=null&&(d-=1,f=this.ops[d-1],typeof f!="object"))return this.ops.unshift(c),this;if(o(c.attributes,f.attributes)){if(typeof c.insert=="string"&&typeof f.insert=="string")return this.ops[d-1]={insert:f.insert+c.insert},typeof c.attributes=="object"&&(this.ops[d-1].attributes=c.attributes),this;if(typeof c.retain=="number"&&typeof f.retain=="number")return this.ops[d-1]={retain:f.retain+c.retain},typeof c.attributes=="object"&&(this.ops[d-1].attributes=c.attributes),this}}return d===this.ops.length?this.ops.push(c):this.ops.splice(d,0,c),this},h.prototype.chop=function(){var c=this.ops[this.ops.length-1];return c&&c.retain&&!c.attributes&&this.ops.pop(),this},h.prototype.filter=function(c){return this.ops.filter(c)},h.prototype.forEach=function(c){this.ops.forEach(c)},h.prototype.map=function(c){return this.ops.map(c)},h.prototype.partition=function(c){var d=[],f=[];return this.forEach(function(v){var y=c(v)?d:f;y.push(v)}),[d,f]},h.prototype.reduce=function(c,d){return this.ops.reduce(c,d)},h.prototype.changeLength=function(){return this.reduce(function(c,d){return d.insert?c+l.length(d):d.delete?c-d.delete:c},0)},h.prototype.length=function(){return this.reduce(function(c,d){return c+l.length(d)},0)},h.prototype.slice=function(c,d){c=c||0,typeof d!="number"&&(d=1/0);for(var f=[],v=l.iterator(this.ops),y=0;y<d&&v.hasNext();){var w;y<c?w=v.next(c-y):(w=v.next(d-y),f.push(w)),y+=l.length(w)}return new h(f)},h.prototype.compose=function(c){var d=l.iterator(this.ops),f=l.iterator(c.ops),v=[],y=f.peek();if(y!=null&&typeof y.retain=="number"&&y.attributes==null){for(var w=y.retain;d.peekType()==="insert"&&d.peekLength()<=w;)w-=d.peekLength(),v.push(d.next());y.retain-w>0&&f.next(y.retain-w)}for(var p=new h(v);d.hasNext()||f.hasNext();)if(f.peekType()==="insert")p.push(f.next());else if(d.peekType()==="delete")p.push(d.next());else{var m=Math.min(d.peekLength(),f.peekLength()),E=d.next(m),g=f.next(m);if(typeof g.retain=="number"){var T={};typeof E.retain=="number"?T.retain=m:T.insert=E.insert;var x=l.attributes.compose(E.attributes,g.attributes,typeof E.retain=="number");if(x&&(T.attributes=x),p.push(T),!f.hasNext()&&o(p.ops[p.ops.length-1],T)){var b=new h(d.rest());return p.concat(b).chop()}}else typeof g.delete=="number"&&typeof E.retain=="number"&&p.push(g)}return p.chop()},h.prototype.concat=function(c){var d=new h(this.ops.slice());return c.ops.length>0&&(d.push(c.ops[0]),d.ops=d.ops.concat(c.ops.slice(1))),d},h.prototype.diff=function(c,d){if(this.ops===c.ops)return new h;var f=[this,c].map(function(m){return m.map(function(E){if(E.insert!=null)return typeof E.insert=="string"?E.insert:u;var g=m===c?"on":"with";throw new Error("diff() called "+g+" non-document")}).join("")}),v=new h,y=s(f[0],f[1],d),w=l.iterator(this.ops),p=l.iterator(c.ops);return y.forEach(function(m){for(var E=m[1].length;E>0;){var g=0;switch(m[0]){case s.INSERT:g=Math.min(p.peekLength(),E),v.push(p.next(g));break;case s.DELETE:g=Math.min(E,w.peekLength()),w.next(g),v.delete(g);break;case s.EQUAL:g=Math.min(w.peekLength(),p.peekLength(),E);var T=w.next(g),x=p.next(g);o(T.insert,x.insert)?v.retain(g,l.attributes.diff(T.attributes,x.attributes)):v.push(x).delete(g);break}E-=g}}),v.chop()},h.prototype.eachLine=function(c,d){d=d||`
`;for(var f=l.iterator(this.ops),v=new h,y=0;f.hasNext();){if(f.peekType()!=="insert")return;var w=f.peek(),p=l.length(w)-f.peekLength(),m=typeof w.insert=="string"?w.insert.indexOf(d,p)-p:-1;if(m<0)v.push(f.next());else if(m>0)v.push(f.next(m));else{if(c(v,f.next(1).attributes||{},y)===!1)return;y+=1,v=new h}}v.length()>0&&c(v,{},y)},h.prototype.transform=function(c,d){if(d=!!d,typeof c=="number")return this.transformPosition(c,d);for(var f=l.iterator(this.ops),v=l.iterator(c.ops),y=new h;f.hasNext()||v.hasNext();)if(f.peekType()==="insert"&&(d||v.peekType()!=="insert"))y.retain(l.length(f.next()));else if(v.peekType()==="insert")y.push(v.next());else{var w=Math.min(f.peekLength(),v.peekLength()),p=f.next(w),m=v.next(w);if(p.delete)continue;m.delete?y.push(m):y.retain(w,l.attributes.transform(p.attributes,m.attributes,d))}return y.chop()},h.prototype.transformPosition=function(c,d){d=!!d;for(var f=l.iterator(this.ops),v=0;f.hasNext()&&v<=c;){var y=f.peekLength(),w=f.peekType();if(f.next(),w==="delete"){c-=Math.min(y,c-v);continue}else w==="insert"&&(v<c||!d)&&(c+=y);v+=y}return c},n.exports=h},function(n,r){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(f){return typeof Array.isArray=="function"?Array.isArray(f):s.call(f)==="[object Array]"},u=function(f){if(!f||s.call(f)!=="[object Object]")return!1;var v=i.call(f,"constructor"),y=f.constructor&&f.constructor.prototype&&i.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!v&&!y)return!1;var w;for(w in f);return typeof w>"u"||i.call(f,w)},h=function(f,v){o&&v.name==="__proto__"?o(f,v.name,{enumerable:!0,configurable:!0,value:v.newValue,writable:!0}):f[v.name]=v.newValue},c=function(f,v){if(v==="__proto__")if(i.call(f,v)){if(a)return a(f,v).value}else return;return f[v]};n.exports=function d(){var f,v,y,w,p,m,E=arguments[0],g=1,T=arguments.length,x=!1;for(typeof E=="boolean"&&(x=E,E=arguments[1]||{},g=2),(E==null||typeof E!="object"&&typeof E!="function")&&(E={});g<T;++g)if(f=arguments[g],f!=null)for(v in f)y=c(E,v),w=c(f,v),E!==w&&(x&&w&&(u(w)||(p=l(w)))?(p?(p=!1,m=y&&l(y)?y:[]):m=y&&u(y)?y:{},h(E,{name:v,newValue:d(x,m,w)})):typeof w<"u"&&h(E,{name:v,newValue:w}));return E}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var s=function(){function C(A,N){for(var P=0;P<N.length;P++){var j=N[P];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(A,j.key,j)}}return function(A,N,P){return N&&C(A.prototype,N),P&&C(A,P),A}}(),o=function C(A,N,P){A===null&&(A=Function.prototype);var j=Object.getOwnPropertyDescriptor(A,N);if(j===void 0){var B=Object.getPrototypeOf(A);return B===null?void 0:C(B,N,P)}else{if("value"in j)return j.value;var z=j.get;return z===void 0?void 0:z.call(P)}},a=i(3),l=E(a),u=i(2),h=E(u),c=i(0),d=E(c),f=i(16),v=E(f),y=i(6),w=E(y),p=i(7),m=E(p);function E(C){return C&&C.__esModule?C:{default:C}}function g(C,A){if(!(C instanceof A))throw new TypeError("Cannot call a class as a function")}function T(C,A){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:C}function x(C,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);C.prototype=Object.create(A&&A.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(C,A):C.__proto__=A)}var b=1,S=function(C){x(A,C);function A(){return g(this,A),T(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return s(A,[{key:"attach",value:function(){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"attach",this).call(this),this.attributes=new d.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new h.default().insert(this.value(),(0,l.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(P,j){var B=d.default.query(P,d.default.Scope.BLOCK_ATTRIBUTE);B!=null&&this.attributes.attribute(B,j)}},{key:"formatAt",value:function(P,j,B,z){this.format(B,z)}},{key:"insertAt",value:function(P,j,B){if(typeof j=="string"&&j.endsWith(`
`)){var z=d.default.create(k.blotName);this.parent.insertBefore(z,P===0?this:this.next),z.insertAt(0,j.slice(0,-1))}else o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,P,j,B)}}]),A}(d.default.Embed);S.scope=d.default.Scope.BLOCK_BLOT;var k=function(C){x(A,C);function A(N){g(this,A);var P=T(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,N));return P.cache={},P}return s(A,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(d.default.Leaf).reduce(function(P,j){return j.length()===0?P:P.insert(j.value(),I(j))},new h.default).insert(`
`,I(this))),this.cache.delta}},{key:"deleteAt",value:function(P,j){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"deleteAt",this).call(this,P,j),this.cache={}}},{key:"formatAt",value:function(P,j,B,z){j<=0||(d.default.query(B,d.default.Scope.BLOCK)?P+j===this.length()&&this.format(B,z):o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,P,Math.min(j,this.length()-P-1),B,z),this.cache={})}},{key:"insertAt",value:function(P,j,B){if(B!=null)return o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,P,j,B);if(j.length!==0){var z=j.split(`
`),H=z.shift();H.length>0&&(P<this.length()-1||this.children.tail==null?o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,Math.min(P,this.length()-1),H):this.children.tail.insertAt(this.children.tail.length(),H),this.cache={});var $=this;z.reduce(function(D,R){return $=$.split(D,!0),$.insertAt(0,R),R.length},P+H.length)}}},{key:"insertBefore",value:function(P,j){var B=this.children.head;o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,P,j),B instanceof v.default&&B.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"length",this).call(this)+b),this.cache.length}},{key:"moveChildren",value:function(P,j){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"moveChildren",this).call(this,P,j),this.cache={}}},{key:"optimize",value:function(P){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,P),this.cache={}}},{key:"path",value:function(P){return o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"path",this).call(this,P,!0)}},{key:"removeChild",value:function(P){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"removeChild",this).call(this,P),this.cache={}}},{key:"split",value:function(P){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(j&&(P===0||P>=this.length()-b)){var B=this.clone();return P===0?(this.parent.insertBefore(B,this),this):(this.parent.insertBefore(B,this.next),B)}else{var z=o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"split",this).call(this,P,j);return this.cache={},z}}}]),A}(d.default.Block);k.blotName="block",k.tagName="P",k.defaultChild="break",k.allowedChildren=[w.default,d.default.Embed,m.default];function I(C){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return C==null||(typeof C.formats=="function"&&(A=(0,l.default)(A,C.formats())),C.parent==null||C.parent.blotName=="scroll"||C.parent.statics.scope!==C.statics.scope)?A:I(C.parent,A)}r.bubbleFormats=I,r.BlockEmbed=S,r.default=k},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},o=function(){function $(D,R){var L=[],F=!0,q=!1,U=void 0;try{for(var O=D[Symbol.iterator](),V;!(F=(V=O.next()).done)&&(L.push(V.value),!(R&&L.length===R));F=!0);}catch(W){q=!0,U=W}finally{try{!F&&O.return&&O.return()}finally{if(q)throw U}}return L}return function(D,R){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return $(D,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function $(D,R){for(var L=0;L<R.length;L++){var F=R[L];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(D,F.key,F)}}return function(D,R,L){return R&&$(D.prototype,R),L&&$(D,L),D}}();i(50);var l=i(2),u=I(l),h=i(14),c=I(h),d=i(8),f=I(d),v=i(9),y=I(v),w=i(0),p=I(w),m=i(15),E=I(m),g=i(3),T=I(g),x=i(10),b=I(x),S=i(34),k=I(S);function I($){return $&&$.__esModule?$:{default:$}}function C($,D,R){return D in $?Object.defineProperty($,D,{value:R,enumerable:!0,configurable:!0,writable:!0}):$[D]=R,$}function A($,D){if(!($ instanceof D))throw new TypeError("Cannot call a class as a function")}var N=(0,b.default)("quill"),P=function(){a($,null,[{key:"debug",value:function(R){R===!0&&(R="log"),b.default.level(R)}},{key:"find",value:function(R){return R.__quill||p.default.find(R)}},{key:"import",value:function(R){return this.imports[R]==null&&N.error("Cannot import "+R+". Are you sure it was registered?"),this.imports[R]}},{key:"register",value:function(R,L){var F=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof R!="string"){var U=R.attrName||R.blotName;typeof U=="string"?this.register("formats/"+U,R,L):Object.keys(R).forEach(function(O){F.register(O,R[O],L)})}else this.imports[R]!=null&&!q&&N.warn("Overwriting "+R+" with",L),this.imports[R]=L,(R.startsWith("blots/")||R.startsWith("formats/"))&&L.blotName!=="abstract"?p.default.register(L):R.startsWith("modules")&&typeof L.register=="function"&&L.register()}}]);function $(D){var R=this,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(A(this,$),this.options=j(D,L),this.container=this.options.container,this.container==null)return N.error("Invalid Quill container",D);this.options.debug&&$.debug(this.options.debug);var F=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new f.default,this.scroll=p.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new c.default(this.scroll),this.selection=new E.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(f.default.events.EDITOR_CHANGE,function(U){U===f.default.events.TEXT_CHANGE&&R.root.classList.toggle("ql-blank",R.editor.isBlank())}),this.emitter.on(f.default.events.SCROLL_UPDATE,function(U,O){var V=R.selection.lastRange,W=V&&V.length===0?V.index:void 0;B.call(R,function(){return R.editor.update(null,O,W)},U)});var q=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+F+"<p><br></p></div>");this.setContents(q),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a($,[{key:"addContainer",value:function(R){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof R=="string"){var F=R;R=document.createElement("div"),R.classList.add(F)}return this.container.insertBefore(R,L),R}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(R,L,F){var q=this,U=z(R,L,F),O=o(U,4);return R=O[0],L=O[1],F=O[3],B.call(this,function(){return q.editor.deleteText(R,L)},F,R,-1*L)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(R),this.container.classList.toggle("ql-disabled",!R)}},{key:"focus",value:function(){var R=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=R,this.scrollIntoView()}},{key:"format",value:function(R,L){var F=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:f.default.sources.API;return B.call(this,function(){var U=F.getSelection(!0),O=new u.default;if(U==null)return O;if(p.default.query(R,p.default.Scope.BLOCK))O=F.editor.formatLine(U.index,U.length,C({},R,L));else{if(U.length===0)return F.selection.format(R,L),O;O=F.editor.formatText(U.index,U.length,C({},R,L))}return F.setSelection(U,f.default.sources.SILENT),O},q)}},{key:"formatLine",value:function(R,L,F,q,U){var O=this,V=void 0,W=z(R,L,F,q,U),K=o(W,4);return R=K[0],L=K[1],V=K[2],U=K[3],B.call(this,function(){return O.editor.formatLine(R,L,V)},U,R,0)}},{key:"formatText",value:function(R,L,F,q,U){var O=this,V=void 0,W=z(R,L,F,q,U),K=o(W,4);return R=K[0],L=K[1],V=K[2],U=K[3],B.call(this,function(){return O.editor.formatText(R,L,V)},U,R,0)}},{key:"getBounds",value:function(R){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,F=void 0;typeof R=="number"?F=this.selection.getBounds(R,L):F=this.selection.getBounds(R.index,R.length);var q=this.container.getBoundingClientRect();return{bottom:F.bottom-q.top,height:F.height,left:F.left-q.left,right:F.right-q.left,top:F.top-q.top,width:F.width}}},{key:"getContents",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-R,F=z(R,L),q=o(F,2);return R=q[0],L=q[1],this.editor.getContents(R,L)}},{key:"getFormat",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof R=="number"?this.editor.getFormat(R,L):this.editor.getFormat(R.index,R.length)}},{key:"getIndex",value:function(R){return R.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(R){return this.scroll.leaf(R)}},{key:"getLine",value:function(R){return this.scroll.line(R)}},{key:"getLines",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof R!="number"?this.scroll.lines(R.index,R.length):this.scroll.lines(R,L)}},{key:"getModule",value:function(R){return this.theme.modules[R]}},{key:"getSelection",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return R&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-R,F=z(R,L),q=o(F,2);return R=q[0],L=q[1],this.editor.getText(R,L)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(R,L,F){var q=this,U=arguments.length>3&&arguments[3]!==void 0?arguments[3]:$.sources.API;return B.call(this,function(){return q.editor.insertEmbed(R,L,F)},U,R)}},{key:"insertText",value:function(R,L,F,q,U){var O=this,V=void 0,W=z(R,0,F,q,U),K=o(W,4);return R=K[0],V=K[2],U=K[3],B.call(this,function(){return O.editor.insertText(R,L,V)},U,R,L.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(R,L,F){this.clipboard.dangerouslyPasteHTML(R,L,F)}},{key:"removeFormat",value:function(R,L,F){var q=this,U=z(R,L,F),O=o(U,4);return R=O[0],L=O[1],F=O[3],B.call(this,function(){return q.editor.removeFormat(R,L)},F,R)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(R){var L=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f.default.sources.API;return B.call(this,function(){R=new u.default(R);var q=L.getLength(),U=L.editor.deleteText(0,q),O=L.editor.applyDelta(R),V=O.ops[O.ops.length-1];V!=null&&typeof V.insert=="string"&&V.insert[V.insert.length-1]===`
`&&(L.editor.deleteText(L.getLength()-1,1),O.delete(1));var W=U.compose(O);return W},F)}},{key:"setSelection",value:function(R,L,F){if(R==null)this.selection.setRange(null,L||$.sources.API);else{var q=z(R,L,F),U=o(q,4);R=U[0],L=U[1],F=U[3],this.selection.setRange(new m.Range(R,L),F),F!==f.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(R){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f.default.sources.API,F=new u.default().insert(R);return this.setContents(F,L)}},{key:"update",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f.default.sources.USER,L=this.scroll.update(R);return this.selection.update(R),L}},{key:"updateContents",value:function(R){var L=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f.default.sources.API;return B.call(this,function(){return R=new u.default(R),L.editor.applyDelta(R,F)},F,!0)}}]),$}();P.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},P.events=f.default.events,P.sources=f.default.sources,P.version="1.3.7",P.imports={delta:u.default,parchment:p.default,"core/module":y.default,"core/theme":k.default};function j($,D){if(D=(0,T.default)(!0,{container:$,modules:{clipboard:!0,keyboard:!0,history:!0}},D),!D.theme||D.theme===P.DEFAULTS.theme)D.theme=k.default;else if(D.theme=P.import("themes/"+D.theme),D.theme==null)throw new Error("Invalid theme "+D.theme+". Did you register it?");var R=(0,T.default)(!0,{},D.theme.DEFAULTS);[R,D].forEach(function(q){q.modules=q.modules||{},Object.keys(q.modules).forEach(function(U){q.modules[U]===!0&&(q.modules[U]={})})});var L=Object.keys(R.modules).concat(Object.keys(D.modules)),F=L.reduce(function(q,U){var O=P.import("modules/"+U);return O==null?N.error("Cannot load "+U+" module. Are you sure you registered it?"):q[U]=O.DEFAULTS||{},q},{});return D.modules!=null&&D.modules.toolbar&&D.modules.toolbar.constructor!==Object&&(D.modules.toolbar={container:D.modules.toolbar}),D=(0,T.default)(!0,{},P.DEFAULTS,{modules:F},R,D),["bounds","container","scrollingContainer"].forEach(function(q){typeof D[q]=="string"&&(D[q]=document.querySelector(D[q]))}),D.modules=Object.keys(D.modules).reduce(function(q,U){return D.modules[U]&&(q[U]=D.modules[U]),q},{}),D}function B($,D,R,L){if(this.options.strict&&!this.isEnabled()&&D===f.default.sources.USER)return new u.default;var F=R==null?null:this.getSelection(),q=this.editor.delta,U=$();if(F!=null&&(R===!0&&(R=F.index),L==null?F=H(F,U,D):L!==0&&(F=H(F,R,L,D)),this.setSelection(F,f.default.sources.SILENT)),U.length()>0){var O,V=[f.default.events.TEXT_CHANGE,U,q,D];if((O=this.emitter).emit.apply(O,[f.default.events.EDITOR_CHANGE].concat(V)),D!==f.default.sources.SILENT){var W;(W=this.emitter).emit.apply(W,V)}}return U}function z($,D,R,L,F){var q={};return typeof $.index=="number"&&typeof $.length=="number"?typeof D!="number"?(F=L,L=R,R=D,D=$.length,$=$.index):(D=$.length,$=$.index):typeof D!="number"&&(F=L,L=R,R=D,D=0),(typeof R>"u"?"undefined":s(R))==="object"?(q=R,F=L):typeof R=="string"&&(L!=null?q[R]=L:F=R),F=F||f.default.sources.API,[$,D,q,F]}function H($,D,R,L){if($==null)return null;var F=void 0,q=void 0;if(D instanceof u.default){var U=[$.index,$.index+$.length].map(function(K){return D.transformPosition(K,L!==f.default.sources.USER)}),O=o(U,2);F=O[0],q=O[1]}else{var V=[$.index,$.index+$.length].map(function(K){return K<D||K===D&&L===f.default.sources.USER?K:R>=0?K+R:Math.max(D,K+R)}),W=o(V,2);F=W[0],q=W[1]}return new m.Range(F,q-F)}r.expandConfig=j,r.overload=z,r.default=P},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function w(p,m){for(var E=0;E<m.length;E++){var g=m[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(p,g.key,g)}}return function(p,m,E){return m&&w(p.prototype,m),E&&w(p,E),p}}(),o=function w(p,m,E){p===null&&(p=Function.prototype);var g=Object.getOwnPropertyDescriptor(p,m);if(g===void 0){var T=Object.getPrototypeOf(p);return T===null?void 0:w(T,m,E)}else{if("value"in g)return g.value;var x=g.get;return x===void 0?void 0:x.call(E)}},a=i(7),l=c(a),u=i(0),h=c(u);function c(w){return w&&w.__esModule?w:{default:w}}function d(w,p){if(!(w instanceof p))throw new TypeError("Cannot call a class as a function")}function f(w,p){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:w}function v(w,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);w.prototype=Object.create(p&&p.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(w,p):w.__proto__=p)}var y=function(w){v(p,w);function p(){return d(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return s(p,[{key:"formatAt",value:function(E,g,T,x){if(p.compare(this.statics.blotName,T)<0&&h.default.query(T,h.default.Scope.BLOT)){var b=this.isolate(E,g);x&&b.wrap(T,x)}else o(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"formatAt",this).call(this,E,g,T,x)}},{key:"optimize",value:function(E){if(o(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"optimize",this).call(this,E),this.parent instanceof p&&p.compare(this.statics.blotName,this.parent.statics.blotName)>0){var g=this.parent.isolate(this.offset(),this.length());this.moveChildren(g),g.wrap(this)}}}],[{key:"compare",value:function(E,g){var T=p.order.indexOf(E),x=p.order.indexOf(g);return T>=0||x>=0?T-x:E===g?0:E<g?-1:1}}]),p}(h.default.Inline);y.allowedChildren=[y,h.default.Embed,l.default],y.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),o=a(s);function a(d){return d&&d.__esModule?d:{default:d}}function l(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function u(d,f){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:d}function h(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var c=function(d){h(f,d);function f(){return l(this,f),u(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return f}(o.default.Text);r.default=c},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function m(E,g){for(var T=0;T<g.length;T++){var x=g[T];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(E,x.key,x)}}return function(E,g,T){return g&&m(E.prototype,g),T&&m(E,T),E}}(),o=function m(E,g,T){E===null&&(E=Function.prototype);var x=Object.getOwnPropertyDescriptor(E,g);if(x===void 0){var b=Object.getPrototypeOf(E);return b===null?void 0:m(b,g,T)}else{if("value"in x)return x.value;var S=x.get;return S===void 0?void 0:S.call(T)}},a=i(54),l=c(a),u=i(10),h=c(u);function c(m){return m&&m.__esModule?m:{default:m}}function d(m,E){if(!(m instanceof E))throw new TypeError("Cannot call a class as a function")}function f(m,E){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:m}function v(m,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);m.prototype=Object.create(E&&E.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(m,E):m.__proto__=E)}var y=(0,h.default)("quill:events"),w=["selectionchange","mousedown","mouseup","click"];w.forEach(function(m){document.addEventListener(m,function(){for(var E=arguments.length,g=Array(E),T=0;T<E;T++)g[T]=arguments[T];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(x){if(x.__quill&&x.__quill.emitter){var b;(b=x.__quill.emitter).handleDOM.apply(b,g)}})})});var p=function(m){v(E,m);function E(){d(this,E);var g=f(this,(E.__proto__||Object.getPrototypeOf(E)).call(this));return g.listeners={},g.on("error",y.error),g}return s(E,[{key:"emit",value:function(){y.log.apply(y,arguments),o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(T){for(var x=arguments.length,b=Array(x>1?x-1:0),S=1;S<x;S++)b[S-1]=arguments[S];(this.listeners[T.type]||[]).forEach(function(k){var I=k.node,C=k.handler;(T.target===I||I.contains(T.target))&&C.apply(void 0,[T].concat(b))})}},{key:"listenDOM",value:function(T,x,b){this.listeners[T]||(this.listeners[T]=[]),this.listeners[T].push({node:x,handler:b})}}]),E}(l.default);p.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},p.sources={API:"api",SILENT:"silent",USER:"user"},r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});function s(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var o=function a(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s(this,a),this.quill=l,this.options=u};o.DEFAULTS={},r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=["error","warn","log","info"],o="warn";function a(u){if(s.indexOf(u)<=s.indexOf(o)){for(var h,c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];(h=console)[u].apply(h,d)}}function l(u){return s.reduce(function(h,c){return h[c]=a.bind(console,c,u),h},{})}a.level=l.level=function(u){o=u},r.default=l},function(n,r,i){var s=Array.prototype.slice,o=i(52),a=i(53),l=n.exports=function(d,f,v){return v||(v={}),d===f?!0:d instanceof Date&&f instanceof Date?d.getTime()===f.getTime():!d||!f||typeof d!="object"&&typeof f!="object"?v.strict?d===f:d==f:c(d,f,v)};function u(d){return d==null}function h(d){return!(!d||typeof d!="object"||typeof d.length!="number"||typeof d.copy!="function"||typeof d.slice!="function"||d.length>0&&typeof d[0]!="number")}function c(d,f,v){var y,w;if(u(d)||u(f)||d.prototype!==f.prototype)return!1;if(a(d))return a(f)?(d=s.call(d),f=s.call(f),l(d,f,v)):!1;if(h(d)){if(!h(f)||d.length!==f.length)return!1;for(y=0;y<d.length;y++)if(d[y]!==f[y])return!1;return!0}try{var p=o(d),m=o(f)}catch{return!1}if(p.length!=m.length)return!1;for(p.sort(),m.sort(),y=p.length-1;y>=0;y--)if(p[y]!=m[y])return!1;for(y=p.length-1;y>=0;y--)if(w=p[y],!l(d[w],f[w],v))return!1;return typeof d==typeof f}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(1),o=function(){function a(l,u,h){h===void 0&&(h={}),this.attrName=l,this.keyName=u;var c=s.Scope.TYPE&s.Scope.ATTRIBUTE;h.scope!=null?this.scope=h.scope&s.Scope.LEVEL|c:this.scope=s.Scope.ATTRIBUTE,h.whitelist!=null&&(this.whitelist=h.whitelist)}return a.keys=function(l){return[].map.call(l.attributes,function(u){return u.name})},a.prototype.add=function(l,u){return this.canAdd(l,u)?(l.setAttribute(this.keyName,u),!0):!1},a.prototype.canAdd=function(l,u){var h=s.query(l,s.Scope.BLOT&(this.scope|s.Scope.TYPE));return h==null?!1:this.whitelist==null?!0:typeof u=="string"?this.whitelist.indexOf(u.replace(/["']/g,""))>-1:this.whitelist.indexOf(u)>-1},a.prototype.remove=function(l){l.removeAttribute(this.keyName)},a.prototype.value=function(l){var u=l.getAttribute(this.keyName);return this.canAdd(l,u)&&u?u:""},a}();r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var s=function(){function S(k,I){var C=[],A=!0,N=!1,P=void 0;try{for(var j=k[Symbol.iterator](),B;!(A=(B=j.next()).done)&&(C.push(B.value),!(I&&C.length===I));A=!0);}catch(z){N=!0,P=z}finally{try{!A&&j.return&&j.return()}finally{if(N)throw P}}return C}return function(k,I){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return S(k,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function S(k,I){for(var C=0;C<I.length;C++){var A=I[C];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(k,A.key,A)}}return function(k,I,C){return I&&S(k.prototype,I),C&&S(k,C),k}}(),a=function S(k,I,C){k===null&&(k=Function.prototype);var A=Object.getOwnPropertyDescriptor(k,I);if(A===void 0){var N=Object.getPrototypeOf(k);return N===null?void 0:S(N,I,C)}else{if("value"in A)return A.value;var P=A.get;return P===void 0?void 0:P.call(C)}},l=i(2),u=m(l),h=i(0),c=m(h),d=i(4),f=m(d),v=i(6),y=m(v),w=i(7),p=m(w);function m(S){return S&&S.__esModule?S:{default:S}}function E(S,k){if(!(S instanceof k))throw new TypeError("Cannot call a class as a function")}function g(S,k){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:S}function T(S,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);S.prototype=Object.create(k&&k.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(S,k):S.__proto__=k)}var x=function(S){T(k,S);function k(){return E(this,k),g(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return k}(y.default);x.blotName="code",x.tagName="CODE";var b=function(S){T(k,S);function k(){return E(this,k),g(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return o(k,[{key:"delta",value:function(){var C=this,A=this.domNode.textContent;return A.endsWith(`
`)&&(A=A.slice(0,-1)),A.split(`
`).reduce(function(N,P){return N.insert(P).insert(`
`,C.formats())},new u.default)}},{key:"format",value:function(C,A){if(!(C===this.statics.blotName&&A)){var N=this.descendant(p.default,this.length()-1),P=s(N,1),j=P[0];j!=null&&j.deleteAt(j.length()-1,1),a(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,C,A)}}},{key:"formatAt",value:function(C,A,N,P){if(A!==0&&!(c.default.query(N,c.default.Scope.BLOCK)==null||N===this.statics.blotName&&P===this.statics.formats(this.domNode))){var j=this.newlineIndex(C);if(!(j<0||j>=C+A)){var B=this.newlineIndex(C,!0)+1,z=j-B+1,H=this.isolate(B,z),$=H.next;H.format(N,P),$ instanceof k&&$.formatAt(0,C-B+A-z,N,P)}}}},{key:"insertAt",value:function(C,A,N){if(N==null){var P=this.descendant(p.default,C),j=s(P,2),B=j[0],z=j[1];B.insertAt(z,A)}}},{key:"length",value:function(){var C=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?C:C+1}},{key:"newlineIndex",value:function(C){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(A)return this.domNode.textContent.slice(0,C).lastIndexOf(`
`);var N=this.domNode.textContent.slice(C).indexOf(`
`);return N>-1?C+N:-1}},{key:"optimize",value:function(C){this.domNode.textContent.endsWith(`
`)||this.appendChild(c.default.create("text",`
`)),a(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,C);var A=this.next;A!=null&&A.prev===this&&A.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===A.statics.formats(A.domNode)&&(A.optimize(C),A.moveChildren(this),A.remove())}},{key:"replace",value:function(C){a(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replace",this).call(this,C),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(A){var N=c.default.find(A);N==null?A.parentNode.removeChild(A):N instanceof c.default.Embed?N.remove():N.unwrap()})}}],[{key:"create",value:function(C){var A=a(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,C);return A.setAttribute("spellcheck",!1),A}},{key:"formats",value:function(){return!0}}]),k}(f.default);b.blotName="code-block",b.tagName="PRE",b.TAB="  ",r.Code=x,r.default=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},o=function(){function $(D,R){var L=[],F=!0,q=!1,U=void 0;try{for(var O=D[Symbol.iterator](),V;!(F=(V=O.next()).done)&&(L.push(V.value),!(R&&L.length===R));F=!0);}catch(W){q=!0,U=W}finally{try{!F&&O.return&&O.return()}finally{if(q)throw U}}return L}return function(D,R){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return $(D,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function $(D,R){for(var L=0;L<R.length;L++){var F=R[L];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(D,F.key,F)}}return function(D,R,L){return R&&$(D.prototype,R),L&&$(D,L),D}}(),l=i(2),u=A(l),h=i(20),c=A(h),d=i(0),f=A(d),v=i(13),y=A(v),w=i(24),p=A(w),m=i(4),E=A(m),g=i(16),T=A(g),x=i(21),b=A(x),S=i(11),k=A(S),I=i(3),C=A(I);function A($){return $&&$.__esModule?$:{default:$}}function N($,D,R){return D in $?Object.defineProperty($,D,{value:R,enumerable:!0,configurable:!0,writable:!0}):$[D]=R,$}function P($,D){if(!($ instanceof D))throw new TypeError("Cannot call a class as a function")}var j=/^[ -~]*$/,B=function(){function $(D){P(this,$),this.scroll=D,this.delta=this.getDelta()}return a($,[{key:"applyDelta",value:function(R){var L=this,F=!1;this.scroll.update();var q=this.scroll.length();return this.scroll.batchStart(),R=H(R),R.reduce(function(U,O){var V=O.retain||O.delete||O.insert.length||1,W=O.attributes||{};if(O.insert!=null){if(typeof O.insert=="string"){var K=O.insert;K.endsWith(`
`)&&F&&(F=!1,K=K.slice(0,-1)),U>=q&&!K.endsWith(`
`)&&(F=!0),L.scroll.insertAt(U,K);var X=L.scroll.line(U),le=o(X,2),pe=le[0],ye=le[1],Ie=(0,C.default)({},(0,m.bubbleFormats)(pe));if(pe instanceof E.default){var je=pe.descendant(f.default.Leaf,ye),an=o(je,1),vt=an[0];Ie=(0,C.default)(Ie,(0,m.bubbleFormats)(vt))}W=c.default.attributes.diff(Ie,W)||{}}else if(s(O.insert)==="object"){var G=Object.keys(O.insert)[0];if(G==null)return U;L.scroll.insertAt(U,G,O.insert[G])}q+=V}return Object.keys(W).forEach(function(Y){L.scroll.formatAt(U,V,Y,W[Y])}),U+V},0),R.reduce(function(U,O){return typeof O.delete=="number"?(L.scroll.deleteAt(U,O.delete),U):U+(O.retain||O.insert.length||1)},0),this.scroll.batchEnd(),this.update(R)}},{key:"deleteText",value:function(R,L){return this.scroll.deleteAt(R,L),this.update(new u.default().retain(R).delete(L))}},{key:"formatLine",value:function(R,L){var F=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(q).forEach(function(U){if(!(F.scroll.whitelist!=null&&!F.scroll.whitelist[U])){var O=F.scroll.lines(R,Math.max(L,1)),V=L;O.forEach(function(W){var K=W.length();if(!(W instanceof y.default))W.format(U,q[U]);else{var X=R-W.offset(F.scroll),le=W.newlineIndex(X+V)-X+1;W.formatAt(X,le,U,q[U])}V-=K})}}),this.scroll.optimize(),this.update(new u.default().retain(R).retain(L,(0,b.default)(q)))}},{key:"formatText",value:function(R,L){var F=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(q).forEach(function(U){F.scroll.formatAt(R,L,U,q[U])}),this.update(new u.default().retain(R).retain(L,(0,b.default)(q)))}},{key:"getContents",value:function(R,L){return this.delta.slice(R,R+L)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(R,L){return R.concat(L.delta())},new u.default)}},{key:"getFormat",value:function(R){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,F=[],q=[];L===0?this.scroll.path(R).forEach(function(O){var V=o(O,1),W=V[0];W instanceof E.default?F.push(W):W instanceof f.default.Leaf&&q.push(W)}):(F=this.scroll.lines(R,L),q=this.scroll.descendants(f.default.Leaf,R,L));var U=[F,q].map(function(O){if(O.length===0)return{};for(var V=(0,m.bubbleFormats)(O.shift());Object.keys(V).length>0;){var W=O.shift();if(W==null)return V;V=z((0,m.bubbleFormats)(W),V)}return V});return C.default.apply(C.default,U)}},{key:"getText",value:function(R,L){return this.getContents(R,L).filter(function(F){return typeof F.insert=="string"}).map(function(F){return F.insert}).join("")}},{key:"insertEmbed",value:function(R,L,F){return this.scroll.insertAt(R,L,F),this.update(new u.default().retain(R).insert(N({},L,F)))}},{key:"insertText",value:function(R,L){var F=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return L=L.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(R,L),Object.keys(q).forEach(function(U){F.scroll.formatAt(R,L.length,U,q[U])}),this.update(new u.default().retain(R).insert(L,(0,b.default)(q)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var R=this.scroll.children.head;return R.statics.blotName!==E.default.blotName||R.children.length>1?!1:R.children.head instanceof T.default}},{key:"removeFormat",value:function(R,L){var F=this.getText(R,L),q=this.scroll.line(R+L),U=o(q,2),O=U[0],V=U[1],W=0,K=new u.default;O!=null&&(O instanceof y.default?W=O.newlineIndex(V)-V+1:W=O.length()-V,K=O.delta().slice(V,V+W-1).insert(`
`));var X=this.getContents(R,L+W),le=X.diff(new u.default().insert(F).concat(K)),pe=new u.default().retain(R).concat(le);return this.applyDelta(pe)}},{key:"update",value:function(R){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,q=this.delta;if(L.length===1&&L[0].type==="characterData"&&L[0].target.data.match(j)&&f.default.find(L[0].target)){var U=f.default.find(L[0].target),O=(0,m.bubbleFormats)(U),V=U.offset(this.scroll),W=L[0].oldValue.replace(p.default.CONTENTS,""),K=new u.default().insert(W),X=new u.default().insert(U.value()),le=new u.default().retain(V).concat(K.diff(X,F));R=le.reduce(function(pe,ye){return ye.insert?pe.insert(ye.insert,O):pe.push(ye)},new u.default),this.delta=q.compose(R)}else this.delta=this.getDelta(),(!R||!(0,k.default)(q.compose(R),this.delta))&&(R=q.diff(this.delta,F));return R}}]),$}();function z($,D){return Object.keys(D).reduce(function(R,L){return $[L]==null||(D[L]===$[L]?R[L]=D[L]:Array.isArray(D[L])?D[L].indexOf($[L])<0&&(R[L]=D[L].concat([$[L]])):R[L]=[D[L],$[L]]),R},{})}function H($){return $.reduce(function(D,R){if(R.insert===1){var L=(0,b.default)(R.attributes);return delete L.image,D.insert({image:R.attributes.image},L)}if(R.attributes!=null&&(R.attributes.list===!0||R.attributes.bullet===!0)&&(R=(0,b.default)(R),R.attributes.list?R.attributes.list="ordered":(R.attributes.list="bullet",delete R.attributes.bullet)),typeof R.insert=="string"){var F=R.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return D.insert(F,R.attributes)}return D.push(R)},new u.default)}r.default=B},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var s=function(){function S(k,I){var C=[],A=!0,N=!1,P=void 0;try{for(var j=k[Symbol.iterator](),B;!(A=(B=j.next()).done)&&(C.push(B.value),!(I&&C.length===I));A=!0);}catch(z){N=!0,P=z}finally{try{!A&&j.return&&j.return()}finally{if(N)throw P}}return C}return function(k,I){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return S(k,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function S(k,I){for(var C=0;C<I.length;C++){var A=I[C];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(k,A.key,A)}}return function(k,I,C){return I&&S(k.prototype,I),C&&S(k,C),k}}(),a=i(0),l=p(a),u=i(21),h=p(u),c=i(11),d=p(c),f=i(8),v=p(f),y=i(10),w=p(y);function p(S){return S&&S.__esModule?S:{default:S}}function m(S){if(Array.isArray(S)){for(var k=0,I=Array(S.length);k<S.length;k++)I[k]=S[k];return I}else return Array.from(S)}function E(S,k){if(!(S instanceof k))throw new TypeError("Cannot call a class as a function")}var g=(0,w.default)("quill:selection"),T=function S(k){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;E(this,S),this.index=k,this.length=I},x=function(){function S(k,I){var C=this;E(this,S),this.emitter=I,this.scroll=k,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new T(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){C.mouseDown||setTimeout(C.update.bind(C,v.default.sources.USER),1)}),this.emitter.on(v.default.events.EDITOR_CHANGE,function(A,N){A===v.default.events.TEXT_CHANGE&&N.length()>0&&C.update(v.default.sources.SILENT)}),this.emitter.on(v.default.events.SCROLL_BEFORE_UPDATE,function(){if(C.hasFocus()){var A=C.getNativeRange();A!=null&&A.start.node!==C.cursor.textNode&&C.emitter.once(v.default.events.SCROLL_UPDATE,function(){try{C.setNativeRange(A.start.node,A.start.offset,A.end.node,A.end.offset)}catch{}})}}),this.emitter.on(v.default.events.SCROLL_OPTIMIZE,function(A,N){if(N.range){var P=N.range,j=P.startNode,B=P.startOffset,z=P.endNode,H=P.endOffset;C.setNativeRange(j,B,z,H)}}),this.update(v.default.sources.SILENT)}return o(S,[{key:"handleComposition",value:function(){var I=this;this.root.addEventListener("compositionstart",function(){I.composing=!0}),this.root.addEventListener("compositionend",function(){if(I.composing=!1,I.cursor.parent){var C=I.cursor.restore();if(!C)return;setTimeout(function(){I.setNativeRange(C.startNode,C.startOffset,C.endNode,C.endOffset)},1)}})}},{key:"handleDragging",value:function(){var I=this;this.emitter.listenDOM("mousedown",document.body,function(){I.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){I.mouseDown=!1,I.update(v.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(I,C){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[I])){this.scroll.update();var A=this.getNativeRange();if(!(A==null||!A.native.collapsed||l.default.query(I,l.default.Scope.BLOCK))){if(A.start.node!==this.cursor.textNode){var N=l.default.find(A.start.node,!1);if(N==null)return;if(N instanceof l.default.Leaf){var P=N.split(A.start.offset);N.parent.insertBefore(this.cursor,P)}else N.insertBefore(this.cursor,A.start.node);this.cursor.attach()}this.cursor.format(I,C),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(I){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,A=this.scroll.length();I=Math.min(I,A-1),C=Math.min(I+C,A-1)-I;var N=void 0,P=this.scroll.leaf(I),j=s(P,2),B=j[0],z=j[1];if(B==null)return null;var H=B.position(z,!0),$=s(H,2);N=$[0],z=$[1];var D=document.createRange();if(C>0){D.setStart(N,z);var R=this.scroll.leaf(I+C),L=s(R,2);if(B=L[0],z=L[1],B==null)return null;var F=B.position(z,!0),q=s(F,2);return N=q[0],z=q[1],D.setEnd(N,z),D.getBoundingClientRect()}else{var U="left",O=void 0;return N instanceof Text?(z<N.data.length?(D.setStart(N,z),D.setEnd(N,z+1)):(D.setStart(N,z-1),D.setEnd(N,z),U="right"),O=D.getBoundingClientRect()):(O=B.domNode.getBoundingClientRect(),z>0&&(U="right")),{bottom:O.top+O.height,height:O.height,left:O[U],right:O[U],top:O.top,width:0}}}},{key:"getNativeRange",value:function(){var I=document.getSelection();if(I==null||I.rangeCount<=0)return null;var C=I.getRangeAt(0);if(C==null)return null;var A=this.normalizeNative(C);return g.info("getNativeRange",A),A}},{key:"getRange",value:function(){var I=this.getNativeRange();if(I==null)return[null,null];var C=this.normalizedToRange(I);return[C,I]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(I){var C=this,A=[[I.start.node,I.start.offset]];I.native.collapsed||A.push([I.end.node,I.end.offset]);var N=A.map(function(B){var z=s(B,2),H=z[0],$=z[1],D=l.default.find(H,!0),R=D.offset(C.scroll);return $===0?R:D instanceof l.default.Container?R+D.length():R+D.index(H,$)}),P=Math.min(Math.max.apply(Math,m(N)),this.scroll.length()-1),j=Math.min.apply(Math,[P].concat(m(N)));return new T(j,P-j)}},{key:"normalizeNative",value:function(I){if(!b(this.root,I.startContainer)||!I.collapsed&&!b(this.root,I.endContainer))return null;var C={start:{node:I.startContainer,offset:I.startOffset},end:{node:I.endContainer,offset:I.endOffset},native:I};return[C.start,C.end].forEach(function(A){for(var N=A.node,P=A.offset;!(N instanceof Text)&&N.childNodes.length>0;)if(N.childNodes.length>P)N=N.childNodes[P],P=0;else if(N.childNodes.length===P)N=N.lastChild,P=N instanceof Text?N.data.length:N.childNodes.length+1;else break;A.node=N,A.offset=P}),C}},{key:"rangeToNative",value:function(I){var C=this,A=I.collapsed?[I.index]:[I.index,I.index+I.length],N=[],P=this.scroll.length();return A.forEach(function(j,B){j=Math.min(P-1,j);var z=void 0,H=C.scroll.leaf(j),$=s(H,2),D=$[0],R=$[1],L=D.position(R,B!==0),F=s(L,2);z=F[0],R=F[1],N.push(z,R)}),N.length<2&&(N=N.concat(N)),N}},{key:"scrollIntoView",value:function(I){var C=this.lastRange;if(C!=null){var A=this.getBounds(C.index,C.length);if(A!=null){var N=this.scroll.length()-1,P=this.scroll.line(Math.min(C.index,N)),j=s(P,1),B=j[0],z=B;if(C.length>0){var H=this.scroll.line(Math.min(C.index+C.length,N)),$=s(H,1);z=$[0]}if(!(B==null||z==null)){var D=I.getBoundingClientRect();A.top<D.top?I.scrollTop-=D.top-A.top:A.bottom>D.bottom&&(I.scrollTop+=A.bottom-D.bottom)}}}}},{key:"setNativeRange",value:function(I,C){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:I,N=arguments.length>3&&arguments[3]!==void 0?arguments[3]:C,P=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(g.info("setNativeRange",I,C,A,N),!(I!=null&&(this.root.parentNode==null||I.parentNode==null||A.parentNode==null))){var j=document.getSelection();if(j!=null)if(I!=null){this.hasFocus()||this.root.focus();var B=(this.getNativeRange()||{}).native;if(B==null||P||I!==B.startContainer||C!==B.startOffset||A!==B.endContainer||N!==B.endOffset){I.tagName=="BR"&&(C=[].indexOf.call(I.parentNode.childNodes,I),I=I.parentNode),A.tagName=="BR"&&(N=[].indexOf.call(A.parentNode.childNodes,A),A=A.parentNode);var z=document.createRange();z.setStart(I,C),z.setEnd(A,N),j.removeAllRanges(),j.addRange(z)}}else j.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(I){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof C=="string"&&(A=C,C=!1),g.info("setRange",I),I!=null){var N=this.rangeToNative(I);this.setNativeRange.apply(this,m(N).concat([C]))}else this.setNativeRange(null);this.update(A)}},{key:"update",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v.default.sources.USER,C=this.lastRange,A=this.getRange(),N=s(A,2),P=N[0],j=N[1];if(this.lastRange=P,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,d.default)(C,this.lastRange)){var B;!this.composing&&j!=null&&j.native.collapsed&&j.start.node!==this.cursor.textNode&&this.cursor.restore();var z=[v.default.events.SELECTION_CHANGE,(0,h.default)(this.lastRange),(0,h.default)(C),I];if((B=this.emitter).emit.apply(B,[v.default.events.EDITOR_CHANGE].concat(z)),I!==v.default.sources.SILENT){var H;(H=this.emitter).emit.apply(H,z)}}}}]),S}();function b(S,k){try{k.parentNode}catch{return!1}return k instanceof Text&&(k=k.parentNode),S.contains(k)}r.Range=T,r.default=x},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function v(y,w){for(var p=0;p<w.length;p++){var m=w[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(y,m.key,m)}}return function(y,w,p){return w&&v(y.prototype,w),p&&v(y,p),y}}(),o=function v(y,w,p){y===null&&(y=Function.prototype);var m=Object.getOwnPropertyDescriptor(y,w);if(m===void 0){var E=Object.getPrototypeOf(y);return E===null?void 0:v(E,w,p)}else{if("value"in m)return m.value;var g=m.get;return g===void 0?void 0:g.call(p)}},a=i(0),l=u(a);function u(v){return v&&v.__esModule?v:{default:v}}function h(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function c(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function d(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var f=function(v){d(y,v);function y(){return h(this,y),c(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return s(y,[{key:"insertInto",value:function(p,m){p.children.length===0?o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"insertInto",this).call(this,p,m):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),y}(l.default.Embed);f.blotName="break",f.tagName="BR",r.default=f},function(n,r,i){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var v in f)f.hasOwnProperty(v)&&(d[v]=f[v])};return function(d,f){c(d,f);function v(){this.constructor=d}d.prototype=f===null?Object.create(f):(v.prototype=f.prototype,new v)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(44),a=i(30),l=i(1),u=function(c){s(d,c);function d(f){var v=c.call(this,f)||this;return v.build(),v}return d.prototype.appendChild=function(f){this.insertBefore(f)},d.prototype.attach=function(){c.prototype.attach.call(this),this.children.forEach(function(f){f.attach()})},d.prototype.build=function(){var f=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(v){try{var y=h(v);f.insertBefore(y,f.children.head||void 0)}catch(w){if(w instanceof l.ParchmentError)return;throw w}})},d.prototype.deleteAt=function(f,v){if(f===0&&v===this.length())return this.remove();this.children.forEachAt(f,v,function(y,w,p){y.deleteAt(w,p)})},d.prototype.descendant=function(f,v){var y=this.children.find(v),w=y[0],p=y[1];return f.blotName==null&&f(w)||f.blotName!=null&&w instanceof f?[w,p]:w instanceof d?w.descendant(f,p):[null,-1]},d.prototype.descendants=function(f,v,y){v===void 0&&(v=0),y===void 0&&(y=Number.MAX_VALUE);var w=[],p=y;return this.children.forEachAt(v,y,function(m,E,g){(f.blotName==null&&f(m)||f.blotName!=null&&m instanceof f)&&w.push(m),m instanceof d&&(w=w.concat(m.descendants(f,E,p))),p-=g}),w},d.prototype.detach=function(){this.children.forEach(function(f){f.detach()}),c.prototype.detach.call(this)},d.prototype.formatAt=function(f,v,y,w){this.children.forEachAt(f,v,function(p,m,E){p.formatAt(m,E,y,w)})},d.prototype.insertAt=function(f,v,y){var w=this.children.find(f),p=w[0],m=w[1];if(p)p.insertAt(m,v,y);else{var E=y==null?l.create("text",v):l.create(v,y);this.appendChild(E)}},d.prototype.insertBefore=function(f,v){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(y){return f instanceof y}))throw new l.ParchmentError("Cannot insert "+f.statics.blotName+" into "+this.statics.blotName);f.insertInto(this,v)},d.prototype.length=function(){return this.children.reduce(function(f,v){return f+v.length()},0)},d.prototype.moveChildren=function(f,v){this.children.forEach(function(y){f.insertBefore(y,v)})},d.prototype.optimize=function(f){if(c.prototype.optimize.call(this,f),this.children.length===0)if(this.statics.defaultChild!=null){var v=l.create(this.statics.defaultChild);this.appendChild(v),v.optimize(f)}else this.remove()},d.prototype.path=function(f,v){v===void 0&&(v=!1);var y=this.children.find(f,v),w=y[0],p=y[1],m=[[this,f]];return w instanceof d?m.concat(w.path(p,v)):(w!=null&&m.push([w,p]),m)},d.prototype.removeChild=function(f){this.children.remove(f)},d.prototype.replace=function(f){f instanceof d&&f.moveChildren(this),c.prototype.replace.call(this,f)},d.prototype.split=function(f,v){if(v===void 0&&(v=!1),!v){if(f===0)return this;if(f===this.length())return this.next}var y=this.clone();return this.parent.insertBefore(y,this.next),this.children.forEachAt(f,this.length(),function(w,p,m){w=w.split(p,v),y.appendChild(w)}),y},d.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},d.prototype.update=function(f,v){var y=this,w=[],p=[];f.forEach(function(m){m.target===y.domNode&&m.type==="childList"&&(w.push.apply(w,m.addedNodes),p.push.apply(p,m.removedNodes))}),p.forEach(function(m){if(!(m.parentNode!=null&&m.tagName!=="IFRAME"&&document.body.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var E=l.find(m);E!=null&&(E.domNode.parentNode==null||E.domNode.parentNode===y.domNode)&&E.detach()}}),w.filter(function(m){return m.parentNode==y.domNode}).sort(function(m,E){return m===E?0:m.compareDocumentPosition(E)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(m){var E=null;m.nextSibling!=null&&(E=l.find(m.nextSibling));var g=h(m);(g.next!=E||g.next==null)&&(g.parent!=null&&g.parent.removeChild(y),y.insertBefore(g,E||void 0))})},d}(a.default);function h(c){var d=l.find(c);if(d==null)try{d=l.create(c)}catch{d=l.create(l.Scope.INLINE),[].slice.call(c.childNodes).forEach(function(v){d.domNode.appendChild(v)}),c.parentNode&&c.parentNode.replaceChild(d.domNode,c),d.attach()}return d}r.default=u},function(n,r,i){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var v in f)f.hasOwnProperty(v)&&(d[v]=f[v])};return function(d,f){c(d,f);function v(){this.constructor=d}d.prototype=f===null?Object.create(f):(v.prototype=f.prototype,new v)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),a=i(31),l=i(17),u=i(1),h=function(c){s(d,c);function d(f){var v=c.call(this,f)||this;return v.attributes=new a.default(v.domNode),v}return d.formats=function(f){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return f.tagName.toLowerCase()},d.prototype.format=function(f,v){var y=u.query(f);y instanceof o.default?this.attributes.attribute(y,v):v&&y!=null&&(f!==this.statics.blotName||this.formats()[f]!==v)&&this.replaceWith(f,v)},d.prototype.formats=function(){var f=this.attributes.values(),v=this.statics.formats(this.domNode);return v!=null&&(f[this.statics.blotName]=v),f},d.prototype.replaceWith=function(f,v){var y=c.prototype.replaceWith.call(this,f,v);return this.attributes.copy(y),y},d.prototype.update=function(f,v){var y=this;c.prototype.update.call(this,f,v),f.some(function(w){return w.target===y.domNode&&w.type==="attributes"})&&this.attributes.build()},d.prototype.wrap=function(f,v){var y=c.prototype.wrap.call(this,f,v);return y instanceof d&&y.statics.scope===this.statics.scope&&this.attributes.move(y),y},d}(l.default);r.default=h},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,c){h.__proto__=c}||function(h,c){for(var d in c)c.hasOwnProperty(d)&&(h[d]=c[d])};return function(h,c){u(h,c);function d(){this.constructor=h}h.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(30),a=i(1),l=function(u){s(h,u);function h(){return u!==null&&u.apply(this,arguments)||this}return h.value=function(c){return!0},h.prototype.index=function(c,d){return this.domNode===c||this.domNode.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(d,1):-1},h.prototype.position=function(c,d){var f=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return c>0&&(f+=1),[this.parent.domNode,f]},h.prototype.value=function(){var c;return c={},c[this.statics.blotName]=this.statics.value(this.domNode)||!0,c},h.scope=a.Scope.INLINE_BLOT,h}(o.default);r.default=l},function(n,r,i){var s=i(11),o=i(3),a={attributes:{compose:function(u,h,c){typeof u!="object"&&(u={}),typeof h!="object"&&(h={});var d=o(!0,{},h);c||(d=Object.keys(d).reduce(function(v,y){return d[y]!=null&&(v[y]=d[y]),v},{}));for(var f in u)u[f]!==void 0&&h[f]===void 0&&(d[f]=u[f]);return Object.keys(d).length>0?d:void 0},diff:function(u,h){typeof u!="object"&&(u={}),typeof h!="object"&&(h={});var c=Object.keys(u).concat(Object.keys(h)).reduce(function(d,f){return s(u[f],h[f])||(d[f]=h[f]===void 0?null:h[f]),d},{});return Object.keys(c).length>0?c:void 0},transform:function(u,h,c){if(typeof u!="object")return h;if(typeof h=="object"){if(!c)return h;var d=Object.keys(h).reduce(function(f,v){return u[v]===void 0&&(f[v]=h[v]),f},{});return Object.keys(d).length>0?d:void 0}}},iterator:function(u){return new l(u)},length:function(u){return typeof u.delete=="number"?u.delete:typeof u.retain=="number"?u.retain:typeof u.insert=="string"?u.insert.length:1}};function l(u){this.ops=u,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(u){u||(u=1/0);var h=this.ops[this.index];if(h){var c=this.offset,d=a.length(h);if(u>=d-c?(u=d-c,this.index+=1,this.offset=0):this.offset+=u,typeof h.delete=="number")return{delete:u};var f={};return h.attributes&&(f.attributes=h.attributes),typeof h.retain=="number"?f.retain=u:typeof h.insert=="string"?f.insert=h.insert.substr(c,u):f.insert=h.insert,f}else return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var u=this.offset,h=this.index,c=this.next(),d=this.ops.slice(this.index);return this.offset=u,this.index=h,[c].concat(d)}else return[]},n.exports=a},function(n,r){var i=function(){function s(y,w){return w!=null&&y instanceof w}var o;try{o=Map}catch{o=function(){}}var a;try{a=Set}catch{a=function(){}}var l;try{l=Promise}catch{l=function(){}}function u(y,w,p,m,E){typeof w=="object"&&(p=w.depth,m=w.prototype,E=w.includeNonEnumerable,w=w.circular);var g=[],T=[],x=typeof Buffer<"u";typeof w>"u"&&(w=!0),typeof p>"u"&&(p=1/0);function b(S,k){if(S===null)return null;if(k===0)return S;var I,C;if(typeof S!="object")return S;if(s(S,o))I=new o;else if(s(S,a))I=new a;else if(s(S,l))I=new l(function(D,R){S.then(function(L){D(b(L,k-1))},function(L){R(b(L,k-1))})});else if(u.__isArray(S))I=[];else if(u.__isRegExp(S))I=new RegExp(S.source,v(S)),S.lastIndex&&(I.lastIndex=S.lastIndex);else if(u.__isDate(S))I=new Date(S.getTime());else{if(x&&Buffer.isBuffer(S))return Buffer.allocUnsafe?I=Buffer.allocUnsafe(S.length):I=new Buffer(S.length),S.copy(I),I;s(S,Error)?I=Object.create(S):typeof m>"u"?(C=Object.getPrototypeOf(S),I=Object.create(C)):(I=Object.create(m),C=m)}if(w){var A=g.indexOf(S);if(A!=-1)return T[A];g.push(S),T.push(I)}s(S,o)&&S.forEach(function(D,R){var L=b(R,k-1),F=b(D,k-1);I.set(L,F)}),s(S,a)&&S.forEach(function(D){var R=b(D,k-1);I.add(R)});for(var N in S){var P;C&&(P=Object.getOwnPropertyDescriptor(C,N)),!(P&&P.set==null)&&(I[N]=b(S[N],k-1))}if(Object.getOwnPropertySymbols)for(var j=Object.getOwnPropertySymbols(S),N=0;N<j.length;N++){var B=j[N],z=Object.getOwnPropertyDescriptor(S,B);z&&!z.enumerable&&!E||(I[B]=b(S[B],k-1),z.enumerable||Object.defineProperty(I,B,{enumerable:!1}))}if(E)for(var H=Object.getOwnPropertyNames(S),N=0;N<H.length;N++){var $=H[N],z=Object.getOwnPropertyDescriptor(S,$);z&&z.enumerable||(I[$]=b(S[$],k-1),Object.defineProperty(I,$,{enumerable:!1}))}return I}return b(y,p)}u.clonePrototype=function(w){if(w===null)return null;var p=function(){};return p.prototype=w,new p};function h(y){return Object.prototype.toString.call(y)}u.__objToStr=h;function c(y){return typeof y=="object"&&h(y)==="[object Date]"}u.__isDate=c;function d(y){return typeof y=="object"&&h(y)==="[object Array]"}u.__isArray=d;function f(y){return typeof y=="object"&&h(y)==="[object RegExp]"}u.__isRegExp=f;function v(y){var w="";return y.global&&(w+="g"),y.ignoreCase&&(w+="i"),y.multiline&&(w+="m"),w}return u.__getRegExpFlags=v,u}();typeof n=="object"&&n.exports&&(n.exports=i)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function I(C,A){var N=[],P=!0,j=!1,B=void 0;try{for(var z=C[Symbol.iterator](),H;!(P=(H=z.next()).done)&&(N.push(H.value),!(A&&N.length===A));P=!0);}catch($){j=!0,B=$}finally{try{!P&&z.return&&z.return()}finally{if(j)throw B}}return N}return function(C,A){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return I(C,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function I(C,A){for(var N=0;N<A.length;N++){var P=A[N];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}return function(C,A,N){return A&&I(C.prototype,A),N&&I(C,N),C}}(),a=function I(C,A,N){C===null&&(C=Function.prototype);var P=Object.getOwnPropertyDescriptor(C,A);if(P===void 0){var j=Object.getPrototypeOf(C);return j===null?void 0:I(j,A,N)}else{if("value"in P)return P.value;var B=P.get;return B===void 0?void 0:B.call(N)}},l=i(0),u=g(l),h=i(8),c=g(h),d=i(4),f=g(d),v=i(16),y=g(v),w=i(13),p=g(w),m=i(25),E=g(m);function g(I){return I&&I.__esModule?I:{default:I}}function T(I,C){if(!(I instanceof C))throw new TypeError("Cannot call a class as a function")}function x(I,C){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:I}function b(I,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);I.prototype=Object.create(C&&C.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(I,C):I.__proto__=C)}function S(I){return I instanceof f.default||I instanceof d.BlockEmbed}var k=function(I){b(C,I);function C(A,N){T(this,C);var P=x(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,A));return P.emitter=N.emitter,Array.isArray(N.whitelist)&&(P.whitelist=N.whitelist.reduce(function(j,B){return j[B]=!0,j},{})),P.domNode.addEventListener("DOMNodeInserted",function(){}),P.optimize(),P.enable(),P}return o(C,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(N,P){var j=this.line(N),B=s(j,2),z=B[0],H=B[1],$=this.line(N+P),D=s($,1),R=D[0];if(a(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"deleteAt",this).call(this,N,P),R!=null&&z!==R&&H>0){if(z instanceof d.BlockEmbed||R instanceof d.BlockEmbed){this.optimize();return}if(z instanceof p.default){var L=z.newlineIndex(z.length(),!0);if(L>-1&&(z=z.split(L+1),z===R)){this.optimize();return}}else if(R instanceof p.default){var F=R.newlineIndex(0);F>-1&&R.split(F+1)}var q=R.children.head instanceof y.default?null:R.children.head;z.moveChildren(R,q),z.remove()}this.optimize()}},{key:"enable",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",N)}},{key:"formatAt",value:function(N,P,j,B){this.whitelist!=null&&!this.whitelist[j]||(a(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"formatAt",this).call(this,N,P,j,B),this.optimize())}},{key:"insertAt",value:function(N,P,j){if(!(j!=null&&this.whitelist!=null&&!this.whitelist[P])){if(N>=this.length())if(j==null||u.default.query(P,u.default.Scope.BLOCK)==null){var B=u.default.create(this.statics.defaultChild);this.appendChild(B),j==null&&P.endsWith(`
`)&&(P=P.slice(0,-1)),B.insertAt(0,P,j)}else{var z=u.default.create(P,j);this.appendChild(z)}else a(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,N,P,j);this.optimize()}}},{key:"insertBefore",value:function(N,P){if(N.statics.scope===u.default.Scope.INLINE_BLOT){var j=u.default.create(this.statics.defaultChild);j.appendChild(N),N=j}a(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertBefore",this).call(this,N,P)}},{key:"leaf",value:function(N){return this.path(N).pop()||[null,-1]}},{key:"line",value:function(N){return N===this.length()?this.line(N-1):this.descendant(S,N)}},{key:"lines",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,j=function B(z,H,$){var D=[],R=$;return z.children.forEachAt(H,$,function(L,F,q){S(L)?D.push(L):L instanceof u.default.Container&&(D=D.concat(B(L,F,R))),R-=q}),D};return j(this,N,P)}},{key:"optimize",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(a(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"optimize",this).call(this,N,P),N.length>0&&this.emitter.emit(c.default.events.SCROLL_OPTIMIZE,N,P))}},{key:"path",value:function(N){return a(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"path",this).call(this,N).slice(1)}},{key:"update",value:function(N){if(this.batch!==!0){var P=c.default.sources.USER;typeof N=="string"&&(P=N),Array.isArray(N)||(N=this.observer.takeRecords()),N.length>0&&this.emitter.emit(c.default.events.SCROLL_BEFORE_UPDATE,P,N),a(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"update",this).call(this,N.concat([])),N.length>0&&this.emitter.emit(c.default.events.SCROLL_UPDATE,P,N)}}}]),C}(u.default.Scroll);k.blotName="scroll",k.className="ql-editor",k.tagName="DIV",k.defaultChild="block",k.allowedChildren=[f.default,d.BlockEmbed,E.default],r.default=k},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},o=function(){function O(V,W){var K=[],X=!0,le=!1,pe=void 0;try{for(var ye=V[Symbol.iterator](),Ie;!(X=(Ie=ye.next()).done)&&(K.push(Ie.value),!(W&&K.length===W));X=!0);}catch(je){le=!0,pe=je}finally{try{!X&&ye.return&&ye.return()}finally{if(le)throw pe}}return K}return function(V,W){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return O(V,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function O(V,W){for(var K=0;K<W.length;K++){var X=W[K];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(V,X.key,X)}}return function(V,W,K){return W&&O(V.prototype,W),K&&O(V,K),V}}(),l=i(21),u=I(l),h=i(11),c=I(h),d=i(3),f=I(d),v=i(2),y=I(v),w=i(20),p=I(w),m=i(0),E=I(m),g=i(5),T=I(g),x=i(10),b=I(x),S=i(9),k=I(S);function I(O){return O&&O.__esModule?O:{default:O}}function C(O,V,W){return V in O?Object.defineProperty(O,V,{value:W,enumerable:!0,configurable:!0,writable:!0}):O[V]=W,O}function A(O,V){if(!(O instanceof V))throw new TypeError("Cannot call a class as a function")}function N(O,V){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:O}function P(O,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);O.prototype=Object.create(V&&V.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(O,V):O.__proto__=V)}var j=(0,b.default)("quill:keyboard"),B=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",z=function(O){P(V,O),a(V,null,[{key:"match",value:function(K,X){return X=U(X),["altKey","ctrlKey","metaKey","shiftKey"].some(function(le){return!!X[le]!==K[le]&&X[le]!==null})?!1:X.key===(K.which||K.keyCode)}}]);function V(W,K){A(this,V);var X=N(this,(V.__proto__||Object.getPrototypeOf(V)).call(this,W,K));return X.bindings={},Object.keys(X.options.bindings).forEach(function(le){le==="list autofill"&&W.scroll.whitelist!=null&&!W.scroll.whitelist.list||X.options.bindings[le]&&X.addBinding(X.options.bindings[le])}),X.addBinding({key:V.keys.ENTER,shiftKey:null},L),X.addBinding({key:V.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(X.addBinding({key:V.keys.BACKSPACE},{collapsed:!0},$),X.addBinding({key:V.keys.DELETE},{collapsed:!0},D)):(X.addBinding({key:V.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},$),X.addBinding({key:V.keys.DELETE},{collapsed:!0,suffix:/^.?$/},D)),X.addBinding({key:V.keys.BACKSPACE},{collapsed:!1},R),X.addBinding({key:V.keys.DELETE},{collapsed:!1},R),X.addBinding({key:V.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},$),X.listen(),X}return a(V,[{key:"addBinding",value:function(K){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},pe=U(K);if(pe==null||pe.key==null)return j.warn("Attempted to add invalid keyboard binding",pe);typeof X=="function"&&(X={handler:X}),typeof le=="function"&&(le={handler:le}),pe=(0,f.default)(pe,X,le),this.bindings[pe.key]=this.bindings[pe.key]||[],this.bindings[pe.key].push(pe)}},{key:"listen",value:function(){var K=this;this.quill.root.addEventListener("keydown",function(X){if(!X.defaultPrevented){var le=X.which||X.keyCode,pe=(K.bindings[le]||[]).filter(function(ut){return V.match(X,ut)});if(pe.length!==0){var ye=K.quill.getSelection();if(!(ye==null||!K.quill.hasFocus())){var Ie=K.quill.getLine(ye.index),je=o(Ie,2),an=je[0],vt=je[1],G=K.quill.getLeaf(ye.index),Y=o(G,2),se=Y[0],oe=Y[1],Z=ye.length===0?[se,oe]:K.quill.getLeaf(ye.index+ye.length),_e=o(Z,2),we=_e[0],Ee=_e[1],kn=se instanceof E.default.Text?se.value().slice(0,oe):"",Tr=we instanceof E.default.Text?we.value().slice(Ee):"",et={collapsed:ye.length===0,empty:ye.length===0&&an.length()<=1,format:K.quill.getFormat(ye),offset:vt,prefix:kn,suffix:Tr},hI=pe.some(function(ut){if(ut.collapsed!=null&&ut.collapsed!==et.collapsed||ut.empty!=null&&ut.empty!==et.empty||ut.offset!=null&&ut.offset!==et.offset)return!1;if(Array.isArray(ut.format)){if(ut.format.every(function(Qr){return et.format[Qr]==null}))return!1}else if(s(ut.format)==="object"&&!Object.keys(ut.format).every(function(Qr){return ut.format[Qr]===!0?et.format[Qr]!=null:ut.format[Qr]===!1?et.format[Qr]==null:(0,c.default)(ut.format[Qr],et.format[Qr])}))return!1;return ut.prefix!=null&&!ut.prefix.test(et.prefix)||ut.suffix!=null&&!ut.suffix.test(et.suffix)?!1:ut.handler.call(K,ye,et)!==!0});hI&&X.preventDefault()}}}})}}]),V}(k.default);z.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},z.DEFAULTS={bindings:{bold:q("bold"),italic:q("italic"),underline:q("underline"),indent:{key:z.keys.TAB,format:["blockquote","indent","list"],handler:function(V,W){if(W.collapsed&&W.offset!==0)return!0;this.quill.format("indent","+1",T.default.sources.USER)}},outdent:{key:z.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(V,W){if(W.collapsed&&W.offset!==0)return!0;this.quill.format("indent","-1",T.default.sources.USER)}},"outdent backspace":{key:z.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(V,W){W.format.indent!=null?this.quill.format("indent","-1",T.default.sources.USER):W.format.list!=null&&this.quill.format("list",!1,T.default.sources.USER)}},"indent code-block":F(!0),"outdent code-block":F(!1),"remove tab":{key:z.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(V){this.quill.deleteText(V.index-1,1,T.default.sources.USER)}},tab:{key:z.keys.TAB,handler:function(V){this.quill.history.cutoff();var W=new y.default().retain(V.index).delete(V.length).insert("	");this.quill.updateContents(W,T.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(V.index+1,T.default.sources.SILENT)}},"list empty enter":{key:z.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(V,W){this.quill.format("list",!1,T.default.sources.USER),W.format.indent&&this.quill.format("indent",!1,T.default.sources.USER)}},"checklist enter":{key:z.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(V){var W=this.quill.getLine(V.index),K=o(W,2),X=K[0],le=K[1],pe=(0,f.default)({},X.formats(),{list:"checked"}),ye=new y.default().retain(V.index).insert(`
`,pe).retain(X.length()-le-1).retain(1,{list:"unchecked"});this.quill.updateContents(ye,T.default.sources.USER),this.quill.setSelection(V.index+1,T.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:z.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(V,W){var K=this.quill.getLine(V.index),X=o(K,2),le=X[0],pe=X[1],ye=new y.default().retain(V.index).insert(`
`,W.format).retain(le.length()-pe-1).retain(1,{header:null});this.quill.updateContents(ye,T.default.sources.USER),this.quill.setSelection(V.index+1,T.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(V,W){var K=W.prefix.length,X=this.quill.getLine(V.index),le=o(X,2),pe=le[0],ye=le[1];if(ye>K)return!0;var Ie=void 0;switch(W.prefix.trim()){case"[]":case"[ ]":Ie="unchecked";break;case"[x]":Ie="checked";break;case"-":case"*":Ie="bullet";break;default:Ie="ordered"}this.quill.insertText(V.index," ",T.default.sources.USER),this.quill.history.cutoff();var je=new y.default().retain(V.index-ye).delete(K+1).retain(pe.length()-2-ye).retain(1,{list:Ie});this.quill.updateContents(je,T.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(V.index-K,T.default.sources.SILENT)}},"code exit":{key:z.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(V){var W=this.quill.getLine(V.index),K=o(W,2),X=K[0],le=K[1],pe=new y.default().retain(V.index+X.length()-le-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(pe,T.default.sources.USER)}},"embed left":H(z.keys.LEFT,!1),"embed left shift":H(z.keys.LEFT,!0),"embed right":H(z.keys.RIGHT,!1),"embed right shift":H(z.keys.RIGHT,!0)}};function H(O,V){var W,K=O===z.keys.LEFT?"prefix":"suffix";return W={key:O,shiftKey:V,altKey:null},C(W,K,/^$/),C(W,"handler",function(le){var pe=le.index;O===z.keys.RIGHT&&(pe+=le.length+1);var ye=this.quill.getLeaf(pe),Ie=o(ye,1),je=Ie[0];return je instanceof E.default.Embed?(O===z.keys.LEFT?V?this.quill.setSelection(le.index-1,le.length+1,T.default.sources.USER):this.quill.setSelection(le.index-1,T.default.sources.USER):V?this.quill.setSelection(le.index,le.length+1,T.default.sources.USER):this.quill.setSelection(le.index+le.length+1,T.default.sources.USER),!1):!0}),W}function $(O,V){if(!(O.index===0||this.quill.getLength()<=1)){var W=this.quill.getLine(O.index),K=o(W,1),X=K[0],le={};if(V.offset===0){var pe=this.quill.getLine(O.index-1),ye=o(pe,1),Ie=ye[0];if(Ie!=null&&Ie.length()>1){var je=X.formats(),an=this.quill.getFormat(O.index-1,1);le=p.default.attributes.diff(je,an)||{}}}var vt=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(V.prefix)?2:1;this.quill.deleteText(O.index-vt,vt,T.default.sources.USER),Object.keys(le).length>0&&this.quill.formatLine(O.index-vt,vt,le,T.default.sources.USER),this.quill.focus()}}function D(O,V){var W=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(V.suffix)?2:1;if(!(O.index>=this.quill.getLength()-W)){var K={},X=0,le=this.quill.getLine(O.index),pe=o(le,1),ye=pe[0];if(V.offset>=ye.length()-1){var Ie=this.quill.getLine(O.index+1),je=o(Ie,1),an=je[0];if(an){var vt=ye.formats(),G=this.quill.getFormat(O.index,1);K=p.default.attributes.diff(vt,G)||{},X=an.length()}}this.quill.deleteText(O.index,W,T.default.sources.USER),Object.keys(K).length>0&&this.quill.formatLine(O.index+X-1,W,K,T.default.sources.USER)}}function R(O){var V=this.quill.getLines(O),W={};if(V.length>1){var K=V[0].formats(),X=V[V.length-1].formats();W=p.default.attributes.diff(X,K)||{}}this.quill.deleteText(O,T.default.sources.USER),Object.keys(W).length>0&&this.quill.formatLine(O.index,1,W,T.default.sources.USER),this.quill.setSelection(O.index,T.default.sources.SILENT),this.quill.focus()}function L(O,V){var W=this;O.length>0&&this.quill.scroll.deleteAt(O.index,O.length);var K=Object.keys(V.format).reduce(function(X,le){return E.default.query(le,E.default.Scope.BLOCK)&&!Array.isArray(V.format[le])&&(X[le]=V.format[le]),X},{});this.quill.insertText(O.index,`
`,K,T.default.sources.USER),this.quill.setSelection(O.index+1,T.default.sources.SILENT),this.quill.focus(),Object.keys(V.format).forEach(function(X){K[X]==null&&(Array.isArray(V.format[X])||X!=="link"&&W.quill.format(X,V.format[X],T.default.sources.USER))})}function F(O){return{key:z.keys.TAB,shiftKey:!O,format:{"code-block":!0},handler:function(W){var K=E.default.query("code-block"),X=W.index,le=W.length,pe=this.quill.scroll.descendant(K,X),ye=o(pe,2),Ie=ye[0],je=ye[1];if(Ie!=null){var an=this.quill.getIndex(Ie),vt=Ie.newlineIndex(je,!0)+1,G=Ie.newlineIndex(an+je+le),Y=Ie.domNode.textContent.slice(vt,G).split(`
`);je=0,Y.forEach(function(se,oe){O?(Ie.insertAt(vt+je,K.TAB),je+=K.TAB.length,oe===0?X+=K.TAB.length:le+=K.TAB.length):se.startsWith(K.TAB)&&(Ie.deleteAt(vt+je,K.TAB.length),je-=K.TAB.length,oe===0?X-=K.TAB.length:le-=K.TAB.length),je+=se.length+1}),this.quill.update(T.default.sources.USER),this.quill.setSelection(X,le,T.default.sources.SILENT)}}}}function q(O){return{key:O[0].toUpperCase(),shortKey:!0,handler:function(W,K){this.quill.format(O,!K.format[O],T.default.sources.USER)}}}function U(O){if(typeof O=="string"||typeof O=="number")return U({key:O});if((typeof O>"u"?"undefined":s(O))==="object"&&(O=(0,u.default)(O,!1)),typeof O.key=="string")if(z.keys[O.key.toUpperCase()]!=null)O.key=z.keys[O.key.toUpperCase()];else if(O.key.length===1)O.key=O.key.toUpperCase().charCodeAt(0);else return null;return O.shortKey&&(O[B]=O.shortKey,delete O.shortKey),O}r.default=z,r.SHORTKEY=B},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function p(m,E){var g=[],T=!0,x=!1,b=void 0;try{for(var S=m[Symbol.iterator](),k;!(T=(k=S.next()).done)&&(g.push(k.value),!(E&&g.length===E));T=!0);}catch(I){x=!0,b=I}finally{try{!T&&S.return&&S.return()}finally{if(x)throw b}}return g}return function(m,E){if(Array.isArray(m))return m;if(Symbol.iterator in Object(m))return p(m,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function p(m,E,g){m===null&&(m=Function.prototype);var T=Object.getOwnPropertyDescriptor(m,E);if(T===void 0){var x=Object.getPrototypeOf(m);return x===null?void 0:p(x,E,g)}else{if("value"in T)return T.value;var b=T.get;return b===void 0?void 0:b.call(g)}},a=function(){function p(m,E){for(var g=0;g<E.length;g++){var T=E[g];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(m,T.key,T)}}return function(m,E,g){return E&&p(m.prototype,E),g&&p(m,g),m}}(),l=i(0),u=d(l),h=i(7),c=d(h);function d(p){return p&&p.__esModule?p:{default:p}}function f(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function v(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function y(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var w=function(p){y(m,p),a(m,null,[{key:"value",value:function(){}}]);function m(E,g){f(this,m);var T=v(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,E));return T.selection=g,T.textNode=document.createTextNode(m.CONTENTS),T.domNode.appendChild(T.textNode),T._length=0,T}return a(m,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(g,T){if(this._length!==0)return o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,g,T);for(var x=this,b=0;x!=null&&x.statics.scope!==u.default.Scope.BLOCK_BLOT;)b+=x.offset(x.parent),x=x.parent;x!=null&&(this._length=m.CONTENTS.length,x.optimize(),x.formatAt(b,m.CONTENTS.length,g,T),this._length=0)}},{key:"index",value:function(g,T){return g===this.textNode?0:o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"index",this).call(this,g,T)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var g=this.textNode,T=this.selection.getNativeRange(),x=void 0,b=void 0,S=void 0;if(T!=null&&T.start.node===g&&T.end.node===g){var k=[g,T.start.offset,T.end.offset];x=k[0],b=k[1],S=k[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==m.CONTENTS){var I=this.textNode.data.split(m.CONTENTS).join("");this.next instanceof c.default?(x=this.next.domNode,this.next.insertAt(0,I),this.textNode.data=m.CONTENTS):(this.textNode.data=I,this.parent.insertBefore(u.default.create(this.textNode),this),this.textNode=document.createTextNode(m.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),b!=null){var C=[b,S].map(function(N){return Math.max(0,Math.min(x.data.length,N-1))}),A=s(C,2);return b=A[0],S=A[1],{startNode:x,startOffset:b,endNode:x,endOffset:S}}}}},{key:"update",value:function(g,T){var x=this;if(g.some(function(S){return S.type==="characterData"&&S.target===x.textNode})){var b=this.restore();b&&(T.range=b)}}},{key:"value",value:function(){return""}}]),m}(u.default.Embed);w.blotName="cursor",w.className="ql-cursor",w.tagName="span",w.CONTENTS="\uFEFF",r.default=w},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),o=u(s),a=i(4),l=u(a);function u(v){return v&&v.__esModule?v:{default:v}}function h(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function c(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function d(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var f=function(v){d(y,v);function y(){return h(this,y),c(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(o.default.Container);f.allowedChildren=[l.default,a.BlockEmbed,f],r.default=f},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var s=function(){function w(p,m){for(var E=0;E<m.length;E++){var g=m[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(p,g.key,g)}}return function(p,m,E){return m&&w(p.prototype,m),E&&w(p,E),p}}(),o=function w(p,m,E){p===null&&(p=Function.prototype);var g=Object.getOwnPropertyDescriptor(p,m);if(g===void 0){var T=Object.getPrototypeOf(p);return T===null?void 0:w(T,m,E)}else{if("value"in g)return g.value;var x=g.get;return x===void 0?void 0:x.call(E)}},a=i(0),l=u(a);function u(w){return w&&w.__esModule?w:{default:w}}function h(w,p){if(!(w instanceof p))throw new TypeError("Cannot call a class as a function")}function c(w,p){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:w}function d(w,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);w.prototype=Object.create(p&&p.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(w,p):w.__proto__=p)}var f=function(w){d(p,w);function p(){return h(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return s(p,[{key:"value",value:function(E){var g=o(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"value",this).call(this,E);return g.startsWith("rgb(")?(g=g.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+g.split(",").map(function(T){return("00"+parseInt(T).toString(16)).slice(-2)}).join("")):g}}]),p}(l.default.Attributor.Style),v=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),y=new f("color","color",{scope:l.default.Scope.INLINE});r.ColorAttributor=f,r.ColorClass=v,r.ColorStyle=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var s=function(){function y(w,p){for(var m=0;m<p.length;m++){var E=p[m];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(w,E.key,E)}}return function(w,p,m){return p&&y(w.prototype,p),m&&y(w,m),w}}(),o=function y(w,p,m){w===null&&(w=Function.prototype);var E=Object.getOwnPropertyDescriptor(w,p);if(E===void 0){var g=Object.getPrototypeOf(w);return g===null?void 0:y(g,p,m)}else{if("value"in E)return E.value;var T=E.get;return T===void 0?void 0:T.call(m)}},a=i(6),l=u(a);function u(y){return y&&y.__esModule?y:{default:y}}function h(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function c(y,w){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:y}function d(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(y,w):y.__proto__=w)}var f=function(y){d(w,y);function w(){return h(this,w),c(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return s(w,[{key:"format",value:function(m,E){if(m!==this.statics.blotName||!E)return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,m,E);E=this.constructor.sanitize(E),this.domNode.setAttribute("href",E)}}],[{key:"create",value:function(m){var E=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,m);return m=this.sanitize(m),E.setAttribute("href",m),E.setAttribute("rel","noopener noreferrer"),E.setAttribute("target","_blank"),E}},{key:"formats",value:function(m){return m.getAttribute("href")}},{key:"sanitize",value:function(m){return v(m,this.PROTOCOL_WHITELIST)?m:this.SANITIZED_URL}}]),w}(l.default);f.blotName="link",f.tagName="A",f.SANITIZED_URL="about:blank",f.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function v(y,w){var p=document.createElement("a");p.href=y;var m=p.href.slice(0,p.href.indexOf(":"));return w.indexOf(m)>-1}r.default=f,r.sanitize=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},o=function(){function w(p,m){for(var E=0;E<m.length;E++){var g=m[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(p,g.key,g)}}return function(p,m,E){return m&&w(p.prototype,m),E&&w(p,E),p}}(),a=i(23),l=c(a),u=i(107),h=c(u);function c(w){return w&&w.__esModule?w:{default:w}}function d(w,p){if(!(w instanceof p))throw new TypeError("Cannot call a class as a function")}var f=0;function v(w,p){w.setAttribute(p,w.getAttribute(p)!=="true")}var y=function(){function w(p){var m=this;d(this,w),this.select=p,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){m.togglePicker()}),this.label.addEventListener("keydown",function(E){switch(E.keyCode){case l.default.keys.ENTER:m.togglePicker();break;case l.default.keys.ESCAPE:m.escape(),E.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(w,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),v(this.label,"aria-expanded"),v(this.options,"aria-hidden")}},{key:"buildItem",value:function(m){var E=this,g=document.createElement("span");return g.tabIndex="0",g.setAttribute("role","button"),g.classList.add("ql-picker-item"),m.hasAttribute("value")&&g.setAttribute("data-value",m.getAttribute("value")),m.textContent&&g.setAttribute("data-label",m.textContent),g.addEventListener("click",function(){E.selectItem(g,!0)}),g.addEventListener("keydown",function(T){switch(T.keyCode){case l.default.keys.ENTER:E.selectItem(g,!0),T.preventDefault();break;case l.default.keys.ESCAPE:E.escape(),T.preventDefault();break}}),g}},{key:"buildLabel",value:function(){var m=document.createElement("span");return m.classList.add("ql-picker-label"),m.innerHTML=h.default,m.tabIndex="0",m.setAttribute("role","button"),m.setAttribute("aria-expanded","false"),this.container.appendChild(m),m}},{key:"buildOptions",value:function(){var m=this,E=document.createElement("span");E.classList.add("ql-picker-options"),E.setAttribute("aria-hidden","true"),E.tabIndex="-1",E.id="ql-picker-options-"+f,f+=1,this.label.setAttribute("aria-controls",E.id),this.options=E,[].slice.call(this.select.options).forEach(function(g){var T=m.buildItem(g);E.appendChild(T),g.selected===!0&&m.selectItem(T)}),this.container.appendChild(E)}},{key:"buildPicker",value:function(){var m=this;[].slice.call(this.select.attributes).forEach(function(E){m.container.setAttribute(E.name,E.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var m=this;this.close(),setTimeout(function(){return m.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(m){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=this.container.querySelector(".ql-selected");if(m!==g&&(g!=null&&g.classList.remove("ql-selected"),m!=null&&(m.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(m.parentNode.children,m),m.hasAttribute("data-value")?this.label.setAttribute("data-value",m.getAttribute("data-value")):this.label.removeAttribute("data-value"),m.hasAttribute("data-label")?this.label.setAttribute("data-label",m.getAttribute("data-label")):this.label.removeAttribute("data-label"),E))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":s(Event))==="object"){var T=document.createEvent("Event");T.initEvent("change",!0,!0),this.select.dispatchEvent(T)}this.close()}}},{key:"update",value:function(){var m=void 0;if(this.select.selectedIndex>-1){var E=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];m=this.select.options[this.select.selectedIndex],this.selectItem(E)}else this.selectItem(null);var g=m!=null&&m!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",g)}}]),w}();r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),o=j(s),a=i(5),l=j(a),u=i(4),h=j(u),c=i(16),d=j(c),f=i(25),v=j(f),y=i(24),w=j(y),p=i(35),m=j(p),E=i(6),g=j(E),T=i(22),x=j(T),b=i(7),S=j(b),k=i(55),I=j(k),C=i(42),A=j(C),N=i(23),P=j(N);function j(B){return B&&B.__esModule?B:{default:B}}l.default.register({"blots/block":h.default,"blots/block/embed":u.BlockEmbed,"blots/break":d.default,"blots/container":v.default,"blots/cursor":w.default,"blots/embed":m.default,"blots/inline":g.default,"blots/scroll":x.default,"blots/text":S.default,"modules/clipboard":I.default,"modules/history":A.default,"modules/keyboard":P.default}),o.default.register(h.default,d.default,w.default,g.default,x.default,S.default),r.default=l.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(1),o=function(){function a(l){this.domNode=l,this.domNode[s.DATA_KEY]={blot:this}}return Object.defineProperty(a.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),a.create=function(l){if(this.tagName==null)throw new s.ParchmentError("Blot definition missing tagName");var u;return Array.isArray(this.tagName)?(typeof l=="string"&&(l=l.toUpperCase(),parseInt(l).toString()===l&&(l=parseInt(l))),typeof l=="number"?u=document.createElement(this.tagName[l-1]):this.tagName.indexOf(l)>-1?u=document.createElement(l):u=document.createElement(this.tagName[0])):u=document.createElement(this.tagName),this.className&&u.classList.add(this.className),u},a.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},a.prototype.clone=function(){var l=this.domNode.cloneNode(!1);return s.create(l)},a.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[s.DATA_KEY]},a.prototype.deleteAt=function(l,u){var h=this.isolate(l,u);h.remove()},a.prototype.formatAt=function(l,u,h,c){var d=this.isolate(l,u);if(s.query(h,s.Scope.BLOT)!=null&&c)d.wrap(h,c);else if(s.query(h,s.Scope.ATTRIBUTE)!=null){var f=s.create(this.statics.scope);d.wrap(f),f.format(h,c)}},a.prototype.insertAt=function(l,u,h){var c=h==null?s.create("text",u):s.create(u,h),d=this.split(l);this.parent.insertBefore(c,d)},a.prototype.insertInto=function(l,u){u===void 0&&(u=null),this.parent!=null&&this.parent.children.remove(this);var h=null;l.children.insertBefore(this,u),u!=null&&(h=u.domNode),(this.domNode.parentNode!=l.domNode||this.domNode.nextSibling!=h)&&l.domNode.insertBefore(this.domNode,h),this.parent=l,this.attach()},a.prototype.isolate=function(l,u){var h=this.split(l);return h.split(u),h},a.prototype.length=function(){return 1},a.prototype.offset=function(l){return l===void 0&&(l=this.parent),this.parent==null||this==l?0:this.parent.children.offset(this)+this.parent.offset(l)},a.prototype.optimize=function(l){this.domNode[s.DATA_KEY]!=null&&delete this.domNode[s.DATA_KEY].mutations},a.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},a.prototype.replace=function(l){l.parent!=null&&(l.parent.insertBefore(this,l.next),l.remove())},a.prototype.replaceWith=function(l,u){var h=typeof l=="string"?s.create(l,u):l;return h.replace(this),h},a.prototype.split=function(l,u){return l===0?this:this.next},a.prototype.update=function(l,u){},a.prototype.wrap=function(l,u){var h=typeof l=="string"?s.create(l,u):l;return this.parent!=null&&this.parent.insertBefore(h,this.next),h.appendChild(this),h},a.blotName="abstract",a}();r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(12),o=i(32),a=i(33),l=i(1),u=function(){function h(c){this.attributes={},this.domNode=c,this.build()}return h.prototype.attribute=function(c,d){d?c.add(this.domNode,d)&&(c.value(this.domNode)!=null?this.attributes[c.attrName]=c:delete this.attributes[c.attrName]):(c.remove(this.domNode),delete this.attributes[c.attrName])},h.prototype.build=function(){var c=this;this.attributes={};var d=s.default.keys(this.domNode),f=o.default.keys(this.domNode),v=a.default.keys(this.domNode);d.concat(f).concat(v).forEach(function(y){var w=l.query(y,l.Scope.ATTRIBUTE);w instanceof s.default&&(c.attributes[w.attrName]=w)})},h.prototype.copy=function(c){var d=this;Object.keys(this.attributes).forEach(function(f){var v=d.attributes[f].value(d.domNode);c.format(f,v)})},h.prototype.move=function(c){var d=this;this.copy(c),Object.keys(this.attributes).forEach(function(f){d.attributes[f].remove(d.domNode)}),this.attributes={}},h.prototype.values=function(){var c=this;return Object.keys(this.attributes).reduce(function(d,f){return d[f]=c.attributes[f].value(c.domNode),d},{})},h}();r.default=u},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,c){h.__proto__=c}||function(h,c){for(var d in c)c.hasOwnProperty(d)&&(h[d]=c[d])};return function(h,c){u(h,c);function d(){this.constructor=h}h.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function a(u,h){var c=u.getAttribute("class")||"";return c.split(/\s+/).filter(function(d){return d.indexOf(h+"-")===0})}var l=function(u){s(h,u);function h(){return u!==null&&u.apply(this,arguments)||this}return h.keys=function(c){return(c.getAttribute("class")||"").split(/\s+/).map(function(d){return d.split("-").slice(0,-1).join("-")})},h.prototype.add=function(c,d){return this.canAdd(c,d)?(this.remove(c),c.classList.add(this.keyName+"-"+d),!0):!1},h.prototype.remove=function(c){var d=a(c,this.keyName);d.forEach(function(f){c.classList.remove(f)}),c.classList.length===0&&c.removeAttribute("class")},h.prototype.value=function(c){var d=a(c,this.keyName)[0]||"",f=d.slice(this.keyName.length+1);return this.canAdd(c,f)?f:""},h}(o.default);r.default=l},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,c){h.__proto__=c}||function(h,c){for(var d in c)c.hasOwnProperty(d)&&(h[d]=c[d])};return function(h,c){u(h,c);function d(){this.constructor=h}h.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function a(u){var h=u.split("-"),c=h.slice(1).map(function(d){return d[0].toUpperCase()+d.slice(1)}).join("");return h[0]+c}var l=function(u){s(h,u);function h(){return u!==null&&u.apply(this,arguments)||this}return h.keys=function(c){return(c.getAttribute("style")||"").split(";").map(function(d){var f=d.split(":");return f[0].trim()})},h.prototype.add=function(c,d){return this.canAdd(c,d)?(c.style[a(this.keyName)]=d,!0):!1},h.prototype.remove=function(c){c.style[a(this.keyName)]="",c.getAttribute("style")||c.removeAttribute("style")},h.prototype.value=function(c){var d=c.style[a(this.keyName)];return this.canAdd(c,d)?d:""},h}(o.default);r.default=l},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function l(u,h){for(var c=0;c<h.length;c++){var d=h[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}return function(u,h,c){return h&&l(u.prototype,h),c&&l(u,c),u}}();function o(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(u,h){o(this,l),this.quill=u,this.options=h,this.modules={}}return s(l,[{key:"init",value:function(){var h=this;Object.keys(this.options.modules).forEach(function(c){h.modules[c]==null&&h.addModule(c)})}},{key:"addModule",value:function(h){var c=this.quill.constructor.import("modules/"+h);return this.modules[h]=new c(this.quill,this.options.modules[h]||{}),this.modules[h]}}]),l}();a.DEFAULTS={modules:{}},a.themes={default:a},r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function p(m,E){for(var g=0;g<E.length;g++){var T=E[g];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(m,T.key,T)}}return function(m,E,g){return E&&p(m.prototype,E),g&&p(m,g),m}}(),o=function p(m,E,g){m===null&&(m=Function.prototype);var T=Object.getOwnPropertyDescriptor(m,E);if(T===void 0){var x=Object.getPrototypeOf(m);return x===null?void 0:p(x,E,g)}else{if("value"in T)return T.value;var b=T.get;return b===void 0?void 0:b.call(g)}},a=i(0),l=c(a),u=i(7),h=c(u);function c(p){return p&&p.__esModule?p:{default:p}}function d(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function f(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function v(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var y="\uFEFF",w=function(p){v(m,p);function m(E){d(this,m);var g=f(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,E));return g.contentNode=document.createElement("span"),g.contentNode.setAttribute("contenteditable",!1),[].slice.call(g.domNode.childNodes).forEach(function(T){g.contentNode.appendChild(T)}),g.leftGuard=document.createTextNode(y),g.rightGuard=document.createTextNode(y),g.domNode.appendChild(g.leftGuard),g.domNode.appendChild(g.contentNode),g.domNode.appendChild(g.rightGuard),g}return s(m,[{key:"index",value:function(g,T){return g===this.leftGuard?0:g===this.rightGuard?1:o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"index",this).call(this,g,T)}},{key:"restore",value:function(g){var T=void 0,x=void 0,b=g.data.split(y).join("");if(g===this.leftGuard)if(this.prev instanceof h.default){var S=this.prev.length();this.prev.insertAt(S,b),T={startNode:this.prev.domNode,startOffset:S+b.length}}else x=document.createTextNode(b),this.parent.insertBefore(l.default.create(x),this),T={startNode:x,startOffset:b.length};else g===this.rightGuard&&(this.next instanceof h.default?(this.next.insertAt(0,b),T={startNode:this.next.domNode,startOffset:b.length}):(x=document.createTextNode(b),this.parent.insertBefore(l.default.create(x),this.next),T={startNode:x,startOffset:b.length}));return g.data=y,T}},{key:"update",value:function(g,T){var x=this;g.forEach(function(b){if(b.type==="characterData"&&(b.target===x.leftGuard||b.target===x.rightGuard)){var S=x.restore(b.target);S&&(T.range=S)}})}}]),m}(l.default.Embed);r.default=w},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var s=i(0),o=a(s);function a(d){return d&&d.__esModule?d:{default:d}}var l={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},u=new o.default.Attributor.Attribute("align","align",l),h=new o.default.Attributor.Class("align","ql-align",l),c=new o.default.Attributor.Style("align","text-align",l);r.AlignAttribute=u,r.AlignClass=h,r.AlignStyle=c},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var s=i(0),o=l(s),a=i(26);function l(c){return c&&c.__esModule?c:{default:c}}var u=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),h=new a.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});r.BackgroundClass=u,r.BackgroundStyle=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var s=i(0),o=a(s);function a(d){return d&&d.__esModule?d:{default:d}}var l={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},u=new o.default.Attributor.Attribute("direction","dir",l),h=new o.default.Attributor.Class("direction","ql-direction",l),c=new o.default.Attributor.Style("direction","direction",l);r.DirectionAttribute=u,r.DirectionClass=h,r.DirectionStyle=c},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var s=function(){function p(m,E){for(var g=0;g<E.length;g++){var T=E[g];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(m,T.key,T)}}return function(m,E,g){return E&&p(m.prototype,E),g&&p(m,g),m}}(),o=function p(m,E,g){m===null&&(m=Function.prototype);var T=Object.getOwnPropertyDescriptor(m,E);if(T===void 0){var x=Object.getPrototypeOf(m);return x===null?void 0:p(x,E,g)}else{if("value"in T)return T.value;var b=T.get;return b===void 0?void 0:b.call(g)}},a=i(0),l=u(a);function u(p){return p&&p.__esModule?p:{default:p}}function h(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function c(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function d(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},v=new l.default.Attributor.Class("font","ql-font",f),y=function(p){d(m,p);function m(){return h(this,m),c(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return s(m,[{key:"value",value:function(g){return o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,g).replace(/["']/g,"")}}]),m}(l.default.Attributor.Style),w=new y("font","font-family",f);r.FontStyle=w,r.FontClass=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var s=i(0),o=a(s);function a(h){return h&&h.__esModule?h:{default:h}}var l=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),u=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=l,r.SizeStyle=u},function(n,r,i){n.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var s=function(){function E(g,T){for(var x=0;x<T.length;x++){var b=T[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,T,x){return T&&E(g.prototype,T),x&&E(g,x),g}}(),o=i(0),a=d(o),l=i(5),u=d(l),h=i(9),c=d(h);function d(E){return E&&E.__esModule?E:{default:E}}function f(E,g){if(!(E instanceof g))throw new TypeError("Cannot call a class as a function")}function v(E,g){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:E}function y(E,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);E.prototype=Object.create(g&&g.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(E,g):E.__proto__=g)}var w=function(E){y(g,E);function g(T,x){f(this,g);var b=v(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,T,x));return b.lastRecorded=0,b.ignoreChange=!1,b.clear(),b.quill.on(u.default.events.EDITOR_CHANGE,function(S,k,I,C){S!==u.default.events.TEXT_CHANGE||b.ignoreChange||(!b.options.userOnly||C===u.default.sources.USER?b.record(k,I):b.transform(k))}),b.quill.keyboard.addBinding({key:"Z",shortKey:!0},b.undo.bind(b)),b.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},b.redo.bind(b)),/Win/i.test(navigator.platform)&&b.quill.keyboard.addBinding({key:"Y",shortKey:!0},b.redo.bind(b)),b}return s(g,[{key:"change",value:function(x,b){if(this.stack[x].length!==0){var S=this.stack[x].pop();this.stack[b].push(S),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(S[x],u.default.sources.USER),this.ignoreChange=!1;var k=m(S[x]);this.quill.setSelection(k)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(x,b){if(x.ops.length!==0){this.stack.redo=[];var S=this.quill.getContents().diff(b),k=Date.now();if(this.lastRecorded+this.options.delay>k&&this.stack.undo.length>0){var I=this.stack.undo.pop();S=S.compose(I.undo),x=I.redo.compose(x)}else this.lastRecorded=k;this.stack.undo.push({redo:x,undo:S}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(x){this.stack.undo.forEach(function(b){b.undo=x.transform(b.undo,!0),b.redo=x.transform(b.redo,!0)}),this.stack.redo.forEach(function(b){b.undo=x.transform(b.undo,!0),b.redo=x.transform(b.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),g}(c.default);w.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function p(E){var g=E.ops[E.ops.length-1];return g==null?!1:g.insert!=null?typeof g.insert=="string"&&g.insert.endsWith(`
`):g.attributes!=null?Object.keys(g.attributes).some(function(T){return a.default.query(T,a.default.Scope.BLOCK)!=null}):!1}function m(E){var g=E.reduce(function(x,b){return x+=b.delete||0,x},0),T=E.length()-g;return p(E)&&(T-=1),T}r.default=w,r.getLastChangeIndex=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var s=function(){function L(F,q){for(var U=0;U<q.length;U++){var O=q[U];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(F,O.key,O)}}return function(F,q,U){return q&&L(F.prototype,q),U&&L(F,U),F}}(),o=function L(F,q,U){F===null&&(F=Function.prototype);var O=Object.getOwnPropertyDescriptor(F,q);if(O===void 0){var V=Object.getPrototypeOf(F);return V===null?void 0:L(V,q,U)}else{if("value"in O)return O.value;var W=O.get;return W===void 0?void 0:W.call(U)}},a=i(3),l=k(a),u=i(2),h=k(u),c=i(8),d=k(c),f=i(23),v=k(f),y=i(34),w=k(y),p=i(59),m=k(p),E=i(60),g=k(E),T=i(28),x=k(T),b=i(61),S=k(b);function k(L){return L&&L.__esModule?L:{default:L}}function I(L,F){if(!(L instanceof F))throw new TypeError("Cannot call a class as a function")}function C(L,F){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:L}function A(L,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);L.prototype=Object.create(F&&F.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(L,F):L.__proto__=F)}var N=[!1,"center","right","justify"],P=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],j=[!1,"serif","monospace"],B=["1","2","3",!1],z=["small",!1,"large","huge"],H=function(L){A(F,L);function F(q,U){I(this,F);var O=C(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,q,U)),V=function W(K){if(!document.body.contains(q.root))return document.body.removeEventListener("click",W);O.tooltip!=null&&!O.tooltip.root.contains(K.target)&&document.activeElement!==O.tooltip.textbox&&!O.quill.hasFocus()&&O.tooltip.hide(),O.pickers!=null&&O.pickers.forEach(function(X){X.container.contains(K.target)||X.close()})};return q.emitter.listenDOM("click",document.body,V),O}return s(F,[{key:"addModule",value:function(U){var O=o(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"addModule",this).call(this,U);return U==="toolbar"&&this.extendToolbar(O),O}},{key:"buildButtons",value:function(U,O){U.forEach(function(V){var W=V.getAttribute("class")||"";W.split(/\s+/).forEach(function(K){if(K.startsWith("ql-")&&(K=K.slice(3),O[K]!=null))if(K==="direction")V.innerHTML=O[K][""]+O[K].rtl;else if(typeof O[K]=="string")V.innerHTML=O[K];else{var X=V.value||"";X!=null&&O[K][X]&&(V.innerHTML=O[K][X])}})})}},{key:"buildPickers",value:function(U,O){var V=this;this.pickers=U.map(function(K){if(K.classList.contains("ql-align"))return K.querySelector("option")==null&&R(K,N),new g.default(K,O.align);if(K.classList.contains("ql-background")||K.classList.contains("ql-color")){var X=K.classList.contains("ql-background")?"background":"color";return K.querySelector("option")==null&&R(K,P,X==="background"?"#ffffff":"#000000"),new m.default(K,O[X])}else return K.querySelector("option")==null&&(K.classList.contains("ql-font")?R(K,j):K.classList.contains("ql-header")?R(K,B):K.classList.contains("ql-size")&&R(K,z)),new x.default(K)});var W=function(){V.pickers.forEach(function(X){X.update()})};this.quill.on(d.default.events.EDITOR_CHANGE,W)}}]),F}(w.default);H.DEFAULTS=(0,l.default)(!0,{},w.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var F=this,q=this.container.querySelector("input.ql-image[type=file]");q==null&&(q=document.createElement("input"),q.setAttribute("type","file"),q.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),q.classList.add("ql-image"),q.addEventListener("change",function(){if(q.files!=null&&q.files[0]!=null){var U=new FileReader;U.onload=function(O){var V=F.quill.getSelection(!0);F.quill.updateContents(new h.default().retain(V.index).delete(V.length).insert({image:O.target.result}),d.default.sources.USER),F.quill.setSelection(V.index+1,d.default.sources.SILENT),q.value=""},U.readAsDataURL(q.files[0])}}),this.container.appendChild(q)),q.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var $=function(L){A(F,L);function F(q,U){I(this,F);var O=C(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,q,U));return O.textbox=O.root.querySelector('input[type="text"]'),O.listen(),O}return s(F,[{key:"listen",value:function(){var U=this;this.textbox.addEventListener("keydown",function(O){v.default.match(O,"enter")?(U.save(),O.preventDefault()):v.default.match(O,"escape")&&(U.cancel(),O.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),O!=null?this.textbox.value=O:U!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+U)||""),this.root.setAttribute("data-mode",U)}},{key:"restoreFocus",value:function(){var U=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=U}},{key:"save",value:function(){var U=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var O=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",U,d.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",U,d.default.sources.USER)),this.quill.root.scrollTop=O;break}case"video":U=D(U);case"formula":{if(!U)break;var V=this.quill.getSelection(!0);if(V!=null){var W=V.index+V.length;this.quill.insertEmbed(W,this.root.getAttribute("data-mode"),U,d.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(W+1," ",d.default.sources.USER),this.quill.setSelection(W+2,d.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),F}(S.default);function D(L){var F=L.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||L.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return F?(F[1]||"https")+"://www.youtube.com/embed/"+F[2]+"?showinfo=0":(F=L.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(F[1]||"https")+"://player.vimeo.com/video/"+F[2]+"/":L}function R(L,F){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;F.forEach(function(U){var O=document.createElement("option");U===q?O.setAttribute("selected","selected"):O.setAttribute("value",U),L.appendChild(O)})}r.BaseTooltip=$,r.default=H},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];this.insertBefore(a[0],null),a.length>1&&this.append.apply(this,a.slice(1))},o.prototype.contains=function(a){for(var l,u=this.iterator();l=u();)if(l===a)return!0;return!1},o.prototype.insertBefore=function(a,l){a&&(a.next=l,l!=null?(a.prev=l.prev,l.prev!=null&&(l.prev.next=a),l.prev=a,l===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)},o.prototype.offset=function(a){for(var l=0,u=this.head;u!=null;){if(u===a)return l;l+=u.length(),u=u.next}return-1},o.prototype.remove=function(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)},o.prototype.iterator=function(a){return a===void 0&&(a=this.head),function(){var l=a;return a!=null&&(a=a.next),l}},o.prototype.find=function(a,l){l===void 0&&(l=!1);for(var u,h=this.iterator();u=h();){var c=u.length();if(a<c||l&&a===c&&(u.next==null||u.next.length()!==0))return[u,a];a-=c}return[null,0]},o.prototype.forEach=function(a){for(var l,u=this.iterator();l=u();)a(l)},o.prototype.forEachAt=function(a,l,u){if(!(l<=0))for(var h=this.find(a),c=h[0],d=h[1],f,v=a-d,y=this.iterator(c);(f=y())&&v<a+l;){var w=f.length();a>v?u(f,a-v,Math.min(l,v+w-a)):u(f,0,Math.min(w,a+l-v)),v+=w}},o.prototype.map=function(a){return this.reduce(function(l,u){return l.push(a(u)),l},[])},o.prototype.reduce=function(a,l){for(var u,h=this.iterator();u=h();)l=a(l,u);return l},o}();r.default=s},function(n,r,i){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var v in f)f.hasOwnProperty(v)&&(d[v]=f[v])};return function(d,f){c(d,f);function v(){this.constructor=d}d.prototype=f===null?Object.create(f):(v.prototype=f.prototype,new v)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),a=i(1),l={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},u=100,h=function(c){s(d,c);function d(f){var v=c.call(this,f)||this;return v.scroll=v,v.observer=new MutationObserver(function(y){v.update(y)}),v.observer.observe(v.domNode,l),v.attach(),v}return d.prototype.detach=function(){c.prototype.detach.call(this),this.observer.disconnect()},d.prototype.deleteAt=function(f,v){this.update(),f===0&&v===this.length()?this.children.forEach(function(y){y.remove()}):c.prototype.deleteAt.call(this,f,v)},d.prototype.formatAt=function(f,v,y,w){this.update(),c.prototype.formatAt.call(this,f,v,y,w)},d.prototype.insertAt=function(f,v,y){this.update(),c.prototype.insertAt.call(this,f,v,y)},d.prototype.optimize=function(f,v){var y=this;f===void 0&&(f=[]),v===void 0&&(v={}),c.prototype.optimize.call(this,v);for(var w=[].slice.call(this.observer.takeRecords());w.length>0;)f.push(w.pop());for(var p=function(T,x){x===void 0&&(x=!0),!(T==null||T===y)&&T.domNode.parentNode!=null&&(T.domNode[a.DATA_KEY].mutations==null&&(T.domNode[a.DATA_KEY].mutations=[]),x&&p(T.parent))},m=function(T){T.domNode[a.DATA_KEY]==null||T.domNode[a.DATA_KEY].mutations==null||(T instanceof o.default&&T.children.forEach(m),T.optimize(v))},E=f,g=0;E.length>0;g+=1){if(g>=u)throw new Error("[Parchment] Maximum optimize iterations reached");for(E.forEach(function(T){var x=a.find(T.target,!0);x!=null&&(x.domNode===T.target&&(T.type==="childList"?(p(a.find(T.previousSibling,!1)),[].forEach.call(T.addedNodes,function(b){var S=a.find(b,!1);p(S,!1),S instanceof o.default&&S.children.forEach(function(k){p(k,!1)})})):T.type==="attributes"&&p(x.prev)),p(x))}),this.children.forEach(m),E=[].slice.call(this.observer.takeRecords()),w=E.slice();w.length>0;)f.push(w.pop())}},d.prototype.update=function(f,v){var y=this;v===void 0&&(v={}),f=f||this.observer.takeRecords(),f.map(function(w){var p=a.find(w.target,!0);return p==null?null:p.domNode[a.DATA_KEY].mutations==null?(p.domNode[a.DATA_KEY].mutations=[w],p):(p.domNode[a.DATA_KEY].mutations.push(w),null)}).forEach(function(w){w==null||w===y||w.domNode[a.DATA_KEY]==null||w.update(w.domNode[a.DATA_KEY].mutations||[],v)}),this.domNode[a.DATA_KEY].mutations!=null&&c.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,v),this.optimize(f,v)},d.blotName="scroll",d.defaultChild="block",d.scope=a.Scope.BLOCK_BLOT,d.tagName="DIV",d}(o.default);r.default=h},function(n,r,i){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var f in d)d.hasOwnProperty(f)&&(c[f]=d[f])};return function(c,d){h(c,d);function f(){this.constructor=c}c.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),a=i(1);function l(h,c){if(Object.keys(h).length!==Object.keys(c).length)return!1;for(var d in h)if(h[d]!==c[d])return!1;return!0}var u=function(h){s(c,h);function c(){return h!==null&&h.apply(this,arguments)||this}return c.formats=function(d){if(d.tagName!==c.tagName)return h.formats.call(this,d)},c.prototype.format=function(d,f){var v=this;d===this.statics.blotName&&!f?(this.children.forEach(function(y){y instanceof o.default||(y=y.wrap(c.blotName,!0)),v.attributes.copy(y)}),this.unwrap()):h.prototype.format.call(this,d,f)},c.prototype.formatAt=function(d,f,v,y){if(this.formats()[v]!=null||a.query(v,a.Scope.ATTRIBUTE)){var w=this.isolate(d,f);w.format(v,y)}else h.prototype.formatAt.call(this,d,f,v,y)},c.prototype.optimize=function(d){h.prototype.optimize.call(this,d);var f=this.formats();if(Object.keys(f).length===0)return this.unwrap();var v=this.next;v instanceof c&&v.prev===this&&l(f,v.formats())&&(v.moveChildren(this),v.remove())},c.blotName="inline",c.scope=a.Scope.INLINE_BLOT,c.tagName="SPAN",c}(o.default);r.default=u},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,c){h.__proto__=c}||function(h,c){for(var d in c)c.hasOwnProperty(d)&&(h[d]=c[d])};return function(h,c){u(h,c);function d(){this.constructor=h}h.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),a=i(1),l=function(u){s(h,u);function h(){return u!==null&&u.apply(this,arguments)||this}return h.formats=function(c){var d=a.query(h.blotName).tagName;if(c.tagName!==d)return u.formats.call(this,c)},h.prototype.format=function(c,d){a.query(c,a.Scope.BLOCK)!=null&&(c===this.statics.blotName&&!d?this.replaceWith(h.blotName):u.prototype.format.call(this,c,d))},h.prototype.formatAt=function(c,d,f,v){a.query(f,a.Scope.BLOCK)!=null?this.format(f,v):u.prototype.formatAt.call(this,c,d,f,v)},h.prototype.insertAt=function(c,d,f){if(f==null||a.query(d,a.Scope.INLINE)!=null)u.prototype.insertAt.call(this,c,d,f);else{var v=this.split(c),y=a.create(d,f);v.parent.insertBefore(y,v)}},h.prototype.update=function(c,d){navigator.userAgent.match(/Trident/)?this.build():u.prototype.update.call(this,c,d)},h.blotName="block",h.scope=a.Scope.BLOCK_BLOT,h.tagName="P",h}(o.default);r.default=l},function(n,r,i){var s=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var c in h)h.hasOwnProperty(c)&&(u[c]=h[c])};return function(u,h){l(u,h);function c(){this.constructor=u}u.prototype=h===null?Object.create(h):(c.prototype=h.prototype,new c)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),a=function(l){s(u,l);function u(){return l!==null&&l.apply(this,arguments)||this}return u.formats=function(h){},u.prototype.format=function(h,c){l.prototype.formatAt.call(this,0,this.length(),h,c)},u.prototype.formatAt=function(h,c,d,f){h===0&&c===this.length()?this.format(d,f):l.prototype.formatAt.call(this,h,c,d,f)},u.prototype.formats=function(){return this.statics.formats(this.domNode)},u}(o.default);r.default=a},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,c){h.__proto__=c}||function(h,c){for(var d in c)c.hasOwnProperty(d)&&(h[d]=c[d])};return function(h,c){u(h,c);function d(){this.constructor=h}h.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),a=i(1),l=function(u){s(h,u);function h(c){var d=u.call(this,c)||this;return d.text=d.statics.value(d.domNode),d}return h.create=function(c){return document.createTextNode(c)},h.value=function(c){var d=c.data;return d.normalize&&(d=d.normalize()),d},h.prototype.deleteAt=function(c,d){this.domNode.data=this.text=this.text.slice(0,c)+this.text.slice(c+d)},h.prototype.index=function(c,d){return this.domNode===c?d:-1},h.prototype.insertAt=function(c,d,f){f==null?(this.text=this.text.slice(0,c)+d+this.text.slice(c),this.domNode.data=this.text):u.prototype.insertAt.call(this,c,d,f)},h.prototype.length=function(){return this.text.length},h.prototype.optimize=function(c){u.prototype.optimize.call(this,c),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof h&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},h.prototype.position=function(c,d){return[this.domNode,c]},h.prototype.split=function(c,d){if(d===void 0&&(d=!1),!d){if(c===0)return this;if(c===this.length())return this.next}var f=a.create(this.domNode.splitText(c));return this.parent.insertBefore(f,this.next),this.text=this.statics.value(this.domNode),f},h.prototype.update=function(c,d){var f=this;c.some(function(v){return v.type==="characterData"&&v.target===f.domNode})&&(this.text=this.statics.value(this.domNode))},h.prototype.value=function(){return this.text},h.blotName="text",h.scope=a.Scope.INLINE_BLOT,h}(o.default);r.default=l},function(n,r,i){var s=document.createElement("div");if(s.classList.toggle("test-class",!1),s.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,l){return arguments.length>1&&!this.contains(a)==!l?l:o.call(this,a)}}String.prototype.startsWith||(String.prototype.startsWith=function(a,l){return l=l||0,this.substr(l,a.length)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(a,l){var u=this.toString();(typeof l!="number"||!isFinite(l)||Math.floor(l)!==l||l>u.length)&&(l=u.length),l-=a.length;var h=u.indexOf(a,l);return h!==-1&&h===l}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("predicate must be a function");for(var u=Object(this),h=u.length>>>0,c=arguments[1],d,f=0;f<h;f++)if(d=u[f],l.call(c,d,f,u))return d}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,r){var i=-1,s=1,o=0;function a(g,T,x){if(g==T)return g?[[o,g]]:[];(x<0||g.length<x)&&(x=null);var b=c(g,T),S=g.substring(0,b);g=g.substring(b),T=T.substring(b),b=d(g,T);var k=g.substring(g.length-b);g=g.substring(0,g.length-b),T=T.substring(0,T.length-b);var I=l(g,T);return S&&I.unshift([o,S]),k&&I.push([o,k]),v(I),x!=null&&(I=p(I,x)),I=m(I),I}function l(g,T){var x;if(!g)return[[s,T]];if(!T)return[[i,g]];var b=g.length>T.length?g:T,S=g.length>T.length?T:g,k=b.indexOf(S);if(k!=-1)return x=[[s,b.substring(0,k)],[o,S],[s,b.substring(k+S.length)]],g.length>T.length&&(x[0][0]=x[2][0]=i),x;if(S.length==1)return[[i,g],[s,T]];var I=f(g,T);if(I){var C=I[0],A=I[1],N=I[2],P=I[3],j=I[4],B=a(C,N),z=a(A,P);return B.concat([[o,j]],z)}return u(g,T)}function u(g,T){for(var x=g.length,b=T.length,S=Math.ceil((x+b)/2),k=S,I=2*S,C=new Array(I),A=new Array(I),N=0;N<I;N++)C[N]=-1,A[N]=-1;C[k+1]=0,A[k+1]=0;for(var P=x-b,j=P%2!=0,B=0,z=0,H=0,$=0,D=0;D<S;D++){for(var R=-D+B;R<=D-z;R+=2){var L=k+R,F;R==-D||R!=D&&C[L-1]<C[L+1]?F=C[L+1]:F=C[L-1]+1;for(var q=F-R;F<x&&q<b&&g.charAt(F)==T.charAt(q);)F++,q++;if(C[L]=F,F>x)z+=2;else if(q>b)B+=2;else if(j){var U=k+P-R;if(U>=0&&U<I&&A[U]!=-1){var O=x-A[U];if(F>=O)return h(g,T,F,q)}}}for(var V=-D+H;V<=D-$;V+=2){var U=k+V,O;V==-D||V!=D&&A[U-1]<A[U+1]?O=A[U+1]:O=A[U-1]+1;for(var W=O-V;O<x&&W<b&&g.charAt(x-O-1)==T.charAt(b-W-1);)O++,W++;if(A[U]=O,O>x)$+=2;else if(W>b)H+=2;else if(!j){var L=k+P-V;if(L>=0&&L<I&&C[L]!=-1){var F=C[L],q=k+F-L;if(O=x-O,F>=O)return h(g,T,F,q)}}}}return[[i,g],[s,T]]}function h(g,T,x,b){var S=g.substring(0,x),k=T.substring(0,b),I=g.substring(x),C=T.substring(b),A=a(S,k),N=a(I,C);return A.concat(N)}function c(g,T){if(!g||!T||g.charAt(0)!=T.charAt(0))return 0;for(var x=0,b=Math.min(g.length,T.length),S=b,k=0;x<S;)g.substring(k,S)==T.substring(k,S)?(x=S,k=x):b=S,S=Math.floor((b-x)/2+x);return S}function d(g,T){if(!g||!T||g.charAt(g.length-1)!=T.charAt(T.length-1))return 0;for(var x=0,b=Math.min(g.length,T.length),S=b,k=0;x<S;)g.substring(g.length-S,g.length-k)==T.substring(T.length-S,T.length-k)?(x=S,k=x):b=S,S=Math.floor((b-x)/2+x);return S}function f(g,T){var x=g.length>T.length?g:T,b=g.length>T.length?T:g;if(x.length<4||b.length*2<x.length)return null;function S(z,H,$){for(var D=z.substring($,$+Math.floor(z.length/4)),R=-1,L="",F,q,U,O;(R=H.indexOf(D,R+1))!=-1;){var V=c(z.substring($),H.substring(R)),W=d(z.substring(0,$),H.substring(0,R));L.length<W+V&&(L=H.substring(R-W,R)+H.substring(R,R+V),F=z.substring(0,$-W),q=z.substring($+V),U=H.substring(0,R-W),O=H.substring(R+V))}return L.length*2>=z.length?[F,q,U,O,L]:null}var k=S(x,b,Math.ceil(x.length/4)),I=S(x,b,Math.ceil(x.length/2)),C;if(!k&&!I)return null;I?k?C=k[4].length>I[4].length?k:I:C=I:C=k;var A,N,P,j;g.length>T.length?(A=C[0],N=C[1],P=C[2],j=C[3]):(P=C[0],j=C[1],A=C[2],N=C[3]);var B=C[4];return[A,N,P,j,B]}function v(g){g.push([o,""]);for(var T=0,x=0,b=0,S="",k="",I;T<g.length;)switch(g[T][0]){case s:b++,k+=g[T][1],T++;break;case i:x++,S+=g[T][1],T++;break;case o:x+b>1?(x!==0&&b!==0&&(I=c(k,S),I!==0&&(T-x-b>0&&g[T-x-b-1][0]==o?g[T-x-b-1][1]+=k.substring(0,I):(g.splice(0,0,[o,k.substring(0,I)]),T++),k=k.substring(I),S=S.substring(I)),I=d(k,S),I!==0&&(g[T][1]=k.substring(k.length-I)+g[T][1],k=k.substring(0,k.length-I),S=S.substring(0,S.length-I))),x===0?g.splice(T-b,x+b,[s,k]):b===0?g.splice(T-x,x+b,[i,S]):g.splice(T-x-b,x+b,[i,S],[s,k]),T=T-x-b+(x?1:0)+(b?1:0)+1):T!==0&&g[T-1][0]==o?(g[T-1][1]+=g[T][1],g.splice(T,1)):T++,b=0,x=0,S="",k="";break}g[g.length-1][1]===""&&g.pop();var C=!1;for(T=1;T<g.length-1;)g[T-1][0]==o&&g[T+1][0]==o&&(g[T][1].substring(g[T][1].length-g[T-1][1].length)==g[T-1][1]?(g[T][1]=g[T-1][1]+g[T][1].substring(0,g[T][1].length-g[T-1][1].length),g[T+1][1]=g[T-1][1]+g[T+1][1],g.splice(T-1,1),C=!0):g[T][1].substring(0,g[T+1][1].length)==g[T+1][1]&&(g[T-1][1]+=g[T+1][1],g[T][1]=g[T][1].substring(g[T+1][1].length)+g[T+1][1],g.splice(T+1,1),C=!0)),T++;C&&v(g)}var y=a;y.INSERT=s,y.DELETE=i,y.EQUAL=o,n.exports=y;function w(g,T){if(T===0)return[o,g];for(var x=0,b=0;b<g.length;b++){var S=g[b];if(S[0]===i||S[0]===o){var k=x+S[1].length;if(T===k)return[b+1,g];if(T<k){g=g.slice();var I=T-x,C=[S[0],S[1].slice(0,I)],A=[S[0],S[1].slice(I)];return g.splice(b,1,C,A),[b+1,g]}else x=k}}throw new Error("cursor_pos is out of bounds!")}function p(g,T){var x=w(g,T),b=x[1],S=x[0],k=b[S],I=b[S+1];if(k==null)return g;if(k[0]!==o)return g;if(I!=null&&k[1]+I[1]===I[1]+k[1])return b.splice(S,2,I,k),E(b,S,2);if(I!=null&&I[1].indexOf(k[1])===0){b.splice(S,2,[I[0],k[1]],[0,k[1]]);var C=I[1].slice(k[1].length);return C.length>0&&b.splice(S+2,0,[I[0],C]),E(b,S,3)}else return g}function m(g){for(var T=!1,x=function(I){return I.charCodeAt(0)>=56320&&I.charCodeAt(0)<=57343},b=function(I){return I.charCodeAt(I.length-1)>=55296&&I.charCodeAt(I.length-1)<=56319},S=2;S<g.length;S+=1)g[S-2][0]===o&&b(g[S-2][1])&&g[S-1][0]===i&&x(g[S-1][1])&&g[S][0]===s&&x(g[S][1])&&(T=!0,g[S-1][1]=g[S-2][1].slice(-1)+g[S-1][1],g[S][1]=g[S-2][1].slice(-1)+g[S][1],g[S-2][1]=g[S-2][1].slice(0,-1));if(!T)return g;for(var k=[],S=0;S<g.length;S+=1)g[S][1].length>0&&k.push(g[S]);return k}function E(g,T,x){for(var b=T+x-1;b>=0&&b>=T-1;b--)if(b+1<g.length){var S=g[b],k=g[b+1];S[0]===k[1]&&g.splice(b,2,[S[0],S[1]+k[1]])}return g}},function(n,r){r=n.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(s){var o=[];for(var a in s)o.push(a);return o}},function(n,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=n.exports=i?s:o,r.supported=s;function s(a){return Object.prototype.toString.call(a)=="[object Arguments]"}r.unsupported=o;function o(a){return a&&typeof a=="object"&&typeof a.length=="number"&&Object.prototype.hasOwnProperty.call(a,"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}},function(n,r){var i=Object.prototype.hasOwnProperty,s="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(s=!1));function a(u,h,c){this.fn=u,this.context=h,this.once=c||!1}function l(){this._events=new o,this._eventsCount=0}l.prototype.eventNames=function(){var h=[],c,d;if(this._eventsCount===0)return h;for(d in c=this._events)i.call(c,d)&&h.push(s?d.slice(1):d);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(c)):h},l.prototype.listeners=function(h,c){var d=s?s+h:h,f=this._events[d];if(c)return!!f;if(!f)return[];if(f.fn)return[f.fn];for(var v=0,y=f.length,w=new Array(y);v<y;v++)w[v]=f[v].fn;return w},l.prototype.emit=function(h,c,d,f,v,y){var w=s?s+h:h;if(!this._events[w])return!1;var p=this._events[w],m=arguments.length,E,g;if(p.fn){switch(p.once&&this.removeListener(h,p.fn,void 0,!0),m){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,c),!0;case 3:return p.fn.call(p.context,c,d),!0;case 4:return p.fn.call(p.context,c,d,f),!0;case 5:return p.fn.call(p.context,c,d,f,v),!0;case 6:return p.fn.call(p.context,c,d,f,v,y),!0}for(g=1,E=new Array(m-1);g<m;g++)E[g-1]=arguments[g];p.fn.apply(p.context,E)}else{var T=p.length,x;for(g=0;g<T;g++)switch(p[g].once&&this.removeListener(h,p[g].fn,void 0,!0),m){case 1:p[g].fn.call(p[g].context);break;case 2:p[g].fn.call(p[g].context,c);break;case 3:p[g].fn.call(p[g].context,c,d);break;case 4:p[g].fn.call(p[g].context,c,d,f);break;default:if(!E)for(x=1,E=new Array(m-1);x<m;x++)E[x-1]=arguments[x];p[g].fn.apply(p[g].context,E)}}return!0},l.prototype.on=function(h,c,d){var f=new a(c,d||this),v=s?s+h:h;return this._events[v]?this._events[v].fn?this._events[v]=[this._events[v],f]:this._events[v].push(f):(this._events[v]=f,this._eventsCount++),this},l.prototype.once=function(h,c,d){var f=new a(c,d||this,!0),v=s?s+h:h;return this._events[v]?this._events[v].fn?this._events[v]=[this._events[v],f]:this._events[v].push(f):(this._events[v]=f,this._eventsCount++),this},l.prototype.removeListener=function(h,c,d,f){var v=s?s+h:h;if(!this._events[v])return this;if(!c)return--this._eventsCount===0?this._events=new o:delete this._events[v],this;var y=this._events[v];if(y.fn)y.fn===c&&(!f||y.once)&&(!d||y.context===d)&&(--this._eventsCount===0?this._events=new o:delete this._events[v]);else{for(var w=0,p=[],m=y.length;w<m;w++)(y[w].fn!==c||f&&!y[w].once||d&&y[w].context!==d)&&p.push(y[w]);p.length?this._events[v]=p.length===1?p[0]:p:--this._eventsCount===0?this._events=new o:delete this._events[v]}return this},l.prototype.removeAllListeners=function(h){var c;return h?(c=s?s+h:h,this._events[c]&&(--this._eventsCount===0?this._events=new o:delete this._events[c])):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=s,l.EventEmitter=l,typeof n<"u"&&(n.exports=l)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},o=function(){function G(Y,se){var oe=[],Z=!0,_e=!1,we=void 0;try{for(var Ee=Y[Symbol.iterator](),kn;!(Z=(kn=Ee.next()).done)&&(oe.push(kn.value),!(se&&oe.length===se));Z=!0);}catch(Tr){_e=!0,we=Tr}finally{try{!Z&&Ee.return&&Ee.return()}finally{if(_e)throw we}}return oe}return function(Y,se){if(Array.isArray(Y))return Y;if(Symbol.iterator in Object(Y))return G(Y,se);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function G(Y,se){for(var oe=0;oe<se.length;oe++){var Z=se[oe];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(Y,Z.key,Z)}}return function(Y,se,oe){return se&&G(Y.prototype,se),oe&&G(Y,oe),Y}}(),l=i(3),u=A(l),h=i(2),c=A(h),d=i(0),f=A(d),v=i(5),y=A(v),w=i(10),p=A(w),m=i(9),E=A(m),g=i(36),T=i(37),x=i(13),b=A(x),S=i(26),k=i(38),I=i(39),C=i(40);function A(G){return G&&G.__esModule?G:{default:G}}function N(G,Y,se){return Y in G?Object.defineProperty(G,Y,{value:se,enumerable:!0,configurable:!0,writable:!0}):G[Y]=se,G}function P(G,Y){if(!(G instanceof Y))throw new TypeError("Cannot call a class as a function")}function j(G,Y){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:G}function B(G,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);G.prototype=Object.create(Y&&Y.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(G,Y):G.__proto__=Y)}var z=(0,p.default)("quill:clipboard"),H="__ql-matcher",$=[[Node.TEXT_NODE,vt],[Node.TEXT_NODE,Ie],["br",le],[Node.ELEMENT_NODE,Ie],[Node.ELEMENT_NODE,X],[Node.ELEMENT_NODE,je],[Node.ELEMENT_NODE,K],[Node.ELEMENT_NODE,an],["li",ye],["b",W.bind(W,"bold")],["i",W.bind(W,"italic")],["style",pe]],D=[g.AlignAttribute,k.DirectionAttribute].reduce(function(G,Y){return G[Y.keyName]=Y,G},{}),R=[g.AlignStyle,T.BackgroundStyle,S.ColorStyle,k.DirectionStyle,I.FontStyle,C.SizeStyle].reduce(function(G,Y){return G[Y.keyName]=Y,G},{}),L=function(G){B(Y,G);function Y(se,oe){P(this,Y);var Z=j(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,se,oe));return Z.quill.root.addEventListener("paste",Z.onPaste.bind(Z)),Z.container=Z.quill.addContainer("ql-clipboard"),Z.container.setAttribute("contenteditable",!0),Z.container.setAttribute("tabindex",-1),Z.matchers=[],$.concat(Z.options.matchers).forEach(function(_e){var we=o(_e,2),Ee=we[0],kn=we[1];!oe.matchVisual&&kn===je||Z.addMatcher(Ee,kn)}),Z}return a(Y,[{key:"addMatcher",value:function(oe,Z){this.matchers.push([oe,Z])}},{key:"convert",value:function(oe){if(typeof oe=="string")return this.container.innerHTML=oe.replace(/\>\r?\n +\</g,"><"),this.convert();var Z=this.quill.getFormat(this.quill.selection.savedRange.index);if(Z[b.default.blotName]){var _e=this.container.innerText;return this.container.innerHTML="",new c.default().insert(_e,N({},b.default.blotName,Z[b.default.blotName]))}var we=this.prepareMatching(),Ee=o(we,2),kn=Ee[0],Tr=Ee[1],et=V(this.container,kn,Tr);return U(et,`
`)&&et.ops[et.ops.length-1].attributes==null&&(et=et.compose(new c.default().retain(et.length()-1).delete(1))),z.log("convert",this.container.innerHTML,et),this.container.innerHTML="",et}},{key:"dangerouslyPasteHTML",value:function(oe,Z){var _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof oe=="string")this.quill.setContents(this.convert(oe),Z),this.quill.setSelection(0,y.default.sources.SILENT);else{var we=this.convert(Z);this.quill.updateContents(new c.default().retain(oe).concat(we),_e),this.quill.setSelection(oe+we.length(),y.default.sources.SILENT)}}},{key:"onPaste",value:function(oe){var Z=this;if(!(oe.defaultPrevented||!this.quill.isEnabled())){var _e=this.quill.getSelection(),we=new c.default().retain(_e.index),Ee=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(y.default.sources.SILENT),setTimeout(function(){we=we.concat(Z.convert()).delete(_e.length),Z.quill.updateContents(we,y.default.sources.USER),Z.quill.setSelection(we.length()-_e.length,y.default.sources.SILENT),Z.quill.scrollingContainer.scrollTop=Ee,Z.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var oe=this,Z=[],_e=[];return this.matchers.forEach(function(we){var Ee=o(we,2),kn=Ee[0],Tr=Ee[1];switch(kn){case Node.TEXT_NODE:_e.push(Tr);break;case Node.ELEMENT_NODE:Z.push(Tr);break;default:[].forEach.call(oe.container.querySelectorAll(kn),function(et){et[H]=et[H]||[],et[H].push(Tr)});break}}),[Z,_e]}}]),Y}(E.default);L.DEFAULTS={matchers:[],matchVisual:!0};function F(G,Y,se){return(typeof Y>"u"?"undefined":s(Y))==="object"?Object.keys(Y).reduce(function(oe,Z){return F(oe,Z,Y[Z])},G):G.reduce(function(oe,Z){return Z.attributes&&Z.attributes[Y]?oe.push(Z):oe.insert(Z.insert,(0,u.default)({},N({},Y,se),Z.attributes))},new c.default)}function q(G){if(G.nodeType!==Node.ELEMENT_NODE)return{};var Y="__ql-computed-style";return G[Y]||(G[Y]=window.getComputedStyle(G))}function U(G,Y){for(var se="",oe=G.ops.length-1;oe>=0&&se.length<Y.length;--oe){var Z=G.ops[oe];if(typeof Z.insert!="string")break;se=Z.insert+se}return se.slice(-1*Y.length)===Y}function O(G){if(G.childNodes.length===0)return!1;var Y=q(G);return["block","list-item"].indexOf(Y.display)>-1}function V(G,Y,se){return G.nodeType===G.TEXT_NODE?se.reduce(function(oe,Z){return Z(G,oe)},new c.default):G.nodeType===G.ELEMENT_NODE?[].reduce.call(G.childNodes||[],function(oe,Z){var _e=V(Z,Y,se);return Z.nodeType===G.ELEMENT_NODE&&(_e=Y.reduce(function(we,Ee){return Ee(Z,we)},_e),_e=(Z[H]||[]).reduce(function(we,Ee){return Ee(Z,we)},_e)),oe.concat(_e)},new c.default):new c.default}function W(G,Y,se){return F(se,G,!0)}function K(G,Y){var se=f.default.Attributor.Attribute.keys(G),oe=f.default.Attributor.Class.keys(G),Z=f.default.Attributor.Style.keys(G),_e={};return se.concat(oe).concat(Z).forEach(function(we){var Ee=f.default.query(we,f.default.Scope.ATTRIBUTE);Ee!=null&&(_e[Ee.attrName]=Ee.value(G),_e[Ee.attrName])||(Ee=D[we],Ee!=null&&(Ee.attrName===we||Ee.keyName===we)&&(_e[Ee.attrName]=Ee.value(G)||void 0),Ee=R[we],Ee!=null&&(Ee.attrName===we||Ee.keyName===we)&&(Ee=R[we],_e[Ee.attrName]=Ee.value(G)||void 0))}),Object.keys(_e).length>0&&(Y=F(Y,_e)),Y}function X(G,Y){var se=f.default.query(G);if(se==null)return Y;if(se.prototype instanceof f.default.Embed){var oe={},Z=se.value(G);Z!=null&&(oe[se.blotName]=Z,Y=new c.default().insert(oe,se.formats(G)))}else typeof se.formats=="function"&&(Y=F(Y,se.blotName,se.formats(G)));return Y}function le(G,Y){return U(Y,`
`)||Y.insert(`
`),Y}function pe(){return new c.default}function ye(G,Y){var se=f.default.query(G);if(se==null||se.blotName!=="list-item"||!U(Y,`
`))return Y;for(var oe=-1,Z=G.parentNode;!Z.classList.contains("ql-clipboard");)(f.default.query(Z)||{}).blotName==="list"&&(oe+=1),Z=Z.parentNode;return oe<=0?Y:Y.compose(new c.default().retain(Y.length()-1).retain(1,{indent:oe}))}function Ie(G,Y){return U(Y,`
`)||(O(G)||Y.length()>0&&G.nextSibling&&O(G.nextSibling))&&Y.insert(`
`),Y}function je(G,Y){if(O(G)&&G.nextElementSibling!=null&&!U(Y,`

`)){var se=G.offsetHeight+parseFloat(q(G).marginTop)+parseFloat(q(G).marginBottom);G.nextElementSibling.offsetTop>G.offsetTop+se*1.5&&Y.insert(`
`)}return Y}function an(G,Y){var se={},oe=G.style||{};return oe.fontStyle&&q(G).fontStyle==="italic"&&(se.italic=!0),oe.fontWeight&&(q(G).fontWeight.startsWith("bold")||parseInt(q(G).fontWeight)>=700)&&(se.bold=!0),Object.keys(se).length>0&&(Y=F(Y,se)),parseFloat(oe.textIndent||0)>0&&(Y=new c.default().insert("	").concat(Y)),Y}function vt(G,Y){var se=G.data;if(G.parentNode.tagName==="O:P")return Y.insert(se.trim());if(se.trim().length===0&&G.parentNode.classList.contains("ql-clipboard"))return Y;if(!q(G.parentNode).whiteSpace.startsWith("pre")){var oe=function(_e,we){return we=we.replace(/[^\u00a0]/g,""),we.length<1&&_e?" ":we};se=se.replace(/\r\n/g," ").replace(/\n/g," "),se=se.replace(/\s\s+/g,oe.bind(oe,!0)),(G.previousSibling==null&&O(G.parentNode)||G.previousSibling!=null&&O(G.previousSibling))&&(se=se.replace(/^\s+/,oe.bind(oe,!1))),(G.nextSibling==null&&O(G.parentNode)||G.nextSibling!=null&&O(G.nextSibling))&&(se=se.replace(/\s+$/,oe.bind(oe,!1)))}return Y.insert(se)}r.default=L,r.matchAttributor=K,r.matchBlot=X,r.matchNewline=Ie,r.matchSpacing=je,r.matchText=vt},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function v(y,w){for(var p=0;p<w.length;p++){var m=w[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(y,m.key,m)}}return function(y,w,p){return w&&v(y.prototype,w),p&&v(y,p),y}}(),o=function v(y,w,p){y===null&&(y=Function.prototype);var m=Object.getOwnPropertyDescriptor(y,w);if(m===void 0){var E=Object.getPrototypeOf(y);return E===null?void 0:v(E,w,p)}else{if("value"in m)return m.value;var g=m.get;return g===void 0?void 0:g.call(p)}},a=i(6),l=u(a);function u(v){return v&&v.__esModule?v:{default:v}}function h(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function c(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function d(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var f=function(v){d(y,v);function y(){return h(this,y),c(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return s(y,[{key:"optimize",value:function(p){o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,p),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),y}(l.default);f.blotName="bold",f.tagName=["STRONG","B"],r.default=f},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var s=function(){function C(A,N){var P=[],j=!0,B=!1,z=void 0;try{for(var H=A[Symbol.iterator](),$;!(j=($=H.next()).done)&&(P.push($.value),!(N&&P.length===N));j=!0);}catch(D){B=!0,z=D}finally{try{!j&&H.return&&H.return()}finally{if(B)throw z}}return P}return function(A,N){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return C(A,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function C(A,N){for(var P=0;P<N.length;P++){var j=N[P];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(A,j.key,j)}}return function(A,N,P){return N&&C(A.prototype,N),P&&C(A,P),A}}(),a=i(2),l=p(a),u=i(0),h=p(u),c=i(5),d=p(c),f=i(10),v=p(f),y=i(9),w=p(y);function p(C){return C&&C.__esModule?C:{default:C}}function m(C,A,N){return A in C?Object.defineProperty(C,A,{value:N,enumerable:!0,configurable:!0,writable:!0}):C[A]=N,C}function E(C,A){if(!(C instanceof A))throw new TypeError("Cannot call a class as a function")}function g(C,A){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:C}function T(C,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);C.prototype=Object.create(A&&A.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(C,A):C.__proto__=A)}var x=(0,v.default)("quill:toolbar"),b=function(C){T(A,C);function A(N,P){E(this,A);var j=g(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,N,P));if(Array.isArray(j.options.container)){var B=document.createElement("div");k(B,j.options.container),N.container.parentNode.insertBefore(B,N.container),j.container=B}else typeof j.options.container=="string"?j.container=document.querySelector(j.options.container):j.container=j.options.container;if(!(j.container instanceof HTMLElement)){var z;return z=x.error("Container required for toolbar",j.options),g(j,z)}return j.container.classList.add("ql-toolbar"),j.controls=[],j.handlers={},Object.keys(j.options.handlers).forEach(function(H){j.addHandler(H,j.options.handlers[H])}),[].forEach.call(j.container.querySelectorAll("button, select"),function(H){j.attach(H)}),j.quill.on(d.default.events.EDITOR_CHANGE,function(H,$){H===d.default.events.SELECTION_CHANGE&&j.update($)}),j.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){var H=j.quill.selection.getRange(),$=s(H,1),D=$[0];j.update(D)}),j}return o(A,[{key:"addHandler",value:function(P,j){this.handlers[P]=j}},{key:"attach",value:function(P){var j=this,B=[].find.call(P.classList,function(H){return H.indexOf("ql-")===0});if(B){if(B=B.slice(3),P.tagName==="BUTTON"&&P.setAttribute("type","button"),this.handlers[B]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[B]==null){x.warn("ignoring attaching to disabled format",B,P);return}if(h.default.query(B)==null){x.warn("ignoring attaching to nonexistent format",B,P);return}}var z=P.tagName==="SELECT"?"change":"click";P.addEventListener(z,function(H){var $=void 0;if(P.tagName==="SELECT"){if(P.selectedIndex<0)return;var D=P.options[P.selectedIndex];D.hasAttribute("selected")?$=!1:$=D.value||!1}else P.classList.contains("ql-active")?$=!1:$=P.value||!P.hasAttribute("value"),H.preventDefault();j.quill.focus();var R=j.quill.selection.getRange(),L=s(R,1),F=L[0];if(j.handlers[B]!=null)j.handlers[B].call(j,$);else if(h.default.query(B).prototype instanceof h.default.Embed){if($=prompt("Enter "+B),!$)return;j.quill.updateContents(new l.default().retain(F.index).delete(F.length).insert(m({},B,$)),d.default.sources.USER)}else j.quill.format(B,$,d.default.sources.USER);j.update(F)}),this.controls.push([B,P])}}},{key:"update",value:function(P){var j=P==null?{}:this.quill.getFormat(P);this.controls.forEach(function(B){var z=s(B,2),H=z[0],$=z[1];if($.tagName==="SELECT"){var D=void 0;if(P==null)D=null;else if(j[H]==null)D=$.querySelector("option[selected]");else if(!Array.isArray(j[H])){var R=j[H];typeof R=="string"&&(R=R.replace(/\"/g,'\\"')),D=$.querySelector('option[value="'+R+'"]')}D==null?($.value="",$.selectedIndex=-1):D.selected=!0}else if(P==null)$.classList.remove("ql-active");else if($.hasAttribute("value")){var L=j[H]===$.getAttribute("value")||j[H]!=null&&j[H].toString()===$.getAttribute("value")||j[H]==null&&!$.getAttribute("value");$.classList.toggle("ql-active",L)}else $.classList.toggle("ql-active",j[H]!=null)})}}]),A}(w.default);b.DEFAULTS={};function S(C,A,N){var P=document.createElement("button");P.setAttribute("type","button"),P.classList.add("ql-"+A),N!=null&&(P.value=N),C.appendChild(P)}function k(C,A){Array.isArray(A[0])||(A=[A]),A.forEach(function(N){var P=document.createElement("span");P.classList.add("ql-formats"),N.forEach(function(j){if(typeof j=="string")S(P,j);else{var B=Object.keys(j)[0],z=j[B];Array.isArray(z)?I(P,B,z):S(P,B,z)}}),C.appendChild(P)})}function I(C,A,N){var P=document.createElement("select");P.classList.add("ql-"+A),N.forEach(function(j){var B=document.createElement("option");j!==!1?B.setAttribute("value",j):B.setAttribute("selected","selected"),P.appendChild(B)}),C.appendChild(P)}b.DEFAULTS={container:null,handlers:{clean:function(){var A=this,N=this.quill.getSelection();if(N!=null)if(N.length==0){var P=this.quill.getFormat();Object.keys(P).forEach(function(j){h.default.query(j,h.default.Scope.INLINE)!=null&&A.quill.format(j,!1)})}else this.quill.removeFormat(N,d.default.sources.USER)},direction:function(A){var N=this.quill.getFormat().align;A==="rtl"&&N==null?this.quill.format("align","right",d.default.sources.USER):!A&&N==="right"&&this.quill.format("align",!1,d.default.sources.USER),this.quill.format("direction",A,d.default.sources.USER)},indent:function(A){var N=this.quill.getSelection(),P=this.quill.getFormat(N),j=parseInt(P.indent||0);if(A==="+1"||A==="-1"){var B=A==="+1"?1:-1;P.direction==="rtl"&&(B*=-1),this.quill.format("indent",j+B,d.default.sources.USER)}},link:function(A){A===!0&&(A=prompt("Enter link URL:")),this.quill.format("link",A,d.default.sources.USER)},list:function(A){var N=this.quill.getSelection(),P=this.quill.getFormat(N);A==="check"?P.list==="checked"||P.list==="unchecked"?this.quill.format("list",!1,d.default.sources.USER):this.quill.format("list","unchecked",d.default.sources.USER):this.quill.format("list",A,d.default.sources.USER)}}},r.default=b,r.addControls=k},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function v(y,w){for(var p=0;p<w.length;p++){var m=w[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(y,m.key,m)}}return function(y,w,p){return w&&v(y.prototype,w),p&&v(y,p),y}}(),o=function v(y,w,p){y===null&&(y=Function.prototype);var m=Object.getOwnPropertyDescriptor(y,w);if(m===void 0){var E=Object.getPrototypeOf(y);return E===null?void 0:v(E,w,p)}else{if("value"in m)return m.value;var g=m.get;return g===void 0?void 0:g.call(p)}},a=i(28),l=u(a);function u(v){return v&&v.__esModule?v:{default:v}}function h(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function c(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function d(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var f=function(v){d(y,v);function y(w,p){h(this,y);var m=c(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,w));return m.label.innerHTML=p,m.container.classList.add("ql-color-picker"),[].slice.call(m.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(E){E.classList.add("ql-primary")}),m}return s(y,[{key:"buildItem",value:function(p){var m=o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"buildItem",this).call(this,p);return m.style.backgroundColor=p.getAttribute("value")||"",m}},{key:"selectItem",value:function(p,m){o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"selectItem",this).call(this,p,m);var E=this.label.querySelector(".ql-color-label"),g=p&&p.getAttribute("data-value")||"";E&&(E.tagName==="line"?E.style.stroke=g:E.style.fill=g)}}]),y}(l.default);r.default=f},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function v(y,w){for(var p=0;p<w.length;p++){var m=w[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(y,m.key,m)}}return function(y,w,p){return w&&v(y.prototype,w),p&&v(y,p),y}}(),o=function v(y,w,p){y===null&&(y=Function.prototype);var m=Object.getOwnPropertyDescriptor(y,w);if(m===void 0){var E=Object.getPrototypeOf(y);return E===null?void 0:v(E,w,p)}else{if("value"in m)return m.value;var g=m.get;return g===void 0?void 0:g.call(p)}},a=i(28),l=u(a);function u(v){return v&&v.__esModule?v:{default:v}}function h(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function c(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function d(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var f=function(v){d(y,v);function y(w,p){h(this,y);var m=c(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,w));return m.container.classList.add("ql-icon-picker"),[].forEach.call(m.container.querySelectorAll(".ql-picker-item"),function(E){E.innerHTML=p[E.getAttribute("data-value")||""]}),m.defaultItem=m.container.querySelector(".ql-selected"),m.selectItem(m.defaultItem),m}return s(y,[{key:"selectItem",value:function(p,m){o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"selectItem",this).call(this,p,m),p=p||this.defaultItem,this.label.innerHTML=p.innerHTML}}]),y}(l.default);r.default=f},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function l(u,h){for(var c=0;c<h.length;c++){var d=h[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}return function(u,h,c){return h&&l(u.prototype,h),c&&l(u,c),u}}();function o(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(u,h){var c=this;o(this,l),this.quill=u,this.boundsContainer=h||document.body,this.root=u.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){c.root.style.marginTop=-1*c.quill.root.scrollTop+"px"}),this.hide()}return s(l,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(h){var c=h.left+h.width/2-this.root.offsetWidth/2,d=h.bottom+this.quill.root.scrollTop;this.root.style.left=c+"px",this.root.style.top=d+"px",this.root.classList.remove("ql-flip");var f=this.boundsContainer.getBoundingClientRect(),v=this.root.getBoundingClientRect(),y=0;if(v.right>f.right&&(y=f.right-v.right,this.root.style.left=c+y+"px"),v.left<f.left&&(y=f.left-v.left,this.root.style.left=c+y+"px"),v.bottom>f.bottom){var w=v.bottom-v.top,p=h.bottom-h.top+w;this.root.style.top=d-p+"px",this.root.classList.add("ql-flip")}return y}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),l}();r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function I(C,A){var N=[],P=!0,j=!1,B=void 0;try{for(var z=C[Symbol.iterator](),H;!(P=(H=z.next()).done)&&(N.push(H.value),!(A&&N.length===A));P=!0);}catch($){j=!0,B=$}finally{try{!P&&z.return&&z.return()}finally{if(j)throw B}}return N}return function(C,A){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return I(C,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function I(C,A,N){C===null&&(C=Function.prototype);var P=Object.getOwnPropertyDescriptor(C,A);if(P===void 0){var j=Object.getPrototypeOf(C);return j===null?void 0:I(j,A,N)}else{if("value"in P)return P.value;var B=P.get;return B===void 0?void 0:B.call(N)}},a=function(){function I(C,A){for(var N=0;N<A.length;N++){var P=A[N];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}return function(C,A,N){return A&&I(C.prototype,A),N&&I(C,N),C}}(),l=i(3),u=E(l),h=i(8),c=E(h),d=i(43),f=E(d),v=i(27),y=E(v),w=i(15),p=i(41),m=E(p);function E(I){return I&&I.__esModule?I:{default:I}}function g(I,C){if(!(I instanceof C))throw new TypeError("Cannot call a class as a function")}function T(I,C){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:I}function x(I,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);I.prototype=Object.create(C&&C.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(I,C):I.__proto__=C)}var b=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],S=function(I){x(C,I);function C(A,N){g(this,C),N.modules.toolbar!=null&&N.modules.toolbar.container==null&&(N.modules.toolbar.container=b);var P=T(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,A,N));return P.quill.container.classList.add("ql-snow"),P}return a(C,[{key:"extendToolbar",value:function(N){N.container.classList.add("ql-snow"),this.buildButtons([].slice.call(N.container.querySelectorAll("button")),m.default),this.buildPickers([].slice.call(N.container.querySelectorAll("select")),m.default),this.tooltip=new k(this.quill,this.options.bounds),N.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(P,j){N.handlers.link.call(N,!j.format.link)})}}]),C}(f.default);S.DEFAULTS=(0,u.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(C){if(C){var A=this.quill.getSelection();if(A==null||A.length==0)return;var N=this.quill.getText(A);/^\S+@\S+\.\S+$/.test(N)&&N.indexOf("mailto:")!==0&&(N="mailto:"+N);var P=this.quill.theme.tooltip;P.edit("link",N)}else this.quill.format("link",!1)}}}}});var k=function(I){x(C,I);function C(A,N){g(this,C);var P=T(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,A,N));return P.preview=P.root.querySelector("a.ql-preview"),P}return a(C,[{key:"listen",value:function(){var N=this;o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(P){N.root.classList.contains("ql-editing")?N.save():N.edit("link",N.preview.textContent),P.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(P){if(N.linkRange!=null){var j=N.linkRange;N.restoreFocus(),N.quill.formatText(j,"link",!1,c.default.sources.USER),delete N.linkRange}P.preventDefault(),N.hide()}),this.quill.on(c.default.events.SELECTION_CHANGE,function(P,j,B){if(P!=null){if(P.length===0&&B===c.default.sources.USER){var z=N.quill.scroll.descendant(y.default,P.index),H=s(z,2),$=H[0],D=H[1];if($!=null){N.linkRange=new w.Range(P.index-D,$.length());var R=y.default.formats($.domNode);N.preview.textContent=R,N.preview.setAttribute("href",R),N.show(),N.position(N.quill.getBounds(N.linkRange));return}}else delete N.linkRange;N.hide()}})}},{key:"show",value:function(){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),C}(d.BaseTooltip);k.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=S},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(29),o=Z(s),a=i(36),l=i(38),u=i(64),h=i(65),c=Z(h),d=i(66),f=Z(d),v=i(67),y=Z(v),w=i(37),p=i(26),m=i(39),E=i(40),g=i(56),T=Z(g),x=i(68),b=Z(x),S=i(27),k=Z(S),I=i(69),C=Z(I),A=i(70),N=Z(A),P=i(71),j=Z(P),B=i(72),z=Z(B),H=i(73),$=Z(H),D=i(13),R=Z(D),L=i(74),F=Z(L),q=i(75),U=Z(q),O=i(57),V=Z(O),W=i(41),K=Z(W),X=i(28),le=Z(X),pe=i(59),ye=Z(pe),Ie=i(60),je=Z(Ie),an=i(61),vt=Z(an),G=i(108),Y=Z(G),se=i(62),oe=Z(se);function Z(_e){return _e&&_e.__esModule?_e:{default:_e}}o.default.register({"attributors/attribute/direction":l.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":w.BackgroundClass,"attributors/class/color":p.ColorClass,"attributors/class/direction":l.DirectionClass,"attributors/class/font":m.FontClass,"attributors/class/size":E.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":w.BackgroundStyle,"attributors/style/color":p.ColorStyle,"attributors/style/direction":l.DirectionStyle,"attributors/style/font":m.FontStyle,"attributors/style/size":E.SizeStyle},!0),o.default.register({"formats/align":a.AlignClass,"formats/direction":l.DirectionClass,"formats/indent":u.IndentClass,"formats/background":w.BackgroundStyle,"formats/color":p.ColorStyle,"formats/font":m.FontClass,"formats/size":E.SizeClass,"formats/blockquote":c.default,"formats/code-block":R.default,"formats/header":f.default,"formats/list":y.default,"formats/bold":T.default,"formats/code":D.Code,"formats/italic":b.default,"formats/link":k.default,"formats/script":C.default,"formats/strike":N.default,"formats/underline":j.default,"formats/image":z.default,"formats/video":$.default,"formats/list/item":v.ListItem,"modules/formula":F.default,"modules/syntax":U.default,"modules/toolbar":V.default,"themes/bubble":Y.default,"themes/snow":oe.default,"ui/icons":K.default,"ui/picker":le.default,"ui/icon-picker":je.default,"ui/color-picker":ye.default,"ui/tooltip":vt.default},!0),r.default=o.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var s=function(){function y(w,p){for(var m=0;m<p.length;m++){var E=p[m];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(w,E.key,E)}}return function(w,p,m){return p&&y(w.prototype,p),m&&y(w,m),w}}(),o=function y(w,p,m){w===null&&(w=Function.prototype);var E=Object.getOwnPropertyDescriptor(w,p);if(E===void 0){var g=Object.getPrototypeOf(w);return g===null?void 0:y(g,p,m)}else{if("value"in E)return E.value;var T=E.get;return T===void 0?void 0:T.call(m)}},a=i(0),l=u(a);function u(y){return y&&y.__esModule?y:{default:y}}function h(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function c(y,w){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:y}function d(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(y,w):y.__proto__=w)}var f=function(y){d(w,y);function w(){return h(this,w),c(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return s(w,[{key:"add",value:function(m,E){if(E==="+1"||E==="-1"){var g=this.value(m)||0;E=E==="+1"?g+1:g-1}return E===0?(this.remove(m),!0):o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"add",this).call(this,m,E)}},{key:"canAdd",value:function(m,E){return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,m,E)||o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,m,parseInt(E))}},{key:"value",value:function(m){return parseInt(o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,m))||void 0}}]),w}(l.default.Attributor.Class),v=new f("indent","ql-indent",{scope:l.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(4),o=a(s);function a(d){return d&&d.__esModule?d:{default:d}}function l(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function u(d,f){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:d}function h(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var c=function(d){h(f,d);function f(){return l(this,f),u(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return f}(o.default);c.blotName="blockquote",c.tagName="blockquote",r.default=c},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function f(v,y){for(var w=0;w<y.length;w++){var p=y[w];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(v,p.key,p)}}return function(v,y,w){return y&&f(v.prototype,y),w&&f(v,w),v}}(),o=i(4),a=l(o);function l(f){return f&&f.__esModule?f:{default:f}}function u(f,v){if(!(f instanceof v))throw new TypeError("Cannot call a class as a function")}function h(f,v){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:f}function c(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(f,v):f.__proto__=v)}var d=function(f){c(v,f);function v(){return u(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,null,[{key:"formats",value:function(w){return this.tagName.indexOf(w.tagName)+1}}]),v}(a.default);d.blotName="header",d.tagName=["H1","H2","H3","H4","H5","H6"],r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var s=function(){function g(T,x){for(var b=0;b<x.length;b++){var S=x[b];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(T,S.key,S)}}return function(T,x,b){return x&&g(T.prototype,x),b&&g(T,b),T}}(),o=function g(T,x,b){T===null&&(T=Function.prototype);var S=Object.getOwnPropertyDescriptor(T,x);if(S===void 0){var k=Object.getPrototypeOf(T);return k===null?void 0:g(k,x,b)}else{if("value"in S)return S.value;var I=S.get;return I===void 0?void 0:I.call(b)}},a=i(0),l=f(a),u=i(4),h=f(u),c=i(25),d=f(c);function f(g){return g&&g.__esModule?g:{default:g}}function v(g,T,x){return T in g?Object.defineProperty(g,T,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[T]=x,g}function y(g,T){if(!(g instanceof T))throw new TypeError("Cannot call a class as a function")}function w(g,T){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:g}function p(g,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);g.prototype=Object.create(T&&T.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(g,T):g.__proto__=T)}var m=function(g){p(T,g);function T(){return y(this,T),w(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return s(T,[{key:"format",value:function(b,S){b===E.blotName&&!S?this.replaceWith(l.default.create(this.statics.scope)):o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"format",this).call(this,b,S)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(b,S){return this.parent.isolate(this.offset(this.parent),this.length()),b===this.parent.statics.blotName?(this.parent.replaceWith(b,S),this):(this.parent.unwrap(),o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replaceWith",this).call(this,b,S))}}],[{key:"formats",value:function(b){return b.tagName===this.tagName?void 0:o(T.__proto__||Object.getPrototypeOf(T),"formats",this).call(this,b)}}]),T}(h.default);m.blotName="list-item",m.tagName="LI";var E=function(g){p(T,g),s(T,null,[{key:"create",value:function(b){var S=b==="ordered"?"OL":"UL",k=o(T.__proto__||Object.getPrototypeOf(T),"create",this).call(this,S);return(b==="checked"||b==="unchecked")&&k.setAttribute("data-checked",b==="checked"),k}},{key:"formats",value:function(b){if(b.tagName==="OL")return"ordered";if(b.tagName==="UL")return b.hasAttribute("data-checked")?b.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function T(x){y(this,T);var b=w(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,x)),S=function(I){if(I.target.parentNode===x){var C=b.statics.formats(x),A=l.default.find(I.target);C==="checked"?A.format("list","unchecked"):C==="unchecked"&&A.format("list","checked")}};return x.addEventListener("touchstart",S),x.addEventListener("mousedown",S),b}return s(T,[{key:"format",value:function(b,S){this.children.length>0&&this.children.tail.format(b,S)}},{key:"formats",value:function(){return v({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(b,S){if(b instanceof m)o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertBefore",this).call(this,b,S);else{var k=S==null?this.length():S.offset(this),I=this.split(k);I.parent.insertBefore(b,I)}}},{key:"optimize",value:function(b){o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,b);var S=this.next;S!=null&&S.prev===this&&S.statics.blotName===this.statics.blotName&&S.domNode.tagName===this.domNode.tagName&&S.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(S.moveChildren(this),S.remove())}},{key:"replace",value:function(b){if(b.statics.blotName!==this.statics.blotName){var S=l.default.create(this.statics.defaultChild);b.moveChildren(S),this.appendChild(S)}o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replace",this).call(this,b)}}]),T}(d.default);E.blotName="list",E.scope=l.default.Scope.BLOCK_BLOT,E.tagName=["OL","UL"],E.defaultChild="list-item",E.allowedChildren=[m],r.ListItem=m,r.default=E},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(56),o=a(s);function a(d){return d&&d.__esModule?d:{default:d}}function l(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function u(d,f){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:d}function h(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var c=function(d){h(f,d);function f(){return l(this,f),u(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return f}(o.default);c.blotName="italic",c.tagName=["EM","I"],r.default=c},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function v(y,w){for(var p=0;p<w.length;p++){var m=w[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(y,m.key,m)}}return function(y,w,p){return w&&v(y.prototype,w),p&&v(y,p),y}}(),o=function v(y,w,p){y===null&&(y=Function.prototype);var m=Object.getOwnPropertyDescriptor(y,w);if(m===void 0){var E=Object.getPrototypeOf(y);return E===null?void 0:v(E,w,p)}else{if("value"in m)return m.value;var g=m.get;return g===void 0?void 0:g.call(p)}},a=i(6),l=u(a);function u(v){return v&&v.__esModule?v:{default:v}}function h(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function c(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function d(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var f=function(v){d(y,v);function y(){return h(this,y),c(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return s(y,null,[{key:"create",value:function(p){return p==="super"?document.createElement("sup"):p==="sub"?document.createElement("sub"):o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,p)}},{key:"formats",value:function(p){if(p.tagName==="SUB")return"sub";if(p.tagName==="SUP")return"super"}}]),y}(l.default);f.blotName="script",f.tagName=["SUB","SUP"],r.default=f},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(6),o=a(s);function a(d){return d&&d.__esModule?d:{default:d}}function l(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function u(d,f){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:d}function h(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var c=function(d){h(f,d);function f(){return l(this,f),u(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return f}(o.default);c.blotName="strike",c.tagName="S",r.default=c},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(6),o=a(s);function a(d){return d&&d.__esModule?d:{default:d}}function l(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function u(d,f){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:d}function h(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var c=function(d){h(f,d);function f(){return l(this,f),u(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return f}(o.default);c.blotName="underline",c.tagName="U",r.default=c},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function w(p,m){for(var E=0;E<m.length;E++){var g=m[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(p,g.key,g)}}return function(p,m,E){return m&&w(p.prototype,m),E&&w(p,E),p}}(),o=function w(p,m,E){p===null&&(p=Function.prototype);var g=Object.getOwnPropertyDescriptor(p,m);if(g===void 0){var T=Object.getPrototypeOf(p);return T===null?void 0:w(T,m,E)}else{if("value"in g)return g.value;var x=g.get;return x===void 0?void 0:x.call(E)}},a=i(0),l=h(a),u=i(27);function h(w){return w&&w.__esModule?w:{default:w}}function c(w,p){if(!(w instanceof p))throw new TypeError("Cannot call a class as a function")}function d(w,p){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:w}function f(w,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);w.prototype=Object.create(p&&p.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(w,p):w.__proto__=p)}var v=["alt","height","width"],y=function(w){f(p,w);function p(){return c(this,p),d(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return s(p,[{key:"format",value:function(E,g){v.indexOf(E)>-1?g?this.domNode.setAttribute(E,g):this.domNode.removeAttribute(E):o(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"format",this).call(this,E,g)}}],[{key:"create",value:function(E){var g=o(p.__proto__||Object.getPrototypeOf(p),"create",this).call(this,E);return typeof E=="string"&&g.setAttribute("src",this.sanitize(E)),g}},{key:"formats",value:function(E){return v.reduce(function(g,T){return E.hasAttribute(T)&&(g[T]=E.getAttribute(T)),g},{})}},{key:"match",value:function(E){return/\.(jpe?g|gif|png)$/.test(E)||/^data:image\/.+;base64/.test(E)}},{key:"sanitize",value:function(E){return(0,u.sanitize)(E,["http","https","data"])?E:"//:0"}},{key:"value",value:function(E){return E.getAttribute("src")}}]),p}(l.default.Embed);y.blotName="image",y.tagName="IMG",r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function w(p,m){for(var E=0;E<m.length;E++){var g=m[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(p,g.key,g)}}return function(p,m,E){return m&&w(p.prototype,m),E&&w(p,E),p}}(),o=function w(p,m,E){p===null&&(p=Function.prototype);var g=Object.getOwnPropertyDescriptor(p,m);if(g===void 0){var T=Object.getPrototypeOf(p);return T===null?void 0:w(T,m,E)}else{if("value"in g)return g.value;var x=g.get;return x===void 0?void 0:x.call(E)}},a=i(4),l=i(27),u=h(l);function h(w){return w&&w.__esModule?w:{default:w}}function c(w,p){if(!(w instanceof p))throw new TypeError("Cannot call a class as a function")}function d(w,p){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:w}function f(w,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);w.prototype=Object.create(p&&p.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(w,p):w.__proto__=p)}var v=["height","width"],y=function(w){f(p,w);function p(){return c(this,p),d(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return s(p,[{key:"format",value:function(E,g){v.indexOf(E)>-1?g?this.domNode.setAttribute(E,g):this.domNode.removeAttribute(E):o(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"format",this).call(this,E,g)}}],[{key:"create",value:function(E){var g=o(p.__proto__||Object.getPrototypeOf(p),"create",this).call(this,E);return g.setAttribute("frameborder","0"),g.setAttribute("allowfullscreen",!0),g.setAttribute("src",this.sanitize(E)),g}},{key:"formats",value:function(E){return v.reduce(function(g,T){return E.hasAttribute(T)&&(g[T]=E.getAttribute(T)),g},{})}},{key:"sanitize",value:function(E){return u.default.sanitize(E)}},{key:"value",value:function(E){return E.getAttribute("src")}}]),p}(a.BlockEmbed);y.blotName="video",y.className="ql-video",y.tagName="IFRAME",r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var s=function(){function E(g,T){for(var x=0;x<T.length;x++){var b=T[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,T,x){return T&&E(g.prototype,T),x&&E(g,x),g}}(),o=function E(g,T,x){g===null&&(g=Function.prototype);var b=Object.getOwnPropertyDescriptor(g,T);if(b===void 0){var S=Object.getPrototypeOf(g);return S===null?void 0:E(S,T,x)}else{if("value"in b)return b.value;var k=b.get;return k===void 0?void 0:k.call(x)}},a=i(35),l=f(a),u=i(5),h=f(u),c=i(9),d=f(c);function f(E){return E&&E.__esModule?E:{default:E}}function v(E,g){if(!(E instanceof g))throw new TypeError("Cannot call a class as a function")}function y(E,g){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:E}function w(E,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);E.prototype=Object.create(g&&g.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(E,g):E.__proto__=g)}var p=function(E){w(g,E);function g(){return v(this,g),y(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,null,[{key:"create",value:function(x){var b=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,x);return typeof x=="string"&&(window.katex.render(x,b,{throwOnError:!1,errorColor:"#f00"}),b.setAttribute("data-value",x)),b}},{key:"value",value:function(x){return x.getAttribute("data-value")}}]),g}(l.default);p.blotName="formula",p.className="ql-formula",p.tagName="SPAN";var m=function(E){w(g,E),s(g,null,[{key:"register",value:function(){h.default.register(p,!0)}}]);function g(){v(this,g);var T=y(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return T}return g}(d.default);r.FormulaBlot=p,r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var s=function(){function x(b,S){for(var k=0;k<S.length;k++){var I=S[k];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(b,I.key,I)}}return function(b,S,k){return S&&x(b.prototype,S),k&&x(b,k),b}}(),o=function x(b,S,k){b===null&&(b=Function.prototype);var I=Object.getOwnPropertyDescriptor(b,S);if(I===void 0){var C=Object.getPrototypeOf(b);return C===null?void 0:x(C,S,k)}else{if("value"in I)return I.value;var A=I.get;return A===void 0?void 0:A.call(k)}},a=i(0),l=y(a),u=i(5),h=y(u),c=i(9),d=y(c),f=i(13),v=y(f);function y(x){return x&&x.__esModule?x:{default:x}}function w(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function p(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function m(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var E=function(x){m(b,x);function b(){return w(this,b),p(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,[{key:"replaceWith",value:function(k){this.domNode.textContent=this.domNode.textContent,this.attach(),o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"replaceWith",this).call(this,k)}},{key:"highlight",value:function(k){var I=this.domNode.textContent;this.cachedText!==I&&((I.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=k(I),this.domNode.normalize(),this.attach()),this.cachedText=I)}}]),b}(v.default);E.className="ql-syntax";var g=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),T=function(x){m(b,x),s(b,null,[{key:"register",value:function(){h.default.register(g,!0),h.default.register(E,!0)}}]);function b(S,k){w(this,b);var I=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,S,k));if(typeof I.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var C=null;return I.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(C),C=setTimeout(function(){I.highlight(),C=null},I.options.interval)}),I.highlight(),I}return s(b,[{key:"highlight",value:function(){var k=this;if(!this.quill.selection.composing){this.quill.update(h.default.sources.USER);var I=this.quill.getSelection();this.quill.scroll.descendants(E).forEach(function(C){C.highlight(k.options.highlight)}),this.quill.update(h.default.sources.SILENT),I!=null&&this.quill.setSelection(I,h.default.sources.SILENT)}}}]),b}(d.default);T.DEFAULTS={highlight:function(){return window.hljs==null?null:function(x){var b=window.hljs.highlightAuto(x);return b.value}}(),interval:1e3},r.CodeBlock=E,r.CodeToken=g,r.default=T},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var s=function b(S,k,I){S===null&&(S=Function.prototype);var C=Object.getOwnPropertyDescriptor(S,k);if(C===void 0){var A=Object.getPrototypeOf(S);return A===null?void 0:b(A,k,I)}else{if("value"in C)return C.value;var N=C.get;return N===void 0?void 0:N.call(I)}},o=function(){function b(S,k){for(var I=0;I<k.length;I++){var C=k[I];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(S,C.key,C)}}return function(S,k,I){return k&&b(S.prototype,k),I&&b(S,I),S}}(),a=i(3),l=w(a),u=i(8),h=w(u),c=i(43),d=w(c),f=i(15),v=i(41),y=w(v);function w(b){return b&&b.__esModule?b:{default:b}}function p(b,S){if(!(b instanceof S))throw new TypeError("Cannot call a class as a function")}function m(b,S){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:b}function E(b,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);b.prototype=Object.create(S&&S.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(b,S):b.__proto__=S)}var g=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],T=function(b){E(S,b);function S(k,I){p(this,S),I.modules.toolbar!=null&&I.modules.toolbar.container==null&&(I.modules.toolbar.container=g);var C=m(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,k,I));return C.quill.container.classList.add("ql-bubble"),C}return o(S,[{key:"extendToolbar",value:function(I){this.tooltip=new x(this.quill,this.options.bounds),this.tooltip.root.appendChild(I.container),this.buildButtons([].slice.call(I.container.querySelectorAll("button")),y.default),this.buildPickers([].slice.call(I.container.querySelectorAll("select")),y.default)}}]),S}(d.default);T.DEFAULTS=(0,l.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(S){S?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var x=function(b){E(S,b);function S(k,I){p(this,S);var C=m(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,k,I));return C.quill.on(h.default.events.EDITOR_CHANGE,function(A,N,P,j){if(A===h.default.events.SELECTION_CHANGE)if(N!=null&&N.length>0&&j===h.default.sources.USER){C.show(),C.root.style.left="0px",C.root.style.width="",C.root.style.width=C.root.offsetWidth+"px";var B=C.quill.getLines(N.index,N.length);if(B.length===1)C.position(C.quill.getBounds(N));else{var z=B[B.length-1],H=C.quill.getIndex(z),$=Math.min(z.length()-1,N.index+N.length-H),D=C.quill.getBounds(new f.Range(H,$));C.position(D)}}else document.activeElement!==C.textbox&&C.quill.hasFocus()&&C.hide()}),C}return o(S,[{key:"listen",value:function(){var I=this;s(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){I.root.classList.remove("ql-editing")}),this.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!I.root.classList.contains("ql-hidden")){var C=I.quill.getSelection();C!=null&&I.position(I.quill.getBounds(C))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(I){var C=s(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"position",this).call(this,I),A=this.root.querySelector(".ql-tooltip-arrow");if(A.style.marginLeft="",C===0)return C;A.style.marginLeft=-1*C-A.offsetWidth/2+"px"}}]),S}(c.BaseTooltip);x.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=x,r.default=T},function(n,r,i){n.exports=i(63)}]).default})})(cI);var dH=cI.exports,fH=gn&&gn.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qh=gn&&gn.__assign||function(){return qh=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},qh.apply(this,arguments)},pH=gn&&gn.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r},df=gn&&gn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},ir=df(M),mH=df(U3),Da=df(hH),bw=df(dH),gH=function(t){fH(e,t);function e(n){var r=t.call(this,n)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(s,o,a,l){var u,h,c,d;s==="text-change"?(h=(u=r).onEditorChangeText)===null||h===void 0||h.call(u,r.editor.root.innerHTML,o,l,r.unprivilegedEditor):s==="selection-change"&&((d=(c=r).onEditorChangeSelection)===null||d===void 0||d.call(c,o,l,r.unprivilegedEditor))};var i=r.isControlled()?n.value:n.defaultValue;return r.value=i??"",r}return e.prototype.validateProps=function(n){var r;if(ir.default.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(ir.default.Children.count(n.children)){var i=ir.default.Children.only(n.children);if(((r=i)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},e.prototype.shouldComponentUpdate=function(n,r){var i=this,s;if(this.validateProps(n),!this.editor||this.state.generation!==r.generation)return!0;if("value"in n){var o=this.getEditorContents(),a=(s=n.value,s??"");this.isEqualValue(a,o)||this.setEditorContents(this.editor,a)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),pH(this.cleanProps,this.dirtyProps).some(function(l){return!Da.default(n[l],i.props[l])})},e.prototype.shouldComponentRegenerate=function(n){var r=this;return this.dirtyProps.some(function(i){return!Da.default(n[i],r.props[i])})},e.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(n,r){var i=this;if(this.editor&&this.shouldComponentRegenerate(n)){var s=this.editor.getContents(),o=this.editor.getSelection();this.regenerationSnapshot={delta:s,selection:o},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var a=this.regenerationSnapshot,s=a.delta,l=a.selection;delete this.regenerationSnapshot,this.instantiateEditor();var u=this.editor;u.setContents(s),Iw(function(){return i.setEditorSelection(u,l)})}},e.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},e.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},e.prototype.isControlled=function(){return"value"in this.props},e.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},e.prototype.createEditor=function(n,r){var i=new bw.default(n,r);return r.tabIndex!=null&&this.setEditorTabIndex(i,r.tabIndex),this.hookEditor(i),i},e.prototype.hookEditor=function(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)},e.prototype.unhookEditor=function(n){n.off("editor-change",this.onEditorChange)},e.prototype.getEditorContents=function(){return this.value},e.prototype.getEditorSelection=function(){return this.selection},e.prototype.isDelta=function(n){return n&&n.ops},e.prototype.isEqualValue=function(n,r){return this.isDelta(n)&&this.isDelta(r)?Da.default(n.ops,r.ops):Da.default(n,r)},e.prototype.setEditorContents=function(n,r){var i=this;this.value=r;var s=this.getEditorSelection();typeof r=="string"?n.setContents(n.clipboard.convert(r)):n.setContents(r),Iw(function(){return i.setEditorSelection(n,s)})},e.prototype.setEditorSelection=function(n,r){if(this.selection=r,r){var i=n.getLength();r.index=Math.max(0,Math.min(r.index,i-1)),r.length=Math.max(0,Math.min(r.length,i-1-r.index)),n.setSelection(r)}},e.prototype.setEditorTabIndex=function(n,r){var i,s;!((s=(i=n)===null||i===void 0?void 0:i.scroll)===null||s===void 0)&&s.domNode&&(n.scroll.domNode.tabIndex=r)},e.prototype.setEditorReadOnly=function(n,r){r?n.disable():n.enable()},e.prototype.makeUnprivilegedEditor=function(n){var r=n;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},e.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var n=mH.default.findDOMNode(this.editingArea);if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n},e.prototype.renderEditingArea=function(){var n=this,r=this.props,i=r.children,s=r.preserveWhitespace,o=this.state.generation,a={key:o,ref:function(l){n.editingArea=l}};return ir.default.Children.count(i)?ir.default.cloneElement(ir.default.Children.only(i),a):s?ir.default.createElement("pre",qh({},a)):ir.default.createElement("div",qh({},a))},e.prototype.render=function(){var n;return ir.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(n=this.props.className,n??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},e.prototype.onEditorChangeText=function(n,r,i,s){var o,a;if(this.editor){var l=this.isDelta(this.value)?s.getContents():s.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=l,(a=(o=this.props).onChange)===null||a===void 0||a.call(o,n,r,i,s))}},e.prototype.onEditorChangeSelection=function(n,r,i){var s,o,a,l,u,h;if(this.editor){var c=this.getEditorSelection(),d=!c&&n,f=c&&!n;Da.default(n,c)||(this.selection=n,(o=(s=this.props).onChangeSelection)===null||o===void 0||o.call(s,n,r,i),d?(l=(a=this.props).onFocus)===null||l===void 0||l.call(a,n,r,i):f&&((h=(u=this.props).onBlur)===null||h===void 0||h.call(u,c,r,i)))}},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},e.displayName="React Quill",e.Quill=bw.default,e.defaultProps={theme:"snow",modules:{},readOnly:!1},e}(ir.default.Component);function Iw(t){Promise.resolve().then(t)}var vH=gH;const yH=Sw(vH),_H=()=>{const{users:t,theme:e,isLogin:n,posts:r,setPosts:i}=M.useContext(ce),[s,o]=M.useState("posts"),[a,l]=M.useState(null);Ko("posts",i,n);const u=async c=>{const d=Pe(Oe,"posts",c);await ku(d)},h=()=>{switch(s){case"posts":return _.jsxs("div",{className:"grid gap-y-2",children:[_.jsxs("div",{className:"flex justify-between",children:[_.jsx(p1,{text:"Posts",length:r.length}),_.jsx(Re,{data:{clickFn:()=>o("createPost"),text:"Create a post"}})]}),_.jsx("div",{className:"grid gap-y-2 mb-2",children:r.sort((c,d)=>{const f=new Date(c.time);return new Date(d.time)-f}).map(c=>{var f,v,y;let d;return t.forEach(w=>{w.uid===c.uid&&(d=w)}),_.jsxs("div",{className:`p-2 border min-h-20 flex items-center rounded-md ${e==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[_.jsxs("div",{className:"flex-1",children:[_.jsxs("div",{className:"top-section flex mb-2 gap-x-2",children:[_.jsx("img",{className:"size-10 rounded-full shadow-md object-cover",src:d.image}),_.jsxs("div",{children:[_.jsx("div",{className:"font-medium",children:d.name}),_.jsx("div",{className:` text-sm ${e==="light"?"text-gray-500":"text-white"}`,children:Wi(c.time)})]})]}),_.jsx("div",{className:"quill-container w-1/2 sm:2/3",children:_.jsx("div",{className:"mb-2 ql-editor",dangerouslySetInnerHTML:{__html:c.description}})}),_.jsxs("div",{className:"flex items-center gap-x-1",children:[c.images.length!==0&&_.jsxs("div",{className:`p-1 min-h-9 flex items-center gap-x-1  rounded-md ${e==="light"?"bg-green-100":"bg-slate-500/70"}`,children:[_.jsx("img",{className:"w-7",src:De("image")}),_.jsxs("span",{children:[c.images.length," ",c.images.length<=1?"image":"images"]})]}),c.files.length!==0&&_.jsxs("div",{className:`p-1 min-h-9  flex items-center gap-x-1 rounded-md ${e==="light"?"bg-green-100":"bg-slate-500/70"}`,children:[_.jsx("img",{className:"w-7",src:De("file")}),_.jsxs("span",{children:[c.files.length," ",c.files.length<=1?"file":"files"]})]}),c.links&&((f=c==null?void 0:c.links)==null?void 0:f.length)!==0&&_.jsxs("div",{className:`p-1 min-h-9  flex items-center gap-x-1 rounded-md ${e==="light"?"bg-green-100":"bg-slate-500/70"}`,children:[_.jsx("img",{className:"w-7",src:De("link")}),_.jsxs("span",{children:[(v=c==null?void 0:c.links)==null?void 0:v.length," ",((y=c==null?void 0:c.links)==null?void 0:y.length)<=1?"link":"links"]})]}),c.draft&&_.jsx("div",{className:`p-1 min-h-9 flex items-center gap-x-1 rounded-md ${e==="light"?"bg-green-100":"bg-slate-500/70"}`,children:_.jsx("span",{className:"font-bold text-red-500",children:"(Draft)"})})]})]}),_.jsx("div",{className:"flex items-center gap-x-1",children:_.jsx(sf,{options:[{text:"Edit",icon:"editPencil",onClick:()=>{l(c),o("createPost")}},{text:"Delete",icon:"deleteIcon",onClick:()=>u(c.id)}]})})]},`post-${c.id}`)})})]});case"createPost":return _.jsx(wH,{setPage:o,postData:a,setPostData:l})}};return _.jsx("div",{className:"p-5",children:h()})},wH=({setPage:t,postData:e,setPostData:n})=>{const{theme:r}=M.useContext(ce),[i,s]=M.useState(e?e.images:[]),[o,a]=M.useState(null),[l,u]=M.useState(e?e.description:""),[h,c]=M.useState(e?e==null?void 0:e.files:[]),[d,f]=M.useState(e?(e==null?void 0:e.links)||[]:[]),[v,y]=M.useState(!1),w=l.trim()||i.length!==0||h.length!==0||d.length!==0,p=async(k=!1)=>{try{const I=Mt(Oe,"posts");await Pi(I,{uid:ue.currentUser.uid,time:Gn(),editedTime:Gn(),description:l,images:i,files:h,links:d,draft:k}),t("posts")}catch(I){console.log(I.message)}},m=async()=>{try{const k=Pe(Oe,"posts",e.id);await Jt(k,{editedTime:Gn(),description:l,images:i,files:h,links:d,draft:!1}),t("posts")}catch(k){console.log(k.message)}},E=async()=>{try{if(e){const k=Pe(Oe,"posts",e.id);await Jt(k,{editedTime:Gn(),description:l,images:i,files:h,links:d,draft:!0})}else p(!0);t("posts")}catch(k){console.log(k.message)}},g=async k=>{try{const I=`posts/${ue.currentUser.uid}/${k.name}`,C=Ga(Qa,I);a("Uploading image...");const A=await t2(C,k),N=await n2(A.ref),P=[...i,{name:k.name,path:I,imageURL:N}];s(P),a("Uploaded image"),setTimeout(()=>{a(null)},3e3)}catch(I){a(I.message),setTimeout(()=>{a(null)},3e3)}},T=async k=>{try{const I=`posts/${ue.currentUser.uid}/${k.name}`,C=Ga(Qa,I);a("Uploading file...");const A=await t2(C,k),N=await n2(A.ref),P=[...h,{name:k.name,path:I,fileURL:N,size:k.size}];c(P),a("Uploaded file"),setTimeout(()=>{a(null)},3e3)}catch(I){a(I.message),setTimeout(()=>{a(null)},3e3)}},x=async(k,I)=>{const C=i.filter(N=>I!==N.imageURL);s(C);const A=Ga(Qa,k);await f_(A)},b=async(k,I)=>{const C=h.filter(N=>I!==N.fileURL);c(C);const A=Ga(Qa,k);await f_(A)},S=k=>{const I=d.filter(C=>k!==C.id);f(I)};return _.jsxs("div",{children:[_.jsxs("div",{className:"flex mb-2 items-center justify-between",children:[o&&_.jsx(Fh,{message:o}),_.jsxs("div",{className:"flex gap-x-1 items-center",children:[_.jsx(Ue,{data:{clickFn:()=>{t("posts"),n(null)},image:"back"}}),_.jsx("div",{className:r==="light"?"":"text-white",children:e?"Edit post":"Create a post"})]}),_.jsxs("div",{className:"flex items-center gap-x-1",children:[_.jsx(Re,{data:{text:"Draft",clickFn:()=>{w&&E()}}}),_.jsx(Re,{data:{clickFn:()=>{w?(e?m():p(),n(null)):a("Create a post first!")},text:e?"Save":"Publish",image:e?"save":"upload"}})]})]}),_.jsxs("div",{className:"mb-2",children:[_.jsx(yH,{value:l,onChange:k=>u(k)}),_.jsx("input",{className:"hidden",id:"imagesInput",type:"file",accept:"image/*",onChange:k=>g(k.target.files[0])}),_.jsx("input",{className:"hidden",id:"filesInput",type:"file",onChange:k=>T(k.target.files[0])}),_.jsxs("div",{className:"flex justify-start gap-x-2 mt-1",children:[_.jsxs("label",{htmlFor:"imagesInput",className:`min-h-10 shadow-md hover:opacity-70 border  font-medium px-2 py-1 rounded-lg flex justify-center items-center gap-x-1 transition-all ${r==="light"?"bg-gray-50/50 border-gray-200":"bg-slate-500/70 text-white border-slate-500/70"}`,children:[_.jsx("img",{className:" h-7",src:De("image")}),_.jsx("span",{children:"Image"})]}),_.jsxs("label",{htmlFor:"filesInput",className:`min-h-10 shadow-md hover:opacity-70 border  font-medium px-2 py-1 rounded-lg flex justify-center items-center gap-x-1 transition-all ${r==="light"?"bg-gray-50/50 border-gray-200":"bg-slate-500/70 text-white border-slate-500/70"}`,children:[_.jsx("img",{className:" h-7",src:De("file")}),_.jsx("span",{children:"File"})]}),_.jsxs("label",{onClick:()=>{y(!0)},className:`min-h-10 shadow-md hover:opacity-70 border  font-medium px-2 py-1 rounded-lg flex justify-center items-center gap-x-1 transition-all ${r==="light"?"bg-gray-50/50 border-gray-200":"bg-slate-500/70 text-white border-slate-500/70"}`,children:[_.jsx("img",{className:" h-7",src:De("link")}),_.jsx("span",{children:"Link"})]}),v&&_.jsx(FF,{data:{links:d,setLinks:f,setIsLinkAdding:y}})]})]}),i.length!==0&&_.jsx("div",{className:"grid gap-y-2",children:i.map(k=>_.jsxs("div",{className:"relative min-h-20",children:[_.jsx("img",{alt:k.name,className:"size-full",src:k.imageURL}),_.jsx("div",{className:"absolute top-1 right-1",children:_.jsx(Ue,{data:{clickFn:()=>x(k.path,k.imageURL),image:"falseIcon"}})})]},k.imageURL))}),h.length!==0&&_.jsx("div",{className:"grid gap-y-1 mt-2",children:h.map(k=>_.jsxs("div",{className:"relative",children:[_.jsxs("div",{className:`p-1  min-h-14 rounded-md flex gap-x-1 items-center font-bold border  border-l-4 border-l-green-500 ${r==="light"?"bg-slate-50 border-gray-300 text-blue-600":"bg-slate-500/70 border-slate-500/70 text-white"}`,children:[_.jsx("img",{className:"w-7 ",src:De("download")}),_.jsxs("div",{children:[_.jsx("p",{className:"underline text-blue-600",children:k.name}),(k==null?void 0:k.size)&&_.jsxs("p",{children:[(k.size/(1024*1024)).toFixed(2)," MB"]})]})]}),_.jsx("div",{className:"absolute top-1 right-1",children:_.jsx(Ue,{data:{clickFn:()=>b(k.path,k.fileURL),image:"falseIcon"}})})]},k.fileURL))}),d.length!==0&&_.jsx("div",{className:"grid gap-y-1 mt-2",children:d.map(k=>_.jsxs("div",{className:"relative",children:[_.jsxs("div",{className:`p-1  min-h-14 rounded-md flex gap-x-1 items-center font-bold border  border-l-4 border-l-green-500 ${r==="light"?"bg-slate-50 border-gray-300 text-blue-600":"bg-slate-500/70 border-slate-500/70 text-white"}`,children:[_.jsx("img",{className:"w-7 ",src:De("link")}),_.jsx("div",{children:_.jsx("p",{className:"underline text-blue-600",children:k.title})})]}),_.jsx("div",{className:"absolute top-1 right-1",children:_.jsx(Ue,{data:{image:"falseIcon",clickFn:()=>S(k.id)}})})]},k.link))})]})},EH=()=>{const{users:t,setHeaderTitle:e,theme:n,notifications:r,setNotifications:i}=M.useContext(ce),[s,o]=M.useState(null),a=5,l=()=>{const u=Mt(Oe,"notifications");let h=cl(u,Qp("timestamp","desc"),Yp(a));s&&(h=cl(h,Ox(s))),wr(h,c=>{const d=c.docs.map(f=>({id:f.id,...f.data()}));i([...r,...d]),o(c.docs[c.docs.length-1])})};return M.useEffect(()=>{const u=Mt(Oe,"notifications"),h=cl(u,Qp("timestamp","desc"),Yp(5)),c=wr(h,d=>{const f=d.docs.map(v=>({id:v.id,...v.data()}));f.length!==0&&(i(f),o(d.docs[d.docs.length-1]))});return()=>c()},[]),M.useEffect(()=>{e("Notifications")},[]),_.jsxs("div",{className:"p-5 grid gap-y-2 ",children:[_.jsx(nr,{}),r.map(u=>{let h;return t.forEach(c=>{u.uid===c.uid&&(h=c)}),_.jsx(TH,{notification:u,user:h},u.id)}),r.length===0&&_.jsx("div",{className:`${n==="light"?"":"text-white"}`,children:"No notifications"}),r.length>=a&&_.jsx("div",{className:"flex justify-center mt-1 mb-2 ",children:_.jsx("button",{onClick:l,className:`border  rounded-md text-sm p-1 ${n==="light"?"border-gray-100":"text-white bg-slate-500/70"}`,children:"load more"})})]})},TH=({notification:t,user:e})=>{let n;const{type:r,description:i,timestamp:s,testName:o,comment:a}=t,{theme:l}=M.useContext(ce);switch(`${r[0]} ${r[1]}`){case"like post":n="liked a post";break;case"like test":n="liked a test";break;case"comment post":n="commented on a post";break;case"comment test":n="commented on a test";break;case"added post":n="added a post";break;case"added test":n="added a test";break;case"took test":n="took a test";break}return _.jsxs("div",{className:`cursor-pointer shadow-md flex items-center gap-x-2 p-2 border  rounded-md ${l==="light"?"border-slate-300 bg-white shadow-gray-200":"border-slate-500/70 bg-slate-500/70 text-white shadow-slate-500 "}`,children:[_.jsx("div",{children:_.jsx("img",{className:"size-10 object-cover rounded-full object-center bg-cover",src:e==null?void 0:e.image})}),_.jsxs("div",{children:[_.jsxs("p",{children:[_.jsx("b",{children:e==null?void 0:e.name})," ",n]}),i&&_.jsx("p",{children:ca(i,30)}),o&&_.jsx("p",{children:o}),a&&_.jsx("p",{children:a}),_.jsx("p",{children:Wi(s!=null&&s.seconds?s.seconds*1e3:s)})]})]})},xH=({members:t})=>{const{users:e,theme:n}=M.useContext(ce);return _.jsxs("div",{className:`p-2 grid gap-y-2 ${n==="light"?"":"text-white"}`,children:[_.jsx("p",{className:"text-lg font-bold",children:"Members"}),t.sort((r,i)=>{const s=new Date(r.joinedAt);return new Date(i.joinedAt)-s}).map(r=>{const i=Us(e,r.uid);return _.jsxs("div",{className:`p-2 flex gap-x-2 items-center border  rounded-md ${n==="light"?"border-slate-200":"bg-slate-500/70 border-slate-500"}`,children:[_.jsxs("div",{className:"relative",children:[_.jsx(Hi,{image:i.image,name:i.name}),_.jsx("div",{className:`absolute bottom-0 right-0 size-3 rounded-full ${i!=null&&i.isOnline?"bg-green-500":"bg-gray-500"}`})]}),_.jsxs("div",{className:"flex-1",children:[_.jsx("p",{children:i==null?void 0:i.name}),_.jsx("p",{className:`text-sm ${i!=null&&i.isOnline?"text-blue-500":"text-red-500"}`,children:i!=null&&i.isOnline?"Online":Wi(i==null?void 0:i.lastSeen)})]})]},r.uid+r.joinedAt)})]})},bH=({setSubPage:t,currentChat:e})=>{const{theme:n,users:r,userData:i}=M.useContext(ce),{members:s}=e,o=async u=>{try{const h=Pe(Oe,"chats",e.id);await Jt(h,{members:LO({uid:u,joinedAt:new Date().getTime()})})}catch(h){console.log(h.message)}},a=async u=>{try{const h=Pe(Oe,"chats",e.id),c=s.filter(d=>u!==d.uid);await Jt(h,{members:c})}catch(h){console.log(h.message)}},l=u=>{let h=!1;return s.forEach(c=>{u===c.uid&&(h=!0)}),h};return _.jsxs("div",{className:"",children:[_.jsx("div",{className:`h-[70px] z-30 fixed top-0 right-0 left-0 p-2 min-h-10 pb-2 flex items-center justify-between gap-x-1 border-b ${n==="light"?"border-b-slate-200 bg-slate-50":"border-b-slate-500/70 bg-slate-500"}`,children:_.jsxs("div",{className:"flex gap-x-1",children:[_.jsx("div",{children:_.jsx(Ue,{data:{image:"back",clickFn:()=>t("chat")}})}),_.jsxs("div",{className:` ${n==="light"?"":"text-white"}`,children:[_.jsx("p",{className:"text-lg font-bold",children:e.name}),_.jsxs("p",{className:"text-sm",children:[s.length," ",s.length<=1?"member":"members"]})]})]})}),(i==null?void 0:i.isAdmin)&&_.jsxs("div",{className:"p-2",children:[_.jsx("input",{id:"imageInput",className:"hidden",type:"file",accept:"image/*"}),_.jsxs("div",{className:"relative size-24",children:[_.jsx("img",{src:"images/sea-logo.jpg",className:"size-24 rounded-full object-cover object-center bg-cover"}),_.jsx("label",{htmlFor:"imageInput",className:` p-1 rounded-full absolute -bottom-1 -right-1 cursor-pointer ${n==="light"?"bg-gray-200":"bg-slate-500/70"}`,children:_.jsx("img",{className:"w-5",src:De("edit")})})]}),_.jsxs("div",{className:"mt-2",children:[_.jsx("p",{children:"Group Name"}),_.jsx("p",{children:e.name})]})]}),_.jsx(xH,{members:s}),(i==null?void 0:i.isAdmin)&&_.jsxs("div",{className:`p-2 grid gap-y-2 ${n==="light"?"":"text-white"}`,children:[_.jsx("p",{className:"text-lg font-bold",children:"Manage Members"}),r.sort((u,h)=>{const c=new Date(u.createdAt);return new Date(h.createdAt)-c}).map((u,h)=>_.jsxs("div",{className:`p-2 flex justify-between items-center border  rounded-md ${n==="light"?"border-slate-200":"bg-slate-500/70 border-slate-500"}`,children:[_.jsxs("div",{className:"flex gap-x-2 items-center",children:[_.jsxs("div",{className:"relative",children:[_.jsx("img",{src:u==null?void 0:u.image,className:"size-10 rounded-full object-center object-cover "}),_.jsx("div",{className:`absolute bottom-0 right-0 size-3 rounded-full ${u!=null&&u.isOnline?"bg-green-500":"bg-gray-500"}`})]}),_.jsxs("div",{className:"flex-1",children:[_.jsx("p",{children:u.name}),_.jsx("p",{className:`text-sm ${u!=null&&u.isOnline?"text-blue-500":"text-red-500"}`,children:u!=null&&u.isOnline?"Online":Wi(u==null?void 0:u.lastSeen)})]})]}),_.jsx("div",{children:l(u.uid)?_.jsx(Ue,{data:{clickFn:()=>a(u.uid),image:"trash"}}):_.jsx(Ue,{data:{clickFn:()=>o(u.uid),image:"add"}})})]},u.name+" "+u.image+h))]})]})},IH=({message:t,deleteMessage:e,setMessage:n,setEditMessageId:r})=>{var h;const{users:i,theme:s,userData:o}=M.useContext(ce),a=ue.currentUser.uid===t.senderId,l=Us(i,t.senderId),u=a&&{text:"Edit",icon:"editPencil",onClick:()=>{r(t.id),n(t.content)}};return _.jsxs("div",{className:`flex mb-2 gap-x-2 ${a?"flex-row-reverse":""} `,children:[_.jsxs("div",{className:"size-10 relative",children:[_.jsx(Hi,{name:l.name,image:l.image}),_.jsx("div",{className:`absolute bottom-0 right-0 size-3 rounded-full ${l!=null&&l.isOnline?"bg-green-500":"bg-gray-500"}`})]}),_.jsxs("div",{className:`grid gap-y-1 whitespace-pre-wrap ${s==="light"?"":"text-white"}`,children:[_.jsx("p",{className:`font-bold ${a?"text-right":"text-left"} `,children:l==null?void 0:l.name}),_.jsxs("div",{className:`flex  items-start gap-x-1 ${a?"flex-row-reverse justify-start":""}`,children:[_.jsx("p",{className:`max-w-[250px] rounded-[10px] border border-slate-200 p-2  ${s==="light"?`${a?"rounded-tr-none bg-blue-300":"bg-white rounded-tl-none"}`:`${a?"rounded-tr-none bg-blue-300":"bg-white rounded-tl-none text-black"}`}`,children:t==null?void 0:t.content}),a||o!=null&&o.isAdmin?_.jsx(sf,{options:[u,{text:"Delete",icon:"deleteIcon",onClick:()=>e(t.id)}],left:a?"left-[35px]":"-left-[102px]"}):""]}),_.jsx("p",{className:`text-sm ${a?"text-right":"text-left"}`,children:t!=null&&t.editedTime?_.jsxs("span",{children:["edited ",iu(t.editedTime)]}):_.jsx("span",{children:iu((h=t.timestamp)!=null&&h.seconds?t.timestamp.seconds*1e3:t.timestamp)})})]})]})},SH=({data:t})=>{const{setPage:e,chatId:n,chats:r,loadMore:i,messages:s,viewingOldMessages:o,setViewingOldMessages:a}=t,{theme:l}=M.useContext(ce),[u,h]=M.useState(""),[c,d]=M.useState("chat"),[f,v]=M.useState(!1),y=Pe(Oe,"chats",n),w=Mt(y,"messages");let p;r.forEach(x=>{n===x.id&&(p=x)}),M.useEffect(()=>{dp()},[]);const m=async()=>{try{const x={senderId:ue.currentUser.uid,content:u.trim(),timestamp:Gn()};await Pi(w,x),await Jt(y,{lastMessage:x}),h(""),dp()}catch(x){console.log(x.message)}},E=async()=>{try{const x=Pe(w,f),b={content:u.trim(),editedTime:Gn()};await Jt(x,b),h(""),v(null)}catch(x){console.log(x.message)}},g=async x=>{const b=Pe(w,x);await ku(b)},T=()=>{switch(c){case"chat":return _.jsxs("div",{className:"",children:[_.jsxs("div",{className:`h-[70px] z-30 fixed top-0 right-0 left-0 p-2 min-h-10 pb-2 flex items-center justify-between gap-x-1 border-b ${l==="light"?"border-b-slate-200 bg-slate-50":"border-b-slate-500/70 bg-slate-500"}`,children:[_.jsxs("div",{className:"flex gap-x-1",children:[_.jsx("div",{children:_.jsx(Ue,{data:{image:"back",clickFn:()=>e("chatroom")}})}),_.jsxs("div",{className:` ${l==="light"?"":"text-white"}`,children:[_.jsx("p",{className:"text-lg font-bold",children:p.name}),_.jsxs("p",{className:"text-sm",children:[p.members.length," ",p.members.length<=1?"member":"members"]})]})]}),_.jsx("button",{onClick:()=>d("info"),children:_.jsx("img",{src:"images/sea-logo.jpg",alt:"group-image",className:"size-12 rounded-full object-center object-cover "})})]}),_.jsxs("div",{className:"p-2 gap-y-2 mb-[90px]",children:[_.jsx("div",{className:"flex justify-center mt-1 mb-2",children:_.jsx("button",{onClick:()=>{i("old"),a(!0)},className:`border  rounded-md text-sm p-1 ${l==="light"?"border-gray-100":"text-white bg-slate-500/70"}`,children:"older messages"})}),s.sort((x,b)=>{var I,C;const S=new Date((I=x.timestamp)!=null&&I.seconds?x.timestamp.seconds*1e3:x.timestamp),k=new Date((C=b.timestamp)!=null&&C.seconds?b.timestamp.seconds*1e3:b.timestamp);return S-k}).map((x,b)=>_.jsx(IH,{editMessage:E,setEditMessageId:v,deleteMessage:g,message:x,setMessage:h},`${b}-${x.content}`)),o&&_.jsxs("div",{className:"flex gap-x-1 justify-center mt-1 mb-2",children:[_.jsx("button",{onClick:()=>{i("newer")},className:`border  rounded-md text-sm p-1 ${l==="light"?"border-gray-100":"text-white bg-slate-500/70"}`,children:"newer messages"}),_.jsx("button",{onClick:()=>{i("new"),a(!1)},className:`border  rounded-md text-sm p-1 ${l==="light"?"border-gray-100":"text-white bg-slate-500/70"}`,children:"latest messages"})]})]}),_.jsxs("div",{className:`fixed bottom-0 right-0 left-0 p-2 h-[80px] flex items-center gap-x-1 justify-between border-t  ${l==="light"?" bg-slate-50 border-t-gray-200":" bg-slate-500 border-t-slate-500/70"}`,children:[_.jsx("input",{onChange:x=>h(x.target.value),value:u,className:`h-12 outline-none flex-1 pl-1 pr-1 rounded-md mr-2 ${l==="light"?"bg-transparent":"bg-transparent text-white"}`,placeholder:"Type a message..."}),_.jsxs("div",{className:"flex gap-x-1",children:[f&&_.jsx(Re,{data:{image:"falseIcon",clickFn:()=>{v(null),h("")}}}),_.jsx(Re,{data:{clickFn:()=>{u.trim()&&(f?E():m())},image:"send"}})]})]})]});case"info":return _.jsx(bH,{setSubPage:d,currentChat:p})}};return _.jsx(_.Fragment,{children:T()})},CH=()=>{const[t,e]=M.useState("chatroom"),[n,r]=M.useState(null),[i,s]=M.useState(null),[o,a]=M.useState(!1),{theme:l,users:u,setHeaderTitle:h,isLogin:c,chats:d,setChats:f,messages:v,setMessages:y}=M.useContext(ce);let w=0;Ko("chats",f,c);const p=T=>{try{const x=Mt(Pe(Oe,"chats",n),"messages");let S=cl(x,Qp("timestamp",T==="newer"?"asc":"desc"),Yp(10));return T!=="new"&&i&&(S=cl(S,Ox(i))),wr(S,I=>{const C=I.docs.map(A=>({id:A.id,...A.data()}));C.length!==0&&y(C),s(I.docs[I.docs.length-1])})}catch(x){console.log(x.message)}};M.useEffect(()=>{if(!o)return p("new")},[n]),M.useEffect(()=>{h("Chat Room")},[]);const m=T=>{e("chat"),r(T)},E=(T,x)=>{let b=!1;return T.forEach(S=>{x===S.uid&&(b=!0)}),b},g=()=>{switch(t){case"chatroom":return _.jsxs("div",{className:"p-5 grid gap-y-2",children:[d.map(T=>{var b,S,k;let x;if(u.forEach(I=>{var C;I.uid===((C=T==null?void 0:T.lastMessage)==null?void 0:C.senderId)&&(x=I)}),E(T.members,(b=ue==null?void 0:ue.currentUser)==null?void 0:b.uid))return w++,_.jsxs("div",{onClick:()=>m(T.id),className:`p-1 min-h-[130px] shadow-md flex gap-x-2 items-center border rounded-md cursor-pointer relative  ${l==="light"?"border-slate-200 shadow-gray-200":"border-slate-500/70 text-white shadow-slate-500"}`,children:[_.jsx("div",{children:_.jsx("img",{src:"images/sea-logo.jpg",className:"size-12 object-cover object-center aspect-square bg-cover rounded-full "})}),_.jsxs("div",{children:[_.jsx("div",{className:"font-bold text-lg",children:T==null?void 0:T.name}),_.jsxs("div",{children:[_.jsx("div",{className:"flex gap-x-1 items-center",children:(T==null?void 0:T.lastMessage)&&_.jsxs(_.Fragment,{children:[_.jsx(Hi,{size:"size-5",fontSize:"text-sm",name:x.name,image:x.image}),_.jsx("p",{children:x==null?void 0:x.name})]})}),(T==null?void 0:T.lastMessage)&&_.jsx("div",{className:"text-sm mt-2",children:ca(T.lastMessage.content,30)})]}),(T==null?void 0:T.lastMessage)&&_.jsx("div",{className:"text-sm",children:iu((S=T.lastMessage.timestamp)!=null&&S.seconds?((k=T.lastMessage.timestamp)==null?void 0:k.seconds)*1e3:T.lastMessage.timestamp)})]})]},T.id)}),w===0&&_.jsxs("div",{className:`${l==="light"?"":"text-white"}`,children:[_.jsx("p",{children:"You don't have any chat rooms."}),_.jsx("p",{children:"Ask the admin to add you to a chat room."})]})]});case"chat":return _.jsx(SH,{data:{page:t,chats:d,setPage:e,chatId:n,loadMore:p,messages:v,viewingOldMessages:o,setViewingOldMessages:a,setLastDoc:s}})}};return _.jsxs(_.Fragment,{children:[_.jsx(nr,{}),g()]})},AH=()=>{const{headerTitle:t,refreshUserData:e,isLogin:n,setIsLogIn:r,isOnline:i,setIsOnline:s,setUserId:o}=M.useContext(ce);document.title=t;const a=An();M.useEffect(()=>{e()},[n]),M.useEffect(()=>(window.addEventListener("online",()=>s(!0)),window.addEventListener("offline",()=>s(!1)),()=>{window.removeEventListener("online",()=>s(!0)),window.removeEventListener("offline",()=>s(!1))}),[]);const l=async()=>{if(n){const u=Pe(Oe,"users",ue.currentUser.uid);i?await Jt(u,{isOnline:!0}):await Jt(u,{isOnline:!1,timestamp:new Date().getTime()})}};M.useEffect(()=>{l()},[n,i]),M.useEffect(()=>{const u=U7(ue,h=>{h&&(r(h),o(ue.currentUser.uid))});return()=>{u()}},[]),M.useEffect(()=>{a(n?"/app/posts":"/login")},[n])},kH=()=>{const t={text:"About SEA",image:"about",answer:`SEA stands for Star Education Academy, is an education academy founded by U Aye Kyaw and Daw Sandar Lwin in 2015. At SEA, you can study variety of subjects including
    English Language and four skills,
    Philosophy, Maths and Science.`},e=[{text:"Is my data private ?",answer:"Yes, your data is private."},{text:"Where can I give feedback to developer ?",answer:"You can give feedback at aungnaingthan22@gmail.com"}],n=[{text:"What are updated in the latest version ?",answer:"Updated UI design and fix bugs."},{text:"What is the last update time ?",answer:` Updated ${Wi(1712655376346)}.`}];return _.jsxs("div",{className:"p-5 ",children:[_.jsx(nr,{}),_.jsx(Ma,{image:t.image,text:t.text,answer:t.answer}),_.jsx(Ma,{text:"FAQ",image:"faq",answer:e.map(r=>_.jsx(Ma,{text:r.text,answer:r.answer},r.text))}),_.jsx(Ma,{image:"update",text:"Updates",answer:n.map(r=>_.jsx(Ma,{text:r.text,answer:r.answer},r.text))})]})},Ma=({image:t,text:e,answer:n})=>{const[r,i]=M.useState(!1),{theme:s}=M.useContext(ce);return _.jsxs("div",{className:`border p-2  mb-2 ${s==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[_.jsxs("div",{className:"transition-all flex items-center rounded-md min-h-14 justify-between",children:[_.jsxs("div",{className:"flex items-center gap-x-2",children:[t&&_.jsx(NH,{image:t}),_.jsx("div",{children:e})]}),_.jsx("button",{onClick:()=>i(!r),className:`mr-2  rounded-full p-1 ${s==="light"?"bg-gray-200":"bg-slate-500"}`,children:_.jsx("img",{className:"w-6",src:De(r?"up":"down")})})]}),r&&_.jsx("div",{className:"font-medium ",children:n})]})},NH=({image:t})=>_.jsx("img",{className:"w-7",src:De(t)}),ce=M.createContext();function RH(){var V,W,K;const t=Q_("sea-localStorage"),[e,n]=M.useState(Q_("seaacademy-theme-data")||"light"),[r,i]=M.useState(((V=t==null?void 0:t.timer)==null?void 0:V.seconds)||0),[s,o]=M.useState(((W=t==null?void 0:t.timer)==null?void 0:W.minutes)||0),[a,l]=M.useState(((K=t==null?void 0:t.timer)==null?void 0:K.hours)||0),[u,h]=M.useState(!1),[c,d]=M.useState({}),[f,v]=M.useState([]),[y,w]=M.useState(null),[p,m]=M.useState((t==null?void 0:t.answeredQuestions)||[]),[E,g]=M.useState((t==null?void 0:t.currentTest)||null),[T,x]=M.useState(!1),[b,S]=M.useState(""),[k,I]=M.useState(!0),[C,A]=M.useState([]),[N,P]=M.useState([]),[j,B]=M.useState([]),[z,H]=M.useState([]),[$,D]=M.useState([]),[R,L]=M.useState([]);Ko("users",v,u),nF("users",d,u);const F=()=>{},q=()=>{i(0),o(0),l(0)},U=()=>{q(),m([]),g(null),g2("sea-localStorage",{answeredQuestions:[],currentTest:null,startIndex:null,timer:{seconds:0,minutes:0,hours:0}})};M.useEffect(()=>{g2("seaacademy-theme-data",e)},[e]);const O=`${a}:${Av(s)}:${Av(r)}`;return M.useEffect(()=>{const X=setInterval(()=>{r<59?i(r+1):(i(0),o(s+1)),s===59&&(o(0),l(a+1))},1e3);return()=>{clearInterval(X)}},[r]),_.jsx(ce.Provider,{value:{answeredQuestions:p,setAnsweredQuestions:m,currentTest:E,stopTest:U,seaLocalStorage:t,formattedTime:O,startTimer:q,seconds:r,minutes:s,hours:a,inspecting:T,userData:c,isLogin:u,setUserData:d,users:f,setCurrentTest:g,headerTitle:b,setHeaderTitle:S,theme:e,setTheme:n,refreshUserData:F,isOnline:k,setIsOnline:I,userId:y,setUserId:w,setInspecting:x,setIsLogIn:h,posts:C,setPosts:A,tests:N,setTests:P,history:j,setHistory:B,chats:z,setChats:H,messages:$,setMessages:D,notifications:R,setNotifications:L},children:_.jsx("div",{className:`transition-all duration-300 App font-padauk flex flex-col items-center min-h-screen ${e==="light"?"":"bg-slate-600"}`,children:_.jsxs(z6,{children:[_.jsx(AH,{}),_.jsx(uF,{}),_.jsx(dF,{}),_.jsx("div",{className:"flex-1 w-full h-full md:w-4/5 lg:w-3/5",children:_.jsxs(j6,{children:[!u&&_.jsx(en,{exact:!0,path:"/login",element:_.jsx(IF,{})}),u&&_.jsxs(_.Fragment,{children:[_.jsx(en,{exact:!0,path:"/app/:page",element:E?_.jsx(iF,{}):_.jsx(wF,{})}),_.jsx(en,{exact:!0,path:"/app/history/:resultId",element:_.jsx(sF,{})}),_.jsx(en,{exact:!0,path:"/app/help",element:_.jsx(kH,{})}),_.jsx(en,{exact:!0,path:"/app/history/:resultId/reviews",element:_.jsx(cF,{})}),_.jsx(en,{path:"/app/history",element:_.jsx(hF,{})}),_.jsx(en,{path:"/app/chatroom",element:_.jsx(CH,{})}),(c==null?void 0:c.isAdmin)&&_.jsxs(_.Fragment,{children:[_.jsx(en,{path:"/app/notifications",element:_.jsx(EH,{})}),_.jsx(en,{path:"/app/admin",element:_.jsx(fF,{})}),_.jsx(en,{path:"/app/admin/tests",element:_.jsx(DF,{})}),_.jsx(en,{path:"/app/admin/users",element:_.jsx(MF,{})}),_.jsx(en,{path:"/app/admin/posts",element:_.jsx(_H,{})})]}),_.jsx(en,{exact:!0,path:"/app/settings",element:_.jsx(SF,{})})]}),_.jsx(en,{path:"*",element:_.jsx(rf,{title:"No page found!",text:"404 No page found!"})})]})}),b!=="Chat Room"&&_.jsx(bF,{})]})})})}_0.createRoot(document.getElementById("root")).render(_.jsx(Mw.StrictMode,{children:_.jsx(RH,{})}));
