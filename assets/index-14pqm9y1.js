function FL(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function jk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ns(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var zk={exports:{}},Xp={},Wk={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mh=Symbol.for("react.element"),$L=Symbol.for("react.portal"),UL=Symbol.for("react.fragment"),BL=Symbol.for("react.strict_mode"),jL=Symbol.for("react.profiler"),zL=Symbol.for("react.provider"),WL=Symbol.for("react.context"),HL=Symbol.for("react.forward_ref"),qL=Symbol.for("react.suspense"),GL=Symbol.for("react.memo"),YL=Symbol.for("react.lazy"),YI=Symbol.iterator;function KL(t){return t===null||typeof t!="object"?null:(t=YI&&t[YI]||t["@@iterator"],typeof t=="function"?t:null)}var Hk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qk=Object.assign,Gk={};function Ml(t,e,n){this.props=t,this.context=e,this.refs=Gk,this.updater=n||Hk}Ml.prototype.isReactComponent={};Ml.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ml.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Yk(){}Yk.prototype=Ml.prototype;function z0(t,e,n){this.props=t,this.context=e,this.refs=Gk,this.updater=n||Hk}var W0=z0.prototype=new Yk;W0.constructor=z0;qk(W0,Ml.prototype);W0.isPureReactComponent=!0;var KI=Array.isArray,Kk=Object.prototype.hasOwnProperty,H0={current:null},Qk={key:!0,ref:!0,__self:!0,__source:!0};function Xk(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Kk.call(e,r)&&!Qk.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:mh,type:t,key:s,ref:o,props:i,_owner:H0.current}}function QL(t,e){return{$$typeof:mh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function q0(t){return typeof t=="object"&&t!==null&&t.$$typeof===mh}function XL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var QI=/\/+/g;function c_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?XL(""+t.key):e.toString(36)}function Gd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case mh:case $L:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+c_(o,0):r,KI(i)?(n="",t!=null&&(n=t.replace(QI,"$&/")+"/"),Gd(i,e,n,"",function(u){return u})):i!=null&&(q0(i)&&(i=QL(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(QI,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",KI(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+c_(s,a);o+=Gd(s,e,n,l,i)}else if(l=KL(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+c_(s,a++),o+=Gd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ud(t,e,n){if(t==null)return t;var r=[],i=0;return Gd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function JL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var dn={current:null},Yd={transition:null},ZL={ReactCurrentDispatcher:dn,ReactCurrentBatchConfig:Yd,ReactCurrentOwner:H0};le.Children={map:ud,forEach:function(t,e,n){ud(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ud(t,function(){e++}),e},toArray:function(t){return ud(t,function(e){return e})||[]},only:function(t){if(!q0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=Ml;le.Fragment=UL;le.Profiler=jL;le.PureComponent=z0;le.StrictMode=BL;le.Suspense=qL;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZL;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=qk({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=H0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Kk.call(e,l)&&!Qk.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:mh,type:t.type,key:i,ref:s,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:WL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zL,_context:t},t.Consumer=t};le.createElement=Xk;le.createFactory=function(t){var e=Xk.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:HL,render:t}};le.isValidElement=q0;le.lazy=function(t){return{$$typeof:YL,_payload:{_status:-1,_result:t},_init:JL}};le.memo=function(t,e){return{$$typeof:GL,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=Yd.transition;Yd.transition={};try{t()}finally{Yd.transition=e}};le.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};le.useCallback=function(t,e){return dn.current.useCallback(t,e)};le.useContext=function(t){return dn.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return dn.current.useDeferredValue(t)};le.useEffect=function(t,e){return dn.current.useEffect(t,e)};le.useId=function(){return dn.current.useId()};le.useImperativeHandle=function(t,e,n){return dn.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return dn.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return dn.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return dn.current.useMemo(t,e)};le.useReducer=function(t,e,n){return dn.current.useReducer(t,e,n)};le.useRef=function(t){return dn.current.useRef(t)};le.useState=function(t){return dn.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return dn.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return dn.current.useTransition()};le.version="18.2.0";Wk.exports=le;var E=Wk.exports;const ve=jk(E),Ey=FL({__proto__:null,default:ve},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eV=E,tV=Symbol.for("react.element"),nV=Symbol.for("react.fragment"),rV=Object.prototype.hasOwnProperty,iV=eV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sV={key:!0,ref:!0,__self:!0,__source:!0};function Jk(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)rV.call(e,r)&&!sV.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:tV,type:t,key:s,ref:o,props:i,_owner:iV.current}}Xp.Fragment=nV;Xp.jsx=Jk;Xp.jsxs=Jk;zk.exports=Xp;var k=zk.exports,Ty={},Zk={exports:{}},Vn={},eP={exports:{}},tP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,H){var Y=V.length;V.push(H);e:for(;0<Y;){var De=Y-1>>>1,st=V[De];if(0<i(st,H))V[De]=H,V[Y]=st,Y=De;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var H=V[0],Y=V.pop();if(Y!==H){V[0]=Y;e:for(var De=0,st=V.length,Ws=st>>>1;De<Ws;){var Jr=2*(De+1)-1,iu=V[Jr],Zr=Jr+1,oa=V[Zr];if(0>i(iu,Y))Zr<st&&0>i(oa,iu)?(V[De]=oa,V[Zr]=Y,De=Zr):(V[De]=iu,V[Jr]=Y,De=Jr);else if(Zr<st&&0>i(oa,Y))V[De]=oa,V[Zr]=Y,De=Zr;else break e}}return H}function i(V,H){var Y=V.sortIndex-H.sortIndex;return Y!==0?Y:V.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,f=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(V){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=V)r(u),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(u)}}function w(V){if(g=!1,y(V),!m)if(n(l)!==null)m=!0,dt(I);else{var H=n(u);H!==null&&jt(w,H.startTime-V)}}function I(V,H){m=!1,g&&(g=!1,_(N),N=-1),f=!0;var Y=d;try{for(y(H),h=n(l);h!==null&&(!(h.expirationTime>H)||V&&!Ae());){var De=h.callback;if(typeof De=="function"){h.callback=null,d=h.priorityLevel;var st=De(h.expirationTime<=H);H=t.unstable_now(),typeof st=="function"?h.callback=st:h===n(l)&&r(l),y(H)}else r(l);h=n(l)}if(h!==null)var Ws=!0;else{var Jr=n(u);Jr!==null&&jt(w,Jr.startTime-H),Ws=!1}return Ws}finally{h=null,d=Y,f=!1}}var R=!1,C=null,N=-1,Z=5,W=-1;function Ae(){return!(t.unstable_now()-W<Z)}function He(){if(C!==null){var V=t.unstable_now();W=V;var H=!0;try{H=C(!0,V)}finally{H?Nt():(R=!1,C=null)}}else R=!1}var Nt;if(typeof p=="function")Nt=function(){p(He)};else if(typeof MessageChannel<"u"){var Rn=new MessageChannel,Re=Rn.port2;Rn.port1.onmessage=He,Nt=function(){Re.postMessage(null)}}else Nt=function(){v(He,0)};function dt(V){C=V,R||(R=!0,Nt())}function jt(V,H){N=v(function(){V(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,dt(I))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var Y=d;d=H;try{return V()}finally{d=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,H){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Y=d;d=V;try{return H()}finally{d=Y}},t.unstable_scheduleCallback=function(V,H,Y){var De=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?De+Y:De):Y=De,V){case 1:var st=-1;break;case 2:st=250;break;case 5:st=1073741823;break;case 4:st=1e4;break;default:st=5e3}return st=Y+st,V={id:c++,callback:H,priorityLevel:V,startTime:Y,expirationTime:st,sortIndex:-1},Y>De?(V.sortIndex=Y,e(u,V),n(l)===null&&V===n(u)&&(g?(_(N),N=-1):g=!0,jt(w,Y-De))):(V.sortIndex=st,e(l,V),m||f||(m=!0,dt(I))),V},t.unstable_shouldYield=Ae,t.unstable_wrapCallback=function(V){var H=d;return function(){var Y=d;d=H;try{return V.apply(this,arguments)}finally{d=Y}}}})(tP);eP.exports=tP;var oV=eP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nP=E,On=oV;function A(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rP=new Set,dc={};function Yo(t,e){ll(t,e),ll(t+"Capture",e)}function ll(t,e){for(dc[t]=e,t=0;t<e.length;t++)rP.add(e[t])}var wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Iy=Object.prototype.hasOwnProperty,aV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,XI={},JI={};function lV(t){return Iy.call(JI,t)?!0:Iy.call(XI,t)?!1:aV.test(t)?JI[t]=!0:(XI[t]=!0,!1)}function uV(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cV(t,e,n,r){if(e===null||typeof e>"u"||uV(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ut[t]=new fn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ut[e]=new fn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ut[t]=new fn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ut[t]=new fn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ut[t]=new fn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ut[t]=new fn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ut[t]=new fn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ut[t]=new fn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ut[t]=new fn(t,5,!1,t.toLowerCase(),null,!1,!1)});var G0=/[\-:]([a-z])/g;function Y0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(G0,Y0);Ut[e]=new fn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(G0,Y0);Ut[e]=new fn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(G0,Y0);Ut[e]=new fn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ut[t]=new fn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ut.xlinkHref=new fn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ut[t]=new fn(t,1,!1,t.toLowerCase(),null,!0,!0)});function K0(t,e,n,r){var i=Ut.hasOwnProperty(e)?Ut[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cV(e,n,i,r)&&(n=null),r||i===null?lV(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bi=nP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cd=Symbol.for("react.element"),ka=Symbol.for("react.portal"),Pa=Symbol.for("react.fragment"),Q0=Symbol.for("react.strict_mode"),Sy=Symbol.for("react.profiler"),iP=Symbol.for("react.provider"),sP=Symbol.for("react.context"),X0=Symbol.for("react.forward_ref"),Cy=Symbol.for("react.suspense"),Ry=Symbol.for("react.suspense_list"),J0=Symbol.for("react.memo"),Wi=Symbol.for("react.lazy"),oP=Symbol.for("react.offscreen"),ZI=Symbol.iterator;function su(t){return t===null||typeof t!="object"?null:(t=ZI&&t[ZI]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,h_;function Au(t){if(h_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);h_=e&&e[1]||""}return`
`+h_+t}var d_=!1;function f_(t,e){if(!t||d_)return"";d_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{d_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Au(t):""}function hV(t){switch(t.tag){case 5:return Au(t.type);case 16:return Au("Lazy");case 13:return Au("Suspense");case 19:return Au("SuspenseList");case 0:case 2:case 15:return t=f_(t.type,!1),t;case 11:return t=f_(t.type.render,!1),t;case 1:return t=f_(t.type,!0),t;default:return""}}function ky(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pa:return"Fragment";case ka:return"Portal";case Sy:return"Profiler";case Q0:return"StrictMode";case Cy:return"Suspense";case Ry:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sP:return(t.displayName||"Context")+".Consumer";case iP:return(t._context.displayName||"Context")+".Provider";case X0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case J0:return e=t.displayName||null,e!==null?e:ky(t.type)||"Memo";case Wi:e=t._payload,t=t._init;try{return ky(t(e))}catch{}}return null}function dV(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ky(e);case 8:return e===Q0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ts(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function aP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fV(t){var e=aP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hd(t){t._valueTracker||(t._valueTracker=fV(t))}function lP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=aP(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function kf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Py(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function e1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ts(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function uP(t,e){e=e.checked,e!=null&&K0(t,"checked",e,!1)}function Ay(t,e){uP(t,e);var n=Ts(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xy(t,e.type,n):e.hasOwnProperty("defaultValue")&&xy(t,e.type,Ts(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function t1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xy(t,e,n){(e!=="number"||kf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xu=Array.isArray;function ja(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ts(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function by(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(A(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function n1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(A(92));if(xu(n)){if(1<n.length)throw Error(A(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ts(n)}}function cP(t,e){var n=Ts(e.value),r=Ts(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function r1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function hP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?hP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dd,dP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(dd=dd||document.createElement("div"),dd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pV=["Webkit","ms","Moz","O"];Object.keys(zu).forEach(function(t){pV.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zu[e]=zu[t]})});function fP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||zu.hasOwnProperty(t)&&zu[t]?(""+e).trim():e+"px"}function pP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=fP(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var mV=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ny(t,e){if(e){if(mV[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(A(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(A(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(A(61))}if(e.style!=null&&typeof e.style!="object")throw Error(A(62))}}function Oy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var My=null;function Z0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ly=null,za=null,Wa=null;function i1(t){if(t=yh(t)){if(typeof Ly!="function")throw Error(A(280));var e=t.stateNode;e&&(e=nm(e),Ly(t.stateNode,t.type,e))}}function mP(t){za?Wa?Wa.push(t):Wa=[t]:za=t}function gP(){if(za){var t=za,e=Wa;if(Wa=za=null,i1(t),e)for(t=0;t<e.length;t++)i1(e[t])}}function _P(t,e){return t(e)}function yP(){}var p_=!1;function vP(t,e,n){if(p_)return t(e,n);p_=!0;try{return _P(t,e,n)}finally{p_=!1,(za!==null||Wa!==null)&&(yP(),gP())}}function pc(t,e){var n=t.stateNode;if(n===null)return null;var r=nm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(A(231,e,typeof n));return n}var Vy=!1;if(wi)try{var ou={};Object.defineProperty(ou,"passive",{get:function(){Vy=!0}}),window.addEventListener("test",ou,ou),window.removeEventListener("test",ou,ou)}catch{Vy=!1}function gV(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Wu=!1,Pf=null,Af=!1,Fy=null,_V={onError:function(t){Wu=!0,Pf=t}};function yV(t,e,n,r,i,s,o,a,l){Wu=!1,Pf=null,gV.apply(_V,arguments)}function vV(t,e,n,r,i,s,o,a,l){if(yV.apply(this,arguments),Wu){if(Wu){var u=Pf;Wu=!1,Pf=null}else throw Error(A(198));Af||(Af=!0,Fy=u)}}function Ko(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function wP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function s1(t){if(Ko(t)!==t)throw Error(A(188))}function wV(t){var e=t.alternate;if(!e){if(e=Ko(t),e===null)throw Error(A(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return s1(i),t;if(s===r)return s1(i),e;s=s.sibling}throw Error(A(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?t:e}function EP(t){return t=wV(t),t!==null?TP(t):null}function TP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=TP(t);if(e!==null)return e;t=t.sibling}return null}var IP=On.unstable_scheduleCallback,o1=On.unstable_cancelCallback,EV=On.unstable_shouldYield,TV=On.unstable_requestPaint,at=On.unstable_now,IV=On.unstable_getCurrentPriorityLevel,ew=On.unstable_ImmediatePriority,SP=On.unstable_UserBlockingPriority,xf=On.unstable_NormalPriority,SV=On.unstable_LowPriority,CP=On.unstable_IdlePriority,Jp=null,$r=null;function CV(t){if($r&&typeof $r.onCommitFiberRoot=="function")try{$r.onCommitFiberRoot(Jp,t,void 0,(t.current.flags&128)===128)}catch{}}var mr=Math.clz32?Math.clz32:PV,RV=Math.log,kV=Math.LN2;function PV(t){return t>>>=0,t===0?32:31-(RV(t)/kV|0)|0}var fd=64,pd=4194304;function bu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=bu(a):(s&=o,s!==0&&(r=bu(s)))}else o=n&~i,o!==0?r=bu(o):s!==0&&(r=bu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mr(e),i=1<<n,r|=t[n],e&=~i;return r}function AV(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xV(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-mr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=AV(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function $y(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function RP(){var t=fd;return fd<<=1,!(fd&4194240)&&(fd=64),t}function m_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mr(e),t[e]=n}function bV(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-mr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function tw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Te=0;function kP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var PP,nw,AP,xP,bP,Uy=!1,md=[],as=null,ls=null,us=null,mc=new Map,gc=new Map,qi=[],DV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function a1(t,e){switch(t){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":ls=null;break;case"mouseover":case"mouseout":us=null;break;case"pointerover":case"pointerout":mc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gc.delete(e.pointerId)}}function au(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=yh(e),e!==null&&nw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function NV(t,e,n,r,i){switch(e){case"focusin":return as=au(as,t,e,n,r,i),!0;case"dragenter":return ls=au(ls,t,e,n,r,i),!0;case"mouseover":return us=au(us,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return mc.set(s,au(mc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,gc.set(s,au(gc.get(s)||null,t,e,n,r,i)),!0}return!1}function DP(t){var e=so(t.target);if(e!==null){var n=Ko(e);if(n!==null){if(e=n.tag,e===13){if(e=wP(n),e!==null){t.blockedOn=e,bP(t.priority,function(){AP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=By(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);My=r,n.target.dispatchEvent(r),My=null}else return e=yh(n),e!==null&&nw(e),t.blockedOn=n,!1;e.shift()}return!0}function l1(t,e,n){Kd(t)&&n.delete(e)}function OV(){Uy=!1,as!==null&&Kd(as)&&(as=null),ls!==null&&Kd(ls)&&(ls=null),us!==null&&Kd(us)&&(us=null),mc.forEach(l1),gc.forEach(l1)}function lu(t,e){t.blockedOn===e&&(t.blockedOn=null,Uy||(Uy=!0,On.unstable_scheduleCallback(On.unstable_NormalPriority,OV)))}function _c(t){function e(i){return lu(i,t)}if(0<md.length){lu(md[0],t);for(var n=1;n<md.length;n++){var r=md[n];r.blockedOn===t&&(r.blockedOn=null)}}for(as!==null&&lu(as,t),ls!==null&&lu(ls,t),us!==null&&lu(us,t),mc.forEach(e),gc.forEach(e),n=0;n<qi.length;n++)r=qi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qi.length&&(n=qi[0],n.blockedOn===null);)DP(n),n.blockedOn===null&&qi.shift()}var Ha=bi.ReactCurrentBatchConfig,Df=!0;function MV(t,e,n,r){var i=Te,s=Ha.transition;Ha.transition=null;try{Te=1,rw(t,e,n,r)}finally{Te=i,Ha.transition=s}}function LV(t,e,n,r){var i=Te,s=Ha.transition;Ha.transition=null;try{Te=4,rw(t,e,n,r)}finally{Te=i,Ha.transition=s}}function rw(t,e,n,r){if(Df){var i=By(t,e,n,r);if(i===null)C_(t,e,r,Nf,n),a1(t,r);else if(NV(i,t,e,n,r))r.stopPropagation();else if(a1(t,r),e&4&&-1<DV.indexOf(t)){for(;i!==null;){var s=yh(i);if(s!==null&&PP(s),s=By(t,e,n,r),s===null&&C_(t,e,r,Nf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else C_(t,e,r,null,n)}}var Nf=null;function By(t,e,n,r){if(Nf=null,t=Z0(r),t=so(t),t!==null)if(e=Ko(t),e===null)t=null;else if(n=e.tag,n===13){if(t=wP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nf=t,null}function NP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IV()){case ew:return 1;case SP:return 4;case xf:case SV:return 16;case CP:return 536870912;default:return 16}default:return 16}}var ts=null,iw=null,Qd=null;function OP(){if(Qd)return Qd;var t,e=iw,n=e.length,r,i="value"in ts?ts.value:ts.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Qd=i.slice(t,1<r?1-r:void 0)}function Xd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function gd(){return!0}function u1(){return!1}function Fn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?gd:u1,this.isPropagationStopped=u1,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gd)},persist:function(){},isPersistent:gd}),e}var Ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sw=Fn(Ll),_h=Qe({},Ll,{view:0,detail:0}),VV=Fn(_h),g_,__,uu,Zp=Qe({},_h,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ow,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==uu&&(uu&&t.type==="mousemove"?(g_=t.screenX-uu.screenX,__=t.screenY-uu.screenY):__=g_=0,uu=t),g_)},movementY:function(t){return"movementY"in t?t.movementY:__}}),c1=Fn(Zp),FV=Qe({},Zp,{dataTransfer:0}),$V=Fn(FV),UV=Qe({},_h,{relatedTarget:0}),y_=Fn(UV),BV=Qe({},Ll,{animationName:0,elapsedTime:0,pseudoElement:0}),jV=Fn(BV),zV=Qe({},Ll,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),WV=Fn(zV),HV=Qe({},Ll,{data:0}),h1=Fn(HV),qV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KV(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=YV[t])?!!e[t]:!1}function ow(){return KV}var QV=Qe({},_h,{key:function(t){if(t.key){var e=qV[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GV[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ow,charCode:function(t){return t.type==="keypress"?Xd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),XV=Fn(QV),JV=Qe({},Zp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),d1=Fn(JV),ZV=Qe({},_h,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ow}),eF=Fn(ZV),tF=Qe({},Ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),nF=Fn(tF),rF=Qe({},Zp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iF=Fn(rF),sF=[9,13,27,32],aw=wi&&"CompositionEvent"in window,Hu=null;wi&&"documentMode"in document&&(Hu=document.documentMode);var oF=wi&&"TextEvent"in window&&!Hu,MP=wi&&(!aw||Hu&&8<Hu&&11>=Hu),f1=" ",p1=!1;function LP(t,e){switch(t){case"keyup":return sF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Aa=!1;function aF(t,e){switch(t){case"compositionend":return VP(e);case"keypress":return e.which!==32?null:(p1=!0,f1);case"textInput":return t=e.data,t===f1&&p1?null:t;default:return null}}function lF(t,e){if(Aa)return t==="compositionend"||!aw&&LP(t,e)?(t=OP(),Qd=iw=ts=null,Aa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return MP&&e.locale!=="ko"?null:e.data;default:return null}}var uF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function m1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uF[t.type]:e==="textarea"}function FP(t,e,n,r){mP(r),e=Of(e,"onChange"),0<e.length&&(n=new sw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qu=null,yc=null;function cF(t){KP(t,0)}function em(t){var e=Da(t);if(lP(e))return t}function hF(t,e){if(t==="change")return e}var $P=!1;if(wi){var v_;if(wi){var w_="oninput"in document;if(!w_){var g1=document.createElement("div");g1.setAttribute("oninput","return;"),w_=typeof g1.oninput=="function"}v_=w_}else v_=!1;$P=v_&&(!document.documentMode||9<document.documentMode)}function _1(){qu&&(qu.detachEvent("onpropertychange",UP),yc=qu=null)}function UP(t){if(t.propertyName==="value"&&em(yc)){var e=[];FP(e,yc,t,Z0(t)),vP(cF,e)}}function dF(t,e,n){t==="focusin"?(_1(),qu=e,yc=n,qu.attachEvent("onpropertychange",UP)):t==="focusout"&&_1()}function fF(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return em(yc)}function pF(t,e){if(t==="click")return em(e)}function mF(t,e){if(t==="input"||t==="change")return em(e)}function gF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vr=typeof Object.is=="function"?Object.is:gF;function vc(t,e){if(vr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Iy.call(e,i)||!vr(t[i],e[i]))return!1}return!0}function y1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function v1(t,e){var n=y1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=y1(n)}}function BP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?BP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jP(){for(var t=window,e=kf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=kf(t.document)}return e}function lw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _F(t){var e=jP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&BP(n.ownerDocument.documentElement,n)){if(r!==null&&lw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=v1(n,s);var o=v1(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yF=wi&&"documentMode"in document&&11>=document.documentMode,xa=null,jy=null,Gu=null,zy=!1;function w1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zy||xa==null||xa!==kf(r)||(r=xa,"selectionStart"in r&&lw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gu&&vc(Gu,r)||(Gu=r,r=Of(jy,"onSelect"),0<r.length&&(e=new sw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xa)))}function _d(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ba={animationend:_d("Animation","AnimationEnd"),animationiteration:_d("Animation","AnimationIteration"),animationstart:_d("Animation","AnimationStart"),transitionend:_d("Transition","TransitionEnd")},E_={},zP={};wi&&(zP=document.createElement("div").style,"AnimationEvent"in window||(delete ba.animationend.animation,delete ba.animationiteration.animation,delete ba.animationstart.animation),"TransitionEvent"in window||delete ba.transitionend.transition);function tm(t){if(E_[t])return E_[t];if(!ba[t])return t;var e=ba[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zP)return E_[t]=e[n];return t}var WP=tm("animationend"),HP=tm("animationiteration"),qP=tm("animationstart"),GP=tm("transitionend"),YP=new Map,E1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(t,e){YP.set(t,e),Yo(e,[t])}for(var T_=0;T_<E1.length;T_++){var I_=E1[T_],vF=I_.toLowerCase(),wF=I_[0].toUpperCase()+I_.slice(1);Os(vF,"on"+wF)}Os(WP,"onAnimationEnd");Os(HP,"onAnimationIteration");Os(qP,"onAnimationStart");Os("dblclick","onDoubleClick");Os("focusin","onFocus");Os("focusout","onBlur");Os(GP,"onTransitionEnd");ll("onMouseEnter",["mouseout","mouseover"]);ll("onMouseLeave",["mouseout","mouseover"]);ll("onPointerEnter",["pointerout","pointerover"]);ll("onPointerLeave",["pointerout","pointerover"]);Yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EF=new Set("cancel close invalid load scroll toggle".split(" ").concat(Du));function T1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,vV(r,e,void 0,t),t.currentTarget=null}function KP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;T1(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;T1(i,a,u),s=l}}}if(Af)throw t=Fy,Af=!1,Fy=null,t}function Ne(t,e){var n=e[Yy];n===void 0&&(n=e[Yy]=new Set);var r=t+"__bubble";n.has(r)||(QP(e,t,2,!1),n.add(r))}function S_(t,e,n){var r=0;e&&(r|=4),QP(n,t,r,e)}var yd="_reactListening"+Math.random().toString(36).slice(2);function wc(t){if(!t[yd]){t[yd]=!0,rP.forEach(function(n){n!=="selectionchange"&&(EF.has(n)||S_(n,!1,t),S_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yd]||(e[yd]=!0,S_("selectionchange",!1,e))}}function QP(t,e,n,r){switch(NP(e)){case 1:var i=MV;break;case 4:i=LV;break;default:i=rw}n=i.bind(null,e,n,t),i=void 0,!Vy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function C_(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=so(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}vP(function(){var u=s,c=Z0(n),h=[];e:{var d=YP.get(t);if(d!==void 0){var f=sw,m=t;switch(t){case"keypress":if(Xd(n)===0)break e;case"keydown":case"keyup":f=XV;break;case"focusin":m="focus",f=y_;break;case"focusout":m="blur",f=y_;break;case"beforeblur":case"afterblur":f=y_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=c1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=$V;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=eF;break;case WP:case HP:case qP:f=jV;break;case GP:f=nF;break;case"scroll":f=VV;break;case"wheel":f=iF;break;case"copy":case"cut":case"paste":f=WV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=d1}var g=(e&4)!==0,v=!g&&t==="scroll",_=g?d!==null?d+"Capture":null:d;g=[];for(var p=u,y;p!==null;){y=p;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,_!==null&&(w=pc(p,_),w!=null&&g.push(Ec(p,w,y)))),v)break;p=p.return}0<g.length&&(d=new f(d,m,null,n,c),h.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==My&&(m=n.relatedTarget||n.fromElement)&&(so(m)||m[Ei]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(m=n.relatedTarget||n.toElement,f=u,m=m?so(m):null,m!==null&&(v=Ko(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=u),f!==m)){if(g=c1,w="onMouseLeave",_="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(g=d1,w="onPointerLeave",_="onPointerEnter",p="pointer"),v=f==null?d:Da(f),y=m==null?d:Da(m),d=new g(w,p+"leave",f,n,c),d.target=v,d.relatedTarget=y,w=null,so(c)===u&&(g=new g(_,p+"enter",m,n,c),g.target=y,g.relatedTarget=v,w=g),v=w,f&&m)t:{for(g=f,_=m,p=0,y=g;y;y=aa(y))p++;for(y=0,w=_;w;w=aa(w))y++;for(;0<p-y;)g=aa(g),p--;for(;0<y-p;)_=aa(_),y--;for(;p--;){if(g===_||_!==null&&g===_.alternate)break t;g=aa(g),_=aa(_)}g=null}else g=null;f!==null&&I1(h,d,f,g,!1),m!==null&&v!==null&&I1(h,v,m,g,!0)}}e:{if(d=u?Da(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var I=hF;else if(m1(d))if($P)I=mF;else{I=fF;var R=dF}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(I=pF);if(I&&(I=I(t,u))){FP(h,I,n,c);break e}R&&R(t,d,u),t==="focusout"&&(R=d._wrapperState)&&R.controlled&&d.type==="number"&&xy(d,"number",d.value)}switch(R=u?Da(u):window,t){case"focusin":(m1(R)||R.contentEditable==="true")&&(xa=R,jy=u,Gu=null);break;case"focusout":Gu=jy=xa=null;break;case"mousedown":zy=!0;break;case"contextmenu":case"mouseup":case"dragend":zy=!1,w1(h,n,c);break;case"selectionchange":if(yF)break;case"keydown":case"keyup":w1(h,n,c)}var C;if(aw)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Aa?LP(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(MP&&n.locale!=="ko"&&(Aa||N!=="onCompositionStart"?N==="onCompositionEnd"&&Aa&&(C=OP()):(ts=c,iw="value"in ts?ts.value:ts.textContent,Aa=!0)),R=Of(u,N),0<R.length&&(N=new h1(N,t,null,n,c),h.push({event:N,listeners:R}),C?N.data=C:(C=VP(n),C!==null&&(N.data=C)))),(C=oF?aF(t,n):lF(t,n))&&(u=Of(u,"onBeforeInput"),0<u.length&&(c=new h1("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=C))}KP(h,e)})}function Ec(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Of(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=pc(t,n),s!=null&&r.unshift(Ec(t,s,i)),s=pc(t,e),s!=null&&r.push(Ec(t,s,i))),t=t.return}return r}function aa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function I1(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=pc(n,s),l!=null&&o.unshift(Ec(n,l,a))):i||(l=pc(n,s),l!=null&&o.push(Ec(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var TF=/\r\n?/g,IF=/\u0000|\uFFFD/g;function S1(t){return(typeof t=="string"?t:""+t).replace(TF,`
`).replace(IF,"")}function vd(t,e,n){if(e=S1(e),S1(t)!==e&&n)throw Error(A(425))}function Mf(){}var Wy=null,Hy=null;function qy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gy=typeof setTimeout=="function"?setTimeout:void 0,SF=typeof clearTimeout=="function"?clearTimeout:void 0,C1=typeof Promise=="function"?Promise:void 0,CF=typeof queueMicrotask=="function"?queueMicrotask:typeof C1<"u"?function(t){return C1.resolve(null).then(t).catch(RF)}:Gy;function RF(t){setTimeout(function(){throw t})}function R_(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),_c(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);_c(e)}function cs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function R1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Vl=Math.random().toString(36).slice(2),xr="__reactFiber$"+Vl,Tc="__reactProps$"+Vl,Ei="__reactContainer$"+Vl,Yy="__reactEvents$"+Vl,kF="__reactListeners$"+Vl,PF="__reactHandles$"+Vl;function so(t){var e=t[xr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ei]||n[xr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=R1(t);t!==null;){if(n=t[xr])return n;t=R1(t)}return e}t=n,n=t.parentNode}return null}function yh(t){return t=t[xr]||t[Ei],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Da(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(A(33))}function nm(t){return t[Tc]||null}var Ky=[],Na=-1;function Ms(t){return{current:t}}function Le(t){0>Na||(t.current=Ky[Na],Ky[Na]=null,Na--)}function be(t,e){Na++,Ky[Na]=t.current,t.current=e}var Is={},en=Ms(Is),En=Ms(!1),So=Is;function ul(t,e){var n=t.type.contextTypes;if(!n)return Is;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Tn(t){return t=t.childContextTypes,t!=null}function Lf(){Le(En),Le(en)}function k1(t,e,n){if(en.current!==Is)throw Error(A(168));be(en,e),be(En,n)}function XP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(A(108,dV(t)||"Unknown",i));return Qe({},n,r)}function Vf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Is,So=en.current,be(en,t),be(En,En.current),!0}function P1(t,e,n){var r=t.stateNode;if(!r)throw Error(A(169));n?(t=XP(t,e,So),r.__reactInternalMemoizedMergedChildContext=t,Le(En),Le(en),be(en,t)):Le(En),be(En,n)}var ii=null,rm=!1,k_=!1;function JP(t){ii===null?ii=[t]:ii.push(t)}function AF(t){rm=!0,JP(t)}function Ls(){if(!k_&&ii!==null){k_=!0;var t=0,e=Te;try{var n=ii;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ii=null,rm=!1}catch(i){throw ii!==null&&(ii=ii.slice(t+1)),IP(ew,Ls),i}finally{Te=e,k_=!1}}return null}var Oa=[],Ma=0,Ff=null,$f=0,jn=[],zn=0,Co=null,ai=1,li="";function Ys(t,e){Oa[Ma++]=$f,Oa[Ma++]=Ff,Ff=t,$f=e}function ZP(t,e,n){jn[zn++]=ai,jn[zn++]=li,jn[zn++]=Co,Co=t;var r=ai;t=li;var i=32-mr(r)-1;r&=~(1<<i),n+=1;var s=32-mr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ai=1<<32-mr(e)+i|n<<i|r,li=s+t}else ai=1<<s|n<<i|r,li=t}function uw(t){t.return!==null&&(Ys(t,1),ZP(t,1,0))}function cw(t){for(;t===Ff;)Ff=Oa[--Ma],Oa[Ma]=null,$f=Oa[--Ma],Oa[Ma]=null;for(;t===Co;)Co=jn[--zn],jn[zn]=null,li=jn[--zn],jn[zn]=null,ai=jn[--zn],jn[zn]=null}var Dn=null,An=null,je=!1,hr=null;function eA(t,e){var n=Gn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function A1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dn=t,An=cs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dn=t,An=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Co!==null?{id:ai,overflow:li}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dn=t,An=null,!0):!1;default:return!1}}function Qy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xy(t){if(je){var e=An;if(e){var n=e;if(!A1(t,e)){if(Qy(t))throw Error(A(418));e=cs(n.nextSibling);var r=Dn;e&&A1(t,e)?eA(r,n):(t.flags=t.flags&-4097|2,je=!1,Dn=t)}}else{if(Qy(t))throw Error(A(418));t.flags=t.flags&-4097|2,je=!1,Dn=t}}}function x1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dn=t}function wd(t){if(t!==Dn)return!1;if(!je)return x1(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qy(t.type,t.memoizedProps)),e&&(e=An)){if(Qy(t))throw tA(),Error(A(418));for(;e;)eA(t,e),e=cs(e.nextSibling)}if(x1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){An=cs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}An=null}}else An=Dn?cs(t.stateNode.nextSibling):null;return!0}function tA(){for(var t=An;t;)t=cs(t.nextSibling)}function cl(){An=Dn=null,je=!1}function hw(t){hr===null?hr=[t]:hr.push(t)}var xF=bi.ReactCurrentBatchConfig;function ur(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Uf=Ms(null),Bf=null,La=null,dw=null;function fw(){dw=La=Bf=null}function pw(t){var e=Uf.current;Le(Uf),t._currentValue=e}function Jy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qa(t,e){Bf=t,dw=La=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_n=!0),t.firstContext=null)}function er(t){var e=t._currentValue;if(dw!==t)if(t={context:t,memoizedValue:e,next:null},La===null){if(Bf===null)throw Error(A(308));La=t,Bf.dependencies={lanes:0,firstContext:t}}else La=La.next=t;return e}var oo=null;function mw(t){oo===null?oo=[t]:oo.push(t)}function nA(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,mw(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ti(t,r)}function Ti(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hi=!1;function gw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ti(t,n)}return i=r.interleaved,i===null?(e.next=e,mw(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ti(t,n)}function Jd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tw(t,n)}}function b1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function jf(t,e,n,r){var i=t.updateQueue;Hi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,c=u=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(d=e,f=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(f,h,d);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,d=typeof m=="function"?m.call(f,h,d):m,d==null)break e;h=Qe({},h,d);break e;case 2:Hi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ko|=o,t.lanes=o,t.memoizedState=h}}function D1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(A(191,i));i.call(r)}}}var iA=new nP.Component().refs;function Zy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var im={isMounted:function(t){return(t=t._reactInternals)?Ko(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ln(),i=fs(t),s=gi(r,i);s.payload=e,n!=null&&(s.callback=n),e=hs(t,s,i),e!==null&&(gr(e,t,i,r),Jd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ln(),i=fs(t),s=gi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=hs(t,s,i),e!==null&&(gr(e,t,i,r),Jd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ln(),r=fs(t),i=gi(n,r);i.tag=2,e!=null&&(i.callback=e),e=hs(t,i,r),e!==null&&(gr(e,t,r,n),Jd(e,t,r))}};function N1(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!vc(n,r)||!vc(i,s):!0}function sA(t,e,n){var r=!1,i=Is,s=e.contextType;return typeof s=="object"&&s!==null?s=er(s):(i=Tn(e)?So:en.current,r=e.contextTypes,s=(r=r!=null)?ul(t,i):Is),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=im,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function O1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&im.enqueueReplaceState(e,e.state,null)}function ev(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=iA,gw(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=er(s):(s=Tn(e)?So:en.current,i.context=ul(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Zy(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&im.enqueueReplaceState(i,i.state,null),jf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function cu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===iA&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,t))}return t}function Ed(t,e){throw t=Object.prototype.toString.call(e),Error(A(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function M1(t){var e=t._init;return e(t._payload)}function oA(t){function e(_,p){if(t){var y=_.deletions;y===null?(_.deletions=[p],_.flags|=16):y.push(p)}}function n(_,p){if(!t)return null;for(;p!==null;)e(_,p),p=p.sibling;return null}function r(_,p){for(_=new Map;p!==null;)p.key!==null?_.set(p.key,p):_.set(p.index,p),p=p.sibling;return _}function i(_,p){return _=ps(_,p),_.index=0,_.sibling=null,_}function s(_,p,y){return _.index=y,t?(y=_.alternate,y!==null?(y=y.index,y<p?(_.flags|=2,p):y):(_.flags|=2,p)):(_.flags|=1048576,p)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,p,y,w){return p===null||p.tag!==6?(p=O_(y,_.mode,w),p.return=_,p):(p=i(p,y),p.return=_,p)}function l(_,p,y,w){var I=y.type;return I===Pa?c(_,p,y.props.children,w,y.key):p!==null&&(p.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Wi&&M1(I)===p.type)?(w=i(p,y.props),w.ref=cu(_,p,y),w.return=_,w):(w=sf(y.type,y.key,y.props,null,_.mode,w),w.ref=cu(_,p,y),w.return=_,w)}function u(_,p,y,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=M_(y,_.mode,w),p.return=_,p):(p=i(p,y.children||[]),p.return=_,p)}function c(_,p,y,w,I){return p===null||p.tag!==7?(p=go(y,_.mode,w,I),p.return=_,p):(p=i(p,y),p.return=_,p)}function h(_,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=O_(""+p,_.mode,y),p.return=_,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case cd:return y=sf(p.type,p.key,p.props,null,_.mode,y),y.ref=cu(_,null,p),y.return=_,y;case ka:return p=M_(p,_.mode,y),p.return=_,p;case Wi:var w=p._init;return h(_,w(p._payload),y)}if(xu(p)||su(p))return p=go(p,_.mode,y,null),p.return=_,p;Ed(_,p)}return null}function d(_,p,y,w){var I=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return I!==null?null:a(_,p,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case cd:return y.key===I?l(_,p,y,w):null;case ka:return y.key===I?u(_,p,y,w):null;case Wi:return I=y._init,d(_,p,I(y._payload),w)}if(xu(y)||su(y))return I!==null?null:c(_,p,y,w,null);Ed(_,y)}return null}function f(_,p,y,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return _=_.get(y)||null,a(p,_,""+w,I);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case cd:return _=_.get(w.key===null?y:w.key)||null,l(p,_,w,I);case ka:return _=_.get(w.key===null?y:w.key)||null,u(p,_,w,I);case Wi:var R=w._init;return f(_,p,y,R(w._payload),I)}if(xu(w)||su(w))return _=_.get(y)||null,c(p,_,w,I,null);Ed(p,w)}return null}function m(_,p,y,w){for(var I=null,R=null,C=p,N=p=0,Z=null;C!==null&&N<y.length;N++){C.index>N?(Z=C,C=null):Z=C.sibling;var W=d(_,C,y[N],w);if(W===null){C===null&&(C=Z);break}t&&C&&W.alternate===null&&e(_,C),p=s(W,p,N),R===null?I=W:R.sibling=W,R=W,C=Z}if(N===y.length)return n(_,C),je&&Ys(_,N),I;if(C===null){for(;N<y.length;N++)C=h(_,y[N],w),C!==null&&(p=s(C,p,N),R===null?I=C:R.sibling=C,R=C);return je&&Ys(_,N),I}for(C=r(_,C);N<y.length;N++)Z=f(C,_,N,y[N],w),Z!==null&&(t&&Z.alternate!==null&&C.delete(Z.key===null?N:Z.key),p=s(Z,p,N),R===null?I=Z:R.sibling=Z,R=Z);return t&&C.forEach(function(Ae){return e(_,Ae)}),je&&Ys(_,N),I}function g(_,p,y,w){var I=su(y);if(typeof I!="function")throw Error(A(150));if(y=I.call(y),y==null)throw Error(A(151));for(var R=I=null,C=p,N=p=0,Z=null,W=y.next();C!==null&&!W.done;N++,W=y.next()){C.index>N?(Z=C,C=null):Z=C.sibling;var Ae=d(_,C,W.value,w);if(Ae===null){C===null&&(C=Z);break}t&&C&&Ae.alternate===null&&e(_,C),p=s(Ae,p,N),R===null?I=Ae:R.sibling=Ae,R=Ae,C=Z}if(W.done)return n(_,C),je&&Ys(_,N),I;if(C===null){for(;!W.done;N++,W=y.next())W=h(_,W.value,w),W!==null&&(p=s(W,p,N),R===null?I=W:R.sibling=W,R=W);return je&&Ys(_,N),I}for(C=r(_,C);!W.done;N++,W=y.next())W=f(C,_,N,W.value,w),W!==null&&(t&&W.alternate!==null&&C.delete(W.key===null?N:W.key),p=s(W,p,N),R===null?I=W:R.sibling=W,R=W);return t&&C.forEach(function(He){return e(_,He)}),je&&Ys(_,N),I}function v(_,p,y,w){if(typeof y=="object"&&y!==null&&y.type===Pa&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case cd:e:{for(var I=y.key,R=p;R!==null;){if(R.key===I){if(I=y.type,I===Pa){if(R.tag===7){n(_,R.sibling),p=i(R,y.props.children),p.return=_,_=p;break e}}else if(R.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Wi&&M1(I)===R.type){n(_,R.sibling),p=i(R,y.props),p.ref=cu(_,R,y),p.return=_,_=p;break e}n(_,R);break}else e(_,R);R=R.sibling}y.type===Pa?(p=go(y.props.children,_.mode,w,y.key),p.return=_,_=p):(w=sf(y.type,y.key,y.props,null,_.mode,w),w.ref=cu(_,p,y),w.return=_,_=w)}return o(_);case ka:e:{for(R=y.key;p!==null;){if(p.key===R)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(_,p.sibling),p=i(p,y.children||[]),p.return=_,_=p;break e}else{n(_,p);break}else e(_,p);p=p.sibling}p=M_(y,_.mode,w),p.return=_,_=p}return o(_);case Wi:return R=y._init,v(_,p,R(y._payload),w)}if(xu(y))return m(_,p,y,w);if(su(y))return g(_,p,y,w);Ed(_,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(n(_,p.sibling),p=i(p,y),p.return=_,_=p):(n(_,p),p=O_(y,_.mode,w),p.return=_,_=p),o(_)):n(_,p)}return v}var hl=oA(!0),aA=oA(!1),vh={},Ur=Ms(vh),Ic=Ms(vh),Sc=Ms(vh);function ao(t){if(t===vh)throw Error(A(174));return t}function _w(t,e){switch(be(Sc,e),be(Ic,t),be(Ur,vh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Dy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Dy(e,t)}Le(Ur),be(Ur,e)}function dl(){Le(Ur),Le(Ic),Le(Sc)}function lA(t){ao(Sc.current);var e=ao(Ur.current),n=Dy(e,t.type);e!==n&&(be(Ic,t),be(Ur,n))}function yw(t){Ic.current===t&&(Le(Ur),Le(Ic))}var qe=Ms(0);function zf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var P_=[];function vw(){for(var t=0;t<P_.length;t++)P_[t]._workInProgressVersionPrimary=null;P_.length=0}var Zd=bi.ReactCurrentDispatcher,A_=bi.ReactCurrentBatchConfig,Ro=0,Ye=null,vt=null,St=null,Wf=!1,Yu=!1,Cc=0,bF=0;function zt(){throw Error(A(321))}function ww(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vr(t[n],e[n]))return!1;return!0}function Ew(t,e,n,r,i,s){if(Ro=s,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zd.current=t===null||t.memoizedState===null?MF:LF,t=n(r,i),Yu){s=0;do{if(Yu=!1,Cc=0,25<=s)throw Error(A(301));s+=1,St=vt=null,e.updateQueue=null,Zd.current=VF,t=n(r,i)}while(Yu)}if(Zd.current=Hf,e=vt!==null&&vt.next!==null,Ro=0,St=vt=Ye=null,Wf=!1,e)throw Error(A(300));return t}function Tw(){var t=Cc!==0;return Cc=0,t}function kr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Ye.memoizedState=St=t:St=St.next=t,St}function tr(){if(vt===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var e=St===null?Ye.memoizedState:St.next;if(e!==null)St=e,vt=t;else{if(t===null)throw Error(A(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},St===null?Ye.memoizedState=St=t:St=St.next=t}return St}function Rc(t,e){return typeof e=="function"?e(t):e}function x_(t){var e=tr(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=vt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Ro&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Ye.lanes|=c,ko|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,vr(r,e.memoizedState)||(_n=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ye.lanes|=s,ko|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function b_(t){var e=tr(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);vr(s,e.memoizedState)||(_n=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function uA(){}function cA(t,e){var n=Ye,r=tr(),i=e(),s=!vr(r.memoizedState,i);if(s&&(r.memoizedState=i,_n=!0),r=r.queue,Iw(fA.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||St!==null&&St.memoizedState.tag&1){if(n.flags|=2048,kc(9,dA.bind(null,n,r,i,e),void 0,null),kt===null)throw Error(A(349));Ro&30||hA(n,e,i)}return i}function hA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function dA(t,e,n,r){e.value=n,e.getSnapshot=r,pA(e)&&mA(t)}function fA(t,e,n){return n(function(){pA(e)&&mA(t)})}function pA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vr(t,n)}catch{return!0}}function mA(t){var e=Ti(t,1);e!==null&&gr(e,t,1,-1)}function L1(t){var e=kr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rc,lastRenderedState:t},e.queue=t,t=t.dispatch=OF.bind(null,Ye,t),[e.memoizedState,t]}function kc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function gA(){return tr().memoizedState}function ef(t,e,n,r){var i=kr();Ye.flags|=t,i.memoizedState=kc(1|e,n,void 0,r===void 0?null:r)}function sm(t,e,n,r){var i=tr();r=r===void 0?null:r;var s=void 0;if(vt!==null){var o=vt.memoizedState;if(s=o.destroy,r!==null&&ww(r,o.deps)){i.memoizedState=kc(e,n,s,r);return}}Ye.flags|=t,i.memoizedState=kc(1|e,n,s,r)}function V1(t,e){return ef(8390656,8,t,e)}function Iw(t,e){return sm(2048,8,t,e)}function _A(t,e){return sm(4,2,t,e)}function yA(t,e){return sm(4,4,t,e)}function vA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wA(t,e,n){return n=n!=null?n.concat([t]):null,sm(4,4,vA.bind(null,e,t),n)}function Sw(){}function EA(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ww(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function TA(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ww(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function IA(t,e,n){return Ro&21?(vr(n,e)||(n=RP(),Ye.lanes|=n,ko|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_n=!0),t.memoizedState=n)}function DF(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=A_.transition;A_.transition={};try{t(!1),e()}finally{Te=n,A_.transition=r}}function SA(){return tr().memoizedState}function NF(t,e,n){var r=fs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},CA(t))RA(e,n);else if(n=nA(t,e,n,r),n!==null){var i=ln();gr(n,t,r,i),kA(n,e,r)}}function OF(t,e,n){var r=fs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(CA(t))RA(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,vr(a,o)){var l=e.interleaved;l===null?(i.next=i,mw(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=nA(t,e,i,r),n!==null&&(i=ln(),gr(n,t,r,i),kA(n,e,r))}}function CA(t){var e=t.alternate;return t===Ye||e!==null&&e===Ye}function RA(t,e){Yu=Wf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tw(t,n)}}var Hf={readContext:er,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},MF={readContext:er,useCallback:function(t,e){return kr().memoizedState=[t,e===void 0?null:e],t},useContext:er,useEffect:V1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ef(4194308,4,vA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ef(4194308,4,t,e)},useInsertionEffect:function(t,e){return ef(4,2,t,e)},useMemo:function(t,e){var n=kr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=kr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=NF.bind(null,Ye,t),[r.memoizedState,t]},useRef:function(t){var e=kr();return t={current:t},e.memoizedState=t},useState:L1,useDebugValue:Sw,useDeferredValue:function(t){return kr().memoizedState=t},useTransition:function(){var t=L1(!1),e=t[0];return t=DF.bind(null,t[1]),kr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ye,i=kr();if(je){if(n===void 0)throw Error(A(407));n=n()}else{if(n=e(),kt===null)throw Error(A(349));Ro&30||hA(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,V1(fA.bind(null,r,s,t),[t]),r.flags|=2048,kc(9,dA.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=kr(),e=kt.identifierPrefix;if(je){var n=li,r=ai;n=(r&~(1<<32-mr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Cc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bF++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},LF={readContext:er,useCallback:EA,useContext:er,useEffect:Iw,useImperativeHandle:wA,useInsertionEffect:_A,useLayoutEffect:yA,useMemo:TA,useReducer:x_,useRef:gA,useState:function(){return x_(Rc)},useDebugValue:Sw,useDeferredValue:function(t){var e=tr();return IA(e,vt.memoizedState,t)},useTransition:function(){var t=x_(Rc)[0],e=tr().memoizedState;return[t,e]},useMutableSource:uA,useSyncExternalStore:cA,useId:SA,unstable_isNewReconciler:!1},VF={readContext:er,useCallback:EA,useContext:er,useEffect:Iw,useImperativeHandle:wA,useInsertionEffect:_A,useLayoutEffect:yA,useMemo:TA,useReducer:b_,useRef:gA,useState:function(){return b_(Rc)},useDebugValue:Sw,useDeferredValue:function(t){var e=tr();return vt===null?e.memoizedState=t:IA(e,vt.memoizedState,t)},useTransition:function(){var t=b_(Rc)[0],e=tr().memoizedState;return[t,e]},useMutableSource:uA,useSyncExternalStore:cA,useId:SA,unstable_isNewReconciler:!1};function fl(t,e){try{var n="",r=e;do n+=hV(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function D_(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var FF=typeof WeakMap=="function"?WeakMap:Map;function PA(t,e,n){n=gi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Gf||(Gf=!0,hv=r),tv(t,e)},n}function AA(t,e,n){n=gi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){tv(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){tv(t,e),typeof r!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function F1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new FF;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=JF.bind(null,t,e,n),e.then(t,t))}function $1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function U1(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gi(-1,1),e.tag=2,hs(n,e,1))),n.lanes|=1),t)}var $F=bi.ReactCurrentOwner,_n=!1;function rn(t,e,n,r){e.child=t===null?aA(e,null,n,r):hl(e,t.child,n,r)}function B1(t,e,n,r,i){n=n.render;var s=e.ref;return qa(e,i),r=Ew(t,e,n,r,s,i),n=Tw(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ii(t,e,i)):(je&&n&&uw(e),e.flags|=1,rn(t,e,r,i),e.child)}function j1(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Dw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,xA(t,e,s,r,i)):(t=sf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:vc,n(o,r)&&t.ref===e.ref)return Ii(t,e,i)}return e.flags|=1,t=ps(s,r),t.ref=e.ref,t.return=e,e.child=t}function xA(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(vc(s,r)&&t.ref===e.ref)if(_n=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(_n=!0);else return e.lanes=t.lanes,Ii(t,e,i)}return nv(t,e,n,r,i)}function bA(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Fa,kn),kn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(Fa,kn),kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,be(Fa,kn),kn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,be(Fa,kn),kn|=r;return rn(t,e,i,n),e.child}function DA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function nv(t,e,n,r,i){var s=Tn(n)?So:en.current;return s=ul(e,s),qa(e,i),n=Ew(t,e,n,r,s,i),r=Tw(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ii(t,e,i)):(je&&r&&uw(e),e.flags|=1,rn(t,e,n,i),e.child)}function z1(t,e,n,r,i){if(Tn(n)){var s=!0;Vf(e)}else s=!1;if(qa(e,i),e.stateNode===null)tf(t,e),sA(e,n,r),ev(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=er(u):(u=Tn(n)?So:en.current,u=ul(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&O1(e,o,r,u),Hi=!1;var d=e.memoizedState;o.state=d,jf(e,r,o,i),l=e.memoizedState,a!==r||d!==l||En.current||Hi?(typeof c=="function"&&(Zy(e,n,c,r),l=e.memoizedState),(a=Hi||N1(e,n,a,r,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,rA(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ur(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=er(l):(l=Tn(n)?So:en.current,l=ul(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&O1(e,o,r,l),Hi=!1,d=e.memoizedState,o.state=d,jf(e,r,o,i);var m=e.memoizedState;a!==h||d!==m||En.current||Hi?(typeof f=="function"&&(Zy(e,n,f,r),m=e.memoizedState),(u=Hi||N1(e,n,u,r,d,m,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return rv(t,e,n,r,s,i)}function rv(t,e,n,r,i,s){DA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&P1(e,n,!1),Ii(t,e,s);r=e.stateNode,$F.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=hl(e,t.child,null,s),e.child=hl(e,null,a,s)):rn(t,e,a,s),e.memoizedState=r.state,i&&P1(e,n,!0),e.child}function NA(t){var e=t.stateNode;e.pendingContext?k1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&k1(t,e.context,!1),_w(t,e.containerInfo)}function W1(t,e,n,r,i){return cl(),hw(i),e.flags|=256,rn(t,e,n,r),e.child}var iv={dehydrated:null,treeContext:null,retryLane:0};function sv(t){return{baseLanes:t,cachePool:null,transitions:null}}function OA(t,e,n){var r=e.pendingProps,i=qe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),be(qe,i&1),t===null)return Xy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=lm(o,r,0,null),t=go(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=sv(n),e.memoizedState=iv,t):Cw(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return UF(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ps(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ps(a,s):(s=go(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?sv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=iv,r}return s=t.child,t=s.sibling,r=ps(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Cw(t,e){return e=lm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Td(t,e,n,r){return r!==null&&hw(r),hl(e,t.child,null,n),t=Cw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function UF(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=D_(Error(A(422))),Td(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=lm({mode:"visible",children:r.children},i,0,null),s=go(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&hl(e,t.child,null,o),e.child.memoizedState=sv(o),e.memoizedState=iv,s);if(!(e.mode&1))return Td(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(A(419)),r=D_(s,r,void 0),Td(t,e,o,r)}if(a=(o&t.childLanes)!==0,_n||a){if(r=kt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ti(t,i),gr(r,t,i,-1))}return bw(),r=D_(Error(A(421))),Td(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=ZF.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,An=cs(i.nextSibling),Dn=e,je=!0,hr=null,t!==null&&(jn[zn++]=ai,jn[zn++]=li,jn[zn++]=Co,ai=t.id,li=t.overflow,Co=e),e=Cw(e,r.children),e.flags|=4096,e)}function H1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Jy(t.return,e,n)}function N_(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function MA(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(rn(t,e,r.children,n),r=qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&H1(t,n,e);else if(t.tag===19)H1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(be(qe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&zf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),N_(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&zf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}N_(e,!0,n,null,s);break;case"together":N_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ii(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ko|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(A(153));if(e.child!==null){for(t=e.child,n=ps(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ps(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function BF(t,e,n){switch(e.tag){case 3:NA(e),cl();break;case 5:lA(e);break;case 1:Tn(e.type)&&Vf(e);break;case 4:_w(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;be(Uf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(be(qe,qe.current&1),e.flags|=128,null):n&e.child.childLanes?OA(t,e,n):(be(qe,qe.current&1),t=Ii(t,e,n),t!==null?t.sibling:null);be(qe,qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return MA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),be(qe,qe.current),r)break;return null;case 22:case 23:return e.lanes=0,bA(t,e,n)}return Ii(t,e,n)}var LA,ov,VA,FA;LA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ov=function(){};VA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ao(Ur.current);var s=null;switch(n){case"input":i=Py(t,i),r=Py(t,r),s=[];break;case"select":i=Qe({},i,{value:void 0}),r=Qe({},r,{value:void 0}),s=[];break;case"textarea":i=by(t,i),r=by(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Mf)}Ny(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(dc.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(dc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ne("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};FA=function(t,e,n,r){n!==r&&(e.flags|=4)};function hu(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function jF(t,e,n){var r=e.pendingProps;switch(cw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(e),null;case 1:return Tn(e.type)&&Lf(),Wt(e),null;case 3:return r=e.stateNode,dl(),Le(En),Le(en),vw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(wd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hr!==null&&(pv(hr),hr=null))),ov(t,e),Wt(e),null;case 5:yw(e);var i=ao(Sc.current);if(n=e.type,t!==null&&e.stateNode!=null)VA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(A(166));return Wt(e),null}if(t=ao(Ur.current),wd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[xr]=e,r[Tc]=s,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(i=0;i<Du.length;i++)Ne(Du[i],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":e1(r,s),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ne("invalid",r);break;case"textarea":n1(r,s),Ne("invalid",r)}Ny(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&vd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&vd(r.textContent,a,t),i=["children",""+a]):dc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":hd(r),t1(r,s,!0);break;case"textarea":hd(r),r1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Mf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=hP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[xr]=e,t[Tc]=r,LA(t,e,!1,!1),e.stateNode=t;e:{switch(o=Oy(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),i=r;break;case"iframe":case"object":case"embed":Ne("load",t),i=r;break;case"video":case"audio":for(i=0;i<Du.length;i++)Ne(Du[i],t);i=r;break;case"source":Ne("error",t),i=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),i=r;break;case"details":Ne("toggle",t),i=r;break;case"input":e1(t,r),i=Py(t,r),Ne("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Qe({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":n1(t,r),i=by(t,r),Ne("invalid",t);break;default:i=r}Ny(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?pP(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&dP(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&fc(t,l):typeof l=="number"&&fc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(dc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ne("scroll",t):l!=null&&K0(t,s,l,o))}switch(n){case"input":hd(t),t1(t,r,!1);break;case"textarea":hd(t),r1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ts(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ja(t,!!r.multiple,s,!1):r.defaultValue!=null&&ja(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Mf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wt(e),null;case 6:if(t&&e.stateNode!=null)FA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(A(166));if(n=ao(Sc.current),ao(Ur.current),wd(e)){if(r=e.stateNode,n=e.memoizedProps,r[xr]=e,(s=r.nodeValue!==n)&&(t=Dn,t!==null))switch(t.tag){case 3:vd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xr]=e,e.stateNode=r}return Wt(e),null;case 13:if(Le(qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&An!==null&&e.mode&1&&!(e.flags&128))tA(),cl(),e.flags|=98560,s=!1;else if(s=wd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(A(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(A(317));s[xr]=e}else cl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wt(e),s=!1}else hr!==null&&(pv(hr),hr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||qe.current&1?wt===0&&(wt=3):bw())),e.updateQueue!==null&&(e.flags|=4),Wt(e),null);case 4:return dl(),ov(t,e),t===null&&wc(e.stateNode.containerInfo),Wt(e),null;case 10:return pw(e.type._context),Wt(e),null;case 17:return Tn(e.type)&&Lf(),Wt(e),null;case 19:if(Le(qe),s=e.memoizedState,s===null)return Wt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)hu(s,!1);else{if(wt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=zf(t),o!==null){for(e.flags|=128,hu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(qe,qe.current&1|2),e.child}t=t.sibling}s.tail!==null&&at()>pl&&(e.flags|=128,r=!0,hu(s,!1),e.lanes=4194304)}else{if(!r)if(t=zf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),hu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!je)return Wt(e),null}else 2*at()-s.renderingStartTime>pl&&n!==1073741824&&(e.flags|=128,r=!0,hu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=at(),e.sibling=null,n=qe.current,be(qe,r?n&1|2:n&1),e):(Wt(e),null);case 22:case 23:return xw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kn&1073741824&&(Wt(e),e.subtreeFlags&6&&(e.flags|=8192)):Wt(e),null;case 24:return null;case 25:return null}throw Error(A(156,e.tag))}function zF(t,e){switch(cw(e),e.tag){case 1:return Tn(e.type)&&Lf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return dl(),Le(En),Le(en),vw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yw(e),null;case 13:if(Le(qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(A(340));cl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le(qe),null;case 4:return dl(),null;case 10:return pw(e.type._context),null;case 22:case 23:return xw(),null;case 24:return null;default:return null}}var Id=!1,Gt=!1,WF=typeof WeakSet=="function"?WeakSet:Set,U=null;function Va(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ze(t,e,r)}else n.current=null}function av(t,e,n){try{n()}catch(r){Ze(t,e,r)}}var q1=!1;function HF(t,e){if(Wy=Df,t=jP(),lw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var f;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++u===i&&(a=o),d===s&&++c===r&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hy={focusedElem:t,selectionRange:n},Df=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,_=e.stateNode,p=_.getSnapshotBeforeUpdate(e.elementType===e.type?g:ur(e.type,g),v);_.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(w){Ze(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return m=q1,q1=!1,m}function Ku(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&av(e,n,s)}i=i.next}while(i!==r)}}function om(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function lv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $A(t){var e=t.alternate;e!==null&&(t.alternate=null,$A(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xr],delete e[Tc],delete e[Yy],delete e[kF],delete e[PF])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function UA(t){return t.tag===5||t.tag===3||t.tag===4}function G1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||UA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Mf));else if(r!==4&&(t=t.child,t!==null))for(uv(t,e,n),t=t.sibling;t!==null;)uv(t,e,n),t=t.sibling}function cv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(cv(t,e,n),t=t.sibling;t!==null;)cv(t,e,n),t=t.sibling}var Ot=null,cr=!1;function $i(t,e,n){for(n=n.child;n!==null;)BA(t,e,n),n=n.sibling}function BA(t,e,n){if($r&&typeof $r.onCommitFiberUnmount=="function")try{$r.onCommitFiberUnmount(Jp,n)}catch{}switch(n.tag){case 5:Gt||Va(n,e);case 6:var r=Ot,i=cr;Ot=null,$i(t,e,n),Ot=r,cr=i,Ot!==null&&(cr?(t=Ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ot.removeChild(n.stateNode));break;case 18:Ot!==null&&(cr?(t=Ot,n=n.stateNode,t.nodeType===8?R_(t.parentNode,n):t.nodeType===1&&R_(t,n),_c(t)):R_(Ot,n.stateNode));break;case 4:r=Ot,i=cr,Ot=n.stateNode.containerInfo,cr=!0,$i(t,e,n),Ot=r,cr=i;break;case 0:case 11:case 14:case 15:if(!Gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&av(n,e,o),i=i.next}while(i!==r)}$i(t,e,n);break;case 1:if(!Gt&&(Va(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ze(n,e,a)}$i(t,e,n);break;case 21:$i(t,e,n);break;case 22:n.mode&1?(Gt=(r=Gt)||n.memoizedState!==null,$i(t,e,n),Gt=r):$i(t,e,n);break;default:$i(t,e,n)}}function Y1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new WF),e.forEach(function(r){var i=e$.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function lr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ot=a.stateNode,cr=!1;break e;case 3:Ot=a.stateNode.containerInfo,cr=!0;break e;case 4:Ot=a.stateNode.containerInfo,cr=!0;break e}a=a.return}if(Ot===null)throw Error(A(160));BA(s,o,i),Ot=null,cr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ze(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jA(e,t),e=e.sibling}function jA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(lr(e,t),Rr(t),r&4){try{Ku(3,t,t.return),om(3,t)}catch(g){Ze(t,t.return,g)}try{Ku(5,t,t.return)}catch(g){Ze(t,t.return,g)}}break;case 1:lr(e,t),Rr(t),r&512&&n!==null&&Va(n,n.return);break;case 5:if(lr(e,t),Rr(t),r&512&&n!==null&&Va(n,n.return),t.flags&32){var i=t.stateNode;try{fc(i,"")}catch(g){Ze(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&uP(i,s),Oy(a,o);var u=Oy(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?pP(i,h):c==="dangerouslySetInnerHTML"?dP(i,h):c==="children"?fc(i,h):K0(i,c,h,u)}switch(a){case"input":Ay(i,s);break;case"textarea":cP(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?ja(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?ja(i,!!s.multiple,s.defaultValue,!0):ja(i,!!s.multiple,s.multiple?[]:"",!1))}i[Tc]=s}catch(g){Ze(t,t.return,g)}}break;case 6:if(lr(e,t),Rr(t),r&4){if(t.stateNode===null)throw Error(A(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){Ze(t,t.return,g)}}break;case 3:if(lr(e,t),Rr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_c(e.containerInfo)}catch(g){Ze(t,t.return,g)}break;case 4:lr(e,t),Rr(t);break;case 13:lr(e,t),Rr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Pw=at())),r&4&&Y1(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Gt=(u=Gt)||c,lr(e,t),Gt=u):lr(e,t),Rr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(U=t,c=t.child;c!==null;){for(h=U=c;U!==null;){switch(d=U,f=d.child,d.tag){case 0:case 11:case 14:case 15:Ku(4,d,d.return);break;case 1:Va(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Ze(r,n,g)}}break;case 5:Va(d,d.return);break;case 22:if(d.memoizedState!==null){Q1(h);continue}}f!==null?(f.return=d,U=f):Q1(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=fP("display",o))}catch(g){Ze(t,t.return,g)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ze(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:lr(e,t),Rr(t),r&4&&Y1(t);break;case 21:break;default:lr(e,t),Rr(t)}}function Rr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(UA(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(fc(i,""),r.flags&=-33);var s=G1(t);cv(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=G1(t);uv(t,a,o);break;default:throw Error(A(161))}}catch(l){Ze(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qF(t,e,n){U=t,zA(t)}function zA(t,e,n){for(var r=(t.mode&1)!==0;U!==null;){var i=U,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Id;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Gt;a=Id;var u=Gt;if(Id=o,(Gt=l)&&!u)for(U=i;U!==null;)o=U,l=o.child,o.tag===22&&o.memoizedState!==null?X1(i):l!==null?(l.return=o,U=l):X1(i);for(;s!==null;)U=s,zA(s),s=s.sibling;U=i,Id=a,Gt=u}K1(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,U=s):K1(t)}}function K1(t){for(;U!==null;){var e=U;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Gt||om(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Gt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ur(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&D1(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}D1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&_c(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Gt||e.flags&512&&lv(e)}catch(d){Ze(e,e.return,d)}}if(e===t){U=null;break}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}}function Q1(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var n=e.sibling;if(n!==null){n.return=e.return,U=n;break}U=e.return}}function X1(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{om(4,e)}catch(l){Ze(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ze(e,i,l)}}var s=e.return;try{lv(e)}catch(l){Ze(e,s,l)}break;case 5:var o=e.return;try{lv(e)}catch(l){Ze(e,o,l)}}}catch(l){Ze(e,e.return,l)}if(e===t){U=null;break}var a=e.sibling;if(a!==null){a.return=e.return,U=a;break}U=e.return}}var GF=Math.ceil,qf=bi.ReactCurrentDispatcher,Rw=bi.ReactCurrentOwner,Qn=bi.ReactCurrentBatchConfig,de=0,kt=null,gt=null,Ft=0,kn=0,Fa=Ms(0),wt=0,Pc=null,ko=0,am=0,kw=0,Qu=null,gn=null,Pw=0,pl=1/0,ni=null,Gf=!1,hv=null,ds=null,Sd=!1,ns=null,Yf=0,Xu=0,dv=null,nf=-1,rf=0;function ln(){return de&6?at():nf!==-1?nf:nf=at()}function fs(t){return t.mode&1?de&2&&Ft!==0?Ft&-Ft:xF.transition!==null?(rf===0&&(rf=RP()),rf):(t=Te,t!==0||(t=window.event,t=t===void 0?16:NP(t.type)),t):1}function gr(t,e,n,r){if(50<Xu)throw Xu=0,dv=null,Error(A(185));gh(t,n,r),(!(de&2)||t!==kt)&&(t===kt&&(!(de&2)&&(am|=n),wt===4&&Gi(t,Ft)),In(t,r),n===1&&de===0&&!(e.mode&1)&&(pl=at()+500,rm&&Ls()))}function In(t,e){var n=t.callbackNode;xV(t,e);var r=bf(t,t===kt?Ft:0);if(r===0)n!==null&&o1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&o1(n),e===1)t.tag===0?AF(J1.bind(null,t)):JP(J1.bind(null,t)),CF(function(){!(de&6)&&Ls()}),n=null;else{switch(kP(r)){case 1:n=ew;break;case 4:n=SP;break;case 16:n=xf;break;case 536870912:n=CP;break;default:n=xf}n=XA(n,WA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function WA(t,e){if(nf=-1,rf=0,de&6)throw Error(A(327));var n=t.callbackNode;if(Ga()&&t.callbackNode!==n)return null;var r=bf(t,t===kt?Ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Kf(t,r);else{e=r;var i=de;de|=2;var s=qA();(kt!==t||Ft!==e)&&(ni=null,pl=at()+500,mo(t,e));do try{QF();break}catch(a){HA(t,a)}while(!0);fw(),qf.current=s,de=i,gt!==null?e=0:(kt=null,Ft=0,e=wt)}if(e!==0){if(e===2&&(i=$y(t),i!==0&&(r=i,e=fv(t,i))),e===1)throw n=Pc,mo(t,0),Gi(t,r),In(t,at()),n;if(e===6)Gi(t,r);else{if(i=t.current.alternate,!(r&30)&&!YF(i)&&(e=Kf(t,r),e===2&&(s=$y(t),s!==0&&(r=s,e=fv(t,s))),e===1))throw n=Pc,mo(t,0),Gi(t,r),In(t,at()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(A(345));case 2:Ks(t,gn,ni);break;case 3:if(Gi(t,r),(r&130023424)===r&&(e=Pw+500-at(),10<e)){if(bf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ln(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Gy(Ks.bind(null,t,gn,ni),e);break}Ks(t,gn,ni);break;case 4:if(Gi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-mr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=at()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*GF(r/1960))-r,10<r){t.timeoutHandle=Gy(Ks.bind(null,t,gn,ni),r);break}Ks(t,gn,ni);break;case 5:Ks(t,gn,ni);break;default:throw Error(A(329))}}}return In(t,at()),t.callbackNode===n?WA.bind(null,t):null}function fv(t,e){var n=Qu;return t.current.memoizedState.isDehydrated&&(mo(t,e).flags|=256),t=Kf(t,e),t!==2&&(e=gn,gn=n,e!==null&&pv(e)),t}function pv(t){gn===null?gn=t:gn.push.apply(gn,t)}function YF(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!vr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gi(t,e){for(e&=~kw,e&=~am,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mr(e),r=1<<n;t[n]=-1,e&=~r}}function J1(t){if(de&6)throw Error(A(327));Ga();var e=bf(t,0);if(!(e&1))return In(t,at()),null;var n=Kf(t,e);if(t.tag!==0&&n===2){var r=$y(t);r!==0&&(e=r,n=fv(t,r))}if(n===1)throw n=Pc,mo(t,0),Gi(t,e),In(t,at()),n;if(n===6)throw Error(A(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ks(t,gn,ni),In(t,at()),null}function Aw(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(pl=at()+500,rm&&Ls())}}function Po(t){ns!==null&&ns.tag===0&&!(de&6)&&Ga();var e=de;de|=1;var n=Qn.transition,r=Te;try{if(Qn.transition=null,Te=1,t)return t()}finally{Te=r,Qn.transition=n,de=e,!(de&6)&&Ls()}}function xw(){kn=Fa.current,Le(Fa)}function mo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,SF(n)),gt!==null)for(n=gt.return;n!==null;){var r=n;switch(cw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Lf();break;case 3:dl(),Le(En),Le(en),vw();break;case 5:yw(r);break;case 4:dl();break;case 13:Le(qe);break;case 19:Le(qe);break;case 10:pw(r.type._context);break;case 22:case 23:xw()}n=n.return}if(kt=t,gt=t=ps(t.current,null),Ft=kn=e,wt=0,Pc=null,kw=am=ko=0,gn=Qu=null,oo!==null){for(e=0;e<oo.length;e++)if(n=oo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}oo=null}return t}function HA(t,e){do{var n=gt;try{if(fw(),Zd.current=Hf,Wf){for(var r=Ye.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wf=!1}if(Ro=0,St=vt=Ye=null,Yu=!1,Cc=0,Rw.current=null,n===null||n.return===null){wt=1,Pc=e,gt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ft,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=$1(o);if(f!==null){f.flags&=-257,U1(f,o,a,s,e),f.mode&1&&F1(s,u,e),e=f,l=u;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){F1(s,u,e),bw();break e}l=Error(A(426))}}else if(je&&a.mode&1){var v=$1(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),U1(v,o,a,s,e),hw(fl(l,a));break e}}s=l=fl(l,a),wt!==4&&(wt=2),Qu===null?Qu=[s]:Qu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=PA(s,l,e);b1(s,_);break e;case 1:a=l;var p=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ds===null||!ds.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=AA(s,a,e);b1(s,w);break e}}s=s.return}while(s!==null)}YA(n)}catch(I){e=I,gt===n&&n!==null&&(gt=n=n.return);continue}break}while(!0)}function qA(){var t=qf.current;return qf.current=Hf,t===null?Hf:t}function bw(){(wt===0||wt===3||wt===2)&&(wt=4),kt===null||!(ko&268435455)&&!(am&268435455)||Gi(kt,Ft)}function Kf(t,e){var n=de;de|=2;var r=qA();(kt!==t||Ft!==e)&&(ni=null,mo(t,e));do try{KF();break}catch(i){HA(t,i)}while(!0);if(fw(),de=n,qf.current=r,gt!==null)throw Error(A(261));return kt=null,Ft=0,wt}function KF(){for(;gt!==null;)GA(gt)}function QF(){for(;gt!==null&&!EV();)GA(gt)}function GA(t){var e=QA(t.alternate,t,kn);t.memoizedProps=t.pendingProps,e===null?YA(t):gt=e,Rw.current=null}function YA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=zF(n,e),n!==null){n.flags&=32767,gt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wt=6,gt=null;return}}else if(n=jF(n,e,kn),n!==null){gt=n;return}if(e=e.sibling,e!==null){gt=e;return}gt=e=t}while(e!==null);wt===0&&(wt=5)}function Ks(t,e,n){var r=Te,i=Qn.transition;try{Qn.transition=null,Te=1,XF(t,e,n,r)}finally{Qn.transition=i,Te=r}return null}function XF(t,e,n,r){do Ga();while(ns!==null);if(de&6)throw Error(A(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(A(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(bV(t,s),t===kt&&(gt=kt=null,Ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Sd||(Sd=!0,XA(xf,function(){return Ga(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Qn.transition,Qn.transition=null;var o=Te;Te=1;var a=de;de|=4,Rw.current=null,HF(t,n),jA(n,t),_F(Hy),Df=!!Wy,Hy=Wy=null,t.current=n,qF(n),TV(),de=a,Te=o,Qn.transition=s}else t.current=n;if(Sd&&(Sd=!1,ns=t,Yf=i),s=t.pendingLanes,s===0&&(ds=null),CV(n.stateNode),In(t,at()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gf)throw Gf=!1,t=hv,hv=null,t;return Yf&1&&t.tag!==0&&Ga(),s=t.pendingLanes,s&1?t===dv?Xu++:(Xu=0,dv=t):Xu=0,Ls(),null}function Ga(){if(ns!==null){var t=kP(Yf),e=Qn.transition,n=Te;try{if(Qn.transition=null,Te=16>t?16:t,ns===null)var r=!1;else{if(t=ns,ns=null,Yf=0,de&6)throw Error(A(331));var i=de;for(de|=4,U=t.current;U!==null;){var s=U,o=s.child;if(U.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(U=u;U!==null;){var c=U;switch(c.tag){case 0:case 11:case 15:Ku(8,c,s)}var h=c.child;if(h!==null)h.return=c,U=h;else for(;U!==null;){c=U;var d=c.sibling,f=c.return;if($A(c),c===u){U=null;break}if(d!==null){d.return=f,U=d;break}U=f}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}U=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,U=o;else e:for(;U!==null;){if(s=U,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ku(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,U=_;break e}U=s.return}}var p=t.current;for(U=p;U!==null;){o=U;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,U=y;else e:for(o=p;U!==null;){if(a=U,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:om(9,a)}}catch(I){Ze(a,a.return,I)}if(a===o){U=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,U=w;break e}U=a.return}}if(de=i,Ls(),$r&&typeof $r.onPostCommitFiberRoot=="function")try{$r.onPostCommitFiberRoot(Jp,t)}catch{}r=!0}return r}finally{Te=n,Qn.transition=e}}return!1}function Z1(t,e,n){e=fl(n,e),e=PA(t,e,1),t=hs(t,e,1),e=ln(),t!==null&&(gh(t,1,e),In(t,e))}function Ze(t,e,n){if(t.tag===3)Z1(t,t,n);else for(;e!==null;){if(e.tag===3){Z1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ds===null||!ds.has(r))){t=fl(n,t),t=AA(e,t,1),e=hs(e,t,1),t=ln(),e!==null&&(gh(e,1,t),In(e,t));break}}e=e.return}}function JF(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ln(),t.pingedLanes|=t.suspendedLanes&n,kt===t&&(Ft&n)===n&&(wt===4||wt===3&&(Ft&130023424)===Ft&&500>at()-Pw?mo(t,0):kw|=n),In(t,e)}function KA(t,e){e===0&&(t.mode&1?(e=pd,pd<<=1,!(pd&130023424)&&(pd=4194304)):e=1);var n=ln();t=Ti(t,e),t!==null&&(gh(t,e,n),In(t,n))}function ZF(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),KA(t,n)}function e$(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(e),KA(t,n)}var QA;QA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||En.current)_n=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _n=!1,BF(t,e,n);_n=!!(t.flags&131072)}else _n=!1,je&&e.flags&1048576&&ZP(e,$f,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;tf(t,e),t=e.pendingProps;var i=ul(e,en.current);qa(e,n),i=Ew(null,e,r,t,i,n);var s=Tw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tn(r)?(s=!0,Vf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,gw(e),i.updater=im,e.stateNode=i,i._reactInternals=e,ev(e,r,t,n),e=rv(null,e,r,!0,s,n)):(e.tag=0,je&&s&&uw(e),rn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(tf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=n$(r),t=ur(r,t),i){case 0:e=nv(null,e,r,t,n);break e;case 1:e=z1(null,e,r,t,n);break e;case 11:e=B1(null,e,r,t,n);break e;case 14:e=j1(null,e,r,ur(r.type,t),n);break e}throw Error(A(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ur(r,i),nv(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ur(r,i),z1(t,e,r,i,n);case 3:e:{if(NA(e),t===null)throw Error(A(387));r=e.pendingProps,s=e.memoizedState,i=s.element,rA(t,e),jf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=fl(Error(A(423)),e),e=W1(t,e,r,n,i);break e}else if(r!==i){i=fl(Error(A(424)),e),e=W1(t,e,r,n,i);break e}else for(An=cs(e.stateNode.containerInfo.firstChild),Dn=e,je=!0,hr=null,n=aA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cl(),r===i){e=Ii(t,e,n);break e}rn(t,e,r,n)}e=e.child}return e;case 5:return lA(e),t===null&&Xy(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,qy(r,i)?o=null:s!==null&&qy(r,s)&&(e.flags|=32),DA(t,e),rn(t,e,o,n),e.child;case 6:return t===null&&Xy(e),null;case 13:return OA(t,e,n);case 4:return _w(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=hl(e,null,r,n):rn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ur(r,i),B1(t,e,r,i,n);case 7:return rn(t,e,e.pendingProps,n),e.child;case 8:return rn(t,e,e.pendingProps.children,n),e.child;case 12:return rn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,be(Uf,r._currentValue),r._currentValue=o,s!==null)if(vr(s.value,o)){if(s.children===i.children&&!En.current){e=Ii(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=gi(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Jy(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(A(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Jy(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}rn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,qa(e,n),i=er(i),r=r(i),e.flags|=1,rn(t,e,r,n),e.child;case 14:return r=e.type,i=ur(r,e.pendingProps),i=ur(r.type,i),j1(t,e,r,i,n);case 15:return xA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ur(r,i),tf(t,e),e.tag=1,Tn(r)?(t=!0,Vf(e)):t=!1,qa(e,n),sA(e,r,i),ev(e,r,i,n),rv(null,e,r,!0,t,n);case 19:return MA(t,e,n);case 22:return bA(t,e,n)}throw Error(A(156,e.tag))};function XA(t,e){return IP(t,e)}function t$(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(t,e,n,r){return new t$(t,e,n,r)}function Dw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function n$(t){if(typeof t=="function")return Dw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===X0)return 11;if(t===J0)return 14}return 2}function ps(t,e){var n=t.alternate;return n===null?(n=Gn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function sf(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Dw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Pa:return go(n.children,i,s,e);case Q0:o=8,i|=8;break;case Sy:return t=Gn(12,n,e,i|2),t.elementType=Sy,t.lanes=s,t;case Cy:return t=Gn(13,n,e,i),t.elementType=Cy,t.lanes=s,t;case Ry:return t=Gn(19,n,e,i),t.elementType=Ry,t.lanes=s,t;case oP:return lm(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case iP:o=10;break e;case sP:o=9;break e;case X0:o=11;break e;case J0:o=14;break e;case Wi:o=16,r=null;break e}throw Error(A(130,t==null?t:typeof t,""))}return e=Gn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function go(t,e,n,r){return t=Gn(7,t,r,e),t.lanes=n,t}function lm(t,e,n,r){return t=Gn(22,t,r,e),t.elementType=oP,t.lanes=n,t.stateNode={isHidden:!1},t}function O_(t,e,n){return t=Gn(6,t,null,e),t.lanes=n,t}function M_(t,e,n){return e=Gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function r$(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=m_(0),this.expirationTimes=m_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=m_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nw(t,e,n,r,i,s,o,a,l){return t=new r$(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Gn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gw(s),t}function i$(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ka,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function JA(t){if(!t)return Is;t=t._reactInternals;e:{if(Ko(t)!==t||t.tag!==1)throw Error(A(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(A(171))}if(t.tag===1){var n=t.type;if(Tn(n))return XP(t,n,e)}return e}function ZA(t,e,n,r,i,s,o,a,l){return t=Nw(n,r,!0,t,i,s,o,a,l),t.context=JA(null),n=t.current,r=ln(),i=fs(n),s=gi(r,i),s.callback=e??null,hs(n,s,i),t.current.lanes=i,gh(t,i,r),In(t,r),t}function um(t,e,n,r){var i=e.current,s=ln(),o=fs(i);return n=JA(n),e.context===null?e.context=n:e.pendingContext=n,e=gi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hs(i,e,o),t!==null&&(gr(t,i,o,s),Jd(t,i,o)),o}function Qf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function eS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ow(t,e){eS(t,e),(t=t.alternate)&&eS(t,e)}function s$(){return null}var ex=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mw(t){this._internalRoot=t}cm.prototype.render=Mw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(A(409));um(t,e,null,null)};cm.prototype.unmount=Mw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Po(function(){um(null,t,null,null)}),e[Ei]=null}};function cm(t){this._internalRoot=t}cm.prototype.unstable_scheduleHydration=function(t){if(t){var e=xP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qi.length&&e!==0&&e<qi[n].priority;n++);qi.splice(n,0,t),n===0&&DP(t)}};function Lw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function tS(){}function o$(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Qf(o);s.call(u)}}var o=ZA(e,r,t,0,null,!1,!1,"",tS);return t._reactRootContainer=o,t[Ei]=o.current,wc(t.nodeType===8?t.parentNode:t),Po(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Qf(l);a.call(u)}}var l=Nw(t,0,!1,null,null,!1,!1,"",tS);return t._reactRootContainer=l,t[Ei]=l.current,wc(t.nodeType===8?t.parentNode:t),Po(function(){um(e,l,n,r)}),l}function dm(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Qf(o);a.call(l)}}um(e,o,t,i)}else o=o$(n,e,t,i,r);return Qf(o)}PP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bu(e.pendingLanes);n!==0&&(tw(e,n|1),In(e,at()),!(de&6)&&(pl=at()+500,Ls()))}break;case 13:Po(function(){var r=Ti(t,1);if(r!==null){var i=ln();gr(r,t,1,i)}}),Ow(t,1)}};nw=function(t){if(t.tag===13){var e=Ti(t,134217728);if(e!==null){var n=ln();gr(e,t,134217728,n)}Ow(t,134217728)}};AP=function(t){if(t.tag===13){var e=fs(t),n=Ti(t,e);if(n!==null){var r=ln();gr(n,t,e,r)}Ow(t,e)}};xP=function(){return Te};bP=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};Ly=function(t,e,n){switch(e){case"input":if(Ay(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=nm(r);if(!i)throw Error(A(90));lP(r),Ay(r,i)}}}break;case"textarea":cP(t,n);break;case"select":e=n.value,e!=null&&ja(t,!!n.multiple,e,!1)}};_P=Aw;yP=Po;var a$={usingClientEntryPoint:!1,Events:[yh,Da,nm,mP,gP,Aw]},du={findFiberByHostInstance:so,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},l$={bundleType:du.bundleType,version:du.version,rendererPackageName:du.rendererPackageName,rendererConfig:du.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=EP(t),t===null?null:t.stateNode},findFiberByHostInstance:du.findFiberByHostInstance||s$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cd.isDisabled&&Cd.supportsFiber)try{Jp=Cd.inject(l$),$r=Cd}catch{}}Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a$;Vn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lw(e))throw Error(A(200));return i$(t,e,null,n)};Vn.createRoot=function(t,e){if(!Lw(t))throw Error(A(299));var n=!1,r="",i=ex;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Nw(t,1,!1,null,null,n,!1,r,i),t[Ei]=e.current,wc(t.nodeType===8?t.parentNode:t),new Mw(e)};Vn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(A(188)):(t=Object.keys(t).join(","),Error(A(268,t)));return t=EP(e),t=t===null?null:t.stateNode,t};Vn.flushSync=function(t){return Po(t)};Vn.hydrate=function(t,e,n){if(!hm(e))throw Error(A(200));return dm(null,t,e,!0,n)};Vn.hydrateRoot=function(t,e,n){if(!Lw(t))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=ex;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ZA(e,null,t,1,n??null,i,!1,s,o),t[Ei]=e.current,wc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new cm(e)};Vn.render=function(t,e,n){if(!hm(e))throw Error(A(200));return dm(null,t,e,!1,n)};Vn.unmountComponentAtNode=function(t){if(!hm(t))throw Error(A(40));return t._reactRootContainer?(Po(function(){dm(null,null,t,!1,function(){t._reactRootContainer=null,t[Ei]=null})}),!0):!1};Vn.unstable_batchedUpdates=Aw;Vn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!hm(n))throw Error(A(200));if(t==null||t._reactInternals===void 0)throw Error(A(38));return dm(t,e,n,!1,r)};Vn.version="18.2.0-next-9e3b772b8-20220608";function tx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tx)}catch(t){console.error(t)}}tx(),Zk.exports=Vn;var nx=Zk.exports;const Rd=jk(nx);var nS=nx;Ty.createRoot=nS.createRoot,Ty.hydrateRoot=nS.hydrateRoot;const u$="modulepreload",c$=function(t){return"/"+t},rS={},We=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=c$(o),o in rS)return;rS[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let h=s.length-1;h>=0;h--){const d=s[h];if(d.href===o&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":u$,a||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),a)return new Promise((h,d)=>{c.addEventListener("load",h),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};/**
 * @remix-run/router v1.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ac(){return Ac=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ac.apply(this,arguments)}var rs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(rs||(rs={}));const iS="popstate";function h$(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=Qo(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),mv("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof s=="string"?s:Xf(s))}function r(i,s){fm(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return f$(e,n,r,t)}function _t(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function d$(){return Math.random().toString(36).substr(2,8)}function sS(t,e){return{usr:t.state,key:t.key,idx:e}}function mv(t,e,n,r){return n===void 0&&(n=null),Ac({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Qo(e):e,{state:n,key:e&&e.key||r||d$()})}function Xf(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Qo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function f$(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=rs.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(Ac({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function h(){a=rs.Pop;let v=c(),_=v==null?null:v-u;u=v,l&&l({action:a,location:g.location,delta:_})}function d(v,_){a=rs.Push;let p=mv(g.location,v,_);n&&n(p,v),u=c()+1;let y=sS(p,u),w=g.createHref(p);try{o.pushState(y,"",w)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(w)}s&&l&&l({action:a,location:g.location,delta:1})}function f(v,_){a=rs.Replace;let p=mv(g.location,v,_);n&&n(p,v),u=c();let y=sS(p,u),w=g.createHref(p);o.replaceState(y,"",w),s&&l&&l({action:a,location:g.location,delta:0})}function m(v){let _=i.location.origin!=="null"?i.location.origin:i.location.href,p=typeof v=="string"?v:Xf(v);return _t(_,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,_)}let g={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(iS,h),l=v,()=>{i.removeEventListener(iS,h),l=null}},createHref(v){return e(i,v)},createURL:m,encodeLocation(v){let _=m(v);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:d,replace:f,go(v){return o.go(v)}};return g}var oS;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(oS||(oS={}));function p$(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Qo(e):e,i=Vw(r.pathname||"/",n);if(i==null)return null;let s=rx(t);m$(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=S$(s[a],k$(i));return o}function rx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(_t(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=ms([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(_t(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),rx(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:T$(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of ix(s.path))i(s,o,l)}),e}function ix(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=ix(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function m$(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:I$(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const g$=/^:[\w-]+$/,_$=3,y$=2,v$=1,w$=10,E$=-2,aS=t=>t==="*";function T$(t,e){let n=t.split("/"),r=n.length;return n.some(aS)&&(r+=E$),e&&(r+=y$),n.filter(i=>!aS(i)).reduce((i,s)=>i+(g$.test(s)?_$:s===""?v$:w$),r)}function I$(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function S$(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=C$({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let h=a.route;s.push({params:r,pathname:ms([i,c.pathname]),pathnameBase:D$(ms([i,c.pathnameBase])),route:h}),c.pathnameBase!=="/"&&(i=ms([i,c.pathnameBase]))}return s}function C$(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=R$(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,h)=>{let{paramName:d,isOptional:f}=c;if(d==="*"){let g=a[h]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return f&&!m?u[d]=void 0:u[d]=P$(m||"",d),u},{}),pathname:s,pathnameBase:o,pattern:t}}function R$(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),fm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function k$(t){try{return decodeURI(t)}catch(e){return fm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function P$(t,e){try{return decodeURIComponent(t)}catch(n){return fm(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Vw(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function A$(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Qo(t):t;return{pathname:n?n.startsWith("/")?n:x$(n,e):e,search:N$(r),hash:O$(i)}}function x$(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function L_(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function b$(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function sx(t,e){let n=b$(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ox(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Qo(t):(i=Ac({},t),_t(!i.pathname||!i.pathname.includes("?"),L_("?","pathname","search",i)),_t(!i.pathname||!i.pathname.includes("#"),L_("#","pathname","hash",i)),_t(!i.search||!i.search.includes("#"),L_("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=A$(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const ms=t=>t.join("/").replace(/\/\/+/g,"/"),D$=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),N$=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,O$=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function M$(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ax=["post","put","patch","delete"];new Set(ax);const L$=["get",...ax];new Set(L$);/**
 * React Router v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xc(){return xc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xc.apply(this,arguments)}const Fw=E.createContext(null),V$=E.createContext(null),Xo=E.createContext(null),pm=E.createContext(null),Vs=E.createContext({outlet:null,matches:[],isDataRoute:!1}),lx=E.createContext(null);function F$(t,e){let{relative:n}=e===void 0?{}:e;wh()||_t(!1);let{basename:r,navigator:i}=E.useContext(Xo),{hash:s,pathname:o,search:a}=hx(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ms([r,o])),i.createHref({pathname:l,search:a,hash:s})}function wh(){return E.useContext(pm)!=null}function Eh(){return wh()||_t(!1),E.useContext(pm).location}function ux(t){E.useContext(Xo).static||E.useLayoutEffect(t)}function cx(){let{isDataRoute:t}=E.useContext(Vs);return t?X$():$$()}function $$(){wh()||_t(!1);let t=E.useContext(Fw),{basename:e,future:n,navigator:r}=E.useContext(Xo),{matches:i}=E.useContext(Vs),{pathname:s}=Eh(),o=JSON.stringify(sx(i,n.v7_relativeSplatPath)),a=E.useRef(!1);return ux(()=>{a.current=!0}),E.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=ox(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ms([e,h.pathname])),(c.replace?r.replace:r.push)(h,c.state,c)},[e,r,o,s,t])}function fne(){let{matches:t}=E.useContext(Vs),e=t[t.length-1];return e?e.params:{}}function hx(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=E.useContext(Xo),{matches:i}=E.useContext(Vs),{pathname:s}=Eh(),o=JSON.stringify(sx(i,r.v7_relativeSplatPath));return E.useMemo(()=>ox(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function U$(t,e){return B$(t,e)}function B$(t,e,n,r){wh()||_t(!1);let{navigator:i}=E.useContext(Xo),{matches:s}=E.useContext(Vs),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Eh(),c;if(e){var h;let v=typeof e=="string"?Qo(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||_t(!1),c=v}else c=u;let d=c.pathname||"/",f=l==="/"?d:d.slice(l.length)||"/",m=p$(t,{pathname:f}),g=q$(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:ms([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:ms([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,r);return e&&g?E.createElement(pm.Provider,{value:{location:xc({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:rs.Pop}},g):g}function j$(){let t=Q$(),e=M$(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:i},n):null,s)}const z$=E.createElement(j$,null);class W$ extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?E.createElement(Vs.Provider,{value:this.props.routeContext},E.createElement(lx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function H$(t){let{routeContext:e,match:n,children:r}=t,i=E.useContext(Fw);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(Vs.Provider,{value:e},r)}function q$(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id]));c>=0||_t(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let h=o[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:d,errors:f}=n,m=h.route.loader&&d[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||m){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,h,d)=>{let f,m=!1,g=null,v=null;n&&(f=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||z$,l&&(u<0&&d===0?(J$("route-fallback",!1),m=!0,v=null):u===d&&(m=!0,v=h.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,d+1)),p=()=>{let y;return f?y=g:m?y=v:h.route.Component?y=E.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=c,E.createElement(H$,{match:h,routeContext:{outlet:c,matches:_,isDataRoute:n!=null},children:y})};return n&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?E.createElement(W$,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:p(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):p()},null)}var dx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(dx||{}),Jf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Jf||{});function G$(t){let e=E.useContext(Fw);return e||_t(!1),e}function Y$(t){let e=E.useContext(V$);return e||_t(!1),e}function K$(t){let e=E.useContext(Vs);return e||_t(!1),e}function fx(t){let e=K$(),n=e.matches[e.matches.length-1];return n.route.id||_t(!1),n.route.id}function Q$(){var t;let e=E.useContext(lx),n=Y$(Jf.UseRouteError),r=fx(Jf.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function X$(){let{router:t}=G$(dx.UseNavigateStable),e=fx(Jf.UseNavigateStable),n=E.useRef(!1);return ux(()=>{n.current=!0}),E.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,xc({fromRouteId:e},s)))},[t,e])}const lS={};function J$(t,e,n){!e&&!lS[t]&&(lS[t]=!0)}function Ue(t){_t(!1)}function Z$(t){let{basename:e="/",children:n=null,location:r,navigationType:i=rs.Pop,navigator:s,static:o=!1,future:a}=t;wh()&&_t(!1);let l=e.replace(/^\/*/,"/"),u=E.useMemo(()=>({basename:l,navigator:s,static:o,future:xc({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Qo(r));let{pathname:c="/",search:h="",hash:d="",state:f=null,key:m="default"}=r,g=E.useMemo(()=>{let v=Vw(c,l);return v==null?null:{location:{pathname:v,search:h,hash:d,state:f,key:m},navigationType:i}},[l,c,h,d,f,m,i]);return g==null?null:E.createElement(Xo.Provider,{value:u},E.createElement(pm.Provider,{children:n,value:g}))}function eU(t){let{children:e,location:n}=t;return U$(gv(e),n)}new Promise(()=>{});function gv(t,e){e===void 0&&(e=[]);let n=[];return E.Children.forEach(t,(r,i)=>{if(!E.isValidElement(r))return;let s=[...e,i];if(r.type===E.Fragment){n.push.apply(n,gv(r.props.children,s));return}r.type!==Ue&&_t(!1),!r.props.index||!r.props.children||_t(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=gv(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _v(){return _v=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_v.apply(this,arguments)}function tU(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function nU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function rU(t,e){return t.button===0&&(!e||e==="_self")&&!nU(t)}const iU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],sU="6";try{window.__reactRouterVersion=sU}catch{}const oU="startTransition",uS=Ey[oU];function aU(t){let{basename:e,children:n,future:r,window:i}=t,s=E.useRef();s.current==null&&(s.current=h$({window:i,v5Compat:!0}));let o=s.current,[a,l]=E.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=E.useCallback(h=>{u&&uS?uS(()=>l(h)):l(h)},[l,u]);return E.useLayoutEffect(()=>o.listen(c),[o,c]),E.createElement(Z$,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const lU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pne=E.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,unstable_viewTransition:h}=e,d=tU(e,iU),{basename:f}=E.useContext(Xo),m,g=!1;if(typeof u=="string"&&uU.test(u)&&(m=u,lU))try{let y=new URL(window.location.href),w=u.startsWith("//")?new URL(y.protocol+u):new URL(u),I=Vw(w.pathname,f);w.origin===y.origin&&I!=null?u=I+w.search+w.hash:g=!0}catch{}let v=F$(u,{relative:i}),_=cU(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,unstable_viewTransition:h});function p(y){r&&r(y),y.defaultPrevented||_(y)}return E.createElement("a",_v({},d,{href:m||v,onClick:g||s?r:p,ref:n,target:l}))});var cS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cS||(cS={}));var hS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(hS||(hS={}));function cU(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=cx(),u=Eh(),c=hx(t,{relative:o});return E.useCallback(h=>{if(rU(h,n)){h.preventDefault();let d=r!==void 0?r:Xf(u)===Xf(c);l(t,{replace:d,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,c,r,i,n,t,s,o,a])}function px(t,e){localStorage.setItem(t,JSON.stringify(e))}function yv(t){let e=localStorage.getItem(t);try{return JSON.parse(e)}catch{return null}}/*! js-cookie v3.0.5 | MIT */function kd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var hU={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function vv(t,e){function n(i,s,o){if(!(typeof document>"u")){o=kd({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var l in o)o[l]&&(a+="; "+l,o[l]!==!0&&(a+="="+o[l].split(";")[0]));return document.cookie=i+"="+t.write(s,i)+a}}function r(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],o={},a=0;a<s.length;a++){var l=s[a].split("="),u=l.slice(1).join("=");try{var c=decodeURIComponent(l[0]);if(o[c]=t.read(u,c),i===c)break}catch{}}return i?o[i]:o}}return Object.create({set:n,get:r,remove:function(i,s){n(i,"",kd({},s,{expires:-1}))},withAttributes:function(i){return vv(this.converter,kd({},this.attributes,i))},withConverter:function(i){return vv(kd({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var Ju=vv(hU,{path:"/"}),dS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D=function(t,e){if(!t)throw Fl(e)},Fl=function(t){return new Error("Firebase Database ("+mx.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},dU=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},$w={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(d=64)),r.push(n[c],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(gx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new fU;const d=s<<2|a>>4;if(r.push(d),u!==64){const f=a<<4&240|u>>2;if(r.push(f),h!==64){const m=u<<6&192|h;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _x=function(t){const e=gx(t);return $w.encodeByteArray(e,!0)},Zf=function(t){return _x(t).replace(/\./g,"")},ep=function(t){try{return $w.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(t){return yx(void 0,t)}function yx(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!mU(n)||(t[n]=yx(t[n],e[n]));return t}function mU(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U=()=>gU().__FIREBASE_DEFAULTS__,yU=()=>{if(typeof process>"u"||typeof dS>"u")return;const t=dS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ep(t[1]);return e&&JSON.parse(e)},mm=()=>{try{return _U()||yU()||vU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vx=t=>{var e,n;return(n=(e=mm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},wx=t=>{const e=vx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ex=()=>{var t;return(t=mm())===null||t===void 0?void 0:t.config},Tx=t=>{var e;return(e=mm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Zf(JSON.stringify(n)),Zf(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Uw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function wU(){var t;const e=(t=mm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EU(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Sx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TU(){const t=yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Cx(){return mx.NODE_ADMIN===!0}function Rx(){return!wU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kx(){try{return typeof indexedDB=="object"}catch{return!1}}function IU(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU="FirebaseError";class qr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=SU,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Th.prototype.create)}}class Th{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?CU(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new qr(i,a,r)}}function CU(t,e){return t.replace(RU,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const RU=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(t){return JSON.parse(t)}function Rt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=bc(ep(s[0])||""),n=bc(ep(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},kU=function(t){const e=Px(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},PU=function(t){const e=Px(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ml(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function tp(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function np(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function gl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(fS(s)&&fS(o)){if(!gl(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function fS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Nu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ou(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,c;for(let h=0;h<80;h++){h<40?h<20?(u=a^s&(o^a),c=1518500249):(u=s^o^a,c=1859775393):h<60?(u=s&o|a&(s|o),c=2400959708):(u=s^o^a,c=3395469782);const d=(i<<5|i>>>27)+u+l+c+r[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function xU(t,e){const n=new bU(t,e);return n.subscribe.bind(n)}class bU{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");DU(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=V_),i.error===void 0&&(i.error=V_),i.complete===void 0&&(i.complete=V_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DU(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function V_(){}function Ao(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,D(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},gm=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t){return t&&t._delegate?t._delegate:t}class Si{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new si;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LU(e))try{this.getOrInitializeService({instanceIdentifier:Qs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qs){return this.instances.has(e)}getOptions(e=Qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:MU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qs){return this.component?this.component.multipleInstances?e:Qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function MU(t){return t===Qs?void 0:t}function LU(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OU(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const FU={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},$U=se.INFO,UU={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},BU=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=UU[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _m{constructor(e){this.name=e,this._logLevel=$U,this._logHandler=BU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const jU=(t,e)=>e.some(n=>t instanceof n);let pS,mS;function zU(){return pS||(pS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WU(){return mS||(mS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ax=new WeakMap,wv=new WeakMap,xx=new WeakMap,F_=new WeakMap,Bw=new WeakMap;function HU(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(gs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ax.set(n,t)}).catch(()=>{}),Bw.set(e,t),e}function qU(t){if(wv.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});wv.set(t,e)}let Ev={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function GU(t){Ev=t(Ev)}function YU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($_(this),e,...n);return xx.set(r,e.sort?e.sort():[e]),gs(r)}:WU().includes(t)?function(...e){return t.apply($_(this),e),gs(Ax.get(this))}:function(...e){return gs(t.apply($_(this),e))}}function KU(t){return typeof t=="function"?YU(t):(t instanceof IDBTransaction&&qU(t),jU(t,zU())?new Proxy(t,Ev):t)}function gs(t){if(t instanceof IDBRequest)return HU(t);if(F_.has(t))return F_.get(t);const e=KU(t);return e!==t&&(F_.set(t,e),Bw.set(e,t)),e}const $_=t=>Bw.get(t);function QU(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=gs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(gs(o.result),l.oldVersion,l.newVersion,gs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const XU=["get","getKey","getAll","getAllKeys","count"],JU=["put","add","delete","clear"],U_=new Map;function gS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(U_.get(e))return U_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=JU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||XU.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return U_.set(e,s),s}GU(t=>({...t,get:(e,n,r)=>gS(e,n)||t.get(e,n,r),has:(e,n)=>!!gS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(e4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function e4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tv="@firebase/app",_S="0.9.29";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=new _m("@firebase/app"),t4="@firebase/app-compat",n4="@firebase/analytics-compat",r4="@firebase/analytics",i4="@firebase/app-check-compat",s4="@firebase/app-check",o4="@firebase/auth",a4="@firebase/auth-compat",l4="@firebase/database",u4="@firebase/database-compat",c4="@firebase/functions",h4="@firebase/functions-compat",d4="@firebase/installations",f4="@firebase/installations-compat",p4="@firebase/messaging",m4="@firebase/messaging-compat",g4="@firebase/performance",_4="@firebase/performance-compat",y4="@firebase/remote-config",v4="@firebase/remote-config-compat",w4="@firebase/storage",E4="@firebase/storage-compat",T4="@firebase/firestore",I4="@firebase/firestore-compat",S4="firebase",C4="10.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="[DEFAULT]",R4={[Tv]:"fire-core",[t4]:"fire-core-compat",[r4]:"fire-analytics",[n4]:"fire-analytics-compat",[s4]:"fire-app-check",[i4]:"fire-app-check-compat",[o4]:"fire-auth",[a4]:"fire-auth-compat",[l4]:"fire-rtdb",[u4]:"fire-rtdb-compat",[c4]:"fire-fn",[h4]:"fire-fn-compat",[d4]:"fire-iid",[f4]:"fire-iid-compat",[p4]:"fire-fcm",[m4]:"fire-fcm-compat",[g4]:"fire-perf",[_4]:"fire-perf-compat",[y4]:"fire-rc",[v4]:"fire-rc-compat",[w4]:"fire-gcs",[E4]:"fire-gcs-compat",[T4]:"fire-fst",[I4]:"fire-fst-compat","fire-js":"fire-js",[S4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp=new Map,Sv=new Map;function k4(t,e){try{t.container.addComponent(e)}catch(n){xo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ss(t){const e=t.name;if(Sv.has(e))return xo.debug(`There were multiple attempts to register component ${e}.`),!1;Sv.set(e,t);for(const n of rp.values())k4(n,t);return!0}function Ih(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},_s=new Th("app","Firebase",P4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Si("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=C4;function bx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Iv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw _s.create("bad-app-name",{appName:String(i)});if(n||(n=Ex()),!n)throw _s.create("no-options");const s=rp.get(i);if(s){if(gl(n,s.options)&&gl(r,s.config))return s;throw _s.create("duplicate-app",{appName:i})}const o=new VU(i);for(const l of Sv.values())o.addComponent(l);const a=new A4(n,r,o);return rp.set(i,a),a}function jw(t=Iv){const e=rp.get(t);if(!e&&t===Iv&&Ex())return bx();if(!e)throw _s.create("no-app",{appName:t});return e}function Xn(t,e,n){var r;let i=(r=R4[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xo.warn(a.join(" "));return}Ss(new Si(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="firebase-heartbeat-database",b4=1,Dc="firebase-heartbeat-store";let B_=null;function Dx(){return B_||(B_=QU(x4,b4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Dc)}catch(n){console.warn(n)}}}}).catch(t=>{throw _s.create("idb-open",{originalErrorMessage:t.message})})),B_}async function D4(t){try{const n=(await Dx()).transaction(Dc),r=await n.objectStore(Dc).get(Nx(t));return await n.done,r}catch(e){if(e instanceof qr)xo.warn(e.message);else{const n=_s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xo.warn(n.message)}}}async function yS(t,e){try{const r=(await Dx()).transaction(Dc,"readwrite");await r.objectStore(Dc).put(e,Nx(t)),await r.done}catch(n){if(n instanceof qr)xo.warn(n.message);else{const r=_s.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xo.warn(r.message)}}}function Nx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=1024,O4=30*24*60*60*1e3;class M4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new V4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=vS();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=O4}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vS(),{heartbeatsToSend:r,unsentEntries:i}=L4(this._heartbeatsCache.heartbeats),s=Zf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function vS(){return new Date().toISOString().substring(0,10)}function L4(t,e=N4){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),wS(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),wS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class V4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kx()?IU().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await D4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function wS(t){return Zf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(t){Ss(new Si("platform-logger",e=>new ZU(e),"PRIVATE")),Ss(new Si("heartbeat",e=>new M4(e),"PRIVATE")),Xn(Tv,_S,t),Xn(Tv,_S,"esm2017"),Xn("fire-js","")}F4("");var $4="firebase",U4="10.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn($4,U4,"app");var Cv=function(t,e){return Cv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Cv(t,e)};function mne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Cv(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ES=function(){return ES=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ES.apply(this,arguments)};function zw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function gne(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}function _ne(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function yne(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function Ox(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const B4=Ox,Mx=new Th("auth","Firebase",Ox());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip=new _m("@firebase/auth");function j4(t,...e){ip.logLevel<=se.WARN&&ip.warn(`Auth (${Fs}): ${t}`,...e)}function of(t,...e){ip.logLevel<=se.ERROR&&ip.error(`Auth (${Fs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t,...e){throw Ww(t,...e)}function Br(t,...e){return Ww(t,...e)}function Lx(t,e,n){const r=Object.assign(Object.assign({},B4()),{[e]:n});return new Th("auth","Firebase",r).create(e,{appName:t.name})}function z4(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&nr(t,"argument-error"),Lx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ww(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Mx.create(t,...e)}function G(t,e,...n){if(!t)throw Ww(e,...n)}function ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw of(e),new Error(e)}function Ci(t,e){t||ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function W4(){return TS()==="http:"||TS()==="https:"}function TS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(W4()||EU()||"connection"in navigator)?navigator.onLine:!0}function q4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ci(n>e,"Short delay should be less than long delay!"),this.isMobile=Uw()||Sx()}get(){return H4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(t,e){Ci(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=new Sh(3e4,6e4);function Di(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Yr(t,e,n,r,i={}){return Fx(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=$l(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),Vx.fetch()($x(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function Fx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},G4),e);try{const i=new Q4(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Pd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Pd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Pd(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Lx(t,c,u);nr(t,c)}}catch(i){if(i instanceof qr)throw i;nr(t,"network-request-failed",{message:String(i)})}}async function Ch(t,e,n,r,i={}){const s=await Yr(t,e,n,r,i);return"mfaPendingCredential"in s&&nr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function $x(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Hw(t.config,i):`${t.config.apiScheme}://${i}`}function K4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Q4{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Br(this.auth,"network-request-failed")),Y4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Br(t,e,r);return i.customData._tokenResponse=n,i}function IS(t){return t!==void 0&&t.enterprise!==void 0}class X4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return K4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function J4(t,e){return Yr(t,"GET","/v2/recaptchaConfig",Di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z4(t,e){return Yr(t,"POST","/v1/accounts:delete",e)}async function e5(t,e){return Yr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function t5(t,e=!1){const n=ce(t),r=await n.getIdToken(e),i=qw(r);G(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Zu(j_(i.auth_time)),issuedAtTime:Zu(j_(i.iat)),expirationTime:Zu(j_(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function j_(t){return Number(t)*1e3}function qw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return of("JWT malformed, contained fewer than 3 sections"),null;try{const i=ep(n);return i?JSON.parse(i):(of("Failed to decode base64 JWT payload"),null)}catch(i){return of("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function n5(t){const e=qw(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qr&&r5(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function r5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zu(this.lastLoginAt),this.creationTime=Zu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await _l(t,e5(n,{idToken:r}));G(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?a5(s.providerUserInfo):[],a=o5(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ux(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function s5(t){const e=ce(t);await sp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function o5(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function a5(t){return t.map(e=>{var{providerId:n}=e,r=zw(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l5(t,e){const n=await Fx(t,{},async()=>{const r=$l({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=$x(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Vx.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function u5(t,e){return Yr(t,"POST","/v2/accounts:revokeToken",Di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):n5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return G(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await l5(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Nc;return r&&(G(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(G(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(G(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nc,this.toJSON())}_performRefresh(){return ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _o{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=zw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new i5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ux(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await _l(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return t5(this,e)}reload(){return s5(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _o(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await sp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await _l(this,Z4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,p=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:y,emailVerified:w,isAnonymous:I,providerData:R,stsTokenManager:C}=n;G(y&&C,e,"internal-error");const N=Nc.fromJSON(this.name,C);G(typeof y=="string",e,"internal-error"),Ui(h,e.name),Ui(d,e.name),G(typeof w=="boolean",e,"internal-error"),G(typeof I=="boolean",e,"internal-error"),Ui(f,e.name),Ui(m,e.name),Ui(g,e.name),Ui(v,e.name),Ui(_,e.name),Ui(p,e.name);const Z=new _o({uid:y,auth:e,email:d,emailVerified:w,displayName:h,isAnonymous:I,photoURL:m,phoneNumber:f,tenantId:g,stsTokenManager:N,createdAt:_,lastLoginAt:p});return R&&Array.isArray(R)&&(Z.providerData=R.map(W=>Object.assign({},W))),v&&(Z._redirectEventId=v),Z}static async _fromIdTokenResponse(e,n,r=!1){const i=new Nc;i.updateFromServerResponse(n);const s=new _o({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await sp(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=new Map;function ci(t){Ci(t instanceof Function,"Expected a class definition");let e=SS.get(t);return e?(Ci(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,SS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Bx.type="NONE";const CS=Bx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(t,e,n){return`firebase:${t}:${e}:${n}`}class Ya{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=af(this.userKey,i.apiKey,s),this.fullPersistenceKey=af("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?_o._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ya(ci(CS),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||ci(CS);const o=af(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const h=_o._fromJSON(e,c);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ya(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Ya(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Wx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qx(e))return"Blackberry";if(Gx(e))return"Webos";if(Gw(e))return"Safari";if((e.includes("chrome/")||zx(e))&&!e.includes("edge/"))return"Chrome";if(Hx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function jx(t=yt()){return/firefox\//i.test(t)}function Gw(t=yt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zx(t=yt()){return/crios\//i.test(t)}function Wx(t=yt()){return/iemobile/i.test(t)}function Hx(t=yt()){return/android/i.test(t)}function qx(t=yt()){return/blackberry/i.test(t)}function Gx(t=yt()){return/webos/i.test(t)}function ym(t=yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function c5(t=yt()){var e;return ym(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function h5(){return TU()&&document.documentMode===10}function Yx(t=yt()){return ym(t)||Hx(t)||Gx(t)||qx(t)||/windows phone/i.test(t)||Wx(t)}function d5(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t,e=[]){let n;switch(t){case"Browser":n=RS(yt());break;case"Worker":n=`${RS(yt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(t,e={}){return Yr(t,"GET","/v2/passwordPolicy",Di(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=6;class g5{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:m5,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kS(this),this.idTokenSubscription=new kS(this),this.beforeStateQueue=new f5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ci(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ya.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=q4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ce(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await p5(this),n=new g5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Th("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await u5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ci(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=await Ya.create(this,[ci(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Kx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&j4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ni(t){return ce(t)}class kS{constructor(e){this.auth=e,this.observer=null,this.addObserver=xU(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function y5(t){vm=t}function Qx(t){return vm.loadJS(t)}function v5(){return vm.recaptchaEnterpriseScript}function w5(){return vm.gapiScript}function E5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const T5="recaptcha-enterprise",I5="NO_RECAPTCHA";class S5{constructor(e){this.type=T5,this.auth=Ni(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{J4(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new X4(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;IS(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(I5)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&IS(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=v5();l.length!==0&&(l+=a),Qx(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function PS(t,e,n,r=!1){const i=new S5(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function op(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await PS(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await PS(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5(t,e){const n=Ih(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(gl(s,e??{}))return i;nr(i,"already-initialized")}return n.initialize({options:e})}function R5(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ci);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function k5(t,e,n){const r=Ni(t);G(r._canInitEmulator,r,"emulator-config-failed"),G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=Xx(e),{host:o,port:a}=P5(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||A5()}function Xx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function P5(t){const e=Xx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:AS(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:AS(o)}}}function AS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function A5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ui("not implemented")}_getIdTokenResponse(e){return ui("not implemented")}_linkToIdToken(e,n){return ui("not implemented")}_getReauthenticationResolver(e){return ui("not implemented")}}async function x5(t,e){return Yr(t,"POST","/v1/accounts:update",e)}async function b5(t,e){return Yr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D5(t,e){return Ch(t,"POST","/v1/accounts:signInWithPassword",Di(t,e))}async function N5(t,e){return Yr(t,"POST","/v1/accounts:sendOobCode",Di(t,e))}async function O5(t,e){return N5(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M5(t,e){return Ch(t,"POST","/v1/accounts:signInWithEmailLink",Di(t,e))}async function L5(t,e){return Ch(t,"POST","/v1/accounts:signInWithEmailLink",Di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends Yw{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Oc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Oc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return op(e,n,"signInWithPassword",D5);case"emailLink":return M5(e,{email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return op(e,r,"signUpPassword",b5);case"emailLink":return L5(e,{idToken:n,email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(t,e){return Ch(t,"POST","/v1/accounts:signInWithIdp",Di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5="http://localhost";class bo extends Yw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):nr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=zw(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new bo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ka(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ka(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ka(e,n)}buildRequest(){const e={requestUri:V5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$l(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $5(t){const e=Nu(Ou(t)).link,n=e?Nu(Ou(e)).deep_link_id:null,r=Nu(Ou(t)).deep_link_id;return(r?Nu(Ou(r)).link:null)||r||n||e||t}class Kw{constructor(e){var n,r,i,s,o,a;const l=Nu(Ou(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,h=F5((i=l.mode)!==null&&i!==void 0?i:null);G(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=$5(e);try{return new Kw(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(){this.providerId=Ul.PROVIDER_ID}static credential(e,n){return Oc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Kw.parseLink(n);return G(r,"argument-error"),Oc._fromEmailAndCode(e,r.code,r.tenantId)}}Ul.PROVIDER_ID="password";Ul.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ul.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh extends Qw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends Rh{constructor(){super("facebook.com")}static credential(e){return bo._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends Rh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bo._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return oi.credential(n,r)}catch{return null}}}oi.GOOGLE_SIGN_IN_METHOD="google.com";oi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Rh{constructor(){super("github.com")}static credential(e){return bo._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ki.credential(e.oauthAccessToken)}catch{return null}}}Ki.GITHUB_SIGN_IN_METHOD="github.com";Ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Rh{constructor(){super("twitter.com")}static credential(e,n){return bo._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Qi.credential(n,r)}catch{return null}}}Qi.TWITTER_SIGN_IN_METHOD="twitter.com";Qi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U5(t,e){return Ch(t,"POST","/v1/accounts:signUp",Di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await _o._fromIdTokenResponse(e,r,i),o=xS(r);return new Do({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=xS(r);return new Do({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function xS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends qr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ap.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ap(e,n,r,i)}}function Jx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ap._fromErrorAndOperation(t,s,e,r):s})}async function B5(t,e,n=!1){const r=await _l(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Do._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zx(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await _l(t,Jx(r,i,e,t),n);G(s.idToken,r,"internal-error");const o=qw(s.idToken);G(o,r,"internal-error");const{sub:a}=o;return G(t.uid===a,r,"user-mismatch"),Do._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&nr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eb(t,e,n=!1){const r="signIn",i=await Jx(t,r,e),s=await Do._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function j5(t,e){return eb(Ni(t),e)}async function vne(t,e){return Zx(ce(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z5(t,e,n){var r;G(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),G(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(G(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(G(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tb(t){const e=Ni(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function wne(t,e,n){const r=Ni(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&z5(r,i,n),await op(r,i,"getOobCode",O5)}async function Ene(t,e,n){const r=Ni(t),o=await op(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",U5).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&tb(t),l}),a=await Do._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function Tne(t,e,n){return j5(ce(t),Ul.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tb(t),r})}function Ine(t,e){return W5(ce(t),null,e)}async function W5(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await _l(t,x5(r,s));await t._updateTokensIfNecessary(o,!0)}function H5(t,e,n,r){return ce(t).onIdTokenChanged(e,n,r)}function q5(t,e,n){return ce(t).beforeAuthStateChanged(e,n)}function Sne(t,e,n,r){return ce(t).onAuthStateChanged(e,n,r)}function Cne(t){return ce(t).signOut()}const lp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lp,"1"),this.storage.removeItem(lp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5(){const t=yt();return Gw(t)||ym(t)}const Y5=1e3,K5=10;class rb extends nb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=G5()&&d5(),this.fallbackToPolling=Yx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);h5()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,K5):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Y5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rb.type="LOCAL";const Q5=rb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib extends nb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ib.type="SESSION";const sb=ib;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new wm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await X5(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Xw("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(){return window}function Z5(t){jr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(){return typeof jr().WorkerGlobalScope<"u"&&typeof jr().importScripts=="function"}async function eB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function nB(){return ob()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="firebaseLocalStorageDb",rB=1,up="firebaseLocalStorage",lb="fbase_key";class kh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Em(t,e){return t.transaction([up],e?"readwrite":"readonly").objectStore(up)}function iB(){const t=indexedDB.deleteDatabase(ab);return new kh(t).toPromise()}function kv(){const t=indexedDB.open(ab,rB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(up,{keyPath:lb})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(up)?e(r):(r.close(),await iB(),e(await kv()))})})}async function bS(t,e,n){const r=Em(t,!0).put({[lb]:e,value:n});return new kh(r).toPromise()}async function sB(t,e){const n=Em(t,!1).get(e),r=await new kh(n).toPromise();return r===void 0?null:r.value}function DS(t,e){const n=Em(t,!0).delete(e);return new kh(n).toPromise()}const oB=800,aB=3;class ub{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>aB)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ob()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wm._getInstance(nB()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await eB(),!this.activeServiceWorker)return;this.sender=new J5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kv();return await bS(e,lp,"1"),await DS(e,lp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>bS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>sB(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>DS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Em(i,!1).getAll();return new kh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ub.type="LOCAL";const lB=ub;new Sh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(t,e){return e?ci(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw extends Yw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ka(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ka(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ka(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function uB(t){return eb(t.auth,new Jw(t),t.bypassAuthState)}function cB(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),Zx(n,new Jw(t),t.bypassAuthState)}async function hB(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),B5(n,new Jw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uB;case"linkViaPopup":case"linkViaRedirect":return hB;case"reauthViaPopup":case"reauthViaRedirect":return cB;default:nr(this.auth,"internal-error")}}resolve(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dB=new Sh(2e3,1e4);async function Rne(t,e,n){const r=Ni(t);z4(t,e,Qw);const i=cb(r,n);return new lo(r,"signInViaPopup",e,i).executeNotNull()}class lo extends hb{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,lo.currentPopupAction&&lo.currentPopupAction.cancel(),lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return G(e,this.auth,"internal-error"),e}async onExecution(){Ci(this.filter.length===1,"Popup operations only handle one event");const e=Xw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dB.get())};e()}}lo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fB="pendingRedirect",lf=new Map;class pB extends hb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=lf.get(this.auth._key());if(!e){try{const r=await mB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}lf.set(this.auth._key(),e)}return this.bypassAuthState||lf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mB(t,e){const n=yB(e),r=_B(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function gB(t,e){lf.set(t._key(),e)}function _B(t){return ci(t._redirectPersistence)}function yB(t){return af(fB,t.config.apiKey,t.name)}async function vB(t,e,n=!1){const r=Ni(t),i=cb(r,e),o=await new pB(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wB=10*60*1e3;class EB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!db(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Br(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wB&&this.cachedEventUids.clear(),this.cachedEventUids.has(NS(e))}saveEventToCache(e){this.cachedEventUids.add(NS(e)),this.lastProcessedEventTime=Date.now()}}function NS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function db({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return db(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IB(t,e={}){return Yr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CB=/^https?/;async function RB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await IB(t);for(const n of e)try{if(kB(n))return}catch{}nr(t,"unauthorized-domain")}function kB(t){const e=Rv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!CB.test(n))return!1;if(SB.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB=new Sh(3e4,6e4);function OS(){const t=jr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function AB(t){return new Promise((e,n)=>{var r,i,s;function o(){OS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{OS(),n(Br(t,"network-request-failed"))},timeout:PB.get()})}if(!((i=(r=jr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=jr().gapi)===null||s===void 0)&&s.load)o();else{const a=E5("iframefcb");return jr()[a]=()=>{gapi.load?o():n(Br(t,"network-request-failed"))},Qx(`${w5()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw uf=null,e})}let uf=null;function xB(t){return uf=uf||AB(t),uf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=new Sh(5e3,15e3),DB="__/auth/iframe",NB="emulator/auth/iframe",OB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LB(t){const e=t.config;G(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Hw(e,NB):`https://${t.config.authDomain}/${DB}`,r={apiKey:e.apiKey,appName:t.name,v:Fs},i=MB.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${$l(r).slice(1)}`}async function VB(t){const e=await xB(t),n=jr().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:LB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OB,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Br(t,"network-request-failed"),a=jr().setTimeout(()=>{s(o)},bB.get());function l(){jr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$B=500,UB=600,BB="_blank",jB="http://localhost";class MS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zB(t,e,n,r=$B,i=UB){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},FB),{width:r.toString(),height:i.toString(),top:s,left:o}),u=yt().toLowerCase();n&&(a=zx(u)?BB:n),jx(u)&&(e=e||jB,l.scrollbars="yes");const c=Object.entries(l).reduce((d,[f,m])=>`${d}${f}=${m},`,"");if(c5(u)&&a!=="_self")return WB(e||"",a),new MS(null);const h=window.open(e||"",a,c);G(h,t,"popup-blocked");try{h.focus()}catch{}return new MS(h)}function WB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB="__/auth/handler",qB="emulator/auth/handler",GB=encodeURIComponent("fac");async function LS(t,e,n,r,i,s){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Fs,eventId:i};if(e instanceof Qw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",tp(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,h]of Object.entries(s||{}))o[c]=h}if(e instanceof Rh){const c=e.getScopes().filter(h=>h!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${GB}=${encodeURIComponent(l)}`:"";return`${YB(t)}?${$l(a).slice(1)}${u}`}function YB({config:t}){return t.emulator?Hw(t,qB):`https://${t.authDomain}/${HB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="webStorageSupport";class KB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sb,this._completeRedirectFn=vB,this._overrideRedirectResult=gB}async _openPopup(e,n,r,i){var s;Ci((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await LS(e,n,r,Rv(),i);return zB(e,o,Xw())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await LS(e,n,r,Rv(),i);return Z5(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ci(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await VB(e),r=new EB(e);return n.register("authEvent",i=>(G(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(z_,{type:z_},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[z_];o!==void 0&&n(!!o),nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=RB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Yx()||Gw()||ym()}}const QB=KB;var VS="@firebase/auth",FS="1.6.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZB(t){Ss(new Si("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;G(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kx(t)},u=new _5(r,i,s,l);return R5(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ss(new Si("auth-internal",e=>{const n=Ni(e.getProvider("auth").getImmediate());return(r=>new XB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xn(VS,FS,JB(t)),Xn(VS,FS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=5*60,t3=Tx("authIdTokenMaxAge")||e3;let $S=null;const n3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>t3)return;const i=n==null?void 0:n.token;$S!==i&&($S=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function r3(t=jw()){const e=Ih(t,"auth");if(e.isInitialized())return e.getImmediate();const n=C5(t,{popupRedirectResolver:QB,persistence:[lB,Q5,sb]}),r=Tx("authTokenSyncURL");if(r&&r.match(/^\/[^\/].*/)){const s=n3(r);q5(n,s,()=>s(n.currentUser)),H5(n,o=>s(o))}const i=vx("auth");return i&&k5(n,`http://${i}`),n}function i3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}y5({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Br("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",i3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZB("Browser");var s3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},M,Zw=Zw||{},X=s3||self;function Tm(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Ph(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function o3(t){return Object.prototype.hasOwnProperty.call(t,W_)&&t[W_]||(t[W_]=++a3)}var W_="closure_uid_"+(1e9*Math.random()>>>0),a3=0;function l3(t,e,n){return t.call.apply(t.bind,arguments)}function u3(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Qt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Qt=l3:Qt=u3,Qt.apply(null,arguments)}function Ad(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function xt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function $s(){this.s=this.s,this.o=this.o}var c3=0;$s.prototype.s=!1;$s.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),c3!=0)&&o3(this)};$s.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fb=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function eE(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function US(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Tm(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Xt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Xt.prototype.h=function(){this.defaultPrevented=!0};var h3=function(){if(!X.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};X.addEventListener("test",n,e),X.removeEventListener("test",n,e)}catch{}return t}();function Mc(t){return/^[\s\xa0]*$/.test(t)}function Im(){var t=X.navigator;return t&&(t=t.userAgent)?t:""}function br(t){return Im().indexOf(t)!=-1}function tE(t){return tE[" "](t),t}tE[" "]=function(){};function d3(t,e){var n=i6;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var f3=br("Opera"),yl=br("Trident")||br("MSIE"),pb=br("Edge"),Pv=pb||yl,mb=br("Gecko")&&!(Im().toLowerCase().indexOf("webkit")!=-1&&!br("Edge"))&&!(br("Trident")||br("MSIE"))&&!br("Edge"),p3=Im().toLowerCase().indexOf("webkit")!=-1&&!br("Edge");function gb(){var t=X.document;return t?t.documentMode:void 0}var Av;e:{var H_="",q_=function(){var t=Im();if(mb)return/rv:([^\);]+)(\)|;)/.exec(t);if(pb)return/Edge\/([\d\.]+)/.exec(t);if(yl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(p3)return/WebKit\/(\S+)/.exec(t);if(f3)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(q_&&(H_=q_?q_[1]:""),yl){var G_=gb();if(G_!=null&&G_>parseFloat(H_)){Av=String(G_);break e}}Av=H_}var xv;if(X.document&&yl){var BS=gb();xv=BS||parseInt(Av,10)||void 0}else xv=void 0;var m3=xv;function Lc(t,e){if(Xt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(mb){e:{try{tE(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:g3[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Lc.$.h.call(this)}}xt(Lc,Xt);var g3={2:"touch",3:"pen",4:"mouse"};Lc.prototype.h=function(){Lc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ah="closure_listenable_"+(1e6*Math.random()|0),_3=0;function y3(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++_3,this.fa=this.ia=!1}function Sm(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function nE(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function v3(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function _b(t){const e={};for(const n in t)e[n]=t[n];return e}const jS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yb(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<jS.length;s++)n=jS[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Cm(t){this.src=t,this.g={},this.h=0}Cm.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Dv(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new y3(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function bv(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=fb(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Sm(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Dv(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var rE="closure_lm_"+(1e6*Math.random()|0),Y_={};function vb(t,e,n,r,i){if(r&&r.once)return Eb(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)vb(t,e[s],n,r,i);return null}return n=oE(n),t&&t[Ah]?t.O(e,n,Ph(r)?!!r.capture:!!r,i):wb(t,e,n,!1,r,i)}function wb(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Ph(i)?!!i.capture:!!i,a=sE(t);if(a||(t[rE]=a=new Cm(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=w3(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)h3||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ib(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function w3(){function t(n){return e.call(t.src,t.listener,n)}const e=E3;return t}function Eb(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Eb(t,e[s],n,r,i);return null}return n=oE(n),t&&t[Ah]?t.P(e,n,Ph(r)?!!r.capture:!!r,i):wb(t,e,n,!0,r,i)}function Tb(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Tb(t,e[s],n,r,i);else r=Ph(r)?!!r.capture:!!r,n=oE(n),t&&t[Ah]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Dv(s,n,r,i),-1<n&&(Sm(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=sE(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Dv(e,n,r,i)),(n=-1<t?e[t]:null)&&iE(n))}function iE(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Ah])bv(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ib(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=sE(e))?(bv(n,t),n.h==0&&(n.src=null,e[rE]=null)):Sm(t)}}}function Ib(t){return t in Y_?Y_[t]:Y_[t]="on"+t}function E3(t,e){if(t.fa)t=!0;else{e=new Lc(e,this);var n=t.listener,r=t.la||t.src;t.ia&&iE(t),t=n.call(r,e)}return t}function sE(t){return t=t[rE],t instanceof Cm?t:null}var K_="__closure_events_fn_"+(1e9*Math.random()>>>0);function oE(t){return typeof t=="function"?t:(t[K_]||(t[K_]=function(e){return t.handleEvent(e)}),t[K_])}function Pt(){$s.call(this),this.i=new Cm(this),this.S=this,this.J=null}xt(Pt,$s);Pt.prototype[Ah]=!0;Pt.prototype.removeEventListener=function(t,e,n,r){Tb(this,t,e,n,r)};function $t(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Xt(e,t);else if(e instanceof Xt)e.target=e.target||t;else{var i=e;e=new Xt(r,t),yb(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=xd(o,r,!0,e)&&i}if(o=e.g=t,i=xd(o,r,!0,e)&&i,i=xd(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=xd(o,r,!1,e)&&i}Pt.prototype.N=function(){if(Pt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Sm(n[r]);delete t.g[e],t.h--}}this.J=null};Pt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Pt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function xd(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&bv(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var aE=X.JSON.stringify;class T3{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function I3(){var t=lE;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class S3{constructor(){this.h=this.g=null}add(e,n){const r=Sb.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Sb=new T3(()=>new C3,t=>t.reset());class C3{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function R3(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function k3(t){X.setTimeout(()=>{throw t},0)}let Vc,Fc=!1,lE=new S3,Cb=()=>{const t=X.Promise.resolve(void 0);Vc=()=>{t.then(P3)}};var P3=()=>{for(var t;t=I3();){try{t.h.call(t.g)}catch(n){k3(n)}var e=Sb;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Fc=!1};function Rm(t,e){Pt.call(this),this.h=t||1,this.g=e||X,this.j=Qt(this.qb,this),this.l=Date.now()}xt(Rm,Pt);M=Rm.prototype;M.ga=!1;M.T=null;M.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),$t(this,"tick"),this.ga&&(uE(this),this.start()))}};M.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function uE(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}M.N=function(){Rm.$.N.call(this),uE(this),delete this.g};function cE(t,e,n){if(typeof t=="function")n&&(t=Qt(t,n));else if(t&&typeof t.handleEvent=="function")t=Qt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:X.setTimeout(t,e||0)}function Rb(t){t.g=cE(()=>{t.g=null,t.i&&(t.i=!1,Rb(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class A3 extends $s{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Rb(this)}N(){super.N(),this.g&&(X.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $c(t){$s.call(this),this.h=t,this.g={}}xt($c,$s);var zS=[];function kb(t,e,n,r){Array.isArray(n)||(n&&(zS[0]=n.toString()),n=zS);for(var i=0;i<n.length;i++){var s=vb(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Pb(t){nE(t.g,function(e,n){this.g.hasOwnProperty(n)&&iE(e)},t),t.g={}}$c.prototype.N=function(){$c.$.N.call(this),Pb(this)};$c.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function km(){this.g=!0}km.prototype.Ea=function(){this.g=!1};function x3(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function b3(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function $a(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+N3(t,n)+(r?" "+r:"")})}function D3(t,e){t.info(function(){return"TIMEOUT: "+e})}km.prototype.info=function(){};function N3(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return aE(n)}catch{return e}}var Jo={},WS=null;function Pm(){return WS=WS||new Pt}Jo.Ta="serverreachability";function Ab(t){Xt.call(this,Jo.Ta,t)}xt(Ab,Xt);function Uc(t){const e=Pm();$t(e,new Ab(e))}Jo.STAT_EVENT="statevent";function xb(t,e){Xt.call(this,Jo.STAT_EVENT,t),this.stat=e}xt(xb,Xt);function an(t){const e=Pm();$t(e,new xb(e,t))}Jo.Ua="timingevent";function bb(t,e){Xt.call(this,Jo.Ua,t),this.size=e}xt(bb,Xt);function xh(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return X.setTimeout(function(){t()},e)}var Am={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Db={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function hE(){}hE.prototype.h=null;function HS(t){return t.h||(t.h=t.i())}function Nb(){}var bh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function dE(){Xt.call(this,"d")}xt(dE,Xt);function fE(){Xt.call(this,"c")}xt(fE,Xt);var Nv;function xm(){}xt(xm,hE);xm.prototype.g=function(){return new XMLHttpRequest};xm.prototype.i=function(){return{}};Nv=new xm;function Dh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new $c(this),this.P=O3,t=Pv?125:void 0,this.V=new Rm(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ob}function Ob(){this.i=null,this.g="",this.h=!1}var O3=45e3,Mb={},Ov={};M=Dh.prototype;M.setTimeout=function(t){this.P=t};function Mv(t,e,n){t.L=1,t.A=Dm(Ri(e)),t.u=n,t.S=!0,Lb(t,null)}function Lb(t,e){t.G=Date.now(),Nh(t),t.B=Ri(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),Wb(n.i,"t",r),t.o=0,n=t.l.J,t.h=new Ob,t.g=hD(t.l,n?e:null,!t.u),0<t.O&&(t.M=new A3(Qt(t.Pa,t,t.g),t.O)),kb(t.U,t.g,"readystatechange",t.nb),e=t.I?_b(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Uc(),x3(t.j,t.v,t.B,t.m,t.W,t.u)}M.nb=function(t){t=t.target;const e=this.M;e&&Nr(t)==3?e.l():this.Pa(t)};M.Pa=function(t){try{if(t==this.g)e:{const c=Nr(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>c)&&(c!=3||Pv||this.g&&(this.h.h||this.g.ja()||KS(this.g)))){this.J||c!=4||e==7||(e==8||0>=h?Uc(3):Uc(2)),bm(this);var n=this.g.da();this.ca=n;t:if(Vb(this)){var r=KS(this.g);t="";var i=r.length,s=Nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){uo(this),ec(this);var o="";break t}this.h.i=new X.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,b3(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Mc(a)){var u=a;break t}}u=null}if(n=u)$a(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lv(this,n);else{this.i=!1,this.s=3,an(12),uo(this),ec(this);break e}}this.S?(Fb(this,c,o),Pv&&this.i&&c==3&&(kb(this.U,this.V,"tick",this.mb),this.V.start())):($a(this.j,this.m,o,null),Lv(this,o)),c==4&&uo(this),this.i&&!this.J&&(c==4?aD(this.l,this):(this.i=!1,Nh(this)))}else t6(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,an(12)):(this.s=0,an(13)),uo(this),ec(this)}}}catch{}finally{}};function Vb(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function Fb(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=M3(t,n),i==Ov){e==4&&(t.s=4,an(14),r=!1),$a(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Mb){t.s=4,an(15),$a(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else $a(t.j,t.m,i,null),Lv(t,i);Vb(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,an(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),vE(e),e.M=!0,an(11))):($a(t.j,t.m,n,"[Invalid Chunked Response]"),uo(t),ec(t))}M.mb=function(){if(this.g){var t=Nr(this.g),e=this.g.ja();this.o<e.length&&(bm(this),Fb(this,t,e),this.i&&t!=4&&Nh(this))}};function M3(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Ov:(n=Number(e.substring(n,r)),isNaN(n)?Mb:(r+=1,r+n>e.length?Ov:(e=e.slice(r,r+n),t.o=r+n,e)))}M.cancel=function(){this.J=!0,uo(this)};function Nh(t){t.Y=Date.now()+t.P,$b(t,t.P)}function $b(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=xh(Qt(t.lb,t),e)}function bm(t){t.C&&(X.clearTimeout(t.C),t.C=null)}M.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(D3(this.j,this.B),this.L!=2&&(Uc(),an(17)),uo(this),this.s=2,ec(this)):$b(this,this.Y-t)};function ec(t){t.l.H==0||t.J||aD(t.l,t)}function uo(t){bm(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,uE(t.V),Pb(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Lv(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Vv(n.i,t))){if(!t.K&&Vv(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)dp(n),Lm(n);else break e;yE(n),an(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=xh(Qt(n.ib,n),6e3));if(1>=Gb(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else co(n,11)}else if((t.K||n.g==t)&&dp(n),!Mc(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const c=u[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const h=u[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var s=r.i;s.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(pE(s,s.h),s.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,Me(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=cD(r,r.J?r.pa:null,r.Y),o.K){Yb(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(bm(a),Nh(a)),r.g=o}else sD(r);0<n.j.length&&Vm(n)}else u[0]!="stop"&&u[0]!="close"||co(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?co(n,7):_E(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Uc(4)}catch{}}function L3(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Tm(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function V3(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Tm(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function Ub(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Tm(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=V3(t),r=L3(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var Bb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function F3(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function yo(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof yo){this.h=t.h,cp(this,t.j),this.s=t.s,this.g=t.g,hp(this,t.m),this.l=t.l;var e=t.i,n=new Bc;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),qS(this,n),this.o=t.o}else t&&(e=String(t).match(Bb))?(this.h=!1,cp(this,e[1]||"",!0),this.s=Mu(e[2]||""),this.g=Mu(e[3]||"",!0),hp(this,e[4]),this.l=Mu(e[5]||"",!0),qS(this,e[6]||"",!0),this.o=Mu(e[7]||"")):(this.h=!1,this.i=new Bc(null,this.h))}yo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Lu(e,GS,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Lu(e,GS,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Lu(n,n.charAt(0)=="/"?B3:U3,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Lu(n,z3)),t.join("")};function Ri(t){return new yo(t)}function cp(t,e,n){t.j=n?Mu(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function hp(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function qS(t,e,n){e instanceof Bc?(t.i=e,W3(t.i,t.h)):(n||(e=Lu(e,j3)),t.i=new Bc(e,t.h))}function Me(t,e,n){t.i.set(e,n)}function Dm(t){return Me(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Mu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Lu(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,$3),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function $3(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var GS=/[#\/\?@]/g,U3=/[#\?:]/g,B3=/[#\?]/g,j3=/[#\?@]/g,z3=/#/g;function Bc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Us(t){t.g||(t.g=new Map,t.h=0,t.i&&F3(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}M=Bc.prototype;M.add=function(t,e){Us(this),this.i=null,t=Bl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function jb(t,e){Us(t),e=Bl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function zb(t,e){return Us(t),e=Bl(t,e),t.g.has(e)}M.forEach=function(t,e){Us(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};M.ta=function(){Us(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};M.Z=function(t){Us(this);let e=[];if(typeof t=="string")zb(this,t)&&(e=e.concat(this.g.get(Bl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};M.set=function(t,e){return Us(this),this.i=null,t=Bl(this,t),zb(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};M.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Wb(t,e,n){jb(t,e),0<n.length&&(t.i=null,t.g.set(Bl(t,e),eE(n)),t.h+=n.length)}M.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Bl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function W3(t,e){e&&!t.j&&(Us(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(jb(this,r),Wb(this,i,n))},t)),t.j=e}var H3=class{constructor(t,e){this.g=t,this.map=e}};function Hb(t){this.l=t||q3,X.PerformanceNavigationTiming?(t=X.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(X.g&&X.g.Ka&&X.g.Ka()&&X.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var q3=10;function qb(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Gb(t){return t.h?1:t.g?t.g.size:0}function Vv(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function pE(t,e){t.g?t.g.add(e):t.h=e}function Yb(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Hb.prototype.cancel=function(){if(this.i=Kb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Kb(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return eE(t.i)}var G3=class{stringify(t){return X.JSON.stringify(t,void 0)}parse(t){return X.JSON.parse(t,void 0)}};function Y3(){this.g=new G3}function K3(t,e,n){const r=n||"";try{Ub(t,function(i,s){let o=i;Ph(i)&&(o=aE(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Q3(t,e){const n=new km;if(X.Image){const r=new Image;r.onload=Ad(bd,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ad(bd,n,r,"TestLoadImage: error",!1,e),r.onabort=Ad(bd,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ad(bd,n,r,"TestLoadImage: timeout",!1,e),X.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function bd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Nm(t){this.l=t.ec||null,this.j=t.ob||!1}xt(Nm,hE);Nm.prototype.g=function(){return new Om(this.l,this.j)};Nm.prototype.i=function(t){return function(){return t}}({});function Om(t,e){Pt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=mE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xt(Om,Pt);var mE=0;M=Om.prototype;M.open=function(t,e){if(this.readyState!=mE)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,jc(this)};M.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||X).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};M.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oh(this)),this.readyState=mE};M.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,jc(this)),this.g&&(this.readyState=3,jc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof X.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Qb(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Qb(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}M.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Oh(this):jc(this),this.readyState==3&&Qb(this)}};M.Za=function(t){this.g&&(this.response=this.responseText=t,Oh(this))};M.Ya=function(t){this.g&&(this.response=t,Oh(this))};M.ka=function(){this.g&&Oh(this)};function Oh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,jc(t)}M.setRequestHeader=function(t,e){this.v.append(t,e)};M.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};M.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function jc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Om.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var X3=X.JSON.parse;function nt(t){Pt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Xb,this.L=this.M=!1}xt(nt,Pt);var Xb="",J3=/^https?$/i,Z3=["POST","PUT"];M=nt.prototype;M.Oa=function(t){this.M=t};M.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Nv.g(),this.C=this.u?HS(this.u):HS(Nv),this.g.onreadystatechange=Qt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){YS(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=X.FormData&&t instanceof X.FormData,!(0<=fb(Z3,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{eD(this),0<this.B&&((this.L=e6(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qt(this.ua,this)):this.A=cE(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){YS(this,s)}};function e6(t){return yl&&typeof t.timeout=="number"&&t.ontimeout!==void 0}M.ua=function(){typeof Zw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$t(this,"timeout"),this.abort(8))};function YS(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Jb(t),Mm(t)}function Jb(t){t.F||(t.F=!0,$t(t,"complete"),$t(t,"error"))}M.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,$t(this,"complete"),$t(this,"abort"),Mm(this))};M.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mm(this,!0)),nt.$.N.call(this)};M.La=function(){this.s||(this.G||this.v||this.l?Zb(this):this.kb())};M.kb=function(){Zb(this)};function Zb(t){if(t.h&&typeof Zw<"u"&&(!t.C[1]||Nr(t)!=4||t.da()!=2)){if(t.v&&Nr(t)==4)cE(t.La,0,t);else if($t(t,"readystatechange"),Nr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(Bb)[1]||null;!i&&X.self&&X.self.location&&(i=X.self.location.protocol.slice(0,-1)),r=!J3.test(i?i.toLowerCase():"")}n=r}if(n)$t(t,"complete"),$t(t,"success");else{t.m=6;try{var s=2<Nr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Jb(t)}}finally{Mm(t)}}}}function Mm(t,e){if(t.g){eD(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||$t(t,"ready");try{n.onreadystatechange=r}catch{}}}function eD(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(X.clearTimeout(t.A),t.A=null)}M.isActive=function(){return!!this.g};function Nr(t){return t.g?t.g.readyState:0}M.da=function(){try{return 2<Nr(this)?this.g.status:-1}catch{return-1}};M.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};M.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),X3(e)}};function KS(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Xb:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function t6(t){const e={};t=(t.g&&2<=Nr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Mc(t[r]))continue;var n=R3(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}v3(e,function(r){return r.join(", ")})}M.Ia=function(){return this.m};M.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function tD(t){let e="";return nE(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function gE(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=tD(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Me(t,e,n))}function fu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function nD(t){this.Ga=0,this.j=[],this.l=new km,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=fu("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=fu("baseRetryDelayMs",5e3,t),this.hb=fu("retryDelaySeedMs",1e4,t),this.eb=fu("forwardChannelMaxRetries",2,t),this.xa=fu("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Hb(t&&t.concurrentRequestLimit),this.Ja=new Y3,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}M=nD.prototype;M.ra=8;M.H=1;function _E(t){if(rD(t),t.H==3){var e=t.W++,n=Ri(t.I);if(Me(n,"SID",t.K),Me(n,"RID",e),Me(n,"TYPE","terminate"),Mh(t,n),e=new Dh(t,t.l,e),e.L=2,e.A=Dm(Ri(n)),n=!1,X.navigator&&X.navigator.sendBeacon)try{n=X.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&X.Image&&(new Image().src=e.A,n=!0),n||(e.g=hD(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Nh(e)}uD(t)}function Lm(t){t.g&&(vE(t),t.g.cancel(),t.g=null)}function rD(t){Lm(t),t.u&&(X.clearTimeout(t.u),t.u=null),dp(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&X.clearTimeout(t.m),t.m=null)}function Vm(t){if(!qb(t.i)&&!t.m){t.m=!0;var e=t.Na;Vc||Cb(),Fc||(Vc(),Fc=!0),lE.add(e,t),t.C=0}}function n6(t,e){return Gb(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=xh(Qt(t.Na,t,e),lD(t,t.C)),t.C++,!0)}M.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Dh(this,this.l,t);let s=this.s;if(this.U&&(s?(s=_b(s),yb(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=iD(this,i,e),n=Ri(this.I),Me(n,"RID",t),Me(n,"CVER",22),this.F&&Me(n,"X-HTTP-Session-Id",this.F),Mh(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(tD(s)))+"&"+e:this.o&&gE(n,this.o,s)),pE(this.i,i),this.bb&&Me(n,"TYPE","init"),this.P?(Me(n,"$req",e),Me(n,"SID","null"),i.aa=!0,Mv(i,n,null)):Mv(i,n,e),this.H=2}}else this.H==3&&(t?QS(this,t):this.j.length==0||qb(this.i)||QS(this))};function QS(t,e){var n;e?n=e.m:n=t.W++;const r=Ri(t.I);Me(r,"SID",t.K),Me(r,"RID",n),Me(r,"AID",t.V),Mh(t,r),t.o&&t.s&&gE(r,t.o,t.s),n=new Dh(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=iD(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),pE(t.i,n),Mv(n,r,e)}function Mh(t,e){t.na&&nE(t.na,function(n,r){Me(e,r,n)}),t.h&&Ub({},function(n,r){Me(e,r,n)})}function iD(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Qt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].g;const c=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{K3(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function sD(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Vc||Cb(),Fc||(Vc(),Fc=!0),lE.add(e,t),t.A=0}}function yE(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=xh(Qt(t.Ma,t),lD(t,t.A)),t.A++,!0)}M.Ma=function(){if(this.u=null,oD(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=xh(Qt(this.jb,this),t)}};M.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,an(10),Lm(this),oD(this))};function vE(t){t.B!=null&&(X.clearTimeout(t.B),t.B=null)}function oD(t){t.g=new Dh(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ri(t.wa);Me(e,"RID","rpc"),Me(e,"SID",t.K),Me(e,"AID",t.V),Me(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Me(e,"TO",t.qa),Me(e,"TYPE","xmlhttp"),Mh(t,e),t.o&&t.s&&gE(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Dm(Ri(e)),n.u=null,n.S=!0,Lb(n,t)}M.ib=function(){this.v!=null&&(this.v=null,Lm(this),yE(this),an(19))};function dp(t){t.v!=null&&(X.clearTimeout(t.v),t.v=null)}function aD(t,e){var n=null;if(t.g==e){dp(t),vE(t),t.g=null;var r=2}else if(Vv(t.i,e))n=e.F,Yb(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Pm(),$t(r,new bb(r,n)),Vm(t)}else sD(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&n6(t,e)||r==2&&yE(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:co(t,5);break;case 4:co(t,10);break;case 3:co(t,6);break;default:co(t,2)}}}function lD(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function co(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Qt(t.pb,t);n||(n=new yo("//www.google.com/images/cleardot.gif"),X.location&&X.location.protocol=="http"||cp(n,"https"),Dm(n)),Q3(n.toString(),r)}else an(2);t.H=0,t.h&&t.h.za(e),uD(t),rD(t)}M.pb=function(t){t?(this.l.info("Successfully pinged google.com"),an(2)):(this.l.info("Failed to ping google.com"),an(1))};function uD(t){if(t.H=0,t.ma=[],t.h){const e=Kb(t.i);(e.length!=0||t.j.length!=0)&&(US(t.ma,e),US(t.ma,t.j),t.i.i.length=0,eE(t.j),t.j.length=0),t.h.ya()}}function cD(t,e,n){var r=n instanceof yo?Ri(n):new yo(n);if(r.g!="")e&&(r.g=e+"."+r.g),hp(r,r.m);else{var i=X.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new yo(null);r&&cp(s,r),e&&(s.g=e),i&&hp(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Me(r,n,e),Me(r,"VER",t.ra),Mh(t,r),r}function hD(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new nt(new Nm({ob:n})):new nt(t.va),e.Oa(t.J),e}M.isActive=function(){return!!this.h&&this.h.isActive(this)};function dD(){}M=dD.prototype;M.Ba=function(){};M.Aa=function(){};M.za=function(){};M.ya=function(){};M.isActive=function(){return!0};M.Va=function(){};function fp(){if(yl&&!(10<=Number(m3)))throw Error("Environmental error: no available transport.")}fp.prototype.g=function(t,e){return new Mn(t,e)};function Mn(t,e){Pt.call(this),this.g=new nD(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Mc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Mc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new jl(this)}xt(Mn,Pt);Mn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;an(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=cD(t,null,t.Y),Vm(t)};Mn.prototype.close=function(){_E(this.g)};Mn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=aE(t),t=n);e.j.push(new H3(e.fb++,t)),e.H==3&&Vm(e)};Mn.prototype.N=function(){this.g.h=null,delete this.j,_E(this.g),delete this.g,Mn.$.N.call(this)};function fD(t){dE.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}xt(fD,dE);function pD(){fE.call(this),this.status=1}xt(pD,fE);function jl(t){this.g=t}xt(jl,dD);jl.prototype.Ba=function(){$t(this.g,"a")};jl.prototype.Aa=function(t){$t(this.g,new fD(t))};jl.prototype.za=function(t){$t(this.g,new pD)};jl.prototype.ya=function(){$t(this.g,"b")};function r6(){this.blockSize=-1}function wr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}xt(wr,r6);wr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Q_(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}wr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Q_(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Q_(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Q_(this,r),i=0;break}}this.h=i,this.i+=e};wr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ie(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var i6={};function wE(t){return-128<=t&&128>t?d3(t,function(e){return new Ie([e|0],0>e?-1:0)}):new Ie([t|0],0>t?-1:0)}function Or(t){if(isNaN(t)||!isFinite(t))return Qa;if(0>t)return Lt(Or(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Fv;return new Ie(e,0)}function mD(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Lt(mD(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Or(Math.pow(e,8)),r=Qa,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Or(Math.pow(e,s)),r=r.R(s).add(Or(o))):(r=r.R(n),r=r.add(Or(o)))}return r}var Fv=4294967296,Qa=wE(0),$v=wE(1),XS=wE(16777216);M=Ie.prototype;M.ea=function(){if(qn(this))return-Lt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Fv+r)*e,e*=Fv}return t};M.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(hi(this))return"0";if(qn(this))return"-"+Lt(this).toString(t);for(var e=Or(Math.pow(t,6)),n=this,r="";;){var i=mp(n,e).g;n=pp(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,hi(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};M.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function hi(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function qn(t){return t.h==-1}M.X=function(t){return t=pp(this,t),qn(t)?-1:hi(t)?0:1};function Lt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ie(n,~t.h).add($v)}M.abs=function(){return qn(this)?Lt(this):this};M.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ie(n,n[n.length-1]&-2147483648?-1:0)};function pp(t,e){return t.add(Lt(e))}M.R=function(t){if(hi(this)||hi(t))return Qa;if(qn(this))return qn(t)?Lt(this).R(Lt(t)):Lt(Lt(this).R(t));if(qn(t))return Lt(this.R(Lt(t)));if(0>this.X(XS)&&0>t.X(XS))return Or(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,Dd(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Dd(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Dd(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Dd(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ie(n,0)};function Dd(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function pu(t,e){this.g=t,this.h=e}function mp(t,e){if(hi(e))throw Error("division by zero");if(hi(t))return new pu(Qa,Qa);if(qn(t))return e=mp(Lt(t),e),new pu(Lt(e.g),Lt(e.h));if(qn(e))return e=mp(t,Lt(e)),new pu(Lt(e.g),e.h);if(30<t.g.length){if(qn(t)||qn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=$v,r=e;0>=r.X(t);)n=JS(n),r=JS(r);var i=la(n,1),s=la(r,1);for(r=la(r,2),n=la(n,2);!hi(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=la(r,1),n=la(n,1)}return e=pp(t,i.R(e)),new pu(i,e)}for(i=Qa;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Or(n),o=s.R(e);qn(o)||0<o.X(t);)n-=r,s=Or(n),o=s.R(e);hi(s)&&(s=$v),i=i.add(s),t=pp(t,o)}return new pu(i,t)}M.gb=function(t){return mp(this,t).h};M.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ie(n,this.h&t.h)};M.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ie(n,this.h|t.h)};M.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ie(n,this.h^t.h)};function JS(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ie(n,t.h)}function la(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ie(i,t.h)}fp.prototype.createWebChannel=fp.prototype.g;Mn.prototype.send=Mn.prototype.u;Mn.prototype.open=Mn.prototype.m;Mn.prototype.close=Mn.prototype.close;Am.NO_ERROR=0;Am.TIMEOUT=8;Am.HTTP_ERROR=6;Db.COMPLETE="complete";Nb.EventType=bh;bh.OPEN="a";bh.CLOSE="b";bh.ERROR="c";bh.MESSAGE="d";Pt.prototype.listen=Pt.prototype.O;nt.prototype.listenOnce=nt.prototype.P;nt.prototype.getLastError=nt.prototype.Sa;nt.prototype.getLastErrorCode=nt.prototype.Ia;nt.prototype.getStatus=nt.prototype.da;nt.prototype.getResponseJson=nt.prototype.Wa;nt.prototype.getResponseText=nt.prototype.ja;nt.prototype.send=nt.prototype.ha;nt.prototype.setWithCredentials=nt.prototype.Oa;wr.prototype.digest=wr.prototype.l;wr.prototype.reset=wr.prototype.reset;wr.prototype.update=wr.prototype.j;Ie.prototype.add=Ie.prototype.add;Ie.prototype.multiply=Ie.prototype.R;Ie.prototype.modulo=Ie.prototype.gb;Ie.prototype.compare=Ie.prototype.X;Ie.prototype.toNumber=Ie.prototype.ea;Ie.prototype.toString=Ie.prototype.toString;Ie.prototype.getBits=Ie.prototype.D;Ie.fromNumber=Or;Ie.fromString=mD;var s6=function(){return new fp},o6=function(){return Pm()},X_=Am,a6=Db,l6=Jo,ZS={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Nd=Nb,u6=nt,c6=wr,Xa=Ie;const eC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zl="10.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=new _m("@firebase/firestore");function Ea(){return No.logLevel}function P(t,...e){if(No.logLevel<=se.DEBUG){const n=e.map(EE);No.debug(`Firestore (${zl}): ${t}`,...n)}}function on(t,...e){if(No.logLevel<=se.ERROR){const n=e.map(EE);No.error(`Firestore (${zl}): ${t}`,...n)}}function Oo(t,...e){if(No.logLevel<=se.WARN){const n=e.map(EE);No.warn(`Firestore (${zl}): ${t}`,...n)}}function EE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(t="Unexpected state"){const e=`FIRESTORE (${zl}) INTERNAL ASSERTION FAILED: `+t;throw on(e),new Error(e)}function j(t,e){t||B()}function Q(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class b extends qr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class d6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(sn.UNAUTHENTICATED))}shutdown(){}}class f6{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Jn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Jn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Jn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(j(typeof r.accessToken=="string"),new h6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return j(e===null||typeof e=="string"),new sn(e)}}class p6{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class m6{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new p6(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class g6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,P("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(j(typeof n.token=="string"),this.R=n.token,new g6(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=y6(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function J(t,e){return t<e?-1:t>e?1:0}function vl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function _D(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new b(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new b(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new b(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new b(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ke(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.timestamp=e}static fromTimestamp(e){return new q(e)}static min(){return new q(new Ke(0,0))}static max(){return new q(new Ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n,r){n===void 0?n=0:n>e.length&&B(),r===void 0?r=e.length-n:r>e.length-n&&B(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return zc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class _e extends zc{construct(e,n,r){return new _e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new b(S.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new _e(n)}static emptyPath(){return new _e([])}}const v6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ge extends zc{construct(e,n,r){return new Ge(e,n,r)}static isValidIdentifier(e){return v6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ge.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ge(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new b(S.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new b(S.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new b(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new b(S.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ge(n)}static emptyPath(){return new Ge([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.path=e}static fromPath(e){return new O(_e.fromString(e))}static fromName(e){return new O(_e.fromString(e).popFirst(5))}static empty(){return new O(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new O(new _e(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Uv(t){return t.fields.find(e=>e.kind===2)}function Xs(t){return t.fields.filter(e=>e.kind!==2)}gp.UNKNOWN_ID=-1;class cf{constructor(e,n){this.fieldPath=e,this.kind=n}}class Wc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Wc(0,Ln.min())}}function w6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=q.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new Ln(i,O.empty(),e)}function yD(t){return new Ln(t.readTime,t.key,-1)}class Ln{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ln(q.min(),O.empty(),-1)}static max(){return new Ln(q.max(),O.empty(),-1)}}function TE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=O.comparator(t.documentKey,e.documentKey),n!==0?n:J(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(t){if(t.code!==S.FAILED_PRECONDITION||t.message!==vD)throw t;P("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&B(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new T((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof T?n:T.resolve(n)}catch(n){return T.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):T.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):T.reject(n)}static resolve(e){return new T((n,r)=>{n(e)})}static reject(e){return new T((n,r)=>{r(e)})}static waitFor(e){return new T((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=T.resolve(!1);for(const r of e)n=n.next(i=>i?T.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new T((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new T((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Jn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new tc(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=IE(r.target.error);this.V.reject(new tc(e,i))}}static open(e,n,r,i){try{return new Fm(n,e.transaction(i,r))}catch(s){throw new tc(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(P("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new T6(n)}}class Mr{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Mr.S(yt())===12.2&&on("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return P("SimpleDb","Removing database:",e),to(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!kx())return!1;if(Mr.C())return!0;const e=yt(),n=Mr.S(e),r=0<n&&n<10,i=Mr.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(P("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new tc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new b(S.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new b(S.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new tc(e,o))},i.onupgradeneeded=s=>{P("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{P("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=Fm.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),T.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(P("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class E6{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return to(this.k.delete())}}class tc extends b{constructor(e,n){super(S.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Bs(t){return t.name==="IndexedDbTransactionError"}class T6{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(P("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(P("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),to(r)}add(e){return P("SimpleDb","ADD",this.store.name,e,e),to(this.store.add(e))}get(e){return to(this.store.get(e)).next(n=>(n===void 0&&(n=null),P("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return P("SimpleDb","DELETE",this.store.name,e),to(this.store.delete(e))}count(){return P("SimpleDb","COUNT",this.store.name),to(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new T((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new T((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){P("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new T((r,i)=>{n.onerror=s=>{const o=IE(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new T((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new E6(a),u=n(a.primaryKey,a.value,l);if(u instanceof T){const c=u.catch(h=>(l.done(),T.reject(h)));r.push(c)}l.isDone?i():l.$===null?a.continue():a.continue(l.$)}}).next(()=>T.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function to(t){return new T((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=IE(r.target.error);n(i)}})}let tC=!1;function IE(t){const e=Mr.S(yt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new b("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tC||(tC=!0,setTimeout(()=>{throw r},0)),r}}return t}class I6{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){P("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{P("IndexBackfiller",`Documents written: ${await this.X.te()}`)}catch(n){Bs(n)?P("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Zo(n)}await this.ee(6e4)})}}class S6{constructor(e,n){this.localStore=e,this.persistence=n}async te(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))}ne(e,n){const r=new Set;let i=n,s=!0;return T.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return P("IndexBackfiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(P("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=yD(s);TE(o,r)>0&&(r=o)}),new Ln(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}Yn._e=-1;function $m(t){return t==null}function Hc(t){return t===0&&1/t==-1/0}function C6(t){return typeof t=="number"&&Number.isInteger(t)&&!Hc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=nC(e)),e=R6(t.get(n),e);return nC(e)}function R6(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function nC(t){return t+""}function Lr(t){const e=t.length;if(j(e>=2),e===2)return j(t.charAt(0)===""&&t.charAt(1)===""),_e.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&B(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:B()}s=o+2}return new _e(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t,e){return[t,un(e)]}function ED(t,e,n){return[t,un(e),n]}const k6={},P6=["prefixPath","collectionGroup","readTime","documentId"],A6=["prefixPath","collectionGroup","documentId"],x6=["collectionGroup","readTime","prefixPath","documentId"],b6=["canonicalId","targetId"],D6=["targetId","path"],N6=["path","targetId"],O6=["collectionId","parent"],M6=["indexId","uid"],L6=["uid","sequenceNumber"],V6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],F6=["indexId","uid","orderedDocumentKey"],$6=["userId","collectionPath","documentId"],U6=["userId","collectionPath","largestBatchId"],B6=["userId","collectionGroup","largestBatchId"],TD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],j6=[...TD,"documentOverlays"],ID=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],SD=ID,z6=[...SD,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv extends wD{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function bt(t,e){const n=Q(t);return Mr.M(n.ae,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ea(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function CD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ut=class jv{constructor(e,n){this.comparator=e,this.root=n||ys.EMPTY}insert(e,n){return new jv(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ys.BLACK,null,null))}remove(e){return new jv(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ys.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Od(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Od(this.root,e,this.comparator,!1)}getReverseIterator(){return new Od(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Od(this.root,e,this.comparator,!0)}},Od=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ys=class ti{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ti.RED,this.left=i??ti.EMPTY,this.right=s??ti.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ti(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ti.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ti.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ti.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ti.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw B();const e=this.left.check();if(e!==this.right.check())throw B();return e+(this.isRed()?0:1)}};ys.EMPTY=null,ys.RED=!0,ys.BLACK=!1;ys.EMPTY=new class{constructor(){this.size=0}get key(){throw B()}get value(){throw B()}get color(){throw B()}get left(){throw B()}get right(){throw B()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ys(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sC(this.data.getIterator())}getIteratorFrom(e){return new sC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ke(this.comparator);return n.data=e,n}}class sC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ua(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.fields=e,e.sort(Ge.comparator)}static empty(){return new yn([])}unionWith(e){let n=new ke(Ge.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new RD("Invalid base64 string: "+s):s}}(e);return new Bt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const W6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cs(t){if(j(!!t),typeof t=="string"){let e=0;const n=W6.exec(t);if(j(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Rs(t){return typeof t=="string"?Bt.fromBase64String(t):Bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function SE(t){const e=t.mapValue.fields.__previous_value__;return Um(e)?SE(e):e}function qc(t){const e=Cs(t.mapValue.fields.__local_write_time__.timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Mo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Mo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Mo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},df={nullValue:"NULL_VALUE"};function Lo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Um(t)?4:kD(t)?9007199254740991:10:B()}function Wr(t,e){if(t===e)return!0;const n=Lo(t);if(n!==Lo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qc(t).isEqual(qc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Cs(i.timestampValue),a=Cs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Rs(i.bytesValue).isEqual(Rs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return et(i.geoPointValue.latitude)===et(s.geoPointValue.latitude)&&et(i.geoPointValue.longitude)===et(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return et(i.integerValue)===et(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=et(i.doubleValue),a=et(s.doubleValue);return o===a?Hc(o)===Hc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return vl(t.arrayValue.values||[],e.arrayValue.values||[],Wr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(iC(o)!==iC(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Wr(o[l],a[l])))return!1;return!0}(t,e);default:return B()}}function Gc(t,e){return(t.values||[]).find(n=>Wr(n,e))!==void 0}function ks(t,e){if(t===e)return 0;const n=Lo(t),r=Lo(e);if(n!==r)return J(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=et(s.integerValue||s.doubleValue),l=et(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return oC(t.timestampValue,e.timestampValue);case 4:return oC(qc(t),qc(e));case 5:return J(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Rs(s),l=Rs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=J(a[u],l[u]);if(c!==0)return c}return J(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=J(et(s.latitude),et(o.latitude));return a!==0?a:J(et(s.longitude),et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const c=ks(a[u],l[u]);if(c)return c}return J(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===is.mapValue&&o===is.mapValue)return 0;if(s===is.mapValue)return 1;if(o===is.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let h=0;h<l.length&&h<c.length;++h){const d=J(l[h],c[h]);if(d!==0)return d;const f=ks(a[l[h]],u[c[h]]);if(f!==0)return f}return J(l.length,c.length)}(t.mapValue,e.mapValue);default:throw B()}}function oC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return J(t,e);const n=Cs(t),r=Cs(e),i=J(n.seconds,r.seconds);return i!==0?i:J(n.nanos,r.nanos)}function wl(t){return zv(t)}function zv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Cs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Rs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return O.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=zv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${zv(n.fields[o])}`;return i+"}"}(t.mapValue):B()}function Vo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wv(t){return!!t&&"integerValue"in t}function Yc(t){return!!t&&"arrayValue"in t}function aC(t){return!!t&&"nullValue"in t}function lC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ff(t){return!!t&&"mapValue"in t}function nc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ea(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=nc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function q6(t){return"nullValue"in t?df:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Vo(Mo.empty(),O.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:B()}function G6(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Vo(Mo.empty(),O.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?is:B()}function uC(t,e){const n=ks(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function cC(t,e){const n=ks(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ff(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nc(n)}setAll(e){let n=Ge.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=nc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ff(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Wr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ff(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ea(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Yt(nc(this.value))}}function PD(t){const e=[];return ea(t.fields,(n,r)=>{const i=new Ge([n]);if(ff(r)){const s=PD(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new tt(e,0,q.min(),q.min(),q.min(),Yt.empty(),0)}static newFoundDocument(e,n,r,i){return new tt(e,1,n,q.min(),r,i,0)}static newNoDocument(e,n){return new tt(e,2,n,q.min(),q.min(),Yt.empty(),0)}static newUnknownDocument(e,n){return new tt(e,3,n,q.min(),q.min(),Yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n){this.position=e,this.inclusive=n}}function hC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=O.comparator(O.fromName(o.referenceValue),n.key):r=ks(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function dC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Wr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n="asc"){this.field=e,this.dir=n}}function Y6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{}class oe extends AD{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new K6(e,n,r):n==="array-contains"?new J6(e,r):n==="in"?new MD(e,r):n==="not-in"?new Z6(e,r):n==="array-contains-any"?new ej(e,r):new oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Q6(e,r):new X6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ks(n,this.value)):n!==null&&Lo(this.value)===Lo(n)&&this.matchesComparison(ks(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ee extends AD{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Ee(e,n)}matches(e){return El(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function El(t){return t.op==="and"}function Hv(t){return t.op==="or"}function CE(t){return xD(t)&&El(t)}function xD(t){for(const e of t.filters)if(e instanceof Ee)return!1;return!0}function qv(t){if(t instanceof oe)return t.field.canonicalString()+t.op.toString()+wl(t.value);if(CE(t))return t.filters.map(e=>qv(e)).join(",");{const e=t.filters.map(n=>qv(n)).join(",");return`${t.op}(${e})`}}function bD(t,e){return t instanceof oe?function(r,i){return i instanceof oe&&r.op===i.op&&r.field.isEqual(i.field)&&Wr(r.value,i.value)}(t,e):t instanceof Ee?function(r,i){return i instanceof Ee&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&bD(o,i.filters[a]),!0):!1}(t,e):void B()}function DD(t,e){const n=t.filters.concat(e);return Ee.create(n,t.op)}function ND(t){return t instanceof oe?function(n){return`${n.field.canonicalString()} ${n.op} ${wl(n.value)}`}(t):t instanceof Ee?function(n){return n.op.toString()+" {"+n.getFilters().map(ND).join(" ,")+"}"}(t):"Filter"}class K6 extends oe{constructor(e,n,r){super(e,n,r),this.key=O.fromName(r.referenceValue)}matches(e){const n=O.comparator(e.key,this.key);return this.matchesComparison(n)}}class Q6 extends oe{constructor(e,n){super(e,"in",n),this.keys=OD("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class X6 extends oe{constructor(e,n){super(e,"not-in",n),this.keys=OD("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function OD(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>O.fromName(r.referenceValue))}class J6 extends oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yc(n)&&Gc(n.arrayValue,this.value)}}class MD extends oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gc(this.value.arrayValue,n)}}class Z6 extends oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Gc(this.value.arrayValue,n)}}class ej extends oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Gc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function Gv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new tj(t,e,n,r,i,s,o)}function Fo(t){const e=Q(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),$m(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>wl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>wl(r)).join(",")),e.ce=n}return e.ce}function Lh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Y6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!dC(t.startAt,e.startAt)&&dC(t.endAt,e.endAt)}function _p(t){return O.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function yp(t,e){return t.filters.filter(n=>n instanceof oe&&n.field.isEqual(e))}function fC(t,e,n){let r=df,i=!0;for(const s of yp(t,e)){let o=df,a=!0;switch(s.op){case"<":case"<=":o=q6(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=df}uC({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];uC({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function pC(t,e,n){let r=is,i=!0;for(const s of yp(t,e)){let o=is,a=!0;switch(s.op){case">=":case">":o=G6(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=is}cC({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];cC({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function nj(t,e,n,r,i,s,o,a){return new ta(t,e,n,r,i,s,o,a)}function Vh(t){return new ta(t)}function mC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function RE(t){return t.collectionGroup!==null}function Ja(t){const e=Q(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ke(Ge.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Kc(s,r))}),n.has(Ge.keyField().canonicalString())||e.le.push(new Kc(Ge.keyField(),r))}return e.le}function Zn(t){const e=Q(t);return e.he||(e.he=LD(e,Ja(t))),e.he}function LD(t,e){if(t.limitType==="F")return Gv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Kc(i.field,s)});const n=t.endAt?new Ps(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ps(t.startAt.position,t.startAt.inclusive):null;return Gv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Yv(t,e){const n=t.filters.concat([e]);return new ta(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vp(t,e,n){return new ta(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bm(t,e){return Lh(Zn(t),Zn(e))&&t.limitType===e.limitType}function VD(t){return`${Fo(Zn(t))}|lt:${t.limitType}`}function Ta(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ND(i)).join(", ")}]`),$m(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>wl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>wl(i)).join(",")),`Target(${r})`}(Zn(t))}; limitType=${t.limitType})`}function Fh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):O.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ja(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=hC(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Ja(r),i)||r.endAt&&!function(o,a,l){const u=hC(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Ja(r),i))}(t,e)}function rj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function FD(t){return(e,n)=>{let r=!1;for(const i of Ja(t)){const s=ij(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ij(t,e,n){const r=t.field.isKeyField()?O.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?ks(l,u):B()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return B()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ea(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return CD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=new ut(O.comparator);function xn(){return sj}const $D=new ut(O.comparator);function Vu(...t){let e=$D;for(const n of t)e=e.insert(n.key,n);return e}function UD(t){let e=$D;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Vr(){return rc()}function BD(){return rc()}function rc(){return new js(t=>t.toString(),(t,e)=>t.isEqual(e))}const oj=new ut(O.comparator),aj=new ke(O.comparator);function re(...t){let e=aj;for(const n of t)e=e.add(n);return e}const lj=new ke(J);function uj(){return lj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hc(e)?"-0":e}}function zD(t){return{integerValue:""+t}}function cj(t,e){return C6(e)?zD(e):jD(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(){this._=void 0}}function hj(t,e,n){return t instanceof Tl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Um(s)&&(s=SE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof $o?HD(t,e):t instanceof Il?qD(t,e):function(i,s){const o=WD(i,s),a=gC(o)+gC(i.Ie);return Wv(o)&&Wv(i.Ie)?zD(a):jD(i.serializer,a)}(t,e)}function dj(t,e,n){return t instanceof $o?HD(t,e):t instanceof Il?qD(t,e):n}function WD(t,e){return t instanceof Qc?function(r){return Wv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Tl extends jm{}class $o extends jm{constructor(e){super(),this.elements=e}}function HD(t,e){const n=GD(e);for(const r of t.elements)n.some(i=>Wr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Il extends jm{constructor(e){super(),this.elements=e}}function qD(t,e){let n=GD(e);for(const r of t.elements)n=n.filter(i=>!Wr(i,r));return{arrayValue:{values:n}}}class Qc extends jm{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function gC(t){return et(t.integerValue||t.doubleValue)}function GD(t){return Yc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n){this.field=e,this.transform=n}}function fj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof $o&&i instanceof $o||r instanceof Il&&i instanceof Il?vl(r.elements,i.elements,Wr):r instanceof Qc&&i instanceof Qc?Wr(r.Ie,i.Ie):r instanceof Tl&&i instanceof Tl}(t.transform,e.transform)}class pj{constructor(e,n){this.version=e,this.transformResults=n}}class Kt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Kt}static exists(e){return new Kt(void 0,e)}static updateTime(e){return new Kt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zm{}function YD(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wm(t.key,Kt.none()):new Wl(t.key,t.data,Kt.none());{const n=t.data,r=Yt.empty();let i=new ke(Ge.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Oi(t.key,r,new yn(i.toArray()),Kt.none())}}function mj(t,e,n){t instanceof Wl?function(i,s,o){const a=i.value.clone(),l=yC(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Oi?function(i,s,o){if(!pf(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=yC(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(KD(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ic(t,e,n,r){return t instanceof Wl?function(s,o,a,l){if(!pf(s.precondition,o))return a;const u=s.value.clone(),c=vC(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Oi?function(s,o,a,l){if(!pf(s.precondition,o))return a;const u=vC(s.fieldTransforms,l,o),c=o.data;return c.setAll(KD(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return pf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function gj(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=WD(r.transform,i||null);s!=null&&(n===null&&(n=Yt.empty()),n.set(r.field,s))}return n||null}function _C(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&vl(r,i,(s,o)=>fj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wl extends zm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Oi extends zm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function KD(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function yC(t,e,n){const r=new Map;j(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,dj(o,a,n[i]))}return r}function vC(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,hj(s,o,e))}return r}class Wm extends zm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QD extends zm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&mj(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ic(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ic(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=BD();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=YD(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(q.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&vl(this.mutations,e.mutations,(n,r)=>_C(n,r))&&vl(this.baseMutations,e.baseMutations,(n,r)=>_C(n,r))}}class AE{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){j(e.mutations.length===r.length);let i=function(){return oj}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new AE(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft,ue;function vj(t){switch(t){default:return B();case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0}}function XD(t){if(t===void 0)return on("GRPC error has no .code"),S.UNKNOWN;switch(t){case ft.OK:return S.OK;case ft.CANCELLED:return S.CANCELLED;case ft.UNKNOWN:return S.UNKNOWN;case ft.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case ft.INTERNAL:return S.INTERNAL;case ft.UNAVAILABLE:return S.UNAVAILABLE;case ft.UNAUTHENTICATED:return S.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case ft.NOT_FOUND:return S.NOT_FOUND;case ft.ALREADY_EXISTS:return S.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return S.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case ft.ABORTED:return S.ABORTED;case ft.OUT_OF_RANGE:return S.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return S.UNIMPLEMENTED;case ft.DATA_LOSS:return S.DATA_LOSS;default:return B()}}(ue=ft||(ft={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=new Xa([4294967295,4294967295],0);function wC(t){const e=wj().encode(t),n=new c6;return n.update(e),new Uint8Array(n.digest())}function EC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xa([n,r],0),new Xa([i,s],0)]}class bE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Fu(`Invalid padding: ${n}`);if(r<0)throw new Fu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Fu(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Xa.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Xa.fromNumber(r)));return i.compare(Ej)===1&&(i=new Xa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=wC(e),[r,i]=EC(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new bE(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=wC(e),[r,i]=EC(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,$h.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hm(q.min(),i,new ut(J),xn(),re())}}class $h{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $h(r,n,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class JD{constructor(e,n){this.targetId=e,this.fe=n}}class ZD{constructor(e,n,r=Bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class TC{constructor(){this.ge=0,this.pe=SC(),this.ye=Bt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=re(),n=re(),r=re();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:B()}}),new $h(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=SC()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,j(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class Tj{constructor(e){this.Be=e,this.ke=new Map,this.qe=xn(),this.Qe=IC(),this.Ke=new ut(J)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:B()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(_p(s))if(r===0){const o=new O(s.path);this.We(n,o,tt.newNoDocument(o,q.min()))}else j(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Rs(r).toUint8Array()}catch(l){if(l instanceof RD)return Oo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new bE(o,i,s)}catch(l){return Oo(l instanceof Fu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&_p(a.target)){const l=new O(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,tt.newNoDocument(l,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=re();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Ye(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new Hm(e,n,this.Ke,this.qe,r);return this.qe=xn(),this.Qe=IC(),this.Ke=new ut(J),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new TC,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new ke(J),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||P("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new TC),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function IC(){return new ut(O.comparator)}function SC(){return new ut(O.comparator)}const Ij={asc:"ASCENDING",desc:"DESCENDING"},Sj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cj={and:"AND",or:"OR"};class Rj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Kv(t,e){return t.useProto3Json||$m(e)?e:{value:e}}function Sl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function kj(t,e){return Sl(t,e.toTimestamp())}function cn(t){return j(!!t),q.fromTimestamp(function(n){const r=Cs(n);return new Ke(r.seconds,r.nanos)}(t))}function DE(t,e){return Qv(t,e).canonicalString()}function Qv(t,e){const n=function(i){return new _e(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function tN(t){const e=_e.fromString(t);return j(uN(e)),e}function wp(t,e){return DE(t.databaseId,e.path)}function vo(t,e){const n=tN(e);if(n.get(1)!==t.databaseId.projectId)throw new b(S.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new b(S.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new O(iN(n))}function nN(t,e){return DE(t.databaseId,e)}function rN(t){const e=tN(t);return e.length===4?_e.emptyPath():iN(e)}function Xv(t){return new _e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iN(t){return j(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function CC(t,e,n){return{name:wp(t,e),fields:n.value.mapValue.fields}}function Pj(t,e,n){const r=vo(t,e.name),i=cn(e.updateTime),s=e.createTime?cn(e.createTime):q.min(),o=new Yt({mapValue:{fields:e.fields}}),a=tt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Aj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:B()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(j(c===void 0||typeof c=="string"),Bt.fromBase64String(c||"")):(j(c===void 0||c instanceof Uint8Array),Bt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?S.UNKNOWN:XD(u.code);return new b(c,u.message||"")}(o);n=new ZD(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=vo(t,r.document.name),s=cn(r.document.updateTime),o=r.document.createTime?cn(r.document.createTime):q.min(),a=new Yt({mapValue:{fields:r.document.fields}}),l=tt.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new mf(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=vo(t,r.document),s=r.readTime?cn(r.readTime):q.min(),o=tt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new mf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=vo(t,r.document),s=r.removedTargetIds||[];n=new mf([],s,i,null)}else{if(!("filter"in e))return B();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new yj(i,s),a=r.targetId;n=new JD(a,o)}}return n}function Ep(t,e){let n;if(e instanceof Wl)n={update:CC(t,e.key,e.value)};else if(e instanceof Wm)n={delete:wp(t,e.key)};else if(e instanceof Oi)n={update:CC(t,e.key,e.data),updateMask:Mj(e.fieldMask)};else{if(!(e instanceof QD))return B();n={verify:wp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Tl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $o)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Il)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qc)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw B()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:kj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:B()}(t,e.precondition)),n}function Jv(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Kt.updateTime(cn(s.updateTime)):s.exists!==void 0?Kt.exists(s.exists):Kt.none()}(e.currentDocument):Kt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)j(a.setToServerValue==="REQUEST_TIME"),l=new Tl;else if("appendMissingElements"in a){const c=a.appendMissingElements.values||[];l=new $o(c)}else if("removeAllFromArray"in a){const c=a.removeAllFromArray.values||[];l=new Il(c)}else"increment"in a?l=new Qc(o,a.increment):B();const u=Ge.fromServerFormat(a.fieldPath);return new kE(u,l)}(t,i)):[];if(e.update){e.update.name;const i=vo(t,e.update.name),s=new Yt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new yn(u.map(c=>Ge.fromServerFormat(c)))}(e.updateMask);return new Oi(i,s,o,n,r)}return new Wl(i,s,n,r)}if(e.delete){const i=vo(t,e.delete);return new Wm(i,n)}if(e.verify){const i=vo(t,e.verify);return new QD(i,n)}return B()}function xj(t,e){return t&&t.length>0?(j(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?cn(i.updateTime):cn(s);return o.isEqual(q.min())&&(o=cn(s)),new pj(o,i.transformResults||[])}(n,e))):[]}function sN(t,e){return{documents:[nN(t,e.path)]}}function NE(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nN(t,i);const s=function(u){if(u.length!==0)return lN(Ee.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(d){return{field:Xi(d.field),direction:Dj(d.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Kv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ut:n,parent:i}}function oN(t){let e=rN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){j(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(h){const d=aN(h);return d instanceof Ee&&CE(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(m){return new Kc(Ia(m.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,$m(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new Ps(f,d)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const d=!h.before,f=h.values||[];return new Ps(f,d)}(n.endAt)),nj(e,i,o,s,a,"F",l,u)}function bj(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ia(n.unaryFilter.field);return oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ia(n.unaryFilter.field);return oe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ia(n.unaryFilter.field);return oe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ia(n.unaryFilter.field);return oe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return B()}}(t):t.fieldFilter!==void 0?function(n){return oe.create(Ia(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return B()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ee.create(n.compositeFilter.filters.map(r=>aN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return B()}}(n.compositeFilter.op))}(t):B()}function Dj(t){return Ij[t]}function Nj(t){return Sj[t]}function Oj(t){return Cj[t]}function Xi(t){return{fieldPath:t.canonicalString()}}function Ia(t){return Ge.fromServerFormat(t.fieldPath)}function lN(t){return t instanceof oe?function(n){if(n.op==="=="){if(lC(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NAN"}};if(aC(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lC(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NOT_NAN"}};if(aC(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xi(n.field),op:Nj(n.op),value:n.value}}}(t):t instanceof Ee?function(n){const r=n.getFilters().map(i=>lN(i));return r.length===1?r[0]:{compositeFilter:{op:Oj(n.op),filters:r}}}(t):B()}function Mj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n,r,i,s=q.min(),o=q.min(),a=Bt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.ct=e}}function Lj(t,e){let n;if(e.document)n=Pj(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=O.fromSegments(e.noDocument.path),i=Bo(e.noDocument.readTime);n=tt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return B();{const r=O.fromSegments(e.unknownDocument.path),i=Bo(e.unknownDocument.version);n=tt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Ke(i[0],i[1]);return q.fromTimestamp(s)}(e.readTime)),n}function RC(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Tp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:wp(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Sl(s,o.version.toTimestamp()),createTime:Sl(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Uo(e.version)};else{if(!e.isUnknownDocument())return B();r.unknownDocument={path:n.path.toArray(),version:Uo(e.version)}}return r}function Tp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Uo(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bo(t){const e=new Ke(t.seconds,t.nanoseconds);return q.fromTimestamp(e)}function no(t,e){const n=(e.baseMutations||[]).map(s=>Jv(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Jv(t.ct,s)),i=Ke.fromMillis(e.localWriteTimeMs);return new PE(e.batchId,i,n,r)}function $u(t){const e=Bo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Bo(t.lastLimboFreeSnapshotVersion):q.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return j(s.documents.length===1),Zn(Vh(rN(s.documents[0])))}(t.query):function(s){return Zn(oN(s))}(t.query),new di(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Bt.fromBase64String(t.resumeToken))}function hN(t,e){const n=Uo(e.snapshotVersion),r=Uo(e.lastLimboFreeSnapshotVersion);let i;i=_p(e.target)?sN(t.ct,e.target):NE(t.ct,e.target).ut;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function dN(t){const e=oN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vp(e,e.limit,"L"):e}function J_(t,e){return new xE(e.largestBatchId,Jv(t.ct,e.overlayMutation))}function kC(t,e){const n=e.path.lastSegment();return[t,un(e.path.popLast()),n]}function PC(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Uo(r.readTime),documentKey:un(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{getBundleMetadata(e,n){return AC(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Bo(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return AC(e).put(function(i){return{bundleId:i.id,createTime:Uo(cn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return xC(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:dN(s.bundledQuery),readTime:Bo(s.readTime)}}(r)})}saveNamedQuery(e,n){return xC(e).put(function(i){return{name:i.name,readTime:Uo(cn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function AC(t){return bt(t,"bundles")}function xC(t){return bt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new qm(e,r)}getOverlay(e,n){return mu(e).get(kC(this.userId,n)).next(r=>r?J_(this.serializer,r):null)}getOverlays(e,n){const r=Vr();return T.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new xE(n,o);i.push(this.ht(e,a))}),T.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(un(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(mu(e).H("collectionPathOverlayIndex",a))}),T.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Vr(),s=un(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return mu(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=J_(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Vr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return mu(e).Y({index:"collectionGroupOverlayIndex",range:a},(l,u,c)=>{const h=J_(this.serializer,u);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):c.done()}).next(()=>s)}ht(e,n){return mu(e).put(function(i,s,o){const[a,l,u]=kC(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Ep(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function mu(t){return bt(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(et(e.integerValue));else if("doubleValue"in e){const r=et(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Hc(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Rs(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?kD(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):B()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),O.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}ro.bt=new ro;function Fj(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function bC(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=Fj(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class $j{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const n=this.Bt(e),r=bC(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){const n=this.Bt(e),r=bC(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){const n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Uj{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class Bj{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class gu{constructor(){this.Gt=new $j,this.zt=new Uj(this.Gt),this.jt=new Bj(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new io(this.indexId,this.documentKey,this.arrayValue,r)}}function Bi(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=DC(t.arrayValue,e.arrayValue),n!==0?n:(n=DC(t.directionalValue,e.directionalValue),n!==0?n:O.comparator(t.documentKey,e.documentKey)))}function DC(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this.Yt=new ke((n,r)=>Ge.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(j(e.collectionGroup===this.collectionId),this.en)return!1;const n=Uv(e);if(n!==void 0&&!this.nn(n))return!1;const r=Xs(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.rn(a,l)||!this.sn(this.Zt[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new ke(Ge.comparator);const n=[];for(const r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new cf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new cf(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new cf(r.field,r.dir==="asc"?0:1)));return new gp(gp.UNKNOWN_ID,this.collectionId,n,Wc.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(t){var e,n;if(j(t instanceof oe||t instanceof Ee),t instanceof oe){if(t instanceof MD){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>oe.create(t.field,"==",s)))||[];return Ee.create(i,"or")}return t}const r=t.filters.map(i=>fN(i));return Ee.create(r,t.op)}function jj(t){if(t.getFilters().length===0)return[];const e=t0(fN(t));return j(pN(e)),Zv(e)||e0(e)?[e]:e.getFilters()}function Zv(t){return t instanceof oe}function e0(t){return t instanceof Ee&&CE(t)}function pN(t){return Zv(t)||e0(t)||function(n){if(n instanceof Ee&&Hv(n)){for(const r of n.getFilters())if(!Zv(r)&&!e0(r))return!1;return!0}return!1}(t)}function t0(t){if(j(t instanceof oe||t instanceof Ee),t instanceof oe)return t;if(t.filters.length===1)return t0(t.filters[0]);const e=t.filters.map(r=>t0(r));let n=Ee.create(e,t.op);return n=Ip(n),pN(n)?n:(j(n instanceof Ee),j(El(n)),j(n.filters.length>1),n.filters.reduce((r,i)=>OE(r,i)))}function OE(t,e){let n;return j(t instanceof oe||t instanceof Ee),j(e instanceof oe||e instanceof Ee),n=t instanceof oe?e instanceof oe?function(i,s){return Ee.create([i,s],"and")}(t,e):OC(t,e):e instanceof oe?OC(e,t):function(i,s){if(j(i.filters.length>0&&s.filters.length>0),El(i)&&El(s))return DD(i,s.getFilters());const o=Hv(i)?i:s,a=Hv(i)?s:i,l=o.filters.map(u=>OE(u,a));return Ee.create(l,"or")}(t,e),Ip(n)}function OC(t,e){if(El(e))return DD(e,t.getFilters());{const n=e.filters.map(r=>OE(t,r));return Ee.create(n,"or")}}function Ip(t){if(j(t instanceof oe||t instanceof Ee),t instanceof oe)return t;const e=t.getFilters();if(e.length===1)return Ip(e[0]);if(xD(t))return t;const n=e.map(i=>Ip(i)),r=[];return n.forEach(i=>{i instanceof oe?r.push(i):i instanceof Ee&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ee.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(){this._n=new ME}addToCollectionParentIndex(e,n){return this._n.add(n),T.resolve()}getCollectionParents(e,n){return T.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return T.resolve()}deleteFieldIndex(e,n){return T.resolve()}deleteAllFieldIndexes(e){return T.resolve()}createTargetIndexes(e,n){return T.resolve()}getDocumentsMatchingTarget(e,n){return T.resolve(null)}getIndexType(e,n){return T.resolve(0)}getFieldIndexes(e,n){return T.resolve([])}getNextCollectionGroupToUpdate(e){return T.resolve(null)}getMinOffset(e,n){return T.resolve(Ln.min())}getMinOffsetFromCollectionGroup(e,n){return T.resolve(Ln.min())}updateCollectionGroup(e,n,r){return T.resolve()}updateIndexEntries(e,n){return T.resolve()}}class ME{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ke(_e.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ke(_e.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=new Uint8Array(0);class Wj{constructor(e,n){this.databaseId=n,this.an=new ME,this.un=new js(r=>Fo(r),(r,i)=>Lh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const s={collectionId:r,parent:un(i)};return MC(e).put(s)}return T.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[_D(n),""],!1,!0);return MC(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Lr(o.parent))}return r})}addFieldIndex(e,n){const r=_u(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=ha(e);return s.next(a=>{o.put(PC(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=_u(e),i=ha(e),s=ca(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=_u(e),r=ca(e),i=ha(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return T.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new NC(r).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=ca(e);let i=!0;const s=new Map;return T.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=re();const a=[];return T.forEach(s,(l,u)=>{P("IndexedDbIndexManager",`Using index ${function(y){return`id=${y.indexId}|cg=${y.collectionGroup}|f=${y.fields.map(w=>`${w.fieldPath}:${w.kind}`).join(",")}`}(l)} to execute ${Fo(n)}`);const c=function(y,w){const I=Uv(w);if(I===void 0)return null;for(const R of yp(y,I.fieldPath))switch(R.op){case"array-contains-any":return R.value.arrayValue.values||[];case"array-contains":return[R.value]}return null}(u,l),h=function(y,w){const I=new Map;for(const R of Xs(w))for(const C of yp(y,R.fieldPath))switch(C.op){case"==":case"in":I.set(R.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return I.set(R.fieldPath.canonicalString(),C.value),Array.from(I.values())}return null}(u,l),d=function(y,w){const I=[];let R=!0;for(const C of Xs(w)){const N=C.kind===0?fC(y,C.fieldPath,y.startAt):pC(y,C.fieldPath,y.startAt);I.push(N.value),R&&(R=N.inclusive)}return new Ps(I,R)}(u,l),f=function(y,w){const I=[];let R=!0;for(const C of Xs(w)){const N=C.kind===0?pC(y,C.fieldPath,y.endAt):fC(y,C.fieldPath,y.endAt);I.push(N.value),R&&(R=N.inclusive)}return new Ps(I,R)}(u,l),m=this.hn(l,u,d),g=this.hn(l,u,f),v=this.Pn(l,u,h),_=this.In(l.indexId,c,m,d.inclusive,g,f.inclusive,v);return T.forEach(_,p=>r.j(p,n.limit).next(y=>{y.forEach(w=>{const I=O.fromSegments(w.documentKey);o.has(I)||(o=o.add(I),a.push(I))})}))}).next(()=>a)}return T.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=jj(Ee.create(e.filters,"and")).map(r=>Gv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),c=[];for(let h=0;h<l;++h){const d=n?this.Tn(n[h/u]):Md,f=this.En(e,d,r[h%u],i),m=this.dn(e,d,s[h%u],o),g=a.map(v=>this.En(e,d,v,!0));c.push(...this.createRange(f,m,g))}return c}En(e,n,r,i){const s=new io(e,O.empty(),n,r);return i?s:s.Jt()}dn(e,n,r,i){const s=new io(e,O.empty(),n,r);return i?s.Jt():s}ln(e,n){const r=new NC(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.cn(n);return T.forEach(i,s=>this.ln(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new ke(Ge.comparator),c=!1;for(const h of l.filters)for(const d of h.getFlattenedFilters())d.field.isKeyField()||(d.op==="array-contains"||d.op==="array-contains-any"?c=!0:u=u.add(d.field));for(const h of l.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){const r=new gu;for(const i of Xs(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Ht(i.kind);ro.bt.Pt(s,o)}return r.Wt()}Tn(e){const n=new gu;return ro.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const r=new gu;return ro.bt.Pt(Vo(this.databaseId,n),r.Ht(function(s){const o=Xs(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new gu);let s=0;for(const o of Xs(e)){const a=r[s++];for(const l of i)if(this.Vn(n,o.fieldPath)&&Yc(a))i=this.mn(i,o,a);else{const u=l.Ht(o.kind);ro.bt.Pt(a,u)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new gu;l.seed(a.Wt()),ro.bt.Pt(o,l.Ht(n.kind)),s.push(l)}return s}Vn(e,n){return!!e.filters.find(r=>r instanceof oe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=_u(e),i=ha(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return T.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(c,h){const d=h?new Wc(h.sequenceNumber,new Ln(Bo(h.readTime),new O(Lr(h.documentKey)),h.largestBatchId)):Wc.empty(),f=c.fields.map(([m,g])=>new cf(Ge.fromServerFormat(m),g));return new gp(c.indexId,c.collectionGroup,f,d)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:J(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=_u(e),s=ha(e);return this.gn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>T.forEach(a,l=>s.put(PC(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return T.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?T.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),T.forEach(a,l=>this.pn(e,i,l).next(u=>{const c=this.yn(s,l);return u.isEqual(c)?T.resolve():this.wn(e,s,l,u,c)}))))})}Sn(e,n,r,i){return ca(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return ca(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){const i=ca(e);let s=new ke(Bi);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,a)=>{s=s.add(new io(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,n){let r=new ke(Bi);const i=this.An(n,e);if(i==null)return r;const s=Uv(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Yc(o))for(const a of o.arrayValue.values||[])r=r.add(new io(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new io(n.indexId,e.key,Md,i));return r}wn(e,n,r,i,s){P("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,u,c,h,d){const f=l.getIterator(),m=u.getIterator();let g=ua(f),v=ua(m);for(;g||v;){let _=!1,p=!1;if(g&&v){const y=c(g,v);y<0?p=!0:y>0&&(_=!0)}else g!=null?p=!0:_=!0;_?(h(v),v=ua(m)):p?(d(g),g=ua(f)):(g=ua(f),v=ua(m))}}(i,s,Bi,a=>{o.push(this.Sn(e,n,r,a))},a=>{o.push(this.bn(e,n,r,a))}),T.waitFor(o)}gn(e){let n=1;return ha(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Bi(o,a)).filter((o,a,l)=>!a||Bi(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Bi(o,e),l=Bi(o,n);if(a===0)i[0]=e.Jt();else if(a>0&&l<0)i.push(o),i.push(o.Jt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Md,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Md,[]];s.push(IDBKeyRange.bound(a,l))}return s}Dn(e,n){return Bi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(LC)}getMinOffset(e,n){return T.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||B())).next(LC)}}function MC(t){return bt(t,"collectionParents")}function ca(t){return bt(t,"indexEntries")}function _u(t){return bt(t,"indexConfiguration")}function ha(t){return bt(t,"indexState")}function LC(t){j(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;TE(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ln(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class mn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new mn(e,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},(c,h,d)=>(a++,d.delete()));s.push(l.next(()=>{j(a===1)}));const u=[];for(const c of n.mutations){const h=ED(e,c.key.path,n.batchId);s.push(i.delete(h)),u.push(c.key)}return T.waitFor(s).next(()=>u)}function Sp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw B();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(41943040,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);class Gm{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){j(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Gm(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ji(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Sa(e),o=ji(e);return o.add({}).next(a=>{j(typeof a=="number");const l=new PE(a,n,r,i),u=function(f,m,g){const v=g.baseMutations.map(p=>Ep(f.ct,p)),_=g.mutations.map(p=>Ep(f.ct,p));return{userId:m,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:v,mutations:_}}(this.serializer,this.userId,l),c=[];let h=new ke((d,f)=>J(d.canonicalString(),f.canonicalString()));for(const d of i){const f=ED(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),c.push(o.put(u)),c.push(s.put(f,k6))}return h.forEach(d=>{c.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),T.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return ji(e).get(n).next(r=>r?(j(r.userId===this.userId),no(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?T.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ji(e).Y({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(j(a.batchId>=r),s=no(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ji(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ji(e).W("userMutationsIndex",n).next(r=>r.map(i=>no(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=hf(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Sa(e).Y({range:i},(o,a,l)=>{const[u,c,h]=o,d=Lr(c);if(u===this.userId&&n.path.isEqual(d))return ji(e).get(h).next(f=>{if(!f)throw B();j(f.userId===this.userId),s.push(no(this.serializer,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ke(J);const i=[];return n.forEach(s=>{const o=hf(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Sa(e).Y({range:a},(u,c,h)=>{const[d,f,m]=u,g=Lr(f);d===this.userId&&s.path.isEqual(g)?r=r.add(m):h.done()});i.push(l)}),T.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=hf(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new ke(J);return Sa(e).Y({range:o},(l,u,c)=>{const[h,d,f]=l,m=Lr(d);h===this.userId&&r.isPrefixOf(m)?m.length===i&&(a=a.add(f)):c.done()}).next(()=>this.Fn(e,a))}Fn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ji(e).get(s).next(o=>{if(o===null)throw B();j(o.userId===this.userId),r.push(no(this.serializer,o))}))}),T.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return mN(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),T.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return T.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Sa(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Lr(s[1]);i.push(l)}else a.done()}).next(()=>{j(i.length===0)})})}containsKey(e,n){return gN(e,this.userId,n)}xn(e){return _N(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function gN(t,e,n){const r=hf(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Sa(t).Y({range:s,J:!0},(a,l,u)=>{const[c,h,d]=a;c===e&&h===i&&(o=!0),u.done()}).next(()=>o)}function ji(t){return bt(t,"mutations")}function Sa(t){return bt(t,"documentMutations")}function _N(t){return bt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new jo(0)}static Ln(){return new jo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new jo(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>q.fromTimestamp(new Ke(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>da(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(j(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return da(e).Y((o,a)=>{const l=$u(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>T.waitFor(s)).next(()=>i)}forEachTarget(e,n){return da(e).Y((r,i)=>{const s=$u(i);n(s)})}Bn(e){return FC(e).get("targetGlobalKey").next(n=>(j(n!==null),n))}kn(e,n){return FC(e).put("targetGlobalKey",n)}qn(e,n){return da(e).put(hN(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Fo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return da(e).Y({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=$u(a);Lh(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ji(e);return n.forEach(o=>{const a=un(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),T.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ji(e);return T.forEach(n,s=>{const o=un(s.path);return T.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ji(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ji(e);let s=re();return i.Y({range:r,J:!0},(o,a,l)=>{const u=Lr(o[1]),c=new O(u);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=un(n.path),i=IDBKeyRange.bound([r],[_D(r)],!1,!0);let s=0;return Ji(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}_t(e,n){return da(e).get(n).next(r=>r?$u(r):null)}}function da(t){return bt(t,"targets")}function FC(t){return bt(t,"targetGlobal")}function Ji(t){return bt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C([t,e],[n,r]){const i=J(t,n);return i===0?J(e,r):i}class qj{constructor(e){this.Kn=e,this.buffer=new ke($C),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();$C(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Gj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){P("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Bs(n)?P("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Zo(n)}await this.zn(3e5)})}}class Yj{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return T.resolve(Yn._e);const r=new qj(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(P("LruGarbageCollector","Garbage collection skipped; disabled"),T.resolve(VC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VC):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),Ea()<=se.DEBUG&&P("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),T.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function Kj(t,e){return new Yj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,n){this.db=e,this.garbageCollector=Kj(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return Ld(e,r)}removeReference(e,n,r){return Ld(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Ld(e,n)}er(e,n){return function(i,s){let o=!1;return _N(i).Z(a=>gN(i,a,s).next(l=>(l&&(o=!0),T.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=n){const l=this.er(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,q.min()),Ji(e).delete(function(h){return[0,un(h.path)]}(o))))});i.push(l)}}).next(()=>T.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Ld(e,n)}Xn(e,n){const r=Ji(e);let i,s=Yn._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==Yn._e&&n(new O(Lr(i)),s),s=u,i=l):s=Yn._e}).next(()=>{s!==Yn._e&&n(new O(Lr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ld(t,e){return Ji(t).put(function(r,i){return{targetId:0,path:un(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this.changes=new js(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?T.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return qs(e).put(r)}removeEntry(e,n,r){return qs(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Tp(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=tt.newInvalidDocument(n);return qs(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(yu(n))},(i,s)=>{r=this.nr(n,s)}).next(()=>r)}rr(e,n){let r={size:0,document:tt.newInvalidDocument(n)};return qs(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(yu(n))},(i,s)=>{r={document:this.nr(n,s),size:Sp(s)}}).next(()=>r)}getEntries(e,n){let r=xn();return this.ir(e,n,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,n){let r=xn(),i=new ut(O.comparator);return this.ir(e,n,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,Sp(o))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return T.resolve();let i=new ke(jC);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(yu(i.first()),yu(i.last())),o=i.getIterator();let a=o.getNext();return qs(e).Y({index:"documentKeyIndex",range:s},(l,u,c)=>{const h=O.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&jC(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.U(yu(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Tp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qs(e).W(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let c=xn();for(const h of u){const d=this.nr(O.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);d.isFoundDocument()&&(Fh(n,d)||i.has(d.key))&&(c=c.insert(d.key,d))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=xn();const o=BC(n,r),a=BC(n,Ln.max());return qs(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const h=this.nr(O.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new Jj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return UC(e).get("remoteDocumentGlobalKey").next(n=>(j(!!n),n))}tr(e,n){return UC(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const r=Lj(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(q.min())))return r}return tt.newInvalidDocument(e)}}function vN(t){return new Xj(t)}class Jj extends yN{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new js(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new ke((s,o)=>J(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=RC(this.ar.serializer,o);i=i.add(s.path.popLast());const u=Sp(l);r+=u-a.size,n.push(this.ar.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=RC(this.ar.serializer,o.convertToNoDocument(q.min()));n.push(this.ar.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,r)),T.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function UC(t){return bt(t,"remoteDocumentGlobal")}function qs(t){return bt(t,"remoteDocumentsV14")}function yu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function BC(t,e){const n=e.documentKey.path.toArray();return[t,Tp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function jC(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=J(n[s],r[s]),i)return i;return i=J(n.length,r.length),i||(i=J(n[n.length-2],r[r.length-2]),i||J(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ic(r.mutation,i,yn.empty(),Ke.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){const i=Vr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Vu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Vr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=xn();const o=rc(),a=function(){return rc()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Oi)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),ic(c.mutation,u,c.mutation.getFieldMask(),Ke.now())):o.set(u.key,yn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new Zj(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=rc();let i=new ut((o,a)=>o-a),s=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||yn.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(i.get(a.batchId)||re()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=BD();c.forEach(d=>{if(!s.has(d)){const f=YD(n.get(d),r.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return T.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return O.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):RE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):T.resolve(Vr());let a=-1,l=s;return o.next(u=>T.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(c)?T.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,re())).next(c=>({batchId:a,changes:UD(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new O(n)).next(r=>{let i=Vu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Vu();return this.indexManager.getCollectionParents(e,s).next(a=>T.forEach(a,l=>{const u=function(h,d){return new ta(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,tt.newInvalidDocument(c)))});let a=Vu();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&ic(c.mutation,u,yn.empty(),Ke.now()),Fh(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return T.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:cn(i.createTime)}}(n)),T.resolve()}getNamedQuery(e,n){return T.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:dN(i.bundledQuery),readTime:cn(i.readTime)}}(n)),T.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(){this.overlays=new ut(O.comparator),this.hr=new Map}getOverlay(e,n){return T.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Vr();return T.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),T.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),T.resolve()}getOverlaysForCollection(e,n,r){const i=Vr(),s=n.length+1,o=new O(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return T.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ut((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=Vr(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=Vr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return T.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xE(n,r));let s=this.hr.get(n);s===void 0&&(s=re(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(){this.Pr=new ke(It.Ir),this.Tr=new ke(It.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new It(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new It(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new O(new _e([])),r=new It(n,e),i=new It(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new O(new _e([])),r=new It(n,e),i=new It(n,e+1);let s=re();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new It(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class It{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return O.comparator(e.key,n.key)||J(e.pr,n.pr)}static Er(e,n){return J(e.pr,n.pr)||O.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new ke(It.Ir)}checkEmpty(e){return T.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new PE(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new It(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return T.resolve(o)}lookupMutationBatch(e,n){return T.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return T.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return T.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return T.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new It(n,0),i=new It(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),T.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ke(J);return n.forEach(i=>{const s=new It(i,0),o=new It(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),T.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;O.isDocumentKey(s)||(s=s.child(""));const o=new It(new O(s),0);let a=new ke(J);return this.wr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.pr)),!0)},o),T.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){j(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return T.forEach(n.mutations,i=>{const s=new It(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new It(n,0),i=this.wr.firstAfterOrEqual(r);return T.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,T.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(e){this.vr=e,this.docs=function(){return new ut(O.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return T.resolve(r?r.document.mutableCopy():tt.newInvalidDocument(n))}getEntries(e,n){let r=xn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():tt.newInvalidDocument(i))}),T.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=xn();const o=n.path,a=new O(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||TE(yD(c),r)<=0||(i.has(c.key)||Fh(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return T.resolve(s)}getAllFromCollectionGroup(e,n,r,i){B()}Fr(e,n){return T.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new i9(this)}getSize(e){return T.resolve(this.size)}}class i9 extends yN{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),T.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(e){this.persistence=e,this.Mr=new js(n=>Fo(n),Lh),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.Or=0,this.Nr=new LE,this.targetCount=0,this.Lr=jo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),T.resolve()}getLastRemoteSnapshotVersion(e){return T.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return T.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),T.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),T.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new jo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,T.resolve()}updateTargetData(e,n){return this.qn(n),T.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,T.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),T.waitFor(s).next(()=>i)}getTargetCount(e){return T.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return T.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),T.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),T.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),T.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return T.resolve(r)}containsKey(e,n){return T.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n){this.Br={},this.overlays={},this.kr=new Yn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new s9(this),this.indexManager=new zj,this.remoteDocumentCache=function(i){return new r9(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new cN(n),this.$r=new e9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new t9,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new n9(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){P("MemoryPersistence","Starting transaction:",e);const i=new o9(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return T.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class o9 extends wD{constructor(e){super(),this.currentSequenceNumber=e}}class Ym{constructor(e){this.persistence=e,this.zr=new LE,this.jr=null}static Hr(e){return new Ym(e)}get Jr(){if(this.jr)return this.jr;throw B()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),T.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),T.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),T.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return T.forEach(this.Jr,r=>{const i=O.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,q.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return T.or([()=>T.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e){this.serializer=e}N(e,n,r,i){const s=new Fm("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rC,{unique:!0}),l.createObjectStore("documentMutations")}(e),zC(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=T.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),zC(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:q.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store("mutations").W().next(c=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rC,{unique:!0});const h=u.store("mutations"),d=c.map(f=>h.put(f));return T.waitFor(d)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore("documentOverlays",{keyPath:$6});u.createIndex("collectionPathOverlayIndex",U6,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",B6,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:P6});u.createIndex("documentKeyIndex",A6),u.createIndex("collectionGroupIndex",x6)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:M6}).createIndex("sequenceNumberIndex",L6,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:V6}).createIndex("documentKeyIndex",F6,{unique:!1})}(e))),o}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=Sp(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>T.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>T.forEach(a,l=>{j(l.userId===s.userId);const u=no(this.serializer,l);return mN(e,s.userId,u).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const l=new _e(o),u=function(h){return[0,un(h)]}(l);s.push(n.get(u).next(c=>c?T.resolve():(h=>n.put({targetId:0,path:un(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>T.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:O6});const r=n.store("collectionParents"),i=new ME,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:un(l)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const l=new _e(o);return s(l.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,l],u)=>{const c=Lr(a);return s(c.popLast())}))}ri(e){const n=e.store("targets");return n.Y((r,i)=>{const s=$u(i),o=hN(this.serializer,s);return n.put(o)})}ii(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(h){return h.document?new O(_e.fromString(h.document.name).popFirst(5)):h.noDocument?O.fromSegments(h.noDocument.path):h.unknownDocument?O.fromSegments(h.unknownDocument.path):B()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>T.waitFor(i))}si(e,n){const r=n.store("mutations"),i=vN(this.serializer),s=new EN(Ym.Hr,this.serializer.ct);return r.W().next(o=>{const a=new Map;return o.forEach(l=>{var u;let c=(u=a.get(l.userId))!==null&&u!==void 0?u:re();no(this.serializer,l).keys().forEach(h=>c=c.add(h)),a.set(l.userId,c)}),T.forEach(a,(l,u)=>{const c=new sn(u),h=qm.lt(this.serializer,c),d=s.getIndexManager(c),f=Gm.lt(c,this.serializer,d,s.referenceDelegate);return new wN(i,f,h,d).recalculateAndSaveOverlaysForDocumentKeys(new Bv(n,Yn._e),l).next()})})}}function zC(t){t.createObjectStore("targetDocuments",{keyPath:D6}).createIndex("documentTargetsIndex",N6,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",b6,{unique:!0}),t.createObjectStore("targetGlobal")}const Z_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class VE{constructor(e,n,r,i,s,o,a,l,u,c,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=u,this.ai=c,this.ui=h,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=d=>Promise.resolve(),!VE.D())throw new b(S.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Qj(this,i),this.Ti=n+"main",this.serializer=new cN(l),this.Ei=new Mr(this.Ti,this.ui,new a9(this.serializer)),this.Qr=new Hj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=vN(this.serializer),this.$r=new Vj,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,c===!1&&on("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new b(S.FAILED_PRECONDITION,Z_);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Yn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(async()=>{this.started&&await this.Ai()}))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Vd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Bs(e))return P("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return P("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return vu(e).get("owner").next(n=>T.resolve(this.Si(n)))}bi(e){return Vd(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=bt(n,"clientMetadata");return r.W().next(i=>{const s=this.vi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return T.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(const n of e)this.di.removeItem(this.Fi(n.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?T.resolve(!0):vu(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new b(S.FAILED_PRECONDITION,Z_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vd(e).W().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&P("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Bv(e,Yn._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Vd(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Gm.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Wj(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return qm.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){P("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===15?z6:l===14?SD:l===13?ID:l===12?j6:l===11?TD:void B()}(this.ui);let o;return this.Ei.runTransaction(e,i,s,a=>(o=new Bv(a,this.kr?this.kr.next():Yn._e),n==="readwrite-primary"?this.gi(o).next(l=>!!l||this.pi(o)).next(l=>{if(!l)throw on(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new b(S.FAILED_PRECONDITION,vD);return r(o)}).next(l=>this.wi(o).next(()=>l)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return vu(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new b(S.FAILED_PRECONDITION,Z_)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vu(e).put("owner",n)}static D(){return Mr.D()}yi(e){const n=vu(e);return n.get("owner").next(r=>this.Si(r)?(P("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):T.resolve())}Ci(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(on(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;Rx()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return P("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return on("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){on("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vu(t){return bt(t,"owner")}function Vd(t){return bt(t,"clientMetadata")}function l9(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=re(),i=re();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new FE(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Rx()?8:Mr.v(yt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new u9;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Ea()<=se.DEBUG&&P("QueryEngine","SDK will not create cache indexes for query:",Ta(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),T.resolve()):(Ea()<=se.DEBUG&&P("QueryEngine","Query:",Ta(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Ea()<=se.DEBUG&&P("QueryEngine","The SDK decides to create cache indexes for query:",Ta(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zn(n))):T.resolve())}ji(e,n){if(mC(n))return T.resolve(null);let r=Zn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=vp(n,null,"F"),r=Zn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=re(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Zi(n,a);return this.Xi(n,u,o,l.readTime)?this.ji(e,vp(n,null,"F")):this.es(e,u,n,l)}))})))}Hi(e,n,r,i){return mC(n)||i.isEqual(q.min())?T.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?T.resolve(null):(Ea()<=se.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ta(n)),this.es(e,o,n,w6(i,-1)).next(a=>a))})}Zi(e,n){let r=new ke(FD(e));return n.forEach((i,s)=>{Fh(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Ea()<=se.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",Ta(n)),this.zi.getDocumentsMatchingQuery(e,n,Ln.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new ut(J),this.rs=new js(s=>Fo(s),Lh),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wN(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function IN(t,e,n,r){return new c9(t,e,n,r)}async function SN(t,e){const n=Q(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=re();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})}function h9(t,e){const n=Q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const h=u.batch,d=h.keys();let f=T.resolve();return d.forEach(m=>{f=f.next(()=>c.getEntry(l,m)).next(g=>{const v=u.docVersions.get(m);j(v!==null),g.version.compareTo(v)<0&&(h.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),c.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=re();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function CN(t){const e=Q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function d9(t,e){const n=Q(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((c,h)=>{const d=i.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(Bt.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),i=i.insert(h,f),function(g,v,_){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(d,f,c)&&a.push(n.Qr.updateTargetData(s,f))});let l=xn(),u=re();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(f9(s,o,e.documentUpdates).next(c=>{l=c.cs,u=c.ls})),!r.isEqual(q.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return T.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.ns=i,s))}function f9(t,e,n){let r=re(),i=re();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=xn();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(q.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):P("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{cs:o,ls:i}})}function p9(t,e){const n=Q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function m9(t,e){const n=Q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,T.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new di(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function n0(t,e,n){const r=Q(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Bs(o))throw o;P("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function WC(t,e,n){const r=Q(t);let i=q.min(),s=re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const h=Q(l),d=h.rs.get(c);return d!==void 0?T.resolve(h.ns.get(d)):h.Qr.getTargetData(u,c)}(r,o,Zn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:q.min(),n?s:re())).next(a=>(g9(r,rj(e),a),{documents:a,hs:s})))}function g9(t,e,n){let r=t.ss.get(e)||q.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class HC{constructor(){this.activeTargetIds=uj()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RN{constructor(){this.no=new HC,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new HC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){P("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){P("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fd=null;function ey(){return Fd===null?Fd=function(){return 268435456+Math.round(2147483648*Math.random())}():Fd++,"0x"+Fd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht="WebChannelConnection";class w9 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){const a=ey(),l=this.bo(n,r.toUriEncodedString());P("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,s,o),this.Co(n,l,u,i).then(c=>(P("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw Oo("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){const i=y9[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const s=ey();return new Promise((o,a)=>{const l=new u6;l.setWithCredentials(!0),l.listenOnce(a6.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case X_.NO_ERROR:const c=l.getResponseJson();P(Ht,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case X_.TIMEOUT:P(Ht,`RPC '${e}' ${s} timed out`),a(new b(S.DEADLINE_EXCEEDED,"Request time out"));break;case X_.HTTP_ERROR:const h=l.getStatus();if(P(Ht,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const m=function(v){const _=v.toLowerCase().replace(/_/g,"-");return Object.values(S).indexOf(_)>=0?_:S.UNKNOWN}(f.status);a(new b(m,f.message))}else a(new b(S.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new b(S.UNAVAILABLE,"Connection failed."));break;default:B()}}finally{P(Ht,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);P(Ht,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Fo(e,n,r){const i=ey(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=s6(),a=o6(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");P(Ht,`Creating RPC '${e}' stream ${i}: ${c}`,l);const h=o.createWebChannel(c,l);let d=!1,f=!1;const m=new v9({lo:v=>{f?P(Ht,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(d||(P(Ht,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),P(Ht,`RPC '${e}' stream ${i} sending:`,v),h.send(v))},ho:()=>h.close()}),g=(v,_,p)=>{v.listen(_,y=>{try{p(y)}catch(w){setTimeout(()=>{throw w},0)}})};return g(h,Nd.EventType.OPEN,()=>{f||P(Ht,`RPC '${e}' stream ${i} transport opened.`)}),g(h,Nd.EventType.CLOSE,()=>{f||(f=!0,P(Ht,`RPC '${e}' stream ${i} transport closed`),m.Vo())}),g(h,Nd.EventType.ERROR,v=>{f||(f=!0,Oo(Ht,`RPC '${e}' stream ${i} transport errored:`,v),m.Vo(new b(S.UNAVAILABLE,"The operation could not be completed")))}),g(h,Nd.EventType.MESSAGE,v=>{var _;if(!f){const p=v.data[0];j(!!p);const y=p,w=y.error||((_=y[0])===null||_===void 0?void 0:_.error);if(w){P(Ht,`RPC '${e}' stream ${i} received error:`,w);const I=w.status;let R=function(Z){const W=ft[Z];if(W!==void 0)return XD(W)}(I),C=w.message;R===void 0&&(R=S.INTERNAL,C="Unknown error status: "+I+" with message "+w.message),f=!0,m.Vo(new b(R,C)),h.close()}else P(Ht,`RPC '${e}' stream ${i} received:`,p),m.mo(p)}}),g(a,l6.STAT_EVENT,v=>{v.stat===ZS.PROXY?P(Ht,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===ZS.NOPROXY&&P(Ht,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.Ro()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E9(){return typeof window<"u"?window:null}function gf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t){return new Rj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&P("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new kN(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===S.RESOURCE_EXHAUSTED?(on(n.toString()),on("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===S.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new b(S.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return P("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(P("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class T9 extends PN{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=Aj(this.serializer,e),r=function(s){if(!("targetChange"in s))return q.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?q.min():o.readTime?cn(o.readTime):q.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=Xv(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=_p(l)?{documents:sN(s,l)}:{query:NE(s,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=eN(s,o.resumeToken);const u=Kv(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(q.min())>0){a.readTime=Sl(s,o.snapshotVersion.toTimestamp());const u=Kv(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=bj(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=Xv(this.serializer),n.removeTarget=e,this.t_(n)}}class I9 extends PN{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(j(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=xj(e.writeResults,e.commitTime),r=cn(e.commitTime);return this.listener.T_(r,n)}return j(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Xv(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ep(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new b(S.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,Qv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new b(S.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Qv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new b(S.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}async function C9(t,e,n){var r;const i=Q(t),{request:s,V_:o,parent:a}=function(h,d,f){const{ut:m,parent:g}=NE(h,d),v={},_=[];let p=0;return f.forEach(y=>{const w="aggregate_"+p++;v[w]=y.alias,y.aggregateType==="count"?_.push({alias:w,count:{}}):y.aggregateType==="avg"?_.push({alias:w,avg:{field:Xi(y.fieldPath)}}):y.aggregateType==="sum"&&_.push({alias:w,sum:{field:Xi(y.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:_,structuredQuery:m.structuredQuery},parent:m.parent},V_:v,parent:g}}(i.serializer,function(h){const d=Q(h);return d.Pe||(d.Pe=LD(d,h.explicitOrderBy)),d.Pe}(e),n);i.connection.wo||delete s.parent;const l=(await i.vo("RunAggregationQuery",i.serializer.databaseId,a,s,1)).filter(c=>!!c.result);j(l.length===1);const u=(r=l[0].result)===null||r===void 0?void 0:r.aggregateFields;return Object.keys(u).reduce((c,h)=>(c[o[h]]=u[h],c),{})}class R9{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(on(n),this.g_=!1):P("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(async()=>{na(this)&&(P("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=Q(l);u.v_.add(4),await Uh(u),u.x_.set("Unknown"),u.v_.delete(4),await Qm(u)}(this))})}),this.x_=new R9(r,i)}}async function Qm(t){if(na(t))for(const e of t.F_)await e(!0)}async function Uh(t){for(const e of t.F_)await e(!1)}function AN(t,e){const n=Q(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),jE(n)?BE(n):Hl(n).Jo()&&UE(n,e))}function $E(t,e){const n=Q(t),r=Hl(n);n.C_.delete(e),r.Jo()&&xN(n,e),n.C_.size===0&&(r.Jo()?r.Xo():na(n)&&n.x_.set("Unknown"))}function UE(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(q.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hl(t).c_(e)}function xN(t,e){t.O_.Oe(e),Hl(t).l_(e)}function BE(t){t.O_=new Tj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Hl(t).start(),t.x_.p_()}function jE(t){return na(t)&&!Hl(t).Ho()&&t.C_.size>0}function na(t){return Q(t).v_.size===0}function bN(t){t.O_=void 0}async function P9(t){t.C_.forEach((e,n)=>{UE(t,e)})}async function A9(t,e){bN(t),jE(t)?(t.x_.S_(e),BE(t)):t.x_.set("Unknown")}async function x9(t,e,n){if(t.x_.set("Online"),e instanceof ZD&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))}(t,e)}catch(r){P("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Cp(t,r)}else if(e instanceof mf?t.O_.$e(e):e instanceof JD?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(q.min()))try{const r=await CN(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.C_.get(u);c&&s.C_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.C_.get(l);if(!c)return;s.C_.set(l,c.withResumeToken(Bt.EMPTY_BYTE_STRING,c.snapshotVersion)),xN(s,l);const h=new di(c.target,l,u,c.sequenceNumber);UE(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){P("RemoteStore","Failed to raise snapshot:",r),await Cp(t,r)}}async function Cp(t,e,n){if(!Bs(e))throw e;t.v_.add(1),await Uh(t),t.x_.set("Offline"),n||(n=()=>CN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{P("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await Qm(t)})}function DN(t,e){return e().catch(n=>Cp(t,n,e))}async function Bh(t){const e=Q(t),n=As(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;b9(e);)try{const i=await p9(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,D9(e,i)}catch(i){await Cp(e,i)}NN(e)&&ON(e)}function b9(t){return na(t)&&t.D_.length<10}function D9(t,e){t.D_.push(e);const n=As(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function NN(t){return na(t)&&!As(t).Ho()&&t.D_.length>0}function ON(t){As(t).start()}async function N9(t){As(t).d_()}async function O9(t){const e=As(t);for(const n of t.D_)e.I_(n.mutations)}async function M9(t,e,n){const r=t.D_.shift(),i=AE.from(r,e,n);await DN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Bh(t)}async function L9(t,e){e&&As(t).P_&&await async function(r,i){if(function(o){return vj(o)&&o!==S.ABORTED}(i.code)){const s=r.D_.shift();As(r).Zo(),await DN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Bh(r)}}(t,e),NN(t)&&ON(t)}async function GC(t,e){const n=Q(t);n.asyncQueue.verifyOperationInProgress(),P("RemoteStore","RemoteStore received new credentials");const r=na(n);n.v_.add(3),await Uh(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await Qm(n)}async function V9(t,e){const n=Q(t);e?(n.v_.delete(2),await Qm(n)):e||(n.v_.add(2),await Uh(n),n.x_.set("Unknown"))}function Hl(t){return t.N_||(t.N_=function(n,r,i){const s=Q(n);return s.R_(),new T9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:P9.bind(null,t),To:A9.bind(null,t),u_:x9.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),jE(t)?BE(t):t.x_.set("Unknown")):(await t.N_.stop(),bN(t))})),t.N_}function As(t){return t.L_||(t.L_=function(n,r,i){const s=Q(n);return s.R_(),new I9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:N9.bind(null,t),To:L9.bind(null,t),E_:O9.bind(null,t),T_:M9.bind(null,t)}),t.F_.push(async e=>{e?(t.L_.Zo(),await Bh(t)):(await t.L_.stop(),t.D_.length>0&&(P("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new zE(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new b(S.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function WE(t,e){if(on("AsyncQueue",`${e}: ${t}`),Bs(t))return new b(S.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this.comparator=e?(n,r)=>e(n,r)||O.comparator(n.key,r.key):(n,r)=>O.comparator(n.key,r.key),this.keyedMap=Vu(),this.sortedSet=new ut(this.comparator)}static emptySet(e){return new Za(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Za)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Za;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.B_=new ut(O.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):B():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Cl{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Cl(e,n,Za.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class $9{constructor(){this.queries=new js(e=>VD(e),Bm),this.onlineState="Unknown",this.W_=new Set}}async function HE(t,e){const n=Q(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new F9,r=e.U_()?0:1);try{switch(r){case 0:s.q_=await n.onListen(i,!0);break;case 1:s.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=WE(o,`Initialization of query '${Ta(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&GE(n)}async function qE(t,e){const n=Q(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function U9(t,e){const n=Q(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&GE(n)}function B9(t,e,n){const r=Q(t),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(e)}function GE(t){t.W_.forEach(e=>{e.next()})}var r0,KC;(KC=r0||(r0={})).j_="default",KC.Cache="cache";class YE{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Cl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=Cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==r0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.key=e}}class LN{constructor(e){this.key=e}}class j9{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=re(),this.mutatedKeys=re(),this.ha=FD(e),this.Pa=new Za(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new YC,i=n?n.Pa:this.Pa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const d=i.get(c),f=Fh(this.query,h)?h:null,m=!!d&&this.mutatedKeys.has(d.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let v=!1;d&&f?d.data.isEqual(f.data)?m!==g&&(r.track({type:3,doc:f}),v=!0):this.da(d,f)||(r.track({type:2,doc:f}),v=!0,(l&&this.ha(f,l)>0||u&&this.ha(f,u)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),v=!0):d&&!f&&(r.track({type:1,doc:d}),v=!0,(l||u)&&(a=!0)),v&&(f?(o=o.add(f),s=g?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((c,h)=>function(f,m){const g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B()}};return g(f)-g(m)}(c.type,h.type)||this.ha(c.doc,h.doc)),this.Aa(r),i=i!=null&&i;const a=n&&!i?this.Ra():[],l=this.la.size===0&&this.current&&!i?1:0,u=l!==this.ca;return this.ca=l,o.length!==0||u?{snapshot:new Cl(this.query,e.Pa,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new YC,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=re(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new LN(r))}),this.la.forEach(r=>{e.has(r)||n.push(new MN(r))}),n}fa(e){this.ua=e.hs,this.la=re();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return Cl.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class z9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class W9{constructor(e){this.key=e,this.pa=!1}}class H9{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new js(a=>VD(a),Bm),this.Sa=new Map,this.ba=new Set,this.Da=new ut(O.comparator),this.Ca=new Map,this.va=new LE,this.Fa={},this.Ma=new Map,this.xa=jo.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function q9(t,e,n=!0){const r=jN(t);let i;const s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await VN(r,e,n,!0),i}async function G9(t,e){const n=jN(t);await VN(n,e,!0,!1)}async function VN(t,e,n,r){const i=await m9(t.localStore,Zn(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await Y9(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&AN(t.remoteStore,i),a}async function Y9(t,e,n,r,i){t.Na=(h,d,f)=>async function(g,v,_,p){let y=v.view.Ta(_);y.Xi&&(y=await WC(g.localStore,v.query,!1).then(({documents:C})=>v.view.Ta(C,y)));const w=p&&p.targetChanges.get(v.targetId),I=p&&p.targetMismatches.get(v.targetId)!=null,R=v.view.applyChanges(y,g.isPrimaryClient,w,I);return XC(g,v.targetId,R.Va),R.snapshot}(t,h,d,f);const s=await WC(t.localStore,e,!0),o=new j9(e,s.hs),a=o.Ta(s.documents),l=$h.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);XC(t,n,u.Va);const c=new z9(e,n,o);return t.wa.set(e,c),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),u.snapshot}async function K9(t,e,n){const r=Q(t),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!Bm(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await n0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&$E(r.remoteStore,i.targetId),i0(r,i.targetId)}).catch(Zo)):(i0(r,i.targetId),await n0(r.localStore,i.targetId,!0))}async function Q9(t,e){const n=Q(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),$E(n.remoteStore,r.targetId))}async function X9(t,e,n){const r=zN(t);try{const i=await function(o,a){const l=Q(o),u=Ke.now(),c=a.reduce((f,m)=>f.add(m.key),re());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=xn(),g=re();return l.os.getEntries(f,c).next(v=>{m=v,m.forEach((_,p)=>{p.isValidDocument()||(g=g.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,m)).next(v=>{h=v;const _=[];for(const p of a){const y=gj(p,h.get(p.key).overlayedDocument);y!=null&&_.push(new Oi(p.key,y,PD(y.value.mapValue),Kt.exists(!0)))}return l.mutationQueue.addMutationBatch(f,u,_,a)}).next(v=>{d=v;const _=v.applyToLocalDocumentSet(h,g);return l.documentOverlayCache.saveOverlays(f,v.batchId,_)})}).then(()=>({batchId:d.batchId,changes:UD(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Fa[o.currentUser.toKey()];u||(u=new ut(J)),u=u.insert(a,l),o.Fa[o.currentUser.toKey()]=u}(r,i.batchId,n),await jh(r,i.changes),await Bh(r.remoteStore)}catch(i){const s=WE(i,"Failed to persist write");n.reject(s)}}async function FN(t,e){const n=Q(t);try{const r=await d9(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ca.get(s);o&&(j(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?j(o.pa):i.removedDocuments.size>0&&(j(o.pa),o.pa=!1))}),await jh(n,r,e)}catch(r){await Zo(r)}}function QC(t,e,n){const r=Q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.wa.forEach((s,o)=>{const a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Q(o);l.onlineState=a;let u=!1;l.queries.forEach((c,h)=>{for(const d of h.Q_)d.G_(a)&&(u=!0)}),u&&GE(l)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function J9(t,e,n){const r=Q(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ca.get(e),s=i&&i.key;if(s){let o=new ut(O.comparator);o=o.insert(s,tt.newNoDocument(s,q.min()));const a=re().add(s),l=new Hm(q.min(),new Map,new ut(J),o,a);await FN(r,l),r.Da=r.Da.remove(s),r.Ca.delete(e),KE(r)}else await n0(r.localStore,e,!1).then(()=>i0(r,e,n)).catch(Zo)}async function Z9(t,e){const n=Q(t),r=e.batch.batchId;try{const i=await h9(n.localStore,e);UN(n,r,null),$N(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await jh(n,i)}catch(i){await Zo(i)}}async function ez(t,e,n){const r=Q(t);try{const i=await function(o,a){const l=Q(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(j(h!==null),c=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);UN(r,e,n),$N(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await jh(r,i)}catch(i){await Zo(i)}}function $N(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function UN(t,e,n){const r=Q(t);let i=r.Fa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function i0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||BN(t,r)})}function BN(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);n!==null&&($E(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),KE(t))}function XC(t,e,n){for(const r of n)r instanceof MN?(t.va.addReference(r.key,e),tz(t,r)):r instanceof LN?(P("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||BN(t,r.key)):B()}function tz(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(P("SyncEngine","New document in limbo: "+n),t.ba.add(r),KE(t))}function KE(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new O(_e.fromString(e)),r=t.xa.next();t.Ca.set(r,new W9(n)),t.Da=t.Da.insert(n,r),AN(t.remoteStore,new di(Zn(Vh(n.path)),r,"TargetPurposeLimboResolution",Yn._e))}}async function jh(t,e,n){const r=Q(t),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{o.push(r.Na(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const c=FE.Ki(l.targetId,u);s.push(c)}}))}),await Promise.all(o),r.ya.u_(i),await async function(l,u){const c=Q(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>T.forEach(u,d=>T.forEach(d.qi,f=>c.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>T.forEach(d.Qi,f=>c.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!Bs(h))throw h;P("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const d=h.targetId;if(!h.fromCache){const f=c.ns.get(d),m=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(m);c.ns=c.ns.insert(d,g)}}}(r.localStore,s))}async function nz(t,e){const n=Q(t);if(!n.currentUser.isEqual(e)){P("SyncEngine","User change. New user:",e.toKey());const r=await SN(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(l=>{l.reject(new b(S.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await jh(n,r.us)}}function rz(t,e){const n=Q(t),r=n.Ca.get(e);if(r&&r.pa)return re().add(r.key);{let i=re();const s=n.Sa.get(e);if(!s)return i;for(const o of s){const a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function jN(t){const e=Q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=FN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J9.bind(null,e),e.ya.u_=U9.bind(null,e.eventManager),e.ya.La=B9.bind(null,e.eventManager),e}function zN(t){const e=Q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Z9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ez.bind(null,e),e}class s0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Km(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return IN(this.persistence,new TN,e.initialUser,this.serializer)}createPersistence(e){return new EN(Ym.Hr,this.serializer)}createSharedClientState(e){return new RN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class WN extends s0{constructor(e,n,r){super(),this.ka=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ka.initialize(this,e),await zN(this.ka.syncEngine),await Bh(this.ka.remoteStore),await this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return IN(this.persistence,new TN,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new Gj(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new S6(n,this.persistence);return new I6(e.asyncQueue,r)}createPersistence(e){const n=l9(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new VE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,E9(),gf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new RN}}class QE{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>QC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nz.bind(null,this.syncEngine),await V9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $9}()}createDatastore(e){const n=Km(e.databaseInfo.databaseId),r=function(s){return new w9(s)}(e.databaseInfo);return function(s,o,a,l){return new S9(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new k9(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>QC(this.syncEngine,n,0),function(){return qC.D()?new qC:new _9}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const h=new H9(i,s,o,a,l,u);return c&&(h.Oa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=Q(r);P("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await Uh(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):on("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=sn.UNAUTHENTICATED,this.clientId=gD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{P("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(P("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new b(S.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=WE(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function _f(t,e){t.asyncQueue.verifyOperationInProgress(),P("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await SN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function o0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await sz(t);P("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>GC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>GC(e.remoteStore,i)),t._onlineComponents=e}function HN(t){return t.name==="FirebaseError"?t.code===S.FAILED_PRECONDITION||t.code===S.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function sz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){P("FirestoreClient","Using user provided OfflineComponentProvider");try{await _f(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!HN(n))throw n;Oo("Error using user provided cache. Falling back to memory cache: "+n),await _f(t,new s0)}}else P("FirestoreClient","Using default OfflineComponentProvider"),await _f(t,new s0);return t._offlineComponents}async function JE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(P("FirestoreClient","Using user provided OnlineComponentProvider"),await o0(t,t._uninitializedComponentsProvider._online)):(P("FirestoreClient","Using default OnlineComponentProvider"),await o0(t,new QE))),t._onlineComponents}function oz(t){return JE(t).then(e=>e.syncEngine)}function az(t){return JE(t).then(e=>e.datastore)}async function Rp(t){const e=await JE(t),n=e.eventManager;return n.onListen=q9.bind(null,e.syncEngine),n.onUnlisten=K9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=G9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Q9.bind(null,e.syncEngine),n}function lz(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new XE({next:d=>{o.enqueueAndForget(()=>qE(s,h));const f=d.docs.has(a);!f&&d.fromCache?u.reject(new b(S.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&l&&l.source==="server"?u.reject(new b(S.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new YE(Vh(a.path),c,{includeMetadataChanges:!0,ta:!0});return HE(s,h)}(await Rp(t),t.asyncQueue,e,n,r)),r.promise}function uz(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new XE({next:d=>{o.enqueueAndForget(()=>qE(s,h)),d.fromCache&&l.source==="server"?u.reject(new b(S.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new YE(a,c,{includeMetadataChanges:!0,ta:!0});return HE(s,h)}(await Rp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t,e,n){if(!n)throw new b(S.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cz(t,e,n,r){if(e===!0&&r===!0)throw new b(S.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ZC(t){if(!O.isDocumentKey(t))throw new b(S.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function eR(t){if(O.isDocumentKey(t))throw new b(S.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":B()}function hn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new b(S.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xm(t);throw new b(S.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function hz(t,e){if(e<=0)throw new b(S.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new b(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new b(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new b(S.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new b(S.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new b(S.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ZE{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tR({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new b(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new b(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tR(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new d6;switch(r.type){case"firstParty":return new m6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new b(S.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=JC.get(n);r&&(P("ComponentProvider","Removing Datastore"),JC.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Kr(this.firestore,e,this._query)}}class Jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}}class vs extends Kr{constructor(e,n,r){super(e,n,Vh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new O(e))}withConverter(e){return new vs(this.firestore,e,this._path)}}function YN(t,e,...n){if(t=ce(t),GN("collection","path",e),t instanceof ZE){const r=_e.fromString(e,...n);return eR(r),new vs(t,null,r)}{if(!(t instanceof Jt||t instanceof vs))throw new b(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return eR(r),new vs(t.firestore,null,r)}}function Xc(t,e,...n){if(t=ce(t),arguments.length===1&&(e=gD.newId()),GN("doc","path",e),t instanceof ZE){const r=_e.fromString(e,...n);return ZC(r),new Jt(t,null,new O(r))}{if(!(t instanceof Jt||t instanceof vs))throw new b(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return ZC(r),new Jt(t.firestore,t instanceof vs?t.converter:null,new O(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dz{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new kN(this,"async_queue_retry"),this.cu=()=>{const n=gf();n&&P("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=gf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=gf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new Jn;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Bs(e))throw e;P("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw on("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const i=zE.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&B()}verifyOperationInProgress(){}async Tu(){let e;do e=this.nu,await e;while(e!==this.nu)}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function nR(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Er extends ZE{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new dz}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||KN(this),this._firestoreClient.terminate()}}function fz(t,e,n){n||(n="(default)");const r=Ih(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(gl(s,e))return i;throw new b(S.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new b(S.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new b(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function ql(t){return t._firestoreClient||KN(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function KN(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,c){return new H6(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,qN(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new iz(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function pz(t,e){gz(t=hn(t,Er));const n=ql(t);if(n._uninitializedComponentsProvider)throw new b(S.FAILED_PRECONDITION,"SDK cache is already specified.");Oo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new QE;return mz(n,i,new WN(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function mz(t,e,n){const r=new Jn;return t.asyncQueue.enqueue(async()=>{try{await _f(t,n),await o0(t,e),r.resolve()}catch(i){const s=i;if(!HN(s))throw s;Oo("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function gz(t){if(t._initialized||t._terminated)throw new b(S.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class yz{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rl(Bt.fromBase64String(e))}catch(n){throw new b(S.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rl(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new b(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ge(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new b(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new b(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vz=/^__.*__$/;class wz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Oi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wl(e,this.data,n,this.fieldTransforms)}}class QN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Oi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function XN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B()}}class Zm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new Zm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return kp(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(XN(this.Vu)&&vz.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class Ez{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Km(e)}Cu(e,n,r,i=!1){return new Zm({Vu:e,methodName:n,Du:r,path:Ge.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wh(t){const e=t._freezeSettings(),n=Km(t._databaseId);return new Ez(t._databaseId,!!e.ignoreUndefinedProperties,n)}function JN(t,e,n,r,i,s={}){const o=t.Cu(s.merge||s.mergeFields?2:0,e,n,i);rT("Data must be an object, but it was:",o,r);const a=eO(r,o);let l,u;if(s.merge)l=new yn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const d=a0(e,h,n);if(!o.contains(d))throw new b(S.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);nO(c,d)||c.push(d)}l=new yn(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new wz(new Yt(a),l,u)}class eg extends zh{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eg}}function Tz(t,e,n){return new Zm({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class tT extends zh{_toFieldTransform(e){return new kE(e.path,new Tl)}isEqual(e){return e instanceof tT}}class nT extends zh{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=Tz(this,e,!0),r=this.vu.map(s=>Gl(s,n)),i=new $o(r);return new kE(e.path,i)}isEqual(e){return e instanceof nT&&gl(this.vu,e.vu)}}function Iz(t,e,n,r){const i=t.Cu(1,e,n);rT("Data must be an object, but it was:",i,r);const s=[],o=Yt.empty();ea(r,(l,u)=>{const c=iT(e,l,n);u=ce(u);const h=i.yu(c);if(u instanceof eg)s.push(c);else{const d=Gl(u,h);d!=null&&(s.push(c),o.set(c,d))}});const a=new yn(s);return new QN(o,a,i.fieldTransforms)}function Sz(t,e,n,r,i,s){const o=t.Cu(1,e,n),a=[a0(e,r,n)],l=[i];if(s.length%2!=0)throw new b(S.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(a0(e,s[d])),l.push(s[d+1]);const u=[],c=Yt.empty();for(let d=a.length-1;d>=0;--d)if(!nO(u,a[d])){const f=a[d];let m=l[d];m=ce(m);const g=o.yu(f);if(m instanceof eg)u.push(f);else{const v=Gl(m,g);v!=null&&(u.push(f),c.set(f,v))}}const h=new yn(u);return new QN(c,h,o.fieldTransforms)}function ZN(t,e,n,r=!1){return Gl(n,t.Cu(r?4:3,e))}function Gl(t,e){if(tO(t=ce(t)))return rT("Unsupported field value:",e,t),eO(t,e);if(t instanceof zh)return function(r,i){if(!XN(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Gl(a,i.wu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ce(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ke.fromDate(r);return{timestampValue:Sl(i.serializer,s)}}if(r instanceof Ke){const s=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Sl(i.serializer,s)}}if(r instanceof eT)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rl)return{bytesValue:eN(i.serializer,r._byteString)};if(r instanceof Jt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:DE(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${Xm(r)}`)}(t,e)}function eO(t,e){const n={};return CD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ea(t,(r,i)=>{const s=Gl(i,e.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function tO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof eT||t instanceof Rl||t instanceof Jt||t instanceof zh)}function rT(t,e,n){if(!tO(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Xm(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function a0(t,e,n){if((e=ce(e))instanceof Jm)return e._internalPath;if(typeof e=="string")return iT(t,e);throw kp("Field path arguments must be of type string or ",t,!1,void 0,n)}const Cz=new RegExp("[~\\*/\\[\\]]");function iT(t,e,n){if(e.search(Cz)>=0)throw kp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jm(...e.split("."))._internalPath}catch{throw kp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kp(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new b(S.INVALID_ARGUMENT,a+t+l)}function nO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Rz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(tg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Rz extends sT{data(){return super.data()}}function tg(t,e){return typeof e=="string"?iT(t,e):e instanceof Jm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new b(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oT{}let ng=class extends oT{};function kz(t,e,...n){let r=[];e instanceof oT&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof aT).length,a=s.filter(l=>l instanceof rg).length;if(o>1||o>0&&a>0)throw new b(S.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class rg extends ng{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new rg(e,n,r)}_apply(e){const n=this._parse(e);return sO(e._query,n),new Kr(e.firestore,e.converter,Yv(e._query,n))}_parse(e){const n=Wh(e.firestore);return function(s,o,a,l,u,c,h){let d;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new b(S.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){iR(h,c);const f=[];for(const m of h)f.push(rR(l,s,m));d={arrayValue:{values:f}}}else d=rR(l,s,h)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||iR(h,c),d=ZN(a,o,h,c==="in"||c==="not-in");return oe.create(u,c,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Dne(t,e,n){const r=e,i=tg("where",t);return rg._create(i,r,n)}class aT extends oT{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new aT(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ee.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)sO(o,l),o=Yv(o,l)}(e._query,n),new Kr(e.firestore,e.converter,Yv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class lT extends ng{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new lT(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new b(S.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new b(S.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Kc(s,o)}(e._query,this._field,this._direction);return new Kr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ta(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Nne(t,e="asc"){const n=e,r=tg("orderBy",t);return lT._create(r,n)}class uT extends ng{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new uT(e,n,r)}_apply(e){return new Kr(e.firestore,e.converter,vp(e._query,this._limit,this._limitType))}}function One(t){return hz("limit",t),uT._create("limit",t,"F")}let Pz=class iO extends ng{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new iO(e,n,r)}_apply(e){const n=Az(e,this.type,this._docOrFields,this._inclusive);return new Kr(e.firestore,e.converter,function(i,s){return new ta(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}};function Mne(...t){return Pz._create("startAfter",t,!1)}function Az(t,e,n,r){if(n[0]=ce(n[0]),n[0]instanceof sT)return function(s,o,a,l,u){if(!l)throw new b(S.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const c=[];for(const h of Ja(s))if(h.field.isKeyField())c.push(Vo(o,l.key));else{const d=l.data.field(h.field);if(Um(d))throw new b(S.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const f=h.field.canonicalString();throw new b(S.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}c.push(d)}return new Ps(c,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Wh(t.firestore);return function(o,a,l,u,c,h){const d=o.explicitOrderBy;if(c.length>d.length)throw new b(S.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const f=[];for(let m=0;m<c.length;m++){const g=c[m];if(d[m].field.isKeyField()){if(typeof g!="string")throw new b(S.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof g}`);if(!RE(o)&&g.indexOf("/")!==-1)throw new b(S.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${g}' contains a slash.`);const v=o.path.child(_e.fromString(g));if(!O.isDocumentKey(v))throw new b(S.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const _=new O(v);f.push(Vo(a,_))}else{const v=ZN(l,u,g);f.push(v)}}return new Ps(f,h)}(t._query,t.firestore._databaseId,i,e,n,r)}}function rR(t,e,n){if(typeof(n=ce(n))=="string"){if(n==="")throw new b(S.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RE(e)&&n.indexOf("/")!==-1)throw new b(S.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_e.fromString(n));if(!O.isDocumentKey(r))throw new b(S.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vo(t,new O(r))}if(n instanceof Jt)return Vo(t,n._key);throw new b(S.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xm(n)}.`)}function iR(t,e){if(!Array.isArray(t)||t.length===0)throw new b(S.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sO(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new b(S.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new b(S.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xz{convertValue(e,n="none"){switch(Lo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw B()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ea(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new eT(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=SE(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qc(e));default:return null}}convertTimestamp(e){const n=Cs(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_e.fromString(e);j(uN(r));const i=new Mo(r.get(1),r.get(3)),s=new O(r.popFirst(5));return i.isEqual(n)||on(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function bz(){return new _z("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class aO extends sT{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(tg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class yf extends aO{data(e={}){return super.data(e)}}class lO{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Uu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yf(this._firestore,this._userDataWriter,r.key,r,new Uu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new b(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new yf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Uu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new yf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Uu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:Dz(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Dz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(t){t=hn(t,Jt);const e=hn(t.firestore,Er);return lz(ql(e),t._key).then(n=>hO(e,t,n))}class ig extends xz{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}function Lne(t){t=hn(t,Kr);const e=hn(t.firestore,Er),n=ql(e),r=new ig(e);return rO(t._query),uz(n,t._query).then(i=>new lO(e,r,t,i))}function Nz(t,e,n){t=hn(t,Jt);const r=hn(t.firestore,Er),i=oO(t.converter,e,n);return sg(r,[JN(Wh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Kt.none())])}function Vne(t,e,n,...r){t=hn(t,Jt);const i=hn(t.firestore,Er),s=Wh(i);let o;return o=typeof(e=ce(e))=="string"||e instanceof Jm?Sz(s,"updateDoc",t._key,e,n,r):Iz(s,"updateDoc",t._key,e),sg(i,[o.toMutation(t._key,Kt.exists(!0))])}function Fne(t){return sg(hn(t.firestore,Er),[new Wm(t._key,Kt.none())])}function $ne(t,e){const n=hn(t.firestore,Er),r=Xc(t),i=oO(t.converter,e);return sg(n,[JN(Wh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Kt.exists(!1))]).then(()=>r)}function cO(t,...e){var n,r,i;t=ce(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||nR(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(nR(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,u,c;if(t instanceof Jt)u=hn(t.firestore,Er),c=Vh(t._key.path),l={next:h=>{e[o]&&e[o](hO(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=hn(t,Kr);u=hn(h.firestore,Er),c=h._query;const d=new ig(u);l={next:f=>{e[o]&&e[o](new lO(u,d,h,f))},error:e[o+1],complete:e[o+2]},rO(t._query)}return function(d,f,m,g){const v=new XE(g),_=new YE(f,v,m);return d.asyncQueue.enqueueAndForget(async()=>HE(await Rp(d),_)),()=>{v.Qa(),d.asyncQueue.enqueueAndForget(async()=>qE(await Rp(d),_))}}(ql(u),c,a,l)}function sg(t,e){return function(r,i){const s=new Jn;return r.asyncQueue.enqueueAndForget(async()=>X9(await oz(r),i,s)),s.promise}(ql(t),e)}function hO(t,e,n){const r=n.docs.get(e._key),i=new ig(t);return new aO(t,i,e._key,r,new Uu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oz(t){return Mz(t,{count:bz()})}function Mz(t,e){const n=hn(t.firestore,Er),r=ql(n),i=function(o,a){const l=[];for(const u in o)Object.prototype.hasOwnProperty.call(o,u)&&l.push(a(o[u],u,o));return l}(e,(s,o)=>new _j(o,s.aggregateType,s._internalFieldPath));return function(o,a,l){const u=new Jn;return o.asyncQueue.enqueueAndForget(async()=>{try{const c=await az(o);u.resolve(C9(c,a,l))}catch(c){u.reject(c)}}),u.promise}(r,t._query,i).then(s=>function(a,l,u){const c=new ig(a);return new yz(l,c,u)}(n,t,s))}class Lz{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=$z(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function Vz(t){return new Lz(t)}class Fz{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new QE,this._offlineComponentProvider=new WN(this._onlineComponentProvider,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}function $z(t){return new Fz(t==null?void 0:t.forceOwnership)}function Uz(){return new tT("serverTimestamp")}function Une(...t){return new nT("arrayUnion",t)}(function(e,n=!0){(function(i){zl=i})(Fs),Ss(new Si("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Er(new f6(r.getProvider("auth-internal")),new _6(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new b(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mo(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Xn(eC,"4.5.0",e),Xn(eC,"4.5.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="firebasestorage.googleapis.com",fO="storageBucket",Bz=2*60*1e3,jz=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it extends qr{constructor(e,n,r=0){super(ty(e),`Firebase Storage: ${n} (${ty(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,it.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ty(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var rt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(rt||(rt={}));function ty(t){return"storage/"+t}function cT(){const t="An unknown error occurred, please check the error payload for server response.";return new it(rt.UNKNOWN,t)}function zz(t){return new it(rt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Wz(t){return new it(rt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Hz(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new it(rt.UNAUTHENTICATED,t)}function qz(){return new it(rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Gz(t){return new it(rt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Yz(){return new it(rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Kz(){return new it(rt.CANCELED,"User canceled the upload/download.")}function Qz(t){return new it(rt.INVALID_URL,"Invalid URL '"+t+"'.")}function Xz(t){return new it(rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Jz(){return new it(rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+fO+"' property when initializing the app?")}function Zz(){return new it(rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function eW(){return new it(rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function tW(t){return new it(rt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function l0(t){return new it(rt.INVALID_ARGUMENT,t)}function pO(){return new it(rt.APP_DELETED,"The Firebase app was deleted.")}function nW(t){return new it(rt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function sc(t,e){return new it(rt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function wu(t){throw new it(rt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=bn.makeFromUrl(e,n)}catch{return new bn(e,"")}if(r.path==="")return r;throw Xz(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${c}/b/${i}/o${d}`,"i"),m={bucket:1,path:3},g=n===dO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",_=new RegExp(`^https?://${g}/${i}/${v}`,"i"),y=[{regex:a,indices:l,postModify:s},{regex:f,indices:m,postModify:u},{regex:_,indices:{bucket:1,path:2},postModify:u}];for(let w=0;w<y.length;w++){const I=y[w],R=I.regex.exec(e);if(R){const C=R[I.indices.bucket];let N=R[I.indices.path];N||(N=""),r=new bn(C,N),I.postModify(r);break}}if(r==null)throw Qz(e);return r}}class rW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iW(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...v){u||(u=!0,e.apply(null,v))}function h(v){i=setTimeout(()=>{i=null,t(f,l())},v)}function d(){s&&clearTimeout(s)}function f(v,..._){if(u){d();return}if(v){d(),c.call(null,v,..._);return}if(l()||o){d(),c.call(null,v,..._);return}r<64&&(r*=2);let y;a===1?(a=2,y=0):y=(r+Math.random())*1e3,h(y)}let m=!1;function g(v){m||(m=!0,d(),!u&&(i!==null?(v||(a=2),clearTimeout(i),h(0)):v||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}function sW(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oW(t){return t!==void 0}function aW(t){return typeof t=="object"&&!Array.isArray(t)}function hT(t){return typeof t=="string"||t instanceof String}function sR(t){return dT()&&t instanceof Blob}function dT(){return typeof Blob<"u"}function oR(t,e,n,r){if(r<e)throw l0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw l0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function mO(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(wo||(wo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lW(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uW{constructor(e,n,r,i,s,o,a,l,u,c,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,m)=>{this.resolve_=f,this.reject_=m,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new $d(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===wo.NO_ERROR,l=s.getStatus();if(!a||lW(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===wo.ABORT;r(!1,new $d(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new $d(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());oW(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=cT();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?pO():Kz();o(l)}else{const l=Yz();o(l)}};this.canceled_?n(!1,new $d(!1,null,!0)):this.backoffId_=iW(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&sW(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $d{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function cW(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function hW(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function dW(t,e){e&&(t["X-Firebase-GMPID"]=e)}function fW(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function pW(t,e,n,r,i,s,o=!0){const a=mO(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return dW(u,e),cW(u,n),hW(u,s),fW(u,r),new uW(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mW(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function gW(...t){const e=mW();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(dT())return new Blob(t);throw new it(rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function _W(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yW(t){if(typeof atob>"u")throw tW("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ny{constructor(e,n){this.data=e,this.contentType=n||null}}function vW(t,e){switch(t){case Fr.RAW:return new ny(gO(e));case Fr.BASE64:case Fr.BASE64URL:return new ny(_O(t,e));case Fr.DATA_URL:return new ny(EW(e),TW(e))}throw cT()}function gO(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function wW(t){let e;try{e=decodeURIComponent(t)}catch{throw sc(Fr.DATA_URL,"Malformed data URL.")}return gO(e)}function _O(t,e){switch(t){case Fr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw sc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Fr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw sc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=yW(e)}catch(i){throw i.message.includes("polyfill")?i:sc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class yO{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw sc(Fr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=IW(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function EW(t){const e=new yO(t);return e.base64?_O(Fr.BASE64,e.rest):wW(e.rest)}function TW(t){return new yO(t).contentType}function IW(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n){let r=0,i="";sR(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(sR(this.data_)){const r=this.data_,i=_W(r,e,n);return i===null?null:new Zi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Zi(r,!0)}}static getBlob(...e){if(dT()){const n=e.map(r=>r instanceof Zi?r.data_:r);return new Zi(gW.apply(null,n))}else{const n=e.map(o=>hT(o)?vW(Fr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Zi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(t){let e;try{e=JSON.parse(t)}catch{return null}return aW(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SW(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function CW(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function wO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RW(t,e){return e}class nn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||RW}}let Ud=null;function kW(t){return!hT(t)||t.length<2?t:wO(t)}function EO(){if(Ud)return Ud;const t=[];t.push(new nn("bucket")),t.push(new nn("generation")),t.push(new nn("metageneration")),t.push(new nn("name","fullPath",!0));function e(s,o){return kW(o)}const n=new nn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new nn("size");return i.xform=r,t.push(i),t.push(new nn("timeCreated")),t.push(new nn("updated")),t.push(new nn("md5Hash",null,!0)),t.push(new nn("cacheControl",null,!0)),t.push(new nn("contentDisposition",null,!0)),t.push(new nn("contentEncoding",null,!0)),t.push(new nn("contentLanguage",null,!0)),t.push(new nn("contentType",null,!0)),t.push(new nn("metadata","customMetadata",!0)),Ud=t,Ud}function PW(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new bn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function AW(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return PW(r,t),r}function TO(t,e,n){const r=vO(e);return r===null?null:AW(t,r,n)}function xW(t,e,n,r){const i=vO(e);if(i===null||!hT(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const c=t.bucket,h=t.fullPath,d="/b/"+o(c)+"/o/"+o(h),f=og(d,n,r),m=mO({alt:"media",token:u});return f+m})[0]}function bW(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class fT{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(t){if(!t)throw cT()}function DW(t,e){function n(r,i){const s=TO(t,i,e);return IO(s!==null),s}return n}function NW(t,e){function n(r,i){const s=TO(t,i,e);return IO(s!==null),xW(s,i,t.host,t._protocol)}return n}function SO(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=qz():i=Hz():n.getStatus()===402?i=Wz(t.bucket):n.getStatus()===403?i=Gz(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function CO(t){const e=SO(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=zz(t.path)),s.serverResponse=i.serverResponse,s}return n}function OW(t,e,n){const r=e.fullServerUrl(),i=og(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new fT(i,s,NW(t,n),o);return a.errorHandler=CO(e),a}function MW(t,e){const n=e.fullServerUrl(),r=og(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,u){}const a=new fT(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=CO(e),a}function LW(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function VW(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=LW(null,e)),r}function FW(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let y="";for(let w=0;w<2;w++)y=y+Math.random().toString().slice(2);return y}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=VW(e,r,i),c=bW(u,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,d=`\r
--`+l+"--",f=Zi.getBlob(h,r,d);if(f===null)throw Zz();const m={name:u.fullPath},g=og(s,t.host,t._protocol),v="POST",_=t.maxUploadRetryTime,p=new fT(g,v,DW(t,n),_);return p.urlParams=m,p.headers=o,p.body=f.uploadData(),p.errorHandler=SO(e),p}class $W{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=wo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=wo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw wu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw wu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class UW extends $W{initXhr(){this.xhr_.responseType="text"}}function pT(){return new UW}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n){this._service=e,n instanceof bn?this._location=n:this._location=bn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new zo(e,n)}get root(){const e=new bn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wO(this._location.path)}get storage(){return this._service}get parent(){const e=SW(this._location.path);if(e===null)return null;const n=new bn(this._location.bucket,e);return new zo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw nW(e)}}function BW(t,e,n){t._throwIfRoot("uploadBytes");const r=FW(t.storage,t._location,EO(),new Zi(e,!0),n);return t.storage.makeRequestWithTokens(r,pT).then(i=>({metadata:i,ref:t}))}function jW(t){t._throwIfRoot("getDownloadURL");const e=OW(t.storage,t._location,EO());return t.storage.makeRequestWithTokens(e,pT).then(n=>{if(n===null)throw eW();return n})}function zW(t){t._throwIfRoot("deleteObject");const e=MW(t.storage,t._location);return t.storage.makeRequestWithTokens(e,pT)}function WW(t,e){const n=CW(t._location.path,e),r=new bn(t._location.bucket,n);return new zo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HW(t){return/^[A-Za-z]+:\/\//.test(t)}function qW(t,e){return new zo(t,e)}function RO(t,e){if(t instanceof mT){const n=t;if(n._bucket==null)throw Jz();const r=new zo(n,n._bucket);return e!=null?RO(r,e):r}else return e!==void 0?WW(t,e):t}function GW(t,e){if(e&&HW(e)){if(t instanceof mT)return qW(t,e);throw l0("To use ref(service, url), the first argument must be a Storage instance.")}else return RO(t,e)}function aR(t,e){const n=e==null?void 0:e[fO];return n==null?null:bn.makeFromBucketSpec(n,t)}function YW(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Ix(i,t.app.options.projectId))}class mT{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=dO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Bz,this._maxUploadRetryTime=jz,this._requests=new Set,i!=null?this._bucket=bn.makeFromBucketSpec(i,this._host):this._bucket=aR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=bn.makeFromBucketSpec(this._url,e):this._bucket=aR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new zo(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new rW(pO());{const o=pW(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const lR="@firebase/storage",uR="0.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO="storage";function Bne(t,e,n){return t=ce(t),BW(t,e,n)}function jne(t){return t=ce(t),jW(t)}function zne(t){return t=ce(t),zW(t)}function Wne(t,e){return t=ce(t),GW(t,e)}function KW(t=jw(),e){t=ce(t);const r=Ih(t,kO).getImmediate({identifier:e}),i=wx("storage");return i&&QW(r,...i),r}function QW(t,e,n,r={}){YW(t,e,n,r)}function XW(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new mT(n,r,i,e,Fs)}function JW(){Ss(new Si(kO,XW,"PUBLIC").setMultipleInstances(!0)),Xn(lR,uR,""),Xn(lR,uR,"esm2017")}JW();var cR={};const hR="@firebase/database",dR="1.0.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PO="";function ZW(t){PO=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Rt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:bc(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tH{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Gr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new eH(e)}}catch{}return new tH},ho=AO("localStorage"),u0=AO("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=new _m("@firebase/database"),nH=function(){let t=1;return function(){return t++}}(),xO=function(t){const e=NU(t),n=new AU;n.update(e);const r=n.digest();return $w.encodeByteArray(r)},Hh=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Hh.apply(null,r):typeof r=="object"?e+=Rt(r):e+=r,e+=" "}return e};let Eo=null,fR=!0;const rH=function(t,e){D(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(el.logLevel=se.VERBOSE,Eo=el.log.bind(el),e&&u0.set("logging_enabled",!0)):typeof t=="function"?Eo=t:(Eo=null,u0.remove("logging_enabled"))},Vt=function(...t){if(fR===!0&&(fR=!1,Eo===null&&u0.get("logging_enabled")===!0&&rH(!0)),Eo){const e=Hh.apply(null,t);Eo(e)}},qh=function(t){return function(...e){Vt(t,...e)}},c0=function(...t){const e="FIREBASE INTERNAL ERROR: "+Hh(...t);el.error(e)},ki=function(...t){const e=`FIREBASE FATAL ERROR: ${Hh(...t)}`;throw el.error(e),new Error(e)},Sn=function(...t){const e="FIREBASE WARNING: "+Hh(...t);el.warn(e)},iH=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Sn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ag=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},sH=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Wo="[MIN_NAME]",xs="[MAX_NAME]",ra=function(t,e){if(t===e)return 0;if(t===Wo||e===xs)return-1;if(e===Wo||t===xs)return 1;{const n=pR(t),r=pR(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},oH=function(t,e){return t===e?0:t<e?-1:1},Eu=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Rt(e))},gT=function(t){if(typeof t!="object"||t===null)return Rt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Rt(e[r]),n+=":",n+=gT(t[e[r]]);return n+="}",n},bO=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function tn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const DO=function(t){D(!ag(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const c=u.join("");let h="";for(l=0;l<64;l+=8){let d=parseInt(c.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},aH=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},lH=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function uH(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const cH=new RegExp("^-?(0*)\\d{1,10}$"),hH=-2147483648,dH=2147483647,pR=function(t){if(cH.test(t)){const e=Number(t);if(e>=hH&&e<=dH)return e}return null},Yl=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Sn("Exception was thrown by user callback.",n),e},Math.floor(0))}},fH=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},oc=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Sn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Vt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Sn(e)}}class tl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}tl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="5",NO="v",OO="s",MO="r",LO="f",VO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,FO="ls",$O="p",h0="ac",UO="websocket",BO="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ho.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ho.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function gH(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function zO(t,e,n){D(typeof e=="string","typeof type must == string"),D(typeof n=="object","typeof params must == object");let r;if(e===UO)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===BO)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);gH(t)&&(n.ns=t.namespace);const i=[];return tn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _H{constructor(){this.counters_={}}incrementCounter(e,n=1){Gr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return pU(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry={},iy={};function yT(t){const e=t.toString();return ry[e]||(ry[e]=new _H),ry[e]}function yH(t,e){const n=t.toString();return iy[n]||(iy[n]=e()),iy[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Yl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="start",wH="close",EH="pLPCommand",TH="pRTLPCB",WO="id",HO="pw",qO="ser",IH="cb",SH="seg",CH="ts",RH="d",kH="dframe",GO=1870,YO=30,PH=GO-YO,AH=25e3,xH=3e4;class Ua{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=qh(e),this.stats_=yT(n),this.urlFn=l=>(this.appCheckToken&&(l[h0]=this.appCheckToken),zO(n,BO,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new vH(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(xH)),sH(()=>{if(this.isClosed_)return;this.scriptTagHolder=new vT((...s)=>{const[o,a,l,u,c]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===mR)this.id=a,this.password=l;else if(o===wH)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[mR]="t",r[qO]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[IH]=this.scriptTagHolder.uniqueCallbackIdentifier),r[NO]=_T,this.transportSessionId&&(r[OO]=this.transportSessionId),this.lastSessionId&&(r[FO]=this.lastSessionId),this.applicationId&&(r[$O]=this.applicationId),this.appCheckToken&&(r[h0]=this.appCheckToken),typeof location<"u"&&location.hostname&&VO.test(location.hostname)&&(r[MO]=LO);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ua.forceAllow_=!0}static forceDisallow(){Ua.forceDisallow_=!0}static isAvailable(){return Ua.forceAllow_?!0:!Ua.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!aH()&&!lH()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Rt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=_x(n),i=bO(r,PH);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[kH]="t",r[WO]=e,r[HO]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Rt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class vT{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=nH(),window[EH+this.uniqueCallbackIdentifier]=e,window[TH+this.uniqueCallbackIdentifier]=n,this.myIFrame=vT.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Vt("frame writing exception"),a.stack&&Vt(a.stack),Vt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Vt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[WO]=this.myID,e[HO]=this.myPW,e[qO]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+YO+r.length<=GO;){const o=this.pendingSegs.shift();r=r+"&"+SH+i+"="+o.seg+"&"+CH+i+"="+o.ts+"&"+RH+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(AH)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Vt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bH=16384,DH=45e3;let Pp=null;typeof MozWebSocket<"u"?Pp=MozWebSocket:typeof WebSocket<"u"&&(Pp=WebSocket);class dr{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=qh(this.connId),this.stats_=yT(n),this.connURL=dr.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[NO]=_T,typeof location<"u"&&location.hostname&&VO.test(location.hostname)&&(o[MO]=LO),n&&(o[OO]=n),r&&(o[FO]=r),i&&(o[h0]=i),s&&(o[$O]=s),zO(e,UO,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ho.set("previous_websocket_failure",!0);try{let r;Cx(),this.mySock=new Pp(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){dr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Pp!==null&&!dr.forceDisallow_}static previouslyFailed(){return ho.isInMemoryStorage||ho.get("previous_websocket_failure")===!0}markConnectionHealthy(){ho.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=bc(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(D(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Rt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=bO(n,bH);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(DH))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}dr.responsesRequiredToBeHealthy=2;dr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ua,dr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=dr&&dr.isAvailable();let r=n&&!dr.previouslyFailed();if(e.webSocketOnly&&(n||Sn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[dr];else{const i=this.transports_=[];for(const s of Jc.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Jc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Jc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NH=6e4,OH=5e3,MH=10*1024,LH=100*1024,sy="t",gR="d",VH="s",_R="r",FH="e",yR="o",vR="a",wR="n",ER="p",$H="h";class UH{constructor(e,n,r,i,s,o,a,l,u,c){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=qh("c:"+this.id+":"),this.transportManager_=new Jc(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=oc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>LH?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>MH?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(sy in e){const n=e[sy];n===vR?this.upgradeIfSecondaryHealthy_():n===_R?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===yR&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Eu("t",e),r=Eu("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ER,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:vR,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:wR,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Eu("t",e),r=Eu("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Eu(sy,e);if(gR in e){const r=e[gR];if(n===$H){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===wR){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===VH?this.onConnectionShutdown_(r):n===_R?this.onReset_(r):n===FH?c0("Server Error: "+r):n===yR?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):c0("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),_T!==r&&Sn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),oc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(NH))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):oc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(OH))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ER,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ho.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.allowedEvents_=e,this.listeners_={},D(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){D(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap extends QO{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Uw()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ap}getInitialEvent(e){return D(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=32,IR=768;class we{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ye(){return new we("")}function te(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function bs(t){return t.pieces_.length-t.pieceNum_}function xe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new we(t.pieces_,e)}function wT(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function BH(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Zc(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function XO(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new we(e,0)}function lt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof we)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new we(n,0)}function ne(t){return t.pieceNum_>=t.pieces_.length}function vn(t,e){const n=te(t),r=te(e);if(n===null)return e;if(n===r)return vn(xe(t),xe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function jH(t,e){const n=Zc(t,0),r=Zc(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=ra(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function ET(t,e){if(bs(t)!==bs(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Kn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(bs(t)>bs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class zH{constructor(e,n){this.errorPrefix_=n,this.parts_=Zc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=gm(this.parts_[r]);JO(this)}}function WH(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=gm(e),JO(t)}function HH(t){const e=t.parts_.pop();t.byteLength_-=gm(e),t.parts_.length>0&&(t.byteLength_-=1)}function JO(t){if(t.byteLength_>IR)throw new Error(t.errorPrefix_+"has a key path longer than "+IR+" bytes ("+t.byteLength_+").");if(t.parts_.length>TR)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+TR+") or object contains a cycle "+Js(t))}function Js(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT extends QO{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new TT}getInitialEvent(e){return D(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=1e3,qH=60*5*1e3,SR=30*1e3,GH=1.3,YH=3e4,KH="server_kill",CR=3;class _i extends KO{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=_i.nextPersistentConnectionId_++,this.log_=qh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Tu,this.maxReconnectDelay_=qH,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Cx())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");TT.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ap.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Rt(s)),D(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new si,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),D(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),D(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,u=a.s;_i.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Gr(e,"w")){const r=ml(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Sn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||PU(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=SR)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=kU(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),D(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Rt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):c0("Unrecognized action received from server: "+Rt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){D(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Tu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Tu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>YH&&(this.reconnectDelay_=Tu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*GH)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+_i.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(h){D(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:u};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?Vt("getToken() completed but was canceled"):(Vt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new UH(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{Sn(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(KH)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Sn(h),l())}}}interrupt(e){Vt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Vt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],tp(this.interruptReasons_)&&(this.reconnectDelay_=Tu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>gT(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new we(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Vt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=CR&&(this.reconnectDelay_=SR,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Vt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=CR&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+PO.replace(/\./g,"-")]=1,Uw()?e["framework.cordova"]=1:Sx()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ap.getInstance().currentlyOnline();return tp(this.interruptReasons_)&&e}}_i.nextPersistentConnectionId_=0;_i.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ie(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ie(Wo,e),i=new ie(Wo,n);return this.compare(r,i)!==0}minPost(){return ie.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bd;class ZO extends lg{static get __EMPTY_NODE(){return Bd}static set __EMPTY_NODE(e){Bd=e}compare(e,n){return ra(e.name,n.name)}isDefinedOn(e){throw Fl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ie.MIN}maxPost(){return new ie(xs,Bd)}makePost(e,n){return D(typeof e=="string","KeyIndex indexValue must always be a string."),new ie(e,Bd)}toString(){return".key"}}const To=new ZO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ct{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ct.RED,this.left=i??wn.EMPTY_NODE,this.right=s??wn.EMPTY_NODE}copy(e,n,r,i,s){return new Ct(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return wn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return wn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ct.RED=!0;Ct.BLACK=!1;class QH{copy(e,n,r,i,s){return this}insert(e,n,r){return new Ct(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class wn{constructor(e,n=wn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new wn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ct.BLACK,null,null))}remove(e){return new wn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ct.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new jd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new jd(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new jd(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new jd(this.root_,null,this.comparator_,!0,e)}}wn.EMPTY_NODE=new QH;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XH(t,e){return ra(t.name,e.name)}function IT(t,e){return ra(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d0;function JH(t){d0=t}const eM=function(t){return typeof t=="number"?"number:"+DO(t):"string:"+t},tM=function(t){if(t.isLeafNode()){const e=t.val();D(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Gr(e,".sv"),"Priority must be a string or number.")}else D(t===d0||t.isEmpty(),"priority of unexpected type.");D(t===d0||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RR;class Tt{constructor(e,n=Tt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,D(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),tM(this.priorityNode_)}static set __childrenNodeConstructor(e){RR=e}static get __childrenNodeConstructor(){return RR}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Tt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Tt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ne(e)?this:te(e)===".priority"?this.priorityNode_:Tt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Tt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=te(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(D(r!==".priority"||bs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Tt.__childrenNodeConstructor.EMPTY_NODE.updateChild(xe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+eM(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=DO(this.value_):e+=this.value_,this.lazyHash_=xO(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Tt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Tt.__childrenNodeConstructor?-1:(D(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Tt.VALUE_TYPE_ORDER.indexOf(n),s=Tt.VALUE_TYPE_ORDER.indexOf(r);return D(i>=0,"Unknown leaf type: "+n),D(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Tt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nM,rM;function ZH(t){nM=t}function eq(t){rM=t}class tq extends lg{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?ra(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ie.MIN}maxPost(){return new ie(xs,new Tt("[PRIORITY-POST]",rM))}makePost(e,n){const r=nM(e);return new ie(n,new Tt("[PRIORITY-POST]",r))}toString(){return".priority"}}const ze=new tq;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nq=Math.log(2);class rq{constructor(e){const n=s=>parseInt(Math.log(s)/nq,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const xp=function(t,e,n,r){t.sort(e);const i=function(l,u){const c=u-l;let h,d;if(c===0)return null;if(c===1)return h=t[l],d=n?n(h):h,new Ct(d,h.node,Ct.BLACK,null,null);{const f=parseInt(c/2,10)+l,m=i(l,f),g=i(f+1,u);return h=t[f],d=n?n(h):h,new Ct(d,h.node,Ct.BLACK,m,g)}},s=function(l){let u=null,c=null,h=t.length;const d=function(m,g){const v=h-m,_=h;h-=m;const p=i(v+1,_),y=t[v],w=n?n(y):y;f(new Ct(w,y.node,g,null,p))},f=function(m){u?(u.left=m,u=m):(c=m,u=m)};for(let m=0;m<l.count;++m){const g=l.nextBitIsOne(),v=Math.pow(2,l.count-(m+1));g?d(v,Ct.BLACK):(d(v,Ct.BLACK),d(v,Ct.RED))}return c},o=new rq(t.length),a=s(o);return new wn(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oy;const fa={};class fi{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return D(fa&&ze,"ChildrenNode.ts has not been loaded"),oy=oy||new fi({".priority":fa},{".priority":ze}),oy}get(e){const n=ml(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof wn?n:null}hasIndex(e){return Gr(this.indexSet_,e.toString())}addIndex(e,n){D(e!==To,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(ie.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=xp(r,e.getCompare()):a=fa;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const c=Object.assign({},this.indexes_);return c[l]=a,new fi(c,u)}addToIndexes(e,n){const r=np(this.indexes_,(i,s)=>{const o=ml(this.indexSet_,s);if(D(o,"Missing index implementation for "+s),i===fa)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(ie.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),xp(a,o.getCompare())}else return fa;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new ie(e.name,a))),l.insert(e,e.node)}});return new fi(r,this.indexSet_)}removeFromIndexes(e,n){const r=np(this.indexes_,i=>{if(i===fa)return i;{const s=n.get(e.name);return s?i.remove(new ie(e.name,s)):i}});return new fi(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iu;class K{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&tM(this.priorityNode_),this.children_.isEmpty()&&D(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Iu||(Iu=new K(new wn(IT),null,fi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Iu}updatePriority(e){return this.children_.isEmpty()?this:new K(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Iu:n}}getChild(e){const n=te(e);return n===null?this:this.getImmediateChild(n).getChild(xe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(D(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ie(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Iu:this.priorityNode_;return new K(i,o,s)}}updateChild(e,n){const r=te(e);if(r===null)return n;{D(te(e)!==".priority"||bs(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(xe(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(ze,(o,a)=>{n[o]=a.val(e),r++,s&&K.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+eM(this.getPriority().val())+":"),this.forEachChild(ze,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":xO(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new ie(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ie(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ie(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,ie.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,ie.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Gh?-1:0}withIndex(e){if(e===To||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new K(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===To||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ze),i=n.getIterator(ze);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===To?null:this.indexMap_.get(e.toString())}}K.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class iq extends K{constructor(){super(new wn(IT),K.EMPTY_NODE,fi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return K.EMPTY_NODE}isEmpty(){return!1}}const Gh=new iq;Object.defineProperties(ie,{MIN:{value:new ie(Wo,K.EMPTY_NODE)},MAX:{value:new ie(xs,Gh)}});ZO.__EMPTY_NODE=K.EMPTY_NODE;Tt.__childrenNodeConstructor=K;JH(Gh);eq(Gh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sq=!0;function pt(t,e=null){if(t===null)return K.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),D(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Tt(n,pt(e))}if(!(t instanceof Array)&&sq){const n=[];let r=!1;if(tn(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=pt(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new ie(o,l)))}}),n.length===0)return K.EMPTY_NODE;const s=xp(n,XH,o=>o.name,IT);if(r){const o=xp(n,ze.getCompare());return new K(s,pt(e),new fi({".priority":o},{".priority":ze}))}else return new K(s,pt(e),fi.Default)}else{let n=K.EMPTY_NODE;return tn(t,(r,i)=>{if(Gr(t,r)&&r.substring(0,1)!=="."){const s=pt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(pt(e))}}ZH(pt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST extends lg{constructor(e){super(),this.indexPath_=e,D(!ne(e)&&te(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?ra(e.name,n.name):s}makePost(e,n){const r=pt(e),i=K.EMPTY_NODE.updateChild(this.indexPath_,r);return new ie(n,i)}maxPost(){const e=K.EMPTY_NODE.updateChild(this.indexPath_,Gh);return new ie(xs,e)}toString(){return Zc(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oq extends lg{compare(e,n){const r=e.node.compareTo(n.node);return r===0?ra(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ie.MIN}maxPost(){return ie.MAX}makePost(e,n){const r=pt(e);return new ie(n,r)}toString(){return".value"}}const iM=new oq;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(t){return{type:"value",snapshotNode:t}}function kl(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function eh(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function th(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function aq(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){D(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(eh(n,a)):D(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(kl(n,r)):o.trackChildChange(th(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ze,(i,s)=>{n.hasChild(i)||r.trackChildChange(eh(i,s))}),n.isLeafNode()||n.forEachChild(ze,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(th(i,s,o))}else r.trackChildChange(kl(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?K.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e){this.indexedFilter_=new CT(e.getIndex()),this.index_=e.getIndex(),this.startPost_=nh.getStartPost_(e),this.endPost_=nh.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new ie(n,r))||(r=K.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=K.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(K.EMPTY_NODE);const s=this;return n.forEachChild(ze,(o,a)=>{s.matches(new ie(o,a))||(i=i.updateImmediateChild(o,K.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lq{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new nh(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new ie(n,r))||(r=K.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=K.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=K.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(K.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,K.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const h=this.index_.getCompare();o=(d,f)=>h(f,d)}else o=this.index_.getCompare();const a=e;D(a.numChildren()===this.limit_,"");const l=new ie(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(l);if(a.hasChild(n)){const h=a.getImmediateChild(n);let d=i.getChildAfterChild(this.index_,u,this.reverse_);for(;d!=null&&(d.name===n||a.hasChild(d.name));)d=i.getChildAfterChild(this.index_,d,this.reverse_);const f=d==null?1:o(d,l);if(c&&!r.isEmpty()&&f>=0)return s!=null&&s.trackChildChange(th(n,r,h)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(eh(n,h));const g=a.updateImmediateChild(n,K.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(s!=null&&s.trackChildChange(kl(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}}else return r.isEmpty()?e:c&&o(u,l)>=0?(s!=null&&(s.trackChildChange(eh(u.name,u.node)),s.trackChildChange(kl(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,K.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ze}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return D(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return D(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wo}hasEnd(){return this.endSet_}getIndexEndValue(){return D(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return D(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:xs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return D(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ze}copy(){const e=new RT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function uq(t){return t.loadsAllData()?new CT(t.getIndex()):t.hasLimit()?new lq(t):new nh(t)}function cq(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function hq(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function dq(t,e){const n=t.copy();return n.index_=e,n}function kR(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ze?n="$priority":t.index_===iM?n="$value":t.index_===To?n="$key":(D(t.index_ instanceof ST,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Rt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Rt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Rt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Rt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Rt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function PR(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ze&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp extends KO{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=qh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(D(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=bp.getListenId_(e,r),a={};this.listens_[o]=a;const l=kR(e._queryParams);this.restRequest_(s+".json",l,(u,c)=>{let h=c;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(s,h,!1,r),ml(this.listens_,o)===a){let d;u?u===401?d="permission_denied":d="rest_error:"+u:d="ok",i(d,null)}})}unlisten(e,n){const r=bp.getListenId_(e,n);delete this.listens_[r]}get(e){const n=kR(e._queryParams),r=e._path.toString(),i=new si;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+$l(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=bc(a.responseText)}catch{Sn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Sn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fq{constructor(){this.rootNode_=K.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(){return{value:null,children:new Map}}function Kl(t,e,n){if(ne(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=te(e);t.children.has(r)||t.children.set(r,Dp());const i=t.children.get(r);e=xe(e),Kl(i,e,n)}}function f0(t,e){if(ne(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(ze,(r,i)=>{Kl(t,new we(r),i)}),f0(t,e)}}else if(t.children.size>0){const n=te(e);return e=xe(e),t.children.has(n)&&f0(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function p0(t,e,n){t.value!==null?n(e,t.value):pq(t,(r,i)=>{const s=new we(e.toString()+"/"+r);p0(i,s,n)})}function pq(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mq{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&tn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=10*1e3,gq=30*1e3,_q=5*60*1e3;class yq{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new mq(e);const r=AR+(gq-AR)*Math.random();oc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;tn(e,(i,s)=>{s>0&&Gr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),oc(this.reportStats_.bind(this),Math.floor(Math.random()*2*_q))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(fr||(fr={}));function oM(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function kT(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function PT(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=fr.ACK_USER_WRITE,this.source=oM()}operationForChild(e){if(ne(this.path)){if(this.affectedTree.value!=null)return D(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new we(e));return new Np(ye(),n,this.revert)}}else return D(te(this.path)===e,"operationForChild called for unrelated child."),new Np(xe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n){this.source=e,this.path=n,this.type=fr.LISTEN_COMPLETE}operationForChild(e){return ne(this.path)?new rh(this.source,ye()):new rh(this.source,xe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=fr.OVERWRITE}operationForChild(e){return ne(this.path)?new Ho(this.source,ye(),this.snap.getImmediateChild(e)):new Ho(this.source,xe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=fr.MERGE}operationForChild(e){if(ne(this.path)){const n=this.children.subtree(new we(e));return n.isEmpty()?null:n.value?new Ho(this.source,ye(),n.value):new ih(this.source,ye(),n)}else return D(te(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ih(this.source,xe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ne(e))return this.isFullyInitialized()&&!this.filtered_;const n=te(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vq{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function wq(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(aq(o.childName,o.snapshotNode))}),Su(t,i,"child_removed",e,r,n),Su(t,i,"child_added",e,r,n),Su(t,i,"child_moved",s,r,n),Su(t,i,"child_changed",e,r,n),Su(t,i,"value",e,r,n),i}function Su(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>Tq(t,a,l)),o.forEach(a=>{const l=Eq(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function Eq(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Tq(t,e,n){if(e.childName==null||n.childName==null)throw Fl("Should only compare child_ events.");const r=new ie(e.childName,e.snapshotNode),i=new ie(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(t,e){return{eventCache:t,serverCache:e}}function ac(t,e,n,r){return ug(new qo(e,n,r),t.serverCache)}function aM(t,e,n,r){return ug(t.eventCache,new qo(e,n,r))}function m0(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Go(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ay;const Iq=()=>(ay||(ay=new wn(oH)),ay);class Oe{constructor(e,n=Iq()){this.value=e,this.children=n}static fromObject(e){let n=new Oe(null);return tn(e,(r,i)=>{n=n.set(new we(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ye(),value:this.value};if(ne(e))return null;{const r=te(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(xe(e),n);return s!=null?{path:lt(new we(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ne(e))return this;{const n=te(e),r=this.children.get(n);return r!==null?r.subtree(xe(e)):new Oe(null)}}set(e,n){if(ne(e))return new Oe(n,this.children);{const r=te(e),s=(this.children.get(r)||new Oe(null)).set(xe(e),n),o=this.children.insert(r,s);return new Oe(this.value,o)}}remove(e){if(ne(e))return this.children.isEmpty()?new Oe(null):new Oe(null,this.children);{const n=te(e),r=this.children.get(n);if(r){const i=r.remove(xe(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Oe(null):new Oe(this.value,s)}else return this}}get(e){if(ne(e))return this.value;{const n=te(e),r=this.children.get(n);return r?r.get(xe(e)):null}}setTree(e,n){if(ne(e))return n;{const r=te(e),s=(this.children.get(r)||new Oe(null)).setTree(xe(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Oe(this.value,o)}}fold(e){return this.fold_(ye(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(lt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ye(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(ne(e))return null;{const s=te(e),o=this.children.get(s);return o?o.findOnPath_(xe(e),lt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ye(),n)}foreachOnPath_(e,n,r){if(ne(e))return this;{this.value&&r(n,this.value);const i=te(e),s=this.children.get(i);return s?s.foreachOnPath_(xe(e),lt(n,i),r):new Oe(null)}}foreach(e){this.foreach_(ye(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(lt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.writeTree_=e}static empty(){return new _r(new Oe(null))}}function lc(t,e,n){if(ne(e))return new _r(new Oe(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=vn(i,e);return s=s.updateChild(o,n),new _r(t.writeTree_.set(i,s))}else{const i=new Oe(n),s=t.writeTree_.setTree(e,i);return new _r(s)}}}function xR(t,e,n){let r=t;return tn(n,(i,s)=>{r=lc(r,lt(e,i),s)}),r}function bR(t,e){if(ne(e))return _r.empty();{const n=t.writeTree_.setTree(e,new Oe(null));return new _r(n)}}function g0(t,e){return ia(t,e)!=null}function ia(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(vn(n.path,e)):null}function DR(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ze,(r,i)=>{e.push(new ie(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ie(r,i.value))}),e}function ws(t,e){if(ne(e))return t;{const n=ia(t,e);return n!=null?new _r(new Oe(n)):new _r(t.writeTree_.subtree(e))}}function _0(t){return t.writeTree_.isEmpty()}function Pl(t,e){return lM(ye(),t.writeTree_,e)}function lM(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(D(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=lM(lt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(lt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(t,e){return dM(e,t)}function Sq(t,e,n,r,i){D(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=lc(t.visibleWrites,e,n)),t.lastWriteId=r}function Cq(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Rq(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);D(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&kq(a,r.path)?i=!1:Kn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return Pq(t),!0;if(r.snap)t.visibleWrites=bR(t.visibleWrites,r.path);else{const a=r.children;tn(a,l=>{t.visibleWrites=bR(t.visibleWrites,lt(r.path,l))})}return!0}else return!1}function kq(t,e){if(t.snap)return Kn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Kn(lt(t.path,n),e))return!0;return!1}function Pq(t){t.visibleWrites=uM(t.allWrites,Aq,ye()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Aq(t){return t.visible}function uM(t,e,n){let r=_r.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Kn(n,o)?(a=vn(n,o),r=lc(r,a,s.snap)):Kn(o,n)&&(a=vn(o,n),r=lc(r,ye(),s.snap.getChild(a)));else if(s.children){if(Kn(n,o))a=vn(n,o),r=xR(r,a,s.children);else if(Kn(o,n))if(a=vn(o,n),ne(a))r=xR(r,ye(),s.children);else{const l=ml(s.children,te(a));if(l){const u=l.getChild(xe(a));r=lc(r,ye(),u)}}}else throw Fl("WriteRecord should have .snap or .children")}}return r}function cM(t,e,n,r,i){if(!r&&!i){const s=ia(t.visibleWrites,e);if(s!=null)return s;{const o=ws(t.visibleWrites,e);if(_0(o))return n;if(n==null&&!g0(o,ye()))return null;{const a=n||K.EMPTY_NODE;return Pl(o,a)}}}else{const s=ws(t.visibleWrites,e);if(!i&&_0(s))return n;if(!i&&n==null&&!g0(s,ye()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Kn(u.path,e)||Kn(e,u.path))},a=uM(t.allWrites,o,e),l=n||K.EMPTY_NODE;return Pl(a,l)}}}function xq(t,e,n){let r=K.EMPTY_NODE;const i=ia(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ze,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=ws(t.visibleWrites,e);return n.forEachChild(ze,(o,a)=>{const l=Pl(ws(s,new we(o)),a);r=r.updateImmediateChild(o,l)}),DR(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=ws(t.visibleWrites,e);return DR(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function bq(t,e,n,r,i){D(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=lt(e,n);if(g0(t.visibleWrites,s))return null;{const o=ws(t.visibleWrites,s);return _0(o)?i.getChild(n):Pl(o,i.getChild(n))}}function Dq(t,e,n,r){const i=lt(e,n),s=ia(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=ws(t.visibleWrites,i);return Pl(o,r.getNode().getImmediateChild(n))}else return null}function Nq(t,e){return ia(t.visibleWrites,e)}function Oq(t,e,n,r,i,s,o){let a;const l=ws(t.visibleWrites,e),u=ia(l,ye());if(u!=null)a=u;else if(n!=null)a=Pl(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const c=[],h=o.getCompare(),d=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=d.getNext();for(;f&&c.length<i;)h(f,r)!==0&&c.push(f),f=d.getNext();return c}else return[]}function Mq(){return{visibleWrites:_r.empty(),allWrites:[],lastWriteId:-1}}function Op(t,e,n,r){return cM(t.writeTree,t.treePath,e,n,r)}function xT(t,e){return xq(t.writeTree,t.treePath,e)}function NR(t,e,n,r){return bq(t.writeTree,t.treePath,e,n,r)}function Mp(t,e){return Nq(t.writeTree,lt(t.treePath,e))}function Lq(t,e,n,r,i,s){return Oq(t.writeTree,t.treePath,e,n,r,i,s)}function bT(t,e,n){return Dq(t.writeTree,t.treePath,e,n)}function hM(t,e){return dM(lt(t.treePath,e),t.writeTree)}function dM(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;D(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),D(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,th(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,eh(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,kl(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,th(r,e.snapshotNode,i.oldSnap));else throw Fl("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fq{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const fM=new Fq;class DT{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new qo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return bT(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Go(this.viewCache_),s=Lq(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $q(t){return{filter:t}}function Uq(t,e){D(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),D(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Bq(t,e,n,r,i){const s=new Vq;let o,a;if(n.type===fr.OVERWRITE){const u=n;u.source.fromUser?o=y0(t,e,u.path,u.snap,r,i,s):(D(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!ne(u.path),o=Lp(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===fr.MERGE){const u=n;u.source.fromUser?o=zq(t,e,u.path,u.children,r,i,s):(D(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=v0(t,e,u.path,u.children,r,i,a,s))}else if(n.type===fr.ACK_USER_WRITE){const u=n;u.revert?o=qq(t,e,u.path,r,i,s):o=Wq(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===fr.LISTEN_COMPLETE)o=Hq(t,e,n.path,r,s);else throw Fl("Unknown operation type: "+n.type);const l=s.getChanges();return jq(e,o,l),{viewCache:o,changes:l}}function jq(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=m0(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(sM(m0(e)))}}function pM(t,e,n,r,i,s){const o=e.eventCache;if(Mp(r,n)!=null)return e;{let a,l;if(ne(n))if(D(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Go(e),c=u instanceof K?u:K.EMPTY_NODE,h=xT(r,c);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const u=Op(r,Go(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=te(n);if(u===".priority"){D(bs(n)===1,"Can't have a priority with additional path components");const c=o.getNode();l=e.serverCache.getNode();const h=NR(r,n,c,l);h!=null?a=t.filter.updatePriority(c,h):a=o.getNode()}else{const c=xe(n);let h;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const d=NR(r,n,o.getNode(),l);d!=null?h=o.getNode().getImmediateChild(u).updateChild(c,d):h=o.getNode().getImmediateChild(u)}else h=bT(r,u,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),u,h,c,i,s):a=o.getNode()}}return ac(e,a,o.isFullyInitialized()||ne(n),t.filter.filtersNodes())}}function Lp(t,e,n,r,i,s,o,a){const l=e.serverCache;let u;const c=o?t.filter:t.filter.getIndexedFilter();if(ne(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),f,null)}else{const f=te(n);if(!l.isCompleteForPath(n)&&bs(n)>1)return e;const m=xe(n),v=l.getNode().getImmediateChild(f).updateChild(m,r);f===".priority"?u=c.updatePriority(l.getNode(),v):u=c.updateChild(l.getNode(),f,v,m,fM,null)}const h=aM(e,u,l.isFullyInitialized()||ne(n),c.filtersNodes()),d=new DT(i,h,s);return pM(t,h,n,i,d,a)}function y0(t,e,n,r,i,s,o){const a=e.eventCache;let l,u;const c=new DT(i,e,s);if(ne(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=ac(e,u,!0,t.filter.filtersNodes());else{const h=te(n);if(h===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=ac(e,u,a.isFullyInitialized(),a.isFiltered());else{const d=xe(n),f=a.getNode().getImmediateChild(h);let m;if(ne(d))m=r;else{const g=c.getCompleteChild(h);g!=null?wT(d)===".priority"&&g.getChild(XO(d)).isEmpty()?m=g:m=g.updateChild(d,r):m=K.EMPTY_NODE}if(f.equals(m))l=e;else{const g=t.filter.updateChild(a.getNode(),h,m,d,c,o);l=ac(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function OR(t,e){return t.eventCache.isCompleteForChild(e)}function zq(t,e,n,r,i,s,o){let a=e;return r.foreach((l,u)=>{const c=lt(n,l);OR(e,te(c))&&(a=y0(t,a,c,u,i,s,o))}),r.foreach((l,u)=>{const c=lt(n,l);OR(e,te(c))||(a=y0(t,a,c,u,i,s,o))}),a}function MR(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function v0(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;ne(n)?u=r:u=new Oe(null).setTree(n,r);const c=e.serverCache.getNode();return u.children.inorderTraversal((h,d)=>{if(c.hasChild(h)){const f=e.serverCache.getNode().getImmediateChild(h),m=MR(t,f,d);l=Lp(t,l,new we(h),m,i,s,o,a)}}),u.children.inorderTraversal((h,d)=>{const f=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!c.hasChild(h)&&!f){const m=e.serverCache.getNode().getImmediateChild(h),g=MR(t,m,d);l=Lp(t,l,new we(h),g,i,s,o,a)}}),l}function Wq(t,e,n,r,i,s,o){if(Mp(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(ne(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Lp(t,e,n,l.getNode().getChild(n),i,s,a,o);if(ne(n)){let u=new Oe(null);return l.getNode().forEachChild(To,(c,h)=>{u=u.set(new we(c),h)}),v0(t,e,n,u,i,s,a,o)}else return e}else{let u=new Oe(null);return r.foreach((c,h)=>{const d=lt(n,c);l.isCompleteForPath(d)&&(u=u.set(c,l.getNode().getChild(d)))}),v0(t,e,n,u,i,s,a,o)}}function Hq(t,e,n,r,i){const s=e.serverCache,o=aM(e,s.getNode(),s.isFullyInitialized()||ne(n),s.isFiltered());return pM(t,o,n,r,fM,i)}function qq(t,e,n,r,i,s){let o;if(Mp(r,n)!=null)return e;{const a=new DT(r,e,i),l=e.eventCache.getNode();let u;if(ne(n)||te(n)===".priority"){let c;if(e.serverCache.isFullyInitialized())c=Op(r,Go(e));else{const h=e.serverCache.getNode();D(h instanceof K,"serverChildren would be complete if leaf node"),c=xT(r,h)}c=c,u=t.filter.updateFullNode(l,c,s)}else{const c=te(n);let h=bT(r,c,e.serverCache);h==null&&e.serverCache.isCompleteForChild(c)&&(h=l.getImmediateChild(c)),h!=null?u=t.filter.updateChild(l,c,h,xe(n),a,s):e.eventCache.getNode().hasChild(c)?u=t.filter.updateChild(l,c,K.EMPTY_NODE,xe(n),a,s):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Op(r,Go(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Mp(r,ye())!=null,ac(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gq{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new CT(r.getIndex()),s=uq(r);this.processor_=$q(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(K.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(K.EMPTY_NODE,a.getNode(),null),c=new qo(l,o.isFullyInitialized(),i.filtersNodes()),h=new qo(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=ug(h,c),this.eventGenerator_=new vq(this.query_)}get query(){return this.query_}}function Yq(t){return t.viewCache_.serverCache.getNode()}function Kq(t,e){const n=Go(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ne(e)&&!n.getImmediateChild(te(e)).isEmpty())?n.getChild(e):null}function LR(t){return t.eventRegistrations_.length===0}function Qq(t,e){t.eventRegistrations_.push(e)}function VR(t,e,n){const r=[];if(n){D(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function FR(t,e,n,r){e.type===fr.MERGE&&e.source.queryId!==null&&(D(Go(t.viewCache_),"We should always have a full cache before handling merges"),D(m0(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=Bq(t.processor_,i,e,n,r);return Uq(t.processor_,s.viewCache),D(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,mM(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Xq(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ze,(s,o)=>{r.push(kl(s,o))}),n.isFullyInitialized()&&r.push(sM(n.getNode())),mM(t,r,n.getNode(),e)}function mM(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return wq(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vp;class Jq{constructor(){this.views=new Map}}function Zq(t){D(!Vp,"__referenceConstructor has already been defined"),Vp=t}function eG(){return D(Vp,"Reference.ts has not been loaded"),Vp}function tG(t){return t.views.size===0}function NT(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return D(s!=null,"SyncTree gave us an op for an invalid query."),FR(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(FR(o,e,n,r));return s}}function nG(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Op(n,i?r:null),l=!1;a?l=!0:r instanceof K?(a=xT(n,r),l=!1):(a=K.EMPTY_NODE,l=!1);const u=ug(new qo(a,l,!1),new qo(r,i,!1));return new Gq(e,u)}return o}function rG(t,e,n,r,i,s){const o=nG(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Qq(o,n),Xq(o,n)}function iG(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=Ds(t);if(i==="default")for(const[l,u]of t.views.entries())o=o.concat(VR(u,n,r)),LR(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||s.push(u.query));else{const l=t.views.get(i);l&&(o=o.concat(VR(l,n,r)),LR(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Ds(t)&&s.push(new(eG())(e._repo,e._path)),{removed:s,events:o}}function gM(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function nl(t,e){let n=null;for(const r of t.views.values())n=n||Kq(r,e);return n}function _M(t,e){if(e._queryParams.loadsAllData())return cg(t);{const r=e._queryIdentifier;return t.views.get(r)}}function yM(t,e){return _M(t,e)!=null}function Ds(t){return cg(t)!=null}function cg(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fp;function sG(t){D(!Fp,"__referenceConstructor has already been defined"),Fp=t}function oG(){return D(Fp,"Reference.ts has not been loaded"),Fp}let aG=1;class $R{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Oe(null),this.pendingWriteTree_=Mq(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function vM(t,e,n,r,i){return Sq(t.pendingWriteTree_,e,n,r,i),i?Yh(t,new Ho(oM(),e,n)):[]}function fo(t,e,n=!1){const r=Cq(t.pendingWriteTree_,e);if(Rq(t.pendingWriteTree_,e)){let s=new Oe(null);return r.snap!=null?s=s.set(ye(),!0):tn(r.children,o=>{s=s.set(new we(o),!0)}),Yh(t,new Np(r.path,s,n))}else return[]}function hg(t,e,n){return Yh(t,new Ho(kT(),e,n))}function lG(t,e,n){const r=Oe.fromObject(n);return Yh(t,new ih(kT(),e,r))}function uG(t,e){return Yh(t,new rh(kT(),e))}function cG(t,e,n){const r=MT(t,n);if(r){const i=LT(r),s=i.path,o=i.queryId,a=vn(s,e),l=new rh(PT(o),a);return VT(t,s,l)}else return[]}function w0(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||yM(o,e))){const l=iG(o,e,n,r);tG(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=l.removed;if(a=l.events,!i){const c=u.findIndex(d=>d._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(s,(d,f)=>Ds(f));if(c&&!h){const d=t.syncPointTree_.subtree(s);if(!d.isEmpty()){const f=fG(d);for(let m=0;m<f.length;++m){const g=f[m],v=g.query,_=TM(t,g);t.listenProvider_.startListening(uc(v),$p(t,v),_.hashFn,_.onComplete)}}}!h&&u.length>0&&!r&&(c?t.listenProvider_.stopListening(uc(e),null):u.forEach(d=>{const f=t.queryToTagMap.get(dg(d));t.listenProvider_.stopListening(uc(d),f)}))}pG(t,u)}return a}function hG(t,e,n,r){const i=MT(t,r);if(i!=null){const s=LT(i),o=s.path,a=s.queryId,l=vn(o,e),u=new Ho(PT(a),l,n);return VT(t,o,u)}else return[]}function dG(t,e,n,r){const i=MT(t,r);if(i){const s=LT(i),o=s.path,a=s.queryId,l=vn(o,e),u=Oe.fromObject(n),c=new ih(PT(a),l,u);return VT(t,o,c)}else return[]}function UR(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(d,f)=>{const m=vn(d,i);s=s||nl(f,m),o=o||Ds(f)});let a=t.syncPointTree_.get(i);a?(o=o||Ds(a),s=s||nl(a,ye())):(a=new Jq,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=K.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((f,m)=>{const g=nl(m,ye());g&&(s=s.updateImmediateChild(f,g))}));const u=yM(a,e);if(!u&&!e._queryParams.loadsAllData()){const d=dg(e);D(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");const f=mG();t.queryToTagMap.set(d,f),t.tagToQueryMap.set(f,d)}const c=AT(t.pendingWriteTree_,i);let h=rG(a,e,n,c,s,l);if(!u&&!o&&!r){const d=_M(a,e);h=h.concat(gG(t,e,d))}return h}function OT(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=vn(o,e),u=nl(a,l);if(u)return u});return cM(i,e,s,n,!0)}function Yh(t,e){return wM(e,t.syncPointTree_,null,AT(t.pendingWriteTree_,ye()))}function wM(t,e,n,r){if(ne(t.path))return EM(t,e,n,r);{const i=e.get(ye());n==null&&i!=null&&(n=nl(i,ye()));let s=[];const o=te(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,c=hM(r,o);s=s.concat(wM(a,l,u,c))}return i&&(s=s.concat(NT(i,t,r,n))),s}}function EM(t,e,n,r){const i=e.get(ye());n==null&&i!=null&&(n=nl(i,ye()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=hM(r,o),c=t.operationForChild(o);c&&(s=s.concat(EM(c,a,l,u)))}),i&&(s=s.concat(NT(i,t,r,n))),s}function TM(t,e){const n=e.query,r=$p(t,n);return{hashFn:()=>(Yq(e)||K.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?cG(t,n._path,r):uG(t,n._path);{const s=uH(i,n);return w0(t,n,null,s)}}}}function $p(t,e){const n=dg(e);return t.queryToTagMap.get(n)}function dg(t){return t._path.toString()+"$"+t._queryIdentifier}function MT(t,e){return t.tagToQueryMap.get(e)}function LT(t){const e=t.indexOf("$");return D(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new we(t.substr(0,e))}}function VT(t,e,n){const r=t.syncPointTree_.get(e);D(r,"Missing sync point for query tag that we're tracking");const i=AT(t.pendingWriteTree_,e);return NT(r,n,i,null)}function fG(t){return t.fold((e,n,r)=>{if(n&&Ds(n))return[cg(n)];{let i=[];return n&&(i=gM(n)),tn(r,(s,o)=>{i=i.concat(o)}),i}})}function uc(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(oG())(t._repo,t._path):t}function pG(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=dg(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function mG(){return aG++}function gG(t,e,n){const r=e._path,i=$p(t,e),s=TM(t,n),o=t.listenProvider_.startListening(uc(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)D(!Ds(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,c,h)=>{if(!ne(u)&&c&&Ds(c))return[cg(c).query];{let d=[];return c&&(d=d.concat(gM(c).map(f=>f.query))),tn(h,(f,m)=>{d=d.concat(m)}),d}});for(let u=0;u<l.length;++u){const c=l[u];t.listenProvider_.stopListening(uc(c),$p(t,c))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new FT(n)}node(){return this.node_}}class $T{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=lt(this.path_,e);return new $T(this.syncTree_,n)}node(){return OT(this.syncTree_,this.path_)}}const _G=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},BR=function(t,e,n){if(!t||typeof t!="object")return t;if(D(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return yG(t[".sv"],e,n);if(typeof t[".sv"]=="object")return vG(t[".sv"],e);D(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},yG=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:D(!1,"Unexpected server value: "+t)}},vG=function(t,e,n){t.hasOwnProperty("increment")||D(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&D(!1,"Unexpected increment value: "+r);const i=e.node();if(D(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},wG=function(t,e,n,r){return UT(e,new $T(n,t),r)},IM=function(t,e,n){return UT(t,new FT(e),n)};function UT(t,e,n){const r=t.getPriority().val(),i=BR(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=BR(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Tt(a,pt(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Tt(i))),o.forEachChild(ze,(a,l)=>{const u=UT(l,e.getImmediateChild(a),n);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function jT(t,e){let n=e instanceof we?e:new we(e),r=t,i=te(n);for(;i!==null;){const s=ml(r.node.children,i)||{children:{},childCount:0};r=new BT(i,r,s),n=xe(n),i=te(n)}return r}function Ql(t){return t.node.value}function SM(t,e){t.node.value=e,E0(t)}function CM(t){return t.node.childCount>0}function EG(t){return Ql(t)===void 0&&!CM(t)}function fg(t,e){tn(t.node.children,(n,r)=>{e(new BT(n,t,r))})}function RM(t,e,n,r){n&&!r&&e(t),fg(t,i=>{RM(i,e,!0,r)}),n&&r&&e(t)}function TG(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Kh(t){return new we(t.parent===null?t.name:Kh(t.parent)+"/"+t.name)}function E0(t){t.parent!==null&&IG(t.parent,t.name,t)}function IG(t,e,n){const r=EG(n),i=Gr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,E0(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,E0(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SG=/[\[\].#$\/\u0000-\u001F\u007F]/,CG=/[\[\].#$\u0000-\u001F\u007F]/,ly=10*1024*1024,pg=function(t){return typeof t=="string"&&t.length!==0&&!SG.test(t)},kM=function(t){return typeof t=="string"&&t.length!==0&&!CG.test(t)},RG=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),kM(t)},Up=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!ag(t)||t&&typeof t=="object"&&Gr(t,".sv")},Al=function(t,e,n,r){r&&e===void 0||mg(Ao(t,"value"),e,n)},mg=function(t,e,n){const r=n instanceof we?new zH(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Js(r));if(typeof e=="function")throw new Error(t+"contains a function "+Js(r)+" with contents = "+e.toString());if(ag(e))throw new Error(t+"contains "+e.toString()+" "+Js(r));if(typeof e=="string"&&e.length>ly/3&&gm(e)>ly)throw new Error(t+"contains a string greater than "+ly+" utf8 bytes "+Js(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(tn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!pg(o)))throw new Error(t+" contains an invalid key ("+o+") "+Js(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);WH(r,o),mg(t,a,r),HH(r)}),i&&s)throw new Error(t+' contains ".value" child '+Js(r)+" in addition to actual children.")}},kG=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Zc(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!pg(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(jH);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Kn(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},PG=function(t,e,n,r){if(r&&e===void 0)return;const i=Ao(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];tn(e,(o,a)=>{const l=new we(o);if(mg(i,a,lt(n,l)),wT(l)===".priority"&&!Up(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),kG(i,s)},AG=function(t,e,n){if(!(n&&e===void 0)){if(ag(e))throw new Error(Ao(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Up(e))throw new Error(Ao(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},xG=function(t,e,n,r){if(!(r&&n===void 0)&&!pg(n))throw new Error(Ao(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},zT=function(t,e,n,r){if(!(r&&n===void 0)&&!kM(n))throw new Error(Ao(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},bG=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),zT(t,e,n,r)},Bu=function(t,e){if(te(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},DG=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!pg(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!RG(n))throw new Error(Ao(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NG{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function WT(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!ET(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function PM(t,e,n){WT(t,n),AM(t,r=>ET(r,e))}function Pi(t,e,n){WT(t,n),AM(t,r=>Kn(r,e)||Kn(e,r))}function AM(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(OG(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function OG(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Eo&&Vt("event: "+n.toString()),Yl(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MG="repo_interrupt",LG=25;class VG{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new NG,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Dp(),this.transactionQueueTree_=new BT,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function FG(t,e,n){if(t.stats_=yT(t.repoInfo_),t.forceRestClient_||fH())t.server_=new bp(t.repoInfo_,(r,i,s,o)=>{jR(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>zR(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Rt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new _i(t.repoInfo_,e,(r,i,s,o)=>{jR(t,r,i,s,o)},r=>{zR(t,r)},r=>{UG(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=yH(t.repoInfo_,()=>new yq(t.stats_,t.server_)),t.infoData_=new fq,t.infoSyncTree_=new $R({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=hg(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),qT(t,"connected",!1),t.serverSyncTree_=new $R({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const u=o(a,l);Pi(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function $G(t){const n=t.infoData_.getNode(new we(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function HT(t){return _G({timestamp:$G(t)})}function jR(t,e,n,r,i){t.dataUpdateCount++;const s=new we(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=np(n,u=>pt(u));o=dG(t.serverSyncTree_,s,l,i)}else{const l=pt(n);o=hG(t.serverSyncTree_,s,l,i)}else if(r){const l=np(n,u=>pt(u));o=lG(t.serverSyncTree_,s,l)}else{const l=pt(n);o=hg(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=gg(t,s)),Pi(t.eventQueue_,a,o)}function zR(t,e){qT(t,"connected",e),e===!1&&jG(t)}function UG(t,e){tn(e,(n,r)=>{qT(t,n,r)})}function qT(t,e,n){const r=new we("/.info/"+e),i=pt(n);t.infoData_.updateSnapshot(r,i);const s=hg(t.infoSyncTree_,r,i);Pi(t.eventQueue_,r,s)}function xM(t){return t.nextWriteId_++}function BG(t,e,n,r,i){GT(t,"set",{path:e.toString(),value:n,priority:r});const s=HT(t),o=pt(n,r),a=OT(t.serverSyncTree_,e),l=IM(o,a,s),u=xM(t),c=vM(t.serverSyncTree_,e,l,u,!0);WT(t.eventQueue_,c),t.server_.put(e.toString(),o.val(!0),(d,f)=>{const m=d==="ok";m||Sn("set at "+e+" failed: "+d);const g=fo(t.serverSyncTree_,u,!m);Pi(t.eventQueue_,e,g),xl(t,i,d,f)});const h=MM(t,e);gg(t,h),Pi(t.eventQueue_,h,[])}function jG(t){GT(t,"onDisconnectEvents");const e=HT(t),n=Dp();p0(t.onDisconnect_,ye(),(i,s)=>{const o=wG(i,s,t.serverSyncTree_,e);Kl(n,i,o)});let r=[];p0(n,ye(),(i,s)=>{r=r.concat(hg(t.serverSyncTree_,i,s));const o=MM(t,i);gg(t,o)}),t.onDisconnect_=Dp(),Pi(t.eventQueue_,ye(),r)}function zG(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&f0(t.onDisconnect_,e),xl(t,n,r,i)})}function WR(t,e,n,r){const i=pt(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&Kl(t.onDisconnect_,e,i),xl(t,r,s,o)})}function WG(t,e,n,r,i){const s=pt(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&Kl(t.onDisconnect_,e,s),xl(t,i,o,a)})}function HG(t,e,n,r){if(tp(n)){Vt("onDisconnect().update() called with empty data.  Don't do anything."),xl(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&tn(n,(o,a)=>{const l=pt(a);Kl(t.onDisconnect_,lt(e,o),l)}),xl(t,r,i,s)})}function qG(t,e,n){let r;te(e._path)===".info"?r=UR(t.infoSyncTree_,e,n):r=UR(t.serverSyncTree_,e,n),PM(t.eventQueue_,e._path,r)}function HR(t,e,n){let r;te(e._path)===".info"?r=w0(t.infoSyncTree_,e,n):r=w0(t.serverSyncTree_,e,n),PM(t.eventQueue_,e._path,r)}function GG(t){t.persistentConnection_&&t.persistentConnection_.interrupt(MG)}function GT(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Vt(n,...e)}function xl(t,e,n,r){e&&Yl(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function bM(t,e,n){return OT(t.serverSyncTree_,e,n)||K.EMPTY_NODE}function YT(t,e=t.transactionQueueTree_){if(e||_g(t,e),Ql(e)){const n=NM(t,e);D(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&YG(t,Kh(e),n)}else CM(e)&&fg(e,n=>{YT(t,n)})}function YG(t,e,n){const r=n.map(u=>u.currentWriteId),i=bM(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const c=n[u];D(c.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const h=vn(e,c.path);s=s.updateChild(h,c.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,u=>{GT(t,"transaction put response",{path:l.toString(),status:u});let c=[];if(u==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,c=c.concat(fo(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();_g(t,jT(t.transactionQueueTree_,e)),YT(t,t.transactionQueueTree_),Pi(t.eventQueue_,e,c);for(let d=0;d<h.length;d++)Yl(h[d])}else{if(u==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Sn("transaction at "+l.toString()+" failed: "+u);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=u}gg(t,e)}},o)}function gg(t,e){const n=DM(t,e),r=Kh(n),i=NM(t,n);return KG(t,i,r),r}function KG(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=vn(n,l.path);let c=!1,h;if(D(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)c=!0,h=l.abortReason,i=i.concat(fo(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=LG)c=!0,h="maxretry",i=i.concat(fo(t.serverSyncTree_,l.currentWriteId,!0));else{const d=bM(t,l.path,o);l.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){mg("transaction failed: Data returned ",f,l.path);let m=pt(f);typeof f=="object"&&f!=null&&Gr(f,".priority")||(m=m.updatePriority(d.getPriority()));const v=l.currentWriteId,_=HT(t),p=IM(m,d,_);l.currentOutputSnapshotRaw=m,l.currentOutputSnapshotResolved=p,l.currentWriteId=xM(t),o.splice(o.indexOf(v),1),i=i.concat(vM(t.serverSyncTree_,l.path,p,l.currentWriteId,l.applyLocally)),i=i.concat(fo(t.serverSyncTree_,v,!0))}else c=!0,h="nodata",i=i.concat(fo(t.serverSyncTree_,l.currentWriteId,!0))}Pi(t.eventQueue_,n,i),i=[],c&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}_g(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Yl(r[a]);YT(t,t.transactionQueueTree_)}function DM(t,e){let n,r=t.transactionQueueTree_;for(n=te(e);n!==null&&Ql(r)===void 0;)r=jT(r,n),e=xe(e),n=te(e);return r}function NM(t,e){const n=[];return OM(t,e,n),n.sort((r,i)=>r.order-i.order),n}function OM(t,e,n){const r=Ql(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);fg(e,i=>{OM(t,i,n)})}function _g(t,e){const n=Ql(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,SM(e,n.length>0?n:void 0)}fg(e,r=>{_g(t,r)})}function MM(t,e){const n=Kh(DM(t,e)),r=jT(t.transactionQueueTree_,e);return TG(r,i=>{uy(t,i)}),uy(t,r),RM(r,i=>{uy(t,i)}),n}function uy(t,e){const n=Ql(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(D(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(D(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(fo(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?SM(e,void 0):n.length=s+1,Pi(t.eventQueue_,Kh(e),i);for(let o=0;o<r.length;o++)Yl(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QG(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function XG(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Sn(`Invalid query segment '${n}' in query '${t}'`)}return e}const qR=function(t,e){const n=JG(t),r=n.namespace;n.domain==="firebase.com"&&ki(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&ki("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||iH();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new jO(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new we(n.pathString)}},JG=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let c=t.indexOf("/");c===-1&&(c=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(c,h)),c<h&&(i=QG(t.substring(c,h)));const d=XG(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const f=e.slice(0,u);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const m=e.indexOf(".");r=e.substring(0,m).toLowerCase(),n=e.substring(m+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Rt(this.snapshot.exportVal())}}class VM{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZG{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return D(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new si;return zG(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Bu("OnDisconnect.remove",this._path);const e=new si;return WR(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Bu("OnDisconnect.set",this._path),Al("OnDisconnect.set",e,this._path,!1);const n=new si;return WR(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Bu("OnDisconnect.setWithPriority",this._path),Al("OnDisconnect.setWithPriority",e,this._path,!1),AG("OnDisconnect.setWithPriority",n,!1);const r=new si;return WG(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){Bu("OnDisconnect.update",this._path),PG("OnDisconnect.update",e,this._path,!1);const n=new si;return HG(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ne(this._path)?null:wT(this._path)}get ref(){return new Mi(this._repo,this._path)}get _queryIdentifier(){const e=PR(this._queryParams),n=gT(e);return n==="{}"?"default":n}get _queryObject(){return PR(this._queryParams)}isEqual(e){if(e=ce(e),!(e instanceof Xl))return!1;const n=this._repo===e._repo,r=ET(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+BH(this._path)}}function t8(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function KT(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===To){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Wo)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==xs)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===ze){if(e!=null&&!Up(e)||n!=null&&!Up(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(D(t.getIndex()instanceof ST||t.getIndex()===iM,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function FM(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Mi extends Xl{constructor(e,n){super(e,n,new RT,!1)}get parent(){const e=XO(this._path);return e===null?null:new Mi(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class sh{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new we(e),r=Bp(this.ref,e);return new sh(this._node.getChild(n),r,ze)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new sh(i,Bp(this.ref,r),ze)))}hasChild(e){const n=new we(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function T0(t,e){return t=ce(t),t._checkNotDeleted("ref"),e!==void 0?Bp(t._root,e):t._root}function Bp(t,e){return t=ce(t),te(t._path)===null?bG("child","path",e,!1):zT("child","path",e,!1),new Mi(t._repo,lt(t._path,e))}function n8(t){return t=ce(t),new e8(t._repo,t._path)}function r8(t,e){t=ce(t),Bu("set",t._path),Al("set",e,t._path,!1);const n=new si;return BG(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class QT{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new LM("value",this,new sh(e.snapshotNode,new Mi(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new VM(this,e,n):null}matches(e){return e instanceof QT?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class XT{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new VM(this,e,n):null}createEvent(e,n){D(e.childName!=null,"Child events should have a childName.");const r=Bp(new Mi(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new LM(e.type,this,new sh(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof XT?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function i8(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const l=n,u=(c,h)=>{HR(t._repo,t,a),l(c,h)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new ZG(n,s||void 0),a=e==="value"?new QT(o):new XT(e,o);return qG(t._repo,t,a),()=>HR(t._repo,t,a)}function $M(t,e,n,r){return i8(t,"value",e,n,r)}class yg{}class s8 extends yg{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Al("endAt",this._value,e._path,!0);const n=hq(e._queryParams,this._value,this._key);if(FM(n),KT(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Xl(e._repo,e._path,n,e._orderByCalled)}}class o8 extends yg{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Al("startAt",this._value,e._path,!0);const n=cq(e._queryParams,this._value,this._key);if(FM(n),KT(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Xl(e._repo,e._path,n,e._orderByCalled)}}class a8 extends yg{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){t8(e,"orderByChild");const n=new we(this._path);if(ne(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new ST(n),i=dq(e._queryParams,r);return KT(i),new Xl(e._repo,e._path,i,!0)}}function Hne(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return zT("orderByChild","path",t,!1),new a8(t)}class l8 extends yg{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(Al("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new s8(this._value,this._key)._apply(new o8(this._value,this._key)._apply(e))}}function qne(t,e){return xG("equalTo","key",e,!0),new l8(t,e)}function Gne(t,...e){let n=ce(t);for(const r of e)n=r._apply(n);return n}Zq(Mi);sG(Mi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u8="FIREBASE_DATABASE_EMULATOR_HOST",I0={};let c8=!1;function h8(t,e,n,r){t.repoInfo_=new jO(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function d8(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||ki("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=qR(s,i),a=o.repoInfo,l,u;typeof process<"u"&&cR&&(u=cR[u8]),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=qR(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const c=i&&l?new tl(tl.OWNER):new mH(t.name,t.options,e);DG("Invalid Firebase Database URL",o),ne(o.path)||ki("Database URL must point to the root of a Firebase Database (not including a child path).");const h=p8(a,t,c,new pH(t.name,n));return new m8(h,t)}function f8(t,e){const n=I0[e];(!n||n[t.key]!==t)&&ki(`Database ${e}(${t.repoInfo_}) has already been deleted.`),GG(t),delete n[t.key]}function p8(t,e,n,r){let i=I0[e.name];i||(i={},I0[e.name]=i);let s=i[t.toURLString()];return s&&ki("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new VG(t,c8,n,r),i[t.toURLString()]=s,s}class m8{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(FG(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Mi(this._repo,ye())),this._rootInternal}_delete(){return this._rootInternal!==null&&(f8(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ki("Cannot call "+e+" on a deleted database.")}}function g8(t=jw(),e){const n=Ih(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=wx("database");r&&_8(n,...r)}return n}function _8(t,e,n,r={}){t=ce(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&ki("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ki('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new tl(tl.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Ix(r.mockUserToken,t.app.options.projectId);s=new tl(o)}h8(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y8(t){ZW(Fs),Ss(new Si("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return d8(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Xn(hR,dR,t),Xn(hR,dR,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v8={".sv":"timestamp"};function GR(){return v8}_i.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};_i.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};y8();//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var UM;function L(){return UM.apply(null,arguments)}function w8(t){UM=t}function Tr(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function Io(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function fe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function JT(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(fe(t,e))return!1;return!0}function pn(t){return t===void 0}function Ai(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Qh(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function BM(t,e){var n=[],r,i=t.length;for(r=0;r<i;++r)n.push(e(t[r],r));return n}function ss(t,e){for(var n in e)fe(e,n)&&(t[n]=e[n]);return fe(e,"toString")&&(t.toString=e.toString),fe(e,"valueOf")&&(t.valueOf=e.valueOf),t}function Qr(t,e,n,r){return c2(t,e,n,r,!0).utc()}function E8(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function ee(t){return t._pf==null&&(t._pf=E8()),t._pf}var S0;Array.prototype.some?S0=Array.prototype.some:S0=function(t){var e=Object(this),n=e.length>>>0,r;for(r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};function ZT(t){var e=null,n=!1,r=t._d&&!isNaN(t._d.getTime());if(r&&(e=ee(t),n=S0.call(e.parsedDateParts,function(i){return i!=null}),r=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=r;else return r;return t._isValid}function vg(t){var e=Qr(NaN);return t!=null?ss(ee(e),t):ee(e).userInvalidated=!0,e}var YR=L.momentProperties=[],cy=!1;function eI(t,e){var n,r,i,s=YR.length;if(pn(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),pn(e._i)||(t._i=e._i),pn(e._f)||(t._f=e._f),pn(e._l)||(t._l=e._l),pn(e._strict)||(t._strict=e._strict),pn(e._tzm)||(t._tzm=e._tzm),pn(e._isUTC)||(t._isUTC=e._isUTC),pn(e._offset)||(t._offset=e._offset),pn(e._pf)||(t._pf=ee(e)),pn(e._locale)||(t._locale=e._locale),s>0)for(n=0;n<s;n++)r=YR[n],i=e[r],pn(i)||(t[r]=i);return t}function Xh(t){eI(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),cy===!1&&(cy=!0,L.updateOffset(this),cy=!1)}function Ir(t){return t instanceof Xh||t!=null&&t._isAMomentObject!=null}function jM(t){L.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function ir(t,e){var n=!0;return ss(function(){if(L.deprecationHandler!=null&&L.deprecationHandler(null,t),n){var r=[],i,s,o,a=arguments.length;for(s=0;s<a;s++){if(i="",typeof arguments[s]=="object"){i+=`
[`+s+"] ";for(o in arguments[0])fe(arguments[0],o)&&(i+=o+": "+arguments[0][o]+", ");i=i.slice(0,-2)}else i=arguments[s];r.push(i)}jM(t+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),n=!1}return e.apply(this,arguments)},e)}var KR={};function zM(t,e){L.deprecationHandler!=null&&L.deprecationHandler(t,e),KR[t]||(jM(e),KR[t]=!0)}L.suppressDeprecationWarnings=!1;L.deprecationHandler=null;function Xr(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function T8(t){var e,n;for(n in t)fe(t,n)&&(e=t[n],Xr(e)?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function C0(t,e){var n=ss({},t),r;for(r in e)fe(e,r)&&(Io(t[r])&&Io(e[r])?(n[r]={},ss(n[r],t[r]),ss(n[r],e[r])):e[r]!=null?n[r]=e[r]:delete n[r]);for(r in t)fe(t,r)&&!fe(e,r)&&Io(t[r])&&(n[r]=ss({},n[r]));return n}function tI(t){t!=null&&this.set(t)}var R0;Object.keys?R0=Object.keys:R0=function(t){var e,n=[];for(e in t)fe(t,e)&&n.push(e);return n};var I8={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function S8(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return Xr(r)?r.call(e,n):r}function Hr(t,e,n){var r=""+Math.abs(t),i=e-r.length,s=t>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var nI=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,zd=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,hy={},rl={};function z(t,e,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),t&&(rl[t]=i),e&&(rl[e[0]]=function(){return Hr(i.apply(this,arguments),e[1],e[2])}),n&&(rl[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function C8(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function R8(t){var e=t.match(nI),n,r;for(n=0,r=e.length;n<r;n++)rl[e[n]]?e[n]=rl[e[n]]:e[n]=C8(e[n]);return function(i){var s="",o;for(o=0;o<r;o++)s+=Xr(e[o])?e[o].call(i,t):e[o];return s}}function vf(t,e){return t.isValid()?(e=WM(e,t.localeData()),hy[e]=hy[e]||R8(e),hy[e](t)):t.localeData().invalidDate()}function WM(t,e){var n=5;function r(i){return e.longDateFormat(i)||i}for(zd.lastIndex=0;n>=0&&zd.test(t);)t=t.replace(zd,r),zd.lastIndex=0,n-=1;return t}var k8={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function P8(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(nI).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[t])}var A8="Invalid date";function x8(){return this._invalidDate}var b8="%d",D8=/\d{1,2}/;function N8(t){return this._ordinal.replace("%d",t)}var O8={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function M8(t,e,n,r){var i=this._relativeTime[n];return Xr(i)?i(t,e,n,r):i.replace(/%d/i,t)}function L8(t,e){var n=this._relativeTime[t>0?"future":"past"];return Xr(n)?n(e):n.replace(/%s/i,e)}var QR={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function sr(t){return typeof t=="string"?QR[t]||QR[t.toLowerCase()]:void 0}function rI(t){var e={},n,r;for(r in t)fe(t,r)&&(n=sr(r),n&&(e[n]=t[r]));return e}var V8={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function F8(t){var e=[],n;for(n in t)fe(t,n)&&e.push({unit:n,priority:V8[n]});return e.sort(function(r,i){return r.priority-i.priority}),e}var HM=/\d/,$n=/\d\d/,qM=/\d{3}/,iI=/\d{4}/,wg=/[+-]?\d{6}/,Fe=/\d\d?/,GM=/\d\d\d\d?/,YM=/\d\d\d\d\d\d?/,Eg=/\d{1,3}/,sI=/\d{1,4}/,Tg=/[+-]?\d{1,6}/,Jl=/\d+/,Ig=/[+-]?\d+/,$8=/Z|[+-]\d\d:?\d\d/gi,Sg=/Z|[+-]\d\d(?::?\d\d)?/gi,U8=/[+-]?\d+(\.\d{1,3})?/,Jh=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Zl=/^[1-9]\d?/,oI=/^([1-9]\d|\d)/,jp;jp={};function $(t,e,n){jp[t]=Xr(e)?e:function(r,i){return r&&n?n:e}}function B8(t,e){return fe(jp,t)?jp[t](e._strict,e._locale):new RegExp(j8(t))}function j8(t){return yi(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,n,r,i,s){return n||r||i||s}))}function yi(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Wn(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function ae(t){var e=+t,n=0;return e!==0&&isFinite(e)&&(n=Wn(e)),n}var k0={};function Pe(t,e){var n,r=e,i;for(typeof t=="string"&&(t=[t]),Ai(e)&&(r=function(s,o){o[e]=ae(s)}),i=t.length,n=0;n<i;n++)k0[t[n]]=r}function Zh(t,e){Pe(t,function(n,r,i,s){i._w=i._w||{},e(n,i._w,i,s)})}function z8(t,e,n){e!=null&&fe(k0,t)&&k0[t](e,n._a,n,t)}function Cg(t){return t%4===0&&t%100!==0||t%400===0}var Zt=0,pi=1,Dr=2,Et=3,pr=4,mi=5,po=6,W8=7,H8=8;z("Y",0,0,function(){var t=this.year();return t<=9999?Hr(t,4):"+"+t});z(0,["YY",2],0,function(){return this.year()%100});z(0,["YYYY",4],0,"year");z(0,["YYYYY",5],0,"year");z(0,["YYYYYY",6,!0],0,"year");$("Y",Ig);$("YY",Fe,$n);$("YYYY",sI,iI);$("YYYYY",Tg,wg);$("YYYYYY",Tg,wg);Pe(["YYYYY","YYYYYY"],Zt);Pe("YYYY",function(t,e){e[Zt]=t.length===2?L.parseTwoDigitYear(t):ae(t)});Pe("YY",function(t,e){e[Zt]=L.parseTwoDigitYear(t)});Pe("Y",function(t,e){e[Zt]=parseInt(t,10)});function cc(t){return Cg(t)?366:365}L.parseTwoDigitYear=function(t){return ae(t)+(ae(t)>68?1900:2e3)};var KM=eu("FullYear",!0);function q8(){return Cg(this.year())}function eu(t,e){return function(n){return n!=null?(QM(this,t,n),L.updateOffset(this,e),this):oh(this,t)}}function oh(t,e){if(!t.isValid())return NaN;var n=t._d,r=t._isUTC;switch(e){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function QM(t,e,n){var r,i,s,o,a;if(!(!t.isValid()||isNaN(n))){switch(r=t._d,i=t._isUTC,e){case"Milliseconds":return void(i?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(i?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(i?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(i?r.setUTCHours(n):r.setHours(n));case"Date":return void(i?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}s=n,o=t.month(),a=t.date(),a=a===29&&o===1&&!Cg(s)?28:a,i?r.setUTCFullYear(s,o,a):r.setFullYear(s,o,a)}}function G8(t){return t=sr(t),Xr(this[t])?this[t]():this}function Y8(t,e){if(typeof t=="object"){t=rI(t);var n=F8(t),r,i=n.length;for(r=0;r<i;r++)this[n[r].unit](t[n[r].unit])}else if(t=sr(t),Xr(this[t]))return this[t](e);return this}function K8(t,e){return(t%e+e)%e}var ot;Array.prototype.indexOf?ot=Array.prototype.indexOf:ot=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function aI(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=K8(e,12);return t+=(e-n)/12,n===1?Cg(t)?29:28:31-n%7%2}z("M",["MM",2],"Mo",function(){return this.month()+1});z("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});z("MMMM",0,0,function(t){return this.localeData().months(this,t)});$("M",Fe,Zl);$("MM",Fe,$n);$("MMM",function(t,e){return e.monthsShortRegex(t)});$("MMMM",function(t,e){return e.monthsRegex(t)});Pe(["M","MM"],function(t,e){e[pi]=ae(t)-1});Pe(["MMM","MMMM"],function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);i!=null?e[pi]=i:ee(n).invalidMonth=t});var Q8="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),XM="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),JM=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,X8=Jh,J8=Jh;function Z8(t,e){return t?Tr(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||JM).test(e)?"format":"standalone"][t.month()]:Tr(this._months)?this._months:this._months.standalone}function eY(t,e){return t?Tr(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[JM.test(e)?"format":"standalone"][t.month()]:Tr(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function tY(t,e,n){var r,i,s,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)s=Qr([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase();return n?e==="MMM"?(i=ot.call(this._shortMonthsParse,o),i!==-1?i:null):(i=ot.call(this._longMonthsParse,o),i!==-1?i:null):e==="MMM"?(i=ot.call(this._shortMonthsParse,o),i!==-1?i:(i=ot.call(this._longMonthsParse,o),i!==-1?i:null)):(i=ot.call(this._longMonthsParse,o),i!==-1?i:(i=ot.call(this._shortMonthsParse,o),i!==-1?i:null))}function nY(t,e,n){var r,i,s;if(this._monthsParseExact)return tY.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=Qr([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&e==="MMMM"&&this._longMonthsParse[r].test(t))return r;if(n&&e==="MMM"&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}}function ZM(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=ae(e);else if(e=t.localeData().monthsParse(e),!Ai(e))return t}var n=e,r=t.date();return r=r<29?r:Math.min(r,aI(t.year(),n)),t._isUTC?t._d.setUTCMonth(n,r):t._d.setMonth(n,r),t}function e2(t){return t!=null?(ZM(this,t),L.updateOffset(this,!0),this):oh(this,"Month")}function rY(){return aI(this.year(),this.month())}function iY(t){return this._monthsParseExact?(fe(this,"_monthsRegex")||t2.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(fe(this,"_monthsShortRegex")||(this._monthsShortRegex=X8),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function sY(t){return this._monthsParseExact?(fe(this,"_monthsRegex")||t2.call(this),t?this._monthsStrictRegex:this._monthsRegex):(fe(this,"_monthsRegex")||(this._monthsRegex=J8),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function t2(){function t(l,u){return u.length-l.length}var e=[],n=[],r=[],i,s,o,a;for(i=0;i<12;i++)s=Qr([2e3,i]),o=yi(this.monthsShort(s,"")),a=yi(this.months(s,"")),e.push(o),n.push(a),r.push(a),r.push(o);e.sort(t),n.sort(t),r.sort(t),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function oY(t,e,n,r,i,s,o){var a;return t<100&&t>=0?(a=new Date(t+400,e,n,r,i,s,o),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,r,i,s,o),a}function ah(t){var e,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function zp(t,e,n){var r=7+e-n,i=(7+ah(t,0,r).getUTCDay()-e)%7;return-i+r-1}function n2(t,e,n,r,i){var s=(7+n-r)%7,o=zp(t,r,i),a=1+7*(e-1)+s+o,l,u;return a<=0?(l=t-1,u=cc(l)+a):a>cc(t)?(l=t+1,u=a-cc(t)):(l=t,u=a),{year:l,dayOfYear:u}}function lh(t,e,n){var r=zp(t.year(),e,n),i=Math.floor((t.dayOfYear()-r-1)/7)+1,s,o;return i<1?(o=t.year()-1,s=i+vi(o,e,n)):i>vi(t.year(),e,n)?(s=i-vi(t.year(),e,n),o=t.year()+1):(o=t.year(),s=i),{week:s,year:o}}function vi(t,e,n){var r=zp(t,e,n),i=zp(t+1,e,n);return(cc(t)-r+i)/7}z("w",["ww",2],"wo","week");z("W",["WW",2],"Wo","isoWeek");$("w",Fe,Zl);$("ww",Fe,$n);$("W",Fe,Zl);$("WW",Fe,$n);Zh(["w","ww","W","WW"],function(t,e,n,r){e[r.substr(0,1)]=ae(t)});function aY(t){return lh(t,this._week.dow,this._week.doy).week}var lY={dow:0,doy:6};function uY(){return this._week.dow}function cY(){return this._week.doy}function hY(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function dY(t){var e=lh(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}z("d",0,"do","day");z("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});z("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});z("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});z("e",0,0,"weekday");z("E",0,0,"isoWeekday");$("d",Fe);$("e",Fe);$("E",Fe);$("dd",function(t,e){return e.weekdaysMinRegex(t)});$("ddd",function(t,e){return e.weekdaysShortRegex(t)});$("dddd",function(t,e){return e.weekdaysRegex(t)});Zh(["dd","ddd","dddd"],function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);i!=null?e.d=i:ee(n).invalidWeekday=t});Zh(["d","e","E"],function(t,e,n,r){e[r]=ae(t)});function fY(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function pY(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function lI(t,e){return t.slice(e,7).concat(t.slice(0,e))}var mY="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),r2="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),gY="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),_Y=Jh,yY=Jh,vY=Jh;function wY(t,e){var n=Tr(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?lI(n,this._week.dow):t?n[t.day()]:n}function EY(t){return t===!0?lI(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function TY(t){return t===!0?lI(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function IY(t,e,n){var r,i,s,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)s=Qr([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase();return n?e==="dddd"?(i=ot.call(this._weekdaysParse,o),i!==-1?i:null):e==="ddd"?(i=ot.call(this._shortWeekdaysParse,o),i!==-1?i:null):(i=ot.call(this._minWeekdaysParse,o),i!==-1?i:null):e==="dddd"?(i=ot.call(this._weekdaysParse,o),i!==-1||(i=ot.call(this._shortWeekdaysParse,o),i!==-1)?i:(i=ot.call(this._minWeekdaysParse,o),i!==-1?i:null)):e==="ddd"?(i=ot.call(this._shortWeekdaysParse,o),i!==-1||(i=ot.call(this._weekdaysParse,o),i!==-1)?i:(i=ot.call(this._minWeekdaysParse,o),i!==-1?i:null)):(i=ot.call(this._minWeekdaysParse,o),i!==-1||(i=ot.call(this._weekdaysParse,o),i!==-1)?i:(i=ot.call(this._shortWeekdaysParse,o),i!==-1?i:null))}function SY(t,e,n){var r,i,s;if(this._weekdaysParseExact)return IY.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=Qr([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i")),n&&e==="dddd"&&this._fullWeekdaysParse[r].test(t))return r;if(n&&e==="ddd"&&this._shortWeekdaysParse[r].test(t))return r;if(n&&e==="dd"&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}}function CY(t){if(!this.isValid())return t!=null?this:NaN;var e=oh(this,"Day");return t!=null?(t=fY(t,this.localeData()),this.add(t-e,"d")):e}function RY(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function kY(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=pY(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function PY(t){return this._weekdaysParseExact?(fe(this,"_weekdaysRegex")||uI.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(fe(this,"_weekdaysRegex")||(this._weekdaysRegex=_Y),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function AY(t){return this._weekdaysParseExact?(fe(this,"_weekdaysRegex")||uI.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(fe(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=yY),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function xY(t){return this._weekdaysParseExact?(fe(this,"_weekdaysRegex")||uI.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(fe(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=vY),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function uI(){function t(c,h){return h.length-c.length}var e=[],n=[],r=[],i=[],s,o,a,l,u;for(s=0;s<7;s++)o=Qr([2e3,1]).day(s),a=yi(this.weekdaysMin(o,"")),l=yi(this.weekdaysShort(o,"")),u=yi(this.weekdays(o,"")),e.push(a),n.push(l),r.push(u),i.push(a),i.push(l),i.push(u);e.sort(t),n.sort(t),r.sort(t),i.sort(t),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function cI(){return this.hours()%12||12}function bY(){return this.hours()||24}z("H",["HH",2],0,"hour");z("h",["hh",2],0,cI);z("k",["kk",2],0,bY);z("hmm",0,0,function(){return""+cI.apply(this)+Hr(this.minutes(),2)});z("hmmss",0,0,function(){return""+cI.apply(this)+Hr(this.minutes(),2)+Hr(this.seconds(),2)});z("Hmm",0,0,function(){return""+this.hours()+Hr(this.minutes(),2)});z("Hmmss",0,0,function(){return""+this.hours()+Hr(this.minutes(),2)+Hr(this.seconds(),2)});function i2(t,e){z(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}i2("a",!0);i2("A",!1);function s2(t,e){return e._meridiemParse}$("a",s2);$("A",s2);$("H",Fe,oI);$("h",Fe,Zl);$("k",Fe,Zl);$("HH",Fe,$n);$("hh",Fe,$n);$("kk",Fe,$n);$("hmm",GM);$("hmmss",YM);$("Hmm",GM);$("Hmmss",YM);Pe(["H","HH"],Et);Pe(["k","kk"],function(t,e,n){var r=ae(t);e[Et]=r===24?0:r});Pe(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t});Pe(["h","hh"],function(t,e,n){e[Et]=ae(t),ee(n).bigHour=!0});Pe("hmm",function(t,e,n){var r=t.length-2;e[Et]=ae(t.substr(0,r)),e[pr]=ae(t.substr(r)),ee(n).bigHour=!0});Pe("hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[Et]=ae(t.substr(0,r)),e[pr]=ae(t.substr(r,2)),e[mi]=ae(t.substr(i)),ee(n).bigHour=!0});Pe("Hmm",function(t,e,n){var r=t.length-2;e[Et]=ae(t.substr(0,r)),e[pr]=ae(t.substr(r))});Pe("Hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[Et]=ae(t.substr(0,r)),e[pr]=ae(t.substr(r,2)),e[mi]=ae(t.substr(i))});function DY(t){return(t+"").toLowerCase().charAt(0)==="p"}var NY=/[ap]\.?m?\.?/i,OY=eu("Hours",!0);function MY(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var o2={calendar:I8,longDateFormat:k8,invalidDate:A8,ordinal:b8,dayOfMonthOrdinalParse:D8,relativeTime:O8,months:Q8,monthsShort:XM,week:lY,weekdays:mY,weekdaysMin:gY,weekdaysShort:r2,meridiemParse:NY},Be={},Cu={},uh;function LY(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n+=1)if(t[n]!==e[n])return n;return r}function XR(t){return t&&t.toLowerCase().replace("_","-")}function VY(t){for(var e=0,n,r,i,s;e<t.length;){for(s=XR(t[e]).split("-"),n=s.length,r=XR(t[e+1]),r=r?r.split("-"):null;n>0;){if(i=Rg(s.slice(0,n).join("-")),i)return i;if(r&&r.length>=n&&LY(s,r)>=n-1)break;n--}e++}return uh}function FY(t){return!!(t&&t.match("^[^/\\\\]*$"))}function Rg(t){var e=null,n;if(Be[t]===void 0&&typeof module<"u"&&module&&module.exports&&FY(t))try{e=uh._abbr,n=require,n("./locale/"+t),Es(e)}catch{Be[t]=null}return Be[t]}function Es(t,e){var n;return t&&(pn(e)?n=Li(t):n=hI(t,e),n?uh=n:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),uh._abbr}function hI(t,e){if(e!==null){var n,r=o2;if(e.abbr=t,Be[t]!=null)zM("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Be[t]._config;else if(e.parentLocale!=null)if(Be[e.parentLocale]!=null)r=Be[e.parentLocale]._config;else if(n=Rg(e.parentLocale),n!=null)r=n._config;else return Cu[e.parentLocale]||(Cu[e.parentLocale]=[]),Cu[e.parentLocale].push({name:t,config:e}),null;return Be[t]=new tI(C0(r,e)),Cu[t]&&Cu[t].forEach(function(i){hI(i.name,i.config)}),Es(t),Be[t]}else return delete Be[t],null}function $Y(t,e){if(e!=null){var n,r,i=o2;Be[t]!=null&&Be[t].parentLocale!=null?Be[t].set(C0(Be[t]._config,e)):(r=Rg(t),r!=null&&(i=r._config),e=C0(i,e),r==null&&(e.abbr=t),n=new tI(e),n.parentLocale=Be[t],Be[t]=n),Es(t)}else Be[t]!=null&&(Be[t].parentLocale!=null?(Be[t]=Be[t].parentLocale,t===Es()&&Es(t)):Be[t]!=null&&delete Be[t]);return Be[t]}function Li(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return uh;if(!Tr(t)){if(e=Rg(t),e)return e;t=[t]}return VY(t)}function UY(){return R0(Be)}function dI(t){var e,n=t._a;return n&&ee(t).overflow===-2&&(e=n[pi]<0||n[pi]>11?pi:n[Dr]<1||n[Dr]>aI(n[Zt],n[pi])?Dr:n[Et]<0||n[Et]>24||n[Et]===24&&(n[pr]!==0||n[mi]!==0||n[po]!==0)?Et:n[pr]<0||n[pr]>59?pr:n[mi]<0||n[mi]>59?mi:n[po]<0||n[po]>999?po:-1,ee(t)._overflowDayOfYear&&(e<Zt||e>Dr)&&(e=Dr),ee(t)._overflowWeeks&&e===-1&&(e=W8),ee(t)._overflowWeekday&&e===-1&&(e=H8),ee(t).overflow=e),t}var BY=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,jY=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,zY=/Z|[+-]\d\d(?::?\d\d)?/,Wd=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],dy=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],WY=/^\/?Date\((-?\d+)/i,HY=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,qY={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function a2(t){var e,n,r=t._i,i=BY.exec(r)||jY.exec(r),s,o,a,l,u=Wd.length,c=dy.length;if(i){for(ee(t).iso=!0,e=0,n=u;e<n;e++)if(Wd[e][1].exec(i[1])){o=Wd[e][0],s=Wd[e][2]!==!1;break}if(o==null){t._isValid=!1;return}if(i[3]){for(e=0,n=c;e<n;e++)if(dy[e][1].exec(i[3])){a=(i[2]||" ")+dy[e][0];break}if(a==null){t._isValid=!1;return}}if(!s&&a!=null){t._isValid=!1;return}if(i[4])if(zY.exec(i[4]))l="Z";else{t._isValid=!1;return}t._f=o+(a||"")+(l||""),pI(t)}else t._isValid=!1}function GY(t,e,n,r,i,s){var o=[YY(t),XM.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return s&&o.push(parseInt(s,10)),o}function YY(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function KY(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function QY(t,e,n){if(t){var r=r2.indexOf(t),i=new Date(e[0],e[1],e[2]).getDay();if(r!==i)return ee(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function XY(t,e,n){if(t)return qY[t];if(e)return 0;var r=parseInt(n,10),i=r%100,s=(r-i)/100;return s*60+i}function l2(t){var e=HY.exec(KY(t._i)),n;if(e){if(n=GY(e[4],e[3],e[2],e[5],e[6],e[7]),!QY(e[1],n,t))return;t._a=n,t._tzm=XY(e[8],e[9],e[10]),t._d=ah.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),ee(t).rfc2822=!0}else t._isValid=!1}function JY(t){var e=WY.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(a2(t),t._isValid===!1)delete t._isValid;else return;if(l2(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:L.createFromInputFallback(t)}L.createFromInputFallback=ir("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Ca(t,e,n){return t??e??n}function ZY(t){var e=new Date(L.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function fI(t){var e,n,r=[],i,s,o;if(!t._d){for(i=ZY(t),t._w&&t._a[Dr]==null&&t._a[pi]==null&&e7(t),t._dayOfYear!=null&&(o=Ca(t._a[Zt],i[Zt]),(t._dayOfYear>cc(o)||t._dayOfYear===0)&&(ee(t)._overflowDayOfYear=!0),n=ah(o,0,t._dayOfYear),t._a[pi]=n.getUTCMonth(),t._a[Dr]=n.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=r[e]=i[e];for(;e<7;e++)t._a[e]=r[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[Et]===24&&t._a[pr]===0&&t._a[mi]===0&&t._a[po]===0&&(t._nextDay=!0,t._a[Et]=0),t._d=(t._useUTC?ah:oY).apply(null,r),s=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Et]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==s&&(ee(t).weekdayMismatch=!0)}}function e7(t){var e,n,r,i,s,o,a,l,u;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(s=1,o=4,n=Ca(e.GG,t._a[Zt],lh(Ve(),1,4).year),r=Ca(e.W,1),i=Ca(e.E,1),(i<1||i>7)&&(l=!0)):(s=t._locale._week.dow,o=t._locale._week.doy,u=lh(Ve(),s,o),n=Ca(e.gg,t._a[Zt],u.year),r=Ca(e.w,u.week),e.d!=null?(i=e.d,(i<0||i>6)&&(l=!0)):e.e!=null?(i=e.e+s,(e.e<0||e.e>6)&&(l=!0)):i=s),r<1||r>vi(n,s,o)?ee(t)._overflowWeeks=!0:l!=null?ee(t)._overflowWeekday=!0:(a=n2(n,r,i,s,o),t._a[Zt]=a.year,t._dayOfYear=a.dayOfYear)}L.ISO_8601=function(){};L.RFC_2822=function(){};function pI(t){if(t._f===L.ISO_8601){a2(t);return}if(t._f===L.RFC_2822){l2(t);return}t._a=[],ee(t).empty=!0;var e=""+t._i,n,r,i,s,o,a=e.length,l=0,u,c;for(i=WM(t._f,t._locale).match(nI)||[],c=i.length,n=0;n<c;n++)s=i[n],r=(e.match(B8(s,t))||[])[0],r&&(o=e.substr(0,e.indexOf(r)),o.length>0&&ee(t).unusedInput.push(o),e=e.slice(e.indexOf(r)+r.length),l+=r.length),rl[s]?(r?ee(t).empty=!1:ee(t).unusedTokens.push(s),z8(s,r,t)):t._strict&&!r&&ee(t).unusedTokens.push(s);ee(t).charsLeftOver=a-l,e.length>0&&ee(t).unusedInput.push(e),t._a[Et]<=12&&ee(t).bigHour===!0&&t._a[Et]>0&&(ee(t).bigHour=void 0),ee(t).parsedDateParts=t._a.slice(0),ee(t).meridiem=t._meridiem,t._a[Et]=t7(t._locale,t._a[Et],t._meridiem),u=ee(t).era,u!==null&&(t._a[Zt]=t._locale.erasConvertYear(u,t._a[Zt])),fI(t),dI(t)}function t7(t,e,n){var r;return n==null?e:t.meridiemHour!=null?t.meridiemHour(e,n):(t.isPM!=null&&(r=t.isPM(n),r&&e<12&&(e+=12),!r&&e===12&&(e=0)),e)}function n7(t){var e,n,r,i,s,o,a=!1,l=t._f.length;if(l===0){ee(t).invalidFormat=!0,t._d=new Date(NaN);return}for(i=0;i<l;i++)s=0,o=!1,e=eI({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[i],pI(e),ZT(e)&&(o=!0),s+=ee(e).charsLeftOver,s+=ee(e).unusedTokens.length*10,ee(e).score=s,a?s<r&&(r=s,n=e):(r==null||s<r||o)&&(r=s,n=e,o&&(a=!0));ss(t,n||e)}function r7(t){if(!t._d){var e=rI(t._i),n=e.day===void 0?e.date:e.day;t._a=BM([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],function(r){return r&&parseInt(r,10)}),fI(t)}}function i7(t){var e=new Xh(dI(u2(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function u2(t){var e=t._i,n=t._f;return t._locale=t._locale||Li(t._l),e===null||n===void 0&&e===""?vg({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),Ir(e)?new Xh(dI(e)):(Qh(e)?t._d=e:Tr(n)?n7(t):n?pI(t):s7(t),ZT(t)||(t._d=null),t))}function s7(t){var e=t._i;pn(e)?t._d=new Date(L.now()):Qh(e)?t._d=new Date(e.valueOf()):typeof e=="string"?JY(t):Tr(e)?(t._a=BM(e.slice(0),function(n){return parseInt(n,10)}),fI(t)):Io(e)?r7(t):Ai(e)?t._d=new Date(e):L.createFromInputFallback(t)}function c2(t,e,n,r,i){var s={};return(e===!0||e===!1)&&(r=e,e=void 0),(n===!0||n===!1)&&(r=n,n=void 0),(Io(t)&&JT(t)||Tr(t)&&t.length===0)&&(t=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=t,s._f=e,s._strict=r,i7(s)}function Ve(t,e,n,r){return c2(t,e,n,r,!1)}var o7=ir("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Ve.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:vg()}),a7=ir("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Ve.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:vg()});function h2(t,e){var n,r;if(e.length===1&&Tr(e[0])&&(e=e[0]),!e.length)return Ve();for(n=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](n))&&(n=e[r]);return n}function l7(){var t=[].slice.call(arguments,0);return h2("isBefore",t)}function u7(){var t=[].slice.call(arguments,0);return h2("isAfter",t)}var c7=function(){return Date.now?Date.now():+new Date},Ru=["year","quarter","month","week","day","hour","minute","second","millisecond"];function h7(t){var e,n=!1,r,i=Ru.length;for(e in t)if(fe(t,e)&&!(ot.call(Ru,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(r=0;r<i;++r)if(t[Ru[r]]){if(n)return!1;parseFloat(t[Ru[r]])!==ae(t[Ru[r]])&&(n=!0)}return!0}function d7(){return this._isValid}function f7(){return Cr(NaN)}function kg(t){var e=rI(t),n=e.year||0,r=e.quarter||0,i=e.month||0,s=e.week||e.isoWeek||0,o=e.day||0,a=e.hour||0,l=e.minute||0,u=e.second||0,c=e.millisecond||0;this._isValid=h7(e),this._milliseconds=+c+u*1e3+l*6e4+a*1e3*60*60,this._days=+o+s*7,this._months=+i+r*3+n*12,this._data={},this._locale=Li(),this._bubble()}function wf(t){return t instanceof kg}function P0(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function p7(t,e,n){var r=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),s=0,o;for(o=0;o<r;o++)(n&&t[o]!==e[o]||!n&&ae(t[o])!==ae(e[o]))&&s++;return s+i}function d2(t,e){z(t,0,0,function(){var n=this.utcOffset(),r="+";return n<0&&(n=-n,r="-"),r+Hr(~~(n/60),2)+e+Hr(~~n%60,2)})}d2("Z",":");d2("ZZ","");$("Z",Sg);$("ZZ",Sg);Pe(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=mI(Sg,t)});var m7=/([\+\-]|\d\d)/gi;function mI(t,e){var n=(e||"").match(t),r,i,s;return n===null?null:(r=n[n.length-1]||[],i=(r+"").match(m7)||["-",0,0],s=+(i[1]*60)+ae(i[2]),s===0?0:i[0]==="+"?s:-s)}function gI(t,e){var n,r;return e._isUTC?(n=e.clone(),r=(Ir(t)||Qh(t)?t.valueOf():Ve(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),L.updateOffset(n,!1),n):Ve(t).local()}function A0(t){return-Math.round(t._d.getTimezoneOffset())}L.updateOffset=function(){};function g7(t,e,n){var r=this._offset||0,i;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=mI(Sg,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&e&&(i=A0(this)),this._offset=t,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==t&&(!e||this._changeInProgress?m2(this,Cr(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,L.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:A0(this)}function _7(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function y7(t){return this.utcOffset(0,t)}function v7(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(A0(this),"m")),this}function w7(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=mI($8,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function E7(t){return this.isValid()?(t=t?Ve(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function T7(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function I7(){if(!pn(this._isDSTShifted))return this._isDSTShifted;var t={},e;return eI(t,this),t=u2(t),t._a?(e=t._isUTC?Qr(t._a):Ve(t._a),this._isDSTShifted=this.isValid()&&p7(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function S7(){return this.isValid()?!this._isUTC:!1}function C7(){return this.isValid()?this._isUTC:!1}function f2(){return this.isValid()?this._isUTC&&this._offset===0:!1}var R7=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,k7=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Cr(t,e){var n=t,r=null,i,s,o;return wf(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:Ai(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(r=R7.exec(t))?(i=r[1]==="-"?-1:1,n={y:0,d:ae(r[Dr])*i,h:ae(r[Et])*i,m:ae(r[pr])*i,s:ae(r[mi])*i,ms:ae(P0(r[po]*1e3))*i}):(r=k7.exec(t))?(i=r[1]==="-"?-1:1,n={y:Gs(r[2],i),M:Gs(r[3],i),w:Gs(r[4],i),d:Gs(r[5],i),h:Gs(r[6],i),m:Gs(r[7],i),s:Gs(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(o=P7(Ve(n.from),Ve(n.to)),n={},n.ms=o.milliseconds,n.M=o.months),s=new kg(n),wf(t)&&fe(t,"_locale")&&(s._locale=t._locale),wf(t)&&fe(t,"_isValid")&&(s._isValid=t._isValid),s}Cr.fn=kg.prototype;Cr.invalid=f7;function Gs(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function JR(t,e){var n={};return n.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function P7(t,e){var n;return t.isValid()&&e.isValid()?(e=gI(e,t),t.isBefore(e)?n=JR(t,e):(n=JR(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function p2(t,e){return function(n,r){var i,s;return r!==null&&!isNaN(+r)&&(zM(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=r,r=s),i=Cr(n,r),m2(this,i,t),this}}function m2(t,e,n,r){var i=e._milliseconds,s=P0(e._days),o=P0(e._months);t.isValid()&&(r=r??!0,o&&ZM(t,oh(t,"Month")+o*n),s&&QM(t,"Date",oh(t,"Date")+s*n),i&&t._d.setTime(t._d.valueOf()+i*n),r&&L.updateOffset(t,s||o))}var A7=p2(1,"add"),x7=p2(-1,"subtract");function g2(t){return typeof t=="string"||t instanceof String}function b7(t){return Ir(t)||Qh(t)||g2(t)||Ai(t)||N7(t)||D7(t)||t===null||t===void 0}function D7(t){var e=Io(t)&&!JT(t),n=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,s,o=r.length;for(i=0;i<o;i+=1)s=r[i],n=n||fe(t,s);return e&&n}function N7(t){var e=Tr(t),n=!1;return e&&(n=t.filter(function(r){return!Ai(r)&&g2(t)}).length===0),e&&n}function O7(t){var e=Io(t)&&!JT(t),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,s;for(i=0;i<r.length;i+=1)s=r[i],n=n||fe(t,s);return e&&n}function M7(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function L7(t,e){arguments.length===1&&(arguments[0]?b7(arguments[0])?(t=arguments[0],e=void 0):O7(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||Ve(),r=gI(n,this).startOf("day"),i=L.calendarFormat(this,r)||"sameElse",s=e&&(Xr(e[i])?e[i].call(this,n):e[i]);return this.format(s||this.localeData().calendar(i,this,Ve(n)))}function V7(){return new Xh(this)}function F7(t,e){var n=Ir(t)?t:Ve(t);return this.isValid()&&n.isValid()?(e=sr(e)||"millisecond",e==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function $7(t,e){var n=Ir(t)?t:Ve(t);return this.isValid()&&n.isValid()?(e=sr(e)||"millisecond",e==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function U7(t,e,n,r){var i=Ir(t)?t:Ve(t),s=Ir(e)?e:Ve(e);return this.isValid()&&i.isValid()&&s.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(i,n):!this.isBefore(i,n))&&(r[1]===")"?this.isBefore(s,n):!this.isAfter(s,n))):!1}function B7(t,e){var n=Ir(t)?t:Ve(t),r;return this.isValid()&&n.isValid()?(e=sr(e)||"millisecond",e==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf())):!1}function j7(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function z7(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function W7(t,e,n){var r,i,s;if(!this.isValid())return NaN;if(r=gI(t,this),!r.isValid())return NaN;switch(i=(r.utcOffset()-this.utcOffset())*6e4,e=sr(e),e){case"year":s=Ef(this,r)/12;break;case"month":s=Ef(this,r);break;case"quarter":s=Ef(this,r)/3;break;case"second":s=(this-r)/1e3;break;case"minute":s=(this-r)/6e4;break;case"hour":s=(this-r)/36e5;break;case"day":s=(this-r-i)/864e5;break;case"week":s=(this-r-i)/6048e5;break;default:s=this-r}return n?s:Wn(s)}function Ef(t,e){if(t.date()<e.date())return-Ef(e,t);var n=(e.year()-t.year())*12+(e.month()-t.month()),r=t.clone().add(n,"months"),i,s;return e-r<0?(i=t.clone().add(n-1,"months"),s=(e-r)/(r-i)):(i=t.clone().add(n+1,"months"),s=(e-r)/(i-r)),-(n+s)||0}L.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";L.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function H7(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function q7(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?vf(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Xr(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",vf(n,"Z")):vf(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function G7(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",n,r,i,s;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),n="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",s=e+'[")]',this.format(n+r+i+s)}function Y7(t){t||(t=this.isUtc()?L.defaultFormatUtc:L.defaultFormat);var e=vf(this,t);return this.localeData().postformat(e)}function K7(t,e){return this.isValid()&&(Ir(t)&&t.isValid()||Ve(t).isValid())?Cr({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Q7(t){return this.from(Ve(),t)}function X7(t,e){return this.isValid()&&(Ir(t)&&t.isValid()||Ve(t).isValid())?Cr({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function J7(t){return this.to(Ve(),t)}function _2(t){var e;return t===void 0?this._locale._abbr:(e=Li(t),e!=null&&(this._locale=e),this)}var y2=ir("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function v2(){return this._locale}var Wp=1e3,il=60*Wp,Hp=60*il,w2=(365*400+97)*24*Hp;function sl(t,e){return(t%e+e)%e}function E2(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-w2:new Date(t,e,n).valueOf()}function T2(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-w2:Date.UTC(t,e,n)}function Z7(t){var e,n;if(t=sr(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?T2:E2,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=sl(e+(this._isUTC?0:this.utcOffset()*il),Hp);break;case"minute":e=this._d.valueOf(),e-=sl(e,il);break;case"second":e=this._d.valueOf(),e-=sl(e,Wp);break}return this._d.setTime(e),L.updateOffset(this,!0),this}function eK(t){var e,n;if(t=sr(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?T2:E2,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=Hp-sl(e+(this._isUTC?0:this.utcOffset()*il),Hp)-1;break;case"minute":e=this._d.valueOf(),e+=il-sl(e,il)-1;break;case"second":e=this._d.valueOf(),e+=Wp-sl(e,Wp)-1;break}return this._d.setTime(e),L.updateOffset(this,!0),this}function tK(){return this._d.valueOf()-(this._offset||0)*6e4}function nK(){return Math.floor(this.valueOf()/1e3)}function rK(){return new Date(this.valueOf())}function iK(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function sK(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function oK(){return this.isValid()?this.toISOString():null}function aK(){return ZT(this)}function lK(){return ss({},ee(this))}function uK(){return ee(this).overflow}function cK(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}z("N",0,0,"eraAbbr");z("NN",0,0,"eraAbbr");z("NNN",0,0,"eraAbbr");z("NNNN",0,0,"eraName");z("NNNNN",0,0,"eraNarrow");z("y",["y",1],"yo","eraYear");z("y",["yy",2],0,"eraYear");z("y",["yyy",3],0,"eraYear");z("y",["yyyy",4],0,"eraYear");$("N",_I);$("NN",_I);$("NNN",_I);$("NNNN",EK);$("NNNNN",TK);Pe(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,r){var i=n._locale.erasParse(t,r,n._strict);i?ee(n).era=i:ee(n).invalidEra=t});$("y",Jl);$("yy",Jl);$("yyy",Jl);$("yyyy",Jl);$("yo",IK);Pe(["y","yy","yyy","yyyy"],Zt);Pe(["yo"],function(t,e,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[Zt]=n._locale.eraYearOrdinalParse(t,i):e[Zt]=parseInt(t,10)});function hK(t,e){var n,r,i,s=this._eras||Li("en")._eras;for(n=0,r=s.length;n<r;++n){switch(typeof s[n].since){case"string":i=L(s[n].since).startOf("day"),s[n].since=i.valueOf();break}switch(typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":i=L(s[n].until).startOf("day").valueOf(),s[n].until=i.valueOf();break}}return s}function dK(t,e,n){var r,i,s=this.eras(),o,a,l;for(t=t.toUpperCase(),r=0,i=s.length;r<i;++r)if(o=s[r].name.toUpperCase(),a=s[r].abbr.toUpperCase(),l=s[r].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(a===t)return s[r];break;case"NNNN":if(o===t)return s[r];break;case"NNNNN":if(l===t)return s[r];break}else if([o,a,l].indexOf(t)>=0)return s[r]}function fK(t,e){var n=t.since<=t.until?1:-1;return e===void 0?L(t.since).year():L(t.since).year()+(e-t.offset)*n}function pK(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].name;return""}function mK(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].narrow;return""}function gK(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].abbr;return""}function _K(){var t,e,n,r,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=i[t].since<=i[t].until?1:-1,r=this.clone().startOf("day").valueOf(),i[t].since<=r&&r<=i[t].until||i[t].until<=r&&r<=i[t].since)return(this.year()-L(i[t].since).year())*n+i[t].offset;return this.year()}function yK(t){return fe(this,"_erasNameRegex")||yI.call(this),t?this._erasNameRegex:this._erasRegex}function vK(t){return fe(this,"_erasAbbrRegex")||yI.call(this),t?this._erasAbbrRegex:this._erasRegex}function wK(t){return fe(this,"_erasNarrowRegex")||yI.call(this),t?this._erasNarrowRegex:this._erasRegex}function _I(t,e){return e.erasAbbrRegex(t)}function EK(t,e){return e.erasNameRegex(t)}function TK(t,e){return e.erasNarrowRegex(t)}function IK(t,e){return e._eraYearOrdinalRegex||Jl}function yI(){var t=[],e=[],n=[],r=[],i,s,o,a,l,u=this.eras();for(i=0,s=u.length;i<s;++i)o=yi(u[i].name),a=yi(u[i].abbr),l=yi(u[i].narrow),e.push(o),t.push(a),n.push(l),r.push(o),r.push(a),r.push(l);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}z(0,["gg",2],0,function(){return this.weekYear()%100});z(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Pg(t,e){z(0,[t,t.length],0,e)}Pg("gggg","weekYear");Pg("ggggg","weekYear");Pg("GGGG","isoWeekYear");Pg("GGGGG","isoWeekYear");$("G",Ig);$("g",Ig);$("GG",Fe,$n);$("gg",Fe,$n);$("GGGG",sI,iI);$("gggg",sI,iI);$("GGGGG",Tg,wg);$("ggggg",Tg,wg);Zh(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,r){e[r.substr(0,2)]=ae(t)});Zh(["gg","GG"],function(t,e,n,r){e[r]=L.parseTwoDigitYear(t)});function SK(t){return I2.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function CK(t){return I2.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function RK(){return vi(this.year(),1,4)}function kK(){return vi(this.isoWeekYear(),1,4)}function PK(){var t=this.localeData()._week;return vi(this.year(),t.dow,t.doy)}function AK(){var t=this.localeData()._week;return vi(this.weekYear(),t.dow,t.doy)}function I2(t,e,n,r,i){var s;return t==null?lh(this,r,i).year:(s=vi(t,r,i),e>s&&(e=s),xK.call(this,t,e,n,r,i))}function xK(t,e,n,r,i){var s=n2(t,e,n,r,i),o=ah(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}z("Q",0,"Qo","quarter");$("Q",HM);Pe("Q",function(t,e){e[pi]=(ae(t)-1)*3});function bK(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}z("D",["DD",2],"Do","date");$("D",Fe,Zl);$("DD",Fe,$n);$("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Pe(["D","DD"],Dr);Pe("Do",function(t,e){e[Dr]=ae(t.match(Fe)[0])});var S2=eu("Date",!0);z("DDD",["DDDD",3],"DDDo","dayOfYear");$("DDD",Eg);$("DDDD",qM);Pe(["DDD","DDDD"],function(t,e,n){n._dayOfYear=ae(t)});function DK(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}z("m",["mm",2],0,"minute");$("m",Fe,oI);$("mm",Fe,$n);Pe(["m","mm"],pr);var NK=eu("Minutes",!1);z("s",["ss",2],0,"second");$("s",Fe,oI);$("ss",Fe,$n);Pe(["s","ss"],mi);var OK=eu("Seconds",!1);z("S",0,0,function(){return~~(this.millisecond()/100)});z(0,["SS",2],0,function(){return~~(this.millisecond()/10)});z(0,["SSS",3],0,"millisecond");z(0,["SSSS",4],0,function(){return this.millisecond()*10});z(0,["SSSSS",5],0,function(){return this.millisecond()*100});z(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});z(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});z(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});z(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});$("S",Eg,HM);$("SS",Eg,$n);$("SSS",Eg,qM);var os,C2;for(os="SSSS";os.length<=9;os+="S")$(os,Jl);function MK(t,e){e[po]=ae(("0."+t)*1e3)}for(os="S";os.length<=9;os+="S")Pe(os,MK);C2=eu("Milliseconds",!1);z("z",0,0,"zoneAbbr");z("zz",0,0,"zoneName");function LK(){return this._isUTC?"UTC":""}function VK(){return this._isUTC?"Coordinated Universal Time":""}var x=Xh.prototype;x.add=A7;x.calendar=L7;x.clone=V7;x.diff=W7;x.endOf=eK;x.format=Y7;x.from=K7;x.fromNow=Q7;x.to=X7;x.toNow=J7;x.get=G8;x.invalidAt=uK;x.isAfter=F7;x.isBefore=$7;x.isBetween=U7;x.isSame=B7;x.isSameOrAfter=j7;x.isSameOrBefore=z7;x.isValid=aK;x.lang=y2;x.locale=_2;x.localeData=v2;x.max=a7;x.min=o7;x.parsingFlags=lK;x.set=Y8;x.startOf=Z7;x.subtract=x7;x.toArray=iK;x.toObject=sK;x.toDate=rK;x.toISOString=q7;x.inspect=G7;typeof Symbol<"u"&&Symbol.for!=null&&(x[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});x.toJSON=oK;x.toString=H7;x.unix=nK;x.valueOf=tK;x.creationData=cK;x.eraName=pK;x.eraNarrow=mK;x.eraAbbr=gK;x.eraYear=_K;x.year=KM;x.isLeapYear=q8;x.weekYear=SK;x.isoWeekYear=CK;x.quarter=x.quarters=bK;x.month=e2;x.daysInMonth=rY;x.week=x.weeks=hY;x.isoWeek=x.isoWeeks=dY;x.weeksInYear=PK;x.weeksInWeekYear=AK;x.isoWeeksInYear=RK;x.isoWeeksInISOWeekYear=kK;x.date=S2;x.day=x.days=CY;x.weekday=RY;x.isoWeekday=kY;x.dayOfYear=DK;x.hour=x.hours=OY;x.minute=x.minutes=NK;x.second=x.seconds=OK;x.millisecond=x.milliseconds=C2;x.utcOffset=g7;x.utc=y7;x.local=v7;x.parseZone=w7;x.hasAlignedHourOffset=E7;x.isDST=T7;x.isLocal=S7;x.isUtcOffset=C7;x.isUtc=f2;x.isUTC=f2;x.zoneAbbr=LK;x.zoneName=VK;x.dates=ir("dates accessor is deprecated. Use date instead.",S2);x.months=ir("months accessor is deprecated. Use month instead",e2);x.years=ir("years accessor is deprecated. Use year instead",KM);x.zone=ir("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",_7);x.isDSTShifted=ir("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",I7);function FK(t){return Ve(t*1e3)}function $K(){return Ve.apply(null,arguments).parseZone()}function R2(t){return t}var pe=tI.prototype;pe.calendar=S8;pe.longDateFormat=P8;pe.invalidDate=x8;pe.ordinal=N8;pe.preparse=R2;pe.postformat=R2;pe.relativeTime=M8;pe.pastFuture=L8;pe.set=T8;pe.eras=hK;pe.erasParse=dK;pe.erasConvertYear=fK;pe.erasAbbrRegex=vK;pe.erasNameRegex=yK;pe.erasNarrowRegex=wK;pe.months=Z8;pe.monthsShort=eY;pe.monthsParse=nY;pe.monthsRegex=sY;pe.monthsShortRegex=iY;pe.week=aY;pe.firstDayOfYear=cY;pe.firstDayOfWeek=uY;pe.weekdays=wY;pe.weekdaysMin=TY;pe.weekdaysShort=EY;pe.weekdaysParse=SY;pe.weekdaysRegex=PY;pe.weekdaysShortRegex=AY;pe.weekdaysMinRegex=xY;pe.isPM=DY;pe.meridiem=MY;function qp(t,e,n,r){var i=Li(),s=Qr().set(r,e);return i[n](s,t)}function k2(t,e,n){if(Ai(t)&&(e=t,t=void 0),t=t||"",e!=null)return qp(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=qp(t,r,n,"month");return i}function vI(t,e,n,r){typeof t=="boolean"?(Ai(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,Ai(e)&&(n=e,e=void 0),e=e||"");var i=Li(),s=t?i._week.dow:0,o,a=[];if(n!=null)return qp(e,(n+s)%7,r,"day");for(o=0;o<7;o++)a[o]=qp(e,(o+s)%7,r,"day");return a}function UK(t,e){return k2(t,e,"months")}function BK(t,e){return k2(t,e,"monthsShort")}function jK(t,e,n){return vI(t,e,n,"weekdays")}function zK(t,e,n){return vI(t,e,n,"weekdaysShort")}function WK(t,e,n){return vI(t,e,n,"weekdaysMin")}Es("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=ae(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});L.lang=ir("moment.lang is deprecated. Use moment.locale instead.",Es);L.langData=ir("moment.langData is deprecated. Use moment.localeData instead.",Li);var ei=Math.abs;function HK(){var t=this._data;return this._milliseconds=ei(this._milliseconds),this._days=ei(this._days),this._months=ei(this._months),t.milliseconds=ei(t.milliseconds),t.seconds=ei(t.seconds),t.minutes=ei(t.minutes),t.hours=ei(t.hours),t.months=ei(t.months),t.years=ei(t.years),this}function P2(t,e,n,r){var i=Cr(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function qK(t,e){return P2(this,t,e,1)}function GK(t,e){return P2(this,t,e,-1)}function ZR(t){return t<0?Math.floor(t):Math.ceil(t)}function YK(){var t=this._milliseconds,e=this._days,n=this._months,r=this._data,i,s,o,a,l;return t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0||(t+=ZR(x0(n)+e)*864e5,e=0,n=0),r.milliseconds=t%1e3,i=Wn(t/1e3),r.seconds=i%60,s=Wn(i/60),r.minutes=s%60,o=Wn(s/60),r.hours=o%24,e+=Wn(o/24),l=Wn(A2(e)),n+=l,e-=ZR(x0(l)),a=Wn(n/12),n%=12,r.days=e,r.months=n,r.years=a,this}function A2(t){return t*4800/146097}function x0(t){return t*146097/4800}function KK(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if(t=sr(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+r/864e5,n=this._months+A2(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(x0(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return e*24+r/36e5;case"minute":return e*1440+r/6e4;case"second":return e*86400+r/1e3;case"millisecond":return Math.floor(e*864e5)+r;default:throw new Error("Unknown unit "+t)}}function Vi(t){return function(){return this.as(t)}}var x2=Vi("ms"),QK=Vi("s"),XK=Vi("m"),JK=Vi("h"),ZK=Vi("d"),eQ=Vi("w"),tQ=Vi("M"),nQ=Vi("Q"),rQ=Vi("y"),iQ=x2;function sQ(){return Cr(this)}function oQ(t){return t=sr(t),this.isValid()?this[t+"s"]():NaN}function sa(t){return function(){return this.isValid()?this._data[t]:NaN}}var aQ=sa("milliseconds"),lQ=sa("seconds"),uQ=sa("minutes"),cQ=sa("hours"),hQ=sa("days"),dQ=sa("months"),fQ=sa("years");function pQ(){return Wn(this.days()/7)}var ri=Math.round,Ba={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function mQ(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}function gQ(t,e,n,r){var i=Cr(t).abs(),s=ri(i.as("s")),o=ri(i.as("m")),a=ri(i.as("h")),l=ri(i.as("d")),u=ri(i.as("M")),c=ri(i.as("w")),h=ri(i.as("y")),d=s<=n.ss&&["s",s]||s<n.s&&["ss",s]||o<=1&&["m"]||o<n.m&&["mm",o]||a<=1&&["h"]||a<n.h&&["hh",a]||l<=1&&["d"]||l<n.d&&["dd",l];return n.w!=null&&(d=d||c<=1&&["w"]||c<n.w&&["ww",c]),d=d||u<=1&&["M"]||u<n.M&&["MM",u]||h<=1&&["y"]||["yy",h],d[2]=e,d[3]=+t>0,d[4]=r,mQ.apply(null,d)}function _Q(t){return t===void 0?ri:typeof t=="function"?(ri=t,!0):!1}function yQ(t,e){return Ba[t]===void 0?!1:e===void 0?Ba[t]:(Ba[t]=e,t==="s"&&(Ba.ss=e-1),!0)}function vQ(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=Ba,i,s;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(n=t),typeof e=="object"&&(r=Object.assign({},Ba,e),e.s!=null&&e.ss==null&&(r.ss=e.s-1)),i=this.localeData(),s=gQ(this,!n,r,i),n&&(s=i.pastFuture(+this,s)),i.postformat(s)}var fy=Math.abs;function pa(t){return(t>0)-(t<0)||+t}function Ag(){if(!this.isValid())return this.localeData().invalidDate();var t=fy(this._milliseconds)/1e3,e=fy(this._days),n=fy(this._months),r,i,s,o,a=this.asSeconds(),l,u,c,h;return a?(r=Wn(t/60),i=Wn(r/60),t%=60,r%=60,s=Wn(n/12),n%=12,o=t?t.toFixed(3).replace(/\.?0+$/,""):"",l=a<0?"-":"",u=pa(this._months)!==pa(a)?"-":"",c=pa(this._days)!==pa(a)?"-":"",h=pa(this._milliseconds)!==pa(a)?"-":"",l+"P"+(s?u+s+"Y":"")+(n?u+n+"M":"")+(e?c+e+"D":"")+(i||r||t?"T":"")+(i?h+i+"H":"")+(r?h+r+"M":"")+(t?h+o+"S":"")):"P0D"}var he=kg.prototype;he.isValid=d7;he.abs=HK;he.add=qK;he.subtract=GK;he.as=KK;he.asMilliseconds=x2;he.asSeconds=QK;he.asMinutes=XK;he.asHours=JK;he.asDays=ZK;he.asWeeks=eQ;he.asMonths=tQ;he.asQuarters=nQ;he.asYears=rQ;he.valueOf=iQ;he._bubble=YK;he.clone=sQ;he.get=oQ;he.milliseconds=aQ;he.seconds=lQ;he.minutes=uQ;he.hours=cQ;he.days=hQ;he.weeks=pQ;he.months=dQ;he.years=fQ;he.humanize=vQ;he.toISOString=Ag;he.toString=Ag;he.toJSON=Ag;he.locale=_2;he.localeData=v2;he.toIsoString=ir("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ag);he.lang=y2;z("X",0,0,"unix");z("x",0,0,"valueOf");$("x",Ig);$("X",U8);Pe("X",function(t,e,n){n._d=new Date(parseFloat(t)*1e3)});Pe("x",function(t,e,n){n._d=new Date(ae(t))});//! moment.js
L.version="2.30.1";w8(Ve);L.fn=x;L.min=l7;L.max=u7;L.now=c7;L.utc=Qr;L.unix=FK;L.months=UK;L.isDate=Qh;L.locale=Es;L.invalid=vg;L.duration=Cr;L.isMoment=Ir;L.weekdays=jK;L.parseZone=$K;L.localeData=Li;L.isDuration=wf;L.monthsShort=BK;L.weekdaysMin=WK;L.defineLocale=hI;L.updateLocale=$Y;L.locales=UY;L.weekdaysShort=zK;L.normalizeUnits=sr;L.relativeTimeRounding=_Q;L.relativeTimeThreshold=yQ;L.calendarFormat=M7;L.prototype=x;L.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const wQ={apiKey:"AIzaSyCwF75LGVuWriGfXEyHzoGBvobiOdMEwHs",authDomain:"star-education-academy.firebaseapp.com",projectId:"star-education-academy",storageBucket:"star-education-academy.appspot.com",messagingSenderId:"693801186794",appId:"1:693801186794:web:b202cdffa55530e687ee93",measurementId:"G-JN1DV2YT81",databaseURL:"https://star-education-academy-default-rtdb.asia-southeast1.firebasedatabase.app"},xg=bx(wQ),Yne=r3(xg),Kne=new oi,bl=fz(xg,{cache:Vz()}),Qne=KW(xg),b0=g8(xg);pz(bl).then(()=>{console.log("Offline persistence enabled")}).catch(t=>{t.code==="failed-precondition"?console.log("Persistence failed, multiple tabs open"):t.code==="unimplemented"&&console.log("Persistence not availabel on this browser")});const D0=(t,e=200)=>{setTimeout(()=>{t(!1)},e)},EQ=async(t,e,n,r,i,s=!1,o,a=200)=>{const l=Ju.get("userId");E.useEffect(()=>{if(!l)return;const u=kz(t,...e),c=cO(u,h=>{if(r(!0),h.empty)i(!0),n([]);else{const d=h.docs.map(f=>({...f.data(),[s?"uid":"id"]:f.id}));n(d),i(!1)}D0(r,a)},h=>{console.log("Error fetching documents: ",h.message),D0(r,a),o("Error fetching documents: "+h.message+" Come here again at 1:30 pm.")});return()=>c()},[])},TQ=async(t,e=3,n=1e3)=>{let r=0;for(;r<e;)try{await t(),console.log("User data save to firestore successfully");break}catch(i){if(r++,r>=e)throw console.log("Failed to save user data",i.message),i;console.warn(`Retrying Firestore write... (attempt ${r})`),await new Promise(s=>setTimeout(s,n*r))}},Xne=async(t,e,n,r="",i)=>{try{const s=Xc(bl,"users",i),o=await uO(s),a={name:t,email:e,password:n,image:r,isAdmin:!1,createdAt:Uz()};o.exists()||await TQ(()=>Nz(Xc(bl,"users",i),a))}catch(s){console.log(s.message)}};function Jne(t,e,n,r=[]){E.useEffect(()=>{const i=T0(b0,`/status/${t}`);$M(i,s=>{if(s.exists()){const{status:o,lastChanged:a}=s.val();e(o),n(L(a).fromNow())}})},r)}function Zne(t,e){let n=!1;return e.forEach(r=>{r.id===t&&(n=!0)}),n}let ek;function ere(t){t(!0),clearTimeout(ek),ek=setTimeout(()=>{t(!1)},[4e3])}function tre(t){scrollTo({top:0,...{behavior:t}})}function nre(){const t=window.innerHeight,n=document.documentElement.scrollHeight-t;scrollTo({top:n+200})}function rre(t){document.body.style.overflow=t}function ire(t,e){E.useEffect(()=>{const n=r=>{t.current&&!t.current.contains(r.target)&&e(!1)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[])}function sre(t){try{const e=t.split(":"),n=Number(e[0]),r=Number(e[1]),i=Number(e[2]);return`${py(n,"hours")} ${py(r,"minutes")} ${py(i,"seconds")}`}catch{return null}}function py(t,e){return t?`${t} ${e}`:""}function tk(t){return t>=10?t:`0${t}`}const IQ=(t,e)=>{const n=Ju.get("userId");let r;return t.forEach(i=>{i.id===e&&(r=i)}),r?r.seenBy.includes(n):!1},ore=(t,e)=>{let n=0;return t.forEach(r=>{IQ(t,r.id)||(n+=1)}),!!(n>0&&(e!=null&&e.name))};function are(t){E.useEffect(()=>{const e=()=>{const n=window.scrollY;px(`SEA-scrollPosition-${t}`,n)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[])}function lre(t){E.useEffect(()=>{const e=yv(`SEA-scrollPosition-${t}`);e&&scrollTo(0,parseInt(e,10))},[])}async function ure(t,e){try{console.log("Fetching counts...");const n=await Oz(t);e(n.data().count)}catch(n){console.log(n.message)}}async function SQ(t,e){const n=nk(t,e);try{if(n)return console.log("Fetched from the array..."),n;{const r=Xc(YN(bl,"users"),e);console.log("fetching user...");const i=await uO(r);if(i.exists()){const s={uid:i.id,...i.data()};return nk(t,i.id)?console.log("User already exists in the array:"):t.push(s),s}else return console.log("No user found in Firestore"),null}}catch(r){return console.error("Error fetching user:",r.message),null}}function nk(t,e){return t.find(n=>n.uid===e)}function cre(t,e,n,r=()=>{},i=[],s=150){E.useEffect(()=>{(async()=>{r(!0);const a=await SQ(e,t);n(a),D0(r,s)})()},i)}const CQ=()=>{const{headerTitle:t,setUserId:e,setUserData:n,openSnackbar:r,userId:i}=E.useContext(NL),s=cx(),o=Eh(),a=o.pathname!=="/"?o.pathname:"/app";E.useEffect(()=>{document.title="SEA • "+t||"STAR EDUCATION ACADEMY"},[t]),E.useEffect(()=>{const l=Ju.get("userId");if(!l)return;const u=cO(Xc(bl,"users",l),c=>{if(c.exists()){const h={uid:c.id,...c.data()};n(h)}else e(null),Ju.remove("userId"),s("/login"),console.log("No user found..."),r("No user found")},c=>{console.log(c.message),r(c.message)});return()=>u()},[i]),E.useEffect(()=>{const l=Ju.get("userId")||null;l?(e(l),s(a)):s("/login")},[])},RQ={black:"#000",white:"#fff"},ch=RQ,kQ={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},ma=kQ,PQ={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},ga=PQ,AQ={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},_a=AQ,xQ={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},ya=xQ,bQ={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},va=bQ,DQ={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},ku=DQ,NQ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},OQ=NQ;function hh(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const MQ=Object.freeze(Object.defineProperty({__proto__:null,default:hh},Symbol.toStringTag,{value:"Module"})),Dl="$$material";function F(){return F=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F.apply(null,arguments)}function At(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function LQ(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var VQ=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,FQ=LQ(function(t){return VQ.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),$Q=!1;function UQ(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function BQ(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var jQ=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!$Q:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(BQ(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=UQ(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),qt="-ms-",Gp="-moz-",me="-webkit-",b2="comm",wI="rule",EI="decl",zQ="@import",D2="@keyframes",WQ="@layer",HQ=Math.abs,bg=String.fromCharCode,qQ=Object.assign;function GQ(t,e){return Mt(t,0)^45?(((e<<2^Mt(t,0))<<2^Mt(t,1))<<2^Mt(t,2))<<2^Mt(t,3):0}function N2(t){return t.trim()}function YQ(t,e){return(t=e.exec(t))?t[0]:t}function ge(t,e,n){return t.replace(e,n)}function N0(t,e){return t.indexOf(e)}function Mt(t,e){return t.charCodeAt(e)|0}function dh(t,e,n){return t.slice(e,n)}function Pr(t){return t.length}function TI(t){return t.length}function Hd(t,e){return e.push(t),t}function KQ(t,e){return t.map(e).join("")}var Dg=1,Nl=1,O2=0,Cn=0,mt=0,tu="";function Ng(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:Dg,column:Nl,length:o,return:""}}function Pu(t,e){return qQ(Ng("",null,null,"",null,null,0),t,{length:-t.length},e)}function QQ(){return mt}function XQ(){return mt=Cn>0?Mt(tu,--Cn):0,Nl--,mt===10&&(Nl=1,Dg--),mt}function Nn(){return mt=Cn<O2?Mt(tu,Cn++):0,Nl++,mt===10&&(Nl=1,Dg++),mt}function zr(){return Mt(tu,Cn)}function Tf(){return Cn}function ed(t,e){return dh(tu,t,e)}function fh(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function M2(t){return Dg=Nl=1,O2=Pr(tu=t),Cn=0,[]}function L2(t){return tu="",t}function If(t){return N2(ed(Cn-1,O0(t===91?t+2:t===40?t+1:t)))}function JQ(t){for(;(mt=zr())&&mt<33;)Nn();return fh(t)>2||fh(mt)>3?"":" "}function ZQ(t,e){for(;--e&&Nn()&&!(mt<48||mt>102||mt>57&&mt<65||mt>70&&mt<97););return ed(t,Tf()+(e<6&&zr()==32&&Nn()==32))}function O0(t){for(;Nn();)switch(mt){case t:return Cn;case 34:case 39:t!==34&&t!==39&&O0(mt);break;case 40:t===41&&O0(t);break;case 92:Nn();break}return Cn}function eX(t,e){for(;Nn()&&t+mt!==57;)if(t+mt===84&&zr()===47)break;return"/*"+ed(e,Cn-1)+"*"+bg(t===47?t:Nn())}function tX(t){for(;!fh(zr());)Nn();return ed(t,Cn)}function nX(t){return L2(Sf("",null,null,null,[""],t=M2(t),0,[0],t))}function Sf(t,e,n,r,i,s,o,a,l){for(var u=0,c=0,h=o,d=0,f=0,m=0,g=1,v=1,_=1,p=0,y="",w=i,I=s,R=r,C=y;v;)switch(m=p,p=Nn()){case 40:if(m!=108&&Mt(C,h-1)==58){N0(C+=ge(If(p),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:C+=If(p);break;case 9:case 10:case 13:case 32:C+=JQ(m);break;case 92:C+=ZQ(Tf()-1,7);continue;case 47:switch(zr()){case 42:case 47:Hd(rX(eX(Nn(),Tf()),e,n),l);break;default:C+="/"}break;case 123*g:a[u++]=Pr(C)*_;case 125*g:case 59:case 0:switch(p){case 0:case 125:v=0;case 59+c:_==-1&&(C=ge(C,/\f/g,"")),f>0&&Pr(C)-h&&Hd(f>32?ik(C+";",r,n,h-1):ik(ge(C," ","")+";",r,n,h-2),l);break;case 59:C+=";";default:if(Hd(R=rk(C,e,n,u,c,i,a,y,w=[],I=[],h),s),p===123)if(c===0)Sf(C,e,R,R,w,s,h,a,I);else switch(d===99&&Mt(C,3)===110?100:d){case 100:case 108:case 109:case 115:Sf(t,R,R,r&&Hd(rk(t,R,R,0,0,i,a,y,i,w=[],h),I),i,I,h,a,r?w:I);break;default:Sf(C,R,R,R,[""],I,0,a,I)}}u=c=f=0,g=_=1,y=C="",h=o;break;case 58:h=1+Pr(C),f=m;default:if(g<1){if(p==123)--g;else if(p==125&&g++==0&&XQ()==125)continue}switch(C+=bg(p),p*g){case 38:_=c>0?1:(C+="\f",-1);break;case 44:a[u++]=(Pr(C)-1)*_,_=1;break;case 64:zr()===45&&(C+=If(Nn())),d=zr(),c=h=Pr(y=C+=tX(Tf())),p++;break;case 45:m===45&&Pr(C)==2&&(g=0)}}return s}function rk(t,e,n,r,i,s,o,a,l,u,c){for(var h=i-1,d=i===0?s:[""],f=TI(d),m=0,g=0,v=0;m<r;++m)for(var _=0,p=dh(t,h+1,h=HQ(g=o[m])),y=t;_<f;++_)(y=N2(g>0?d[_]+" "+p:ge(p,/&\f/g,d[_])))&&(l[v++]=y);return Ng(t,e,n,i===0?wI:a,l,u,c)}function rX(t,e,n){return Ng(t,e,n,b2,bg(QQ()),dh(t,2,-2),0)}function ik(t,e,n,r){return Ng(t,e,n,EI,dh(t,0,r),dh(t,r+1,-1),r)}function ol(t,e){for(var n="",r=TI(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function iX(t,e,n,r){switch(t.type){case WQ:if(t.children.length)break;case zQ:case EI:return t.return=t.return||t.value;case b2:return"";case D2:return t.return=t.value+"{"+ol(t.children,r)+"}";case wI:t.value=t.props.join(",")}return Pr(n=ol(t.children,r))?t.return=t.value+"{"+n+"}":""}function sX(t){var e=TI(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function oX(t){return function(e){e.root||(e=e.return)&&t(e)}}var aX=function(e,n,r){for(var i=0,s=0;i=s,s=zr(),i===38&&s===12&&(n[r]=1),!fh(s);)Nn();return ed(e,Cn)},lX=function(e,n){var r=-1,i=44;do switch(fh(i)){case 0:i===38&&zr()===12&&(n[r]=1),e[r]+=aX(Cn-1,n,r);break;case 2:e[r]+=If(i);break;case 4:if(i===44){e[++r]=zr()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=bg(i)}while(i=Nn());return e},uX=function(e,n){return L2(lX(M2(e),n))},sk=new WeakMap,cX=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!sk.get(r))&&!i){sk.set(e,!0);for(var s=[],o=uX(n,s),a=r.props,l=0,u=0;l<o.length;l++)for(var c=0;c<a.length;c++,u++)e.props[u]=s[l]?o[l].replace(/&\f/g,a[c]):a[c]+" "+o[l]}}},hX=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function V2(t,e){switch(GQ(t,e)){case 5103:return me+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return me+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return me+t+Gp+t+qt+t+t;case 6828:case 4268:return me+t+qt+t+t;case 6165:return me+t+qt+"flex-"+t+t;case 5187:return me+t+ge(t,/(\w+).+(:[^]+)/,me+"box-$1$2"+qt+"flex-$1$2")+t;case 5443:return me+t+qt+"flex-item-"+ge(t,/flex-|-self/,"")+t;case 4675:return me+t+qt+"flex-line-pack"+ge(t,/align-content|flex-|-self/,"")+t;case 5548:return me+t+qt+ge(t,"shrink","negative")+t;case 5292:return me+t+qt+ge(t,"basis","preferred-size")+t;case 6060:return me+"box-"+ge(t,"-grow","")+me+t+qt+ge(t,"grow","positive")+t;case 4554:return me+ge(t,/([^-])(transform)/g,"$1"+me+"$2")+t;case 6187:return ge(ge(ge(t,/(zoom-|grab)/,me+"$1"),/(image-set)/,me+"$1"),t,"")+t;case 5495:case 3959:return ge(t,/(image-set\([^]*)/,me+"$1$`$1");case 4968:return ge(ge(t,/(.+:)(flex-)?(.*)/,me+"box-pack:$3"+qt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+me+t+t;case 4095:case 3583:case 4068:case 2532:return ge(t,/(.+)-inline(.+)/,me+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Pr(t)-1-e>6)switch(Mt(t,e+1)){case 109:if(Mt(t,e+4)!==45)break;case 102:return ge(t,/(.+:)(.+)-([^]+)/,"$1"+me+"$2-$3$1"+Gp+(Mt(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~N0(t,"stretch")?V2(ge(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Mt(t,e+1)!==115)break;case 6444:switch(Mt(t,Pr(t)-3-(~N0(t,"!important")&&10))){case 107:return ge(t,":",":"+me)+t;case 101:return ge(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+me+(Mt(t,14)===45?"inline-":"")+"box$3$1"+me+"$2$3$1"+qt+"$2box$3")+t}break;case 5936:switch(Mt(t,e+11)){case 114:return me+t+qt+ge(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return me+t+qt+ge(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return me+t+qt+ge(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return me+t+qt+t+t}return t}var dX=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case EI:e.return=V2(e.value,e.length);break;case D2:return ol([Pu(e,{value:ge(e.value,"@","@"+me)})],i);case wI:if(e.length)return KQ(e.props,function(s){switch(YQ(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ol([Pu(e,{props:[ge(s,/:(read-\w+)/,":"+Gp+"$1")]})],i);case"::placeholder":return ol([Pu(e,{props:[ge(s,/:(plac\w+)/,":"+me+"input-$1")]}),Pu(e,{props:[ge(s,/:(plac\w+)/,":"+Gp+"$1")]}),Pu(e,{props:[ge(s,/:(plac\w+)/,qt+"input-$1")]})],i)}return""})}},fX=[dX],F2=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var v=g.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=e.stylisPlugins||fX,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var v=g.getAttribute("data-emotion").split(" "),_=1;_<v.length;_++)s[v[_]]=!0;a.push(g)});var l,u=[cX,hX];{var c,h=[iX,oX(function(g){c.insert(g)})],d=sX(u.concat(i,h)),f=function(v){return ol(nX(v),d)};l=function(v,_,p,y){c=p,f(v?v+"{"+_.styles+"}":_.styles),y&&(m.inserted[_.name]=!0)}}var m={key:n,sheet:new jQ({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return m.sheet.hydrate(a),m},$2={exports:{}},Se={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dt=typeof Symbol=="function"&&Symbol.for,II=Dt?Symbol.for("react.element"):60103,SI=Dt?Symbol.for("react.portal"):60106,Og=Dt?Symbol.for("react.fragment"):60107,Mg=Dt?Symbol.for("react.strict_mode"):60108,Lg=Dt?Symbol.for("react.profiler"):60114,Vg=Dt?Symbol.for("react.provider"):60109,Fg=Dt?Symbol.for("react.context"):60110,CI=Dt?Symbol.for("react.async_mode"):60111,$g=Dt?Symbol.for("react.concurrent_mode"):60111,Ug=Dt?Symbol.for("react.forward_ref"):60112,Bg=Dt?Symbol.for("react.suspense"):60113,pX=Dt?Symbol.for("react.suspense_list"):60120,jg=Dt?Symbol.for("react.memo"):60115,zg=Dt?Symbol.for("react.lazy"):60116,mX=Dt?Symbol.for("react.block"):60121,gX=Dt?Symbol.for("react.fundamental"):60117,_X=Dt?Symbol.for("react.responder"):60118,yX=Dt?Symbol.for("react.scope"):60119;function Un(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case II:switch(t=t.type,t){case CI:case $g:case Og:case Lg:case Mg:case Bg:return t;default:switch(t=t&&t.$$typeof,t){case Fg:case Ug:case zg:case jg:case Vg:return t;default:return e}}case SI:return e}}}function U2(t){return Un(t)===$g}Se.AsyncMode=CI;Se.ConcurrentMode=$g;Se.ContextConsumer=Fg;Se.ContextProvider=Vg;Se.Element=II;Se.ForwardRef=Ug;Se.Fragment=Og;Se.Lazy=zg;Se.Memo=jg;Se.Portal=SI;Se.Profiler=Lg;Se.StrictMode=Mg;Se.Suspense=Bg;Se.isAsyncMode=function(t){return U2(t)||Un(t)===CI};Se.isConcurrentMode=U2;Se.isContextConsumer=function(t){return Un(t)===Fg};Se.isContextProvider=function(t){return Un(t)===Vg};Se.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===II};Se.isForwardRef=function(t){return Un(t)===Ug};Se.isFragment=function(t){return Un(t)===Og};Se.isLazy=function(t){return Un(t)===zg};Se.isMemo=function(t){return Un(t)===jg};Se.isPortal=function(t){return Un(t)===SI};Se.isProfiler=function(t){return Un(t)===Lg};Se.isStrictMode=function(t){return Un(t)===Mg};Se.isSuspense=function(t){return Un(t)===Bg};Se.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Og||t===$g||t===Lg||t===Mg||t===Bg||t===pX||typeof t=="object"&&t!==null&&(t.$$typeof===zg||t.$$typeof===jg||t.$$typeof===Vg||t.$$typeof===Fg||t.$$typeof===Ug||t.$$typeof===gX||t.$$typeof===_X||t.$$typeof===yX||t.$$typeof===mX)};Se.typeOf=Un;$2.exports=Se;var vX=$2.exports,B2=vX,wX={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},EX={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},j2={};j2[B2.ForwardRef]=wX;j2[B2.Memo]=EX;var TX=!0;function IX(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var z2=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||TX===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},W2=function(e,n,r){z2(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function SX(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var CX={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function RX(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var kX=!1,PX=/[A-Z]|^ms/g,AX=/_EMO_([^_]+?)_([^]*?)_EMO_/g,H2=function(e){return e.charCodeAt(1)===45},ok=function(e){return e!=null&&typeof e!="boolean"},my=RX(function(t){return H2(t)?t:t.replace(PX,"-$&").toLowerCase()}),ak=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(AX,function(r,i,s){return Ar={name:i,styles:s,next:Ar},i})}return CX[e]!==1&&!H2(e)&&typeof n=="number"&&n!==0?n+"px":n},xX="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function ph(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Ar={name:i.name,styles:i.styles,next:Ar},i.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)Ar={name:o.name,styles:o.styles,next:Ar},o=o.next;var a=s.styles+";";return a}return bX(t,e,n)}case"function":{if(t!==void 0){var l=Ar,u=n(t);return Ar=l,ph(t,e,u)}break}}var c=n;if(e==null)return c;var h=e[c];return h!==void 0?h:c}function bX(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=ph(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?r+=s+"{"+e[a]+"}":ok(a)&&(r+=my(s)+":"+ak(s,a)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&kX)throw new Error(xX);if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var l=0;l<o.length;l++)ok(o[l])&&(r+=my(s)+":"+ak(s,o[l])+";");else{var u=ph(t,e,o);switch(s){case"animation":case"animationName":{r+=my(s)+":"+u+";";break}default:r+=s+"{"+u+"}"}}}}return r}var lk=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ar;function RI(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Ar=void 0;var s=t[0];if(s==null||s.raw===void 0)r=!1,i+=ph(n,e,s);else{var o=s;i+=o[0]}for(var a=1;a<t.length;a++)if(i+=ph(n,e,t[a]),r){var l=s;i+=l[a]}lk.lastIndex=0;for(var u="",c;(c=lk.exec(i))!==null;)u+="-"+c[1];var h=SX(i)+u;return{name:h,styles:i,next:Ar}}var DX=function(e){return e()},q2=Ey.useInsertionEffect?Ey.useInsertionEffect:!1,NX=q2||DX,uk=q2||E.useLayoutEffect,G2=E.createContext(typeof HTMLElement<"u"?F2({key:"css"}):null),OX=G2.Provider,Y2=function(e){return E.forwardRef(function(n,r){var i=E.useContext(G2);return e(n,i,r)})},td=E.createContext({}),gy={exports:{}},ck;function K2(){return ck||(ck=1,function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var s in i)({}).hasOwnProperty.call(i,s)&&(n[s]=i[s])}return n},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(null,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(gy)),gy.exports}K2();var MX=Y2(function(t,e){var n=t.styles,r=RI([n],void 0,E.useContext(td)),i=E.useRef();return uk(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),uk(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&W2(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function Wg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return RI(e)}var kI=function(){var e=Wg.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},LX=FQ,VX=function(e){return e!=="theme"},hk=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?LX:VX},dk=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},FX=!1,$X=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return z2(n,r,i),NX(function(){return W2(n,r,i)}),null},UX=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=dk(e,n,r),l=a||hk(i),u=!l("as");return function(){var c=arguments,h=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&h.push("label:"+s+";"),c[0]==null||c[0].raw===void 0)h.push.apply(h,c);else{h.push(c[0][0]);for(var d=c.length,f=1;f<d;f++)h.push(c[f],c[0][f])}var m=Y2(function(g,v,_){var p=u&&g.as||i,y="",w=[],I=g;if(g.theme==null){I={};for(var R in g)I[R]=g[R];I.theme=E.useContext(td)}typeof g.className=="string"?y=IX(v.registered,w,g.className):g.className!=null&&(y=g.className+" ");var C=RI(h.concat(w),v.registered,I);y+=v.key+"-"+C.name,o!==void 0&&(y+=" "+o);var N=u&&a===void 0?hk(p):l,Z={};for(var W in g)u&&W==="as"||N(W)&&(Z[W]=g[W]);return Z.className=y,_&&(Z.ref=_),E.createElement(E.Fragment,null,E.createElement($X,{cache:v,serialized:C,isStringTag:typeof p=="string"}),E.createElement(p,Z))});return m.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",m.defaultProps=e.defaultProps,m.__emotion_real=m,m.__emotion_base=i,m.__emotion_styles=h,m.__emotion_forwardProp=a,Object.defineProperty(m,"toString",{value:function(){return o===void 0&&FX?"NO_COMPONENT_SELECTOR":"."+o}}),m.withComponent=function(g,v){return t(g,F({},n,v,{shouldForwardProp:dk(m,v,!0)})).apply(void 0,h)},m}},BX=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],M0=UX.bind();BX.forEach(function(t){M0[t]=M0(t)});let L0;typeof document=="object"&&(L0=F2({key:"css",prepend:!0}));function jX(t){const{injectFirst:e,children:n}=t;return e&&L0?k.jsx(OX,{value:L0,children:n}):n}function zX(t){return t==null||Object.keys(t).length===0}function Q2(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(zX(i)?n:i):e;return k.jsx(MX,{styles:r})}function X2(t,e){return M0(t,e)}const WX=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},HX=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:Q2,StyledEngineProvider:jX,ThemeContext:td,css:Wg,default:X2,internal_processStyles:WX,keyframes:kI},Symbol.toStringTag,{value:"Module"}));function es(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function J2(t){if(!es(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=J2(t[n])}),e}function yr(t,e,n={clone:!0}){const r=n.clone?F({},t):t;return es(t)&&es(e)&&Object.keys(e).forEach(i=>{es(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&es(t[i])?r[i]=yr(t[i],e[i],n):n.clone?r[i]=es(e[i])?J2(e[i]):e[i]:r[i]=e[i]}),r}const qX=Object.freeze(Object.defineProperty({__proto__:null,default:yr,isPlainObject:es},Symbol.toStringTag,{value:"Module"})),GX=["values","unit","step"],YX=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>F({},n,{[r.key]:r.val}),{})};function Z2(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=At(t,GX),s=YX(e),o=Object.keys(s);function a(d){return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${n})`}function l(d){return`@media (max-width:${(typeof e[d]=="number"?e[d]:d)-r/100}${n})`}function u(d,f){const m=o.indexOf(f);return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${n}) and (max-width:${(m!==-1&&typeof e[o[m]]=="number"?e[o[m]]:f)-r/100}${n})`}function c(d){return o.indexOf(d)+1<o.length?u(d,o[o.indexOf(d)+1]):a(d)}function h(d){const f=o.indexOf(d);return f===0?a(o[1]):f===o.length-1?l(o[f]):u(d,o[o.indexOf(d)+1]).replace("@media","@media not all and")}return F({keys:o,values:s,up:a,down:l,between:u,only:c,not:h,unit:n},i)}const KX={borderRadius:4},QX=KX;function hc(t,e){return e?yr(t,e,{clone:!1}):t}const PI={xs:0,sm:600,md:900,lg:1200,xl:1536},fk={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${PI[t]}px)`};function xi(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||fk;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||fk;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||PI).indexOf(a)!==-1){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function eL(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function tL(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function hre(t,...e){const n=eL(t),r=[n,...e].reduce((i,s)=>yr(i,s),{});return tL(Object.keys(n),r)}function XX(t,e){if(typeof t!="object")return{};const n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((i,s)=>{s<t.length&&(n[i]=!0)}):r.forEach(i=>{t[i]!=null&&(n[i]=!0)}),n}function dre({values:t,breakpoints:e,base:n}){const r=n||XX(t,e),i=Object.keys(r);if(i.length===0)return t;let s;return i.reduce((o,a,l)=>(Array.isArray(t)?(o[a]=t[l]!=null?t[l]:t[s],s=l):typeof t=="object"?(o[a]=t[a]!=null?t[a]:t[s],s=a):o[a]=t,o),{})}function Sr(t){if(typeof t!="string")throw new Error(hh(7));return t.charAt(0).toUpperCase()+t.slice(1)}const JX=Object.freeze(Object.defineProperty({__proto__:null,default:Sr},Symbol.toStringTag,{value:"Module"}));function Hg(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function Yp(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=Hg(t,n)||r,e&&(i=e(i,r,t)),i}function ct(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,u=Hg(l,r)||{};return xi(o,a,h=>{let d=Yp(u,i,h);return h===d&&typeof h=="string"&&(d=Yp(u,i,`${e}${h==="default"?"":Sr(h)}`,h)),n===!1?d:{[n]:d}})};return s.propTypes={},s.filterProps=[e],s}function ZX(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const eJ={m:"margin",p:"padding"},tJ={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},pk={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},nJ=ZX(t=>{if(t.length>2)if(pk[t])t=pk[t];else return[t];const[e,n]=t.split(""),r=eJ[e],i=tJ[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),AI=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],xI=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...AI,...xI];function nd(t,e,n,r){var i;const s=(i=Hg(t,e,!1))!=null?i:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function nL(t){return nd(t,"spacing",8)}function rd(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function rJ(t,e){return n=>t.reduce((r,i)=>(r[i]=rd(e,n),r),{})}function iJ(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=nJ(n),s=rJ(i,r),o=t[n];return xi(t,o,s)}function rL(t,e){const n=nL(t.theme);return Object.keys(t).map(r=>iJ(t,e,r,n)).reduce(hc,{})}function Xe(t){return rL(t,AI)}Xe.propTypes={};Xe.filterProps=AI;function Je(t){return rL(t,xI)}Je.propTypes={};Je.filterProps=xI;function sJ(t=8){if(t.mui)return t;const e=nL({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function qg(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?hc(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function Hn(t){return typeof t!="number"?t:`${t}px solid`}function or(t,e){return ct({prop:t,themeKey:"borders",transform:e})}const oJ=or("border",Hn),aJ=or("borderTop",Hn),lJ=or("borderRight",Hn),uJ=or("borderBottom",Hn),cJ=or("borderLeft",Hn),hJ=or("borderColor"),dJ=or("borderTopColor"),fJ=or("borderRightColor"),pJ=or("borderBottomColor"),mJ=or("borderLeftColor"),gJ=or("outline",Hn),_J=or("outlineColor"),Gg=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=nd(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:rd(e,r)});return xi(t,t.borderRadius,n)}return null};Gg.propTypes={};Gg.filterProps=["borderRadius"];qg(oJ,aJ,lJ,uJ,cJ,hJ,dJ,fJ,pJ,mJ,Gg,gJ,_J);const Yg=t=>{if(t.gap!==void 0&&t.gap!==null){const e=nd(t.theme,"spacing",8),n=r=>({gap:rd(e,r)});return xi(t,t.gap,n)}return null};Yg.propTypes={};Yg.filterProps=["gap"];const Kg=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=nd(t.theme,"spacing",8),n=r=>({columnGap:rd(e,r)});return xi(t,t.columnGap,n)}return null};Kg.propTypes={};Kg.filterProps=["columnGap"];const Qg=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=nd(t.theme,"spacing",8),n=r=>({rowGap:rd(e,r)});return xi(t,t.rowGap,n)}return null};Qg.propTypes={};Qg.filterProps=["rowGap"];const yJ=ct({prop:"gridColumn"}),vJ=ct({prop:"gridRow"}),wJ=ct({prop:"gridAutoFlow"}),EJ=ct({prop:"gridAutoColumns"}),TJ=ct({prop:"gridAutoRows"}),IJ=ct({prop:"gridTemplateColumns"}),SJ=ct({prop:"gridTemplateRows"}),CJ=ct({prop:"gridTemplateAreas"}),RJ=ct({prop:"gridArea"});qg(Yg,Kg,Qg,yJ,vJ,wJ,EJ,TJ,IJ,SJ,CJ,RJ);function al(t,e){return e==="grey"?e:t}const kJ=ct({prop:"color",themeKey:"palette",transform:al}),PJ=ct({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:al}),AJ=ct({prop:"backgroundColor",themeKey:"palette",transform:al});qg(kJ,PJ,AJ);function Pn(t){return t<=1&&t!==0?`${t*100}%`:t}const xJ=ct({prop:"width",transform:Pn}),bI=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const s=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||PI[n];return s?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${s}${t.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:Pn(n)}};return xi(t,t.maxWidth,e)}return null};bI.filterProps=["maxWidth"];const bJ=ct({prop:"minWidth",transform:Pn}),DJ=ct({prop:"height",transform:Pn}),NJ=ct({prop:"maxHeight",transform:Pn}),OJ=ct({prop:"minHeight",transform:Pn});ct({prop:"size",cssProperty:"width",transform:Pn});ct({prop:"size",cssProperty:"height",transform:Pn});const MJ=ct({prop:"boxSizing"});qg(xJ,bI,bJ,DJ,NJ,OJ,MJ);const LJ={border:{themeKey:"borders",transform:Hn},borderTop:{themeKey:"borders",transform:Hn},borderRight:{themeKey:"borders",transform:Hn},borderBottom:{themeKey:"borders",transform:Hn},borderLeft:{themeKey:"borders",transform:Hn},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Hn},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Gg},color:{themeKey:"palette",transform:al},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:al},backgroundColor:{themeKey:"palette",transform:al},p:{style:Je},pt:{style:Je},pr:{style:Je},pb:{style:Je},pl:{style:Je},px:{style:Je},py:{style:Je},padding:{style:Je},paddingTop:{style:Je},paddingRight:{style:Je},paddingBottom:{style:Je},paddingLeft:{style:Je},paddingX:{style:Je},paddingY:{style:Je},paddingInline:{style:Je},paddingInlineStart:{style:Je},paddingInlineEnd:{style:Je},paddingBlock:{style:Je},paddingBlockStart:{style:Je},paddingBlockEnd:{style:Je},m:{style:Xe},mt:{style:Xe},mr:{style:Xe},mb:{style:Xe},ml:{style:Xe},mx:{style:Xe},my:{style:Xe},margin:{style:Xe},marginTop:{style:Xe},marginRight:{style:Xe},marginBottom:{style:Xe},marginLeft:{style:Xe},marginX:{style:Xe},marginY:{style:Xe},marginInline:{style:Xe},marginInlineStart:{style:Xe},marginInlineEnd:{style:Xe},marginBlock:{style:Xe},marginBlockStart:{style:Xe},marginBlockEnd:{style:Xe},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Yg},rowGap:{style:Qg},columnGap:{style:Kg},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Pn},maxWidth:{style:bI},minWidth:{transform:Pn},height:{transform:Pn},maxHeight:{transform:Pn},minHeight:{transform:Pn},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},id=LJ;function VJ(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function FJ(t,e){return typeof t=="function"?t(e):t}function iL(){function t(n,r,i,s){const o={[n]:r,theme:i},a=s[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:u,transform:c,style:h}=a;if(r==null)return null;if(u==="typography"&&r==="inherit")return{[n]:r};const d=Hg(i,u)||{};return h?h(o):xi(o,r,m=>{let g=Yp(d,c,m);return m===g&&typeof m=="string"&&(g=Yp(d,c,`${n}${m==="default"?"":Sr(m)}`,m)),l===!1?g:{[l]:g}})}function e(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=(r=s.unstable_sxConfig)!=null?r:id;function a(l){let u=l;if(typeof l=="function")u=l(s);else if(typeof l!="object")return l;if(!u)return null;const c=eL(s.breakpoints),h=Object.keys(c);let d=c;return Object.keys(u).forEach(f=>{const m=FJ(u[f],s);if(m!=null)if(typeof m=="object")if(o[f])d=hc(d,t(f,m,s,o));else{const g=xi({theme:s},m,v=>({[f]:v}));VJ(g,m)?d[f]=e({sx:m,theme:s}):d=hc(d,g)}else d=hc(d,t(f,m,s,o))}),tL(h,d)}return Array.isArray(i)?i.map(a):a(i)}return e}const sL=iL();sL.filterProps=["sx"];const Xg=sL;function oL(t,e){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:n.palette.mode===t?e:{}}const $J=["breakpoints","palette","spacing","shape"];function DI(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=t,o=At(t,$J),a=Z2(n),l=sJ(i);let u=yr({breakpoints:a,direction:"ltr",components:{},palette:F({mode:"light"},r),spacing:l,shape:F({},QX,s)},o);return u.applyStyles=oL,u=e.reduce((c,h)=>yr(c,h),u),u.unstable_sxConfig=F({},id,o==null?void 0:o.unstable_sxConfig),u.unstable_sx=function(h){return Xg({sx:h,theme:this})},u}const UJ=Object.freeze(Object.defineProperty({__proto__:null,default:DI,private_createBreakpoints:Z2,unstable_applyStyles:oL},Symbol.toStringTag,{value:"Module"}));function BJ(t){return Object.keys(t).length===0}function NI(t=null){const e=E.useContext(td);return!e||BJ(e)?t:e}const jJ=DI();function OI(t=jJ){return NI(t)}function zJ({styles:t,themeId:e,defaultTheme:n={}}){const r=OI(n),i=typeof t=="function"?t(e&&r[e]||r):t;return k.jsx(Q2,{styles:i})}const WJ=["sx"],HJ=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:id;return Object.keys(t).forEach(s=>{i[s]?r.systemProps[s]=t[s]:r.otherProps[s]=t[s]}),r};function aL(t){const{sx:e}=t,n=At(t,WJ),{systemProps:r,otherProps:i}=HJ(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return es(a)?F({},r,a):r}:s=F({},r,e),F({},i,{sx:s})}const qJ=Object.freeze(Object.defineProperty({__proto__:null,default:Xg,extendSxProp:aL,unstable_createStyleFunctionSx:iL,unstable_defaultSxConfig:id},Symbol.toStringTag,{value:"Module"})),mk=t=>t,GJ=()=>{let t=mk;return{configure(e){t=e},generate(e){return t(e)},reset(){t=mk}}},YJ=GJ(),lL=YJ;function uL(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=uL(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ol(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=uL(t))&&(r&&(r+=" "),r+=e);return r}const KJ=["className","component"];function QJ(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,s=X2("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(Xg);return E.forwardRef(function(l,u){const c=OI(n),h=aL(l),{className:d,component:f="div"}=h,m=At(h,KJ);return k.jsx(s,F({as:f,ref:u,className:Ol(d,i?i(r):r),theme:e&&c[e]||c},m))})}const XJ={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function sd(t,e,n="Mui"){const r=XJ[e];return r?`${n}-${r}`:`${lL.generate(t)}-${e}`}function od(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=sd(t,i,n)}),r}var cL={exports:{}},Ce={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MI=Symbol.for("react.element"),LI=Symbol.for("react.portal"),Jg=Symbol.for("react.fragment"),Zg=Symbol.for("react.strict_mode"),e_=Symbol.for("react.profiler"),t_=Symbol.for("react.provider"),n_=Symbol.for("react.context"),JJ=Symbol.for("react.server_context"),r_=Symbol.for("react.forward_ref"),i_=Symbol.for("react.suspense"),s_=Symbol.for("react.suspense_list"),o_=Symbol.for("react.memo"),a_=Symbol.for("react.lazy"),ZJ=Symbol.for("react.offscreen"),hL;hL=Symbol.for("react.module.reference");function ar(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case MI:switch(t=t.type,t){case Jg:case e_:case Zg:case i_:case s_:return t;default:switch(t=t&&t.$$typeof,t){case JJ:case n_:case r_:case a_:case o_:case t_:return t;default:return e}}case LI:return e}}}Ce.ContextConsumer=n_;Ce.ContextProvider=t_;Ce.Element=MI;Ce.ForwardRef=r_;Ce.Fragment=Jg;Ce.Lazy=a_;Ce.Memo=o_;Ce.Portal=LI;Ce.Profiler=e_;Ce.StrictMode=Zg;Ce.Suspense=i_;Ce.SuspenseList=s_;Ce.isAsyncMode=function(){return!1};Ce.isConcurrentMode=function(){return!1};Ce.isContextConsumer=function(t){return ar(t)===n_};Ce.isContextProvider=function(t){return ar(t)===t_};Ce.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===MI};Ce.isForwardRef=function(t){return ar(t)===r_};Ce.isFragment=function(t){return ar(t)===Jg};Ce.isLazy=function(t){return ar(t)===a_};Ce.isMemo=function(t){return ar(t)===o_};Ce.isPortal=function(t){return ar(t)===LI};Ce.isProfiler=function(t){return ar(t)===e_};Ce.isStrictMode=function(t){return ar(t)===Zg};Ce.isSuspense=function(t){return ar(t)===i_};Ce.isSuspenseList=function(t){return ar(t)===s_};Ce.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Jg||t===e_||t===Zg||t===i_||t===s_||t===ZJ||typeof t=="object"&&t!==null&&(t.$$typeof===a_||t.$$typeof===o_||t.$$typeof===t_||t.$$typeof===n_||t.$$typeof===r_||t.$$typeof===hL||t.getModuleId!==void 0)};Ce.typeOf=ar;cL.exports=Ce;var gk=cL.exports;const eZ=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function dL(t){const e=`${t}`.match(eZ);return e&&e[1]||""}function fL(t,e=""){return t.displayName||t.name||dL(t)||e}function _k(t,e,n){const r=fL(e);return t.displayName||(r!==""?`${n}(${r})`:n)}function tZ(t){if(t!=null){if(typeof t=="string")return t;if(typeof t=="function")return fL(t,"Component");if(typeof t=="object")switch(t.$$typeof){case gk.ForwardRef:return _k(t,t.render,"ForwardRef");case gk.Memo:return _k(t,t.type,"memo");default:return}}}const nZ=Object.freeze(Object.defineProperty({__proto__:null,default:tZ,getFunctionName:dL},Symbol.toStringTag,{value:"Module"}));function Kp(t,e){const n=F({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=F({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},s=e[r];n[r]={},!s||!Object.keys(s)?n[r]=i:!i||!Object.keys(i)?n[r]=s:(n[r]=F({},s),Object.keys(i).forEach(o=>{n[r][o]=Kp(i[o],s[o])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function rZ(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:Kp(e.components[n].defaultProps,r)}const iZ=typeof window<"u"?E.useLayoutEffect:E.useEffect,pL=iZ;function sZ(t,e,n,r,i){const[s,o]=E.useState(()=>i&&n?n(t).matches:r?r(t).matches:e);return pL(()=>{let a=!0;if(!n)return;const l=n(t),u=()=>{a&&o(l.matches)};return u(),l.addListener(u),()=>{a=!1,l.removeListener(u)}},[t,n]),s}const mL=E.useSyncExternalStore;function oZ(t,e,n,r,i){const s=E.useCallback(()=>e,[e]),o=E.useMemo(()=>{if(i&&n)return()=>n(t).matches;if(r!==null){const{matches:c}=r(t);return()=>c}return s},[s,t,r,i,n]),[a,l]=E.useMemo(()=>{if(n===null)return[s,()=>()=>{}];const c=n(t);return[()=>c.matches,h=>(c.addListener(h),()=>{c.removeListener(h)})]},[s,n,t]);return mL(l,a,o)}function aZ(t,e={}){const n=NI(),r=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:i=!1,matchMedia:s=r?window.matchMedia:null,ssrMatchMedia:o=null,noSsr:a=!1}=rZ({name:"MuiUseMediaQuery",props:e,theme:n});let l=typeof t=="function"?t(n):t;return l=l.replace(/^@media( ?)/m,""),(mL!==void 0?oZ:sZ)(l,i,s,o,a)}function lZ(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}const uZ=Object.freeze(Object.defineProperty({__proto__:null,default:lZ},Symbol.toStringTag,{value:"Module"}));function _y(t){return t&&t.ownerDocument||document}function cZ(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function V0(t){const e=E.useRef(t);return pL(()=>{e.current=t}),E.useRef((...n)=>(0,e.current)(...n)).current}function VI(...t){return E.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{cZ(n,e)})},t)}const yk={};function hZ(t,e){const n=E.useRef(yk);return n.current===yk&&(n.current=t(e)),n}const dZ=[];function fZ(t){E.useEffect(t,dZ)}class FI{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new FI}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function gL(){const t=hZ(FI.create).current;return fZ(t.disposeEffect),t}function l_(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),n&&n[o]&&s.push(n[o])}return s},[]).join(" ")}),r}function pZ(t){return typeof t=="string"}function mZ(t,e,n){return t===void 0||pZ(t)?e:F({},e,{ownerState:F({},e.ownerState,n)})}function F0(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function vk(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function gZ(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=t;if(!e){const f=Ol(n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),m=F({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),g=F({},n,i,r);return f.length>0&&(g.className=f),Object.keys(m).length>0&&(g.style=m),{props:g,internalRef:void 0}}const o=F0(F({},i,r)),a=vk(r),l=vk(i),u=e(o),c=Ol(u==null?void 0:u.className,n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),h=F({},u==null?void 0:u.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),d=F({},u,n,l,a);return c.length>0&&(d.className=c),Object.keys(h).length>0&&(d.style=h),{props:d,internalRef:u.ref}}function _Z(t,e,n){return typeof t=="function"?t(e,n):t}const yZ=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function vZ(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:s=!1}=t,o=At(t,yZ),a=s?{}:_Z(r,i),{props:l,internalRef:u}=gZ(F({},o,{externalSlotProps:a})),c=VI(u,a==null?void 0:a.ref,(e=t.additionalProps)==null?void 0:e.ref);return mZ(n,F({},l,{ref:c}),i)}const wZ=E.createContext(null),_L=wZ;function yL(){return E.useContext(_L)}const EZ=typeof Symbol=="function"&&Symbol.for,TZ=EZ?Symbol.for("mui.nested"):"__THEME_NESTED__";function IZ(t,e){return typeof e=="function"?e(t):F({},t,e)}function SZ(t){const{children:e,theme:n}=t,r=yL(),i=E.useMemo(()=>{const s=r===null?n:IZ(r,n);return s!=null&&(s[TZ]=r!==null),s},[n,r]);return k.jsx(_L.Provider,{value:i,children:e})}const CZ=["value"],vL=E.createContext();function RZ(t){let{value:e}=t,n=At(t,CZ);return k.jsx(vL.Provider,F({value:e??!0},n))}const fre=()=>{const t=E.useContext(vL);return t??!1},wL=E.createContext(void 0);function kZ({value:t,children:e}){return k.jsx(wL.Provider,{value:t,children:e})}function PZ(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?Kp(i.defaultProps,r):!i.styleOverrides&&!i.variants?Kp(i,r):r}function AZ({props:t,name:e}){const n=E.useContext(wL);return PZ({props:t,name:e,theme:{components:n}})}const wk={};function Ek(t,e,n,r=!1){return E.useMemo(()=>{const i=t&&e[t]||e;if(typeof n=="function"){const s=n(i),o=t?F({},e,{[t]:s}):s;return r?()=>o:o}return t?F({},e,{[t]:n}):F({},e,n)},[t,e,n,r])}function xZ(t){const{children:e,theme:n,themeId:r}=t,i=NI(wk),s=yL()||wk,o=Ek(r,i,n),a=Ek(r,s,n,!0),l=o.direction==="rtl";return k.jsx(SZ,{theme:a,children:k.jsx(td.Provider,{value:o,children:k.jsx(RZ,{value:l,children:k.jsx(kZ,{value:o==null?void 0:o.components,children:e})})})})}function bZ(t,e){return F({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}var ht={},EL={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(EL);var TL=EL.exports;const DZ=Ns(MQ),NZ=Ns(uZ);var IL=TL;Object.defineProperty(ht,"__esModule",{value:!0});var Tk=ht.alpha=kL;ht.blend=GZ;ht.colorChannel=void 0;var OZ=ht.darken=UI;ht.decomposeColor=rr;var MZ=ht.emphasize=PL,LZ=ht.getContrastRatio=jZ;ht.getLuminance=Qp;ht.hexToRgb=SL;ht.hslToRgb=RL;var VZ=ht.lighten=BI;ht.private_safeAlpha=zZ;ht.private_safeColorChannel=void 0;ht.private_safeDarken=WZ;ht.private_safeEmphasize=qZ;ht.private_safeLighten=HZ;ht.recomposeColor=nu;ht.rgbToHex=BZ;var Ik=IL(DZ),FZ=IL(NZ);function $I(t,e=0,n=1){return(0,FZ.default)(t,e,n)}function SL(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function $Z(t){const e=t.toString(16);return e.length===1?`0${e}`:e}function rr(t){if(t.type)return t;if(t.charAt(0)==="#")return rr(SL(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,Ik.default)(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error((0,Ik.default)(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}const CL=t=>{const e=rr(t);return e.values.slice(0,3).map((n,r)=>e.type.indexOf("hsl")!==-1&&r!==0?`${n}%`:n).join(" ")};ht.colorChannel=CL;const UZ=(t,e)=>{try{return CL(t)}catch{return t}};ht.private_safeColorChannel=UZ;function nu(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function BZ(t){if(t.indexOf("#")===0)return t;const{values:e}=rr(t);return`#${e.map((n,r)=>$Z(r===3?Math.round(255*n):n)).join("")}`}function RL(t){t=rr(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(u,c=(u+n/30)%12)=>i-s*Math.max(Math.min(c-3,9-c,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),nu({type:a,values:l})}function Qp(t){t=rr(t);let e=t.type==="hsl"||t.type==="hsla"?rr(RL(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function jZ(t,e){const n=Qp(t),r=Qp(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function kL(t,e){return t=rr(t),e=$I(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,nu(t)}function zZ(t,e,n){try{return kL(t,e)}catch{return t}}function UI(t,e){if(t=rr(t),e=$I(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return nu(t)}function WZ(t,e,n){try{return UI(t,e)}catch{return t}}function BI(t,e){if(t=rr(t),e=$I(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return nu(t)}function HZ(t,e,n){try{return BI(t,e)}catch{return t}}function PL(t,e=.15){return Qp(t)>.5?UI(t,e):BI(t,e)}function qZ(t,e,n){try{return PL(t,e)}catch{return t}}function GZ(t,e,n,r=1){const i=(l,u)=>Math.round((l**(1/r)*(1-n)+u**(1/r)*n)**r),s=rr(t),o=rr(e),a=[i(s.values[0],o.values[0]),i(s.values[1],o.values[1]),i(s.values[2],o.values[2])];return nu({type:"rgb",values:a})}const YZ=["mode","contrastThreshold","tonalOffset"],Sk={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ch.white,default:ch.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},yy={text:{primary:ch.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:ch.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Ck(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=VZ(t.main,i):e==="dark"&&(t.dark=OZ(t.main,s)))}function KZ(t="light"){return t==="dark"?{main:_a[200],light:_a[50],dark:_a[400]}:{main:_a[700],light:_a[400],dark:_a[800]}}function QZ(t="light"){return t==="dark"?{main:ga[200],light:ga[50],dark:ga[400]}:{main:ga[500],light:ga[300],dark:ga[700]}}function XZ(t="light"){return t==="dark"?{main:ma[500],light:ma[300],dark:ma[700]}:{main:ma[700],light:ma[400],dark:ma[800]}}function JZ(t="light"){return t==="dark"?{main:ya[400],light:ya[300],dark:ya[700]}:{main:ya[700],light:ya[500],dark:ya[900]}}function ZZ(t="light"){return t==="dark"?{main:va[400],light:va[300],dark:va[700]}:{main:va[800],light:va[500],dark:va[900]}}function eee(t="light"){return t==="dark"?{main:ku[400],light:ku[300],dark:ku[700]}:{main:"#ed6c02",light:ku[500],dark:ku[900]}}function tee(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=At(t,YZ),s=t.primary||KZ(e),o=t.secondary||QZ(e),a=t.error||XZ(e),l=t.info||JZ(e),u=t.success||ZZ(e),c=t.warning||eee(e);function h(g){return LZ(g,yy.text.primary)>=n?yy.text.primary:Sk.text.primary}const d=({color:g,name:v,mainShade:_=500,lightShade:p=300,darkShade:y=700})=>{if(g=F({},g),!g.main&&g[_]&&(g.main=g[_]),!g.hasOwnProperty("main"))throw new Error(hh(11,v?` (${v})`:"",_));if(typeof g.main!="string")throw new Error(hh(12,v?` (${v})`:"",JSON.stringify(g.main)));return Ck(g,"light",p,r),Ck(g,"dark",y,r),g.contrastText||(g.contrastText=h(g.main)),g},f={dark:yy,light:Sk};return yr(F({common:F({},ch),mode:e,primary:d({color:s,name:"primary"}),secondary:d({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:a,name:"error"}),warning:d({color:c,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:u,name:"success"}),grey:OQ,contrastThreshold:n,getContrastText:h,augmentColor:d,tonalOffset:r},f[e]),i)}const nee=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function ree(t){return Math.round(t*1e5)/1e5}const Rk={textTransform:"uppercase"},kk='"Roboto", "Helvetica", "Arial", sans-serif';function iee(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=kk,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:u=16,allVariants:c,pxToRem:h}=n,d=At(n,nee),f=i/14,m=h||(_=>`${_/u*f}rem`),g=(_,p,y,w,I)=>F({fontFamily:r,fontWeight:_,fontSize:m(p),lineHeight:y},r===kk?{letterSpacing:`${ree(w/p)}em`}:{},I,c),v={h1:g(s,96,1.167,-1.5),h2:g(s,60,1.2,-.5),h3:g(o,48,1.167,0),h4:g(o,34,1.235,.25),h5:g(o,24,1.334,0),h6:g(a,20,1.6,.15),subtitle1:g(o,16,1.75,.15),subtitle2:g(a,14,1.57,.1),body1:g(o,16,1.5,.15),body2:g(o,14,1.43,.15),button:g(a,14,1.75,.4,Rk),caption:g(o,12,1.66,.4),overline:g(o,12,2.66,1,Rk),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return yr(F({htmlFontSize:u,pxToRem:m,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},v),d,{clone:!1})}const see=.2,oee=.14,aee=.12;function $e(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${see})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${oee})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${aee})`].join(",")}const lee=["none",$e(0,2,1,-1,0,1,1,0,0,1,3,0),$e(0,3,1,-2,0,2,2,0,0,1,5,0),$e(0,3,3,-2,0,3,4,0,0,1,8,0),$e(0,2,4,-1,0,4,5,0,0,1,10,0),$e(0,3,5,-1,0,5,8,0,0,1,14,0),$e(0,3,5,-1,0,6,10,0,0,1,18,0),$e(0,4,5,-2,0,7,10,1,0,2,16,1),$e(0,5,5,-3,0,8,10,1,0,3,14,2),$e(0,5,6,-3,0,9,12,1,0,3,16,2),$e(0,6,6,-3,0,10,14,1,0,4,18,3),$e(0,6,7,-4,0,11,15,1,0,4,20,3),$e(0,7,8,-4,0,12,17,2,0,5,22,4),$e(0,7,8,-4,0,13,19,2,0,5,24,4),$e(0,7,9,-4,0,14,21,2,0,5,26,4),$e(0,8,9,-5,0,15,22,2,0,6,28,5),$e(0,8,10,-5,0,16,24,2,0,6,30,5),$e(0,8,11,-5,0,17,26,2,0,6,32,5),$e(0,9,11,-5,0,18,28,2,0,7,34,6),$e(0,9,12,-6,0,19,29,2,0,7,36,6),$e(0,10,13,-6,0,20,31,3,0,8,38,7),$e(0,10,13,-6,0,21,33,3,0,8,40,7),$e(0,10,14,-6,0,22,35,3,0,8,42,7),$e(0,11,14,-7,0,23,36,3,0,9,44,8),$e(0,11,15,-7,0,24,38,3,0,9,46,8)],uee=lee,cee=["duration","easing","delay"],hee={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},dee={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Pk(t){return`${Math.round(t)}ms`}function fee(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function pee(t){const e=F({},hee,t.easing),n=F({},dee,t.duration);return F({getAutoHeightDuration:fee,create:(i=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=s;return At(s,cee),(Array.isArray(i)?i:[i]).map(u=>`${u} ${typeof o=="string"?o:Pk(o)} ${a} ${typeof l=="string"?l:Pk(l)}`).join(",")}},t,{easing:e,duration:n})}const mee={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},gee=mee,_ee=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function jI(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=t,o=At(t,_ee);if(t.vars)throw new Error(hh(18));const a=tee(r),l=DI(t);let u=yr(l,{mixins:bZ(l.breakpoints,n),palette:a,shadows:uee.slice(),typography:iee(a,s),transitions:pee(i),zIndex:F({},gee)});return u=yr(u,o),u=e.reduce((c,h)=>yr(c,h),u),u.unstable_sxConfig=F({},id,o==null?void 0:o.unstable_sxConfig),u.unstable_sx=function(h){return Xg({sx:h,theme:this})},u}const yee=jI(),zI=yee;function AL(){const t=OI(zI);return t[Dl]||t}var ad={},vy={exports:{}},Ak;function vee(){return Ak||(Ak=1,function(t){function e(n,r){if(n==null)return{};var i={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(r.includes(s))continue;i[s]=n[s]}return i}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(vy)),vy.exports}const wee=Ns(HX),Eee=Ns(qX),Tee=Ns(JX),Iee=Ns(nZ),See=Ns(UJ),Cee=Ns(qJ);var ru=TL;Object.defineProperty(ad,"__esModule",{value:!0});var Ree=ad.default=$ee;ad.shouldForwardProp=Cf;ad.systemDefaultTheme=void 0;var Bn=ru(K2()),$0=ru(vee()),xk=Nee(wee),kee=Eee;ru(Tee);ru(Iee);var Pee=ru(See),Aee=ru(Cee);const xee=["ownerState"],bee=["variants"],Dee=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function xL(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(xL=function(r){return r?n:e})(t)}function Nee(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=xL(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function Oee(t){return Object.keys(t).length===0}function Mee(t){return typeof t=="string"&&t.charCodeAt(0)>96}function Cf(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const Lee=ad.systemDefaultTheme=(0,Pee.default)(),Vee=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function qd({defaultTheme:t,theme:e,themeId:n}){return Oee(e)?t:e[n]||e}function Fee(t){return t?(e,n)=>n[t]:null}function Rf(t,e){let{ownerState:n}=e,r=(0,$0.default)(e,xee);const i=typeof t=="function"?t((0,Bn.default)({ownerState:n},r)):t;if(Array.isArray(i))return i.flatMap(s=>Rf(s,(0,Bn.default)({ownerState:n},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:s=[]}=i;let a=(0,$0.default)(i,bee);return s.forEach(l=>{let u=!0;typeof l.props=="function"?u=l.props((0,Bn.default)({ownerState:n},r,n)):Object.keys(l.props).forEach(c=>{(n==null?void 0:n[c])!==l.props[c]&&r[c]!==l.props[c]&&(u=!1)}),u&&(Array.isArray(a)||(a=[a]),a.push(typeof l.style=="function"?l.style((0,Bn.default)({ownerState:n},r,n)):l.style))}),a}return i}function $ee(t={}){const{themeId:e,defaultTheme:n=Lee,rootShouldForwardProp:r=Cf,slotShouldForwardProp:i=Cf}=t,s=o=>(0,Aee.default)((0,Bn.default)({},o,{theme:qd((0,Bn.default)({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{(0,xk.internal_processStyles)(o,I=>I.filter(R=>!(R!=null&&R.__mui_systemSx)));const{name:l,slot:u,skipVariantsResolver:c,skipSx:h,overridesResolver:d=Fee(Vee(u))}=a,f=(0,$0.default)(a,Dee),m=c!==void 0?c:u&&u!=="Root"&&u!=="root"||!1,g=h||!1;let v,_=Cf;u==="Root"||u==="root"?_=r:u?_=i:Mee(o)&&(_=void 0);const p=(0,xk.default)(o,(0,Bn.default)({shouldForwardProp:_,label:v},f)),y=I=>typeof I=="function"&&I.__emotion_real!==I||(0,kee.isPlainObject)(I)?R=>Rf(I,(0,Bn.default)({},R,{theme:qd({theme:R.theme,defaultTheme:n,themeId:e})})):I,w=(I,...R)=>{let C=y(I);const N=R?R.map(y):[];l&&d&&N.push(Ae=>{const He=qd((0,Bn.default)({},Ae,{defaultTheme:n,themeId:e}));if(!He.components||!He.components[l]||!He.components[l].styleOverrides)return null;const Nt=He.components[l].styleOverrides,Rn={};return Object.entries(Nt).forEach(([Re,dt])=>{Rn[Re]=Rf(dt,(0,Bn.default)({},Ae,{theme:He}))}),d(Ae,Rn)}),l&&!m&&N.push(Ae=>{var He;const Nt=qd((0,Bn.default)({},Ae,{defaultTheme:n,themeId:e})),Rn=Nt==null||(He=Nt.components)==null||(He=He[l])==null?void 0:He.variants;return Rf({variants:Rn},(0,Bn.default)({},Ae,{theme:Nt}))}),g||N.push(s);const Z=N.length-R.length;if(Array.isArray(I)&&Z>0){const Ae=new Array(Z).fill("");C=[...I,...Ae],C.raw=[...I.raw,...Ae]}const W=p(C,...N);return o.muiName&&(W.muiName=o.muiName),W};return p.withConfig&&(w.withConfig=p.withConfig),w}}function Uee(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const Bee=t=>Uee(t)&&t!=="classes",jee=Bee,zee=Ree({themeId:Dl,defaultTheme:zI,rootShouldForwardProp:jee}),zs=zee,Wee=["theme"];function Hee(t){let{theme:e}=t,n=At(t,Wee);const r=e[Dl];return k.jsx(xZ,F({},n,{themeId:r?Dl:void 0,theme:r||e}))}const qee=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)},bk=qee;function ld(t){return AZ(t)}function U0(t,e){return U0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},U0(t,e)}function Gee(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,U0(t,e)}const Dk={disabled:!1},bL=ve.createContext(null);var Yee=function(e){return e.scrollTop},ju="unmounted",Zs="exited",eo="entering",Ra="entered",B0="exiting",Fi=function(t){Gee(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=Zs,s.appearStatus=eo):l=Ra:r.unmountOnExit||r.mountOnEnter?l=ju:l=Zs,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===ju?{status:Zs}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==eo&&o!==Ra&&(s=eo):(o===eo||o===Ra)&&(s=B0)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===eo){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Rd.findDOMNode(this);o&&Yee(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Zs&&this.setState({status:ju})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[Rd.findDOMNode(this),a],u=l[0],c=l[1],h=this.getTimeouts(),d=a?h.appear:h.enter;if(!i&&!o||Dk.disabled){this.safeSetState({status:Ra},function(){s.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:eo},function(){s.props.onEntering(u,c),s.onTransitionEnd(d,function(){s.safeSetState({status:Ra},function(){s.props.onEntered(u,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Rd.findDOMNode(this);if(!s||Dk.disabled){this.safeSetState({status:Zs},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:B0},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Zs},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:Rd.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===ju)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=At(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ve.createElement(bL.Provider,{value:null},typeof o=="function"?o(i,a):ve.cloneElement(ve.Children.only(o),a))},e}(ve.Component);Fi.contextType=bL;Fi.propTypes={};function wa(){}Fi.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:wa,onEntering:wa,onEntered:wa,onExit:wa,onExiting:wa,onExited:wa};Fi.UNMOUNTED=ju;Fi.EXITED=Zs;Fi.ENTERING=eo;Fi.ENTERED=Ra;Fi.EXITING=B0;const Kee=Fi,Qee=t=>t.scrollTop;function Nk(t,e){var n,r;const{timeout:i,easing:s,style:o={}}=t;return{duration:(n=o.transitionDuration)!=null?n:typeof i=="number"?i:i[e.mode]||0,easing:(r=o.transitionTimingFunction)!=null?r:typeof s=="object"?s[e.mode]:s,delay:o.transitionDelay}}function Xee(t){return sd("MuiPaper",t)}od("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Jee=["className","component","elevation","square","variant"],Zee=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,s={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return l_(s,Xee,i)},ete=zs("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(({theme:t,ownerState:e})=>{var n;return F({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.divider}`},e.variant==="elevation"&&F({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Tk("#fff",bk(e.elevation))}, ${Tk("#fff",bk(e.elevation))})`},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),tte=E.forwardRef(function(e,n){const r=ld({props:e,name:"MuiPaper"}),{className:i,component:s="div",elevation:o=1,square:a=!1,variant:l="elevation"}=r,u=At(r,Jee),c=F({},r,{component:s,elevation:o,square:a,variant:l}),h=Zee(c);return k.jsx(ete,F({as:s,ownerState:c,className:Ol(h.root,i),ref:n},u))}),nte=tte;function rte(t){return k.jsx(zJ,F({},t,{defaultTheme:zI,themeId:Dl}))}const ite=od("MuiBox",["root"]),ste=ite,ote=jI(),ate=QJ({themeId:Dl,defaultTheme:ote,defaultClassName:ste.root,generateClassName:lL.generate}),Ok=ate;function lte(t){return sd("MuiCircularProgress",t)}od("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const ute=["className","color","disableShrink","size","style","thickness","value","variant"];let u_=t=>t,Mk,Lk,Vk,Fk;const zi=44,cte=kI(Mk||(Mk=u_`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),hte=kI(Lk||(Lk=u_`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),dte=t=>{const{classes:e,variant:n,color:r,disableShrink:i}=t,s={root:["root",n,`color${Sr(r)}`],svg:["svg"],circle:["circle",`circle${Sr(n)}`,i&&"circleDisableShrink"]};return l_(s,lte,e)},fte=zs("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${Sr(n.color)}`]]}})(({ownerState:t,theme:e})=>F({display:"inline-block"},t.variant==="determinate"&&{transition:e.transitions.create("transform")},t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main}),({ownerState:t})=>t.variant==="indeterminate"&&Wg(Vk||(Vk=u_`
      animation: ${0} 1.4s linear infinite;
    `),cte)),pte=zs("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(t,e)=>e.svg})({display:"block"}),mte=zs("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${Sr(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(({ownerState:t,theme:e})=>F({stroke:"currentColor"},t.variant==="determinate"&&{transition:e.transitions.create("stroke-dashoffset")},t.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink&&Wg(Fk||(Fk=u_`
      animation: ${0} 1.4s ease-in-out infinite;
    `),hte)),gte=E.forwardRef(function(e,n){const r=ld({props:e,name:"MuiCircularProgress"}),{className:i,color:s="primary",disableShrink:o=!1,size:a=40,style:l,thickness:u=3.6,value:c=0,variant:h="indeterminate"}=r,d=At(r,ute),f=F({},r,{color:s,disableShrink:o,size:a,thickness:u,value:c,variant:h}),m=dte(f),g={},v={},_={};if(h==="determinate"){const p=2*Math.PI*((zi-u)/2);g.strokeDasharray=p.toFixed(3),_["aria-valuenow"]=Math.round(c),g.strokeDashoffset=`${((100-c)/100*p).toFixed(3)}px`,v.transform="rotate(-90deg)"}return k.jsx(fte,F({className:Ol(m.root,i),style:F({width:a,height:a},v,l),ownerState:f,ref:n,role:"progressbar"},_,d,{children:k.jsx(pte,{className:m.svg,ownerState:f,viewBox:`${zi/2} ${zi/2} ${zi} ${zi}`,children:k.jsx(mte,{className:m.circle,style:g,ownerState:f,cx:zi,cy:zi,r:(zi-u)/2,fill:"none",strokeWidth:u})})}))}),_te=gte;function $k(t){return t.substring(2).toLowerCase()}function yte(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function vte(t){const{children:e,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:s="onTouchEnd"}=t,o=E.useRef(!1),a=E.useRef(null),l=E.useRef(!1),u=E.useRef(!1);E.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const c=VI(e.ref,a),h=V0(m=>{const g=u.current;u.current=!1;const v=_y(a.current);if(!l.current||!a.current||"clientX"in m&&yte(m,v))return;if(o.current){o.current=!1;return}let _;m.composedPath?_=m.composedPath().indexOf(a.current)>-1:_=!v.documentElement.contains(m.target)||a.current.contains(m.target),!_&&(n||!g)&&i(m)}),d=m=>g=>{u.current=!0;const v=e.props[m];v&&v(g)},f={ref:c};return s!==!1&&(f[s]=d(s)),E.useEffect(()=>{if(s!==!1){const m=$k(s),g=_y(a.current),v=()=>{o.current=!0};return g.addEventListener(m,h),g.addEventListener("touchmove",v),()=>{g.removeEventListener(m,h),g.removeEventListener("touchmove",v)}}},[h,s]),r!==!1&&(f[r]=d(r)),E.useEffect(()=>{if(r!==!1){const m=$k(r),g=_y(a.current);return g.addEventListener(m,h),()=>{g.removeEventListener(m,h)}}},[h,r]),k.jsx(E.Fragment,{children:E.cloneElement(e,f)})}const wte=(t,e)=>F({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},e&&!t.vars&&{colorScheme:t.palette.mode}),Ete=t=>F({color:(t.vars||t).palette.text.primary},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),Tte=(t,e=!1)=>{var n;const r={};e&&t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([o,a])=>{var l;r[t.getColorSchemeSelector(o).replace(/\s*&/,"")]={colorScheme:(l=a.palette)==null?void 0:l.mode}});let i=F({html:wte(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:F({margin:0},Ete(t),{"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}})},r);const s=(n=t.components)==null||(n=n.MuiCssBaseline)==null?void 0:n.styleOverrides;return s&&(i=[i,s]),i};function Ite(t){const e=ld({props:t,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=e;return k.jsxs(E.Fragment,{children:[k.jsx(rte,{styles:i=>Tte(i,r)}),n]})}const Ste=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function j0(t){return`scale(${t}, ${t**2})`}const Cte={entering:{opacity:1,transform:j0(1)},entered:{opacity:1,transform:"none"}},wy=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),DL=E.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:s,easing:o,in:a,onEnter:l,onEntered:u,onEntering:c,onExit:h,onExited:d,onExiting:f,style:m,timeout:g="auto",TransitionComponent:v=Kee}=e,_=At(e,Ste),p=gL(),y=E.useRef(),w=AL(),I=E.useRef(null),R=VI(I,s.ref,n),C=Re=>dt=>{if(Re){const jt=I.current;dt===void 0?Re(jt):Re(jt,dt)}},N=C(c),Z=C((Re,dt)=>{Qee(Re);const{duration:jt,delay:V,easing:H}=Nk({style:m,timeout:g,easing:o},{mode:"enter"});let Y;g==="auto"?(Y=w.transitions.getAutoHeightDuration(Re.clientHeight),y.current=Y):Y=jt,Re.style.transition=[w.transitions.create("opacity",{duration:Y,delay:V}),w.transitions.create("transform",{duration:wy?Y:Y*.666,delay:V,easing:H})].join(","),l&&l(Re,dt)}),W=C(u),Ae=C(f),He=C(Re=>{const{duration:dt,delay:jt,easing:V}=Nk({style:m,timeout:g,easing:o},{mode:"exit"});let H;g==="auto"?(H=w.transitions.getAutoHeightDuration(Re.clientHeight),y.current=H):H=dt,Re.style.transition=[w.transitions.create("opacity",{duration:H,delay:jt}),w.transitions.create("transform",{duration:wy?H:H*.666,delay:wy?jt:jt||H*.333,easing:V})].join(","),Re.style.opacity=0,Re.style.transform=j0(.75),h&&h(Re)}),Nt=C(d),Rn=Re=>{g==="auto"&&p.start(y.current||0,Re),r&&r(I.current,Re)};return k.jsx(v,F({appear:i,in:a,nodeRef:I,onEnter:Z,onEntered:W,onEntering:N,onExit:He,onExited:Nt,onExiting:Ae,addEndListener:Rn,timeout:g==="auto"?null:g},_,{children:(Re,dt)=>E.cloneElement(s,F({style:F({opacity:0,transform:j0(.75),visibility:Re==="exited"&&!a?"hidden":void 0},Cte[Re],m,s.props.style),ref:R},dt))}))});DL.muiSupportAuto=!0;const Rte=DL;function kte(t={}){const{autoHideDuration:e=null,disableWindowBlurListener:n=!1,onClose:r,open:i,resumeHideDuration:s}=t,o=gL();E.useEffect(()=>{if(!i)return;function _(p){p.defaultPrevented||(p.key==="Escape"||p.key==="Esc")&&(r==null||r(p,"escapeKeyDown"))}return document.addEventListener("keydown",_),()=>{document.removeEventListener("keydown",_)}},[i,r]);const a=V0((_,p)=>{r==null||r(_,p)}),l=V0(_=>{!r||_==null||o.start(_,()=>{a(null,"timeout")})});E.useEffect(()=>(i&&l(e),o.clear),[i,e,l,o]);const u=_=>{r==null||r(_,"clickaway")},c=o.clear,h=E.useCallback(()=>{e!=null&&l(s??e*.5)},[e,s,l]),d=_=>p=>{const y=_.onBlur;y==null||y(p),h()},f=_=>p=>{const y=_.onFocus;y==null||y(p),c()},m=_=>p=>{const y=_.onMouseEnter;y==null||y(p),c()},g=_=>p=>{const y=_.onMouseLeave;y==null||y(p),h()};return E.useEffect(()=>{if(!n&&i)return window.addEventListener("focus",h),window.addEventListener("blur",c),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",c)}},[n,i,h,c]),{getRootProps:(_={})=>{const p=F({},F0(t),F0(_));return F({role:"presentation"},_,p,{onBlur:d(p),onFocus:f(p),onMouseEnter:m(p),onMouseLeave:g(p)})},onClickAway:u}}function Pte(t){return sd("MuiSnackbarContent",t)}od("MuiSnackbarContent",["root","message","action"]);const Ate=["action","className","message","role"],xte=t=>{const{classes:e}=t;return l_({root:["root"],action:["action"],message:["message"]},Pte,e)},bte=zs(nte,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>{const e=t.palette.mode==="light"?.8:.98,n=MZ(t.palette.background.default,e);return F({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(n),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),Dte=zs("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0"}),Nte=zs("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Ote=E.forwardRef(function(e,n){const r=ld({props:e,name:"MuiSnackbarContent"}),{action:i,className:s,message:o,role:a="alert"}=r,l=At(r,Ate),u=r,c=xte(u);return k.jsxs(bte,F({role:a,square:!0,elevation:6,className:Ol(c.root,s),ownerState:u,ref:n},l,{children:[k.jsx(Dte,{className:c.message,ownerState:u,children:o}),i?k.jsx(Nte,{className:c.action,ownerState:u,children:i}):null]}))}),Mte=Ote;function Lte(t){return sd("MuiSnackbar",t)}od("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Vte=["onEnter","onExited"],Fte=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],$te=t=>{const{classes:e,anchorOrigin:n}=t,r={root:["root",`anchorOrigin${Sr(n.vertical)}${Sr(n.horizontal)}`]};return l_(r,Lte,e)},Uk=zs("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`anchorOrigin${Sr(n.anchorOrigin.vertical)}${Sr(n.anchorOrigin.horizontal)}`]]}})(({theme:t,ownerState:e})=>{const n={left:"50%",right:"auto",transform:"translateX(-50%)"};return F({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},e.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},e.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},e.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:F({},e.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},e.anchorOrigin.horizontal==="center"&&n,e.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},e.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),Ute=E.forwardRef(function(e,n){const r=ld({props:e,name:"MuiSnackbar"}),i=AL(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:o,anchorOrigin:{vertical:a,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:u=null,children:c,className:h,ClickAwayListenerProps:d,ContentProps:f,disableWindowBlurListener:m=!1,message:g,open:v,TransitionComponent:_=Rte,transitionDuration:p=s,TransitionProps:{onEnter:y,onExited:w}={}}=r,I=At(r.TransitionProps,Vte),R=At(r,Fte),C=F({},r,{anchorOrigin:{vertical:a,horizontal:l},autoHideDuration:u,disableWindowBlurListener:m,TransitionComponent:_,transitionDuration:p}),N=$te(C),{getRootProps:Z,onClickAway:W}=kte(F({},C)),[Ae,He]=E.useState(!0),Nt=vZ({elementType:Uk,getSlotProps:Z,externalForwardedProps:R,ownerState:C,additionalProps:{ref:n},className:[N.root,h]}),Rn=dt=>{He(!0),w&&w(dt)},Re=(dt,jt)=>{He(!1),y&&y(dt,jt)};return!v&&Ae?null:k.jsx(vte,F({onClickAway:W},d,{children:k.jsx(Uk,F({},Nt,{children:k.jsx(_,F({appear:!0,in:v,timeout:p,direction:a==="top"?"down":"up",onEnter:Re,onExited:Rn},I,{children:c||k.jsx(Mte,F({message:g,action:o},f))}))}))}))}),Bte=Ute,jte=({userId:t})=>(E.useEffect(()=>{if(t){const e=T0(b0,`/status/${t}`),n={status:"online",lastChanged:GR()},r={status:"offline",lastChanged:GR()},i=T0(b0,".info/connected");$M(i,s=>{s.val()===!0&&r8(e,n),n8(e).set(r)})}},[t]),null),zte=ve.lazy(()=>We(()=>import("./Results-QgsI0xjn.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),Wte=ve.lazy(()=>We(()=>import("./Header-W4rpr0sS.js"),__vite__mapDeps([12,13,14,15,16,17,3,18,19,20,5,8,21,22,2,4,6,23,11,24,25,26,27]))),Hte=ve.lazy(()=>We(()=>import("./Reviews-1uI6aAKG.js"),__vite__mapDeps([28,29,30,18,20,5,8,31,32,1,7]))),qte=ve.lazy(()=>We(()=>import("./Error-kpKQ8Nx3.js"),__vite__mapDeps([30,18,20,5,8]))),Bk=ve.lazy(()=>We(()=>import("./History-keDO9vV9.js"),__vite__mapDeps([33,15,16,17,3,18,19,20,5,32,1,34,9]))),Gte=ve.lazy(()=>We(()=>import("./Admin-ITS_02sH.js"),__vite__mapDeps([35,11,8,24]))),Yte=ve.lazy(()=>We(()=>import("./Footer-Khi9O4Pl.js"),__vite__mapDeps([36,19,18]))),Kte=ve.lazy(()=>We(()=>import("./Login-bwTiwG1A.js"),__vite__mapDeps([37,29,32,18,19,20,5,38,3,17,22,4,8]))),Qte=ve.lazy(()=>We(()=>import("./Settings-lVfAnx0B.js"),__vite__mapDeps([39,32,18,14,40,38,3,17,22,4,8,5,15,16,19,20,2,9,6,41,42,21,43]))),Xte=ve.lazy(()=>We(()=>import("./Tests-CSNZe8xt.js"),__vite__mapDeps([44,15,16,17,3,18,19,20,5,38,22,4,8,45,23,29,2,6,7,41,46,47,13,31,48,49,50,1,32,24]))),Jte=ve.lazy(()=>We(()=>import("./Users-PhvbNjJt.js"),__vite__mapDeps([51,48,2,3,4,5,6,7,8,14,52,53,54,32,18,1,10,20]))),Zte=ve.lazy(()=>We(()=>import("./AddPost-4c_e4arO.js"),__vite__mapDeps([55,29,56,48,2,3,4,5,6,7,8,49,50,16,17,18,20,38,22,13,52,54,40,15,19,1,32,41,46,9,57,58]))),ene=ve.lazy(()=>We(()=>import("./Notifications-JvQ7BTBb.js"),__vite__mapDeps([59,56,13,32,18,54,1,9,20,5]))),tne=ve.lazy(()=>We(()=>import("./ChatRoom-f7DrRJkt.js"),__vite__mapDeps([60,32,18,16,17,3,19,38,22,4,8,20,5,14,13,53,54,52,9,1,61,62,2,63,64,47]))),nne=ve.lazy(()=>We(()=>import("./Help-8QWwI7Zd.js"),__vite__mapDeps([65,56,32,18,8,43,2,3,4,5,6,25]))),rne=ve.lazy(()=>We(()=>import("./Posts-BMXcOBYX.js"),__vite__mapDeps([66,52,32,18,67,16,17,3,19,2,4,5,6,23,8,56,54,68,27,58,69,70,20,71,72,9,49,50,29,41,1,62,63,64]))),ine=ve.lazy(()=>We(()=>import("./Tests-Q-mcA1a0.js"),__vite__mapDeps([73,52,56,54,69,70,20,5,2,3,4,6,71,8,32,18,1,74,9,49,50,29,16,17,62,63,64,41,58]))),sne=ve.lazy(()=>We(()=>import("./TakingTest-znrV19dX.js"),__vite__mapDeps([75,15,16,17,3,18,19,20,5,2,4,6,7,8,29,70,32,1]))),one=ve.lazy(()=>We(()=>import("./Chat-ODckmRLL.js"),__vite__mapDeps([76,14,52,61,9,2,3,4,5,18,40,26,6,8,41,38,17,22,45,46,47,13,54,29,20,10,50,16,67,19,23,32,1,63,57]))),ane=ve.lazy(()=>We(()=>import("./Test-QBr9b23H.js"),__vite__mapDeps([77,72,9,61,74,34]))),lne=ve.lazy(()=>We(()=>import("./SinglePost-pJ0cwZNX.js"),__vite__mapDeps([78,56,54,68,27,18,8,58,49,50,29,16,17,3,2,4,5,6,20,72,9,1,67,19,23,79,53,14,52,70,61,46,71,38,22,41]))),une=ve.lazy(()=>We(()=>import("./SingleTest-UVSzNoKU.js"),__vite__mapDeps([80,56,54,1,79,49,50,8,29,16,17,3,2,4,5,6,18,20,53,14,52,70,61,9,46,71,19,38,22,23,41,74,58]))),cne=ve.lazy(()=>We(()=>import("./UserProfile-ouHkcHBW.js"),__vite__mapDeps([81,40,8,56,54,9,18,20,5,71,19,6,42,38,3,17,22,4,2,41]))),hne=ve.lazy(()=>We(()=>import("./Search-2v95xnnM.js"),__vite__mapDeps([82,14,8,20,5,38,3,17,22,4,64,6,23,2,18]))),NL=E.createContext();function dne(){var HI,qI,GI;const t=yv("sea-localStorage"),e=aZ("(prefers-color-scheme : dark)"),[n,r]=E.useState(yv("sea-website-theme")||"dark"),[i,s]=E.useState(((HI=t==null?void 0:t.timer)==null?void 0:HI.seconds)||0),[o,a]=E.useState(((qI=t==null?void 0:t.timer)==null?void 0:qI.minutes)||0),[l,u]=E.useState(((GI=t==null?void 0:t.timer)==null?void 0:GI.hours)||0),[c,h]=E.useState(null),[d,f]=E.useState([]),[m,g]=E.useState(null),[v,_]=E.useState(null),[p,y]=E.useState(null),[w,I]=E.useState(!1),[R,C]=E.useState(""),[N,Z]=E.useState(!1),[W,Ae]=E.useState([]),[He,Nt]=E.useState([]),[Rn,Re]=E.useState([]),[dt,jt]=E.useState(null),[V,H]=E.useState([]),[Y,De]=E.useState(!1),[st,Ws]=E.useState(""),[Jr,iu]=E.useState(null),Zr=Hs=>{De(!0),Ws(Hs)};E.useEffect(()=>{px("sea-website-theme",n)},[n]);const oa=Hs=>({palette:{mode:Hs,...Hs==="dark"?{primary:{main:"#90caf9"},secondary:{main:"#f48fb1"},background:{default:"#121212",paper:"#1d1d1d"},text:{primary:"#ffffff"}}:{primary:{main:"#1976d2"},secondary:{main:"#ff4081"},background:{default:"#ffffff",paper:"#f5f5f5"},text:{primary:"#000000"}},components:{MuiAppBar:{styleOverrides:{...Hs==="light"&&{backgroundColor:"#ffffff",color:"#000000"}}}}}}),OL=E.useMemo(()=>jI(oa(n==="system"?e?"dark":"light":n)));EQ(YN(bl,"newMessages"),[],Re,()=>{},()=>{});const ML=()=>{},WI=()=>{s(0),a(0),u(0)},LL=()=>{WI()},VL=`${l}:${tk(o)}:${tk(i)}`;return E.useEffect(()=>{const Hs=setInterval(()=>{i<59?s(i+1):(s(0),a(o+1)),o===59&&(a(0),u(l+1))},1e3);return()=>{clearInterval(Hs)}},[i]),k.jsx(NL.Provider,{value:{myChats:V,setMyChats:H,stopTest:LL,seaLocalStorage:t,formattedTime:VL,startTimer:WI,seconds:i,minutes:o,hours:l,inspecting:w,userData:c,setUserData:h,users:d,setUsers:f,headerTitle:R,setHeaderTitle:C,refreshUserData:ML,isOnline:N,setIsOnline:Z,userId:m,setUserId:g,setInspecting:I,posts:W,setPosts:Ae,tests:He,setTests:Nt,history,chats:dt,setChats:jt,newMessages:Rn,notiCount:p,setNotiCount:y,historyCount:v,setHistoryCount:_,snackbarOpen:Y,setSnackbarOpen:De,snackbarMessage:st,setSnackbarMessage:Ws,openSnackbar:Zr,setMode:r,mode:n,viewingImage:Jr,setViewingImage:iu},children:k.jsxs(Hee,{theme:OL,children:[k.jsx(Ite,{}),k.jsxs(Ok,{bgcolor:"background.default",className:" App font-padauk flex flex-col items-center min-h-screen ",children:[k.jsx(Bte,{bgcolor:"background.default",open:Y,onClose:()=>De(!1),autoHideDuration:4e3,message:st}),k.jsx(aU,{children:k.jsxs(E.Suspense,{fallback:k.jsx(Ok,{m:2,children:k.jsx(_te,{})}),children:[k.jsx(jte,{userId:m}),k.jsx(CQ,{}),R!=="Chat"&&k.jsx(Wte,{}),k.jsx("div",{className:"flex-1 w-full h-full md:w-4/5 lg:w-3/5 ",children:k.jsxs(eU,{children:[k.jsx(Ue,{exact:!0,path:"/test",element:k.jsx(ane,{})}),k.jsx(Ue,{exact:!0,path:"/login",element:k.jsx(Kte,{})}),m&&k.jsxs(k.Fragment,{children:[k.jsx(Ue,{exact:!0,path:"/app",element:k.jsx(rne,{})}),k.jsx(Ue,{exact:!0,path:"/app/search",element:k.jsx(hne,{})}),k.jsx(Ue,{exact:!0,path:"/app/profile/:userId",element:k.jsx(cne,{})}),k.jsx(Ue,{exact:!0,path:"/app/posts/sp/:postId",element:k.jsx(lne,{})}),k.jsx(Ue,{exact:!0,path:"/app/tests/st/:testId",element:k.jsx(une,{})}),k.jsx(Ue,{exact:!0,path:"/app/tests",element:k.jsx(ine,{})}),k.jsx(Ue,{exact:!0,path:"/app/tests/:testId",element:k.jsx(sne,{})}),k.jsx(Ue,{exact:!0,path:"/app/history",element:k.jsx(Bk,{})}),k.jsx(Ue,{exact:!0,path:"/app/history/:resultId",element:k.jsx(zte,{})}),k.jsx(Ue,{exact:!0,path:"/app/help",element:k.jsx(nne,{})}),k.jsx(Ue,{exact:!0,path:"/app/history/:resultId/reviews",element:k.jsx(Hte,{})}),k.jsx(Ue,{path:"/app/history",element:k.jsx(Bk,{})}),k.jsx(Ue,{path:"/app/chatroom",element:k.jsx(tne,{})}),k.jsx(Ue,{path:"/app/chatroom/:chatId",element:k.jsx(one,{})}),k.jsx(Ue,{path:"/app/notifications",element:k.jsx(ene,{})}),(c==null?void 0:c.isAdmin)&&k.jsxs(k.Fragment,{children:[k.jsx(Ue,{path:"/app/admin",element:k.jsx(Gte,{})}),k.jsx(Ue,{path:"/app/admin/tests",element:k.jsx(Xte,{})}),k.jsx(Ue,{path:"/app/admin/users",element:k.jsx(Jte,{})}),k.jsx(Ue,{path:"/app/admin/posts",element:k.jsx(Zte,{})})]}),k.jsx(Ue,{exact:!0,path:"/app/settings",element:k.jsx(Qte,{})})]}),k.jsx(Ue,{path:"*",element:k.jsx(qte,{title:"No page found!",text:"No page found!"})})]})}),R!=="Chat Room"&&k.jsx(Yte,{})]})})]})]})})}Ty.createRoot(document.getElementById("root")).render(k.jsx(ve.StrictMode,{children:k.jsx(dne,{})}));export{Xne as $,NL as A,V0 as B,nx as C,_y as D,Ok as E,Yne as F,Cne as G,Ju as H,ve as I,Eh as J,ure as K,IQ as L,ore as M,pne as N,are as O,nte as P,lre as Q,ire as R,kz as S,Kee as T,One as U,Mne as V,Lne as W,rre as X,Kne as Y,Rne as Z,At as _,fne as a,OZ as a$,Tne as a0,Ene as a1,Tk as a2,Th as a3,gne as a4,mne as a5,yne as a6,_ne as a7,ES as a8,Fs as a9,jne as aA,$ne as aB,Uz as aC,nre as aD,EQ as aE,Fne as aF,cre as aG,zne as aH,_te as aI,Nne as aJ,cO as aK,T0 as aL,Gne as aM,qne as aN,Hne as aO,$M as aP,Dne as aQ,b0 as aR,Nz as aS,Oz as aT,ere as aU,Zne as aV,Jne as aW,Une as aX,kI as aY,Wg as aZ,VZ as a_,zw as aa,$l as ab,qr as ac,Ss as ad,Si as ae,Xn as af,se as ag,Uw as ah,Sx as ai,ep as aj,TU as ak,yt as al,ce as am,xU as an,_m as ao,EU as ap,Nu as aq,Ou as ar,wne as as,vne as at,Ine as au,Sne as av,Vne as aw,Wne as ax,Qne as ay,Bne as az,Xc as b,aL as b0,dre as b1,xi as b2,WX as b3,X2 as b4,DI as b5,Xg as b6,es as b7,OI as b8,rZ as b9,nL as ba,yr as bb,hre as bc,rd as bd,hh as be,lZ as bf,pZ as bg,rte as bh,vZ as bi,Rte as bj,Uee as bk,F0 as bl,Kp as bm,wee as bn,gL as bo,mZ as bp,FI as bq,Ey as br,cZ as bs,Gee as bt,bL as bu,YN as c,bl as d,uO as e,D0 as f,sre as g,AL as h,VI as i,k as j,F as k,Qee as l,Nk as m,sd as n,od as o,zs as p,jee as q,E as r,tre as s,Sr as t,cx as u,ld as v,fre as w,Ol as x,l_ as y,pL as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/Results-QgsI0xjn.js","assets/EmptyComponent-LbBV4xaA.js","assets/Tooltip-cTALVPIn.js","assets/Portal-YB56xSUH.js","assets/useControlled-qBYEK2eV.js","assets/ButtonBase-ryrwXNwG.js","assets/IconButton-x0ar69Y7.js","assets/ArrowBackSharp-LySXSozB.js","assets/createSvgIcon-BoAk_7pD.js","assets/Skeleton-aRLWJJ7b.js","assets/VisibilitySharp-_ywbSJk6.js","assets/HomeSharp-ybvSV98Y.js","assets/Header-W4rpr0sS.js","assets/shortenText-S284lLsL.js","assets/ProfilePicture-N-yMezIS.js","assets/ConfirmDelete-RLdVewKK.js","assets/Dialog-7UnCDBMC.js","assets/Modal-XJP-E1k3.js","assets/Typography-F2i8tb5R.js","assets/Stack-bBqHnaWs.js","assets/Button-dux8T5OH.js","assets/LogoutSharp-GqSCD7OJ.js","assets/debounce-gOEKrWSg.js","assets/CloseSharp-6-Zx-Mf5.js","assets/QuizSharp-CzF6Fizd.js","assets/HelpSharp-DhP5cZ5N.js","assets/Toolbar-ngSV7nyZ.js","assets/Grid-h-ZCuhow.js","assets/Reviews-1uI6aAKG.js","assets/getImage-SzyEh5nT.js","assets/Error-kpKQ8Nx3.js","assets/Line-O9V-AGzE.js","assets/LoadingScreen-EYXdXKre.js","assets/History-keDO9vV9.js","assets/SkeletonHistory-hez_RTB7.js","assets/Admin-ITS_02sH.js","assets/Footer-Khi9O4Pl.js","assets/Login-bwTiwG1A.js","assets/TextField-yLRiE9R7.js","assets/Settings-lVfAnx0B.js","assets/browser-image-compression-9kymdGFS.js","assets/EditSharp-Qr3GQduu.js","assets/ContentCopySharp-4gTE_PZU.js","assets/UpdateSharp-JbtgS1fB.js","assets/Tests-CSNZe8xt.js","assets/SaveSharp-oWcmeMD7.js","assets/DeleteSharp-bueuT1qV.js","assets/AddSharp-Tz7roCMb.js","assets/BackToAdmin-BXJU8u_3.js","assets/MoreOption-CBEm1e9N.js","assets/OtherActions-na3csAt4.js","assets/Users-PhvbNjJt.js","assets/sortByDateNewer-X-Bb2bKS.js","assets/prettyDateChat-PSq7xrmC.js","assets/fixTime-t8Fgsaat.js","assets/AddPost-4c_e4arO.js","assets/prettyDate-uNOGf4QX.js","assets/CollectionsSharp-Sop9fVUo.js","assets/LinkSharp-V12iGhFD.js","assets/Notifications-JvQ7BTBb.js","assets/ChatRoom-f7DrRJkt.js","assets/SkeletonUser-FPcBTXzT.js","assets/FabSearch-egk5RJGK.js","assets/Fab-Y1qd__Pp.js","assets/SearchSharp-j_EjSxko.js","assets/Help-8QWwI7Zd.js","assets/Posts-BMXcOBYX.js","assets/ImageViewer-9eL0WPff.js","assets/Links-_VS89QM1.js","assets/Reactions-FlB2PVA1.js","assets/notify-fX9PdEbD.js","assets/FavoriteBorder-zXnu4wal.js","assets/SkeletonPost-0a5nIlkW.js","assets/Tests-Q-mcA1a0.js","assets/SkeletongTest-NXSTRACK.js","assets/TakingTest-znrV19dX.js","assets/Chat-ODckmRLL.js","assets/Test-QBr9b23H.js","assets/SinglePost-pJ0cwZNX.js","assets/ReactionsSingle-ynnp0-4g.js","assets/SingleTest-UVSzNoKU.js","assets/UserProfile-ouHkcHBW.js","assets/Search-2v95xnnM.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}