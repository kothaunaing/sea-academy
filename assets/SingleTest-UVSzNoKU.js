import{I as L,a as R,u as q,r,A,h as M,j as e,aG as P,E as n,d as U,b as B,e as D}from"./index-14pqm9y1.js";import{p as I}from"./prettyDate-uNOGf4QX.js";import{f as O}from"./fixTime-t8Fgsaat.js";import{M as h}from"./EmptyComponent-LbBV4xaA.js";import{R as V}from"./ReactionsSingle-ynnp0-4g.js";import{S as G}from"./SkeletongTest-NXSTRACK.js";import{M as H}from"./MoreOption-CBEm1e9N.js";import{E as F}from"./EditSharp-Qr3GQduu.js";import{S as g}from"./Skeleton-aRLWJJ7b.js";import{T as j}from"./Tooltip-cTALVPIn.js";import{T as J}from"./Typography-F2i8tb5R.js";import{L as K}from"./LinkSharp-V12iGhFD.js";import{B as Q}from"./Button-dux8T5OH.js";import"./prettyDateChat-PSq7xrmC.js";import"./ProfilePicture-N-yMezIS.js";import"./sortByDateNewer-X-Bb2bKS.js";import"./notify-fX9PdEbD.js";import"./SkeletonUser-FPcBTXzT.js";import"./DeleteSharp-bueuT1qV.js";import"./createSvgIcon-BoAk_7pD.js";import"./IconButton-x0ar69Y7.js";import"./ButtonBase-ryrwXNwG.js";import"./FavoriteBorder-zXnu4wal.js";import"./Stack-bBqHnaWs.js";import"./TextField-yLRiE9R7.js";import"./Portal-YB56xSUH.js";import"./Modal-XJP-E1k3.js";import"./debounce-gOEKrWSg.js";import"./useControlled-qBYEK2eV.js";import"./CloseSharp-6-Zx-Mf5.js";import"./OtherActions-na3csAt4.js";import"./getImage-SzyEh5nT.js";import"./Dialog-7UnCDBMC.js";const Ce=L.memo(()=>{const{testId:m}=R(),i=q(),[t,b]=r.useState(null),{users:k,openSnackbar:d,startTimer:S,userData:l,setHeaderTitle:w}=r.useContext(A),[s,N]=r.useState(null),[u,v]=r.useState(null),[y,T]=r.useState(!1),[$,a]=r.useState(!0),[x,C]=r.useState(!0),E=M(),{mode:c}=E.palette;r.useState(!1);const z=l!=null&&l.isAdmin?{text:"Edit Test",icon:e.jsx(F,{}),onClick:()=>{i("/app/admin/tests/")}}:null;return r.useEffect(()=>{(async()=>{try{a(!0);const o=B(U,"tests",m),p=await D(o);p.exists()?(b({id:p.id,...p.data()}),a(!1)):(a(!1),T(!0))}catch(o){a(!1),v(o.message),d(o.message),console.log(o.message)}})()},[m]),P(t==null?void 0:t.uid,k,N,C,[m,t],1200),r.useEffect(()=>{s&&w(s.name+"'s post")},[s]),$?e.jsx(n,{m:2,children:e.jsx(G,{})}):y?e.jsx(h,{text:"No post available"}):u?e.jsx(h,{text:u}):e.jsx(n,{m:2,children:e.jsxs(n,{bgcolor:"background.default",color:"text.primary",className:`${c==="dark"?"border-slate-700":"border-slate-200"} flex flex-col justify-between min-h-60 border shadow-md rounded-md bg-gradient-to-tr`,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex gap-x-2 mb-2 p-2",children:[x?e.jsx(g,{width:35,height:35,variant:"circular"}):e.jsx(j,{title:`View ${s&&s.name}'s profile`,arrow:!0,placement:"top",children:e.jsx("div",{className:"cursor-pointer",onClick:()=>i(`/app/profile/${s.uid}`),children:e.jsx("img",{className:"size-10 rounded-full shadow-md object-cover",src:s?s.image:"images/sea-logo.jpg"})})}),e.jsxs("div",{children:[x?e.jsx(g,{height:40,width:120}):e.jsx(j,{title:`View ${s&&s.name}'s profile`,arrow:!0,placement:"top",children:e.jsx(J,{onClick:()=>i(`/app/profile/${s.uid}`),variant:"h6",fontSize:"1rem",sx:{cursor:"pointer"},children:s?s.name:"Unknown User"})}),e.jsx("div",{className:" text-sm",children:I(O(t.time))})]}),e.jsxs("span",{className:`rounded-md border  text-sm text-gray-400 flex items-center p-1 ${c==="dark"?"border-slate-700":"border-slate-200"}`,children:[t.quizzes.length,t.quizzes.length>1?" questions":" question"]})]}),e.jsx(n,{children:e.jsx(H,{options:[{text:"Copy link",icon:e.jsx(K,{}),onClick:()=>{const f=`${location.origin}/#/app/tests/st/${t.id}`;navigator.clipboard.writeText(f),d("Link copied successfully")}},z],isComment:!0})})]}),t.image&&e.jsx("div",{className:"m-2 flex justify-center p-2",children:e.jsx("img",{className:"h-[250px]",src:`images/tests/${t.image}`})}),e.jsxs("div",{className:`${c==="dark"?"border-slate-700":"border-slate-200"} p-2 rounded-bl-lg rounded-br-lg border-t shadow-t-md`,children:[e.jsx("div",{className:"font-medium text-lg",children:t.name}),e.jsx("p",{className:" mb-2 break-words white-space-pre-wrap",children:t.description.trim()||"No description"}),e.jsx(Q,{sx:{textDecoration:"underline"},size:"small",onClick:()=>{S(),i(`/app/tests/${t.id}`)},children:"Take the test"})]}),e.jsx(V,{post:t,collectionName:"tests"})]})})});export{Ce as default};
