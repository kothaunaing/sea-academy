import{I as R,a as A,r as i,A as M,u as U,j as e,h as V,aG as G,E as o,d as z,b as F,e as O}from"./index-dSD7UM6z.js";import{p as B}from"./prettyDate-uNOGf4QX.js";import{f as D}from"./fixTime-t8Fgsaat.js";import{I as H,F as q,L as J}from"./Links-XSrInvf8.js";import{M as K}from"./MoreOption-JHeiK-L2.js";import{S as Q}from"./SkeletonPost-UN4bfPcr.js";import{M as S}from"./EmptyComponent-exm26pmt.js";import{I as W}from"./ImageViewer-jQeWf4UN.js";import{R as X}from"./ReactionsSingle-YShH7Qoj.js";import{E as Y}from"./EditSharp-5MWA8YtH.js";import{S as w}from"./Skeleton-dIugF2Xi.js";import{T as b}from"./Tooltip-pmR5sMk3.js";import{T as d}from"./Typography-GbCp5BvV.js";import{L as Z}from"./LinkSharp-QhDPgRCi.js";import{G as _}from"./Grid-GwN7kgyx.js";import"./createSvgIcon-5tUNT3Hd.js";import"./OtherActions-nqepKyeg.js";import"./getImage-SzyEh5nT.js";import"./Dialog-mGbZrOYD.js";import"./Modal-40Myj6Vm.js";import"./Portal-nV2JPNiI.js";import"./IconButton-M8OEfqkq.js";import"./ButtonBase-D-lMm-wW.js";import"./Button-ZTLNkO5Z.js";import"./Stack-4mDqqL4m.js";import"./CloseSharp-rElFupoQ.js";import"./prettyDateChat-PSq7xrmC.js";import"./ProfilePicture-M_ZZBSpq.js";import"./sortByDateNewer-X-Bb2bKS.js";import"./notify-Jx9imYkB.js";import"./SkeletonUser-CCty_Vu6.js";import"./DeleteSharp-TjtWe4op.js";import"./FavoriteBorder-HxMcdhth.js";import"./CircularProgress-VZGqxfrs.js";import"./TextField-tugteksq.js";import"./debounce-gOEKrWSg.js";import"./useControlled-ajujHaEs.js";const ze=R.memo(()=>{var h,j;const{postId:m,type:ee}=A(),[t,y]=i.useState(null),{users:v,openSnackbar:f,setViewingImage:u,viewingImage:x,userData:p,setHeaderTitle:E}=i.useContext(M),[s,C]=i.useState(null),l=U(),[g,I]=i.useState(null),[L,N]=i.useState(!1),[T,a]=i.useState(!0),[n,P]=i.useState(!0),$=p!=null&&p.isAdmin?{text:"Edit Post",icon:e.jsx(Y,{}),onClick:()=>{l("/app/admin/posts/")}}:null;return V().palette,i.useState(!1),i.useEffect(()=>{(async()=>{try{a(!0);const r=F(z,"posts",m),c=await O(r);c.exists()?(y({id:c.id,...c.data()}),a(!1)):(a(!1),N(!0))}catch(r){a(!1),I(r.message),f(r.message),console.log(r.message)}})()},[m]),G(t==null?void 0:t.uid,v,C,P,[m,t],1200),i.useEffect(()=>{!n&&s&&E((s==null?void 0:s.name)+"'s post")},[n]),T?e.jsx(o,{m:2,children:e.jsx(Q,{})}):L?e.jsx(S,{text:"No post available"}):g?e.jsx(S,{text:g}):e.jsx(o,{m:2,children:e.jsxs(o,{bgcolor:"background.default",color:"text.primary",className:"border border-slate-300 shadow-lg rounded-md",sx:{width:"full"},children:[x&&e.jsx(W,{image:x,setViewingImage:u,postImage:!0}),e.jsxs(o,{className:"top-section flex justify-between  mb-2 p-2",children:[e.jsxs(o,{className:"flex gap-x-2",children:[n?e.jsx(w,{width:35,height:35,variant:"circular"}):e.jsx(b,{title:`View ${s&&s.name}'s profile`,arrow:!0,placement:"top",children:e.jsx("div",{className:"cursor-pointer",onClick:()=>l(`/app/profile/${s.uid}`),children:e.jsx("img",{className:"size-10 rounded-full shadow-md object-cover",src:s?s.image:"images/sea-logo.jpg"})})}),e.jsxs(o,{children:[n?e.jsx(w,{height:40,width:120}):e.jsx(b,{title:`View ${s&&s.name}'s profile`,arrow:!0,placement:"top",children:e.jsx(d,{onClick:()=>l(`/app/profile/${s.uid}`),variant:"h6",fontSize:"1rem",sx:{cursor:"pointer"},children:s?s.name:"Unknown User"})}),e.jsx(d,{variant:"caption",children:B(D(t.time))})]})]}),e.jsx(o,{children:e.jsx(K,{options:[{text:"Copy link",icon:e.jsx(Z,{}),onClick:()=>{const k=`${location.origin}/#/app/posts/sp/${t.id}`;navigator.clipboard.writeText(k),f("Link copied successfully")}},$],isComment:!0})})]}),(t==null?void 0:t.description)&&e.jsx(d,{p:1,children:t.description}),t.images.length!==0?e.jsx(_,{container:!0,spacing:1,className:" p-0",sx:{p:1},children:e.jsx(H,{post:t,setViewingImage:u})}):"",t.files&&((h=t==null?void 0:t.files)==null?void 0:h.length)!==0&&e.jsx(q,{files:t.files}),(t==null?void 0:t.links)&&((j=t==null?void 0:t.links)==null?void 0:j.length)!==0&&e.jsx(J,{links:t.links}),e.jsx(X,{post:t,collectionName:"posts"})]})})});export{ze as default};
