import{K as R,a as A,r as i,A as M,u as U,j as e,h as V,aJ as G,E as o,G as d,d as z,b as F,e as O}from"./index-bR4MaZOJ.js";import{p as B}from"./prettyDate-uNOGf4QX.js";import{f as D}from"./fixTime-t8Fgsaat.js";import{I as H,F as J,L as K}from"./Links-TTbXU5yi.js";import{M as q}from"./MoreOption-mSkIibas.js";import{S as Q}from"./SkeletonPost-6zh13vZe.js";import{M as S}from"./EmptyComponent-mtutYQst.js";import{I as W}from"./ImageViewer-gTpVmIgl.js";import{R as X}from"./ReactionsSingle-MvGSPct9.js";import{E as Y}from"./EditSharp-tls7Gpwf.js";import{S as w}from"./Skeleton-LRfmB9RD.js";import{T as b}from"./Tooltip-jKN6Sqwz.js";import{L as Z}from"./LinkSharp-MvLMBxnF.js";import{G as _}from"./Grid-2woZ9Acj.js";import"./createSvgIcon-3G1Z23-M.js";import"./OtherActions-7net_NKU.js";import"./getImage-SzyEh5nT.js";import"./Dialog-pOjzfPCd.js";import"./Modal-AMyV4m0Z.js";import"./Portal-vj8E7tuN.js";import"./IconButton-zFeYIEAO.js";import"./Stack-WYlN-LHL.js";import"./CloseSharp-8hnKeMD4.js";import"./prettyDateChat-PSq7xrmC.js";import"./ProfilePicture-NkVAKawu.js";import"./sortByDateNewer-X-Bb2bKS.js";import"./notify-kdn7sAoT.js";import"./SkeletonUser-pwlHAotJ.js";import"./DeleteSharp-n4xHhV2L.js";import"./FavoriteBorder-gZEnJaMG.js";import"./TextField-lZjHCUEq.js";import"./debounce-gOEKrWSg.js";import"./useControlled-Tg6WpoLH.js";const Me=R.memo(()=>{var h,j;const{postId:m,type:ee}=A(),[s,y]=i.useState(null),{users:v,openSnackbar:f,setViewingImage:u,viewingImage:x,userData:l,setHeaderTitle:E}=i.useContext(M),[t,C]=i.useState(null),p=U(),[g,L]=i.useState(null),[N,I]=i.useState(!1),[P,a]=i.useState(!0),[n,T]=i.useState(!0),$=l!=null&&l.isAdmin?{text:"Edit Post",icon:e.jsx(Y,{}),onClick:()=>{p("/app/admin/posts/")}}:null;return V().palette,i.useState(!1),i.useEffect(()=>{(async()=>{try{a(!0);const r=F(z,"posts",m),c=await O(r);c.exists()?(y({id:c.id,...c.data()}),a(!1)):(a(!1),I(!0))}catch(r){a(!1),L(r.message),f(r.message),console.log(r.message)}})()},[m]),G(s==null?void 0:s.uid,v,C,T,[m,s],1200),i.useEffect(()=>{!n&&t&&E((t==null?void 0:t.name)+"'s post")},[n]),P?e.jsx(o,{m:2,children:e.jsx(Q,{})}):N?e.jsx(S,{text:"No post available"}):g?e.jsx(S,{text:g}):e.jsx(o,{m:2,children:e.jsxs(o,{bgcolor:"background.default",color:"text.primary",className:"border border-slate-300 shadow-lg rounded-md",sx:{width:"full"},children:[x&&e.jsx(W,{image:x,setViewingImage:u,postImage:!0}),e.jsxs(o,{className:"top-section flex justify-between  mb-2 p-2",children:[e.jsxs(o,{className:"flex gap-x-2",children:[n?e.jsx(w,{width:35,height:35,variant:"circular"}):e.jsx(b,{title:`View ${t&&t.name}'s profile`,arrow:!0,placement:"top",children:e.jsx("div",{className:"cursor-pointer",onClick:()=>p(`/app/profile/${t.uid}`),children:e.jsx("img",{className:"size-10 rounded-full shadow-md object-cover",src:t?t.image:"images/sea-logo.jpg"})})}),e.jsxs(o,{children:[n?e.jsx(w,{height:40,width:120}):e.jsx(b,{title:`View ${t&&t.name}'s profile`,arrow:!0,placement:"top",children:e.jsx(d,{onClick:()=>p(`/app/profile/${t.uid}`),variant:"h6",fontSize:"1rem",sx:{cursor:"pointer"},children:t?t.name:"Unknown User"})}),e.jsx(d,{variant:"caption",children:B(D(s.time))})]})]}),e.jsx(o,{children:e.jsx(q,{options:[{text:"Copy link",icon:e.jsx(Z,{}),onClick:()=>{const k=`${location.origin}/#/app/posts/sp/${s.id}`;navigator.clipboard.writeText(k),f("Link copied successfully")}},$],isComment:!0})})]}),(s==null?void 0:s.description)&&e.jsx(d,{p:1,children:s.description}),s.images.length!==0?e.jsx(_,{container:!0,spacing:1,className:" p-0",sx:{p:1},children:e.jsx(H,{post:s,setViewingImage:u})}):"",s.files&&((h=s==null?void 0:s.files)==null?void 0:h.length)!==0&&e.jsx(J,{files:s.files}),(s==null?void 0:s.links)&&((j=s==null?void 0:s.links)==null?void 0:j.length)!==0&&e.jsx(K,{links:s.links}),e.jsx(X,{post:s,collectionName:"posts"})]})})});export{Me as default};
