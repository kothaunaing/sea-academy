import{I as R,a as A,r as i,A as M,u as U,j as e,h as V,aG as G,E as o,d as z,b as F,e as O}from"./index-14pqm9y1.js";import{p as B}from"./prettyDate-uNOGf4QX.js";import{f as D}from"./fixTime-t8Fgsaat.js";import{I as H,F as q,L as J}from"./Links-_VS89QM1.js";import{M as K}from"./MoreOption-CBEm1e9N.js";import{S as Q}from"./SkeletonPost-0a5nIlkW.js";import{M as S}from"./EmptyComponent-LbBV4xaA.js";import{I as W}from"./ImageViewer-9eL0WPff.js";import{R as X}from"./ReactionsSingle-ynnp0-4g.js";import{E as Y}from"./EditSharp-Qr3GQduu.js";import{S as w}from"./Skeleton-aRLWJJ7b.js";import{T as b}from"./Tooltip-cTALVPIn.js";import{T as d}from"./Typography-F2i8tb5R.js";import{L as Z}from"./LinkSharp-V12iGhFD.js";import{G as _}from"./Grid-h-ZCuhow.js";import"./createSvgIcon-BoAk_7pD.js";import"./OtherActions-na3csAt4.js";import"./getImage-SzyEh5nT.js";import"./Dialog-7UnCDBMC.js";import"./Modal-XJP-E1k3.js";import"./Portal-YB56xSUH.js";import"./IconButton-x0ar69Y7.js";import"./ButtonBase-ryrwXNwG.js";import"./Button-dux8T5OH.js";import"./Stack-bBqHnaWs.js";import"./CloseSharp-6-Zx-Mf5.js";import"./prettyDateChat-PSq7xrmC.js";import"./ProfilePicture-N-yMezIS.js";import"./sortByDateNewer-X-Bb2bKS.js";import"./notify-fX9PdEbD.js";import"./SkeletonUser-FPcBTXzT.js";import"./DeleteSharp-bueuT1qV.js";import"./FavoriteBorder-zXnu4wal.js";import"./TextField-yLRiE9R7.js";import"./debounce-gOEKrWSg.js";import"./useControlled-qBYEK2eV.js";const Ge=R.memo(()=>{var h,j;const{postId:m,type:ee}=A(),[t,y]=i.useState(null),{users:v,openSnackbar:f,setViewingImage:u,viewingImage:x,userData:l,setHeaderTitle:E}=i.useContext(M),[s,C]=i.useState(null),p=U(),[g,I]=i.useState(null),[L,N]=i.useState(!1),[T,a]=i.useState(!0),[n,P]=i.useState(!0),$=l!=null&&l.isAdmin?{text:"Edit Post",icon:e.jsx(Y,{}),onClick:()=>{p("/app/admin/posts/")}}:null;return V().palette,i.useState(!1),i.useEffect(()=>{(async()=>{try{a(!0);const r=F(z,"posts",m),c=await O(r);c.exists()?(y({id:c.id,...c.data()}),a(!1)):(a(!1),N(!0))}catch(r){a(!1),I(r.message),f(r.message),console.log(r.message)}})()},[m]),G(t==null?void 0:t.uid,v,C,P,[m,t],1200),i.useEffect(()=>{!n&&s&&E((s==null?void 0:s.name)+"'s post")},[n]),T?e.jsx(o,{m:2,children:e.jsx(Q,{})}):L?e.jsx(S,{text:"No post available"}):g?e.jsx(S,{text:g}):e.jsx(o,{m:2,children:e.jsxs(o,{bgcolor:"background.default",color:"text.primary",className:"border border-slate-300 shadow-lg rounded-md",sx:{width:"full"},children:[x&&e.jsx(W,{image:x,setViewingImage:u,postImage:!0}),e.jsxs(o,{className:"top-section flex justify-between  mb-2 p-2",children:[e.jsxs(o,{className:"flex gap-x-2",children:[n?e.jsx(w,{width:35,height:35,variant:"circular"}):e.jsx(b,{title:`View ${s&&s.name}'s profile`,arrow:!0,placement:"top",children:e.jsx("div",{className:"cursor-pointer",onClick:()=>p(`/app/profile/${s.uid}`),children:e.jsx("img",{className:"size-10 rounded-full shadow-md object-cover",src:s?s.image:"images/sea-logo.jpg"})})}),e.jsxs(o,{children:[n?e.jsx(w,{height:40,width:120}):e.jsx(b,{title:`View ${s&&s.name}'s profile`,arrow:!0,placement:"top",children:e.jsx(d,{onClick:()=>p(`/app/profile/${s.uid}`),variant:"h6",fontSize:"1rem",sx:{cursor:"pointer"},children:s?s.name:"Unknown User"})}),e.jsx(d,{variant:"caption",children:B(D(t.time))})]})]}),e.jsx(o,{children:e.jsx(K,{options:[{text:"Copy link",icon:e.jsx(Z,{}),onClick:()=>{const k=`${location.origin}/#/app/posts/sp/${t.id}`;navigator.clipboard.writeText(k),f("Link copied successfully")}},$],isComment:!0})})]}),(t==null?void 0:t.description)&&e.jsx(d,{p:1,children:t.description}),t.images.length!==0?e.jsx(_,{container:!0,spacing:1,className:" p-0",sx:{p:1},children:e.jsx(H,{post:t,setViewingImage:u})}):"",t.files&&((h=t==null?void 0:t.files)==null?void 0:h.length)!==0&&e.jsx(q,{files:t.files}),(t==null?void 0:t.links)&&((j=t==null?void 0:t.links)==null?void 0:j.length)!==0&&e.jsx(J,{links:t.links}),e.jsx(X,{post:t,collectionName:"posts"})]})})});export{Ge as default};
