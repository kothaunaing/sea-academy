function IC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function SC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var oy={exports:{}},fh={},ay={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sl=Symbol.for("react.element"),AC=Symbol.for("react.portal"),RC=Symbol.for("react.fragment"),NC=Symbol.for("react.strict_mode"),kC=Symbol.for("react.profiler"),PC=Symbol.for("react.provider"),LC=Symbol.for("react.context"),bC=Symbol.for("react.forward_ref"),DC=Symbol.for("react.suspense"),OC=Symbol.for("react.memo"),MC=Symbol.for("react.lazy"),Sg=Symbol.iterator;function jC(t){return t===null||typeof t!="object"?null:(t=Sg&&t[Sg]||t["@@iterator"],typeof t=="function"?t:null)}var ly={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cy=Object.assign,uy={};function So(t,e,n){this.props=t,this.context=e,this.refs=uy,this.updater=n||ly}So.prototype.isReactComponent={};So.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};So.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hy(){}hy.prototype=So.prototype;function A2(t,e,n){this.props=t,this.context=e,this.refs=uy,this.updater=n||ly}var R2=A2.prototype=new hy;R2.constructor=A2;cy(R2,So.prototype);R2.isPureReactComponent=!0;var Ag=Array.isArray,dy=Object.prototype.hasOwnProperty,N2={current:null},fy={key:!0,ref:!0,__self:!0,__source:!0};function py(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)dy.call(e,r)&&!fy.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Sl,type:t,key:i,ref:o,props:s,_owner:N2.current}}function VC(t,e){return{$$typeof:Sl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function k2(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sl}function FC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rg=/\/+/g;function kd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?FC(""+t.key):e.toString(36)}function Vc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Sl:case AC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+kd(o,0):r,Ag(s)?(n="",t!=null&&(n=t.replace(Rg,"$&/")+"/"),Vc(s,e,n,"",function(c){return c})):s!=null&&(k2(s)&&(s=VC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Rg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ag(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+kd(i,a);o+=Vc(i,e,n,l,s)}else if(l=jC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+kd(i,a++),o+=Vc(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function lc(t,e,n){if(t==null)return t;var r=[],s=0;return Vc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function UC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Lt={current:null},Fc={transition:null},$C={ReactCurrentDispatcher:Lt,ReactCurrentBatchConfig:Fc,ReactCurrentOwner:N2};te.Children={map:lc,forEach:function(t,e,n){lc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return lc(t,function(){e++}),e},toArray:function(t){return lc(t,function(e){return e})||[]},only:function(t){if(!k2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=So;te.Fragment=RC;te.Profiler=kC;te.PureComponent=A2;te.StrictMode=NC;te.Suspense=DC;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$C;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=N2.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)dy.call(e,l)&&!fy.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Sl,type:t.type,key:s,ref:i,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:LC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:PC,_context:t},t.Consumer=t};te.createElement=py;te.createFactory=function(t){var e=py.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:bC,render:t}};te.isValidElement=k2;te.lazy=function(t){return{$$typeof:MC,_payload:{_status:-1,_result:t},_init:UC}};te.memo=function(t,e){return{$$typeof:OC,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Fc.transition;Fc.transition={};try{t()}finally{Fc.transition=e}};te.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};te.useCallback=function(t,e){return Lt.current.useCallback(t,e)};te.useContext=function(t){return Lt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return Lt.current.useDeferredValue(t)};te.useEffect=function(t,e){return Lt.current.useEffect(t,e)};te.useId=function(){return Lt.current.useId()};te.useImperativeHandle=function(t,e,n){return Lt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return Lt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return Lt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return Lt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return Lt.current.useReducer(t,e,n)};te.useRef=function(t){return Lt.current.useRef(t)};te.useState=function(t){return Lt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return Lt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return Lt.current.useTransition()};te.version="18.2.0";ay.exports=te;var _=ay.exports;const my=SC(_),zC=IC({__proto__:null,default:my},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BC=_,WC=Symbol.for("react.element"),HC=Symbol.for("react.fragment"),qC=Object.prototype.hasOwnProperty,GC=BC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,KC={key:!0,ref:!0,__self:!0,__source:!0};function gy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)qC.call(e,r)&&!KC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:WC,type:t,key:i,ref:o,props:s,_owner:GC.current}}fh.Fragment=HC;fh.jsx=gy;fh.jsxs=gy;oy.exports=fh;var u=oy.exports,b0={},_y={exports:{}},Zt={},vy={exports:{}},yy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(b,H){var Y=b.length;b.push(H);e:for(;0<Y;){var Ee=Y-1>>>1,Ne=b[Ee];if(0<s(Ne,H))b[Ee]=H,b[Y]=Ne,Y=Ee;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var H=b[0],Y=b.pop();if(Y!==H){b[0]=Y;e:for(var Ee=0,Ne=b.length,Ar=Ne>>>1;Ee<Ar;){var rn=2*(Ee+1)-1,X=b[rn],be=rn+1,Xn=b[be];if(0>s(X,Y))be<Ne&&0>s(Xn,X)?(b[Ee]=Xn,b[be]=Y,Ee=be):(b[Ee]=X,b[rn]=Y,Ee=rn);else if(be<Ne&&0>s(Xn,Y))b[Ee]=Xn,b[be]=Y,Ee=be;else break e}}return H}function s(b,H){var Y=b.sortIndex-H.sortIndex;return Y!==0?Y:b.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,m=!1,v=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(b){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=b)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(c)}}function x(b){if(w=!1,y(b),!v)if(n(l)!==null)v=!0,Es(C);else{var H=n(c);H!==null&&Sr(x,H.startTime-b)}}function C(b,H){v=!1,w&&(w=!1,p(R),R=-1),m=!0;var Y=f;try{for(y(H),d=n(l);d!==null&&(!(d.expirationTime>H)||b&&!z());){var Ee=d.callback;if(typeof Ee=="function"){d.callback=null,f=d.priorityLevel;var Ne=Ee(d.expirationTime<=H);H=t.unstable_now(),typeof Ne=="function"?d.callback=Ne:d===n(l)&&r(l),y(H)}else r(l);d=n(l)}if(d!==null)var Ar=!0;else{var rn=n(c);rn!==null&&Sr(x,rn.startTime-H),Ar=!1}return Ar}finally{d=null,f=Y,m=!1}}var T=!1,I=null,R=-1,S=5,k=-1;function z(){return!(t.unstable_now()-k<S)}function F(){if(I!==null){var b=t.unstable_now();k=b;var H=!0;try{H=I(!0,b)}finally{H?Q():(T=!1,I=null)}}else T=!1}var Q;if(typeof g=="function")Q=function(){g(F)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,nn=we.port2;we.port1.onmessage=F,Q=function(){nn.postMessage(null)}}else Q=function(){E(F,0)};function Es(b){I=b,T||(T=!0,Q())}function Sr(b,H){R=E(function(){b(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(b){b.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,Es(C))},t.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<b?Math.floor(1e3/b):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(b){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var Y=f;f=H;try{return b()}finally{f=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(b,H){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var Y=f;f=b;try{return H()}finally{f=Y}},t.unstable_scheduleCallback=function(b,H,Y){var Ee=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Ee+Y:Ee):Y=Ee,b){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=Y+Ne,b={id:h++,callback:H,priorityLevel:b,startTime:Y,expirationTime:Ne,sortIndex:-1},Y>Ee?(b.sortIndex=Y,e(c,b),n(l)===null&&b===n(c)&&(w?(p(R),R=-1):w=!0,Sr(x,Y-Ee))):(b.sortIndex=Ne,e(l,b),v||m||(v=!0,Es(C))),b},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(b){var H=f;return function(){var Y=f;f=H;try{return b.apply(this,arguments)}finally{f=Y}}}})(yy);vy.exports=yy;var QC=vy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wy=_,Yt=QC;function P(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ey=new Set,Va={};function oi(t,e){no(t,e),no(t+"Capture",e)}function no(t,e){for(Va[t]=e,t=0;t<e.length;t++)Ey.add(e[t])}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),D0=Object.prototype.hasOwnProperty,YC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ng={},kg={};function XC(t){return D0.call(kg,t)?!0:D0.call(Ng,t)?!1:YC.test(t)?kg[t]=!0:(Ng[t]=!0,!1)}function JC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ZC(t,e,n,r){if(e===null||typeof e>"u"||JC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ut[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ut[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ut[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ut[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ut[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ut[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ut[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ut[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ut[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var P2=/[\-:]([a-z])/g;function L2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(P2,L2);ut[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(P2,L2);ut[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(P2,L2);ut[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ut[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});ut.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ut[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function b2(t,e,n,r){var s=ut.hasOwnProperty(e)?ut[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ZC(e,n,s,r)&&(n=null),r||s===null?XC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Er=wy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cc=Symbol.for("react.element"),Ci=Symbol.for("react.portal"),Ii=Symbol.for("react.fragment"),D2=Symbol.for("react.strict_mode"),O0=Symbol.for("react.profiler"),xy=Symbol.for("react.provider"),Ty=Symbol.for("react.context"),O2=Symbol.for("react.forward_ref"),M0=Symbol.for("react.suspense"),j0=Symbol.for("react.suspense_list"),M2=Symbol.for("react.memo"),kr=Symbol.for("react.lazy"),Cy=Symbol.for("react.offscreen"),Pg=Symbol.iterator;function Bo(t){return t===null||typeof t!="object"?null:(t=Pg&&t[Pg]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,Pd;function aa(t){if(Pd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pd=e&&e[1]||""}return`
`+Pd+t}var Ld=!1;function bd(t,e){if(!t||Ld)return"";Ld=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ld=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?aa(t):""}function e4(t){switch(t.tag){case 5:return aa(t.type);case 16:return aa("Lazy");case 13:return aa("Suspense");case 19:return aa("SuspenseList");case 0:case 2:case 15:return t=bd(t.type,!1),t;case 11:return t=bd(t.type.render,!1),t;case 1:return t=bd(t.type,!0),t;default:return""}}function V0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ii:return"Fragment";case Ci:return"Portal";case O0:return"Profiler";case D2:return"StrictMode";case M0:return"Suspense";case j0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ty:return(t.displayName||"Context")+".Consumer";case xy:return(t._context.displayName||"Context")+".Provider";case O2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M2:return e=t.displayName||null,e!==null?e:V0(t.type)||"Memo";case kr:e=t._payload,t=t._init;try{return V0(t(e))}catch{}}return null}function t4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V0(e);case 8:return e===D2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Iy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function n4(t){var e=Iy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uc(t){t._valueTracker||(t._valueTracker=n4(t))}function Sy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Iy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function su(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function F0(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Lg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=rs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ay(t,e){e=e.checked,e!=null&&b2(t,"checked",e,!1)}function U0(t,e){Ay(t,e);var n=rs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$0(t,e.type,n):e.hasOwnProperty("defaultValue")&&$0(t,e.type,rs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function $0(t,e,n){(e!=="number"||su(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var la=Array.isArray;function Ui(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+rs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function z0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(P(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(P(92));if(la(n)){if(1<n.length)throw Error(P(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:rs(n)}}function Ry(t,e){var n=rs(e.value),r=rs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Og(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ny(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function B0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ny(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hc,ky=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(hc=hc||document.createElement("div"),hc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var va={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},r4=["Webkit","ms","Moz","O"];Object.keys(va).forEach(function(t){r4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),va[e]=va[t]})});function Py(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||va.hasOwnProperty(t)&&va[t]?(""+e).trim():e+"px"}function Ly(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Py(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var s4=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function W0(t,e){if(e){if(s4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(P(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(P(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(P(61))}if(e.style!=null&&typeof e.style!="object")throw Error(P(62))}}function H0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var q0=null;function j2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var G0=null,$i=null,zi=null;function Mg(t){if(t=Nl(t)){if(typeof G0!="function")throw Error(P(280));var e=t.stateNode;e&&(e=vh(e),G0(t.stateNode,t.type,e))}}function by(t){$i?zi?zi.push(t):zi=[t]:$i=t}function Dy(){if($i){var t=$i,e=zi;if(zi=$i=null,Mg(t),e)for(t=0;t<e.length;t++)Mg(e[t])}}function Oy(t,e){return t(e)}function My(){}var Dd=!1;function jy(t,e,n){if(Dd)return t(e,n);Dd=!0;try{return Oy(t,e,n)}finally{Dd=!1,($i!==null||zi!==null)&&(My(),Dy())}}function Ua(t,e){var n=t.stateNode;if(n===null)return null;var r=vh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(P(231,e,typeof n));return n}var K0=!1;if(ur)try{var Wo={};Object.defineProperty(Wo,"passive",{get:function(){K0=!0}}),window.addEventListener("test",Wo,Wo),window.removeEventListener("test",Wo,Wo)}catch{K0=!1}function i4(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ya=!1,iu=null,ou=!1,Q0=null,o4={onError:function(t){ya=!0,iu=t}};function a4(t,e,n,r,s,i,o,a,l){ya=!1,iu=null,i4.apply(o4,arguments)}function l4(t,e,n,r,s,i,o,a,l){if(a4.apply(this,arguments),ya){if(ya){var c=iu;ya=!1,iu=null}else throw Error(P(198));ou||(ou=!0,Q0=c)}}function ai(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jg(t){if(ai(t)!==t)throw Error(P(188))}function c4(t){var e=t.alternate;if(!e){if(e=ai(t),e===null)throw Error(P(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return jg(s),t;if(i===r)return jg(s),e;i=i.sibling}throw Error(P(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(P(189))}}if(n.alternate!==r)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?t:e}function Fy(t){return t=c4(t),t!==null?Uy(t):null}function Uy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Uy(t);if(e!==null)return e;t=t.sibling}return null}var $y=Yt.unstable_scheduleCallback,Vg=Yt.unstable_cancelCallback,u4=Yt.unstable_shouldYield,h4=Yt.unstable_requestPaint,Ve=Yt.unstable_now,d4=Yt.unstable_getCurrentPriorityLevel,V2=Yt.unstable_ImmediatePriority,zy=Yt.unstable_UserBlockingPriority,au=Yt.unstable_NormalPriority,f4=Yt.unstable_LowPriority,By=Yt.unstable_IdlePriority,ph=null,Fn=null;function p4(t){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(ph,t,void 0,(t.current.flags&128)===128)}catch{}}var Cn=Math.clz32?Math.clz32:_4,m4=Math.log,g4=Math.LN2;function _4(t){return t>>>=0,t===0?32:31-(m4(t)/g4|0)|0}var dc=64,fc=4194304;function ca(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ca(a):(i&=o,i!==0&&(r=ca(i)))}else o=n&~s,o!==0?r=ca(o):i!==0&&(r=ca(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Cn(e),s=1<<n,r|=t[n],e&=~s;return r}function v4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function y4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Cn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=v4(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Y0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Wy(){var t=dc;return dc<<=1,!(dc&4194240)&&(dc=64),t}function Od(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Al(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cn(e),t[e]=n}function w4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Cn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function F2(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Cn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var de=0;function Hy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qy,U2,Gy,Ky,Qy,X0=!1,pc=[],Br=null,Wr=null,Hr=null,$a=new Map,za=new Map,Lr=[],E4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fg(t,e){switch(t){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":Hr=null;break;case"pointerover":case"pointerout":$a.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":za.delete(e.pointerId)}}function Ho(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Nl(e),e!==null&&U2(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function x4(t,e,n,r,s){switch(e){case"focusin":return Br=Ho(Br,t,e,n,r,s),!0;case"dragenter":return Wr=Ho(Wr,t,e,n,r,s),!0;case"mouseover":return Hr=Ho(Hr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return $a.set(i,Ho($a.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,za.set(i,Ho(za.get(i)||null,t,e,n,r,s)),!0}return!1}function Yy(t){var e=Rs(t.target);if(e!==null){var n=ai(e);if(n!==null){if(e=n.tag,e===13){if(e=Vy(n),e!==null){t.blockedOn=e,Qy(t.priority,function(){Gy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Uc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=J0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);q0=r,n.target.dispatchEvent(r),q0=null}else return e=Nl(n),e!==null&&U2(e),t.blockedOn=n,!1;e.shift()}return!0}function Ug(t,e,n){Uc(t)&&n.delete(e)}function T4(){X0=!1,Br!==null&&Uc(Br)&&(Br=null),Wr!==null&&Uc(Wr)&&(Wr=null),Hr!==null&&Uc(Hr)&&(Hr=null),$a.forEach(Ug),za.forEach(Ug)}function qo(t,e){t.blockedOn===e&&(t.blockedOn=null,X0||(X0=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,T4)))}function Ba(t){function e(s){return qo(s,t)}if(0<pc.length){qo(pc[0],t);for(var n=1;n<pc.length;n++){var r=pc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Br!==null&&qo(Br,t),Wr!==null&&qo(Wr,t),Hr!==null&&qo(Hr,t),$a.forEach(e),za.forEach(e),n=0;n<Lr.length;n++)r=Lr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Lr.length&&(n=Lr[0],n.blockedOn===null);)Yy(n),n.blockedOn===null&&Lr.shift()}var Bi=Er.ReactCurrentBatchConfig,cu=!0;function C4(t,e,n,r){var s=de,i=Bi.transition;Bi.transition=null;try{de=1,$2(t,e,n,r)}finally{de=s,Bi.transition=i}}function I4(t,e,n,r){var s=de,i=Bi.transition;Bi.transition=null;try{de=4,$2(t,e,n,r)}finally{de=s,Bi.transition=i}}function $2(t,e,n,r){if(cu){var s=J0(t,e,n,r);if(s===null)Hd(t,e,r,uu,n),Fg(t,r);else if(x4(s,t,e,n,r))r.stopPropagation();else if(Fg(t,r),e&4&&-1<E4.indexOf(t)){for(;s!==null;){var i=Nl(s);if(i!==null&&qy(i),i=J0(t,e,n,r),i===null&&Hd(t,e,r,uu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Hd(t,e,r,null,n)}}var uu=null;function J0(t,e,n,r){if(uu=null,t=j2(r),t=Rs(t),t!==null)if(e=ai(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Vy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return uu=t,null}function Xy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(d4()){case V2:return 1;case zy:return 4;case au:case f4:return 16;case By:return 536870912;default:return 16}default:return 16}}var Fr=null,z2=null,$c=null;function Jy(){if($c)return $c;var t,e=z2,n=e.length,r,s="value"in Fr?Fr.value:Fr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return $c=s.slice(t,1<r?1-r:void 0)}function zc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function mc(){return!0}function $g(){return!1}function en(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?mc:$g,this.isPropagationStopped=$g,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mc)},persist:function(){},isPersistent:mc}),e}var Ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},B2=en(Ao),Rl=Le({},Ao,{view:0,detail:0}),S4=en(Rl),Md,jd,Go,mh=Le({},Rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:W2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Go&&(Go&&t.type==="mousemove"?(Md=t.screenX-Go.screenX,jd=t.screenY-Go.screenY):jd=Md=0,Go=t),Md)},movementY:function(t){return"movementY"in t?t.movementY:jd}}),zg=en(mh),A4=Le({},mh,{dataTransfer:0}),R4=en(A4),N4=Le({},Rl,{relatedTarget:0}),Vd=en(N4),k4=Le({},Ao,{animationName:0,elapsedTime:0,pseudoElement:0}),P4=en(k4),L4=Le({},Ao,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),b4=en(L4),D4=Le({},Ao,{data:0}),Bg=en(D4),O4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},j4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function V4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=j4[t])?!!e[t]:!1}function W2(){return V4}var F4=Le({},Rl,{key:function(t){if(t.key){var e=O4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?M4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:W2,charCode:function(t){return t.type==="keypress"?zc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),U4=en(F4),$4=Le({},mh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wg=en($4),z4=Le({},Rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:W2}),B4=en(z4),W4=Le({},Ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),H4=en(W4),q4=Le({},mh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),G4=en(q4),K4=[9,13,27,32],H2=ur&&"CompositionEvent"in window,wa=null;ur&&"documentMode"in document&&(wa=document.documentMode);var Q4=ur&&"TextEvent"in window&&!wa,Zy=ur&&(!H2||wa&&8<wa&&11>=wa),Hg=" ",qg=!1;function ew(t,e){switch(t){case"keyup":return K4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Si=!1;function Y4(t,e){switch(t){case"compositionend":return tw(e);case"keypress":return e.which!==32?null:(qg=!0,Hg);case"textInput":return t=e.data,t===Hg&&qg?null:t;default:return null}}function X4(t,e){if(Si)return t==="compositionend"||!H2&&ew(t,e)?(t=Jy(),$c=z2=Fr=null,Si=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Zy&&e.locale!=="ko"?null:e.data;default:return null}}var J4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!J4[t.type]:e==="textarea"}function nw(t,e,n,r){by(r),e=hu(e,"onChange"),0<e.length&&(n=new B2("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ea=null,Wa=null;function Z4(t){fw(t,0)}function gh(t){var e=Ni(t);if(Sy(e))return t}function eI(t,e){if(t==="change")return e}var rw=!1;if(ur){var Fd;if(ur){var Ud="oninput"in document;if(!Ud){var Kg=document.createElement("div");Kg.setAttribute("oninput","return;"),Ud=typeof Kg.oninput=="function"}Fd=Ud}else Fd=!1;rw=Fd&&(!document.documentMode||9<document.documentMode)}function Qg(){Ea&&(Ea.detachEvent("onpropertychange",sw),Wa=Ea=null)}function sw(t){if(t.propertyName==="value"&&gh(Wa)){var e=[];nw(e,Wa,t,j2(t)),jy(Z4,e)}}function tI(t,e,n){t==="focusin"?(Qg(),Ea=e,Wa=n,Ea.attachEvent("onpropertychange",sw)):t==="focusout"&&Qg()}function nI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gh(Wa)}function rI(t,e){if(t==="click")return gh(e)}function sI(t,e){if(t==="input"||t==="change")return gh(e)}function iI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var An=typeof Object.is=="function"?Object.is:iI;function Ha(t,e){if(An(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!D0.call(e,s)||!An(t[s],e[s]))return!1}return!0}function Yg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xg(t,e){var n=Yg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yg(n)}}function iw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ow(){for(var t=window,e=su();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=su(t.document)}return e}function q2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function oI(t){var e=ow(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iw(n.ownerDocument.documentElement,n)){if(r!==null&&q2(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Xg(n,i);var o=Xg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var aI=ur&&"documentMode"in document&&11>=document.documentMode,Ai=null,Z0=null,xa=null,ef=!1;function Jg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ef||Ai==null||Ai!==su(r)||(r=Ai,"selectionStart"in r&&q2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xa&&Ha(xa,r)||(xa=r,r=hu(Z0,"onSelect"),0<r.length&&(e=new B2("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ai)))}function gc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ri={animationend:gc("Animation","AnimationEnd"),animationiteration:gc("Animation","AnimationIteration"),animationstart:gc("Animation","AnimationStart"),transitionend:gc("Transition","TransitionEnd")},$d={},aw={};ur&&(aw=document.createElement("div").style,"AnimationEvent"in window||(delete Ri.animationend.animation,delete Ri.animationiteration.animation,delete Ri.animationstart.animation),"TransitionEvent"in window||delete Ri.transitionend.transition);function _h(t){if($d[t])return $d[t];if(!Ri[t])return t;var e=Ri[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in aw)return $d[t]=e[n];return t}var lw=_h("animationend"),cw=_h("animationiteration"),uw=_h("animationstart"),hw=_h("transitionend"),dw=new Map,Zg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function us(t,e){dw.set(t,e),oi(e,[t])}for(var zd=0;zd<Zg.length;zd++){var Bd=Zg[zd],lI=Bd.toLowerCase(),cI=Bd[0].toUpperCase()+Bd.slice(1);us(lI,"on"+cI)}us(lw,"onAnimationEnd");us(cw,"onAnimationIteration");us(uw,"onAnimationStart");us("dblclick","onDoubleClick");us("focusin","onFocus");us("focusout","onBlur");us(hw,"onTransitionEnd");no("onMouseEnter",["mouseout","mouseover"]);no("onMouseLeave",["mouseout","mouseover"]);no("onPointerEnter",["pointerout","pointerover"]);no("onPointerLeave",["pointerout","pointerover"]);oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oi("onBeforeInput",["compositionend","keypress","textInput","paste"]);oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ua="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uI=new Set("cancel close invalid load scroll toggle".split(" ").concat(ua));function e1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,l4(r,e,void 0,t),t.currentTarget=null}function fw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;e1(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;e1(s,a,c),i=l}}}if(ou)throw t=Q0,ou=!1,Q0=null,t}function xe(t,e){var n=e[of];n===void 0&&(n=e[of]=new Set);var r=t+"__bubble";n.has(r)||(pw(e,t,2,!1),n.add(r))}function Wd(t,e,n){var r=0;e&&(r|=4),pw(n,t,r,e)}var _c="_reactListening"+Math.random().toString(36).slice(2);function qa(t){if(!t[_c]){t[_c]=!0,Ey.forEach(function(n){n!=="selectionchange"&&(uI.has(n)||Wd(n,!1,t),Wd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_c]||(e[_c]=!0,Wd("selectionchange",!1,e))}}function pw(t,e,n,r){switch(Xy(e)){case 1:var s=C4;break;case 4:s=I4;break;default:s=$2}n=s.bind(null,e,n,t),s=void 0,!K0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Hd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Rs(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}jy(function(){var c=i,h=j2(n),d=[];e:{var f=dw.get(t);if(f!==void 0){var m=B2,v=t;switch(t){case"keypress":if(zc(n)===0)break e;case"keydown":case"keyup":m=U4;break;case"focusin":v="focus",m=Vd;break;case"focusout":v="blur",m=Vd;break;case"beforeblur":case"afterblur":m=Vd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=zg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=R4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=B4;break;case lw:case cw:case uw:m=P4;break;case hw:m=H4;break;case"scroll":m=S4;break;case"wheel":m=G4;break;case"copy":case"cut":case"paste":m=b4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Wg}var w=(e&4)!==0,E=!w&&t==="scroll",p=w?f!==null?f+"Capture":null:f;w=[];for(var g=c,y;g!==null;){y=g;var x=y.stateNode;if(y.tag===5&&x!==null&&(y=x,p!==null&&(x=Ua(g,p),x!=null&&w.push(Ga(g,x,y)))),E)break;g=g.return}0<w.length&&(f=new m(f,v,null,n,h),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==q0&&(v=n.relatedTarget||n.fromElement)&&(Rs(v)||v[hr]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?Rs(v):null,v!==null&&(E=ai(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(w=zg,x="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(w=Wg,x="onPointerLeave",p="onPointerEnter",g="pointer"),E=m==null?f:Ni(m),y=v==null?f:Ni(v),f=new w(x,g+"leave",m,n,h),f.target=E,f.relatedTarget=y,x=null,Rs(h)===c&&(w=new w(p,g+"enter",v,n,h),w.target=y,w.relatedTarget=E,x=w),E=x,m&&v)t:{for(w=m,p=v,g=0,y=w;y;y=vi(y))g++;for(y=0,x=p;x;x=vi(x))y++;for(;0<g-y;)w=vi(w),g--;for(;0<y-g;)p=vi(p),y--;for(;g--;){if(w===p||p!==null&&w===p.alternate)break t;w=vi(w),p=vi(p)}w=null}else w=null;m!==null&&t1(d,f,m,w,!1),v!==null&&E!==null&&t1(d,E,v,w,!0)}}e:{if(f=c?Ni(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var C=eI;else if(Gg(f))if(rw)C=sI;else{C=nI;var T=tI}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=rI);if(C&&(C=C(t,c))){nw(d,C,n,h);break e}T&&T(t,f,c),t==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&$0(f,"number",f.value)}switch(T=c?Ni(c):window,t){case"focusin":(Gg(T)||T.contentEditable==="true")&&(Ai=T,Z0=c,xa=null);break;case"focusout":xa=Z0=Ai=null;break;case"mousedown":ef=!0;break;case"contextmenu":case"mouseup":case"dragend":ef=!1,Jg(d,n,h);break;case"selectionchange":if(aI)break;case"keydown":case"keyup":Jg(d,n,h)}var I;if(H2)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Si?ew(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Zy&&n.locale!=="ko"&&(Si||R!=="onCompositionStart"?R==="onCompositionEnd"&&Si&&(I=Jy()):(Fr=h,z2="value"in Fr?Fr.value:Fr.textContent,Si=!0)),T=hu(c,R),0<T.length&&(R=new Bg(R,t,null,n,h),d.push({event:R,listeners:T}),I?R.data=I:(I=tw(n),I!==null&&(R.data=I)))),(I=Q4?Y4(t,n):X4(t,n))&&(c=hu(c,"onBeforeInput"),0<c.length&&(h=new Bg("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=I))}fw(d,e)})}function Ga(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ua(t,n),i!=null&&r.unshift(Ga(t,i,s)),i=Ua(t,e),i!=null&&r.push(Ga(t,i,s))),t=t.return}return r}function vi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function t1(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Ua(n,i),l!=null&&o.unshift(Ga(n,l,a))):s||(l=Ua(n,i),l!=null&&o.push(Ga(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var hI=/\r\n?/g,dI=/\u0000|\uFFFD/g;function n1(t){return(typeof t=="string"?t:""+t).replace(hI,`
`).replace(dI,"")}function vc(t,e,n){if(e=n1(e),n1(t)!==e&&n)throw Error(P(425))}function du(){}var tf=null,nf=null;function rf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sf=typeof setTimeout=="function"?setTimeout:void 0,fI=typeof clearTimeout=="function"?clearTimeout:void 0,r1=typeof Promise=="function"?Promise:void 0,pI=typeof queueMicrotask=="function"?queueMicrotask:typeof r1<"u"?function(t){return r1.resolve(null).then(t).catch(mI)}:sf;function mI(t){setTimeout(function(){throw t})}function qd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ba(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ba(e)}function qr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function s1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ro=Math.random().toString(36).slice(2),bn="__reactFiber$"+Ro,Ka="__reactProps$"+Ro,hr="__reactContainer$"+Ro,of="__reactEvents$"+Ro,gI="__reactListeners$"+Ro,_I="__reactHandles$"+Ro;function Rs(t){var e=t[bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hr]||n[bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=s1(t);t!==null;){if(n=t[bn])return n;t=s1(t)}return e}t=n,n=t.parentNode}return null}function Nl(t){return t=t[bn]||t[hr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ni(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(P(33))}function vh(t){return t[Ka]||null}var af=[],ki=-1;function hs(t){return{current:t}}function Se(t){0>ki||(t.current=af[ki],af[ki]=null,ki--)}function ve(t,e){ki++,af[ki]=t.current,t.current=e}var ss={},Tt=hs(ss),Ft=hs(!1),Hs=ss;function ro(t,e){var n=t.type.contextTypes;if(!n)return ss;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ut(t){return t=t.childContextTypes,t!=null}function fu(){Se(Ft),Se(Tt)}function i1(t,e,n){if(Tt.current!==ss)throw Error(P(168));ve(Tt,e),ve(Ft,n)}function mw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(P(108,t4(t)||"Unknown",s));return Le({},n,r)}function pu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ss,Hs=Tt.current,ve(Tt,t),ve(Ft,Ft.current),!0}function o1(t,e,n){var r=t.stateNode;if(!r)throw Error(P(169));n?(t=mw(t,e,Hs),r.__reactInternalMemoizedMergedChildContext=t,Se(Ft),Se(Tt),ve(Tt,t)):Se(Ft),ve(Ft,n)}var er=null,yh=!1,Gd=!1;function gw(t){er===null?er=[t]:er.push(t)}function vI(t){yh=!0,gw(t)}function ds(){if(!Gd&&er!==null){Gd=!0;var t=0,e=de;try{var n=er;for(de=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}er=null,yh=!1}catch(s){throw er!==null&&(er=er.slice(t+1)),$y(V2,ds),s}finally{de=e,Gd=!1}}return null}var Pi=[],Li=0,mu=null,gu=0,sn=[],on=0,qs=null,nr=1,rr="";function Ts(t,e){Pi[Li++]=gu,Pi[Li++]=mu,mu=t,gu=e}function _w(t,e,n){sn[on++]=nr,sn[on++]=rr,sn[on++]=qs,qs=t;var r=nr;t=rr;var s=32-Cn(r)-1;r&=~(1<<s),n+=1;var i=32-Cn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,nr=1<<32-Cn(e)+s|n<<s|r,rr=i+t}else nr=1<<i|n<<s|r,rr=t}function G2(t){t.return!==null&&(Ts(t,1),_w(t,1,0))}function K2(t){for(;t===mu;)mu=Pi[--Li],Pi[Li]=null,gu=Pi[--Li],Pi[Li]=null;for(;t===qs;)qs=sn[--on],sn[on]=null,rr=sn[--on],sn[on]=null,nr=sn[--on],sn[on]=null}var Gt=null,Wt=null,Re=!1,En=null;function vw(t,e){var n=ln(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function a1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gt=t,Wt=qr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gt=t,Wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qs!==null?{id:nr,overflow:rr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ln(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Gt=t,Wt=null,!0):!1;default:return!1}}function lf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cf(t){if(Re){var e=Wt;if(e){var n=e;if(!a1(t,e)){if(lf(t))throw Error(P(418));e=qr(n.nextSibling);var r=Gt;e&&a1(t,e)?vw(r,n):(t.flags=t.flags&-4097|2,Re=!1,Gt=t)}}else{if(lf(t))throw Error(P(418));t.flags=t.flags&-4097|2,Re=!1,Gt=t}}}function l1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gt=t}function yc(t){if(t!==Gt)return!1;if(!Re)return l1(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rf(t.type,t.memoizedProps)),e&&(e=Wt)){if(lf(t))throw yw(),Error(P(418));for(;e;)vw(t,e),e=qr(e.nextSibling)}if(l1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wt=qr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wt=null}}else Wt=Gt?qr(t.stateNode.nextSibling):null;return!0}function yw(){for(var t=Wt;t;)t=qr(t.nextSibling)}function so(){Wt=Gt=null,Re=!1}function Q2(t){En===null?En=[t]:En.push(t)}var yI=Er.ReactCurrentBatchConfig;function yn(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var _u=hs(null),vu=null,bi=null,Y2=null;function X2(){Y2=bi=vu=null}function J2(t){var e=_u.current;Se(_u),t._currentValue=e}function uf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Wi(t,e){vu=t,Y2=bi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Mt=!0),t.firstContext=null)}function fn(t){var e=t._currentValue;if(Y2!==t)if(t={context:t,memoizedValue:e,next:null},bi===null){if(vu===null)throw Error(P(308));bi=t,vu.dependencies={lanes:0,firstContext:t}}else bi=bi.next=t;return e}var Ns=null;function Z2(t){Ns===null?Ns=[t]:Ns.push(t)}function ww(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Z2(e)):(n.next=s.next,s.next=n),e.interleaved=n,dr(t,r)}function dr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pr=!1;function ep(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ew(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function lr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,dr(t,n)}return s=r.interleaved,s===null?(e.next=e,Z2(r)):(e.next=s.next,s.next=e),r.interleaved=e,dr(t,n)}function Bc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,F2(t,n)}}function c1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function yu(t,e,n,r){var s=t.updateQueue;Pr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,h=c=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,w=a;switch(f=e,m=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){d=v.call(m,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,f=typeof v=="function"?v.call(m,d,f):v,f==null)break e;d=Le({},d,f);break e;case 2:Pr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ks|=o,t.lanes=o,t.memoizedState=d}}function u1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(P(191,s));s.call(r)}}}var xw=new wy.Component().refs;function hf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wh={isMounted:function(t){return(t=t._reactInternals)?ai(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Pt(),s=Qr(t),i=lr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Gr(t,i,s),e!==null&&(In(e,t,s,r),Bc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Pt(),s=Qr(t),i=lr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Gr(t,i,s),e!==null&&(In(e,t,s,r),Bc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pt(),r=Qr(t),s=lr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Gr(t,s,r),e!==null&&(In(e,t,r,n),Bc(e,t,r))}};function h1(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ha(n,r)||!Ha(s,i):!0}function Tw(t,e,n){var r=!1,s=ss,i=e.contextType;return typeof i=="object"&&i!==null?i=fn(i):(s=Ut(e)?Hs:Tt.current,r=e.contextTypes,i=(r=r!=null)?ro(t,s):ss),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function d1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wh.enqueueReplaceState(e,e.state,null)}function df(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=xw,ep(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=fn(i):(i=Ut(e)?Hs:Tt.current,s.context=ro(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(hf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&wh.enqueueReplaceState(s,s.state,null),yu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ko(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(P(309));var r=n.stateNode}if(!r)throw Error(P(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===xw&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(P(284));if(!n._owner)throw Error(P(290,t))}return t}function wc(t,e){throw t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function f1(t){var e=t._init;return e(t._payload)}function Cw(t){function e(p,g){if(t){var y=p.deletions;y===null?(p.deletions=[g],p.flags|=16):y.push(g)}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function r(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function s(p,g){return p=Yr(p,g),p.index=0,p.sibling=null,p}function i(p,g,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<g?(p.flags|=2,g):y):(p.flags|=2,g)):(p.flags|=1048576,g)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,g,y,x){return g===null||g.tag!==6?(g=e0(y,p.mode,x),g.return=p,g):(g=s(g,y),g.return=p,g)}function l(p,g,y,x){var C=y.type;return C===Ii?h(p,g,y.props.children,x,y.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===kr&&f1(C)===g.type)?(x=s(g,y.props),x.ref=Ko(p,g,y),x.return=p,x):(x=Qc(y.type,y.key,y.props,null,p.mode,x),x.ref=Ko(p,g,y),x.return=p,x)}function c(p,g,y,x){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=t0(y,p.mode,x),g.return=p,g):(g=s(g,y.children||[]),g.return=p,g)}function h(p,g,y,x,C){return g===null||g.tag!==7?(g=Us(y,p.mode,x,C),g.return=p,g):(g=s(g,y),g.return=p,g)}function d(p,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=e0(""+g,p.mode,y),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case cc:return y=Qc(g.type,g.key,g.props,null,p.mode,y),y.ref=Ko(p,null,g),y.return=p,y;case Ci:return g=t0(g,p.mode,y),g.return=p,g;case kr:var x=g._init;return d(p,x(g._payload),y)}if(la(g)||Bo(g))return g=Us(g,p.mode,y,null),g.return=p,g;wc(p,g)}return null}function f(p,g,y,x){var C=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return C!==null?null:a(p,g,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case cc:return y.key===C?l(p,g,y,x):null;case Ci:return y.key===C?c(p,g,y,x):null;case kr:return C=y._init,f(p,g,C(y._payload),x)}if(la(y)||Bo(y))return C!==null?null:h(p,g,y,x,null);wc(p,y)}return null}function m(p,g,y,x,C){if(typeof x=="string"&&x!==""||typeof x=="number")return p=p.get(y)||null,a(g,p,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case cc:return p=p.get(x.key===null?y:x.key)||null,l(g,p,x,C);case Ci:return p=p.get(x.key===null?y:x.key)||null,c(g,p,x,C);case kr:var T=x._init;return m(p,g,y,T(x._payload),C)}if(la(x)||Bo(x))return p=p.get(y)||null,h(g,p,x,C,null);wc(g,x)}return null}function v(p,g,y,x){for(var C=null,T=null,I=g,R=g=0,S=null;I!==null&&R<y.length;R++){I.index>R?(S=I,I=null):S=I.sibling;var k=f(p,I,y[R],x);if(k===null){I===null&&(I=S);break}t&&I&&k.alternate===null&&e(p,I),g=i(k,g,R),T===null?C=k:T.sibling=k,T=k,I=S}if(R===y.length)return n(p,I),Re&&Ts(p,R),C;if(I===null){for(;R<y.length;R++)I=d(p,y[R],x),I!==null&&(g=i(I,g,R),T===null?C=I:T.sibling=I,T=I);return Re&&Ts(p,R),C}for(I=r(p,I);R<y.length;R++)S=m(I,p,R,y[R],x),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?R:S.key),g=i(S,g,R),T===null?C=S:T.sibling=S,T=S);return t&&I.forEach(function(z){return e(p,z)}),Re&&Ts(p,R),C}function w(p,g,y,x){var C=Bo(y);if(typeof C!="function")throw Error(P(150));if(y=C.call(y),y==null)throw Error(P(151));for(var T=C=null,I=g,R=g=0,S=null,k=y.next();I!==null&&!k.done;R++,k=y.next()){I.index>R?(S=I,I=null):S=I.sibling;var z=f(p,I,k.value,x);if(z===null){I===null&&(I=S);break}t&&I&&z.alternate===null&&e(p,I),g=i(z,g,R),T===null?C=z:T.sibling=z,T=z,I=S}if(k.done)return n(p,I),Re&&Ts(p,R),C;if(I===null){for(;!k.done;R++,k=y.next())k=d(p,k.value,x),k!==null&&(g=i(k,g,R),T===null?C=k:T.sibling=k,T=k);return Re&&Ts(p,R),C}for(I=r(p,I);!k.done;R++,k=y.next())k=m(I,p,R,k.value,x),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?R:k.key),g=i(k,g,R),T===null?C=k:T.sibling=k,T=k);return t&&I.forEach(function(F){return e(p,F)}),Re&&Ts(p,R),C}function E(p,g,y,x){if(typeof y=="object"&&y!==null&&y.type===Ii&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case cc:e:{for(var C=y.key,T=g;T!==null;){if(T.key===C){if(C=y.type,C===Ii){if(T.tag===7){n(p,T.sibling),g=s(T,y.props.children),g.return=p,p=g;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===kr&&f1(C)===T.type){n(p,T.sibling),g=s(T,y.props),g.ref=Ko(p,T,y),g.return=p,p=g;break e}n(p,T);break}else e(p,T);T=T.sibling}y.type===Ii?(g=Us(y.props.children,p.mode,x,y.key),g.return=p,p=g):(x=Qc(y.type,y.key,y.props,null,p.mode,x),x.ref=Ko(p,g,y),x.return=p,p=x)}return o(p);case Ci:e:{for(T=y.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(p,g.sibling),g=s(g,y.children||[]),g.return=p,p=g;break e}else{n(p,g);break}else e(p,g);g=g.sibling}g=t0(y,p.mode,x),g.return=p,p=g}return o(p);case kr:return T=y._init,E(p,g,T(y._payload),x)}if(la(y))return v(p,g,y,x);if(Bo(y))return w(p,g,y,x);wc(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(p,g.sibling),g=s(g,y),g.return=p,p=g):(n(p,g),g=e0(y,p.mode,x),g.return=p,p=g),o(p)):n(p,g)}return E}var io=Cw(!0),Iw=Cw(!1),kl={},Un=hs(kl),Qa=hs(kl),Ya=hs(kl);function ks(t){if(t===kl)throw Error(P(174));return t}function tp(t,e){switch(ve(Ya,e),ve(Qa,t),ve(Un,kl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:B0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=B0(e,t)}Se(Un),ve(Un,e)}function oo(){Se(Un),Se(Qa),Se(Ya)}function Sw(t){ks(Ya.current);var e=ks(Un.current),n=B0(e,t.type);e!==n&&(ve(Qa,t),ve(Un,n))}function np(t){Qa.current===t&&(Se(Un),Se(Qa))}var ke=hs(0);function wu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kd=[];function rp(){for(var t=0;t<Kd.length;t++)Kd[t]._workInProgressVersionPrimary=null;Kd.length=0}var Wc=Er.ReactCurrentDispatcher,Qd=Er.ReactCurrentBatchConfig,Gs=0,Pe=null,qe=null,Xe=null,Eu=!1,Ta=!1,Xa=0,wI=0;function ht(){throw Error(P(321))}function sp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!An(t[n],e[n]))return!1;return!0}function ip(t,e,n,r,s,i){if(Gs=i,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wc.current=t===null||t.memoizedState===null?CI:II,t=n(r,s),Ta){i=0;do{if(Ta=!1,Xa=0,25<=i)throw Error(P(301));i+=1,Xe=qe=null,e.updateQueue=null,Wc.current=SI,t=n(r,s)}while(Ta)}if(Wc.current=xu,e=qe!==null&&qe.next!==null,Gs=0,Xe=qe=Pe=null,Eu=!1,e)throw Error(P(300));return t}function op(){var t=Xa!==0;return Xa=0,t}function Ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Pe.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function pn(){if(qe===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Xe===null?Pe.memoizedState:Xe.next;if(e!==null)Xe=e,qe=t;else{if(t===null)throw Error(P(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Xe===null?Pe.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Ja(t,e){return typeof e=="function"?e(t):e}function Yd(t){var e=pn(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var h=c.lane;if((Gs&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Pe.lanes|=h,Ks|=h}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,An(r,e.memoizedState)||(Mt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Pe.lanes|=i,Ks|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xd(t){var e=pn(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);An(i,e.memoizedState)||(Mt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Aw(){}function Rw(t,e){var n=Pe,r=pn(),s=e(),i=!An(r.memoizedState,s);if(i&&(r.memoizedState=s,Mt=!0),r=r.queue,ap(Pw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,Za(9,kw.bind(null,n,r,s,e),void 0,null),et===null)throw Error(P(349));Gs&30||Nw(n,e,s)}return s}function Nw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kw(t,e,n,r){e.value=n,e.getSnapshot=r,Lw(e)&&bw(t)}function Pw(t,e,n){return n(function(){Lw(e)&&bw(t)})}function Lw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!An(t,n)}catch{return!0}}function bw(t){var e=dr(t,1);e!==null&&In(e,t,1,-1)}function p1(t){var e=Ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:t},e.queue=t,t=t.dispatch=TI.bind(null,Pe,t),[e.memoizedState,t]}function Za(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Dw(){return pn().memoizedState}function Hc(t,e,n,r){var s=Ln();Pe.flags|=t,s.memoizedState=Za(1|e,n,void 0,r===void 0?null:r)}function Eh(t,e,n,r){var s=pn();r=r===void 0?null:r;var i=void 0;if(qe!==null){var o=qe.memoizedState;if(i=o.destroy,r!==null&&sp(r,o.deps)){s.memoizedState=Za(e,n,i,r);return}}Pe.flags|=t,s.memoizedState=Za(1|e,n,i,r)}function m1(t,e){return Hc(8390656,8,t,e)}function ap(t,e){return Eh(2048,8,t,e)}function Ow(t,e){return Eh(4,2,t,e)}function Mw(t,e){return Eh(4,4,t,e)}function jw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Vw(t,e,n){return n=n!=null?n.concat([t]):null,Eh(4,4,jw.bind(null,e,t),n)}function lp(){}function Fw(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Uw(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $w(t,e,n){return Gs&21?(An(n,e)||(n=Wy(),Pe.lanes|=n,Ks|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Mt=!0),t.memoizedState=n)}function EI(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var r=Qd.transition;Qd.transition={};try{t(!1),e()}finally{de=n,Qd.transition=r}}function zw(){return pn().memoizedState}function xI(t,e,n){var r=Qr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Bw(t))Ww(e,n);else if(n=ww(t,e,n,r),n!==null){var s=Pt();In(n,t,r,s),Hw(n,e,r)}}function TI(t,e,n){var r=Qr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bw(t))Ww(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,An(a,o)){var l=e.interleaved;l===null?(s.next=s,Z2(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=ww(t,e,s,r),n!==null&&(s=Pt(),In(n,t,r,s),Hw(n,e,r))}}function Bw(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function Ww(t,e){Ta=Eu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Hw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,F2(t,n)}}var xu={readContext:fn,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},CI={readContext:fn,useCallback:function(t,e){return Ln().memoizedState=[t,e===void 0?null:e],t},useContext:fn,useEffect:m1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hc(4194308,4,jw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hc(4,2,t,e)},useMemo:function(t,e){var n=Ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=xI.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=Ln();return t={current:t},e.memoizedState=t},useState:p1,useDebugValue:lp,useDeferredValue:function(t){return Ln().memoizedState=t},useTransition:function(){var t=p1(!1),e=t[0];return t=EI.bind(null,t[1]),Ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,s=Ln();if(Re){if(n===void 0)throw Error(P(407));n=n()}else{if(n=e(),et===null)throw Error(P(349));Gs&30||Nw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,m1(Pw.bind(null,r,i,t),[t]),r.flags|=2048,Za(9,kw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ln(),e=et.identifierPrefix;if(Re){var n=rr,r=nr;n=(r&~(1<<32-Cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=wI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},II={readContext:fn,useCallback:Fw,useContext:fn,useEffect:ap,useImperativeHandle:Vw,useInsertionEffect:Ow,useLayoutEffect:Mw,useMemo:Uw,useReducer:Yd,useRef:Dw,useState:function(){return Yd(Ja)},useDebugValue:lp,useDeferredValue:function(t){var e=pn();return $w(e,qe.memoizedState,t)},useTransition:function(){var t=Yd(Ja)[0],e=pn().memoizedState;return[t,e]},useMutableSource:Aw,useSyncExternalStore:Rw,useId:zw,unstable_isNewReconciler:!1},SI={readContext:fn,useCallback:Fw,useContext:fn,useEffect:ap,useImperativeHandle:Vw,useInsertionEffect:Ow,useLayoutEffect:Mw,useMemo:Uw,useReducer:Xd,useRef:Dw,useState:function(){return Xd(Ja)},useDebugValue:lp,useDeferredValue:function(t){var e=pn();return qe===null?e.memoizedState=t:$w(e,qe.memoizedState,t)},useTransition:function(){var t=Xd(Ja)[0],e=pn().memoizedState;return[t,e]},useMutableSource:Aw,useSyncExternalStore:Rw,useId:zw,unstable_isNewReconciler:!1};function ao(t,e){try{var n="",r=e;do n+=e4(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Jd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ff(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var AI=typeof WeakMap=="function"?WeakMap:Map;function qw(t,e,n){n=lr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Cu||(Cu=!0,Tf=r),ff(t,e)},n}function Gw(t,e,n){n=lr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ff(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ff(t,e),typeof r!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function g1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new AI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=$I.bind(null,t,e,n),e.then(t,t))}function _1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function v1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=lr(-1,1),e.tag=2,Gr(n,e,1))),n.lanes|=1),t)}var RI=Er.ReactCurrentOwner,Mt=!1;function Nt(t,e,n,r){e.child=t===null?Iw(e,null,n,r):io(e,t.child,n,r)}function y1(t,e,n,r,s){n=n.render;var i=e.ref;return Wi(e,s),r=ip(t,e,n,r,i,s),n=op(),t!==null&&!Mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fr(t,e,s)):(Re&&n&&G2(e),e.flags|=1,Nt(t,e,r,s),e.child)}function w1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!gp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Kw(t,e,i,r,s)):(t=Qc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ha,n(o,r)&&t.ref===e.ref)return fr(t,e,s)}return e.flags|=1,t=Yr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Kw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ha(i,r)&&t.ref===e.ref)if(Mt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Mt=!0);else return e.lanes=t.lanes,fr(t,e,s)}return pf(t,e,n,r,s)}function Qw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(Oi,Bt),Bt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(Oi,Bt),Bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ve(Oi,Bt),Bt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ve(Oi,Bt),Bt|=r;return Nt(t,e,s,n),e.child}function Yw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function pf(t,e,n,r,s){var i=Ut(n)?Hs:Tt.current;return i=ro(e,i),Wi(e,s),n=ip(t,e,n,r,i,s),r=op(),t!==null&&!Mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fr(t,e,s)):(Re&&r&&G2(e),e.flags|=1,Nt(t,e,n,s),e.child)}function E1(t,e,n,r,s){if(Ut(n)){var i=!0;pu(e)}else i=!1;if(Wi(e,s),e.stateNode===null)qc(t,e),Tw(e,n,r),df(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=fn(c):(c=Ut(n)?Hs:Tt.current,c=ro(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&d1(e,o,r,c),Pr=!1;var f=e.memoizedState;o.state=f,yu(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Ft.current||Pr?(typeof h=="function"&&(hf(e,n,h,r),l=e.memoizedState),(a=Pr||h1(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Ew(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:yn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=fn(l):(l=Ut(n)?Hs:Tt.current,l=ro(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&d1(e,o,r,l),Pr=!1,f=e.memoizedState,o.state=f,yu(e,r,o,s);var v=e.memoizedState;a!==d||f!==v||Ft.current||Pr?(typeof m=="function"&&(hf(e,n,m,r),v=e.memoizedState),(c=Pr||h1(e,n,c,r,f,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return mf(t,e,n,r,i,s)}function mf(t,e,n,r,s,i){Yw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&o1(e,n,!1),fr(t,e,i);r=e.stateNode,RI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=io(e,t.child,null,i),e.child=io(e,null,a,i)):Nt(t,e,a,i),e.memoizedState=r.state,s&&o1(e,n,!0),e.child}function Xw(t){var e=t.stateNode;e.pendingContext?i1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&i1(t,e.context,!1),tp(t,e.containerInfo)}function x1(t,e,n,r,s){return so(),Q2(s),e.flags|=256,Nt(t,e,n,r),e.child}var gf={dehydrated:null,treeContext:null,retryLane:0};function _f(t){return{baseLanes:t,cachePool:null,transitions:null}}function Jw(t,e,n){var r=e.pendingProps,s=ke.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ve(ke,s&1),t===null)return cf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ch(o,r,0,null),t=Us(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=_f(n),e.memoizedState=gf,t):cp(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return NI(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Yr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Yr(a,i):(i=Us(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?_f(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=gf,r}return i=t.child,t=i.sibling,r=Yr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cp(t,e){return e=Ch({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ec(t,e,n,r){return r!==null&&Q2(r),io(e,t.child,null,n),t=cp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function NI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Jd(Error(P(422))),Ec(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ch({mode:"visible",children:r.children},s,0,null),i=Us(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&io(e,t.child,null,o),e.child.memoizedState=_f(o),e.memoizedState=gf,i);if(!(e.mode&1))return Ec(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(P(419)),r=Jd(i,r,void 0),Ec(t,e,o,r)}if(a=(o&t.childLanes)!==0,Mt||a){if(r=et,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,dr(t,s),In(r,t,s,-1))}return mp(),r=Jd(Error(P(421))),Ec(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=zI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Wt=qr(s.nextSibling),Gt=e,Re=!0,En=null,t!==null&&(sn[on++]=nr,sn[on++]=rr,sn[on++]=qs,nr=t.id,rr=t.overflow,qs=e),e=cp(e,r.children),e.flags|=4096,e)}function T1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),uf(t.return,e,n)}function Zd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Zw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Nt(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&T1(t,n,e);else if(t.tag===19)T1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(ke,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&wu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Zd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&wu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Zd(e,!0,n,null,i);break;case"together":Zd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ks|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,n=Yr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Yr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function kI(t,e,n){switch(e.tag){case 3:Xw(e),so();break;case 5:Sw(e);break;case 1:Ut(e.type)&&pu(e);break;case 4:tp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ve(_u,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?Jw(t,e,n):(ve(ke,ke.current&1),t=fr(t,e,n),t!==null?t.sibling:null);ve(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Zw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ve(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,Qw(t,e,n)}return fr(t,e,n)}var e3,vf,t3,n3;e3=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vf=function(){};t3=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ks(Un.current);var i=null;switch(n){case"input":s=F0(t,s),r=F0(t,r),i=[];break;case"select":s=Le({},s,{value:void 0}),r=Le({},r,{value:void 0}),i=[];break;case"textarea":s=z0(t,s),r=z0(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=du)}W0(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Va.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Va.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};n3=function(t,e,n,r){n!==r&&(e.flags|=4)};function Qo(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function PI(t,e,n){var r=e.pendingProps;switch(K2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return Ut(e.type)&&fu(),dt(e),null;case 3:return r=e.stateNode,oo(),Se(Ft),Se(Tt),rp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,En!==null&&(Sf(En),En=null))),vf(t,e),dt(e),null;case 5:np(e);var s=ks(Ya.current);if(n=e.type,t!==null&&e.stateNode!=null)t3(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(P(166));return dt(e),null}if(t=ks(Un.current),yc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[bn]=e,r[Ka]=i,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(s=0;s<ua.length;s++)xe(ua[s],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":Lg(r,i),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},xe("invalid",r);break;case"textarea":Dg(r,i),xe("invalid",r)}W0(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&vc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&vc(r.textContent,a,t),s=["children",""+a]):Va.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xe("scroll",r)}switch(n){case"input":uc(r),bg(r,i,!0);break;case"textarea":uc(r),Og(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=du)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ny(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[bn]=e,t[Ka]=r,e3(t,e,!1,!1),e.stateNode=t;e:{switch(o=H0(n,r),n){case"dialog":xe("cancel",t),xe("close",t),s=r;break;case"iframe":case"object":case"embed":xe("load",t),s=r;break;case"video":case"audio":for(s=0;s<ua.length;s++)xe(ua[s],t);s=r;break;case"source":xe("error",t),s=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),s=r;break;case"details":xe("toggle",t),s=r;break;case"input":Lg(t,r),s=F0(t,r),xe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Le({},r,{value:void 0}),xe("invalid",t);break;case"textarea":Dg(t,r),s=z0(t,r),xe("invalid",t);break;default:s=r}W0(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Ly(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ky(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Fa(t,l):typeof l=="number"&&Fa(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Va.hasOwnProperty(i)?l!=null&&i==="onScroll"&&xe("scroll",t):l!=null&&b2(t,i,l,o))}switch(n){case"input":uc(t),bg(t,r,!1);break;case"textarea":uc(t),Og(t);break;case"option":r.value!=null&&t.setAttribute("value",""+rs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ui(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ui(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=du)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)n3(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(P(166));if(n=ks(Ya.current),ks(Un.current),yc(e)){if(r=e.stateNode,n=e.memoizedProps,r[bn]=e,(i=r.nodeValue!==n)&&(t=Gt,t!==null))switch(t.tag){case 3:vc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bn]=e,e.stateNode=r}return dt(e),null;case 13:if(Se(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Wt!==null&&e.mode&1&&!(e.flags&128))yw(),so(),e.flags|=98560,i=!1;else if(i=yc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(P(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[bn]=e}else so(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),i=!1}else En!==null&&(Sf(En),En=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?Ge===0&&(Ge=3):mp())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return oo(),vf(t,e),t===null&&qa(e.stateNode.containerInfo),dt(e),null;case 10:return J2(e.type._context),dt(e),null;case 17:return Ut(e.type)&&fu(),dt(e),null;case 19:if(Se(ke),i=e.memoizedState,i===null)return dt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Qo(i,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=wu(t),o!==null){for(e.flags|=128,Qo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(ke,ke.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ve()>lo&&(e.flags|=128,r=!0,Qo(i,!1),e.lanes=4194304)}else{if(!r)if(t=wu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Re)return dt(e),null}else 2*Ve()-i.renderingStartTime>lo&&n!==1073741824&&(e.flags|=128,r=!0,Qo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ve(),e.sibling=null,n=ke.current,ve(ke,r?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return pp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bt&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error(P(156,e.tag))}function LI(t,e){switch(K2(e),e.tag){case 1:return Ut(e.type)&&fu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oo(),Se(Ft),Se(Tt),rp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return np(e),null;case 13:if(Se(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));so()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Se(ke),null;case 4:return oo(),null;case 10:return J2(e.type._context),null;case 22:case 23:return pp(),null;case 24:return null;default:return null}}var xc=!1,mt=!1,bI=typeof WeakSet=="function"?WeakSet:Set,j=null;function Di(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function yf(t,e,n){try{n()}catch(r){De(t,e,r)}}var C1=!1;function DI(t,e){if(tf=cu,t=ow(),q2(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++h===r&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(nf={focusedElem:t,selectionRange:n},cu=!1,j=e;j!==null;)if(e=j,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,j=t;else for(;j!==null;){e=j;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,E=v.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?w:yn(e.type,w),E);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(x){De(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,j=t;break}j=e.return}return v=C1,C1=!1,v}function Ca(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&yf(e,n,i)}s=s.next}while(s!==r)}}function xh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function wf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function r3(t){var e=t.alternate;e!==null&&(t.alternate=null,r3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bn],delete e[Ka],delete e[of],delete e[gI],delete e[_I])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function s3(t){return t.tag===5||t.tag===3||t.tag===4}function I1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||s3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ef(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=du));else if(r!==4&&(t=t.child,t!==null))for(Ef(t,e,n),t=t.sibling;t!==null;)Ef(t,e,n),t=t.sibling}function xf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(xf(t,e,n),t=t.sibling;t!==null;)xf(t,e,n),t=t.sibling}var rt=null,wn=!1;function Rr(t,e,n){for(n=n.child;n!==null;)i3(t,e,n),n=n.sibling}function i3(t,e,n){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(ph,n)}catch{}switch(n.tag){case 5:mt||Di(n,e);case 6:var r=rt,s=wn;rt=null,Rr(t,e,n),rt=r,wn=s,rt!==null&&(wn?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(wn?(t=rt,n=n.stateNode,t.nodeType===8?qd(t.parentNode,n):t.nodeType===1&&qd(t,n),Ba(t)):qd(rt,n.stateNode));break;case 4:r=rt,s=wn,rt=n.stateNode.containerInfo,wn=!0,Rr(t,e,n),rt=r,wn=s;break;case 0:case 11:case 14:case 15:if(!mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&yf(n,e,o),s=s.next}while(s!==r)}Rr(t,e,n);break;case 1:if(!mt&&(Di(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){De(n,e,a)}Rr(t,e,n);break;case 21:Rr(t,e,n);break;case 22:n.mode&1?(mt=(r=mt)||n.memoizedState!==null,Rr(t,e,n),mt=r):Rr(t,e,n);break;default:Rr(t,e,n)}}function S1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new bI),e.forEach(function(r){var s=BI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function vn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:rt=a.stateNode,wn=!1;break e;case 3:rt=a.stateNode.containerInfo,wn=!0;break e;case 4:rt=a.stateNode.containerInfo,wn=!0;break e}a=a.return}if(rt===null)throw Error(P(160));i3(i,o,s),rt=null,wn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){De(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)o3(e,t),e=e.sibling}function o3(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vn(e,t),Pn(t),r&4){try{Ca(3,t,t.return),xh(3,t)}catch(w){De(t,t.return,w)}try{Ca(5,t,t.return)}catch(w){De(t,t.return,w)}}break;case 1:vn(e,t),Pn(t),r&512&&n!==null&&Di(n,n.return);break;case 5:if(vn(e,t),Pn(t),r&512&&n!==null&&Di(n,n.return),t.flags&32){var s=t.stateNode;try{Fa(s,"")}catch(w){De(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ay(s,i),H0(a,o);var c=H0(a,i);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?Ly(s,d):h==="dangerouslySetInnerHTML"?ky(s,d):h==="children"?Fa(s,d):b2(s,h,d,c)}switch(a){case"input":U0(s,i);break;case"textarea":Ry(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Ui(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ui(s,!!i.multiple,i.defaultValue,!0):Ui(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ka]=i}catch(w){De(t,t.return,w)}}break;case 6:if(vn(e,t),Pn(t),r&4){if(t.stateNode===null)throw Error(P(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){De(t,t.return,w)}}break;case 3:if(vn(e,t),Pn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ba(e.containerInfo)}catch(w){De(t,t.return,w)}break;case 4:vn(e,t),Pn(t);break;case 13:vn(e,t),Pn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(dp=Ve())),r&4&&S1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(mt=(c=mt)||h,vn(e,t),mt=c):vn(e,t),Pn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(j=t,h=t.child;h!==null;){for(d=j=h;j!==null;){switch(f=j,m=f.child,f.tag){case 0:case 11:case 14:case 15:Ca(4,f,f.return);break;case 1:Di(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){De(r,n,w)}}break;case 5:Di(f,f.return);break;case 22:if(f.memoizedState!==null){R1(d);continue}}m!==null?(m.return=f,j=m):R1(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Py("display",o))}catch(w){De(t,t.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(w){De(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:vn(e,t),Pn(t),r&4&&S1(t);break;case 21:break;default:vn(e,t),Pn(t)}}function Pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(s3(n)){var r=n;break e}n=n.return}throw Error(P(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Fa(s,""),r.flags&=-33);var i=I1(t);xf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=I1(t);Ef(t,a,o);break;default:throw Error(P(161))}}catch(l){De(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function OI(t,e,n){j=t,a3(t)}function a3(t,e,n){for(var r=(t.mode&1)!==0;j!==null;){var s=j,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||xc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||mt;a=xc;var c=mt;if(xc=o,(mt=l)&&!c)for(j=s;j!==null;)o=j,l=o.child,o.tag===22&&o.memoizedState!==null?N1(s):l!==null?(l.return=o,j=l):N1(s);for(;i!==null;)j=i,a3(i),i=i.sibling;j=s,xc=a,mt=c}A1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,j=i):A1(t)}}function A1(t){for(;j!==null;){var e=j;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||xh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:yn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&u1(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}u1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ba(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}mt||e.flags&512&&wf(e)}catch(f){De(e,e.return,f)}}if(e===t){j=null;break}if(n=e.sibling,n!==null){n.return=e.return,j=n;break}j=e.return}}function R1(t){for(;j!==null;){var e=j;if(e===t){j=null;break}var n=e.sibling;if(n!==null){n.return=e.return,j=n;break}j=e.return}}function N1(t){for(;j!==null;){var e=j;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xh(4,e)}catch(l){De(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){De(e,s,l)}}var i=e.return;try{wf(e)}catch(l){De(e,i,l)}break;case 5:var o=e.return;try{wf(e)}catch(l){De(e,o,l)}}}catch(l){De(e,e.return,l)}if(e===t){j=null;break}var a=e.sibling;if(a!==null){a.return=e.return,j=a;break}j=e.return}}var MI=Math.ceil,Tu=Er.ReactCurrentDispatcher,up=Er.ReactCurrentOwner,un=Er.ReactCurrentBatchConfig,ae=0,et=null,$e=null,at=0,Bt=0,Oi=hs(0),Ge=0,el=null,Ks=0,Th=0,hp=0,Ia=null,Dt=null,dp=0,lo=1/0,Zn=null,Cu=!1,Tf=null,Kr=null,Tc=!1,Ur=null,Iu=0,Sa=0,Cf=null,Gc=-1,Kc=0;function Pt(){return ae&6?Ve():Gc!==-1?Gc:Gc=Ve()}function Qr(t){return t.mode&1?ae&2&&at!==0?at&-at:yI.transition!==null?(Kc===0&&(Kc=Wy()),Kc):(t=de,t!==0||(t=window.event,t=t===void 0?16:Xy(t.type)),t):1}function In(t,e,n,r){if(50<Sa)throw Sa=0,Cf=null,Error(P(185));Al(t,n,r),(!(ae&2)||t!==et)&&(t===et&&(!(ae&2)&&(Th|=n),Ge===4&&br(t,at)),$t(t,r),n===1&&ae===0&&!(e.mode&1)&&(lo=Ve()+500,yh&&ds()))}function $t(t,e){var n=t.callbackNode;y4(t,e);var r=lu(t,t===et?at:0);if(r===0)n!==null&&Vg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Vg(n),e===1)t.tag===0?vI(k1.bind(null,t)):gw(k1.bind(null,t)),pI(function(){!(ae&6)&&ds()}),n=null;else{switch(Hy(r)){case 1:n=V2;break;case 4:n=zy;break;case 16:n=au;break;case 536870912:n=By;break;default:n=au}n=m3(n,l3.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function l3(t,e){if(Gc=-1,Kc=0,ae&6)throw Error(P(327));var n=t.callbackNode;if(Hi()&&t.callbackNode!==n)return null;var r=lu(t,t===et?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Su(t,r);else{e=r;var s=ae;ae|=2;var i=u3();(et!==t||at!==e)&&(Zn=null,lo=Ve()+500,Fs(t,e));do try{FI();break}catch(a){c3(t,a)}while(!0);X2(),Tu.current=i,ae=s,$e!==null?e=0:(et=null,at=0,e=Ge)}if(e!==0){if(e===2&&(s=Y0(t),s!==0&&(r=s,e=If(t,s))),e===1)throw n=el,Fs(t,0),br(t,r),$t(t,Ve()),n;if(e===6)br(t,r);else{if(s=t.current.alternate,!(r&30)&&!jI(s)&&(e=Su(t,r),e===2&&(i=Y0(t),i!==0&&(r=i,e=If(t,i))),e===1))throw n=el,Fs(t,0),br(t,r),$t(t,Ve()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(P(345));case 2:Cs(t,Dt,Zn);break;case 3:if(br(t,r),(r&130023424)===r&&(e=dp+500-Ve(),10<e)){if(lu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Pt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=sf(Cs.bind(null,t,Dt,Zn),e);break}Cs(t,Dt,Zn);break;case 4:if(br(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Cn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*MI(r/1960))-r,10<r){t.timeoutHandle=sf(Cs.bind(null,t,Dt,Zn),r);break}Cs(t,Dt,Zn);break;case 5:Cs(t,Dt,Zn);break;default:throw Error(P(329))}}}return $t(t,Ve()),t.callbackNode===n?l3.bind(null,t):null}function If(t,e){var n=Ia;return t.current.memoizedState.isDehydrated&&(Fs(t,e).flags|=256),t=Su(t,e),t!==2&&(e=Dt,Dt=n,e!==null&&Sf(e)),t}function Sf(t){Dt===null?Dt=t:Dt.push.apply(Dt,t)}function jI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!An(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function br(t,e){for(e&=~hp,e&=~Th,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cn(e),r=1<<n;t[n]=-1,e&=~r}}function k1(t){if(ae&6)throw Error(P(327));Hi();var e=lu(t,0);if(!(e&1))return $t(t,Ve()),null;var n=Su(t,e);if(t.tag!==0&&n===2){var r=Y0(t);r!==0&&(e=r,n=If(t,r))}if(n===1)throw n=el,Fs(t,0),br(t,e),$t(t,Ve()),n;if(n===6)throw Error(P(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cs(t,Dt,Zn),$t(t,Ve()),null}function fp(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(lo=Ve()+500,yh&&ds())}}function Qs(t){Ur!==null&&Ur.tag===0&&!(ae&6)&&Hi();var e=ae;ae|=1;var n=un.transition,r=de;try{if(un.transition=null,de=1,t)return t()}finally{de=r,un.transition=n,ae=e,!(ae&6)&&ds()}}function pp(){Bt=Oi.current,Se(Oi)}function Fs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,fI(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(K2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fu();break;case 3:oo(),Se(Ft),Se(Tt),rp();break;case 5:np(r);break;case 4:oo();break;case 13:Se(ke);break;case 19:Se(ke);break;case 10:J2(r.type._context);break;case 22:case 23:pp()}n=n.return}if(et=t,$e=t=Yr(t.current,null),at=Bt=e,Ge=0,el=null,hp=Th=Ks=0,Dt=Ia=null,Ns!==null){for(e=0;e<Ns.length;e++)if(n=Ns[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ns=null}return t}function c3(t,e){do{var n=$e;try{if(X2(),Wc.current=xu,Eu){for(var r=Pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Eu=!1}if(Gs=0,Xe=qe=Pe=null,Ta=!1,Xa=0,up.current=null,n===null||n.return===null){Ge=1,el=e,$e=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=at,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=_1(o);if(m!==null){m.flags&=-257,v1(m,o,a,i,e),m.mode&1&&g1(i,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var w=new Set;w.add(l),e.updateQueue=w}else v.add(l);break e}else{if(!(e&1)){g1(i,c,e),mp();break e}l=Error(P(426))}}else if(Re&&a.mode&1){var E=_1(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),v1(E,o,a,i,e),Q2(ao(l,a));break e}}i=l=ao(l,a),Ge!==4&&(Ge=2),Ia===null?Ia=[i]:Ia.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=qw(i,l,e);c1(i,p);break e;case 1:a=l;var g=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Kr===null||!Kr.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=Gw(i,a,e);c1(i,x);break e}}i=i.return}while(i!==null)}d3(n)}catch(C){e=C,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function u3(){var t=Tu.current;return Tu.current=xu,t===null?xu:t}function mp(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),et===null||!(Ks&268435455)&&!(Th&268435455)||br(et,at)}function Su(t,e){var n=ae;ae|=2;var r=u3();(et!==t||at!==e)&&(Zn=null,Fs(t,e));do try{VI();break}catch(s){c3(t,s)}while(!0);if(X2(),ae=n,Tu.current=r,$e!==null)throw Error(P(261));return et=null,at=0,Ge}function VI(){for(;$e!==null;)h3($e)}function FI(){for(;$e!==null&&!u4();)h3($e)}function h3(t){var e=p3(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,e===null?d3(t):$e=e,up.current=null}function d3(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=LI(n,e),n!==null){n.flags&=32767,$e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,$e=null;return}}else if(n=PI(n,e,Bt),n!==null){$e=n;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);Ge===0&&(Ge=5)}function Cs(t,e,n){var r=de,s=un.transition;try{un.transition=null,de=1,UI(t,e,n,r)}finally{un.transition=s,de=r}return null}function UI(t,e,n,r){do Hi();while(Ur!==null);if(ae&6)throw Error(P(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(P(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(w4(t,i),t===et&&($e=et=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Tc||(Tc=!0,m3(au,function(){return Hi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=un.transition,un.transition=null;var o=de;de=1;var a=ae;ae|=4,up.current=null,DI(t,n),o3(n,t),oI(nf),cu=!!tf,nf=tf=null,t.current=n,OI(n),h4(),ae=a,de=o,un.transition=i}else t.current=n;if(Tc&&(Tc=!1,Ur=t,Iu=s),i=t.pendingLanes,i===0&&(Kr=null),p4(n.stateNode),$t(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Cu)throw Cu=!1,t=Tf,Tf=null,t;return Iu&1&&t.tag!==0&&Hi(),i=t.pendingLanes,i&1?t===Cf?Sa++:(Sa=0,Cf=t):Sa=0,ds(),null}function Hi(){if(Ur!==null){var t=Hy(Iu),e=un.transition,n=de;try{if(un.transition=null,de=16>t?16:t,Ur===null)var r=!1;else{if(t=Ur,Ur=null,Iu=0,ae&6)throw Error(P(331));var s=ae;for(ae|=4,j=t.current;j!==null;){var i=j,o=i.child;if(j.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(j=c;j!==null;){var h=j;switch(h.tag){case 0:case 11:case 15:Ca(8,h,i)}var d=h.child;if(d!==null)d.return=h,j=d;else for(;j!==null;){h=j;var f=h.sibling,m=h.return;if(r3(h),h===c){j=null;break}if(f!==null){f.return=m,j=f;break}j=m}}}var v=i.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var E=w.sibling;w.sibling=null,w=E}while(w!==null)}}j=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,j=o;else e:for(;j!==null;){if(i=j,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ca(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,j=p;break e}j=i.return}}var g=t.current;for(j=g;j!==null;){o=j;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,j=y;else e:for(o=g;j!==null;){if(a=j,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:xh(9,a)}}catch(C){De(a,a.return,C)}if(a===o){j=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,j=x;break e}j=a.return}}if(ae=s,ds(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(ph,t)}catch{}r=!0}return r}finally{de=n,un.transition=e}}return!1}function P1(t,e,n){e=ao(n,e),e=qw(t,e,1),t=Gr(t,e,1),e=Pt(),t!==null&&(Al(t,1,e),$t(t,e))}function De(t,e,n){if(t.tag===3)P1(t,t,n);else for(;e!==null;){if(e.tag===3){P1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Kr===null||!Kr.has(r))){t=ao(n,t),t=Gw(e,t,1),e=Gr(e,t,1),t=Pt(),e!==null&&(Al(e,1,t),$t(e,t));break}}e=e.return}}function $I(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Pt(),t.pingedLanes|=t.suspendedLanes&n,et===t&&(at&n)===n&&(Ge===4||Ge===3&&(at&130023424)===at&&500>Ve()-dp?Fs(t,0):hp|=n),$t(t,e)}function f3(t,e){e===0&&(t.mode&1?(e=fc,fc<<=1,!(fc&130023424)&&(fc=4194304)):e=1);var n=Pt();t=dr(t,e),t!==null&&(Al(t,e,n),$t(t,n))}function zI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),f3(t,n)}function BI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(P(314))}r!==null&&r.delete(e),f3(t,n)}var p3;p3=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ft.current)Mt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Mt=!1,kI(t,e,n);Mt=!!(t.flags&131072)}else Mt=!1,Re&&e.flags&1048576&&_w(e,gu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;qc(t,e),t=e.pendingProps;var s=ro(e,Tt.current);Wi(e,n),s=ip(null,e,r,t,s,n);var i=op();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ut(r)?(i=!0,pu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ep(e),s.updater=wh,e.stateNode=s,s._reactInternals=e,df(e,r,t,n),e=mf(null,e,r,!0,i,n)):(e.tag=0,Re&&i&&G2(e),Nt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(qc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=HI(r),t=yn(r,t),s){case 0:e=pf(null,e,r,t,n);break e;case 1:e=E1(null,e,r,t,n);break e;case 11:e=y1(null,e,r,t,n);break e;case 14:e=w1(null,e,r,yn(r.type,t),n);break e}throw Error(P(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yn(r,s),pf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yn(r,s),E1(t,e,r,s,n);case 3:e:{if(Xw(e),t===null)throw Error(P(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Ew(t,e),yu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ao(Error(P(423)),e),e=x1(t,e,r,n,s);break e}else if(r!==s){s=ao(Error(P(424)),e),e=x1(t,e,r,n,s);break e}else for(Wt=qr(e.stateNode.containerInfo.firstChild),Gt=e,Re=!0,En=null,n=Iw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(so(),r===s){e=fr(t,e,n);break e}Nt(t,e,r,n)}e=e.child}return e;case 5:return Sw(e),t===null&&cf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,rf(r,s)?o=null:i!==null&&rf(r,i)&&(e.flags|=32),Yw(t,e),Nt(t,e,o,n),e.child;case 6:return t===null&&cf(e),null;case 13:return Jw(t,e,n);case 4:return tp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=io(e,null,r,n):Nt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yn(r,s),y1(t,e,r,s,n);case 7:return Nt(t,e,e.pendingProps,n),e.child;case 8:return Nt(t,e,e.pendingProps.children,n),e.child;case 12:return Nt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ve(_u,r._currentValue),r._currentValue=o,i!==null)if(An(i.value,o)){if(i.children===s.children&&!Ft.current){e=fr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=lr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),uf(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(P(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),uf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Nt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Wi(e,n),s=fn(s),r=r(s),e.flags|=1,Nt(t,e,r,n),e.child;case 14:return r=e.type,s=yn(r,e.pendingProps),s=yn(r.type,s),w1(t,e,r,s,n);case 15:return Kw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yn(r,s),qc(t,e),e.tag=1,Ut(r)?(t=!0,pu(e)):t=!1,Wi(e,n),Tw(e,r,s),df(e,r,s,n),mf(null,e,r,!0,t,n);case 19:return Zw(t,e,n);case 22:return Qw(t,e,n)}throw Error(P(156,e.tag))};function m3(t,e){return $y(t,e)}function WI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(t,e,n,r){return new WI(t,e,n,r)}function gp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function HI(t){if(typeof t=="function")return gp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O2)return 11;if(t===M2)return 14}return 2}function Yr(t,e){var n=t.alternate;return n===null?(n=ln(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")gp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ii:return Us(n.children,s,i,e);case D2:o=8,s|=8;break;case O0:return t=ln(12,n,e,s|2),t.elementType=O0,t.lanes=i,t;case M0:return t=ln(13,n,e,s),t.elementType=M0,t.lanes=i,t;case j0:return t=ln(19,n,e,s),t.elementType=j0,t.lanes=i,t;case Cy:return Ch(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xy:o=10;break e;case Ty:o=9;break e;case O2:o=11;break e;case M2:o=14;break e;case kr:o=16,r=null;break e}throw Error(P(130,t==null?t:typeof t,""))}return e=ln(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Us(t,e,n,r){return t=ln(7,t,r,e),t.lanes=n,t}function Ch(t,e,n,r){return t=ln(22,t,r,e),t.elementType=Cy,t.lanes=n,t.stateNode={isHidden:!1},t}function e0(t,e,n){return t=ln(6,t,null,e),t.lanes=n,t}function t0(t,e,n){return e=ln(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Od(0),this.expirationTimes=Od(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Od(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _p(t,e,n,r,s,i,o,a,l){return t=new qI(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ln(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ep(i),t}function GI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ci,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function g3(t){if(!t)return ss;t=t._reactInternals;e:{if(ai(t)!==t||t.tag!==1)throw Error(P(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ut(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(P(171))}if(t.tag===1){var n=t.type;if(Ut(n))return mw(t,n,e)}return e}function _3(t,e,n,r,s,i,o,a,l){return t=_p(n,r,!0,t,s,i,o,a,l),t.context=g3(null),n=t.current,r=Pt(),s=Qr(n),i=lr(r,s),i.callback=e??null,Gr(n,i,s),t.current.lanes=s,Al(t,s,r),$t(t,r),t}function Ih(t,e,n,r){var s=e.current,i=Pt(),o=Qr(s);return n=g3(n),e.context===null?e.context=n:e.pendingContext=n,e=lr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Gr(s,e,o),t!==null&&(In(t,s,o,i),Bc(t,s,o)),o}function Au(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function L1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vp(t,e){L1(t,e),(t=t.alternate)&&L1(t,e)}function KI(){return null}var v3=typeof reportError=="function"?reportError:function(t){console.error(t)};function yp(t){this._internalRoot=t}Sh.prototype.render=yp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));Ih(t,e,null,null)};Sh.prototype.unmount=yp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qs(function(){Ih(null,t,null,null)}),e[hr]=null}};function Sh(t){this._internalRoot=t}Sh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ky();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Lr.length&&e!==0&&e<Lr[n].priority;n++);Lr.splice(n,0,t),n===0&&Yy(t)}};function wp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ah(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function b1(){}function QI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Au(o);i.call(c)}}var o=_3(e,r,t,0,null,!1,!1,"",b1);return t._reactRootContainer=o,t[hr]=o.current,qa(t.nodeType===8?t.parentNode:t),Qs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Au(l);a.call(c)}}var l=_p(t,0,!1,null,null,!1,!1,"",b1);return t._reactRootContainer=l,t[hr]=l.current,qa(t.nodeType===8?t.parentNode:t),Qs(function(){Ih(e,l,n,r)}),l}function Rh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Au(o);a.call(l)}}Ih(e,o,t,s)}else o=QI(n,e,t,s,r);return Au(o)}qy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ca(e.pendingLanes);n!==0&&(F2(e,n|1),$t(e,Ve()),!(ae&6)&&(lo=Ve()+500,ds()))}break;case 13:Qs(function(){var r=dr(t,1);if(r!==null){var s=Pt();In(r,t,1,s)}}),vp(t,1)}};U2=function(t){if(t.tag===13){var e=dr(t,134217728);if(e!==null){var n=Pt();In(e,t,134217728,n)}vp(t,134217728)}};Gy=function(t){if(t.tag===13){var e=Qr(t),n=dr(t,e);if(n!==null){var r=Pt();In(n,t,e,r)}vp(t,e)}};Ky=function(){return de};Qy=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};G0=function(t,e,n){switch(e){case"input":if(U0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=vh(r);if(!s)throw Error(P(90));Sy(r),U0(r,s)}}}break;case"textarea":Ry(t,n);break;case"select":e=n.value,e!=null&&Ui(t,!!n.multiple,e,!1)}};Oy=fp;My=Qs;var YI={usingClientEntryPoint:!1,Events:[Nl,Ni,vh,by,Dy,fp]},Yo={findFiberByHostInstance:Rs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},XI={bundleType:Yo.bundleType,version:Yo.version,rendererPackageName:Yo.rendererPackageName,rendererConfig:Yo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Er.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Fy(t),t===null?null:t.stateNode},findFiberByHostInstance:Yo.findFiberByHostInstance||KI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cc.isDisabled&&Cc.supportsFiber)try{ph=Cc.inject(XI),Fn=Cc}catch{}}Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YI;Zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wp(e))throw Error(P(200));return GI(t,e,null,n)};Zt.createRoot=function(t,e){if(!wp(t))throw Error(P(299));var n=!1,r="",s=v3;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=_p(t,1,!1,null,null,n,!1,r,s),t[hr]=e.current,qa(t.nodeType===8?t.parentNode:t),new yp(e)};Zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=Fy(e),t=t===null?null:t.stateNode,t};Zt.flushSync=function(t){return Qs(t)};Zt.hydrate=function(t,e,n){if(!Ah(e))throw Error(P(200));return Rh(null,t,e,!0,n)};Zt.hydrateRoot=function(t,e,n){if(!wp(t))throw Error(P(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=v3;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=_3(e,null,t,1,n??null,s,!1,i,o),t[hr]=e.current,qa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Sh(e)};Zt.render=function(t,e,n){if(!Ah(e))throw Error(P(200));return Rh(null,t,e,!1,n)};Zt.unmountComponentAtNode=function(t){if(!Ah(t))throw Error(P(40));return t._reactRootContainer?(Qs(function(){Rh(null,null,t,!1,function(){t._reactRootContainer=null,t[hr]=null})}),!0):!1};Zt.unstable_batchedUpdates=fp;Zt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ah(n))throw Error(P(200));if(t==null||t._reactInternals===void 0)throw Error(P(38));return Rh(t,e,n,!1,r)};Zt.version="18.2.0-next-9e3b772b8-20220608";function y3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(y3)}catch(t){console.error(t)}}y3(),_y.exports=Zt;var JI=_y.exports,D1=JI;b0.createRoot=D1.createRoot,b0.hydrateRoot=D1.hydrateRoot;const ZI="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%20width='500'%20height='500'%3e%3cpath%20d='M41.9375%208.625C41.273438%208.648438%2040.664063%209%2040.3125%209.5625L21.5%2038.34375L9.3125%2027.8125C8.789063%2027.269531%208.003906%2027.066406%207.28125%2027.292969C6.5625%2027.515625%206.027344%2028.125%205.902344%2028.867188C5.777344%2029.613281%206.078125%2030.363281%206.6875%2030.8125L20.625%2042.875C21.0625%2043.246094%2021.640625%2043.410156%2022.207031%2043.328125C22.777344%2043.242188%2023.28125%2042.917969%2023.59375%2042.4375L43.6875%2011.75C44.117188%2011.121094%2044.152344%2010.308594%2043.78125%209.644531C43.410156%208.984375%2042.695313%208.589844%2041.9375%208.625Z'%20fill='%231EE97C'%20/%3e%3c/svg%3e",eS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%20width='500'%20height='500'%3e%3cpath%20d='M9.15625%206.3125L6.3125%209.15625L22.15625%2025L6.21875%2040.96875L9.03125%2043.78125L25%2027.84375L40.9375%2043.78125L43.78125%2040.9375L27.84375%2025L43.6875%209.15625L40.84375%206.3125L25%2022.15625Z'%20fill='%23E91E25'%20/%3e%3c/svg%3e",tS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M15%203C14.168432%203%2013.456063%203.5067238%2013.154297%204.2285156L2.3007812%2022.947266L2.3007812%2022.949219%20A%202%202%200%200%200%202%2024%20A%202%202%200%200%200%204%2026%20A%202%202%200%200%200%204.140625%2025.994141L4.1445312%2026L15%2026L25.855469%2026L25.859375%2025.992188%20A%202%202%200%200%200%2026%2026%20A%202%202%200%200%200%2028%2024%20A%202%202%200%200%200%2027.699219%2022.947266L27.683594%2022.919922%20A%202%202%200%200%200%2027.681641%2022.917969L16.845703%204.2285156C16.543937%203.5067238%2015.831568%203%2015%203%20z%20M%2013.787109%2011.359375L16.212891%2011.359375L16.011719%2017.832031L13.988281%2017.832031L13.787109%2011.359375%20z%20M%2015.003906%2019.810547C15.825906%2019.810547%2016.318359%2020.252813%2016.318359%2021.007812C16.318359%2021.748812%2015.825906%2022.189453%2015.003906%2022.189453C14.175906%2022.189453%2013.679688%2021.748813%2013.679688%2021.007812C13.679688%2020.252813%2014.174906%2019.810547%2015.003906%2019.810547%20z'%20fill='%23E91E25'%20/%3e%3c/svg%3e",nS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M3,12v-2c0-0.386,0.223-0.738,0.572-0.904s0.762-0.115,1.062,0.13L15,17.708l10.367-8.482%20c0.299-0.245,0.712-0.295,1.062-0.13C26.779,9.261,27,9.614,27,10v2c0,0.3-0.135,0.584-0.367,0.774l-11,9%20c-0.369,0.301-0.898,0.301-1.267,0l-11-9C3.135,12.584,3,12.3,3,12z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",rS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M17,3h2c0.386,0,0.738,0.223,0.904,0.572s0.115,0.762-0.13,1.062L11.292,15l8.482,10.367%20c0.245,0.299,0.295,0.712,0.13,1.062S19.386,27,19,27h-2c-0.3,0-0.584-0.135-0.774-0.367l-9-11c-0.301-0.369-0.301-0.898,0-1.267%20l9-11C16.416,3.135,16.7,3,17,3z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",sS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M19,7h-6.774l0.564-1.551c0.604-1.662-0.134-3.512-1.716-4.302c-0.691-0.345-1.532-0.064-1.877,0.627L6.339,7.504%20C5.532,8.042,5,8.958,5,10v7c0,2.209,1.791,4,4,4h6.989c2.344,0,4.373-1.628,4.881-3.915L22,12v-2C22,8.343,20.657,7,19,7z'%20opacity='.35'%20fill='%232E2E2E'%20/%3e%3cpath%20d='M7,19.5c0-0.386,0-10.614,0-11C7,7.672,6.328,7,5.5,7S4,7.672,4,8.5c0,0.386,0,10.614,0,11C4,20.328,4.672,21,5.5,21S7,20.328,7,19.5z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",iS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M12,6h4V3.706c0-0.615,0.742-0.924,1.178-0.491l4.104,4.075c0.395,0.391,0.395,1.03,0,1.421l-4.104,4.075C16.742,13.218,16,12.908,16,12.294V10h-4c-4.351,0-5,2.661-5,4H3C3,10.31,5.357,6,12,6z'%20opacity='.35'%20fill='%232E2E2E'%20/%3e%3cpath%20d='M8,22c0.513,0,1.024-0.196,1.415-0.587c0.78-0.781,0.78-2.046,0-2.827C8.786,17.951,7,15.753,7,14c0-6.845,5-8,5-8c-6.643,0-9,4.31-9,8c0,3.726,3.22,7.049,3.587,7.415C6.978,21.805,7.488,22,8,22z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",oS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M12,27h-2c-0.386,0-0.738-0.223-0.904-0.572s-0.115-0.762,0.13-1.062L17.708,15L9.226,4.633%20c-0.245-0.299-0.295-0.712-0.13-1.062S9.614,3,10,3h2c0.3,0,0.584,0.135,0.774,0.367l9,11c0.301,0.369,0.301,0.898,0,1.267l-9,11%20C12.584,26.865,12.3,27,12,27z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",aS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M11.5%206C8.4802259%206%206%208.4802259%206%2011.5L6%2036.5C6%2039.519774%208.4802259%2042%2011.5%2042L36.5%2042C39.519774%2042%2042%2039.519774%2042%2036.5L42%2011.5C42%208.4802259%2039.519774%206%2036.5%206L11.5%206%20z%20M%2011.5%209L36.5%209C37.898226%209%2039%2010.101774%2039%2011.5L39%2036.5C39%2037.898226%2037.898226%2039%2036.5%2039L11.5%2039C10.101774%2039%209%2037.898226%209%2036.5L9%2011.5C9%2010.101774%2010.101774%209%2011.5%209%20z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",lS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%204C11.832031%204%208.152344%206.113281%206%209.34375L6%206L4%206L4%2013L11%2013L11%2011L7.375%2011C9.101563%208.019531%2012.296875%206%2016%206C21.535156%206%2026%2010.464844%2026%2016C26%2021.535156%2021.535156%2026%2016%2026C10.464844%2026%206%2021.535156%206%2016L4%2016C4%2022.617188%209.382813%2028%2016%2028C22.617188%2028%2028%2022.617188%2028%2016C28%209.382813%2022.617188%204%2016%204%20Z%20M%2015%208L15%2017L22%2017L22%2015L17%2015L17%208Z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",cS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M10%202L9%203L5%203C4.4%203%204%203.4%204%204C4%204.6%204.4%205%205%205L7%205L17%205L19%205C19.6%205%2020%204.6%2020%204C20%203.4%2019.6%203%2019%203L15%203L14%202L10%202%20z%20M%205%207L5%2020C5%2021.1%205.9%2022%207%2022L17%2022C18.1%2022%2019%2021.1%2019%2020L19%207L5%207%20z%20M%209%209C9.6%209%2010%209.4%2010%2010L10%2019C10%2019.6%209.6%2020%209%2020C8.4%2020%208%2019.6%208%2019L8%2010C8%209.4%208.4%209%209%209%20z%20M%2015%209C15.6%209%2016%209.4%2016%2010L16%2019C16%2019.6%2015.6%2020%2015%2020C14.4%2020%2014%2019.6%2014%2019L14%2010C14%209.4%2014.4%209%2015%209%20z'%20fill='%23FF4A33'%20/%3e%3c/svg%3e",uS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M11%203H13V21H11z'%20fill='%230F0F0F'%20/%3e%3cpath%20d='M3%2011H21V13H3z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",hS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20128%20128'%20width='512'%20height='512'%3e%3cpath%20d='M79.335938%2015.667969C78.064453%2015.622266%2076.775%2015.762109%2075.5%2016.099609C72.1%2016.999609%2069.299609%2019.199219%2067.599609%2022.199219L64%2028.699219C63.2%2030.099219%2063.699609%2032.000781%2065.099609%2032.800781L82.400391%2042.800781C82.900391%2043.100781%2083.400391%2043.199219%2083.900391%2043.199219C84.200391%2043.199219%2084.399219%2043.199609%2084.699219%2043.099609C85.499219%2042.899609%2086.1%2042.399219%2086.5%2041.699219L90.199219%2035.199219C91.899219%2032.199219%2092.4%2028.700781%2091.5%2025.300781C90.6%2021.900781%2088.400391%2019.100391%2085.400391%2017.400391C83.525391%2016.337891%2081.455078%2015.744141%2079.335938%2015.667969%20z%20M%2060.097656%2038.126953C59.128906%2038.201172%2058.199219%2038.724609%2057.699219%2039.599609L27.5%2092C24.1%2097.8%2022.200781%20104.30039%2021.800781%20110.90039L21%20123.80078C20.9%20124.90078%2021.5%20125.99961%2022.5%20126.59961C23%20126.89961%2023.5%20127%2024%20127C24.6%20127%2025.199219%20126.8%2025.699219%20126.5L36.5%20119.40039C42%20115.70039%2046.7%20110.8%2050%20105L80.300781%2052.599609C81.100781%2051.199609%2080.599219%2049.3%2079.199219%2048.5C77.799219%2047.7%2075.899609%2048.199609%2075.099609%2049.599609L44.800781%20102C41.900781%20106.9%2037.899609%20111.20039%2033.099609%20114.40039L27.300781%20118.19922L27.699219%20111.30078C27.999219%20105.60078%2029.699609%20100%2032.599609%2095L62.900391%2042.599609C63.700391%2041.199609%2063.200781%2039.3%2061.800781%2038.5C61.275781%2038.2%2060.678906%2038.082422%2060.097656%2038.126953%20z%20M%2049%20121C47.3%20121%2046%20122.3%2046%20124C46%20125.7%2047.3%20127%2049%20127L89%20127C90.7%20127%2092%20125.7%2092%20124C92%20122.3%2090.7%20121%2089%20121L49%20121%20z%20M%20104%20121%20A%203%203%200%200%200%20101%20124%20A%203%203%200%200%200%20104%20127%20A%203%203%200%200%200%20107%20124%20A%203%203%200%200%200%20104%20121%20z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",dS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M5%203C3.9057453%203%203%203.9057453%203%205L3%2019C3%2020.094255%203.9057453%2021%205%2021L19%2021C20.094255%2021%2021%2020.094255%2021%2019L21%207L17%203L5%203%20z%20M%205%205L16.171875%205L19%207.828125L19%2019L5%2019L5%205%20z%20M%207%207L7%2010L15%2010L15%207L7%207%20z%20M%2011.5%2012%20A%202.5%202.5%200%200%200%209%2014.5%20A%202.5%202.5%200%200%200%2011.5%2017%20A%202.5%202.5%200%200%200%2014%2014.5%20A%202.5%202.5%200%200%200%2011.5%2012%20z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",fS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M27,18v2c0,0.386-0.223,0.738-0.572,0.904c-0.349,0.166-0.762,0.115-1.062-0.13L15,12.292L4.633,20.774%20c-0.299,0.245-0.712,0.295-1.062,0.13C3.221,20.739,3,20.386,3,20v-2c0-0.3,0.135-0.584,0.367-0.774l11-9%20c0.369-0.301,0.898-0.301,1.267,0l11,9C26.865,17.416,27,17.7,27,18z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",pS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M15%200C13.35499%200%2012%201.3549904%2012%203L8%203C6.3550302%203%205%204.3550302%205%206L5%2024C5%2025.64497%206.3550302%2027%208%2027L22%2027C23.64497%2027%2025%2025.64497%2025%2024L25%206C25%204.3550302%2023.64497%203%2022%203L18%203C18%201.3549904%2016.64501%200%2015%200%20z%20M%2015%202C15.564129%202%2016%202.4358706%2016%203C16%203.5641294%2015.564129%204%2015%204C14.435871%204%2014%203.5641294%2014%203C14%202.4358706%2014.435871%202%2015%202%20z%20M%208%205L12%205L12%206C12%206.552%2012.448%207%2013%207L17%207C17.552%207%2018%206.552%2018%206L18%205L22%205C22.56503%205%2023%205.4349698%2023%206L23%2024C23%2024.56503%2022.56503%2025%2022%2025L8%2025C7.4349698%2025%207%2024.56503%207%2024L7%206C7%205.4349698%207.4349698%205%208%205%20z%20M%2011%2011%20A%201.0001%201.0001%200%201%200%2011%2013L19%2013%20A%201.0001%201.0001%200%201%200%2019%2011L11%2011%20z%20M%2011%2015%20A%201.0001%201.0001%200%201%200%2011%2017L16%2017%20A%201.0001%201.0001%200%201%200%2016%2015L11%2015%20z%20M%2011%2019%20A%201.0001%201.0001%200%201%200%2011%2021L19%2021%20A%201.0001%201.0001%200%201%200%2019%2019L11%2019%20z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",mS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16.03125%204C14.921875%204%2013.8125%204.15625%2012.71875%204.46875L11.9375%204.6875L12%205.5C12.042969%206.238281%2011.679688%206.949219%2011%207.34375C10.320313%207.738281%209.523438%207.6875%208.90625%207.28125L8.25%206.84375L7.65625%207.375C6.023438%208.957031%204.910156%2010.957031%204.375%2013.09375L4.1875%2013.875L4.875%2014.21875C5.535156%2014.550781%206%2015.210938%206%2016C6%2016.789063%205.535156%2017.449219%204.875%2017.78125L4.15625%2018.125L4.375%2018.90625C4.636719%2019.957031%205.019531%2021.007813%205.59375%2022C6.167969%2022.992188%206.878906%2023.871094%207.65625%2024.625L8.25%2025.1875L8.90625%2024.75C9.523438%2024.34375%2010.316406%2024.261719%2011%2024.65625C11.683594%2025.050781%2012.042969%2025.761719%2012%2026.5L11.9375%2027.3125L12.71875%2027.53125C14.109375%2027.925781%2015.558594%2028.039063%2017%2027.90625L17%2032L32%2032L32%2018L27.59375%2018L27.125%2017.78125C26.464844%2017.449219%2026%2016.789063%2026%2016C26%2015.210938%2026.464844%2014.550781%2027.125%2014.21875L27.84375%2013.875L27.625%2013.09375C27.363281%2012.042969%2026.980469%2010.992188%2026.40625%2010C25.832031%209.007813%2025.121094%208.128906%2024.34375%207.375L23.78125%206.8125L23.09375%207.28125C22.476563%207.6875%2021.683594%207.738281%2021%207.34375L20.96875%207.3125C20.3125%206.914063%2019.957031%206.222656%2020%205.5L20.0625%204.6875L19.28125%204.46875C18.222656%204.167969%2017.140625%204%2016.03125%204%20Z%20M%2016%206.09375C16.742188%206.09375%2017.496094%206.179688%2018.21875%206.34375C18.429688%207.4375%2018.960938%208.460938%2020%209.0625C21.050781%209.667969%2022.21875%209.597656%2023.28125%209.21875C23.785156%209.757813%2024.273438%2010.335938%2024.65625%2011C25.042969%2011.671875%2025.285156%2012.378906%2025.5%2013.09375C24.648438%2013.824219%2024%2014.792969%2024%2016C24%2016.730469%2024.214844%2017.410156%2024.5625%2018L21.65625%2018C21.882813%2017.378906%2022%2016.703125%2022%2016C22%2012.699219%2019.300781%2010%2016%2010C12.699219%2010%2010%2012.699219%2010%2016C10%2019.300781%2012.699219%2022%2016%2022C16.34375%2022%2016.671875%2021.960938%2017%2021.90625L17%2025.90625C15.910156%2026.007813%2014.832031%2025.921875%2013.78125%2025.6875C13.574219%2024.582031%2013.050781%2023.542969%2012%2022.9375C10.949219%2022.332031%209.78125%2022.402344%208.71875%2022.78125C8.210938%2022.238281%207.726563%2021.664063%207.34375%2021C6.957031%2020.328125%206.714844%2019.621094%206.5%2018.90625C7.351563%2018.175781%208%2017.207031%208%2016C8%2014.792969%207.351563%2013.824219%206.5%2013.09375C6.933594%2011.667969%207.710938%2010.371094%208.75%209.25C9.800781%209.609375%2010.960938%209.660156%2012%209.0625C13.039063%208.464844%2013.570313%207.4375%2013.78125%206.34375C14.523438%206.175781%2015.257813%206.09375%2016%206.09375%20Z%20M%2016%2012C18.21875%2012%2020%2013.78125%2020%2016C20%2016.730469%2019.785156%2017.40625%2019.4375%2018L17%2018L17%2019.84375C16.675781%2019.933594%2016.351563%2020%2016%2020C13.78125%2020%2012%2018.21875%2012%2016C12%2013.78125%2013.78125%2012%2016%2012%20Z%20M%2019%2020L30%2020L30%2021L19%2021%20Z%20M%2019%2023L30%2023L30%2030L19%2030%20Z%20M%2026.28125%2023.78125L24%2026.0625L22.71875%2024.78125L21.28125%2026.21875L23.28125%2028.21875L24%2028.90625L24.71875%2028.21875L27.71875%2025.21875Z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",gS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M4%207L4%209L28%209L28%207%20Z%20M%204%2015L4%2017L28%2017L28%2015%20Z%20M%204%2023L4%2025L28%2025L28%2023Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",_S="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%202.59375L15.28125%203.28125L2.28125%2016.28125L3.71875%2017.71875L5%2016.4375L5%2028L14%2028L14%2018L18%2018L18%2028L27%2028L27%2016.4375L28.28125%2017.71875L29.71875%2016.28125L16.71875%203.28125%20Z%20M%2016%205.4375L25%2014.4375L25%2026L20%2026L20%2016L12%2016L12%2026L7%2026L7%2014.4375Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",vS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M20.5%204C18.203405%204%2016.305701%205.7666235%2016.050781%208L12.5%208C10.032499%208%208%2010.032499%208%2012.5L8%2039.5C8%2041.967501%2010.032499%2044%2012.5%2044L35.5%2044C37.967501%2044%2040%2041.967501%2040%2039.5L40%2012.5C40%2010.032499%2037.967501%208%2035.5%208L31.949219%208C31.694299%205.7666235%2029.796595%204%2027.5%204L20.5%204%20z%20M%2020.5%207L27.5%207C28.346499%207%2029%207.6535009%2029%208.5C29%209.3464991%2028.346499%2010%2027.5%2010L20.5%2010C19.653501%2010%2019%209.3464991%2019%208.5C19%207.6535009%2019.653501%207%2020.5%207%20z%20M%2012.5%2011L16.769531%2011C17.581237%2012.2019%2018.954719%2013%2020.5%2013L27.5%2013C29.045281%2013%2030.418763%2012.2019%2031.230469%2011L35.5%2011C36.346499%2011%2037%2011.653501%2037%2012.5L37%2039.5C37%2040.346499%2036.346499%2041%2035.5%2041L12.5%2041C11.653501%2041%2011%2040.346499%2011%2039.5L11%2012.5C11%2011.653501%2011.653501%2011%2012.5%2011%20z%20M%2032.470703%2018.986328%20A%201.50015%201.50015%200%200%200%2031.439453%2019.439453L28.5%2022.378906L27.560547%2021.439453%20A%201.50015%201.50015%200%201%200%2025.439453%2023.560547L27.439453%2025.560547%20A%201.50015%201.50015%200%200%200%2029.560547%2025.560547L33.560547%2021.560547%20A%201.50015%201.50015%200%200%200%2032.470703%2018.986328%20z%20M%2015.5%2021%20A%201.50015%201.50015%200%201%200%2015.5%2024L21.5%2024%20A%201.50015%201.50015%200%201%200%2021.5%2021L15.5%2021%20z%20M%2032.486328%2027.978516%20A%201.50015%201.50015%200%200%200%2031.439453%2028.439453L30%2029.878906L28.560547%2028.439453%20A%201.50015%201.50015%200%200%200%2027.484375%2027.984375%20A%201.50015%201.50015%200%200%200%2026.439453%2030.560547L27.878906%2032L26.439453%2033.439453%20A%201.50015%201.50015%200%201%200%2028.560547%2035.560547L30%2034.121094L31.439453%2035.560547%20A%201.50015%201.50015%200%201%200%2033.560547%2033.439453L32.121094%2032L33.560547%2030.560547%20A%201.50015%201.50015%200%200%200%2032.486328%2027.978516%20z%20M%2015.5%2030%20A%201.50015%201.50015%200%201%200%2015.5%2033L21.5%2033%20A%201.50015%201.50015%200%201%200%2021.5%2030L15.5%2030%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",yS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%204C9.382813%204%204%209.382813%204%2016C4%2022.617188%209.382813%2028%2016%2028C22.617188%2028%2028%2022.617188%2028%2016C28%209.382813%2022.617188%204%2016%204%20Z%20M%2016%206C21.535156%206%2026%2010.464844%2026%2016C26%2021.535156%2021.535156%2026%2016%2026C10.464844%2026%206%2021.535156%206%2016C6%2010.464844%2010.464844%206%2016%206%20Z%20M%2016%2010C13.800781%2010%2012%2011.800781%2012%2014L14%2014C14%2012.882813%2014.882813%2012%2016%2012C17.117188%2012%2018%2012.882813%2018%2014C18%2014.765625%2017.507813%2015.445313%2016.78125%2015.6875L16.375%2015.8125C15.558594%2016.082031%2015%2016.863281%2015%2017.71875L15%2019L17%2019L17%2017.71875L17.40625%2017.59375C18.945313%2017.082031%2020%2015.621094%2020%2014C20%2011.800781%2018.199219%2010%2016%2010%20Z%20M%2015%2020L15%2022L17%2022L17%2020Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",wS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20x='0'%20y='0'%20viewBox='0%200%20128%20128'%20width='512'%20height='512'%3e%3ccircle%20cx='64'%20cy='64'%20r='55'%20fill='%23fff'%20/%3e%3cpath%20fill='%23444b54'%20d='M64,122C32,122,6,96,6,64S32,6,64,6s58,26,58,58S96,122,64,122z%20M64,12c-28.7,0-52,23.3-52,52s23.3,52,52,52%20s52-23.3,52-52S92.7,12,64,12z'%20/%3e%3cpath%20fill='%23444b54'%20d='M64,90c-1.7,0-3-1.3-3-3V61c0-1.7,1.3-3,3-3s3,1.3,3,3v26C67,88.7,65.7,90,64,90z'%20/%3e%3cpath%20fill='%23444b54'%20d='M64,49c-1.7,0-3-1.3-3-3v-5c0-1.7,1.3-3,3-3s3,1.3,3,3v5C67,47.7,65.7,49,64,49z'%20/%3e%3c/svg%3e",ES="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M6%203L6%2029L17.765625%2029C19.233126%2030.826376%2021.480367%2032%2024%2032C26.396%2032%2028.534%2030.929859%2030%2029.255859L30%2032L32%2032L32%2026L26%2026L26%2028L28.445312%2028C27.347313%2029.221%2025.768%2030%2024%2030C20.691%2030%2018%2027.309%2018%2024C18%2020.691%2020.691%2018%2024%2018C27.309%2018%2030%2020.691%2030%2024L32%2024C32%2020.280606%2029.444687%2017.153349%2026%2016.261719L26%209.5859375L19.414062%203L6%203%20z%20M%208%205L18%205L18%2011L24%2011L24%2016C21.979283%2016%2020.136244%2016.75962%2018.726562%2018L11%2018L11%2020L17.082031%2020C16.722543%2020.619242%2016.445366%2021.290505%2016.261719%2022L11%2022L11%2024L16%2024C16%2025.060938%2016.211142%2026.072669%2016.587891%2027L8%2027L8%205%20z%20M%2020%206.4140625L22.585938%209L20%209L20%206.4140625%20z%20M%2011%2014L11%2016L21%2016L21%2014L11%2014%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",xS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M4.0097656%203C2.9179106%203%202.0097656%203.9049841%202.0097656%204.9980469L2%2023L6%2019L20%2019C21.093063%2019%2022%2018.093063%2022%2017L22%205C22%203.9069372%2021.093063%203%2020%203L4.0097656%203%20z%20M%204.0097656%205L20%205L20%2017L5.171875%2017L4.0039062%2018.167969L4.0097656%205%20z%20M%2011%207L11%209L13%209L13%207L11%207%20z%20M%2011%2011L11%2015L13%2015L13%2011L11%2011%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",TS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='480'%20height='480'%3e%3cpath%20d='M11%203L11%2011L3%2011L3%2013L11%2013L11%2021L13%2021L13%2013L21%2013L21%2011L13%2011L13%203L11%203%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",CS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M11%203H13V21H11z'%20transform='rotate(90%2012%2012)'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",IS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='480'%20height='480'%3e%3cpath%20d='M18%202%20A%203%203%200%200%200%2015%205%20A%203%203%200%200%200%2015.054688%205.5605469L7.9394531%209.7109375%20A%203%203%200%200%200%206%209%20A%203%203%200%200%200%203%2012%20A%203%203%200%200%200%206%2015%20A%203%203%200%200%200%207.9355469%2014.287109L15.054688%2018.439453%20A%203%203%200%200%200%2015%2019%20A%203%203%200%200%200%2018%2022%20A%203%203%200%200%200%2021%2019%20A%203%203%200%200%200%2018%2016%20A%203%203%200%200%200%2016.0625%2016.712891L8.9453125%2012.560547%20A%203%203%200%200%200%209%2012%20A%203%203%200%200%200%208.9453125%2011.439453L16.060547%207.2890625%20A%203%203%200%200%200%2018%208%20A%203%203%200%200%200%2021%205%20A%203%203%200%200%200%2018%202%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",SS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%208C7.664063%208%201.25%2015.34375%201.25%2015.34375L0.65625%2016L1.25%2016.65625C1.25%2016.65625%207.097656%2023.324219%2014.875%2023.9375C15.246094%2023.984375%2015.617188%2024%2016%2024C16.382813%2024%2016.753906%2023.984375%2017.125%2023.9375C24.902344%2023.324219%2030.75%2016.65625%2030.75%2016.65625L31.34375%2016L30.75%2015.34375C30.75%2015.34375%2024.335938%208%2016%208%20Z%20M%2016%2010C18.203125%2010%2020.234375%2010.601563%2022%2011.40625C22.636719%2012.460938%2023%2013.675781%2023%2015C23%2018.613281%2020.289063%2021.582031%2016.78125%2021.96875C16.761719%2021.972656%2016.738281%2021.964844%2016.71875%2021.96875C16.480469%2021.980469%2016.242188%2022%2016%2022C15.734375%2022%2015.476563%2021.984375%2015.21875%2021.96875C11.710938%2021.582031%209%2018.613281%209%2015C9%2013.695313%209.351563%2012.480469%209.96875%2011.4375L9.9375%2011.4375C11.71875%2010.617188%2013.773438%2010%2016%2010%20Z%20M%2016%2012C14.34375%2012%2013%2013.34375%2013%2015C13%2016.65625%2014.34375%2018%2016%2018C17.65625%2018%2019%2016.65625%2019%2015C19%2013.34375%2017.65625%2012%2016%2012%20Z%20M%207.25%2012.9375C7.09375%2013.609375%207%2014.285156%207%2015C7%2016.753906%207.5%2018.394531%208.375%2019.78125C5.855469%2018.324219%204.105469%2016.585938%203.53125%2016C4.011719%2015.507813%205.351563%2014.203125%207.25%2012.9375%20Z%20M%2024.75%2012.9375C26.648438%2014.203125%2027.988281%2015.507813%2028.46875%2016C27.894531%2016.585938%2026.144531%2018.324219%2023.625%2019.78125C24.5%2018.394531%2025%2016.753906%2025%2015C25%2014.285156%2024.90625%2013.601563%2024.75%2012.9375Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",AS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M11.5%206C8.4802259%206%206%208.4802259%206%2011.5L6%2017.5%20A%201.50015%201.50015%200%201%200%209%2017.5L9%2011.5C9%2010.101774%2010.101774%209%2011.5%209L17.5%209%20A%201.50015%201.50015%200%201%200%2017.5%206L11.5%206%20z%20M%2030.5%206%20A%201.50015%201.50015%200%201%200%2030.5%209L36.5%209C37.898226%209%2039%2010.101774%2039%2011.5L39%2017.5%20A%201.50015%201.50015%200%201%200%2042%2017.5L42%2011.5C42%208.4802259%2039.519774%206%2036.5%206L30.5%206%20z%20M%207.4765625%2028.978516%20A%201.50015%201.50015%200%200%200%206%2030.5L6%2036.5C6%2039.519774%208.4802259%2042%2011.5%2042L17.5%2042%20A%201.50015%201.50015%200%201%200%2017.5%2039L11.5%2039C10.101774%2039%209%2037.898226%209%2036.5L9%2030.5%20A%201.50015%201.50015%200%200%200%207.4765625%2028.978516%20z%20M%2040.476562%2028.978516%20A%201.50015%201.50015%200%200%200%2039%2030.5L39%2036.5C39%2037.898226%2037.898226%2039%2036.5%2039L30.5%2039%20A%201.50015%201.50015%200%201%200%2030.5%2042L36.5%2042C39.519774%2042%2042%2039.519774%2042%2036.5L42%2030.5%20A%201.50015%201.50015%200%200%200%2040.476562%2028.978516%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",RS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M19%203C13.488281%203%209%207.488281%209%2013C9%2015.394531%209.839844%2017.589844%2011.25%2019.3125L3.28125%2027.28125L4.71875%2028.71875L12.6875%2020.75C14.410156%2022.160156%2016.605469%2023%2019%2023C24.511719%2023%2029%2018.511719%2029%2013C29%207.488281%2024.511719%203%2019%203%20Z%20M%2019%205C23.429688%205%2027%208.570313%2027%2013C27%2017.429688%2023.429688%2021%2019%2021C14.570313%2021%2011%2017.429688%2011%2013C11%208.570313%2014.570313%205%2019%205Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",NS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M9%202C5.1458514%202%202%205.1458514%202%209C2%2012.854149%205.1458514%2016%209%2016C10.747998%2016%2012.345009%2015.348024%2013.574219%2014.28125L14%2014.707031L14%2016L19.585938%2021.585938C20.137937%2022.137937%2021.033938%2022.137938%2021.585938%2021.585938C22.137938%2021.033938%2022.137938%2020.137938%2021.585938%2019.585938L16%2014L14.707031%2014L14.28125%2013.574219C15.348024%2012.345009%2016%2010.747998%2016%209C16%205.1458514%2012.854149%202%209%202%20z%20M%209%204C11.773268%204%2014%206.2267316%2014%209C14%2011.773268%2011.773268%2014%209%2014C6.2267316%2014%204%2011.773268%204%209C4%206.2267316%206.2267316%204%209%204%20z'%20fill='%23F0F0F0'%20/%3e%3c/svg%3e",kS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%20width='500'%20height='500'%3e%3cpath%20d='M9.15625%206.3125L6.3125%209.15625L22.15625%2025L6.21875%2040.96875L9.03125%2043.78125L25%2027.84375L40.9375%2043.78125L43.78125%2040.9375L27.84375%2025L43.6875%209.15625L40.84375%206.3125L25%2022.15625Z'%20fill='%23313131'%20/%3e%3c/svg%3e",PS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M18.5%205C15.480226%205%2013%207.4802259%2013%2010.5L13%2032.5C13%2035.519774%2015.480226%2038%2018.5%2038L34.5%2038C37.519774%2038%2040%2035.519774%2040%2032.5L40%2010.5C40%207.4802259%2037.519774%205%2034.5%205L18.5%205%20z%20M%2018.5%208L34.5%208C35.898226%208%2037%209.1017741%2037%2010.5L37%2032.5C37%2033.898226%2035.898226%2035%2034.5%2035L18.5%2035C17.101774%2035%2016%2033.898226%2016%2032.5L16%2010.5C16%209.1017741%2017.101774%208%2018.5%208%20z%20M%2011%2010L9.78125%2010.8125C8.66825%2011.5545%208%2012.803625%208%2014.140625L8%2033.5C8%2038.747%2012.253%2043%2017.5%2043L30.859375%2043C32.197375%2043%2033.4465%2042.33175%2034.1875%2041.21875L35%2040L17.5%2040C13.91%2040%2011%2037.09%2011%2033.5L11%2010%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",LS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='480'%20height='480'%20viewBox='0%200%2048%2048'%3e%3cpath%20fill='%23FFC107'%20d='M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z'%20/%3e%3cpath%20fill='%23FF3D00'%20d='M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z'%20/%3e%3cpath%20fill='%234CAF50'%20d='M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z'%20/%3e%3cpath%20fill='%231976D2'%20d='M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z'%20/%3e%3c/svg%3e",bS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%204C10.886719%204%206.617188%207.160156%204.875%2011.625L6.71875%2012.375C8.175781%208.640625%2011.710938%206%2016%206C19.242188%206%2022.132813%207.589844%2023.9375%2010L20%2010L20%2012L27%2012L27%205L25%205L25%208.09375C22.808594%205.582031%2019.570313%204%2016%204%20Z%20M%2025.28125%2019.625C23.824219%2023.359375%2020.289063%2026%2016%2026C12.722656%2026%209.84375%2024.386719%208.03125%2022L12%2022L12%2020L5%2020L5%2027L7%2027L7%2023.90625C9.1875%2026.386719%2012.394531%2028%2016%2028C21.113281%2028%2025.382813%2024.839844%2027.125%2020.375Z'%20fill='%23313131'%20/%3e%3c/svg%3e",DS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2026%2026'%20width='208'%20height='208'%3e%3cpath%20d='M6%200C4.34375%200%203%201.34375%203%203L3%2023C3%2024.65625%204.34375%2026%206%2026L20%2026C21.65625%2026%2023%2024.65625%2023%2023L23%2017.8125L21%2019.5625L21%2023C21%2023.550781%2020.550781%2024%2020%2024L6%2024C5.449219%2024%205%2023.550781%205%2023L5%203C5%202.449219%205.449219%202%206%202L20%202C20.550781%202%2021%202.449219%2021%203L21%206.4375L23%208.1875L23%203C23%201.34375%2021.65625%200%2020%200%20Z%20M%2016.5%206.46875C16.25%206.542969%2016%206.796875%2016%207.46875L16%2010L10%2010C9.449219%2010%209%2010.449219%209%2011L9%2015C9%2015.550781%209.449219%2016%2010%2016L16%2016L16%2018.5C16%2019.78125%2017%2019.5%2017%2019.5L24.5%2013L17%206.5C17%206.5%2016.75%206.394531%2016.5%206.46875Z'%20fill='%23313131'%20/%3e%3c/svg%3e",OS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M12.5%204C10.032499%204%208%206.0324991%208%208.5L8%2039.5C8%2041.967501%2010.032499%2044%2012.5%2044L35.5%2044C37.967501%2044%2040%2041.967501%2040%2039.5L40%2018.5%20A%201.50015%201.50015%200%200%200%2039.560547%2017.439453L39.544922%2017.423828L26.560547%204.4394531%20A%201.50015%201.50015%200%200%200%2025.5%204L12.5%204%20z%20M%2012.5%207L24%207L24%2015.5C24%2017.967501%2026.032499%2020%2028.5%2020L37%2020L37%2039.5C37%2040.346499%2036.346499%2041%2035.5%2041L12.5%2041C11.653501%2041%2011%2040.346499%2011%2039.5L11%208.5C11%207.6535009%2011.653501%207%2012.5%207%20z%20M%2027%209.1210938L34.878906%2017L28.5%2017C27.653501%2017%2027%2016.346499%2027%2015.5L27%209.1210938%20z%20M%2019%2022.998047C18.391%2022.998047%2017.841328%2023.365687%2017.611328%2023.929688L13.111328%2034.929688C12.797328%2035.696688%2013.164641%2036.573719%2013.931641%2036.886719C14.698641%2037.202719%2015.575672%2036.834406%2015.888672%2036.066406L16.326172%2034.998047L21.673828%2034.998047L22.111328%2036.066406C22.349328%2036.647406%2022.909%2036.998047%2023.5%2036.998047C23.689%2036.998047%2023.881359%2036.963719%2024.068359%2036.886719C24.834359%2036.573719%2025.202672%2035.696688%2024.888672%2034.929688L20.388672%2023.929688C20.158672%2023.365688%2019.609%2022.998047%2019%2022.998047%20z%20M%2030.476562%2023.978516%20A%201.50015%201.50015%200%200%200%2029%2025.5L29%2027L27.5%2027%20A%201.50015%201.50015%200%201%200%2027.5%2030L29%2030L29%2031.5%20A%201.50015%201.50015%200%201%200%2032%2031.5L32%2030L33.5%2030%20A%201.50015%201.50015%200%201%200%2033.5%2027L32%2027L32%2025.5%20A%201.50015%201.50015%200%200%200%2030.476562%2023.978516%20z%20M%2019%2028.460938L20.447266%2031.998047L17.552734%2031.998047L19%2028.460938%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",MS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M26.886719%203.0234375C26.437415%203.0492805%2025.990861%203.1581308%2025.574219%203.3847656C24.740935%203.8380352%2024.23601%204.6408958%2023.933594%205.484375%20A%201.50015%201.50015%200%200%200%2023.931641%205.4863281C23.856851%205.6965582%2023.895729%205.5996163%2023.880859%205.6503906C23.865989%205.7011646%2023.846326%205.768146%2023.822266%205.8515625C23.774136%206.0183955%2023.709041%206.2482122%2023.630859%206.5214844C23.474496%207.0680287%2023.269926%207.787416%2023.066406%208.5019531C22.659368%209.9310274%2022.255859%2011.345703%2022.255859%2011.345703%20A%201.50015%201.50015%200%200%200%2022.255859%2011.349609C22.141471%2011.755416%2022.046189%2011.970637%2022.005859%2012.033203%20A%201.50015%201.50015%200%200%200%2022.003906%2012.037109C20.528039%2014.338252%2018.938262%2016.655605%2017.394531%2019L10.5%2019C8.0324991%2019%206%2021.032499%206%2023.5L6%2039.5C6%2041.967501%208.0324991%2044%2010.5%2044L14.5%2044C15.757335%2044%2016.892811%2043.465209%2017.712891%2042.621094C20.020827%2043.120886%2022.596814%2043.674636%2024.695312%2044.117188C25.795053%2044.349109%2026.761579%2044.550006%2027.490234%2044.697266C28.21796%2044.844337%2028.488997%2044.922925%2028.96875%2044.96875C29.276882%2044.99849%2029.582707%2045.013672%2029.884766%2045.013672C34.166546%2045.013672%2037.951276%2042.101357%2039.046875%2037.871094C39.884581%2034.63323%2041.600002%2027.921603%2041.607422%2027.892578C41.746989%2027.37849%2041.941717%2026.687301%2041.986328%2025.859375%20A%201.50015%201.50015%200%200%200%2041.986328%2025.857422C42.082078%2024.068723%2041.461123%2022.328247%2040.242188%2021.039062%20A%201.50015%201.50015%200%200%200%2040.242188%2021.037109C39.003328%2019.728222%2037.266509%2019.003801%2035.439453%2019%20A%201.50015%201.50015%200%200%200%2035.435547%2019L31.466797%2019C31.818422%2017.742495%2032.16537%2016.527227%2032.417969%2015.541016%20A%201.50015%201.50015%200%200%200%2032.417969%2015.539062C33.021899%2013.169223%2033.163006%2011.052777%2032.796875%209.0214844%20A%201.50015%201.50015%200%200%200%2032.796875%209.0195312C32.612962%208.0064557%2032.266053%206.5283049%2031.216797%205.1679688C30.454227%204.1798868%2029.406708%203.4604803%2028.21875%203.1621094%20A%201.50015%201.50015%200%200%200%2028.214844%203.1621094C27.787706%203.0556602%2027.336023%202.9975943%2026.886719%203.0234375%20z%20M%2027.083984%206.0097656C27.153229%206.0089389%2027.277677%206.0200946%2027.488281%206.0722656C28.020323%206.2058951%2028.434367%206.4720819%2028.841797%207C29.43854%207.7736637%2029.69161%208.705806%2029.845703%209.5546875C30.125167%2011.106826%2030.039576%2012.7275%2029.511719%2014.798828C29.151131%2016.206389%2028.056641%2020.09375%2028.056641%2020.09375%20A%201.50015%201.50015%200%200%200%2029.5%2022L35.435547%2022C36.491612%2022.0027%2037.39379%2022.393048%2038.0625%2023.099609C38.717564%2023.792425%2039.04448%2024.683965%2038.990234%2025.697266C38.966844%2026.13134%2038.851324%2026.59751%2038.712891%2027.107422%20A%201.50015%201.50015%200%200%200%2038.707031%2027.128906C38.707031%2027.128906%2036.979062%2033.886003%2036.142578%2037.119141C35.380177%2040.062877%2032.818985%2042.013672%2029.884766%2042.013672C29.676824%2042.013672%2029.467681%2042.002682%2029.257812%2041.982422%20A%201.50015%201.50015%200%200%200%2029.255859%2041.982422C29.484761%2042.004222%2028.797548%2041.902023%2028.083984%2041.757812C27.370421%2041.613604%2026.409589%2041.412593%2025.314453%2041.181641C23.401221%2040.778161%2021.082509%2040.278628%2018.935547%2039.814453C18.94375%2039.705129%2019%2039.611242%2019%2039.5L19%2022.011719C20.770748%2019.246238%2022.705347%2016.498683%2024.527344%2013.658203L24.529297%2013.65625C24.857875%2013.14567%2025.005183%2012.649533%2025.142578%2012.162109C25.143578%2012.158509%2025.544977%2010.748377%2025.951172%209.3222656C26.154528%208.6083028%2026.357942%207.891987%2026.513672%207.3476562C26.591532%207.0754909%2026.658135%206.8463076%2026.705078%206.6835938C26.728548%206.6022368%2026.746996%206.5377315%2026.759766%206.4941406C26.916091%206.0606215%2027.022027%206.0117998%2027.007812%206.0195312C27.000698%206.0234013%2027.014739%206.0105924%2027.083984%206.0097656%20z%20M%2010.5%2022L16%2022L16%2039.5C16%2040.346499%2015.346499%2041%2014.5%2041L10.5%2041C9.6535009%2041%209%2040.346499%209%2039.5L9%2023.5C9%2022.653501%209.6535009%2022%2010.5%2022%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",jS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M11.677734%202.1816406C11.255625%202.2202656%2010.879797%202.5279063%2010.779297%202.9726562L10.224609%205.4179688L7.5136719%208.4296875C7.1826719%208.7966875%207%209.2735781%207%209.7675781L7%2019C7%2020.105%207.895%2021%209%2021L17.03125%2021C17.77225%2021%2018.443141%2020.563719%2018.744141%2019.886719L21.746094%2013.130859C21.913094%2012.756859%2022%2012.351406%2022%2011.941406L22%2011C22%209.9%2021.1%209%2020%209L13%209C13%209%2014%206.6292813%2014%204.8632812C14%203.2502813%2012.962422%202.5443281%2012.107422%202.2363281C11.964672%202.1845781%2011.818437%202.1687656%2011.677734%202.1816406%20z%20M%203.5%209C2.672%209%202%209.672%202%2010.5L2%2019.5C2%2020.328%202.672%2021%203.5%2021C4.328%2021%205%2020.328%205%2019.5L5%2010.5C5%209.672%204.328%209%203.5%209%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",VS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M10.5%207C6.9280619%207%204%209.9280619%204%2013.5L4%2030.5C4%2034.071938%206.9280619%2037%2010.5%2037L12%2037L12%2042.5C12%2044.46599%2014.427297%2045.67893%2016%2044.5L26%2037L37.5%2037C41.071938%2037%2044%2034.071938%2044%2030.5L44%2013.5C44%209.9280619%2041.071938%207%2037.5%207L10.5%207%20z%20M%2010.5%2010L37.5%2010C39.450062%2010%2041%2011.549938%2041%2013.5L41%2030.5C41%2032.450062%2039.450062%2034%2037.5%2034L25.5%2034%20A%201.50015%201.50015%200%200%200%2024.599609%2034.300781L15%2041.5L15%2035.5%20A%201.50015%201.50015%200%200%200%2013.5%2034L10.5%2034C8.5499381%2034%207%2032.450062%207%2030.5L7%2013.5C7%2011.549938%208.5499381%2010%2010.5%2010%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",FS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M26%203%20A%201%201%200%200%200%2025.716797%203.0429688%20A%201%201%200%200%200%2025.636719%203.0683594L3.6503906%2010.060547L3.6503906%2010.064453%20A%201%201%200%200%200%203%2011%20A%201%201%200%200%200%203.4824219%2011.853516L10.164062%2017.154297L23.373047%206.6269531L12.845703%2019.835938L18.142578%2026.513672%20A%201%201%200%200%200%2019%2027%20A%201%201%200%200%200%2019.935547%2026.349609L19.939453%2026.349609L26.9375%204.34375%20A%201%201%200%200%200%2026.957031%204.2832031%20A%201%201%200%200%200%2027%204%20A%201%201%200%200%200%2026%203%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",US="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='480'%20height='480'%3e%3cpath%20d='M6%202C4.897%202%204%202.897%204%204L4%2020C4%2021.103%204.897%2022%206%2022L18%2022C19.103%2022%2020%2021.103%2020%2020L20%2015.25L18.001953%2016.748047L18.001953%2020L6%2020L6%204L18%204L18%207.25L20%208.75L20%204C20%202.897%2019.103%202%2018%202L6%202%20z%20M%2016%208.25L16%2011L11%2011L11%2013L16%2013L16%2015.75L21%2012L16%208.25%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",$S="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M12%203%20A%204%204%200%200%200%208%207%20A%204%204%200%200%200%2012%2011%20A%204%204%200%200%200%2016%207%20A%204%204%200%200%200%2012%203%20z%20M%2012%2014C8.996%2014%203%2015.508%203%2018.5L3%2020C3%2020.552%203.448%2021%204%2021L20%2021C20.552%2021%2021%2020.552%2021%2020L21%2018.5C21%2015.508%2015.004%2014%2012%2014%20z'%20/%3e%3c/svg%3e",zS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M17,18H4c-1.105,0-2-0.895-2-2V6c0-1.105,0.895-2,2-2h13c1.105,0,2,0.895,2,2v10C19,17.105,18.105,18,17,18z'%20opacity='.35'%20/%3e%3ccircle%20cx='14.5'%20cy='7.5'%20r='1.5'%20/%3e%3cpath%20d='M4,15.125C4,15.604,4.364,16,4.812,16h11.375C16.636,16,17,15.611,17,15.125C17,13.932,15.829,12,14.969,12%20c-0.896,0-1.383,1.001-2.969,1.001C10.015,13.001,8.875,9,7.25,9S4,12.817,4,15.125z'%20/%3e%3cpath%20d='M20,6h-1v10c0,1.105-0.895,2-2,2H5c0,1.105,0.895,2,2,2h13c1.105,0,2-0.895,2-2V8C22,6.895,21.105,6,20,6z'%20/%3e%3c/svg%3e",BS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M14,15.5V8h3l-5-5L7,8h3v7.5c0,0.3,0.2,0.5,0.5,0.5h3C13.8,16,14,15.8,14,15.5z'%20opacity='.3'%20/%3e%3cpath%20d='M2%2020H22V22H2zM13.5%2017h-3C9.7%2017%209%2016.3%209%2015.5V9H4.6L12%201.6%2019.4%209H15v6.5C15%2016.3%2014.3%2017%2013.5%2017zM11%2015h2V7h1.6L12%204.4%209.4%207H11V15z'%20/%3e%3c/svg%3e",WS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M14.984375%200.98632812%20A%201.0001%201.0001%200%200%200%2014%202L14%205%20A%201.0001%201.0001%200%201%200%2016%205L16%202%20A%201.0001%201.0001%200%200%200%2014.984375%200.98632812%20z%20M%205.796875%204.7988281%20A%201.0001%201.0001%200%200%200%205.1015625%206.515625L7.2226562%208.6367188%20A%201.0001%201.0001%200%201%200%208.6367188%207.2226562L6.515625%205.1015625%20A%201.0001%201.0001%200%200%200%205.796875%204.7988281%20z%20M%2024.171875%204.7988281%20A%201.0001%201.0001%200%200%200%2023.484375%205.1015625L21.363281%207.2226562%20A%201.0001%201.0001%200%201%200%2022.777344%208.6367188L24.898438%206.515625%20A%201.0001%201.0001%200%200%200%2024.171875%204.7988281%20z%20M%2015%208%20A%207%207%200%200%200%208%2015%20A%207%207%200%200%200%2015%2022%20A%207%207%200%200%200%2022%2015%20A%207%207%200%200%200%2015%208%20z%20M%202%2014%20A%201.0001%201.0001%200%201%200%202%2016L5%2016%20A%201.0001%201.0001%200%201%200%205%2014L2%2014%20z%20M%2025%2014%20A%201.0001%201.0001%200%201%200%2025%2016L28%2016%20A%201.0001%201.0001%200%201%200%2028%2014L25%2014%20z%20M%207.9101562%2021.060547%20A%201.0001%201.0001%200%200%200%207.2226562%2021.363281L5.1015625%2023.484375%20A%201.0001%201.0001%200%201%200%206.515625%2024.898438L8.6367188%2022.777344%20A%201.0001%201.0001%200%200%200%207.9101562%2021.060547%20z%20M%2022.060547%2021.060547%20A%201.0001%201.0001%200%200%200%2021.363281%2022.777344L23.484375%2024.898438%20A%201.0001%201.0001%200%201%200%2024.898438%2023.484375L22.777344%2021.363281%20A%201.0001%201.0001%200%200%200%2022.060547%2021.060547%20z%20M%2014.984375%2023.986328%20A%201.0001%201.0001%200%200%200%2014%2025L14%2028%20A%201.0001%201.0001%200%201%200%2016%2028L16%2025%20A%201.0001%201.0001%200%200%200%2014.984375%2023.986328%20z'%20/%3e%3c/svg%3e",HS="/assets/dark-i8sdGySW.svg",qS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M12%2018.071L6.429%2012.5%204.929%2014%2012%2021.071%2019.071%2014%2017.571%2012.5z'%20/%3e%3cpath%20d='M4%2010H20V12H4z'%20transform='rotate(-90%2012%2011)'%20/%3e%3c/svg%3e",GS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M4,19V5c0-1.657,1.343-3,3-3h7l6,6v11c0,1.657-1.343,3-3,3H7C5.343,22,4,20.657,4,19z'%20opacity='.35'%20/%3e%3cpath%20d='M14,6V2l6,6h-4C14.895,8,14,7.105,14,6z'%20/%3e%3c/svg%3e",KS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M23.277344%204.0175781C15.193866%204.3983176%209%2011.343391%209%2019.380859L9%2026.648438L6.3496094%2031.980469%20A%201.50015%201.50015%200%200%200%206.3359375%2032.009766C5.2696804%2034.277268%206.9957076%2037%209.5019531%2037L18%2037C18%2040.295865%2020.704135%2043%2024%2043C27.295865%2043%2030%2040.295865%2030%2037L38.496094%2037C41.002339%2037%2042.730582%2034.277829%2041.664062%2032.009766%20A%201.50015%201.50015%200%200%200%2041.650391%2031.980469L39%2026.648438L39%2019C39%2010.493798%2031.863289%203.6133643%2023.277344%204.0175781%20z%20M%2023.417969%207.0136719C30.338024%206.6878857%2036%2012.162202%2036%2019L36%2027%20A%201.50015%201.50015%200%200%200%2036.15625%2027.667969L38.949219%2033.289062C39.128826%2033.674017%2038.921017%2034%2038.496094%2034L9.5019531%2034C9.077027%2034%208.8709034%2033.674574%209.0507812%2033.289062C9.0507812%2033.289062%209.0507812%2033.287109%209.0507812%2033.287109L11.84375%2027.667969%20A%201.50015%201.50015%200%200%200%2012%2027L12%2019.380859C12%2012.880328%2016.979446%207.3169324%2023.417969%207.0136719%20z%20M%2021%2037L27%2037C27%2038.674135%2025.674135%2040%2024%2040C22.325865%2040%2021%2038.674135%2021%2037%20z'%20/%3e%3c/svg%3e",QS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M10.5%206C6.9280619%206%204%208.9280619%204%2012.5L4%2028.5L4%2034.535156C4%2036.486795%206.3899087%2037.705105%207.96875%2036.558594%20A%201.50015%201.50015%200%200%200%207.9707031%2036.558594L12.291016%2033.416016C13.114957%2036.061625%2015.594339%2038%2018.5%2038L31.011719%2038L40.029297%2044.558594%20A%201.50015%201.50015%200%200%200%2040.03125%2044.558594C41.610044%2045.705105%2044%2044.486795%2044%2042.535156L44%2036.5L44%2020.5C44%2016.928062%2041.071938%2014%2037.5%2014L36%2014L36%2012.5C36%208.9280619%2033.071938%206%2029.5%206L10.5%206%20z%20M%2010.5%209L29.5%209C31.450062%209%2033%2010.549938%2033%2012.5L33%2023.5C33%2025.450062%2031.450062%2027%2029.5%2027L16.5%2027%20A%201.50015%201.50015%200%200%200%2015.617188%2027.287109L7%2033.554688L7%2028.5L7%2012.5C7%2010.549938%208.5499381%209%2010.5%209%20z%20M%2036%2017L37.5%2017C39.450062%2017%2041%2018.549938%2041%2020.5L41%2036.5L41%2041.554688L32.382812%2035.287109%20A%201.50015%201.50015%200%200%200%2031.5%2035L18.5%2035C16.549938%2035%2015%2033.450062%2015%2031.5L15%2031.445312L16.988281%2030L29.5%2030C33.071938%2030%2036%2027.071938%2036%2023.5L36%2017%20z'%20/%3e%3c/svg%3e",YS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2026%2026'%20width='208'%20height='208'%3e%3cpath%20d='M5%201L10.3125%2011L4%2011L1%207L0%207L1%2013L0%2019L1%2019L4%2015L10.3125%2015L5%2025L7.1875%2025L15.90625%2015L24%2015C25.101563%2015%2026%2014.101563%2026%2013C26%2011.898438%2025.101563%2011%2024%2011L15.90625%2011L7.1875%201Z'%20/%3e%3c/svg%3e",XS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M5.40625%205.40625C-0.441406%2011.253906%20-0.441406%2020.746094%205.40625%2026.59375L6.8125%2025.1875C1.726563%2020.101563%201.726563%2011.898438%206.8125%206.8125%20Z%20M%2026.59375%205.40625L25.1875%206.8125C30.273438%2011.898438%2030.273438%2020.101563%2025.1875%2025.1875L26.59375%2026.59375C32.441406%2020.746094%2032.441406%2011.253906%2026.59375%205.40625%20Z%20M%209.625%209.625C6.117188%2013.132813%206.117188%2018.867188%209.625%2022.375L11.0625%2020.9375C8.320313%2018.195313%208.320313%2013.804688%2011.0625%2011.0625%20Z%20M%2022.375%209.625L20.9375%2011.0625C23.679688%2013.804688%2023.679688%2018.195313%2020.9375%2020.9375L22.375%2022.375C25.882813%2018.867188%2025.882813%2013.132813%2022.375%209.625%20Z%20M%2016%2013C14.355469%2013%2013%2014.355469%2013%2016C13%2017.644531%2014.355469%2019%2016%2019C17.644531%2019%2019%2017.644531%2019%2016C19%2014.355469%2017.644531%2013%2016%2013%20Z%20M%2016%2015C16.5625%2015%2017%2015.4375%2017%2016C17%2016.5625%2016.5625%2017%2016%2017C15.4375%2017%2015%2016.5625%2015%2016C15%2015.4375%2015.4375%2015%2016%2015Z'%20/%3e%3c/svg%3e",JS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='240'%20height='240'%3e%3clinearGradient%20id='SO5UwR~UHtGc~sBTMNyFWa'%20x1='21.302'%20x2='27.254'%20y1='21.302'%20y2='27.254'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0'%20stop-color='%2332bdef'%20/%3e%3cstop%20offset='1'%20stop-color='%231ea2e4'%20/%3e%3c/linearGradient%3e%3ccircle%20cx='24'%20cy='24'%20r='4'%20fill='url(%23SO5UwR~UHtGc~sBTMNyFWa)'%20/%3e%3clinearGradient%20id='SO5UwR~UHtGc~sBTMNyFWb'%20x1='21.302'%20x2='27.254'%20y1='7.302'%20y2='13.254'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0'%20stop-color='%2332bdef'%20/%3e%3cstop%20offset='1'%20stop-color='%231ea2e4'%20/%3e%3c/linearGradient%3e%3ccircle%20cx='24'%20cy='10'%20r='4'%20fill='url(%23SO5UwR~UHtGc~sBTMNyFWb)'%20/%3e%3clinearGradient%20id='SO5UwR~UHtGc~sBTMNyFWc'%20x1='21.302'%20x2='27.254'%20y1='35.302'%20y2='41.254'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0'%20stop-color='%2332bdef'%20/%3e%3cstop%20offset='1'%20stop-color='%231ea2e4'%20/%3e%3c/linearGradient%3e%3ccircle%20cx='24'%20cy='38'%20r='4'%20fill='url(%23SO5UwR~UHtGc~sBTMNyFWc)'%20/%3e%3c/svg%3e",ZS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M10%202L9%203L4%203L4%205L20%205L20%203L15%203L14%202L10%202%20z%20M%205%207L5%2022L14.220703%2022L16.230469%2020L14%2020L14%209L16%209L16%2015.978516L16.464844%2015.515625L17.878906%2014.101562L19%2015.222656L19%207L5%207%20z%20M%208%209L10%209L10%2020L8%2020L8%209%20z%20M%2017.878906%2016.929688L16.464844%2018.34375L18.585938%2020.464844L16.464844%2022.585938L17.878906%2024L20%2021.878906L22.121094%2024L23.535156%2022.585938L21.414062%2020.464844L23.535156%2018.34375L22.121094%2016.929688L20%2019.050781L17.878906%2016.929688%20z'%20/%3e%3c/svg%3e",e6="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M20.011,3.989c-1.318-1.318-3.455-1.318-4.773,0L4.208,14.998c-0.302,0.302-0.503,0.689-0.576,1.11l-0.615,3.567c-0.133,0.772,0.538,1.442,1.31,1.308l3.525-0.613c0.418-0.073,0.804-0.273,1.104-0.573L20.011,8.761C21.33,7.443,21.33,5.307,20.011,3.989z'%20opacity='.35'%20/%3e%3cpolygon%20points='13.075,6.144%2017.848,10.917%2019.832,8.94%2015.059,4.167'%20/%3e%3cpath%20d='M3.392,17.5l-0.375,2.175c-0.133,0.772,0.538,1.442,1.31,1.308l2.171-0.378L3.392,17.5z'%20/%3e%3c/svg%3e",t6="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M16.414,7.586c-0.781-0.781-2.047-0.781-2.828,0l-6,6c-0.781,0.781-0.781,2.047,0,2.828c0.781,0.781,2.047,0.781,2.828,0l6-6C17.195,9.633,17.195,8.367,16.414,7.586z'%20/%3e%3cpath%20d='M20.389,3.611c-2.148-2.148-5.63-2.148-7.778,0c-0.171,0.171-0.829,0.829-1,1c-1.548,1.548-1.963,3.786-1.279,5.722%20c-1.936-0.684-4.173-0.27-5.721,1.278c-0.171,0.171-0.829,0.829-1,1c-2.148,2.148-2.148,5.63,0,7.778%20c2.148,2.148,5.63,2.148,7.778,0c0.171-0.171,0.829-0.829,1-1c1.548-1.548,1.963-3.786,1.279-5.722%20c1.936,0.684,4.173,0.27,5.721-1.278c0.171-0.171,0.829-0.829,1-1C22.537,9.241,22.537,5.759,20.389,3.611z'%20opacity='.35'%20/%3e%3c/svg%3e",n6="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M15,3C8.373,3,3,8.373,3,15c0,6.627,5.373,12,12,12s12-5.373,12-12C27,8.373,21.627,3,15,3z%20M19.707,13.707%20C19.511,13.903,19.255,14,18.999,14H16v7c0,0.552-0.447,1-1,1s-1-0.448-1-1v-7h-2.999c-0.256,0-0.512-0.097-0.708-0.293%20c-0.391-0.391-0.391-1.023,0-1.414l4-4C14.488,8.098,14.744,8,15,8s0.512,0.098,0.707,0.293l4,4%20C20.098,12.684,20.098,13.316,19.707,13.707z'%20/%3e%3c/svg%3e",r6="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M15,3C8.373,3,3,8.373,3,15c0,6.627,5.373,12,12,12s12-5.373,12-12C27,8.373,21.627,3,15,3z%20M19.707,13.707%20C19.511,13.903,19.255,14,18.999,14H16v7c0,0.552-0.447,1-1,1s-1-0.448-1-1v-7h-2.999c-0.256,0-0.512-0.097-0.708-0.293%20c-0.391-0.391-0.391-1.023,0-1.414l4-4C14.488,8.098,14.744,8,15,8s0.512,0.098,0.707,0.293l4,4%20C20.098,12.684,20.098,13.316,19.707,13.707z'%20fill='%238D8D8D'%20/%3e%3c/svg%3e",s6="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M19.999,3H4.01c-1.1,0-2.001,0.9-2.001,2L2,16.999C2,18.104,2.895,19,4,19h1.499c0.276,0,0.5,0.224,0.5,0.5v2.086%20c0,0.891,1.077,1.337,1.707,0.707l3-3C10.894,19.105,11.148,19,11.413,19h8.586c1.1,0,2-0.9,2-2V5C21.999,3.9,21.099,3,19.999,3z%20M15.903,15c-0.492,0-0.883-0.363-0.988-0.843C14.472,12.147,12.455,12.006,12,12V14c0,0.404-0.243,0.769-0.617,0.924%20C11.259,14.975,11.129,15,11,15c-0.26,0-0.516-0.102-0.707-0.293l-3-3c-0.391-0.391-0.391-1.023,0-1.414l3-3%20c0.286-0.286,0.715-0.371,1.09-0.217C11.757,7.231,12,7.595,12,8v2v0c1.535,0,4.284,0.823,4.883,3.773%20C17.011,14.403,16.545,15,15.903,15z'%20fill='%23050505'%20/%3e%3c/svg%3e",i6={link:t6,reply:s6,sendLetter:n6,sendingLetter:r6,deleteIcon:ZS,editPencil:e6,moreOption:JS,download:qS,offline:YS,online:XS,chat:QS,notification:KS,file:GS,light:WS,dark:HS,upload:BS,trueIcon:ZI,falseIcon:eS,error:tS,down:nS,back:rS,thumbUp:sS,redo:iS,next:oS,finish:aS,history:lS,trash:cS,add:uS,edit:hS,save:dS,up:fS,clipboard:pS,admin:mS,menu:gS,home:_S,result:vS,help:yS,about:wS,update:ES,faq:xS,plus:TS,minus:CS,share:IS,review:SS,fullScreen:AS,search:RS,searchLeft:NS,close:kS,copy:PS,google:LS,refresh:bS,exit:DS,exam:OS,like:MS,liked:jS,comment:VS,send:FS,logout:US,user:$S,image:zS};function J(t){return i6[t]||null}const me=({data:t})=>{const{clickFn:e,image:n}=t,r=J(n),{theme:s}=_.useContext(V),i=()=>{e&&e()};return u.jsx("button",{onClick:i,className:`shadow-md border  rounded-full p-2 h-10 w-10  font-medium flex  justify-center items-center hover:opacity-70 transition-all ${s==="light"?"bg-gray-50/50 border-gray-200":"bg-slate-500/70 text-white border-slate-500/70"}`,children:u.jsx("img",{src:r})})};function o6(t,e){let n=!1;return e.forEach(r=>{r.id===t&&(n=!0)}),n}let O1;function a6(t){t(!0),clearTimeout(O1),O1=setTimeout(()=>{t(!1)},[4e3])}function Kt(){scrollTo({top:0,behavior:"smooth"})}function Aa(){const t=window.innerHeight,n=document.documentElement.scrollHeight-t;scrollTo({top:n+200,behavior:"smooth"})}function Xt(t){document.body.style.overflow=t}function li(t,e){_.useEffect(()=>{const n=r=>{t.current&&!t.current.contains(r.target)&&e(!1)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[])}function w3(t){try{const e=t.split(":"),n=Number(e[0]),r=Number(e[1]),s=Number(e[2]);return`${n0(n,"hours")} ${n0(r,"minutes")} ${n0(s,"seconds")}`}catch{return null}}function n0(t,e){return t?`${t} ${e}`:""}function M1(t){return t>=10?t:`0${t}`}const ue=({data:t})=>{const{clickFn:e,text:n,image:r}=t,s=J(r),{theme:i}=_.useContext(V),o=()=>{e&&e()};return u.jsxs("button",{onClick:o,className:`min-h-10 shadow-md hover:opacity-70 border  font-medium px-2 py-1 rounded-lg flex justify-center items-center gap-x-1 transition-all ${i==="light"?"bg-blue-200/60 border-gray-200":"bg-blue-200/60 text-white border-slate-500/70"}`,children:[r&&u.jsx("img",{className:" h-7",src:s}),n&&u.jsx("span",{children:n})]})},co=({data:t})=>{const{yesButton:e,noButton:n,text:r,setValue:s}=t,{theme:i}=_.useContext(V),o=_.useRef(null);return li(o,s),_.useEffect(()=>(Xt("hidden"),()=>{Xt("auto")}),[]),u.jsx("div",{className:"fixed flex items-center z-20 bg-black/60 justify-center top-0 left-0 right-0 bottom-0",children:u.jsx("div",{ref:o,className:`w-4/5 sm:w-3/5 md:w-2/5 min-h-40 grid gap-y-3 rounded-md items-center border  ${i==="light"?"border-gray-300 bg-white":"border-slate-500/70 text-white bg-slate-600"}`,children:u.jsxs("div",{children:[u.jsx("div",{className:"text-center",children:r}),u.jsxs("div",{className:"flex justify-center mt-2 items-center gap-x-3 ",children:[u.jsx(ue,{data:{clickFn:e,image:"trueIcon",text:"Yes"}}),u.jsx(ue,{data:{clickFn:n,image:"falseIcon",text:"No"}})]})]})})})},l6=({data:t})=>{const{pageTitle:e,currentPage:n,totalPage:r,percentage:s,answerLength:i,questionsLength:o}=t,{stopTest:a,formattedTime:l,theme:c}=_.useContext(V),[h,d]=_.useState(!1),f=()=>{a(),d(!1)},m=()=>{d(!1)};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:" font-medium text-lg flex items-center justify-start",children:[u.jsx(me,{data:{clickFn:()=>d(!0),image:"back"}}),u.jsx("div",{className:`ml-2 ${c==="light"?"":"text-white"}`,children:e}),h&&u.jsx(co,{data:{yesButton:f,noButton:m,text:"Are you sure to stop the test ?",setValue:d}})]}),u.jsxs("div",{className:`flex justify-between items-center sticky left-0 pt-1 right-0 z-10 ${c==="light"?"":"text-white"}`,children:[u.jsxs("div",{children:["Page ",n," of ",r]}),u.jsxs("div",{className:`w-2/3 border h-7 relative ${c==="light"?"border-gray-300":"border-slate-500/70"}`,children:[u.jsx("div",{style:{width:`${s}%`},className:`text-center h-full ${c==="light"?"bg-lime-200":"bg-slate-500/70"}`}),u.jsxs("div",{className:"absolute top-0 left-2 font-medium",children:[i," ","/"," ",o]})]}),u.jsx("div",{className:"min-h-12 font-medium fixed right-0 top-1/4 h-10 min-w-20 bg-lime-200/50 backdrop-blur-lg flex items-center justify-center rounded-bl-lg rounded-tl-lg border-r-4 border-r-blue-400",children:l})]})]})},c6=({data:t})=>{const{currentQuestions:e,chooseAnswer:n}=t,{answeredQuestions:r,theme:s}=_.useContext(V);return u.jsx("div",{children:e.map((i,o)=>u.jsxs("div",{children:[u.jsxs("div",{className:`grid gap-y-2 ${s==="light"?"":"text-white"}`,children:[u.jsxs("div",{className:"flex gap-x-3 items-center",children:[u.jsx("div",{className:"bg-blue-600 rounded-sm shadow-lg h-9 w-9 text-white font-bold flex justify-center items-center ",children:i.id}),u.jsx("div",{className:"flex-1 font-padauk",children:i.question})]}),u.jsx("div",{className:"grid gap-y-2",children:i.choices.map((a,l)=>{let c,h=!1;return r.forEach(d=>{i.id===d.id&&(c=d)}),(c==null?void 0:c.userAnswer)===a&&(h=!0),u.jsxs("div",{onClick:()=>{n(i.id,a)},className:`border  h-12 flex gap-x-3 p-2 cursor-pointer items-center rounded-lg font-padauk ${s==="light"?`${h?"border-blue-500 border-dotted font-bold bg-lime-50":"border-lime-200 hover:bg-slate-50"}`:`${h?"border-slate-500/70 border-dotted font-bold bg-slate-500/70":"border-slate-500/70 hover:bg-slate-500/70"}`}`,children:[u.jsx("input",{onChange:()=>{n(i.id,a)},className:"h-5 w-5",name:`question-${i.id}`,type:"radio",checked:!!h}),u.jsx("div",{children:a})]},`choice-${i.id}-${l}-${a}`)})})]}),u.jsx(u6,{})]},`question-${i.id}-${o}-${i.question}`))})},u6=()=>u.jsx("div",{className:" border border-dashed border-gray-500 mb-7 mt-7"}),h6=()=>(_.useContext(V),u.jsxs("div",{className:"flex gap-x-2 items-center",children:[u.jsx("img",{className:"w-8 ",src:J("error")}),u.jsx("div",{className:"text-red-600 font-bold",children:"You need to answer all questions before proceeding!"})]}));/**
 * @remix-run/router v1.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tl(){return tl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tl.apply(this,arguments)}var $r;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})($r||($r={}));const j1="popstate";function d6(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=ci(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Af("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Ru(i))}function r(s,i){Nh(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return p6(e,n,r,t)}function Be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Nh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function f6(){return Math.random().toString(36).substr(2,8)}function V1(t,e){return{usr:t.state,key:t.key,idx:e}}function Af(t,e,n,r){return n===void 0&&(n=null),tl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ci(e):e,{state:n,key:e&&e.key||r||f6()})}function Ru(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ci(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function p6(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=$r.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(tl({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=$r.Pop;let E=h(),p=E==null?null:E-c;c=E,l&&l({action:a,location:w.location,delta:p})}function f(E,p){a=$r.Push;let g=Af(w.location,E,p);n&&n(g,E),c=h()+1;let y=V1(g,c),x=w.createHref(g);try{o.pushState(y,"",x)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(x)}i&&l&&l({action:a,location:w.location,delta:1})}function m(E,p){a=$r.Replace;let g=Af(w.location,E,p);n&&n(g,E),c=h();let y=V1(g,c),x=w.createHref(g);o.replaceState(y,"",x),i&&l&&l({action:a,location:w.location,delta:0})}function v(E){let p=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof E=="string"?E:Ru(E);return Be(p,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,p)}let w={get action(){return a},get location(){return t(s,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(j1,d),l=E,()=>{s.removeEventListener(j1,d),l=null}},createHref(E){return e(s,E)},createURL:v,encodeLocation(E){let p=v(E);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:f,replace:m,go(E){return o.go(E)}};return w}var F1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(F1||(F1={}));function m6(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?ci(e):e,s=Ep(r.pathname||"/",n);if(s==null)return null;let i=E3(t);g6(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=I6(i[a],R6(s));return o}function E3(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Be(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Xr([r,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&(Be(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),E3(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:T6(c,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of x3(i.path))s(i,o,l)}),e}function x3(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=x3(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function g6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:C6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _6=/^:[\w-]+$/,v6=3,y6=2,w6=1,E6=10,x6=-2,U1=t=>t==="*";function T6(t,e){let n=t.split("/"),r=n.length;return n.some(U1)&&(r+=x6),e&&(r+=y6),n.filter(s=>!U1(s)).reduce((s,i)=>s+(_6.test(i)?v6:i===""?w6:E6),r)}function C6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function I6(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",h=S6({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!h)return null;Object.assign(r,h.params);let d=a.route;i.push({params:r,pathname:Xr([s,h.pathname]),pathnameBase:b6(Xr([s,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(s=Xr([s,h.pathnameBase]))}return i}function S6(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=A6(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:f,isOptional:m}=h;if(f==="*"){let w=a[d]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const v=a[d];return m&&!v?c[f]=void 0:c[f]=N6(v||"",f),c},{}),pathname:i,pathnameBase:o,pattern:t}}function A6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Nh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function R6(t){try{return decodeURI(t)}catch(e){return Nh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function N6(t,e){try{return decodeURIComponent(t)}catch(n){return Nh(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Ep(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function k6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ci(t):t;return{pathname:n?n.startsWith("/")?n:P6(n,e):e,search:D6(r),hash:O6(s)}}function P6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function r0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function L6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function T3(t,e){let n=L6(t);return e?n.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function C3(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ci(t):(s=tl({},t),Be(!s.pathname||!s.pathname.includes("?"),r0("?","pathname","search",s)),Be(!s.pathname||!s.pathname.includes("#"),r0("#","pathname","hash",s)),Be(!s.search||!s.search.includes("#"),r0("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=k6(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Xr=t=>t.join("/").replace(/\/\/+/g,"/"),b6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),D6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,O6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function M6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const I3=["post","put","patch","delete"];new Set(I3);const j6=["get",...I3];new Set(j6);/**
 * React Router v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nl(){return nl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nl.apply(this,arguments)}const xp=_.createContext(null),V6=_.createContext(null),ui=_.createContext(null),kh=_.createContext(null),fs=_.createContext({outlet:null,matches:[],isDataRoute:!1}),S3=_.createContext(null);function F6(t,e){let{relative:n}=e===void 0?{}:e;Pl()||Be(!1);let{basename:r,navigator:s}=_.useContext(ui),{hash:i,pathname:o,search:a}=R3(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Xr([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Pl(){return _.useContext(kh)!=null}function No(){return Pl()||Be(!1),_.useContext(kh).location}function A3(t){_.useContext(ui).static||_.useLayoutEffect(t)}function tn(){let{isDataRoute:t}=_.useContext(fs);return t?J6():U6()}function U6(){Pl()||Be(!1);let t=_.useContext(xp),{basename:e,future:n,navigator:r}=_.useContext(ui),{matches:s}=_.useContext(fs),{pathname:i}=No(),o=JSON.stringify(T3(s,n.v7_relativeSplatPath)),a=_.useRef(!1);return A3(()=>{a.current=!0}),_.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=C3(c,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Xr([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,i,t])}function Tp(){let{matches:t}=_.useContext(fs),e=t[t.length-1];return e?e.params:{}}function R3(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=_.useContext(ui),{matches:s}=_.useContext(fs),{pathname:i}=No(),o=JSON.stringify(T3(s,r.v7_relativeSplatPath));return _.useMemo(()=>C3(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function $6(t,e){return z6(t,e)}function z6(t,e,n,r){Pl()||Be(!1);let{navigator:s}=_.useContext(ui),{matches:i}=_.useContext(fs),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=No(),h;if(e){var d;let E=typeof e=="string"?ci(e):e;l==="/"||(d=E.pathname)!=null&&d.startsWith(l)||Be(!1),h=E}else h=c;let f=h.pathname||"/",m=l==="/"?f:f.slice(l.length)||"/",v=m6(t,{pathname:m}),w=G6(v&&v.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:Xr([l,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:Xr([l,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,n,r);return e&&w?_.createElement(kh.Provider,{value:{location:nl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:$r.Pop}},w):w}function B6(){let t=X6(),e=M6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:s},n):null,i)}const W6=_.createElement(B6,null);class H6 extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(fs.Provider,{value:this.props.routeContext},_.createElement(S3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function q6(t){let{routeContext:e,match:n,children:r}=t,s=_.useContext(xp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(fs.Provider,{value:e},r)}function G6(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));h>=0||Be(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:m}=n,v=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let m,v=!1,w=null,E=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||W6,l&&(c<0&&f===0?(Z6("route-fallback",!1),v=!0,E=null):c===f&&(v=!0,E=d.route.hydrateFallbackElement||null)));let p=e.concat(o.slice(0,f+1)),g=()=>{let y;return m?y=w:v?y=E:d.route.Component?y=_.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=h,_.createElement(q6,{match:d,routeContext:{outlet:h,matches:p,isDataRoute:n!=null},children:y})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?_.createElement(H6,{location:n.location,revalidation:n.revalidation,component:w,error:m,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var N3=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(N3||{}),Nu=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Nu||{});function K6(t){let e=_.useContext(xp);return e||Be(!1),e}function Q6(t){let e=_.useContext(V6);return e||Be(!1),e}function Y6(t){let e=_.useContext(fs);return e||Be(!1),e}function k3(t){let e=Y6(),n=e.matches[e.matches.length-1];return n.route.id||Be(!1),n.route.id}function X6(){var t;let e=_.useContext(S3),n=Q6(Nu.UseRouteError),r=k3(Nu.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function J6(){let{router:t}=K6(N3.UseNavigateStable),e=k3(Nu.UseNavigateStable),n=_.useRef(!1);return A3(()=>{n.current=!0}),_.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,nl({fromRouteId:e},i)))},[t,e])}const $1={};function Z6(t,e,n){!e&&!$1[t]&&($1[t]=!0)}function Rt(t){Be(!1)}function e9(t){let{basename:e="/",children:n=null,location:r,navigationType:s=$r.Pop,navigator:i,static:o=!1,future:a}=t;Pl()&&Be(!1);let l=e.replace(/^\/*/,"/"),c=_.useMemo(()=>({basename:l,navigator:i,static:o,future:nl({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=ci(r));let{pathname:h="/",search:d="",hash:f="",state:m=null,key:v="default"}=r,w=_.useMemo(()=>{let E=Ep(h,l);return E==null?null:{location:{pathname:E,search:d,hash:f,state:m,key:v},navigationType:s}},[l,h,d,f,m,v,s]);return w==null?null:_.createElement(ui.Provider,{value:c},_.createElement(kh.Provider,{children:n,value:w}))}function t9(t){let{children:e,location:n}=t;return $6(Rf(e),n)}new Promise(()=>{});function Rf(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,s)=>{if(!_.isValidElement(r))return;let i=[...e,s];if(r.type===_.Fragment){n.push.apply(n,Rf(r.props.children,i));return}r.type!==Rt&&Be(!1),!r.props.index||!r.props.children||Be(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Rf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nf(){return Nf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nf.apply(this,arguments)}function n9(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function r9(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function s9(t,e){return t.button===0&&(!e||e==="_self")&&!r9(t)}const i9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],o9="6";try{window.__reactRouterVersion=o9}catch{}const a9="startTransition",z1=zC[a9];function l9(t){let{basename:e,children:n,future:r,window:s}=t,i=_.useRef();i.current==null&&(i.current=d6({window:s,v5Compat:!0}));let o=i.current,[a,l]=_.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=_.useCallback(d=>{c&&z1?z1(()=>l(d)):l(d)},[l,c]);return _.useLayoutEffect(()=>o.listen(h),[o,h]),_.createElement(e9,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const c9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",u9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,P3=_.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:h,unstable_viewTransition:d}=e,f=n9(e,i9),{basename:m}=_.useContext(ui),v,w=!1;if(typeof c=="string"&&u9.test(c)&&(v=c,c9))try{let y=new URL(window.location.href),x=c.startsWith("//")?new URL(y.protocol+c):new URL(c),C=Ep(x.pathname,m);x.origin===y.origin&&C!=null?c=C+x.search+x.hash:w=!0}catch{}let E=F6(c,{relative:s}),p=h9(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,unstable_viewTransition:d});function g(y){r&&r(y),y.defaultPrevented||p(y)}return _.createElement("a",Nf({},f,{href:v||E,onClick:w||i?r:g,ref:n,target:l}))});var B1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(B1||(B1={}));var W1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(W1||(W1={}));function h9(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=tn(),c=No(),h=R3(t,{relative:o});return _.useCallback(d=>{if(s9(d,n)){d.preventDefault();let f=r!==void 0?r:Ru(c)===Ru(h);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:a})}},[c,l,h,r,s,n,t,i,o,a])}function d9(t,e,n){const r=e.name,s=f9(t,e.quizzes),i=p9(s),o=t.length,a=e.gradingRules.length!==0?m9(i,e.gradingRules)||"There is an error in your grading rules":"Level is not defined",l=g9(),c=_9();return{testName:r,results:s,score:i,totalScore:o,level:a,date:l,time:c,timeTaken:n}}function f9(t,e){return e.map(r=>{const{id:s,question:i,answer:o}=r;let a;t.forEach(c=>{s===c.id&&(a=c)});const{userAnswer:l}=a;return l===r.answer?{id:s,question:i,userAnswer:l,answer:o,isTrue:!0}:{id:s,question:i,userAnswer:l,answer:o,isTrue:!1}})}function p9(t){let e=0;return t.forEach(n=>{n.isTrue&&e++}),e}function m9(t,e){let n;try{e.forEach(r=>{t>=Number(r.from)&&t<=Number(r.to)&&(n=r.level)})}catch(r){console.log(r.message)}return n}function g9(){const t=new Date,e=t.getDate(),n=t.getMonth()+1,r=t.getFullYear();return`${e}/${n}/${r}`}function _9(){const t=new Date;let e=t.getHours();const n=t.getMinutes(),r=e>12?"PM":"AM";e=e%12||12;const s=n<10?`0${n}`:n;return`${e}:${s} ${r}`}var H1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O=function(t,e){if(!t)throw ko(e)},ko=function(t){return new Error("Firebase Database ("+L3.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},v9=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Cp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[h],n[d],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(b3(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):v9(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||d==null)throw new y9;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),d!==64){const v=c<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class y9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const D3=function(t){const e=b3(t);return Cp.encodeByteArray(e,!0)},ku=function(t){return D3(t).replace(/\./g,"")},Pu=function(t){try{return Cp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w9(t){return O3(void 0,t)}function O3(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!E9(n)||(t[n]=O3(t[n],e[n]));return t}function E9(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x9(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9=()=>x9().__FIREBASE_DEFAULTS__,C9=()=>{if(typeof process>"u"||typeof H1>"u")return;const t=H1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},I9=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Pu(t[1]);return e&&JSON.parse(e)},Ph=()=>{try{return T9()||C9()||I9()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},M3=t=>{var e,n;return(n=(e=Ph())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Ip=t=>{const e=M3(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},j3=()=>{var t;return(t=Ph())===null||t===void 0?void 0:t.config},V3=t=>{var e;return(e=Ph())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[ku(JSON.stringify(n)),ku(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function S9(){var t;const e=(t=Ph())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function A9(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function F3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function R9(){const t=We();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function U3(){return L3.NODE_ADMIN===!0}function N9(){return!S9()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $3(){try{return typeof indexedDB=="object"}catch{return!1}}function k9(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9="FirebaseError";class Qn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=P9,Object.setPrototypeOf(this,Qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ll.prototype.create)}}class Ll{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?L9(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Qn(s,a,r)}}function L9(t,e){return t.replace(b9,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const b9=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t){return JSON.parse(t)}function it(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=rl(Pu(i[0])||""),n=rl(Pu(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},D9=function(t){const e=z3(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},O9=function(t){const e=z3(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function uo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function kf(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lu(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function sl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(q1(i)&&q1(o)){if(!sl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function q1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ha(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function da(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,h;for(let d=0;d<80;d++){d<40?d<20?(c=a^i&(o^a),h=1518500249):(c=i^o^a,h=1859775393):d<60?(c=i&o|a&(i|o),h=2400959708):(c=i^o^a,h=3395469782);const f=(s<<5|s>>>27)+c+l+h+r[d]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function j9(t,e){const n=new V9(t,e);return n.subscribe.bind(n)}class V9{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");F9(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=s0),s.error===void 0&&(s.error=s0),s.complete===void 0&&(s.complete=s0);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function F9(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function s0(){}function U9(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,O(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Lh=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t){return t&&t._delegate?t._delegate:t}class pr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Sp;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(W9(e))try{this.getOrInitializeService({instanceIdentifier:Is})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Is){return this.instances.has(e)}getOptions(e=Is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:B9(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Is){return this.component?this.component.multipleInstances?e:Is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B9(t){return t===Is?void 0:t}function W9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new z9(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Z||(Z={}));const q9={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},G9=Z.INFO,K9={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},Q9=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=K9[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bh{constructor(e){this.name=e,this._logLevel=G9,this._logHandler=Q9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?q9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}}const Y9=(t,e)=>e.some(n=>t instanceof n);let G1,K1;function X9(){return G1||(G1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function J9(){return K1||(K1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B3=new WeakMap,Pf=new WeakMap,W3=new WeakMap,i0=new WeakMap,Np=new WeakMap;function Z9(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Jr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&B3.set(n,t)}).catch(()=>{}),Np.set(e,t),e}function eA(t){if(Pf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Pf.set(t,e)}let Lf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||W3.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function tA(t){Lf=t(Lf)}function nA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(o0(this),e,...n);return W3.set(r,e.sort?e.sort():[e]),Jr(r)}:J9().includes(t)?function(...e){return t.apply(o0(this),e),Jr(B3.get(this))}:function(...e){return Jr(t.apply(o0(this),e))}}function rA(t){return typeof t=="function"?nA(t):(t instanceof IDBTransaction&&eA(t),Y9(t,X9())?new Proxy(t,Lf):t)}function Jr(t){if(t instanceof IDBRequest)return Z9(t);if(i0.has(t))return i0.get(t);const e=rA(t);return e!==t&&(i0.set(t,e),Np.set(e,t)),e}const o0=t=>Np.get(t);function sA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Jr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Jr(o.result),l.oldVersion,l.newVersion,Jr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const iA=["get","getKey","getAll","getAllKeys","count"],oA=["put","add","delete","clear"],a0=new Map;function Q1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(a0.get(e))return a0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=oA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||iA.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return a0.set(e,i),i}tA(t=>({...t,get:(e,n,r)=>Q1(e,n)||t.get(e,n,r),has:(e,n)=>!!Q1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bf="@firebase/app",Y1="0.9.29";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new bh("@firebase/app"),cA="@firebase/app-compat",uA="@firebase/analytics-compat",hA="@firebase/analytics",dA="@firebase/app-check-compat",fA="@firebase/app-check",pA="@firebase/auth",mA="@firebase/auth-compat",gA="@firebase/database",_A="@firebase/database-compat",vA="@firebase/functions",yA="@firebase/functions-compat",wA="@firebase/installations",EA="@firebase/installations-compat",xA="@firebase/messaging",TA="@firebase/messaging-compat",CA="@firebase/performance",IA="@firebase/performance-compat",SA="@firebase/remote-config",AA="@firebase/remote-config-compat",RA="@firebase/storage",NA="@firebase/storage-compat",kA="@firebase/firestore",PA="@firebase/firestore-compat",LA="firebase",bA="10.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="[DEFAULT]",DA={[bf]:"fire-core",[cA]:"fire-core-compat",[hA]:"fire-analytics",[uA]:"fire-analytics-compat",[fA]:"fire-app-check",[dA]:"fire-app-check-compat",[pA]:"fire-auth",[mA]:"fire-auth-compat",[gA]:"fire-rtdb",[_A]:"fire-rtdb-compat",[vA]:"fire-fn",[yA]:"fire-fn-compat",[wA]:"fire-iid",[EA]:"fire-iid-compat",[xA]:"fire-fcm",[TA]:"fire-fcm-compat",[CA]:"fire-perf",[IA]:"fire-perf-compat",[SA]:"fire-rc",[AA]:"fire-rc-compat",[RA]:"fire-gcs",[NA]:"fire-gcs-compat",[kA]:"fire-fst",[PA]:"fire-fst-compat","fire-js":"fire-js",[LA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=new Map,Of=new Map;function OA(t,e){try{t.container.addComponent(e)}catch(n){Ys.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function is(t){const e=t.name;if(Of.has(e))return Ys.debug(`There were multiple attempts to register component ${e}.`),!1;Of.set(e,t);for(const n of bu.values())OA(n,t);return!0}function bl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Zr=new Ll("app","Firebase",MA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=bA;function H3(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Df,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Zr.create("bad-app-name",{appName:String(s)});if(n||(n=j3()),!n)throw Zr.create("no-options");const i=bu.get(s);if(i){if(sl(n,i.options)&&sl(r,i.config))return i;throw Zr.create("duplicate-app",{appName:s})}const o=new H9(s);for(const l of Of.values())o.addComponent(l);const a=new jA(n,r,o);return bu.set(s,a),a}function Dh(t=Df){const e=bu.get(t);if(!e&&t===Df&&j3())return H3();if(!e)throw Zr.create("no-app",{appName:t});return e}function hn(t,e,n){var r;let s=(r=DA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ys.warn(a.join(" "));return}is(new pr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="firebase-heartbeat-database",FA=1,il="firebase-heartbeat-store";let l0=null;function q3(){return l0||(l0=sA(VA,FA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(il)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zr.create("idb-open",{originalErrorMessage:t.message})})),l0}async function UA(t){try{const n=(await q3()).transaction(il),r=await n.objectStore(il).get(G3(t));return await n.done,r}catch(e){if(e instanceof Qn)Ys.warn(e.message);else{const n=Zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ys.warn(n.message)}}}async function X1(t,e){try{const r=(await q3()).transaction(il,"readwrite");await r.objectStore(il).put(e,G3(t)),await r.done}catch(n){if(n instanceof Qn)Ys.warn(n.message);else{const r=Zr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ys.warn(r.message)}}}function G3(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=1024,zA=30*24*60*60*1e3;class BA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=J1();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=zA}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=J1(),{heartbeatsToSend:r,unsentEntries:s}=WA(this._heartbeatsCache.heartbeats),i=ku(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function J1(){return new Date().toISOString().substring(0,10)}function WA(t,e=$A){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Z1(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Z1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class HA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $3()?k9().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return X1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return X1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Z1(t){return ku(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t){is(new pr("platform-logger",e=>new aA(e),"PRIVATE")),is(new pr("heartbeat",e=>new BA(e),"PRIVATE")),hn(bf,Y1,t),hn(bf,Y1,"esm2017"),hn("fire-js","")}qA("");var GA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},M,kp=kp||{},q=GA||self;function Oh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Dl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function KA(t){return Object.prototype.hasOwnProperty.call(t,c0)&&t[c0]||(t[c0]=++QA)}var c0="closure_uid_"+(1e9*Math.random()>>>0),QA=0;function YA(t,e,n){return t.call.apply(t.bind,arguments)}function XA(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function wt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?wt=YA:wt=XA,wt.apply(null,arguments)}function Ic(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function nt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function ms(){this.s=this.s,this.o=this.o}var JA=0;ms.prototype.s=!1;ms.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),JA!=0)&&KA(this)};ms.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const K3=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Pp(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function e_(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Oh(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function Et(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Et.prototype.h=function(){this.defaultPrevented=!0};var ZA=function(){if(!q.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};q.addEventListener("test",n,e),q.removeEventListener("test",n,e)}catch{}return t}();function ol(t){return/^[\s\xa0]*$/.test(t)}function Mh(){var t=q.navigator;return t&&(t=t.userAgent)?t:""}function Dn(t){return Mh().indexOf(t)!=-1}function Lp(t){return Lp[" "](t),t}Lp[" "]=function(){};function eR(t,e){var n=qR;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var tR=Dn("Opera"),ho=Dn("Trident")||Dn("MSIE"),Q3=Dn("Edge"),Mf=Q3||ho,Y3=Dn("Gecko")&&!(Mh().toLowerCase().indexOf("webkit")!=-1&&!Dn("Edge"))&&!(Dn("Trident")||Dn("MSIE"))&&!Dn("Edge"),nR=Mh().toLowerCase().indexOf("webkit")!=-1&&!Dn("Edge");function X3(){var t=q.document;return t?t.documentMode:void 0}var jf;e:{var u0="",h0=function(){var t=Mh();if(Y3)return/rv:([^\);]+)(\)|;)/.exec(t);if(Q3)return/Edge\/([\d\.]+)/.exec(t);if(ho)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(nR)return/WebKit\/(\S+)/.exec(t);if(tR)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(h0&&(u0=h0?h0[1]:""),ho){var d0=X3();if(d0!=null&&d0>parseFloat(u0)){jf=String(d0);break e}}jf=u0}var Vf;if(q.document&&ho){var t_=X3();Vf=t_||parseInt(jf,10)||void 0}else Vf=void 0;var rR=Vf;function al(t,e){if(Et.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Y3){e:{try{Lp(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:sR[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&al.$.h.call(this)}}nt(al,Et);var sR={2:"touch",3:"pen",4:"mouse"};al.prototype.h=function(){al.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ol="closure_listenable_"+(1e6*Math.random()|0),iR=0;function oR(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++iR,this.fa=this.ia=!1}function jh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function bp(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function aR(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function J3(t){const e={};for(const n in t)e[n]=t[n];return e}const n_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Z3(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<n_.length;i++)n=n_[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Vh(t){this.src=t,this.g={},this.h=0}Vh.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Uf(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new oR(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function Ff(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=K3(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(jh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Uf(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var Dp="closure_lm_"+(1e6*Math.random()|0),f0={};function e5(t,e,n,r,s){if(r&&r.once)return n5(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)e5(t,e[i],n,r,s);return null}return n=jp(n),t&&t[Ol]?t.O(e,n,Dl(r)?!!r.capture:!!r,s):t5(t,e,n,!1,r,s)}function t5(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=Dl(s)?!!s.capture:!!s,a=Mp(t);if(a||(t[Dp]=a=new Vh(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=lR(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ZA||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(s5(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function lR(){function t(n){return e.call(t.src,t.listener,n)}const e=cR;return t}function n5(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)n5(t,e[i],n,r,s);return null}return n=jp(n),t&&t[Ol]?t.P(e,n,Dl(r)?!!r.capture:!!r,s):t5(t,e,n,!0,r,s)}function r5(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)r5(t,e[i],n,r,s);else r=Dl(r)?!!r.capture:!!r,n=jp(n),t&&t[Ol]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Uf(i,n,r,s),-1<n&&(jh(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Mp(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Uf(e,n,r,s)),(n=-1<t?e[t]:null)&&Op(n))}function Op(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Ol])Ff(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(s5(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Mp(e))?(Ff(n,t),n.h==0&&(n.src=null,e[Dp]=null)):jh(t)}}}function s5(t){return t in f0?f0[t]:f0[t]="on"+t}function cR(t,e){if(t.fa)t=!0;else{e=new al(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Op(t),t=n.call(r,e)}return t}function Mp(t){return t=t[Dp],t instanceof Vh?t:null}var p0="__closure_events_fn_"+(1e9*Math.random()>>>0);function jp(t){return typeof t=="function"?t:(t[p0]||(t[p0]=function(e){return t.handleEvent(e)}),t[p0])}function tt(){ms.call(this),this.i=new Vh(this),this.S=this,this.J=null}nt(tt,ms);tt.prototype[Ol]=!0;tt.prototype.removeEventListener=function(t,e,n,r){r5(this,t,e,n,r)};function lt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Et(e,t);else if(e instanceof Et)e.target=e.target||t;else{var s=e;e=new Et(r,t),Z3(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Sc(o,r,!0,e)&&s}if(o=e.g=t,s=Sc(o,r,!0,e)&&s,s=Sc(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Sc(o,r,!1,e)&&s}tt.prototype.N=function(){if(tt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)jh(n[r]);delete t.g[e],t.h--}}this.J=null};tt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};tt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Sc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Ff(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var Vp=q.JSON.stringify;class uR{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function hR(){var t=Fp;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class dR{constructor(){this.h=this.g=null}add(e,n){const r=i5.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var i5=new uR(()=>new fR,t=>t.reset());class fR{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function pR(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function mR(t){q.setTimeout(()=>{throw t},0)}let ll,cl=!1,Fp=new dR,o5=()=>{const t=q.Promise.resolve(void 0);ll=()=>{t.then(gR)}};var gR=()=>{for(var t;t=hR();){try{t.h.call(t.g)}catch(n){mR(n)}var e=i5;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}cl=!1};function Fh(t,e){tt.call(this),this.h=t||1,this.g=e||q,this.j=wt(this.qb,this),this.l=Date.now()}nt(Fh,tt);M=Fh.prototype;M.ga=!1;M.T=null;M.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),lt(this,"tick"),this.ga&&(Up(this),this.start()))}};M.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Up(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}M.N=function(){Fh.$.N.call(this),Up(this),delete this.g};function $p(t,e,n){if(typeof t=="function")n&&(t=wt(t,n));else if(t&&typeof t.handleEvent=="function")t=wt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:q.setTimeout(t,e||0)}function a5(t){t.g=$p(()=>{t.g=null,t.i&&(t.i=!1,a5(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class _R extends ms{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:a5(this)}N(){super.N(),this.g&&(q.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ul(t){ms.call(this),this.h=t,this.g={}}nt(ul,ms);var r_=[];function l5(t,e,n,r){Array.isArray(n)||(n&&(r_[0]=n.toString()),n=r_);for(var s=0;s<n.length;s++){var i=e5(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function c5(t){bp(t.g,function(e,n){this.g.hasOwnProperty(n)&&Op(e)},t),t.g={}}ul.prototype.N=function(){ul.$.N.call(this),c5(this)};ul.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Uh(){this.g=!0}Uh.prototype.Ea=function(){this.g=!1};function vR(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var h=c[0];c=c[1];var d=h.split("_");o=2<=d.length&&d[1]=="type"?o+(h+"="+c+"&"):o+(h+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function yR(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Mi(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+ER(t,n)+(r?" "+r:"")})}function wR(t,e){t.info(function(){return"TIMEOUT: "+e})}Uh.prototype.info=function(){};function ER(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Vp(n)}catch{return e}}var hi={},s_=null;function $h(){return s_=s_||new tt}hi.Ta="serverreachability";function u5(t){Et.call(this,hi.Ta,t)}nt(u5,Et);function hl(t){const e=$h();lt(e,new u5(e))}hi.STAT_EVENT="statevent";function h5(t,e){Et.call(this,hi.STAT_EVENT,t),this.stat=e}nt(h5,Et);function kt(t){const e=$h();lt(e,new h5(e,t))}hi.Ua="timingevent";function d5(t,e){Et.call(this,hi.Ua,t),this.size=e}nt(d5,Et);function Ml(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return q.setTimeout(function(){t()},e)}var zh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},f5={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function zp(){}zp.prototype.h=null;function i_(t){return t.h||(t.h=t.i())}function p5(){}var jl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Bp(){Et.call(this,"d")}nt(Bp,Et);function Wp(){Et.call(this,"c")}nt(Wp,Et);var $f;function Bh(){}nt(Bh,zp);Bh.prototype.g=function(){return new XMLHttpRequest};Bh.prototype.i=function(){return{}};$f=new Bh;function Vl(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new ul(this),this.P=xR,t=Mf?125:void 0,this.V=new Fh(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new m5}function m5(){this.i=null,this.g="",this.h=!1}var xR=45e3,g5={},zf={};M=Vl.prototype;M.setTimeout=function(t){this.P=t};function Bf(t,e,n){t.L=1,t.A=Hh(mr(e)),t.u=n,t.S=!0,_5(t,null)}function _5(t,e){t.G=Date.now(),Fl(t),t.B=mr(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),I5(n.i,"t",r),t.o=0,n=t.l.J,t.h=new m5,t.g=q5(t.l,n?e:null,!t.u),0<t.O&&(t.M=new _R(wt(t.Pa,t,t.g),t.O)),l5(t.U,t.g,"readystatechange",t.nb),e=t.I?J3(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),hl(),vR(t.j,t.v,t.B,t.m,t.W,t.u)}M.nb=function(t){t=t.target;const e=this.M;e&&On(t)==3?e.l():this.Pa(t)};M.Pa=function(t){try{if(t==this.g)e:{const h=On(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>h)&&(h!=3||Mf||this.g&&(this.h.h||this.g.ja()||c_(this.g)))){this.J||h!=4||e==7||(e==8||0>=d?hl(3):hl(2)),Wh(this);var n=this.g.da();this.ca=n;t:if(v5(this)){var r=c_(this.g);t="";var s=r.length,i=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ps(this),Ra(this);var o="";break t}this.h.i=new q.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,yR(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ol(a)){var c=a;break t}}c=null}if(n=c)Mi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wf(this,n);else{this.i=!1,this.s=3,kt(12),Ps(this),Ra(this);break e}}this.S?(y5(this,h,o),Mf&&this.i&&h==3&&(l5(this.U,this.V,"tick",this.mb),this.V.start())):(Mi(this.j,this.m,o,null),Wf(this,o)),h==4&&Ps(this),this.i&&!this.J&&(h==4?z5(this.l,this):(this.i=!1,Fl(this)))}else BR(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Ps(this),Ra(this)}}}catch{}finally{}};function v5(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function y5(t,e,n){let r=!0,s;for(;!t.J&&t.o<n.length;)if(s=TR(t,n),s==zf){e==4&&(t.s=4,kt(14),r=!1),Mi(t.j,t.m,null,"[Incomplete Response]");break}else if(s==g5){t.s=4,kt(15),Mi(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Mi(t.j,t.m,s,null),Wf(t,s);v5(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,kt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Yp(e),e.M=!0,kt(11))):(Mi(t.j,t.m,n,"[Invalid Chunked Response]"),Ps(t),Ra(t))}M.mb=function(){if(this.g){var t=On(this.g),e=this.g.ja();this.o<e.length&&(Wh(this),y5(this,t,e),this.i&&t!=4&&Fl(this))}};function TR(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?zf:(n=Number(e.substring(n,r)),isNaN(n)?g5:(r+=1,r+n>e.length?zf:(e=e.slice(r,r+n),t.o=r+n,e)))}M.cancel=function(){this.J=!0,Ps(this)};function Fl(t){t.Y=Date.now()+t.P,w5(t,t.P)}function w5(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Ml(wt(t.lb,t),e)}function Wh(t){t.C&&(q.clearTimeout(t.C),t.C=null)}M.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(wR(this.j,this.B),this.L!=2&&(hl(),kt(17)),Ps(this),this.s=2,Ra(this)):w5(this,this.Y-t)};function Ra(t){t.l.H==0||t.J||z5(t.l,t)}function Ps(t){Wh(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Up(t.V),c5(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Wf(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Hf(n.i,t))){if(!t.K&&Hf(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Mu(n),Qh(n);else break e;Qp(n),kt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ml(wt(n.ib,n),6e3));if(1>=R5(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ls(n,11)}else if((t.K||n.g==t)&&Mu(n),!ol(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const h=c[3];h!=null&&(n.ra=h,n.l.info("VER="+n.ra));const d=c[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));const f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const v=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var i=r.i;i.g||v.indexOf("spdy")==-1&&v.indexOf("quic")==-1&&v.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Hp(i,i.h),i.h=null))}if(r.F){const w=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,Ie(r.I,r.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=H5(r,r.J?r.pa:null,r.Y),o.K){N5(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Wh(a),Fl(a)),r.g=o}else U5(r);0<n.j.length&&Yh(n)}else c[0]!="stop"&&c[0]!="close"||Ls(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Ls(n,7):Kp(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}hl(4)}catch{}}function CR(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Oh(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function IR(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Oh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function E5(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Oh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=IR(t),r=CR(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var x5=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function SR(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function $s(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof $s){this.h=t.h,Du(this,t.j),this.s=t.s,this.g=t.g,Ou(this,t.m),this.l=t.l;var e=t.i,n=new dl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),o_(this,n),this.o=t.o}else t&&(e=String(t).match(x5))?(this.h=!1,Du(this,e[1]||"",!0),this.s=fa(e[2]||""),this.g=fa(e[3]||"",!0),Ou(this,e[4]),this.l=fa(e[5]||"",!0),o_(this,e[6]||"",!0),this.o=fa(e[7]||"")):(this.h=!1,this.i=new dl(null,this.h))}$s.prototype.toString=function(){var t=[],e=this.j;e&&t.push(pa(e,a_,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(pa(e,a_,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(pa(n,n.charAt(0)=="/"?NR:RR,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",pa(n,PR)),t.join("")};function mr(t){return new $s(t)}function Du(t,e,n){t.j=n?fa(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ou(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function o_(t,e,n){e instanceof dl?(t.i=e,LR(t.i,t.h)):(n||(e=pa(e,kR)),t.i=new dl(e,t.h))}function Ie(t,e,n){t.i.set(e,n)}function Hh(t){return Ie(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function fa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function pa(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,AR),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function AR(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var a_=/[#\/\?@]/g,RR=/[#\?:]/g,NR=/[#\?]/g,kR=/[#\?@]/g,PR=/#/g;function dl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function gs(t){t.g||(t.g=new Map,t.h=0,t.i&&SR(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}M=dl.prototype;M.add=function(t,e){gs(this),this.i=null,t=Lo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function T5(t,e){gs(t),e=Lo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function C5(t,e){return gs(t),e=Lo(t,e),t.g.has(e)}M.forEach=function(t,e){gs(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};M.ta=function(){gs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};M.Z=function(t){gs(this);let e=[];if(typeof t=="string")C5(this,t)&&(e=e.concat(this.g.get(Lo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};M.set=function(t,e){return gs(this),this.i=null,t=Lo(this,t),C5(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};M.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function I5(t,e,n){T5(t,e),0<n.length&&(t.i=null,t.g.set(Lo(t,e),Pp(n)),t.h+=n.length)}M.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Lo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function LR(t,e){e&&!t.j&&(gs(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(T5(this,r),I5(this,s,n))},t)),t.j=e}var bR=class{constructor(t,e){this.g=t,this.map=e}};function S5(t){this.l=t||DR,q.PerformanceNavigationTiming?(t=q.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(q.g&&q.g.Ka&&q.g.Ka()&&q.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var DR=10;function A5(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function R5(t){return t.h?1:t.g?t.g.size:0}function Hf(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Hp(t,e){t.g?t.g.add(e):t.h=e}function N5(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}S5.prototype.cancel=function(){if(this.i=k5(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function k5(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Pp(t.i)}var OR=class{stringify(t){return q.JSON.stringify(t,void 0)}parse(t){return q.JSON.parse(t,void 0)}};function MR(){this.g=new OR}function jR(t,e,n){const r=n||"";try{E5(t,function(s,i){let o=s;Dl(s)&&(o=Vp(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function VR(t,e){const n=new Uh;if(q.Image){const r=new Image;r.onload=Ic(Ac,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ic(Ac,n,r,"TestLoadImage: error",!1,e),r.onabort=Ic(Ac,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ic(Ac,n,r,"TestLoadImage: timeout",!1,e),q.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Ac(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function qh(t){this.l=t.ec||null,this.j=t.ob||!1}nt(qh,zp);qh.prototype.g=function(){return new Gh(this.l,this.j)};qh.prototype.i=function(t){return function(){return t}}({});function Gh(t,e){tt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=qp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nt(Gh,tt);var qp=0;M=Gh.prototype;M.open=function(t,e){if(this.readyState!=qp)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,fl(this)};M.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||q).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};M.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ul(this)),this.readyState=qp};M.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,fl(this)),this.g&&(this.readyState=3,fl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof q.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;P5(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function P5(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}M.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ul(this):fl(this),this.readyState==3&&P5(this)}};M.Za=function(t){this.g&&(this.response=this.responseText=t,Ul(this))};M.Ya=function(t){this.g&&(this.response=t,Ul(this))};M.ka=function(){this.g&&Ul(this)};function Ul(t){t.readyState=4,t.l=null,t.j=null,t.A=null,fl(t)}M.setRequestHeader=function(t,e){this.v.append(t,e)};M.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};M.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function fl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Gh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var FR=q.JSON.parse;function Oe(t){tt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=L5,this.L=this.M=!1}nt(Oe,tt);var L5="",UR=/^https?$/i,$R=["POST","PUT"];M=Oe.prototype;M.Oa=function(t){this.M=t};M.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():$f.g(),this.C=this.u?i_(this.u):i_($f),this.g.onreadystatechange=wt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){l_(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=q.FormData&&t instanceof q.FormData,!(0<=K3($R,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{O5(this),0<this.B&&((this.L=zR(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wt(this.ua,this)):this.A=$p(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){l_(this,i)}};function zR(t){return ho&&typeof t.timeout=="number"&&t.ontimeout!==void 0}M.ua=function(){typeof kp<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,lt(this,"timeout"),this.abort(8))};function l_(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,b5(t),Kh(t)}function b5(t){t.F||(t.F=!0,lt(t,"complete"),lt(t,"error"))}M.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,lt(this,"complete"),lt(this,"abort"),Kh(this))};M.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Kh(this,!0)),Oe.$.N.call(this)};M.La=function(){this.s||(this.G||this.v||this.l?D5(this):this.kb())};M.kb=function(){D5(this)};function D5(t){if(t.h&&typeof kp<"u"&&(!t.C[1]||On(t)!=4||t.da()!=2)){if(t.v&&On(t)==4)$p(t.La,0,t);else if(lt(t,"readystatechange"),On(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(x5)[1]||null;!s&&q.self&&q.self.location&&(s=q.self.location.protocol.slice(0,-1)),r=!UR.test(s?s.toLowerCase():"")}n=r}if(n)lt(t,"complete"),lt(t,"success");else{t.m=6;try{var i=2<On(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",b5(t)}}finally{Kh(t)}}}}function Kh(t,e){if(t.g){O5(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||lt(t,"ready");try{n.onreadystatechange=r}catch{}}}function O5(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(q.clearTimeout(t.A),t.A=null)}M.isActive=function(){return!!this.g};function On(t){return t.g?t.g.readyState:0}M.da=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}};M.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};M.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),FR(e)}};function c_(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case L5:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function BR(t){const e={};t=(t.g&&2<=On(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(ol(t[r]))continue;var n=pR(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}aR(e,function(r){return r.join(", ")})}M.Ia=function(){return this.m};M.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function M5(t){let e="";return bp(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Gp(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=M5(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ie(t,e,n))}function Xo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function j5(t){this.Ga=0,this.j=[],this.l=new Uh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Xo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Xo("baseRetryDelayMs",5e3,t),this.hb=Xo("retryDelaySeedMs",1e4,t),this.eb=Xo("forwardChannelMaxRetries",2,t),this.xa=Xo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new S5(t&&t.concurrentRequestLimit),this.Ja=new MR,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}M=j5.prototype;M.ra=8;M.H=1;function Kp(t){if(V5(t),t.H==3){var e=t.W++,n=mr(t.I);if(Ie(n,"SID",t.K),Ie(n,"RID",e),Ie(n,"TYPE","terminate"),$l(t,n),e=new Vl(t,t.l,e),e.L=2,e.A=Hh(mr(n)),n=!1,q.navigator&&q.navigator.sendBeacon)try{n=q.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&q.Image&&(new Image().src=e.A,n=!0),n||(e.g=q5(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Fl(e)}W5(t)}function Qh(t){t.g&&(Yp(t),t.g.cancel(),t.g=null)}function V5(t){Qh(t),t.u&&(q.clearTimeout(t.u),t.u=null),Mu(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&q.clearTimeout(t.m),t.m=null)}function Yh(t){if(!A5(t.i)&&!t.m){t.m=!0;var e=t.Na;ll||o5(),cl||(ll(),cl=!0),Fp.add(e,t),t.C=0}}function WR(t,e){return R5(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Ml(wt(t.Na,t,e),B5(t,t.C)),t.C++,!0)}M.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new Vl(this,this.l,t);let i=this.s;if(this.U&&(i?(i=J3(i),Z3(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=F5(this,s,e),n=mr(this.I),Ie(n,"RID",t),Ie(n,"CVER",22),this.F&&Ie(n,"X-HTTP-Session-Id",this.F),$l(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(M5(i)))+"&"+e:this.o&&Gp(n,this.o,i)),Hp(this.i,s),this.bb&&Ie(n,"TYPE","init"),this.P?(Ie(n,"$req",e),Ie(n,"SID","null"),s.aa=!0,Bf(s,n,null)):Bf(s,n,e),this.H=2}}else this.H==3&&(t?u_(this,t):this.j.length==0||A5(this.i)||u_(this))};function u_(t,e){var n;e?n=e.m:n=t.W++;const r=mr(t.I);Ie(r,"SID",t.K),Ie(r,"RID",n),Ie(r,"AID",t.V),$l(t,r),t.o&&t.s&&Gp(r,t.o,t.s),n=new Vl(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=F5(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Hp(t.i,n),Bf(n,r,e)}function $l(t,e){t.na&&bp(t.na,function(n,r){Ie(e,r,n)}),t.h&&E5({},function(n,r){Ie(e,r,n)})}function F5(t,e,n){n=Math.min(t.j.length,n);var r=t.h?wt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const h=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{jR(h,o,"req"+c+"_")}catch{r&&r(h)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function U5(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;ll||o5(),cl||(ll(),cl=!0),Fp.add(e,t),t.A=0}}function Qp(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Ml(wt(t.Ma,t),B5(t,t.A)),t.A++,!0)}M.Ma=function(){if(this.u=null,$5(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ml(wt(this.jb,this),t)}};M.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,kt(10),Qh(this),$5(this))};function Yp(t){t.B!=null&&(q.clearTimeout(t.B),t.B=null)}function $5(t){t.g=new Vl(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=mr(t.wa);Ie(e,"RID","rpc"),Ie(e,"SID",t.K),Ie(e,"AID",t.V),Ie(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ie(e,"TO",t.qa),Ie(e,"TYPE","xmlhttp"),$l(t,e),t.o&&t.s&&Gp(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Hh(mr(e)),n.u=null,n.S=!0,_5(n,t)}M.ib=function(){this.v!=null&&(this.v=null,Qh(this),Qp(this),kt(19))};function Mu(t){t.v!=null&&(q.clearTimeout(t.v),t.v=null)}function z5(t,e){var n=null;if(t.g==e){Mu(t),Yp(t),t.g=null;var r=2}else if(Hf(t.i,e))n=e.F,N5(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var s=t.C;r=$h(),lt(r,new d5(r,n)),Yh(t)}else U5(t);else if(s=e.s,s==3||s==0&&0<e.ca||!(r==1&&WR(t,e)||r==2&&Qp(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Ls(t,5);break;case 4:Ls(t,10);break;case 3:Ls(t,6);break;default:Ls(t,2)}}}function B5(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ls(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=wt(t.pb,t);n||(n=new $s("//www.google.com/images/cleardot.gif"),q.location&&q.location.protocol=="http"||Du(n,"https"),Hh(n)),VR(n.toString(),r)}else kt(2);t.H=0,t.h&&t.h.za(e),W5(t),V5(t)}M.pb=function(t){t?(this.l.info("Successfully pinged google.com"),kt(2)):(this.l.info("Failed to ping google.com"),kt(1))};function W5(t){if(t.H=0,t.ma=[],t.h){const e=k5(t.i);(e.length!=0||t.j.length!=0)&&(e_(t.ma,e),e_(t.ma,t.j),t.i.i.length=0,Pp(t.j),t.j.length=0),t.h.ya()}}function H5(t,e,n){var r=n instanceof $s?mr(n):new $s(n);if(r.g!="")e&&(r.g=e+"."+r.g),Ou(r,r.m);else{var s=q.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new $s(null);r&&Du(i,r),e&&(i.g=e),s&&Ou(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&Ie(r,n,e),Ie(r,"VER",t.ra),$l(t,r),r}function q5(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Oe(new qh({ob:n})):new Oe(t.va),e.Oa(t.J),e}M.isActive=function(){return!!this.h&&this.h.isActive(this)};function G5(){}M=G5.prototype;M.Ba=function(){};M.Aa=function(){};M.za=function(){};M.ya=function(){};M.isActive=function(){return!0};M.Va=function(){};function ju(){if(ho&&!(10<=Number(rR)))throw Error("Environmental error: no available transport.")}ju.prototype.g=function(t,e){return new Jt(t,e)};function Jt(t,e){tt.call(this),this.g=new j5(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!ol(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ol(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new bo(this)}nt(Jt,tt);Jt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;kt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=H5(t,null,t.Y),Yh(t)};Jt.prototype.close=function(){Kp(this.g)};Jt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Vp(t),t=n);e.j.push(new bR(e.fb++,t)),e.H==3&&Yh(e)};Jt.prototype.N=function(){this.g.h=null,delete this.j,Kp(this.g),delete this.g,Jt.$.N.call(this)};function K5(t){Bp.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}nt(K5,Bp);function Q5(){Wp.call(this),this.status=1}nt(Q5,Wp);function bo(t){this.g=t}nt(bo,G5);bo.prototype.Ba=function(){lt(this.g,"a")};bo.prototype.Aa=function(t){lt(this.g,new K5(t))};bo.prototype.za=function(t){lt(this.g,new Q5)};bo.prototype.ya=function(){lt(this.g,"b")};function HR(){this.blockSize=-1}function Rn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}nt(Rn,HR);Rn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function m0(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}Rn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)m0(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){m0(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){m0(this,r),s=0;break}}this.h=s,this.i+=e};Rn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function fe(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var qR={};function Xp(t){return-128<=t&&128>t?eR(t,function(e){return new fe([e|0],0>e?-1:0)}):new fe([t|0],0>t?-1:0)}function Mn(t){if(isNaN(t)||!isFinite(t))return qi;if(0>t)return st(Mn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=qf;return new fe(e,0)}function Y5(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return st(Y5(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Mn(Math.pow(e,8)),r=qi,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=Mn(Math.pow(e,i)),r=r.R(i).add(Mn(o))):(r=r.R(n),r=r.add(Mn(o)))}return r}var qf=4294967296,qi=Xp(0),Gf=Xp(1),h_=Xp(16777216);M=fe.prototype;M.ea=function(){if(an(this))return-st(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:qf+r)*e,e*=qf}return t};M.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(sr(this))return"0";if(an(this))return"-"+st(this).toString(t);for(var e=Mn(Math.pow(t,6)),n=this,r="";;){var s=Fu(n,e).g;n=Vu(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,sr(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};M.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function sr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function an(t){return t.h==-1}M.X=function(t){return t=Vu(this,t),an(t)?-1:sr(t)?0:1};function st(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new fe(n,~t.h).add(Gf)}M.abs=function(){return an(this)?st(this):this};M.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new fe(n,n[n.length-1]&-2147483648?-1:0)};function Vu(t,e){return t.add(st(e))}M.R=function(t){if(sr(this)||sr(t))return qi;if(an(this))return an(t)?st(this).R(st(t)):st(st(this).R(t));if(an(t))return st(this.R(st(t)));if(0>this.X(h_)&&0>t.X(h_))return Mn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,Rc(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Rc(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Rc(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Rc(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new fe(n,0)};function Rc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Jo(t,e){this.g=t,this.h=e}function Fu(t,e){if(sr(e))throw Error("division by zero");if(sr(t))return new Jo(qi,qi);if(an(t))return e=Fu(st(t),e),new Jo(st(e.g),st(e.h));if(an(e))return e=Fu(t,st(e)),new Jo(st(e.g),e.h);if(30<t.g.length){if(an(t)||an(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Gf,r=e;0>=r.X(t);)n=d_(n),r=d_(r);var s=yi(n,1),i=yi(r,1);for(r=yi(r,2),n=yi(n,2);!sr(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=yi(r,1),n=yi(n,1)}return e=Vu(t,s.R(e)),new Jo(s,e)}for(s=qi;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Mn(n),o=i.R(e);an(o)||0<o.X(t);)n-=r,i=Mn(n),o=i.R(e);sr(i)&&(i=Gf),s=s.add(i),t=Vu(t,o)}return new Jo(s,t)}M.gb=function(t){return Fu(this,t).h};M.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new fe(n,this.h&t.h)};M.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new fe(n,this.h|t.h)};M.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new fe(n,this.h^t.h)};function d_(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new fe(n,t.h)}function yi(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new fe(s,t.h)}ju.prototype.createWebChannel=ju.prototype.g;Jt.prototype.send=Jt.prototype.u;Jt.prototype.open=Jt.prototype.m;Jt.prototype.close=Jt.prototype.close;zh.NO_ERROR=0;zh.TIMEOUT=8;zh.HTTP_ERROR=6;f5.COMPLETE="complete";p5.EventType=jl;jl.OPEN="a";jl.CLOSE="b";jl.ERROR="c";jl.MESSAGE="d";tt.prototype.listen=tt.prototype.O;Oe.prototype.listenOnce=Oe.prototype.P;Oe.prototype.getLastError=Oe.prototype.Sa;Oe.prototype.getLastErrorCode=Oe.prototype.Ia;Oe.prototype.getStatus=Oe.prototype.da;Oe.prototype.getResponseJson=Oe.prototype.Wa;Oe.prototype.getResponseText=Oe.prototype.ja;Oe.prototype.send=Oe.prototype.ha;Oe.prototype.setWithCredentials=Oe.prototype.Oa;Rn.prototype.digest=Rn.prototype.l;Rn.prototype.reset=Rn.prototype.reset;Rn.prototype.update=Rn.prototype.j;fe.prototype.add=fe.prototype.add;fe.prototype.multiply=fe.prototype.R;fe.prototype.modulo=fe.prototype.gb;fe.prototype.compare=fe.prototype.X;fe.prototype.toNumber=fe.prototype.ea;fe.prototype.toString=fe.prototype.toString;fe.prototype.getBits=fe.prototype.D;fe.fromNumber=Mn;fe.fromString=Y5;var GR=function(){return new ju},KR=function(){return $h()},g0=zh,QR=f5,YR=hi,f_={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Nc=p5,XR=Oe,JR=Rn,Gi=fe;const p_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do="10.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new bh("@firebase/firestore");function Zo(){return Xs.logLevel}function D(t,...e){if(Xs.logLevel<=Z.DEBUG){const n=e.map(Jp);Xs.debug(`Firestore (${Do}): ${t}`,...n)}}function qn(t,...e){if(Xs.logLevel<=Z.ERROR){const n=e.map(Jp);Xs.error(`Firestore (${Do}): ${t}`,...n)}}function fo(t,...e){if(Xs.logLevel<=Z.WARN){const n=e.map(Jp);Xs.warn(`Firestore (${Do}): ${t}`,...n)}}function Jp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(t="Unexpected state"){const e=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: `+t;throw qn(e),new Error(e)}function ye(t,e){t||W()}function K(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends Qn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}}class e7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class t7{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new $n;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new $n,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new $n)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new X5(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new pt(e)}}class n7{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class r7{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new n7(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s7{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,D("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.R=n.token,new s7(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=o7(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function po(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new L(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ke(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.timestamp=e}static fromTimestamp(e){return new G(e)}static min(){return new G(new Ke(0,0))}static max(){return new G(new Ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n,r){n===void 0?n=0:n>e.length&&W(),r===void 0?r=e.length-n:r>e.length-n&&W(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return pl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class _e extends pl{construct(e,n,r){return new _e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new L(A.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new _e(n)}static emptyPath(){return new _e([])}}const a7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends pl{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return a7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ot(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new L(A.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new L(A.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new L(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new L(A.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.path=e}static fromPath(e){return new $(_e.fromString(e))}static fromName(e){return new $(_e.fromString(e).popFirst(5))}static empty(){return new $(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $(new _e(e.slice()))}}function l7(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=G.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new os(s,$.empty(),e)}function c7(t){return new os(t.readTime,t.key,-1)}class os{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new os(G.min(),$.empty(),-1)}static max(){return new os(G.max(),$.empty(),-1)}}function u7(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class d7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(t){if(t.code!==A.FAILED_PRECONDITION||t.message!==h7)throw t;D("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&W(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,r)=>{n(e)})}static reject(e){return new N((n,r)=>{r(e)})}static waitFor(e){return new N((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=N.resolve(!1);for(const r of e)n=n.next(s=>s?N.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new N((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new N((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new $n,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Na(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=em(r.target.error);this.V.reject(new Na(e,s))}}static open(e,n,r,s){try{return new Zp(n,e.transaction(s,r))}catch(i){throw new Na(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(D("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new p7(n)}}class bs{constructor(e,n,r){this.name=e,this.version=n,this.p=r,bs.S(We())===12.2&&qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return D("SimpleDb","Removing database:",e),As(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!$3())return!1;if(bs.C())return!0;const e=We(),n=bs.S(e),r=0<n&&n<10,s=bs.v(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(D("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Na(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new L(A.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new L(A.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Na(e,o))},s.onupgradeneeded=i=>{D("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.N(o,s.transaction,i.oldVersion,this.version).next(()=>{D("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=Zp.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),N.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(D("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class f7{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return As(this.k.delete())}}class Na extends L{constructor(e,n){super(A.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Bl(t){return t.name==="IndexedDbTransactionError"}class p7{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(D("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(D("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),As(r)}add(e){return D("SimpleDb","ADD",this.store.name,e,e),As(this.store.add(e))}get(e){return As(this.store.get(e)).next(n=>(n===void 0&&(n=null),D("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return D("SimpleDb","DELETE",this.store.name,e),As(this.store.delete(e))}count(){return D("SimpleDb","COUNT",this.store.name),As(this.store.count())}W(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new N((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.G(i,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new N((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}H(e,n){D("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const s=this.cursor(r);return this.G(s,(i,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.G(s,n)}Z(e){const n=this.cursor({});return new N((r,s)=>{n.onerror=i=>{const o=em(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new N((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new f7(a),c=n(a.primaryKey,a.value,l);if(c instanceof N){const h=c.catch(d=>(l.done(),N.reject(d)));r.push(h)}l.isDone?s():l.$===null?a.continue():a.continue(l.$)}}).next(()=>N.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function As(t){return new N((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=em(r.target.error);n(s)}})}let m_=!1;function em(t){const e=bs.S(We());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new L("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return m_||(m_=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}tm._e=-1;function Xh(t){return t==null}function Uu(t){return t===0&&1/t==-1/0}function m7(t){return typeof t=="number"&&Number.isInteger(t)&&!Uu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function di(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Z5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let He=class Kf{constructor(e,n){this.comparator=e,this.root=n||es.EMPTY}insert(e,n){return new Kf(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,es.BLACK,null,null))}remove(e){return new Kf(this.comparator,this.root.remove(e,this.comparator).copy(null,null,es.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kc(this.root,e,this.comparator,!1)}getReverseIterator(){return new kc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kc(this.root,e,this.comparator,!0)}},kc=class{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},es=class Jn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Jn.RED,this.left=s??Jn.EMPTY,this.right=i??Jn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Jn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Jn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Jn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw W();const e=this.left.check();if(e!==this.right.check())throw W();return e+(this.isRed()?0:1)}};es.EMPTY=null,es.RED=!0,es.BLACK=!1;es.EMPTY=new class{constructor(){this.size=0}get key(){throw W()}get value(){throw W()}get color(){throw W()}get left(){throw W()}get right(){throw W()}copy(e,n,r,s,i){return this}insert(e,n,r){return new es(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new __(this.data.getIterator())}getIteratorFrom(e){return new __(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ct(this.comparator);return n.data=e,n}}class __{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Ht([])}unionWith(e){let n=new ct(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ht(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return po(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new eE("Invalid base64 string: "+i):i}}(e);return new Ct(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const g7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(t){if(ye(!!t),typeof t=="string"){let e=0;const n=g7.exec(t);if(ye(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(t.seconds),nanos:Ue(t.nanos)}}function Ue(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Js(t){return typeof t=="string"?Ct.fromBase64String(t):Ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function nm(t){const e=t.mapValue.fields.__previous_value__;return Jh(e)?nm(e):e}function ml(t){const e=as(t.mapValue.fields.__local_write_time__.timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class gl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new gl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Zs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jh(t)?4:v7(t)?9007199254740991:10:W()}function Gn(t,e){if(t===e)return!0;const n=Zs(t);if(n!==Zs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ml(t).isEqual(ml(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=as(s.timestampValue),a=as(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Js(s.bytesValue).isEqual(Js(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ue(s.geoPointValue.latitude)===Ue(i.geoPointValue.latitude)&&Ue(s.geoPointValue.longitude)===Ue(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ue(s.integerValue)===Ue(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ue(s.doubleValue),a=Ue(i.doubleValue);return o===a?Uu(o)===Uu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return po(t.arrayValue.values||[],e.arrayValue.values||[],Gn);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(g_(o)!==g_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Gn(o[l],a[l])))return!1;return!0}(t,e);default:return W()}}function _l(t,e){return(t.values||[]).find(n=>Gn(n,e))!==void 0}function mo(t,e){if(t===e)return 0;const n=Zs(t),r=Zs(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ue(i.integerValue||i.doubleValue),l=Ue(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return v_(t.timestampValue,e.timestampValue);case 4:return v_(ml(t),ml(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Js(i),l=Js(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ce(a[c],l[c]);if(h!==0)return h}return ce(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ce(Ue(i.latitude),Ue(o.latitude));return a!==0?a:ce(Ue(i.longitude),Ue(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=mo(a[c],l[c]);if(h)return h}return ce(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Pc.mapValue&&o===Pc.mapValue)return 0;if(i===Pc.mapValue)return 1;if(o===Pc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=ce(l[d],h[d]);if(f!==0)return f;const m=mo(a[l[d]],c[h[d]]);if(m!==0)return m}return ce(l.length,h.length)}(t.mapValue,e.mapValue);default:throw W()}}function v_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=as(t),r=as(e),s=ce(n.seconds,r.seconds);return s!==0?s:ce(n.nanos,r.nanos)}function go(t){return Qf(t)}function Qf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=as(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Js(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return $.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Qf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Qf(n.fields[o])}`;return s+"}"}(t.mapValue):W()}function $u(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Yf(t){return!!t&&"integerValue"in t}function rm(t){return!!t&&"arrayValue"in t}function y_(t){return!!t&&"nullValue"in t}function w_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yc(t){return!!t&&"mapValue"in t}function ka(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return di(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ka(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ka(t.arrayValue.values[n]);return e}return Object.assign({},t)}function v7(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.value=e}static empty(){return new Ot({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ka(n)}setAll(e){let n=ot.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ka(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Yc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Gn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Yc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){di(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ot(ka(this.value))}}function tE(t){const e=[];return di(t.fields,(n,r)=>{const s=new ot([n]);if(Yc(r)){const i=tE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ht(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new gt(e,0,G.min(),G.min(),G.min(),Ot.empty(),0)}static newFoundDocument(e,n,r,s){return new gt(e,1,n,G.min(),r,s,0)}static newNoDocument(e,n){return new gt(e,2,n,G.min(),G.min(),Ot.empty(),0)}static newUnknownDocument(e,n){return new gt(e,3,n,G.min(),G.min(),Ot.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(G.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n){this.position=e,this.inclusive=n}}function E_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=$.comparator($.fromName(o.referenceValue),n.key):r=mo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function x_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Gn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n="asc"){this.field=e,this.dir=n}}function y7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{}class ze extends nE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new E7(e,n,r):n==="array-contains"?new C7(e,r):n==="in"?new I7(e,r):n==="not-in"?new S7(e,r):n==="array-contains-any"?new A7(e,r):new ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new x7(e,r):new T7(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(mo(n,this.value)):n!==null&&Zs(this.value)===Zs(n)&&this.matchesComparison(mo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends nE{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Nn(e,n)}matches(e){return rE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function rE(t){return t.op==="and"}function sE(t){return w7(t)&&rE(t)}function w7(t){for(const e of t.filters)if(e instanceof Nn)return!1;return!0}function Xf(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+go(t.value);if(sE(t))return t.filters.map(e=>Xf(e)).join(",");{const e=t.filters.map(n=>Xf(n)).join(",");return`${t.op}(${e})`}}function iE(t,e){return t instanceof ze?function(r,s){return s instanceof ze&&r.op===s.op&&r.field.isEqual(s.field)&&Gn(r.value,s.value)}(t,e):t instanceof Nn?function(r,s){return s instanceof Nn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&iE(o,s.filters[a]),!0):!1}(t,e):void W()}function oE(t){return t instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${go(n.value)}`}(t):t instanceof Nn?function(n){return n.op.toString()+" {"+n.getFilters().map(oE).join(" ,")+"}"}(t):"Filter"}class E7 extends ze{constructor(e,n,r){super(e,n,r),this.key=$.fromName(r.referenceValue)}matches(e){const n=$.comparator(e.key,this.key);return this.matchesComparison(n)}}class x7 extends ze{constructor(e,n){super(e,"in",n),this.keys=aE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class T7 extends ze{constructor(e,n){super(e,"not-in",n),this.keys=aE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function aE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>$.fromName(r.referenceValue))}class C7 extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rm(n)&&_l(n.arrayValue,this.value)}}class I7 extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_l(this.value.arrayValue,n)}}class S7 extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(_l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!_l(this.value.arrayValue,n)}}class A7 extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_l(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function T_(t,e=null,n=[],r=[],s=null,i=null,o=null){return new R7(t,e,n,r,s,i,o)}function sm(t){const e=K(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Xf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>go(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>go(r)).join(",")),e.ce=n}return e.ce}function im(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!y7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!x_(t.startAt,e.startAt)&&x_(t.endAt,e.endAt)}function Jf(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function N7(t,e,n,r,s,i,o,a){return new fi(t,e,n,r,s,i,o,a)}function Zh(t){return new fi(t)}function C_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function om(t){return t.collectionGroup!==null}function Ki(t){const e=K(t);if(e.le===null){e.le=[];const n=new Set;for(const i of e.explicitOrderBy)e.le.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ct(ot.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.le.push(new vl(i,r))}),n.has(ot.keyField().canonicalString())||e.le.push(new vl(ot.keyField(),r))}return e.le}function zn(t){const e=K(t);return e.he||(e.he=k7(e,Ki(t))),e.he}function k7(t,e){if(t.limitType==="F")return T_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new vl(s.field,i)});const n=t.endAt?new _o(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _o(t.startAt.position,t.startAt.inclusive):null;return T_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Zf(t,e){const n=t.filters.concat([e]);return new fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function zu(t,e,n){return new fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ed(t,e){return im(zn(t),zn(e))&&t.limitType===e.limitType}function lE(t){return`${sm(zn(t))}|lt:${t.limitType}`}function Ei(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>oE(s)).join(", ")}]`),Xh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>go(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>go(s)).join(",")),`Target(${r})`}(zn(t))}; limitType=${t.limitType})`}function td(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):$.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ki(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=E_(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ki(r),s)||r.endAt&&!function(o,a,l){const c=E_(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ki(r),s))}(t,e)}function P7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function cE(t){return(e,n)=>{let r=!1;for(const s of Ki(t)){const i=L7(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function L7(t,e,n){const r=t.field.isKeyField()?$.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?mo(l,c):W()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return W()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){di(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Z5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7=new He($.comparator);function gr(){return b7}const uE=new He($.comparator);function ma(...t){let e=uE;for(const n of t)e=e.insert(n.key,n);return e}function hE(t){let e=uE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ds(){return Pa()}function dE(){return Pa()}function Pa(){return new Oo(t=>t.toString(),(t,e)=>t.isEqual(e))}const D7=new He($.comparator),O7=new ct($.comparator);function ee(...t){let e=O7;for(const n of t)e=e.add(n);return e}const M7=new ct(ce);function j7(){return M7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uu(e)?"-0":e}}function pE(t){return{integerValue:""+t}}function V7(t,e){return m7(e)?pE(e):fE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(){this._=void 0}}function F7(t,e,n){return t instanceof yl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Jh(i)&&(i=nm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof vo?gE(t,e):t instanceof wl?_E(t,e):function(s,i){const o=mE(s,i),a=I_(o)+I_(s.Ie);return Yf(o)&&Yf(s.Ie)?pE(a):fE(s.serializer,a)}(t,e)}function U7(t,e,n){return t instanceof vo?gE(t,e):t instanceof wl?_E(t,e):n}function mE(t,e){return t instanceof Bu?function(r){return Yf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class yl extends nd{}class vo extends nd{constructor(e){super(),this.elements=e}}function gE(t,e){const n=vE(e);for(const r of t.elements)n.some(s=>Gn(s,r))||n.push(r);return{arrayValue:{values:n}}}class wl extends nd{constructor(e){super(),this.elements=e}}function _E(t,e){let n=vE(e);for(const r of t.elements)n=n.filter(s=>!Gn(s,r));return{arrayValue:{values:n}}}class Bu extends nd{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function I_(t){return Ue(t.integerValue||t.doubleValue)}function vE(t){return rm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,n){this.field=e,this.transform=n}}function $7(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof vo&&s instanceof vo||r instanceof wl&&s instanceof wl?po(r.elements,s.elements,Gn):r instanceof Bu&&s instanceof Bu?Gn(r.Ie,s.Ie):r instanceof yl&&s instanceof yl}(t.transform,e.transform)}class z7{constructor(e,n){this.version=e,this.transformResults=n}}class dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class rd{}function wE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new am(t.key,dn.none()):new Wl(t.key,t.data,dn.none());{const n=t.data,r=Ot.empty();let s=new ct(ot.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new _s(t.key,r,new Ht(s.toArray()),dn.none())}}function B7(t,e,n){t instanceof Wl?function(s,i,o){const a=s.value.clone(),l=A_(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof _s?function(s,i,o){if(!Xc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=A_(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(EE(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function La(t,e,n,r){return t instanceof Wl?function(i,o,a,l){if(!Xc(i.precondition,o))return a;const c=i.value.clone(),h=R_(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof _s?function(i,o,a,l){if(!Xc(i.precondition,o))return a;const c=R_(i.fieldTransforms,l,o),h=o.data;return h.setAll(EE(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,o,a){return Xc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function W7(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=mE(r.transform,s||null);i!=null&&(n===null&&(n=Ot.empty()),n.set(r.field,i))}return n||null}function S_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&po(r,s,(i,o)=>$7(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wl extends rd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class _s extends rd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function EE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function A_(t,e,n){const r=new Map;ye(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,U7(o,a,n[s]))}return r}function R_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,F7(i,o,e))}return r}class am extends rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class H7 extends rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&B7(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=La(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=La(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=dE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=wE(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(G.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ee())}isEqual(e){return this.batchId===e.batchId&&po(this.mutations,e.mutations,(n,r)=>S_(n,r))&&po(this.baseMutations,e.baseMutations,(n,r)=>S_(n,r))}}class lm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length);let s=function(){return D7}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new lm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe,re;function Q7(t){switch(t){default:return W();case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return!1;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return!0}}function xE(t){if(t===void 0)return qn("GRPC error has no .code"),A.UNKNOWN;switch(t){case Fe.OK:return A.OK;case Fe.CANCELLED:return A.CANCELLED;case Fe.UNKNOWN:return A.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return A.INTERNAL;case Fe.UNAVAILABLE:return A.UNAVAILABLE;case Fe.UNAUTHENTICATED:return A.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case Fe.NOT_FOUND:return A.NOT_FOUND;case Fe.ALREADY_EXISTS:return A.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return A.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case Fe.ABORTED:return A.ABORTED;case Fe.OUT_OF_RANGE:return A.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return A.UNIMPLEMENTED;case Fe.DATA_LOSS:return A.DATA_LOSS;default:return W()}}(re=Fe||(Fe={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7=new Gi([4294967295,4294967295],0);function N_(t){const e=Y7().encode(t),n=new JR;return n.update(e),new Uint8Array(n.digest())}function k_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Gi([n,r],0),new Gi([s,i],0)]}class cm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ga(`Invalid padding: ${n}`);if(r<0)throw new ga(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ga(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ga(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Gi.fromNumber(this.Te)}de(e,n,r){let s=e.add(n.multiply(Gi.fromNumber(r)));return s.compare(X7)===1&&(s=new Gi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=N_(e),[r,s]=k_(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new cm(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=N_(e),[r,s]=k_(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ga extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Hl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new sd(G.min(),s,new He(ce),gr(),ee())}}class Hl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Hl(r,n,ee(),ee(),ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n,r,s){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=s}}class TE{constructor(e,n){this.targetId=e,this.fe=n}}class CE{constructor(e,n,r=Ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class P_{constructor(){this.ge=0,this.pe=b_(),this.ye=Ct.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ee(),n=ee(),r=ee();return this.pe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:W()}}),new Hl(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=b_()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,ye(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class J7{constructor(e){this.Be=e,this.ke=new Map,this.qe=gr(),this.Qe=L_(),this.Ke=new He(ce)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:W()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(e){const n=e.targetId,r=e.fe.count,s=this.Ye(n);if(s){const i=s.target;if(Jf(i))if(r===0){const o=new $(i.path);this.We(n,o,gt.newNoDocument(o,G.min()))}else ye(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Js(r).toUint8Array()}catch(l){if(l instanceof eE)return fo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new cm(o,s,i)}catch(l){return fo(l instanceof ga?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.We(n,i,null),s++)}),s}it(e){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&Jf(a.target)){const l=new $(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,gt.newNoDocument(l,e))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=ee();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(e));const s=new sd(e,n,this.Ke,this.qe,r);return this.qe=gr(),this.Qe=L_(),this.Ke=new He(ce),s}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new P_,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new ct(ce),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||D("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new P_),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function L_(){return new He($.comparator)}function b_(){return new He($.comparator)}const Z7={asc:"ASCENDING",desc:"DESCENDING"},eN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tN={and:"AND",or:"OR"};class nN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function e2(t,e){return t.useProto3Json||Xh(e)?e:{value:e}}function Wu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rN(t,e){return Wu(t,e.toTimestamp())}function Bn(t){return ye(!!t),G.fromTimestamp(function(n){const r=as(n);return new Ke(r.seconds,r.nanos)}(t))}function um(t,e){return t2(t,e).canonicalString()}function t2(t,e){const n=function(s){return new _e(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function SE(t){const e=_e.fromString(t);return ye(PE(e)),e}function n2(t,e){return um(t.databaseId,e.path)}function _0(t,e){const n=SE(e);if(n.get(1)!==t.databaseId.projectId)throw new L(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(RE(n))}function AE(t,e){return um(t.databaseId,e)}function sN(t){const e=SE(t);return e.length===4?_e.emptyPath():RE(e)}function r2(t){return new _e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RE(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function D_(t,e,n){return{name:n2(t,e),fields:n.value.mapValue.fields}}function iN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:W()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(ye(h===void 0||typeof h=="string"),Ct.fromBase64String(h||"")):(ye(h===void 0||h instanceof Uint8Array),Ct.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?A.UNKNOWN:xE(c.code);return new L(h,c.message||"")}(o);n=new CE(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=_0(t,r.document.name),i=Bn(r.document.updateTime),o=r.document.createTime?Bn(r.document.createTime):G.min(),a=new Ot({mapValue:{fields:r.document.fields}}),l=gt.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Jc(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=_0(t,r.document),i=r.readTime?Bn(r.readTime):G.min(),o=gt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Jc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=_0(t,r.document),i=r.removedTargetIds||[];n=new Jc([],i,s,null)}else{if(!("filter"in e))return W();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new K7(s,i),a=r.targetId;n=new TE(a,o)}}return n}function oN(t,e){let n;if(e instanceof Wl)n={update:D_(t,e.key,e.value)};else if(e instanceof am)n={delete:n2(t,e.key)};else if(e instanceof _s)n={update:D_(t,e.key,e.data),updateMask:mN(e.fieldMask)};else{if(!(e instanceof H7))return W();n={verify:n2(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof yl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof wl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Bu)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw W()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:rN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:W()}(t,e.precondition)),n}function aN(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Bn(s.updateTime):Bn(i);return o.isEqual(G.min())&&(o=Bn(i)),new z7(o,s.transformResults||[])}(n,e))):[]}function lN(t,e){return{documents:[AE(t,e.path)]}}function cN(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=AE(t,s);const i=function(c){if(c.length!==0)return kE(Nn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:xi(f.field),direction:dN(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=e2(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:s}}function uN(t){let e=sN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(d){const f=NE(d);return f instanceof Nn&&sE(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(v){return new vl(Ti(v.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Xh(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new _o(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,m=d.values||[];return new _o(m,f)}(n.endAt)),N7(e,s,o,i,a,"F",l,c)}function hN(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function NE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ti(n.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ti(n.unaryFilter.field);return ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ti(n.unaryFilter.field);return ze.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ti(n.unaryFilter.field);return ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return W()}}(t):t.fieldFilter!==void 0?function(n){return ze.create(Ti(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return W()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Nn.create(n.compositeFilter.filters.map(r=>NE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return W()}}(n.compositeFilter.op))}(t):W()}function dN(t){return Z7[t]}function fN(t){return eN[t]}function pN(t){return tN[t]}function xi(t){return{fieldPath:t.canonicalString()}}function Ti(t){return ot.fromServerFormat(t.fieldPath)}function kE(t){return t instanceof ze?function(n){if(n.op==="=="){if(w_(n.value))return{unaryFilter:{field:xi(n.field),op:"IS_NAN"}};if(y_(n.value))return{unaryFilter:{field:xi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(w_(n.value))return{unaryFilter:{field:xi(n.field),op:"IS_NOT_NAN"}};if(y_(n.value))return{unaryFilter:{field:xi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xi(n.field),op:fN(n.op),value:n.value}}}(t):t instanceof Nn?function(n){const r=n.getFilters().map(s=>kE(s));return r.length===1?r[0]:{compositeFilter:{op:pN(n.op),filters:r}}}(t):W()}function mN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function PE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,r,s,i=G.min(),o=G.min(),a=Ct.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.ct=e}}function _N(t){const e=uN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?zu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this._n=new yN}addToCollectionParentIndex(e,n){return this._n.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(os.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(os.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class yN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ct(_e.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ct(_e.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new yo(0)}static Ln(){return new yo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(){this.changes=new Oo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&La(r.mutation,s,Ht.empty(),Ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ee()){const s=Ds();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ma();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ds();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ee()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=gr();const o=Pa(),a=function(){return Pa()}();return n.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof _s)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),La(h.mutation,c,h.mutation.getFieldMask(),Ke.now())):o.set(c.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new EN(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Pa();let s=new He((o,a)=>o-a),i=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Ht.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(s.get(a.batchId)||ee()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=dE();h.forEach(f=>{if(!i.has(f)){const m=wE(n.get(f),r.get(f));m!==null&&d.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return N.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return $.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):om(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):N.resolve(Ds());let a=-1,l=i;return o.next(c=>N.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?N.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ee())).next(h=>({batchId:a,changes:hE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(r=>{let s=ma();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ma();return this.indexManager.getCollectionParents(e,i).next(a=>N.forEach(a,l=>{const c=function(d,f){return new fi(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,gt.newInvalidDocument(h)))});let a=ma();return o.forEach((l,c)=>{const h=i.get(l);h!==void 0&&La(h.mutation,c,Ht.empty(),Ke.now()),td(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return N.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Bn(s.createTime)}}(n)),N.resolve()}getNamedQuery(e,n){return N.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:_N(s.bundledQuery),readTime:Bn(s.readTime)}}(n)),N.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.overlays=new He($.comparator),this.hr=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ds();return N.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),N.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){const s=Ds(),i=n.length+1,o=new $(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return N.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new He((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=Ds(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ds(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return N.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new G7(n,r));let i=this.hr.get(n);i===void 0&&(i=ee(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(){this.Pr=new ct(Ye.Ir),this.Tr=new ct(Ye.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Ye(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Ye(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new $(new _e([])),r=new Ye(n,e),s=new Ye(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new $(new _e([])),r=new Ye(n,e),s=new Ye(n,e+1);let i=ee();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ye(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ye{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return $.comparator(e.key,n.key)||ce(e.pr,n.pr)}static Er(e,n){return ce(e.pr,n.pr)||$.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new ct(Ye.Ir)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new q7(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new Ye(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return N.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ye(n,0),s=new Ye(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),N.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ct(ce);return n.forEach(s=>{const i=new Ye(s,0),o=new Ye(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),N.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;$.isDocumentKey(i)||(i=i.child(""));const o=new Ye(new $(i),0);let a=new ct(ce);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),N.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return N.forEach(n.mutations,s=>{const i=new Ye(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Ye(n,0),s=this.wr.firstAfterOrEqual(r);return N.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.vr=e,this.docs=function(){return new He($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():gt.newInvalidDocument(n))}getEntries(e,n){let r=gr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():gt.newInvalidDocument(s))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=gr();const o=n.path,a=new $(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||u7(c7(h),r)<=0||(s.has(h.key)||td(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return N.resolve(i)}getAllFromCollectionGroup(e,n,r,s){W()}Fr(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new AN(this)}getSize(e){return N.resolve(this.size)}}class AN extends wN{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.persistence=e,this.Mr=new Oo(n=>sm(n),im),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.Or=0,this.Nr=new hm,this.targetCount=0,this.Lr=yo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),N.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new yo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.qn(n),N.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),N.waitFor(i).next(()=>s)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),N.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),N.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),N.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n){this.Br={},this.overlays={},this.kr=new tm(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new RN(this),this.indexManager=new vN,this.remoteDocumentCache=function(s){return new SN(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new gN(n),this.$r=new TN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new CN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new IN(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){D("MemoryPersistence","Starting transaction:",e);const s=new kN(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return N.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class kN extends d7{constructor(e){super(),this.currentSequenceNumber=e}}class dm{constructor(e){this.persistence=e,this.zr=new hm,this.jr=null}static Hr(e){return new dm(e)}get Jr(){if(this.jr)return this.jr;throw W()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),N.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Jr,r=>{const s=$.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,G.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return N.or([()=>N.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=ee(),s=ee();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new fm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return N9()?8:bs.v(We())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ji(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new PN;return this.Ji(e,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>i.result)}Yi(e,n,r,s){return r.documentReadCount<this.Wi?(Zo()<=Z.DEBUG&&D("QueryEngine","SDK will not create cache indexes for query:",Ei(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),N.resolve()):(Zo()<=Z.DEBUG&&D("QueryEngine","Query:",Ei(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(Zo()<=Z.DEBUG&&D("QueryEngine","The SDK decides to create cache indexes for query:",Ei(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zn(n))):N.resolve())}ji(e,n){if(C_(n))return N.resolve(null);let r=zn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=zu(n,null,"F"),r=zn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ee(...i);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,zu(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,s){return C_(n)||s.isEqual(G.min())?N.resolve(null):this.zi.getDocuments(e,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?N.resolve(null):(Zo()<=Z.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ei(n)),this.es(e,o,n,l7(s,-1)).next(a=>a))})}Zi(e,n){let r=new ct(cE(e));return n.forEach((s,i)=>{td(e,i)&&(r=r.add(i))}),r}Xi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(e,n,r){return Zo()<=Z.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",Ei(n)),this.zi.getDocumentsMatchingQuery(e,n,os.min(),r)}es(e,n,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,n,r,s){this.persistence=e,this.ts=n,this.serializer=s,this.ns=new He(ce),this.rs=new Oo(i=>sm(i),im),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xN(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function DN(t,e,n,r){return new bN(t,e,n,r)}async function LE(t,e){const n=K(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ee();for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function ON(t,e){const n=K(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let m=N.resolve();return f.forEach(v=>{m=m.next(()=>h.getEntry(l,v)).next(w=>{const E=c.docVersions.get(v);ye(E!==null),w.version.compareTo(E)<0&&(d.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),h.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ee();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function bE(t){const e=K(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function MN(t,e){const n=K(t),r=e.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];e.targetChanges.forEach((h,d)=>{const f=s.get(d);if(!f)return;a.push(n.Qr.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(i,h.addedDocuments,d)));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(Ct.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),s=s.insert(d,m),function(w,E,p){return w.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size>0}(f,m,h)&&a.push(n.Qr.updateTargetData(i,m))});let l=gr(),c=ee();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(jN(i,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(G.min())){const h=n.Qr.getLastRemoteSnapshotVersion(i).next(d=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return N.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.ns=s,i))}function jN(t,e,n){let r=ee(),s=ee();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=gr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(G.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):D("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:s}})}function VN(t,e){const n=K(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function FN(t,e){const n=K(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,N.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new zr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function s2(t,e,n){const r=K(t),s=r.ns.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Bl(o))throw o;D("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)}function O_(t,e,n){const r=K(t);let s=G.min(),i=ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=K(l),f=d.rs.get(h);return f!==void 0?N.resolve(d.ns.get(f)):d.Qr.getTargetData(c,h)}(r,o,zn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?s:G.min(),n?i:ee())).next(a=>(UN(r,P7(e),a),{documents:a,hs:i})))}function UN(t,e,n){let r=t.ss.get(e)||G.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.ss.set(e,r)}class M_{constructor(){this.activeTargetIds=j7()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $N{constructor(){this.no=new M_,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new M_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc=null;function v0(){return Lc===null?Lc=function(){return 268435456+Math.round(2147483648*Math.random())}():Lc++,"0x"+Lc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft="WebChannelConnection";class HN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${s}/databases/${i}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get wo(){return!1}So(n,r,s,i,o){const a=v0(),l=this.bo(n,r.toUriEncodedString());D("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,i,o),this.Co(n,l,c,s).then(h=>(D("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw fo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}vo(n,r,s,i,o,a){return this.So(n,r,s,i,o)}Do(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Do}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}bo(n,r){const s=BN[n];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,s){const i=v0();return new Promise((o,a)=>{const l=new XR;l.setWithCredentials(!0),l.listenOnce(QR.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case g0.NO_ERROR:const h=l.getResponseJson();D(ft,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case g0.TIMEOUT:D(ft,`RPC '${e}' ${i} timed out`),a(new L(A.DEADLINE_EXCEEDED,"Request time out"));break;case g0.HTTP_ERROR:const d=l.getStatus();if(D(ft,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const v=function(E){const p=E.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(p)>=0?p:A.UNKNOWN}(m.status);a(new L(v,m.message))}else a(new L(A.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new L(A.UNAVAILABLE,"Connection failed."));break;default:W()}}finally{D(ft,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);D(ft,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const s=v0(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=GR(),a=KR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");D(ft,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,m=!1;const v=new WN({lo:E=>{m?D(ft,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(f||(D(ft,`Opening RPC '${e}' stream ${s} transport.`),d.open(),f=!0),D(ft,`RPC '${e}' stream ${s} sending:`,E),d.send(E))},ho:()=>d.close()}),w=(E,p,g)=>{E.listen(p,y=>{try{g(y)}catch(x){setTimeout(()=>{throw x},0)}})};return w(d,Nc.EventType.OPEN,()=>{m||D(ft,`RPC '${e}' stream ${s} transport opened.`)}),w(d,Nc.EventType.CLOSE,()=>{m||(m=!0,D(ft,`RPC '${e}' stream ${s} transport closed`),v.Vo())}),w(d,Nc.EventType.ERROR,E=>{m||(m=!0,fo(ft,`RPC '${e}' stream ${s} transport errored:`,E),v.Vo(new L(A.UNAVAILABLE,"The operation could not be completed")))}),w(d,Nc.EventType.MESSAGE,E=>{var p;if(!m){const g=E.data[0];ye(!!g);const y=g,x=y.error||((p=y[0])===null||p===void 0?void 0:p.error);if(x){D(ft,`RPC '${e}' stream ${s} received error:`,x);const C=x.status;let T=function(S){const k=Fe[S];if(k!==void 0)return xE(k)}(C),I=x.message;T===void 0&&(T=A.INTERNAL,I="Unknown error status: "+C+" with message "+x.message),m=!0,v.Vo(new L(T,I)),d.close()}else D(ft,`RPC '${e}' stream ${s} received:`,g),v.mo(g)}}),w(a,YR.STAT_EVENT,E=>{E.stat===f_.PROXY?D(ft,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===f_.NOPROXY&&D(ft,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.Ro()},0),v}}function y0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(t){return new nN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=s,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),s=Math.max(0,n-r);s>0&&D("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.$o=r,this.Uo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new DE(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===A.RESOURCE_EXHAUSTED?(qn(n.toString()),qn("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===A.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===n&&this.o_(r,s)},r=>{e(()=>{const s=new L(A.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return D("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qN extends OE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=iN(this.serializer,e),r=function(i){if(!("targetChange"in i))return G.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?G.min():o.readTime?Bn(o.readTime):G.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=r2(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Jf(l)?{documents:lN(i,l)}:{query:cN(i,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=IE(i,o.resumeToken);const c=e2(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(G.min())>0){a.readTime=Wu(i,o.snapshotVersion.toTimestamp());const c=e2(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=hN(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=r2(this.serializer),n.removeTarget=e,this.t_(n)}}class GN extends OE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=aN(e.writeResults,e.commitTime),r=Bn(e.commitTime);return this.listener.T_(r,n)}return ye(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=r2(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>oN(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new L(A.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,t2(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new L(A.UNKNOWN,i.toString())})}vo(e,n,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,t2(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(A.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class QN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(qn(n),this.g_=!1):D("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{r.enqueueAndForget(async()=>{pi(this)&&(D("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=K(l);c.v_.add(4),await ql(c),c.x_.set("Unknown"),c.v_.delete(4),await od(c)}(this))})}),this.x_=new QN(r,s)}}async function od(t){if(pi(t))for(const e of t.F_)await e(!0)}async function ql(t){for(const e of t.F_)await e(!1)}function ME(t,e){const n=K(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),_m(n)?gm(n):Mo(n).Jo()&&mm(n,e))}function pm(t,e){const n=K(t),r=Mo(n);n.C_.delete(e),r.Jo()&&jE(n,e),n.C_.size===0&&(r.Jo()?r.Xo():pi(n)&&n.x_.set("Unknown"))}function mm(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(G.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mo(t).c_(e)}function jE(t,e){t.O_.Oe(e),Mo(t).l_(e)}function gm(t){t.O_=new J7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Mo(t).start(),t.x_.p_()}function _m(t){return pi(t)&&!Mo(t).Ho()&&t.C_.size>0}function pi(t){return K(t).v_.size===0}function VE(t){t.O_=void 0}async function XN(t){t.C_.forEach((e,n)=>{mm(t,e)})}async function JN(t,e){VE(t),_m(t)?(t.x_.S_(e),gm(t)):t.x_.set("Unknown")}async function ZN(t,e,n){if(t.x_.set("Online"),e instanceof CE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.C_.delete(a),s.O_.removeTarget(a))}(t,e)}catch(r){D("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hu(t,r)}else if(e instanceof Jc?t.O_.$e(e):e instanceof TE?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(G.min()))try{const r=await bE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.C_.get(c);h&&i.C_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=i.C_.get(l);if(!h)return;i.C_.set(l,h.withResumeToken(Ct.EMPTY_BYTE_STRING,h.snapshotVersion)),jE(i,l);const d=new zr(h.target,l,c,h.sequenceNumber);mm(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){D("RemoteStore","Failed to raise snapshot:",r),await Hu(t,r)}}async function Hu(t,e,n){if(!Bl(e))throw e;t.v_.add(1),await ql(t),t.x_.set("Offline"),n||(n=()=>bE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{D("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await od(t)})}function FE(t,e){return e().catch(n=>Hu(t,n,e))}async function ad(t){const e=K(t),n=ls(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;ek(e);)try{const s=await VN(e.localStore,r);if(s===null){e.D_.length===0&&n.Xo();break}r=s.batchId,tk(e,s)}catch(s){await Hu(e,s)}UE(e)&&$E(e)}function ek(t){return pi(t)&&t.D_.length<10}function tk(t,e){t.D_.push(e);const n=ls(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function UE(t){return pi(t)&&!ls(t).Ho()&&t.D_.length>0}function $E(t){ls(t).start()}async function nk(t){ls(t).d_()}async function rk(t){const e=ls(t);for(const n of t.D_)e.I_(n.mutations)}async function sk(t,e,n){const r=t.D_.shift(),s=lm.from(r,e,n);await FE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ad(t)}async function ik(t,e){e&&ls(t).P_&&await async function(r,s){if(function(o){return Q7(o)&&o!==A.ABORTED}(s.code)){const i=r.D_.shift();ls(r).Zo(),await FE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ad(r)}}(t,e),UE(t)&&$E(t)}async function V_(t,e){const n=K(t);n.asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials");const r=pi(n);n.v_.add(3),await ql(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await od(n)}async function ok(t,e){const n=K(t);e?(n.v_.delete(2),await od(n)):e||(n.v_.add(2),await ql(n),n.x_.set("Unknown"))}function Mo(t){return t.N_||(t.N_=function(n,r,s){const i=K(n);return i.R_(),new qN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:XN.bind(null,t),To:JN.bind(null,t),u_:ZN.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),_m(t)?gm(t):t.x_.set("Unknown")):(await t.N_.stop(),VE(t))})),t.N_}function ls(t){return t.L_||(t.L_=function(n,r,s){const i=K(n);return i.R_(),new GN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:nk.bind(null,t),To:ik.bind(null,t),E_:rk.bind(null,t),T_:sk.bind(null,t)}),t.F_.push(async e=>{e?(t.L_.Zo(),await ad(t)):(await t.L_.stop(),t.D_.length>0&&(D("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new $n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new vm(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(A.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ym(t,e){if(qn("AsyncQueue",`${e}: ${t}`),Bl(t))return new L(A.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||$.comparator(n.key,r.key):(n,r)=>$.comparator(n.key,r.key),this.keyedMap=ma(),this.sortedSet=new He(this.comparator)}static emptySet(e){return new Qi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Qi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(){this.B_=new He($.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):W():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class wo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new wo(e,n,Qi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class lk{constructor(){this.queries=new Oo(e=>lE(e),ed),this.onlineState="Unknown",this.W_=new Set}}async function wm(t,e){const n=K(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.K_()&&e.U_()&&(r=2):(i=new ak,r=e.U_()?0:1);try{switch(r){case 0:i.q_=await n.onListen(s,!0);break;case 1:i.q_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=ym(o,`Initialization of query '${Ei(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Q_.push(e),e.G_(n.onlineState),i.q_&&e.z_(i.q_)&&xm(n)}async function Em(t,e){const n=K(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Q_.indexOf(e);o>=0&&(i.Q_.splice(o,1),i.Q_.length===0?s=e.U_()?0:1:!i.K_()&&e.U_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ck(t,e){const n=K(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Q_)a.z_(s)&&(r=!0);o.q_=s}}r&&xm(n)}function uk(t,e,n){const r=K(t),s=r.queries.get(e);if(s)for(const i of s.Q_)i.onError(n);r.queries.delete(e)}function xm(t){t.W_.forEach(e=>{e.next()})}var i2,U_;(U_=i2||(i2={})).j_="default",U_.Cache="cache";class Tm{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new wo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==i2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e){this.key=e}}class BE{constructor(e){this.key=e}}class hk{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=ee(),this.mutatedKeys=ee(),this.ha=cE(e),this.Pa=new Qi(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new F_,s=n?n.Pa:this.Pa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const f=s.get(h),m=td(this.query,d)?d:null,v=!!f&&this.mutatedKeys.has(f.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let E=!1;f&&m?f.data.isEqual(m.data)?v!==w&&(r.track({type:3,doc:m}),E=!0):this.da(f,m)||(r.track({type:2,doc:m}),E=!0,(l&&this.ha(m,l)>0||c&&this.ha(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),E=!0):f&&!m&&(r.track({type:1,doc:f}),E=!0,(l||c)&&(a=!0)),E&&(m?(o=o.add(m),i=w?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:i}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((h,d)=>function(m,v){const w=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W()}};return w(m)-w(v)}(h.type,d.type)||this.ha(h.doc,d.doc)),this.Aa(r),s=s!=null&&s;const a=n&&!s?this.Ra():[],l=this.la.size===0&&this.current&&!s?1:0,c=l!==this.ca;return this.ca=l,o.length!==0||c?{snapshot:new wo(this.query,e.Pa,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new F_,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=ee(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new BE(r))}),this.la.forEach(r=>{e.has(r)||n.push(new zE(r))}),n}fa(e){this.ua=e.hs,this.la=ee();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return wo.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class dk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class fk{constructor(e){this.key=e,this.pa=!1}}class pk{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Oo(a=>lE(a),ed),this.Sa=new Map,this.ba=new Set,this.Da=new He($.comparator),this.Ca=new Map,this.va=new hm,this.Fa={},this.Ma=new Map,this.xa=yo.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function mk(t,e,n=!0){const r=QE(t);let s;const i=r.wa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ga()):s=await WE(r,e,n,!0),s}async function gk(t,e){const n=QE(t);await WE(n,e,!0,!1)}async function WE(t,e,n,r){const s=await FN(t.localStore,zn(e)),i=s.targetId,o=n?t.sharedClientState.addLocalQueryTarget(i):"not-current";let a;return r&&(a=await _k(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&ME(t.remoteStore,s),a}async function _k(t,e,n,r,s){t.Na=(d,f,m)=>async function(w,E,p,g){let y=E.view.Ta(p);y.Xi&&(y=await O_(w.localStore,E.query,!1).then(({documents:I})=>E.view.Ta(I,y)));const x=g&&g.targetChanges.get(E.targetId),C=g&&g.targetMismatches.get(E.targetId)!=null,T=E.view.applyChanges(y,w.isPrimaryClient,x,C);return z_(w,E.targetId,T.Va),T.snapshot}(t,d,f,m);const i=await O_(t.localStore,e,!0),o=new hk(e,i.hs),a=o.Ta(i.documents),l=Hl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);z_(t,n,c.Va);const h=new dk(e,n,o);return t.wa.set(e,h),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}async function vk(t,e,n){const r=K(t),s=r.wa.get(e),i=r.Sa.get(s.targetId);if(i.length>1)return r.Sa.set(s.targetId,i.filter(o=>!ed(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await s2(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&pm(r.remoteStore,s.targetId),o2(r,s.targetId)}).catch(zl)):(o2(r,s.targetId),await s2(r.localStore,s.targetId,!0))}async function yk(t,e){const n=K(t),r=n.wa.get(e),s=n.Sa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),pm(n.remoteStore,r.targetId))}async function wk(t,e,n){const r=Ak(t);try{const s=await function(o,a){const l=K(o),c=Ke.now(),h=a.reduce((m,v)=>m.add(v.key),ee());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=gr(),w=ee();return l.os.getEntries(m,h).next(E=>{v=E,v.forEach((p,g)=>{g.isValidDocument()||(w=w.add(p))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,v)).next(E=>{d=E;const p=[];for(const g of a){const y=W7(g,d.get(g.key).overlayedDocument);y!=null&&p.push(new _s(g.key,y,tE(y.value.mapValue),dn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,p,a)}).next(E=>{f=E;const p=E.applyToLocalDocumentSet(d,w);return l.documentOverlayCache.saveOverlays(m,E.batchId,p)})}).then(()=>({batchId:f.batchId,changes:hE(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Fa[o.currentUser.toKey()];c||(c=new He(ce)),c=c.insert(a,l),o.Fa[o.currentUser.toKey()]=c}(r,s.batchId,n),await Gl(r,s.changes),await ad(r.remoteStore)}catch(s){const i=ym(s,"Failed to persist write");n.reject(i)}}async function HE(t,e){const n=K(t);try{const r=await MN(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Ca.get(i);o&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.pa=!0:s.modifiedDocuments.size>0?ye(o.pa):s.removedDocuments.size>0&&(ye(o.pa),o.pa=!1))}),await Gl(n,r,e)}catch(r){await zl(r)}}function $_(t,e,n){const r=K(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.wa.forEach((i,o)=>{const a=o.view.G_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=K(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.Q_)f.G_(a)&&(c=!0)}),c&&xm(l)}(r.eventManager,e),s.length&&r.ya.u_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Ek(t,e,n){const r=K(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ca.get(e),i=s&&s.key;if(i){let o=new He($.comparator);o=o.insert(i,gt.newNoDocument(i,G.min()));const a=ee().add(i),l=new sd(G.min(),new Map,new He(ce),o,a);await HE(r,l),r.Da=r.Da.remove(i),r.Ca.delete(e),Cm(r)}else await s2(r.localStore,e,!1).then(()=>o2(r,e,n)).catch(zl)}async function xk(t,e){const n=K(t),r=e.batch.batchId;try{const s=await ON(n.localStore,e);GE(n,r,null),qE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gl(n,s)}catch(s){await zl(s)}}async function Tk(t,e,n){const r=K(t);try{const s=await function(o,a){const l=K(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(ye(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);GE(r,e,n),qE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Gl(r,s)}catch(s){await zl(s)}}function qE(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function GE(t,e,n){const r=K(t);let s=r.Fa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Fa[r.currentUser.toKey()]=s}}function o2(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||KE(t,r)})}function KE(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);n!==null&&(pm(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),Cm(t))}function z_(t,e,n){for(const r of n)r instanceof zE?(t.va.addReference(r.key,e),Ck(t,r)):r instanceof BE?(D("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||KE(t,r.key)):W()}function Ck(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(D("SyncEngine","New document in limbo: "+n),t.ba.add(r),Cm(t))}function Cm(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new $(_e.fromString(e)),r=t.xa.next();t.Ca.set(r,new fk(n)),t.Da=t.Da.insert(n,r),ME(t.remoteStore,new zr(zn(Zh(n.path)),r,"TargetPurposeLimboResolution",tm._e))}}async function Gl(t,e,n){const r=K(t),s=[],i=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{o.push(r.Na(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const h=fm.Ki(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.ya.u_(s),await async function(l,c){const h=K(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>N.forEach(c,f=>N.forEach(f.qi,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>N.forEach(f.Qi,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!Bl(d))throw d;D("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const m=h.ns.get(f),v=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(v);h.ns=h.ns.insert(f,w)}}}(r.localStore,i))}async function Ik(t,e){const n=K(t);if(!n.currentUser.isEqual(e)){D("SyncEngine","User change. New user:",e.toKey());const r=await LE(n.localStore,e);n.currentUser=e,function(i,o){i.Ma.forEach(a=>{a.forEach(l=>{l.reject(new L(A.CANCELLED,o))})}),i.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gl(n,r.us)}}function Sk(t,e){const n=K(t),r=n.Ca.get(e);if(r&&r.pa)return ee().add(r.key);{let s=ee();const i=n.Sa.get(e);if(!i)return s;for(const o of i){const a=n.wa.get(o);s=s.unionWith(a.view.Ia)}return s}}function QE(t){const e=K(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ek.bind(null,e),e.ya.u_=ck.bind(null,e.eventManager),e.ya.La=uk.bind(null,e.eventManager),e}function Ak(t){const e=K(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Tk.bind(null,e),e}class B_{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=id(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return DN(this.persistence,new LN,e.initialUser,this.serializer)}createPersistence(e){return new NN(dm.Hr,this.serializer)}createSharedClientState(e){return new $N}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Rk{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ik.bind(null,this.syncEngine),await ok(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lk}()}createDatastore(e){const n=id(e.databaseInfo.databaseId),r=function(i){return new HN(i)}(e.databaseInfo);return function(i,o,a,l){return new KN(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new YN(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>$_(this.syncEngine,n,0),function(){return j_.D()?new j_:new zN}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,h){const d=new pk(s,i,o,a,l,c);return h&&(d.Oa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const s=K(r);D("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await ql(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):qn("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=pt.UNAUTHENTICATED,this.clientId=J5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{D("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(D("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new L(A.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ym(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function w0(t,e){t.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await LE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function W_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Pk(t);D("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>V_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>V_(e.remoteStore,s)),t._onlineComponents=e}function kk(t){return t.name==="FirebaseError"?t.code===A.FAILED_PRECONDITION||t.code===A.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Pk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){D("FirestoreClient","Using user provided OfflineComponentProvider");try{await w0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!kk(n))throw n;fo("Error using user provided cache. Falling back to memory cache: "+n),await w0(t,new B_)}}else D("FirestoreClient","Using default OfflineComponentProvider"),await w0(t,new B_);return t._offlineComponents}async function YE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(D("FirestoreClient","Using user provided OnlineComponentProvider"),await W_(t,t._uninitializedComponentsProvider._online)):(D("FirestoreClient","Using default OnlineComponentProvider"),await W_(t,new Rk))),t._onlineComponents}function Lk(t){return YE(t).then(e=>e.syncEngine)}async function qu(t){const e=await YE(t),n=e.eventManager;return n.onListen=mk.bind(null,e.syncEngine),n.onUnlisten=vk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=yk.bind(null,e.syncEngine),n}function bk(t,e,n={}){const r=new $n;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new Im({next:f=>{o.enqueueAndForget(()=>Em(i,d));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new L(A.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new L(A.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Tm(Zh(a.path),h,{includeMetadataChanges:!0,ta:!0});return wm(i,d)}(await qu(t),t.asyncQueue,e,n,r)),r.promise}function Dk(t,e,n={}){const r=new $n;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new Im({next:f=>{o.enqueueAndForget(()=>Em(i,d)),f.fromCache&&l.source==="server"?c.reject(new L(A.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Tm(a,h,{includeMetadataChanges:!0,ta:!0});return wm(i,d)}(await qu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(t,e,n){if(!n)throw new L(A.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ok(t,e,n,r){if(e===!0&&r===!0)throw new L(A.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function q_(t){if(!$.isDocumentKey(t))throw new L(A.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function G_(t){if($.isDocumentKey(t))throw new L(A.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ld(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":W()}function zt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ld(t);throw new L(A.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Mk(t,e){if(e<=0)throw new L(A.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new L(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ok("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new L(A.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new L(A.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new L(A.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new L(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new L(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ZR;switch(r.type){case"firstParty":return new r7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(A.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=H_.get(n);r&&(D("ComponentProvider","Removing Datastore"),H_.delete(n),r.terminate())}(this),Promise.resolve()}}function jk(t,e,n,r={}){var s;const i=(t=zt(t,cd))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=pt.MOCK_USER;else{a=Ap(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new L(A.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new pt(c)}t._authCredentials=new e7(new X5(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yn(this.firestore,e,this._query)}}class xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}}class ts extends Yn{constructor(e,n,r){super(e,n,Zh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new $(e))}withConverter(e){return new ts(this.firestore,e,this._path)}}function It(t,e,...n){if(t=ge(t),JE("collection","path",e),t instanceof cd){const r=_e.fromString(e,...n);return G_(r),new ts(t,null,r)}{if(!(t instanceof xt||t instanceof ts))throw new L(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return G_(r),new ts(t.firestore,null,r)}}function oe(t,e,...n){if(t=ge(t),arguments.length===1&&(e=J5.newId()),JE("doc","path",e),t instanceof cd){const r=_e.fromString(e,...n);return q_(r),new xt(t,null,new $(r))}{if(!(t instanceof xt||t instanceof ts))throw new L(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return q_(r),new xt(t.firestore,t instanceof ts?t.converter:null,new $(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new DE(this,"async_queue_retry"),this.cu=()=>{const n=y0();n&&D("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=y0();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=y0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new $n;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Bl(e))throw e;D("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw qn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const s=vm.createAndSchedule(this,e,n,r,i=>this.Iu(i));return this.su.push(s),s}lu(){this.ou&&W()}verifyOperationInProgress(){}async Tu(){let e;do e=this.nu,await e;while(e!==this.nu)}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function Q_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class _r extends cd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new Vk}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||ZE(this),this._firestoreClient.terminate()}}function Fk(t,e){const n=typeof t=="object"?t:Dh(),r=typeof t=="string"?t:e||"(default)",s=bl(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Ip("firestore");i&&jk(s,...i)}return s}function ud(t){return t._firestoreClient||ZE(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ZE(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,h){return new _7(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,XE(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new Nk(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Eo(Ct.fromBase64String(e))}catch(n){throw new L(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Eo(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=/^__.*__$/;class $k{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _s(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wl(e,this.data,n,this.fieldTransforms)}}class ex{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new _s(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W()}}class dd{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new dd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.mu({path:r,gu:!1});return s.pu(e),s}yu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.mu({path:r,gu:!1});return s.Ru(),s}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Gu(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(tx(this.Vu)&&Uk.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class zk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||id(e)}Cu(e,n,r,s=!1){return new dd({Vu:e,methodName:n,Du:r,path:ot.emptyPath(),gu:!1,bu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ql(t){const e=t._freezeSettings(),n=id(t._databaseId);return new zk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nx(t,e,n,r,s,i={}){const o=t.Cu(i.merge||i.mergeFields?2:0,e,n,s);Nm("Data must be an object, but it was:",o,r);const a=sx(r,o);let l,c;if(i.merge)l=new Ht(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const f=a2(e,d,n);if(!o.contains(f))throw new L(A.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);ox(h,f)||h.push(f)}l=new Ht(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new $k(new Ot(a),l,c)}class fd extends Kl{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fd}}function Bk(t,e,n){return new dd({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Am extends Kl{_toFieldTransform(e){return new yE(e.path,new yl)}isEqual(e){return e instanceof Am}}class Rm extends Kl{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=Bk(this,e,!0),r=this.vu.map(i=>jo(i,n)),s=new vo(r);return new yE(e.path,s)}isEqual(e){return e instanceof Rm&&sl(this.vu,e.vu)}}function Wk(t,e,n,r){const s=t.Cu(1,e,n);Nm("Data must be an object, but it was:",s,r);const i=[],o=Ot.empty();di(r,(l,c)=>{const h=km(e,l,n);c=ge(c);const d=s.yu(h);if(c instanceof fd)i.push(h);else{const f=jo(c,d);f!=null&&(i.push(h),o.set(h,f))}});const a=new Ht(i);return new ex(o,a,s.fieldTransforms)}function Hk(t,e,n,r,s,i){const o=t.Cu(1,e,n),a=[a2(e,r,n)],l=[s];if(i.length%2!=0)throw new L(A.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(a2(e,i[f])),l.push(i[f+1]);const c=[],h=Ot.empty();for(let f=a.length-1;f>=0;--f)if(!ox(c,a[f])){const m=a[f];let v=l[f];v=ge(v);const w=o.yu(m);if(v instanceof fd)c.push(m);else{const E=jo(v,w);E!=null&&(c.push(m),h.set(m,E))}}const d=new Ht(c);return new ex(h,d,o.fieldTransforms)}function rx(t,e,n,r=!1){return jo(n,t.Cu(r?4:3,e))}function jo(t,e){if(ix(t=ge(t)))return Nm("Unsupported field value:",e,t),sx(t,e);if(t instanceof Kl)return function(r,s){if(!tx(s.Vu))throw s.Su(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Su(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=jo(a,s.wu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return V7(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ke.fromDate(r);return{timestampValue:Wu(s.serializer,i)}}if(r instanceof Ke){const i=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wu(s.serializer,i)}}if(r instanceof Sm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Eo)return{bytesValue:IE(s.serializer,r._byteString)};if(r instanceof xt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:um(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Su(`Unsupported field value: ${ld(r)}`)}(t,e)}function sx(t,e){const n={};return Z5(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):di(t,(r,s)=>{const i=jo(s,e.fu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function ix(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof Sm||t instanceof Eo||t instanceof xt||t instanceof Kl)}function Nm(t,e,n){if(!ix(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ld(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function a2(t,e,n){if((e=ge(e))instanceof hd)return e._internalPath;if(typeof e=="string")return km(t,e);throw Gu("Field path arguments must be of type string or ",t,!1,void 0,n)}const qk=new RegExp("[~\\*/\\[\\]]");function km(t,e,n){if(e.search(qk)>=0)throw Gu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hd(...e.split("."))._internalPath}catch{throw Gu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Gu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new L(A.INVALID_ARGUMENT,a+t+l)}function ox(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Gk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Lm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Gk extends Pm{data(){return super.data()}}function Lm(t,e){return typeof e=="string"?km(t,e):e instanceof hd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bm{}class pd extends bm{}function Yi(t,e,...n){let r=[];e instanceof bm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Om).length,a=i.filter(l=>l instanceof Dm).length;if(o>1||o>0&&a>0)throw new L(A.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Dm extends pd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Dm(e,n,r)}_apply(e){const n=this._parse(e);return cx(e._query,n),new Yn(e.firestore,e.converter,Zf(e._query,n))}_parse(e){const n=Ql(e.firestore);return function(i,o,a,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(A.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){X_(d,h);const m=[];for(const v of d)m.push(Y_(l,i,v));f={arrayValue:{values:m}}}else f=Y_(l,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||X_(d,h),f=rx(a,o,d,h==="in"||h==="not-in");return ze.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Om extends bm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Om(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Nn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)cx(o,l),o=Zf(o,l)}(e._query,n),new Yn(e.firestore,e.converter,Zf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Mm extends pd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Mm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new L(A.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new L(A.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vl(i,o)}(e._query,this._field,this._direction);return new Yn(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new fi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Ku(t,e="asc"){const n=e,r=Lm("orderBy",t);return Mm._create(r,n)}class jm extends pd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new jm(e,n,r)}_apply(e){return new Yn(e.firestore,e.converter,zu(e._query,this._limit,this._limitType))}}function Qu(t){return Mk("limit",t),jm._create("limit",t,"F")}class Vm extends pd{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Vm(e,n,r)}_apply(e){const n=Kk(e,this.type,this._docOrFields,this._inclusive);return new Yn(e.firestore,e.converter,function(s,i){return new fi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function lx(...t){return Vm._create("startAfter",t,!1)}function Kk(t,e,n,r){if(n[0]=ge(n[0]),n[0]instanceof Pm)return function(i,o,a,l,c){if(!l)throw new L(A.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const d of Ki(i))if(d.field.isKeyField())h.push($u(o,l.key));else{const f=l.data.field(d.field);if(Jh(f))throw new L(A.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=d.field.canonicalString();throw new L(A.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}h.push(f)}return new _o(h,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Ql(t.firestore);return function(o,a,l,c,h,d){const f=o.explicitOrderBy;if(h.length>f.length)throw new L(A.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let v=0;v<h.length;v++){const w=h[v];if(f[v].field.isKeyField()){if(typeof w!="string")throw new L(A.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof w}`);if(!om(o)&&w.indexOf("/")!==-1)throw new L(A.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${w}' contains a slash.`);const E=o.path.child(_e.fromString(w));if(!$.isDocumentKey(E))throw new L(A.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const p=new $(E);m.push($u(a,p))}else{const E=rx(l,c,w);m.push(E)}}return new _o(m,d)}(t._query,t.firestore._databaseId,s,e,n,r)}}function Y_(t,e,n){if(typeof(n=ge(n))=="string"){if(n==="")throw new L(A.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!om(e)&&n.indexOf("/")!==-1)throw new L(A.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_e.fromString(n));if(!$.isDocumentKey(r))throw new L(A.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $u(t,new $(r))}if(n instanceof xt)return $u(t,n._key);throw new L(A.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ld(n)}.`)}function X_(t,e){if(!Array.isArray(t)||t.length===0)throw new L(A.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cx(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new L(A.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(A.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Qk{convertValue(e,n="none"){switch(Zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw W()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return di(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new Sm(Ue(e.latitude),Ue(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=nm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ml(e));default:return null}}convertTimestamp(e){const n=as(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_e.fromString(e);ye(PE(r));const s=new gl(r.get(1),r.get(3)),i=new $(r.popFirst(5));return s.isEqual(n)||qn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hx extends Pm{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Lm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Zc extends hx{data(e={}){return super.data(e)}}class dx{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new _a(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Zc(this._firestore,this._userDataWriter,r.key,r,new _a(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Zc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new _a(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Zc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new _a(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Yk(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Yk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t){t=zt(t,xt);const e=zt(t.firestore,_r);return bk(ud(e),t._key).then(n=>mx(e,t,n))}class Fm extends Qk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function Xk(t){t=zt(t,Yn);const e=zt(t.firestore,_r),n=ud(e),r=new Fm(e);return ax(t._query),Dk(n,t._query).then(s=>new dx(e,r,t,s))}function px(t,e,n){t=zt(t,xt);const r=zt(t.firestore,_r),s=ux(t.converter,e,n);return md(r,[nx(Ql(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,dn.none())])}function St(t,e,n,...r){t=zt(t,xt);const s=zt(t.firestore,_r),i=Ql(s);let o;return o=typeof(e=ge(e))=="string"||e instanceof hd?Hk(i,"updateDoc",t._key,e,n,r):Wk(i,"updateDoc",t._key,e),md(s,[o.toMutation(t._key,dn.exists(!0))])}function Yl(t){return md(zt(t.firestore,_r),[new am(t._key,dn.none())])}function Vo(t,e){const n=zt(t.firestore,_r),r=oe(t),s=ux(t.converter,e);return md(n,[nx(Ql(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,dn.exists(!1))]).then(()=>r)}function Kn(t,...e){var n,r,s;t=ge(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Q_(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Q_(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,c,h;if(t instanceof xt)c=zt(t.firestore,_r),h=Zh(t._key.path),l={next:d=>{e[o]&&e[o](mx(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=zt(t,Yn);c=zt(d.firestore,_r),h=d._query;const f=new Fm(c);l={next:m=>{e[o]&&e[o](new dx(c,f,d,m))},error:e[o+1],complete:e[o+2]},ax(t._query)}return function(f,m,v,w){const E=new Im(w),p=new Tm(m,E,v);return f.asyncQueue.enqueueAndForget(async()=>wm(await qu(f),p)),()=>{E.Qa(),f.asyncQueue.enqueueAndForget(async()=>Em(await qu(f),p))}}(ud(c),h,a,l)}function md(t,e){return function(r,s){const i=new $n;return r.asyncQueue.enqueueAndForget(async()=>wk(await Lk(r),s,i)),i.promise}(ud(t),e)}function mx(t,e,n){const r=n.docs.get(e._key),s=new Fm(t);return new hx(t,s,e._key,r,new _a(n.hasPendingWrites,n.fromCache),e.converter)}function jt(){return new Am("serverTimestamp")}function Jk(...t){return new Rm("arrayUnion",t)}(function(e,n=!0){(function(s){Do=s})(ps),is(new pr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new _r(new t7(r.getProvider("auth-internal")),new i7(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new L(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gl(c.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),hn(p_,"4.5.0",e),hn(p_,"4.5.0","esm2017")})();var Zk="firebase",e8="10.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn(Zk,e8,"app");function Um(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function gx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const t8=gx,_x=new Ll("auth","Firebase",gx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=new bh("@firebase/auth");function n8(t,...e){Yu.logLevel<=Z.WARN&&Yu.warn(`Auth (${ps}): ${t}`,...e)}function eu(t,...e){Yu.logLevel<=Z.ERROR&&Yu.error(`Auth (${ps}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t,...e){throw $m(t,...e)}function Wn(t,...e){return $m(t,...e)}function vx(t,e,n){const r=Object.assign(Object.assign({},t8()),{[e]:n});return new Ll("auth","Firebase",r).create(e,{appName:t.name})}function r8(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&mn(t,"argument-error"),vx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $m(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return _x.create(t,...e)}function B(t,e,...n){if(!t)throw $m(e,...n)}function ir(t){const e="INTERNAL ASSERTION FAILED: "+t;throw eu(e),new Error(e)}function vr(t,e){t||ir(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function s8(){return J_()==="http:"||J_()==="https:"}function J_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(s8()||A9()||"connection"in navigator)?navigator.onLine:!0}function o8(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n){this.shortDelay=e,this.longDelay=n,vr(n>e,"Short delay should be less than long delay!"),this.isMobile=Rp()||F3()}get(){return i8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t,e){vr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8=new Xl(3e4,6e4);function vs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ys(t,e,n,r,s={}){return wx(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Po(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),yx.fetch()(Ex(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function wx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},a8),e);try{const s=new u8(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw bc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw bc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw bc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw bc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw vx(t,h,c);mn(t,h)}}catch(s){if(s instanceof Qn)throw s;mn(t,"network-request-failed",{message:String(s)})}}async function Jl(t,e,n,r,s={}){const i=await ys(t,e,n,r,s);return"mfaPendingCredential"in i&&mn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Ex(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?zm(t.config,s):`${t.config.apiScheme}://${s}`}function c8(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class u8{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Wn(this.auth,"network-request-failed")),l8.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Wn(t,e,r);return s.customData._tokenResponse=n,s}function Z_(t){return t!==void 0&&t.enterprise!==void 0}class h8{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return c8(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function d8(t,e){return ys(t,"GET","/v2/recaptchaConfig",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f8(t,e){return ys(t,"POST","/v1/accounts:delete",e)}async function p8(t,e){return ys(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function m8(t,e=!1){const n=ge(t),r=await n.getIdToken(e),s=Bm(r);B(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ba(E0(s.auth_time)),issuedAtTime:ba(E0(s.iat)),expirationTime:ba(E0(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function E0(t){return Number(t)*1e3}function Bm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return eu("JWT malformed, contained fewer than 3 sections"),null;try{const s=Pu(n);return s?JSON.parse(s):(eu("Failed to decode base64 JWT payload"),null)}catch(s){return eu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function g8(t){const e=Bm(t);return B(e,"internal-error"),B(typeof e.exp<"u","internal-error"),B(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Qn&&_8(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function _8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ba(this.lastLoginAt),this.creationTime=ba(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await El(t,p8(n,{idToken:r}));B(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?E8(i.providerUserInfo):[],a=w8(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new xx(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function y8(t){const e=ge(t);await Xu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function w8(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function E8(t){return t.map(e=>{var{providerId:n}=e,r=Um(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x8(t,e){const n=await wx(t,{},async()=>{const r=Po({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Ex(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",yx.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function T8(t,e){return ys(t,"POST","/v2/accounts:revokeToken",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){B(e.idToken,"internal-error"),B(typeof e.idToken<"u","internal-error"),B(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):g8(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return B(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await x8(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new xl;return r&&(B(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(B(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(B(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xl,this.toJSON())}_performRefresh(){return ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(t,e){B(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zs{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Um(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new v8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new xx(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await El(this,this.stsTokenManager.getToken(this.auth,e));return B(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return m8(this,e)}reload(){return y8(this)}_assign(e){this!==e&&(B(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Xu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await El(this,f8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,p=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:y,emailVerified:x,isAnonymous:C,providerData:T,stsTokenManager:I}=n;B(y&&I,e,"internal-error");const R=xl.fromJSON(this.name,I);B(typeof y=="string",e,"internal-error"),Nr(d,e.name),Nr(f,e.name),B(typeof x=="boolean",e,"internal-error"),B(typeof C=="boolean",e,"internal-error"),Nr(m,e.name),Nr(v,e.name),Nr(w,e.name),Nr(E,e.name),Nr(p,e.name),Nr(g,e.name);const S=new zs({uid:y,auth:e,email:f,emailVerified:x,displayName:d,isAnonymous:C,photoURL:v,phoneNumber:m,tenantId:w,stsTokenManager:R,createdAt:p,lastLoginAt:g});return T&&Array.isArray(T)&&(S.providerData=T.map(k=>Object.assign({},k))),E&&(S._redirectEventId=E),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new xl;s.updateFromServerResponse(n);const i=new zs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Xu(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=new Map;function or(t){vr(t instanceof Function,"Expected a class definition");let e=ev.get(t);return e?(vr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ev.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Tx.type="NONE";const tv=Tx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(t,e,n){return`firebase:${t}:${e}:${n}`}class Xi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=tu(this.userKey,s.apiKey,i),this.fullPersistenceKey=tu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xi(or(tv),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||or(tv);const o=tu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=zs._fromJSON(e,h);c!==i&&(a=d),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Xi(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Xi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Sx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Cx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Rx(e))return"Blackberry";if(Nx(e))return"Webos";if(Wm(e))return"Safari";if((e.includes("chrome/")||Ix(e))&&!e.includes("edge/"))return"Chrome";if(Ax(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Cx(t=We()){return/firefox\//i.test(t)}function Wm(t=We()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ix(t=We()){return/crios\//i.test(t)}function Sx(t=We()){return/iemobile/i.test(t)}function Ax(t=We()){return/android/i.test(t)}function Rx(t=We()){return/blackberry/i.test(t)}function Nx(t=We()){return/webos/i.test(t)}function gd(t=We()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function C8(t=We()){var e;return gd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function I8(){return R9()&&document.documentMode===10}function kx(t=We()){return gd(t)||Ax(t)||Nx(t)||Rx(t)||/windows phone/i.test(t)||Sx(t)}function S8(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t,e=[]){let n;switch(t){case"Browser":n=nv(We());break;case"Worker":n=`${nv(We())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ps}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R8(t,e={}){return ys(t,"GET","/v2/passwordPolicy",vs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8=6;class k8{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:N8,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rv(this),this.idTokenSubscription=new rv(this),this.beforeStateQueue=new A8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_x,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=or(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Xi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return B(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Xu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=o8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ge(e):null;return n&&B(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&B(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await R8(this),n=new k8(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ll("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await T8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&or(e)||this._popupRedirectResolver;B(n,this,"argument-error"),this.redirectPersistenceManager=await Xi.create(this,[or(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(B(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Px(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&n8(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ws(t){return ge(t)}class rv{constructor(e){this.auth=e,this.observer=null,this.addObserver=j9(n=>this.observer=n)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _d={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function L8(t){_d=t}function Lx(t){return _d.loadJS(t)}function b8(){return _d.recaptchaEnterpriseScript}function D8(){return _d.gapiScript}function O8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const M8="recaptcha-enterprise",j8="NO_RECAPTCHA";class V8{constructor(e){this.type=M8,this.auth=ws(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{d8(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new h8(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;Z_(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(j8)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Z_(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=b8();l.length!==0&&(l+=a),Lx(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function sv(t,e,n,r=!1){const s=new V8(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function c2(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await sv(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await sv(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F8(t,e){const n=bl(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(sl(i,e??{}))return s;mn(s,"already-initialized")}return n.initialize({options:e})}function U8(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(or);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $8(t,e,n){const r=ws(t);B(r._canInitEmulator,r,"emulator-config-failed"),B(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=bx(e),{host:o,port:a}=z8(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||B8()}function bx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function z8(t){const e=bx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:iv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:iv(o)}}}function iv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function B8(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ir("not implemented")}_getIdTokenResponse(e){return ir("not implemented")}_linkToIdToken(e,n){return ir("not implemented")}_getReauthenticationResolver(e){return ir("not implemented")}}async function W8(t,e){return ys(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H8(t,e){return Jl(t,"POST","/v1/accounts:signInWithPassword",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q8(t,e){return Jl(t,"POST","/v1/accounts:signInWithEmailLink",vs(t,e))}async function G8(t,e){return Jl(t,"POST","/v1/accounts:signInWithEmailLink",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends Hm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Tl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Tl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return c2(e,n,"signInWithPassword",H8);case"emailLink":return q8(e,{email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return c2(e,r,"signUpPassword",W8);case"emailLink":return G8(e,{idToken:n,email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ji(t,e){return Jl(t,"POST","/v1/accounts:signInWithIdp",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K8="http://localhost";class ei extends Hm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ei(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Um(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ei(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ji(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ji(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ji(e,n)}buildRequest(){const e={requestUri:K8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Po(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Y8(t){const e=ha(da(t)).link,n=e?ha(da(e)).deep_link_id:null,r=ha(da(t)).deep_link_id;return(r?ha(da(r)).link:null)||r||n||e||t}class qm{constructor(e){var n,r,s,i,o,a;const l=ha(da(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=Q8((s=l.mode)!==null&&s!==void 0?s:null);B(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=Y8(e);try{return new qm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.providerId=Fo.PROVIDER_ID}static credential(e,n){return Tl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=qm.parseLink(n);return B(r,"argument-error"),Tl._fromEmailAndCode(e,r.code,r.tenantId)}}Fo.PROVIDER_ID="password";Fo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends Gm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Zl{constructor(){super("facebook.com")}static credential(e){return ei._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dr.credential(e.oauthAccessToken)}catch{return null}}}Dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends Zl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ei._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return tr.credential(n,r)}catch{return null}}}tr.GOOGLE_SIGN_IN_METHOD="google.com";tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Zl{constructor(){super("github.com")}static credential(e){return ei._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Or.credential(e.oauthAccessToken)}catch{return null}}}Or.GITHUB_SIGN_IN_METHOD="github.com";Or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends Zl{constructor(){super("twitter.com")}static credential(e,n){return ei._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Mr.credential(n,r)}catch{return null}}}Mr.TWITTER_SIGN_IN_METHOD="twitter.com";Mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X8(t,e){return Jl(t,"POST","/v1/accounts:signUp",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await zs._fromIdTokenResponse(e,r,s),o=ov(r);return new ti({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=ov(r);return new ti({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function ov(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends Qn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ju.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ju(e,n,r,s)}}function Dx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ju._fromErrorAndOperation(t,i,e,r):i})}async function J8(t,e,n=!1){const r=await El(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ti._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z8(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await El(t,Dx(r,s,e,t),n);B(i.idToken,r,"internal-error");const o=Bm(i.idToken);B(o,r,"internal-error");const{sub:a}=o;return B(t.uid===a,r,"user-mismatch"),ti._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&mn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ox(t,e,n=!1){const r="signIn",s=await Dx(t,r,e),i=await ti._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function eP(t,e){return Ox(ws(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mx(t){const e=ws(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tP(t,e,n){const r=ws(t),o=await c2(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",X8).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Mx(t),l}),a=await ti._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function nP(t,e,n){return eP(ge(t),Fo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Mx(t),r})}function rP(t,e,n,r){return ge(t).onIdTokenChanged(e,n,r)}function sP(t,e,n){return ge(t).beforeAuthStateChanged(e,n)}function iP(t,e,n,r){return ge(t).onAuthStateChanged(e,n,r)}function oP(t){return ge(t).signOut()}const Zu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zu,"1"),this.storage.removeItem(Zu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(){const t=We();return Wm(t)||gd(t)}const lP=1e3,cP=10;class Vx extends jx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=aP()&&S8(),this.fallbackToPolling=kx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);I8()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,cP):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},lP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Vx.type="LOCAL";const uP=Vx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx extends jx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Fx.type="SESSION";const Ux=Fx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new vd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await hP(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Km("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(){return window}function fP(t){Hn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(){return typeof Hn().WorkerGlobalScope<"u"&&typeof Hn().importScripts=="function"}async function pP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function gP(){return $x()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx="firebaseLocalStorageDb",_P=1,eh="firebaseLocalStorage",Bx="fbase_key";class ec{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yd(t,e){return t.transaction([eh],e?"readwrite":"readonly").objectStore(eh)}function vP(){const t=indexedDB.deleteDatabase(zx);return new ec(t).toPromise()}function u2(){const t=indexedDB.open(zx,_P);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(eh,{keyPath:Bx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(eh)?e(r):(r.close(),await vP(),e(await u2()))})})}async function av(t,e,n){const r=yd(t,!0).put({[Bx]:e,value:n});return new ec(r).toPromise()}async function yP(t,e){const n=yd(t,!1).get(e),r=await new ec(n).toPromise();return r===void 0?null:r.value}function lv(t,e){const n=yd(t,!0).delete(e);return new ec(n).toPromise()}const wP=800,EP=3;class Wx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await u2(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>EP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $x()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vd._getInstance(gP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await pP(),!this.activeServiceWorker)return;this.sender=new dP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await u2();return await av(e,Zu,"1"),await lv(e,Zu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>av(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>yP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>lv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=yd(s,!1).getAll();return new ec(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Wx.type="LOCAL";const xP=Wx;new Xl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(t,e){return e?or(e):(B(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm extends Hm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ji(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ji(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ji(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function TP(t){return Ox(t.auth,new Qm(t),t.bypassAuthState)}function CP(t){const{auth:e,user:n}=t;return B(n,e,"internal-error"),Z8(n,new Qm(t),t.bypassAuthState)}async function IP(t){const{auth:e,user:n}=t;return B(n,e,"internal-error"),J8(n,new Qm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TP;case"linkViaPopup":case"linkViaRedirect":return IP;case"reauthViaPopup":case"reauthViaRedirect":return CP;default:mn(this.auth,"internal-error")}}resolve(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=new Xl(2e3,1e4);async function AP(t,e,n){const r=ws(t);r8(t,e,Gm);const s=Hx(r,n);return new Os(r,"signInViaPopup",e,s).executeNotNull()}class Os extends qx{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Os.currentPopupAction&&Os.currentPopupAction.cancel(),Os.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return B(e,this.auth,"internal-error"),e}async onExecution(){vr(this.filter.length===1,"Popup operations only handle one event");const e=Km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Os.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,SP.get())};e()}}Os.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP="pendingRedirect",nu=new Map;class NP extends qx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=nu.get(this.auth._key());if(!e){try{const r=await kP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}nu.set(this.auth._key(),e)}return this.bypassAuthState||nu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kP(t,e){const n=bP(e),r=LP(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function PP(t,e){nu.set(t._key(),e)}function LP(t){return or(t._redirectPersistence)}function bP(t){return tu(RP,t.config.apiKey,t.name)}async function DP(t,e,n=!1){const r=ws(t),s=Hx(r,e),o=await new NP(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=10*60*1e3;class MP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Gx(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Wn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OP&&this.cachedEventUids.clear(),this.cachedEventUids.has(cv(e))}saveEventToCache(e){this.cachedEventUids.add(cv(e)),this.lastProcessedEventTime=Date.now()}}function cv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Gx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VP(t,e={}){return ys(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UP=/^https?/;async function $P(t){if(t.config.emulator)return;const{authorizedDomains:e}=await VP(t);for(const n of e)try{if(zP(n))return}catch{}mn(t,"unauthorized-domain")}function zP(t){const e=l2(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!UP.test(n))return!1;if(FP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=new Xl(3e4,6e4);function uv(){const t=Hn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function WP(t){return new Promise((e,n)=>{var r,s,i;function o(){uv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uv(),n(Wn(t,"network-request-failed"))},timeout:BP.get()})}if(!((s=(r=Hn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Hn().gapi)===null||i===void 0)&&i.load)o();else{const a=O8("iframefcb");return Hn()[a]=()=>{gapi.load?o():n(Wn(t,"network-request-failed"))},Lx(`${D8()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw ru=null,e})}let ru=null;function HP(t){return ru=ru||WP(t),ru}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=new Xl(5e3,15e3),GP="__/auth/iframe",KP="emulator/auth/iframe",QP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XP(t){const e=t.config;B(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?zm(e,KP):`https://${t.config.authDomain}/${GP}`,r={apiKey:e.apiKey,appName:t.name,v:ps},s=YP.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Po(r).slice(1)}`}async function JP(t){const e=await HP(t),n=Hn().gapi;return B(n,t,"internal-error"),e.open({where:document.body,url:XP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QP,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Wn(t,"network-request-failed"),a=Hn().setTimeout(()=>{i(o)},qP.get());function l(){Hn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eL=500,tL=600,nL="_blank",rL="http://localhost";class hv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sL(t,e,n,r=eL,s=tL){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},ZP),{width:r.toString(),height:s.toString(),top:i,left:o}),c=We().toLowerCase();n&&(a=Ix(c)?nL:n),Cx(c)&&(e=e||rL,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(C8(c)&&a!=="_self")return iL(e||"",a),new hv(null);const d=window.open(e||"",a,h);B(d,t,"popup-blocked");try{d.focus()}catch{}return new hv(d)}function iL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL="__/auth/handler",aL="emulator/auth/handler",lL=encodeURIComponent("fac");async function dv(t,e,n,r,s,i){B(t.config.authDomain,t,"auth-domain-config-required"),B(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ps,eventId:s};if(e instanceof Gm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",kf(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(i||{}))o[h]=d}if(e instanceof Zl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${lL}=${encodeURIComponent(l)}`:"";return`${cL(t)}?${Po(a).slice(1)}${c}`}function cL({config:t}){return t.emulator?zm(t,aL):`https://${t.authDomain}/${oL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="webStorageSupport";class uL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ux,this._completeRedirectFn=DP,this._overrideRedirectResult=PP}async _openPopup(e,n,r,s){var i;vr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await dv(e,n,r,l2(),s);return sL(e,o,Km())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await dv(e,n,r,l2(),s);return fP(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(vr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await JP(e),r=new MP(e);return n.register("authEvent",s=>(B(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(x0,{type:x0},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[x0];o!==void 0&&n(!!o),mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$P(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kx()||Wm()||gd()}}const hL=uL;var fv="@firebase/auth",pv="1.6.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pL(t){is(new pr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;B(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Px(t)},c=new P8(r,s,i,l);return U8(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),is(new pr("auth-internal",e=>{const n=ws(e.getProvider("auth").getImmediate());return(r=>new dL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),hn(fv,pv,fL(t)),hn(fv,pv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=5*60,gL=V3("authIdTokenMaxAge")||mL;let mv=null;const _L=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>gL)return;const s=n==null?void 0:n.token;mv!==s&&(mv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function vL(t=Dh()){const e=bl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=F8(t,{popupRedirectResolver:hL,persistence:[xP,uP,Ux]}),r=V3("authTokenSyncURL");if(r&&r.match(/^\/[^\/].*/)){const i=_L(r);sP(n,i,()=>i(n.currentUser)),rP(n,o=>i(o))}const s=M3("auth");return s&&$8(n,`http://${s}`),n}function yL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}L8({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Wn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",yL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pL("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="firebasestorage.googleapis.com",Qx="storageBucket",wL=2*60*1e3,EL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je extends Qn{constructor(e,n,r=0){super(T0(e),`Firebase Storage: ${n} (${T0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,je.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return T0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Me;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Me||(Me={}));function T0(t){return"storage/"+t}function Ym(){const t="An unknown error occurred, please check the error payload for server response.";return new je(Me.UNKNOWN,t)}function xL(t){return new je(Me.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function TL(t){return new je(Me.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function CL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new je(Me.UNAUTHENTICATED,t)}function IL(){return new je(Me.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function SL(t){return new je(Me.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function AL(){return new je(Me.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function RL(){return new je(Me.CANCELED,"User canceled the upload/download.")}function NL(t){return new je(Me.INVALID_URL,"Invalid URL '"+t+"'.")}function kL(t){return new je(Me.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function PL(){return new je(Me.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Qx+"' property when initializing the app?")}function LL(){return new je(Me.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bL(){return new je(Me.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function DL(t){return new je(Me.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function h2(t){return new je(Me.INVALID_ARGUMENT,t)}function Yx(){return new je(Me.APP_DELETED,"The Firebase app was deleted.")}function OL(t){return new je(Me.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Da(t,e){return new je(Me.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ea(t){throw new je(Me.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=qt.makeFromUrl(e,n)}catch{return new qt(e,"")}if(r.path==="")return r;throw kL(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(x){x.path_=decodeURIComponent(x.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${s}/o${f}`,"i"),v={bucket:1,path:3},w=n===Kx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",p=new RegExp(`^https?://${w}/${s}/${E}`,"i"),y=[{regex:a,indices:l,postModify:i},{regex:m,indices:v,postModify:c},{regex:p,indices:{bucket:1,path:2},postModify:c}];for(let x=0;x<y.length;x++){const C=y[x],T=C.regex.exec(e);if(T){const I=T[C.indices.bucket];let R=T[C.indices.path];R||(R=""),r=new qt(I,R),C.postModify(r);break}}if(r==null)throw NL(e);return r}}class ML{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...E){c||(c=!0,e.apply(null,E))}function d(E){s=setTimeout(()=>{s=null,t(m,l())},E)}function f(){i&&clearTimeout(i)}function m(E,...p){if(c){f();return}if(E){f(),h.call(null,E,...p);return}if(l()||o){f(),h.call(null,E,...p);return}r<64&&(r*=2);let y;a===1?(a=2,y=0):y=(r+Math.random())*1e3,d(y)}let v=!1;function w(E){v||(v=!0,f(),!c&&(s!==null?(E||(a=2),clearTimeout(s),d(0)):E||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,w(!0)},n),w}function VL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(t){return t!==void 0}function UL(t){return typeof t=="object"&&!Array.isArray(t)}function Xm(t){return typeof t=="string"||t instanceof String}function gv(t){return Jm()&&t instanceof Blob}function Jm(){return typeof Blob<"u"}function _v(t,e,n,r){if(r<e)throw h2(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw h2(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Xx(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Bs||(Bs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e,n,r,s,i,o,a,l,c,h,d,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,v)=>{this.resolve_=m,this.reject_=v,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Dc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Bs.NO_ERROR,l=i.getStatus();if(!a||$L(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Bs.ABORT;r(!1,new Dc(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Dc(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());FL(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Ym();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?Yx():RL();o(l)}else{const l=AL();o(l)}};this.canceled_?n(!1,new Dc(!1,null,!0)):this.backoffId_=jL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&VL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Dc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function BL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function WL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function HL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function qL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function GL(t,e,n,r,s,i,o=!0){const a=Xx(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return HL(c,e),BL(c,n),WL(c,i),qL(c,r),new zL(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function QL(...t){const e=KL();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Jm())return new Blob(t);throw new je(Me.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function YL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(t){if(typeof atob>"u")throw DL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class C0{constructor(e,n){this.data=e,this.contentType=n||null}}function JL(t,e){switch(t){case jn.RAW:return new C0(Jx(e));case jn.BASE64:case jn.BASE64URL:return new C0(Zx(t,e));case jn.DATA_URL:return new C0(eb(e),tb(e))}throw Ym()}function Jx(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function ZL(t){let e;try{e=decodeURIComponent(t)}catch{throw Da(jn.DATA_URL,"Malformed data URL.")}return Jx(e)}function Zx(t,e){switch(t){case jn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Da(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case jn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Da(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=XL(e)}catch(s){throw s.message.includes("polyfill")?s:Da(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class eT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Da(jn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=nb(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function eb(t){const e=new eT(t);return e.base64?Zx(jn.BASE64,e.rest):ZL(e.rest)}function tb(t){return new eT(t).contentType}function nb(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n){let r=0,s="";gv(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(gv(this.data_)){const r=this.data_,s=YL(r,e,n);return s===null?null:new jr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new jr(r,!0)}}static getBlob(...e){if(Jm()){const n=e.map(r=>r instanceof jr?r.data_:r);return new jr(QL.apply(null,n))}else{const n=e.map(o=>Xm(o)?JL(jn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new jr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(t){let e;try{e=JSON.parse(t)}catch{return null}return UL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function sb(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function nT(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t,e){return e}class At{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||ib}}let Oc=null;function ob(t){return!Xm(t)||t.length<2?t:nT(t)}function rT(){if(Oc)return Oc;const t=[];t.push(new At("bucket")),t.push(new At("generation")),t.push(new At("metageneration")),t.push(new At("name","fullPath",!0));function e(i,o){return ob(o)}const n=new At("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new At("size");return s.xform=r,t.push(s),t.push(new At("timeCreated")),t.push(new At("updated")),t.push(new At("md5Hash",null,!0)),t.push(new At("cacheControl",null,!0)),t.push(new At("contentDisposition",null,!0)),t.push(new At("contentEncoding",null,!0)),t.push(new At("contentLanguage",null,!0)),t.push(new At("contentType",null,!0)),t.push(new At("metadata","customMetadata",!0)),Oc=t,Oc}function ab(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new qt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function lb(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return ab(r,t),r}function sT(t,e,n){const r=tT(e);return r===null?null:lb(t,r,n)}function cb(t,e,n,r){const s=tT(e);if(s===null||!Xm(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const h=t.bucket,d=t.fullPath,f="/b/"+o(h)+"/o/"+o(d),m=wd(f,n,r),v=Xx({alt:"media",token:c});return m+v})[0]}function ub(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Zm{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(t){if(!t)throw Ym()}function hb(t,e){function n(r,s){const i=sT(t,s,e);return iT(i!==null),i}return n}function db(t,e){function n(r,s){const i=sT(t,s,e);return iT(i!==null),cb(i,s,t.host,t._protocol)}return n}function oT(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=IL():s=CL():n.getStatus()===402?s=TL(t.bucket):n.getStatus()===403?s=SL(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function aT(t){const e=oT(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=xL(t.path)),i.serverResponse=s.serverResponse,i}return n}function fb(t,e,n){const r=e.fullServerUrl(),s=wd(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Zm(s,i,db(t,n),o);return a.errorHandler=aT(e),a}function pb(t,e){const n=e.fullServerUrl(),r=wd(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new Zm(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=aT(e),a}function mb(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function gb(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=mb(null,e)),r}function _b(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let y="";for(let x=0;x<2;x++)y=y+Math.random().toString().slice(2);return y}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=gb(e,r,s),h=ub(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=jr.getBlob(d,r,f);if(m===null)throw LL();const v={name:c.fullPath},w=wd(i,t.host,t._protocol),E="POST",p=t.maxUploadRetryTime,g=new Zm(w,E,hb(t,n),p);return g.urlParams=v,g.headers=o,g.body=m.uploadData(),g.errorHandler=oT(e),g}class vb{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Bs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Bs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw ea("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ea("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ea("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ea("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ea("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class yb extends vb{initXhr(){this.xhr_.responseType="text"}}function eg(){return new yb}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n){this._service=e,n instanceof qt?this._location=n:this._location=qt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ni(e,n)}get root(){const e=new qt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nT(this._location.path)}get storage(){return this._service}get parent(){const e=rb(this._location.path);if(e===null)return null;const n=new qt(this._location.bucket,e);return new ni(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw OL(e)}}function wb(t,e,n){t._throwIfRoot("uploadBytes");const r=_b(t.storage,t._location,rT(),new jr(e,!0),n);return t.storage.makeRequestWithTokens(r,eg).then(s=>({metadata:s,ref:t}))}function Eb(t){t._throwIfRoot("getDownloadURL");const e=fb(t.storage,t._location,rT());return t.storage.makeRequestWithTokens(e,eg).then(n=>{if(n===null)throw bL();return n})}function xb(t){t._throwIfRoot("deleteObject");const e=pb(t.storage,t._location);return t.storage.makeRequestWithTokens(e,eg)}function Tb(t,e){const n=sb(t._location.path,e),r=new qt(t._location.bucket,n);return new ni(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(t){return/^[A-Za-z]+:\/\//.test(t)}function Ib(t,e){return new ni(t,e)}function lT(t,e){if(t instanceof tg){const n=t;if(n._bucket==null)throw PL();const r=new ni(n,n._bucket);return e!=null?lT(r,e):r}else return e!==void 0?Tb(t,e):t}function Sb(t,e){if(e&&Cb(e)){if(t instanceof tg)return Ib(t,e);throw h2("To use ref(service, url), the first argument must be a Storage instance.")}else return lT(t,e)}function vv(t,e){const n=e==null?void 0:e[Qx];return n==null?null:qt.makeFromBucketSpec(n,t)}function Ab(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Ap(s,t.app.options.projectId))}class tg{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=Kx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=wL,this._maxUploadRetryTime=EL,this._requests=new Set,s!=null?this._bucket=qt.makeFromBucketSpec(s,this._host):this._bucket=vv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qt.makeFromBucketSpec(this._url,e):this._bucket=vv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_v("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_v("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ni(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new ML(Yx());{const o=GL(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const yv="@firebase/storage",wv="0.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="storage";function th(t,e,n){return t=ge(t),wb(t,e,n)}function nh(t){return t=ge(t),Eb(t)}function d2(t){return t=ge(t),xb(t)}function Ms(t,e){return t=ge(t),Sb(t,e)}function Rb(t=Dh(),e){t=ge(t);const r=bl(t,cT).getImmediate({identifier:e}),s=Ip("storage");return s&&Nb(r,...s),r}function Nb(t,e,n,r={}){Ab(t,e,n,r)}function kb(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new tg(n,r,s,e,ps)}function Pb(){is(new pr(cT,kb,"PUBLIC").setMultipleInstances(!0)),hn(yv,wv,""),hn(yv,wv,"esm2017")}Pb();var Ev={};const xv="@firebase/database",Tv="1.0.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uT="";function Lb(t){uT=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),it(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:rl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return xr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new bb(e)}}catch{}return new Db},js=hT("localStorage"),f2=hT("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new bh("@firebase/database"),Ob=function(){let t=1;return function(){return t++}}(),dT=function(t){const e=$9(t),n=new M9;n.update(e);const r=n.digest();return Cp.encodeByteArray(r)},tc=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=tc.apply(null,r):typeof r=="object"?e+=it(r):e+=r,e+=" "}return e};let Ws=null,Cv=!0;const Mb=function(t,e){O(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Zi.logLevel=Z.VERBOSE,Ws=Zi.log.bind(Zi),e&&f2.set("logging_enabled",!0)):typeof t=="function"?Ws=t:(Ws=null,f2.remove("logging_enabled"))},_t=function(...t){if(Cv===!0&&(Cv=!1,Ws===null&&f2.get("logging_enabled")===!0&&Mb(!0)),Ws){const e=tc.apply(null,t);Ws(e)}},nc=function(t){return function(...e){_t(t,...e)}},p2=function(...t){const e="FIREBASE INTERNAL ERROR: "+tc(...t);Zi.error(e)},yr=function(...t){const e=`FIREBASE FATAL ERROR: ${tc(...t)}`;throw Zi.error(e),new Error(e)},Qt=function(...t){const e="FIREBASE WARNING: "+tc(...t);Zi.warn(e)},jb=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Qt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},fT=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Vb=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},xo="[MIN_NAME]",ri="[MAX_NAME]",Uo=function(t,e){if(t===e)return 0;if(t===xo||e===ri)return-1;if(e===xo||t===ri)return 1;{const n=Iv(t),r=Iv(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Fb=function(t,e){return t===e?0:t<e?-1:1},ta=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+it(e))},ng=function(t){if(typeof t!="object"||t===null)return it(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=it(e[r]),n+=":",n+=ng(t[e[r]]);return n+="}",n},pT=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function gn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const mT=function(t){O(!fT(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,l;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(i%2?1:0),i=Math.floor(i/2);c.push(s?1:0),c.reverse();const h=c.join("");let d="";for(l=0;l<64;l+=8){let f=parseInt(h.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},Ub=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},$b=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},zb=new RegExp("^-?(0*)\\d{1,10}$"),Bb=-2147483648,Wb=2147483647,Iv=function(t){if(zb.test(t)){const e=Number(t);if(e>=Bb&&e<=Wb)return e}return null},rc=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Qt("Exception was thrown by user callback.",n),e},Math.floor(0))}},Hb=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Oa=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Qt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(_t("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qt(e)}}class eo{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}eo.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="5",gT="v",_T="s",vT="r",yT="f",wT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ET="ls",xT="p",m2="ac",TT="websocket",CT="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,n,r,s,i=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=js.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&js.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Kb(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function ST(t,e,n){O(typeof e=="string","typeof type must == string"),O(typeof n=="object","typeof params must == object");let r;if(e===TT)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===CT)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Kb(t)&&(n.ns=t.namespace);const s=[];return gn(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(){this.counters_={}}incrementCounter(e,n=1){xr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return w9(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0={},S0={};function sg(t){const e=t.toString();return I0[e]||(I0[e]=new Qb),I0[e]}function Yb(t,e){const n=t.toString();return S0[n]||(S0[n]=e()),S0[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&rc(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="start",Jb="close",Zb="pLPCommand",eD="pRTLPCB",AT="id",RT="pw",NT="ser",tD="cb",nD="seg",rD="ts",sD="d",iD="dframe",kT=1870,PT=30,oD=kT-PT,aD=25e3,lD=3e4;class ji{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=nc(e),this.stats_=sg(n),this.urlFn=l=>(this.appCheckToken&&(l[m2]=this.appCheckToken),ST(n,CT,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Xb(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(lD)),Vb(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ig((...i)=>{const[o,a,l,c,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Sv)this.id=a,this.password=l;else if(o===Jb)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Sv]="t",r[NT]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[tD]=this.scriptTagHolder.uniqueCallbackIdentifier),r[gT]=rg,this.transportSessionId&&(r[_T]=this.transportSessionId),this.lastSessionId&&(r[ET]=this.lastSessionId),this.applicationId&&(r[xT]=this.applicationId),this.appCheckToken&&(r[m2]=this.appCheckToken),typeof location<"u"&&location.hostname&&wT.test(location.hostname)&&(r[vT]=yT);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ji.forceAllow_=!0}static forceDisallow(){ji.forceDisallow_=!0}static isAvailable(){return ji.forceAllow_?!0:!ji.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Ub()&&!$b()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=it(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=D3(n),s=pT(r,oD);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[iD]="t",r[AT]=e,r[RT]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=it(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class ig{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Ob(),window[Zb+this.uniqueCallbackIdentifier]=e,window[eD+this.uniqueCallbackIdentifier]=n,this.myIFrame=ig.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){_t("frame writing exception"),a.stack&&_t(a.stack),_t(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||_t("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[AT]=this.myID,e[RT]=this.myPW,e[NT]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+PT+r.length<=kT;){const o=this.pendingSegs.shift();r=r+"&"+nD+s+"="+o.seg+"&"+rD+s+"="+o.ts+"&"+sD+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(aD)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{_t("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=16384,uD=45e3;let rh=null;typeof MozWebSocket<"u"?rh=MozWebSocket:typeof WebSocket<"u"&&(rh=WebSocket);class xn{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=nc(this.connId),this.stats_=sg(n),this.connURL=xn.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[gT]=rg,typeof location<"u"&&location.hostname&&wT.test(location.hostname)&&(o[vT]=yT),n&&(o[_T]=n),r&&(o[ET]=r),s&&(o[m2]=s),i&&(o[xT]=i),ST(e,TT,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,js.set("previous_websocket_failure",!0);try{let r;U3(),this.mySock=new rh(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){xn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&rh!==null&&!xn.forceDisallow_}static previouslyFailed(){return js.isInMemoryStorage||js.get("previous_websocket_failure")===!0}markConnectionHealthy(){js.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=rl(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(O(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=it(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=pT(n,cD);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(uD))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}xn.responsesRequiredToBeHealthy=2;xn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ji,xn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=xn&&xn.isAvailable();let r=n&&!xn.previouslyFailed();if(e.webSocketOnly&&(n||Qt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[xn];else{const s=this.transports_=[];for(const i of Cl.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Cl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Cl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=6e4,dD=5e3,fD=10*1024,pD=100*1024,A0="t",Av="d",mD="s",Rv="r",gD="e",Nv="o",kv="a",Pv="n",Lv="p",_D="h";class vD{constructor(e,n,r,s,i,o,a,l,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=nc("c:"+this.id+":"),this.transportManager_=new Cl(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Oa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>pD?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>fD?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(A0 in e){const n=e[A0];n===kv?this.upgradeIfSecondaryHealthy_():n===Rv?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Nv&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ta("t",e),r=ta("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Lv,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:kv,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Pv,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ta("t",e),r=ta("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ta(A0,e);if(Av in e){const r=e[Av];if(n===_D){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Pv){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===mD?this.onConnectionShutdown_(r):n===Rv?this.onReset_(r):n===gD?p2("Server Error: "+r):n===Nv?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):p2("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),rg!==r&&Qt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Oa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(hD))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Oa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(dD))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Lv,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(js.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.allowedEvents_=e,this.listeners_={},O(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){O(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends bT{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Rp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new sh}getInitialEvent(e){return O(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=32,Dv=768;class Ae{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function pe(){return new Ae("")}function se(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function cs(t){return t.pieces_.length-t.pieceNum_}function Ce(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ae(t.pieces_,e)}function DT(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function yD(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function OT(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function MT(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ae(e,0)}function Ze(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ae)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Ae(n,0)}function ne(t){return t.pieceNum_>=t.pieces_.length}function cn(t,e){const n=se(t),r=se(e);if(n===null)return e;if(n===r)return cn(Ce(t),Ce(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function jT(t,e){if(cs(t)!==cs(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Tn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(cs(t)>cs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class wD{constructor(e,n){this.errorPrefix_=n,this.parts_=OT(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Lh(this.parts_[r]);VT(this)}}function ED(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Lh(e),VT(t)}function xD(t){const e=t.parts_.pop();t.byteLength_-=Lh(e),t.parts_.length>0&&(t.byteLength_-=1)}function VT(t){if(t.byteLength_>Dv)throw new Error(t.errorPrefix_+"has a key path longer than "+Dv+" bytes ("+t.byteLength_+").");if(t.parts_.length>bv)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+bv+") or object contains a cycle "+Ss(t))}function Ss(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og extends bT{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new og}getInitialEvent(e){return O(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=1e3,TD=60*5*1e3,Ov=30*1e3,CD=1.3,ID=3e4,SD="server_kill",Mv=3;class cr extends LT{constructor(e,n,r,s,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=cr.nextPersistentConnectionId_++,this.log_=nc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=na,this.maxReconnectDelay_=TD,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!U3())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");og.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&sh.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(it(i)),O(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Sp,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),O(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),O(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,c=a.s;cr.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&xr(e,"w")){const r=uo(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Qt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||O9(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ov)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=D9(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),O(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+it(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):p2("Unrecognized action received from server: "+it(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){O(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=na,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=na,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>ID&&(this.reconnectDelay_=na),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*CD)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+cr.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(d){O(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?_t("getToken() completed but was canceled"):(_t("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,a=new vD(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,m=>{Qt(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(SD)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Qt(d),l())}}}interrupt(e){_t("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){_t("Resuming connection for reason: "+e),delete this.interruptReasons_[e],kf(this.interruptReasons_)&&(this.reconnectDelay_=na,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>ng(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Ae(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){_t("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Mv&&(this.reconnectDelay_=Ov,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){_t("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Mv&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+uT.replace(/\./g,"-")]=1,Rp()?e["framework.cordova"]=1:F3()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=sh.getInstance().currentlyOnline();return kf(this.interruptReasons_)&&e}}cr.nextPersistentConnectionId_=0;cr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ie(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ie(xo,e),s=new ie(xo,n);return this.compare(r,s)!==0}minPost(){return ie.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc;class FT extends Ed{static get __EMPTY_NODE(){return Mc}static set __EMPTY_NODE(e){Mc=e}compare(e,n){return Uo(e.name,n.name)}isDefinedOn(e){throw ko("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ie.MIN}maxPost(){return new ie(ri,Mc)}makePost(e,n){return O(typeof e=="string","KeyIndex indexValue must always be a string."),new ie(e,Mc)}toString(){return".key"}}const to=new FT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Je{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Je.RED,this.left=s??Vt.EMPTY_NODE,this.right=i??Vt.EMPTY_NODE}copy(e,n,r,s,i){return new Je(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Vt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Vt.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Je.RED=!0;Je.BLACK=!1;class AD{copy(e,n,r,s,i){return this}insert(e,n,r){return new Je(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Vt{constructor(e,n=Vt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Vt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Je.BLACK,null,null))}remove(e){return new Vt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Je.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new jc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new jc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new jc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new jc(this.root_,null,this.comparator_,!0,e)}}Vt.EMPTY_NODE=new AD;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(t,e){return Uo(t.name,e.name)}function ag(t,e){return Uo(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g2;function ND(t){g2=t}const UT=function(t){return typeof t=="number"?"number:"+mT(t):"string:"+t},$T=function(t){if(t.isLeafNode()){const e=t.val();O(typeof e=="string"||typeof e=="number"||typeof e=="object"&&xr(e,".sv"),"Priority must be a string or number.")}else O(t===g2||t.isEmpty(),"priority of unexpected type.");O(t===g2||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jv;class Qe{constructor(e,n=Qe.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,O(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),$T(this.priorityNode_)}static set __childrenNodeConstructor(e){jv=e}static get __childrenNodeConstructor(){return jv}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Qe(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Qe.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ne(e)?this:se(e)===".priority"?this.priorityNode_:Qe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Qe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=se(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(O(r!==".priority"||cs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Qe.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ce(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+UT(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=mT(this.value_):e+=this.value_,this.lazyHash_=dT(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Qe.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Qe.__childrenNodeConstructor?-1:(O(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Qe.VALUE_TYPE_ORDER.indexOf(n),i=Qe.VALUE_TYPE_ORDER.indexOf(r);return O(s>=0,"Unknown leaf type: "+n),O(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Qe.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zT,BT;function kD(t){zT=t}function PD(t){BT=t}class LD extends Ed{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Uo(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ie.MIN}maxPost(){return new ie(ri,new Qe("[PRIORITY-POST]",BT))}makePost(e,n){const r=zT(e);return new ie(n,new Qe("[PRIORITY-POST]",r))}toString(){return".priority"}}const yt=new LD;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=Math.log(2);class DD{constructor(e){const n=i=>parseInt(Math.log(i)/bD,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ih=function(t,e,n,r){t.sort(e);const s=function(l,c){const h=c-l;let d,f;if(h===0)return null;if(h===1)return d=t[l],f=n?n(d):d,new Je(f,d.node,Je.BLACK,null,null);{const m=parseInt(h/2,10)+l,v=s(l,m),w=s(m+1,c);return d=t[m],f=n?n(d):d,new Je(f,d.node,Je.BLACK,v,w)}},i=function(l){let c=null,h=null,d=t.length;const f=function(v,w){const E=d-v,p=d;d-=v;const g=s(E+1,p),y=t[E],x=n?n(y):y;m(new Je(x,y.node,w,null,g))},m=function(v){c?(c.left=v,c=v):(h=v,c=v)};for(let v=0;v<l.count;++v){const w=l.nextBitIsOne(),E=Math.pow(2,l.count-(v+1));w?f(E,Je.BLACK):(f(E,Je.BLACK),f(E,Je.RED))}return h},o=new DD(t.length),a=i(o);return new Vt(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R0;const wi={};class ar{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return O(wi&&yt,"ChildrenNode.ts has not been loaded"),R0=R0||new ar({".priority":wi},{".priority":yt}),R0}get(e){const n=uo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Vt?n:null}hasIndex(e){return xr(this.indexSet_,e.toString())}addIndex(e,n){O(e!==to,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(ie.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=ih(r,e.getCompare()):a=wi;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new ar(h,c)}addToIndexes(e,n){const r=Lu(this.indexes_,(s,i)=>{const o=uo(this.indexSet_,i);if(O(o,"Missing index implementation for "+i),s===wi)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(ie.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),ih(a,o.getCompare())}else return wi;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new ie(e.name,a))),l.insert(e,e.node)}});return new ar(r,this.indexSet_)}removeFromIndexes(e,n){const r=Lu(this.indexes_,s=>{if(s===wi)return s;{const i=n.get(e.name);return i?s.remove(new ie(e.name,i)):s}});return new ar(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ra;class he{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&$T(this.priorityNode_),this.children_.isEmpty()&&O(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ra||(ra=new he(new Vt(ag),null,ar.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ra}updatePriority(e){return this.children_.isEmpty()?this:new he(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ra:n}}getChild(e){const n=se(e);return n===null?this:this.getImmediateChild(n).getChild(Ce(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(O(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ie(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?ra:this.priorityNode_;return new he(s,o,i)}}updateChild(e,n){const r=se(e);if(r===null)return n;{O(se(e)!==".priority"||cs(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Ce(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(yt,(o,a)=>{n[o]=a.val(e),r++,i&&he.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+UT(this.getPriority().val())+":"),this.forEachChild(yt,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":dT(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new ie(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ie(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ie(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,ie.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,ie.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===sc?-1:0}withIndex(e){if(e===to||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new he(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===to||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(yt),s=n.getIterator(yt);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===to?null:this.indexMap_.get(e.toString())}}he.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class OD extends he{constructor(){super(new Vt(ag),he.EMPTY_NODE,ar.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return he.EMPTY_NODE}isEmpty(){return!1}}const sc=new OD;Object.defineProperties(ie,{MIN:{value:new ie(xo,he.EMPTY_NODE)},MAX:{value:new ie(ri,sc)}});FT.__EMPTY_NODE=he.EMPTY_NODE;Qe.__childrenNodeConstructor=he;ND(sc);PD(sc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=!0;function vt(t,e=null){if(t===null)return he.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),O(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Qe(n,vt(e))}if(!(t instanceof Array)&&MD){const n=[];let r=!1;if(gn(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=vt(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new ie(o,l)))}}),n.length===0)return he.EMPTY_NODE;const i=ih(n,RD,o=>o.name,ag);if(r){const o=ih(n,yt.getCompare());return new he(i,vt(e),new ar({".priority":o},{".priority":yt}))}else return new he(i,vt(e),ar.Default)}else{let n=he.EMPTY_NODE;return gn(t,(r,s)=>{if(xr(t,r)&&r.substring(0,1)!=="."){const i=vt(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(vt(e))}}kD(vt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD extends Ed{constructor(e){super(),this.indexPath_=e,O(!ne(e)&&se(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Uo(e.name,n.name):i}makePost(e,n){const r=vt(e),s=he.EMPTY_NODE.updateChild(this.indexPath_,r);return new ie(n,s)}maxPost(){const e=he.EMPTY_NODE.updateChild(this.indexPath_,sc);return new ie(ri,e)}toString(){return OT(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD extends Ed{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Uo(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ie.MIN}maxPost(){return ie.MAX}makePost(e,n){const r=vt(e);return new ie(n,r)}toString(){return".value"}}const FD=new VD;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(t){return{type:"value",snapshotNode:t}}function $D(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function zD(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Vv(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function BD(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=yt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return O(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return O(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xo}hasEnd(){return this.endSet_}getIndexEndValue(){return O(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return O(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ri}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return O(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===yt}copy(){const e=new lg;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Fv(t){const e={};if(t.isDefault())return e;let n;if(t.index_===yt?n="$priority":t.index_===FD?n="$value":t.index_===to?n="$key":(O(t.index_ instanceof jD,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=it(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=it(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+it(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=it(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+it(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Uv(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==yt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends LT{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=nc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(O(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=oh.getListenId_(e,r),a={};this.listens_[o]=a;const l=Fv(e._queryParams);this.restRequest_(i+".json",l,(c,h)=>{let d=h;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(i,d,!1,r),uo(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",s(f,null)}})}unlisten(e,n){const r=oh.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Fv(e._queryParams),r=e._path.toString(),s=new Sp;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Po(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=rl(a.responseText)}catch{Qt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Qt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(){this.rootNode_=he.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(){return{value:null,children:new Map}}function WT(t,e,n){if(ne(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=se(e);t.children.has(r)||t.children.set(r,ah());const s=t.children.get(r);e=Ce(e),WT(s,e,n)}}function _2(t,e,n){t.value!==null?n(e,t.value):HD(t,(r,s)=>{const i=new Ae(e.toString()+"/"+r);_2(s,i,n)})}function HD(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&gn(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=10*1e3,GD=30*1e3,KD=5*60*1e3;class QD{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new qD(e);const r=$v+(GD-$v)*Math.random();Oa(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;gn(e,(s,i)=>{i>0&&xr(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Oa(this.reportStats_.bind(this),Math.floor(Math.random()*2*KD))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Vn||(Vn={}));function HT(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function qT(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function GT(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Vn.ACK_USER_WRITE,this.source=HT()}operationForChild(e){if(ne(this.path)){if(this.affectedTree.value!=null)return O(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ae(e));return new lh(pe(),n,this.revert)}}else return O(se(this.path)===e,"operationForChild called for unrelated child."),new lh(Ce(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Vn.OVERWRITE}operationForChild(e){return ne(this.path)?new si(this.source,pe(),this.snap.getImmediateChild(e)):new si(this.source,Ce(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Vn.MERGE}operationForChild(e){if(ne(this.path)){const n=this.children.subtree(new Ae(e));return n.isEmpty()?null:n.value?new si(this.source,pe(),n.value):new Il(this.source,pe(),n)}else return O(se(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Il(this.source,Ce(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ne(e))return this.isFullyInitialized()&&!this.filtered_;const n=se(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function YD(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(BD(o.childName,o.snapshotNode))}),sa(t,s,"child_removed",e,r,n),sa(t,s,"child_added",e,r,n),sa(t,s,"child_moved",i,r,n),sa(t,s,"child_changed",e,r,n),sa(t,s,"value",e,r,n),s}function sa(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,l)=>JD(t,a,l)),o.forEach(a=>{const l=XD(t,a,i);s.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function XD(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function JD(t,e,n){if(e.childName==null||n.childName==null)throw ko("Should only compare child_ events.");const r=new ie(e.childName,e.snapshotNode),s=new ie(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t,e){return{eventCache:t,serverCache:e}}function Ma(t,e,n,r){return KT(new cg(e,n,r),t.serverCache)}function QT(t,e,n,r){return KT(t.eventCache,new cg(e,n,r))}function v2(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ii(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N0;const ZD=()=>(N0||(N0=new Vt(Fb)),N0);class Te{constructor(e,n=ZD()){this.value=e,this.children=n}static fromObject(e){let n=new Te(null);return gn(e,(r,s)=>{n=n.set(new Ae(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:pe(),value:this.value};if(ne(e))return null;{const r=se(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Ce(e),n);return i!=null?{path:Ze(new Ae(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ne(e))return this;{const n=se(e),r=this.children.get(n);return r!==null?r.subtree(Ce(e)):new Te(null)}}set(e,n){if(ne(e))return new Te(n,this.children);{const r=se(e),i=(this.children.get(r)||new Te(null)).set(Ce(e),n),o=this.children.insert(r,i);return new Te(this.value,o)}}remove(e){if(ne(e))return this.children.isEmpty()?new Te(null):new Te(null,this.children);{const n=se(e),r=this.children.get(n);if(r){const s=r.remove(Ce(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Te(null):new Te(this.value,i)}else return this}}get(e){if(ne(e))return this.value;{const n=se(e),r=this.children.get(n);return r?r.get(Ce(e)):null}}setTree(e,n){if(ne(e))return n;{const r=se(e),i=(this.children.get(r)||new Te(null)).setTree(Ce(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Te(this.value,o)}}fold(e){return this.fold_(pe(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Ze(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,pe(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(ne(e))return null;{const i=se(e),o=this.children.get(i);return o?o.findOnPath_(Ce(e),Ze(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,pe(),n)}foreachOnPath_(e,n,r){if(ne(e))return this;{this.value&&r(n,this.value);const s=se(e),i=this.children.get(s);return i?i.foreachOnPath_(Ce(e),Ze(n,s),r):new Te(null)}}foreach(e){this.foreach_(pe(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Ze(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.writeTree_=e}static empty(){return new Sn(new Te(null))}}function ja(t,e,n){if(ne(e))return new Sn(new Te(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=cn(s,e);return i=i.updateChild(o,n),new Sn(t.writeTree_.set(s,i))}else{const s=new Te(n),i=t.writeTree_.setTree(e,s);return new Sn(i)}}}function zv(t,e,n){let r=t;return gn(n,(s,i)=>{r=ja(r,Ze(e,s),i)}),r}function Bv(t,e){if(ne(e))return Sn.empty();{const n=t.writeTree_.setTree(e,new Te(null));return new Sn(n)}}function y2(t,e){return mi(t,e)!=null}function mi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(cn(n.path,e)):null}function Wv(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(yt,(r,s)=>{e.push(new ie(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new ie(r,s.value))}),e}function ns(t,e){if(ne(e))return t;{const n=mi(t,e);return n!=null?new Sn(new Te(n)):new Sn(t.writeTree_.subtree(e))}}function w2(t){return t.writeTree_.isEmpty()}function To(t,e){return YT(pe(),t.writeTree_,e)}function YT(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(O(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=YT(Ze(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ze(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(t,e){return nC(e,t)}function eO(t,e,n,r,s){O(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=ja(t.visibleWrites,e,n)),t.lastWriteId=r}function tO(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function nO(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);O(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&rO(a,r.path)?s=!1:Tn(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return sO(t),!0;if(r.snap)t.visibleWrites=Bv(t.visibleWrites,r.path);else{const a=r.children;gn(a,l=>{t.visibleWrites=Bv(t.visibleWrites,Ze(r.path,l))})}return!0}else return!1}function rO(t,e){if(t.snap)return Tn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Tn(Ze(t.path,n),e))return!0;return!1}function sO(t){t.visibleWrites=JT(t.allWrites,iO,pe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function iO(t){return t.visible}function JT(t,e,n){let r=Sn.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)Tn(n,o)?(a=cn(n,o),r=ja(r,a,i.snap)):Tn(o,n)&&(a=cn(o,n),r=ja(r,pe(),i.snap.getChild(a)));else if(i.children){if(Tn(n,o))a=cn(n,o),r=zv(r,a,i.children);else if(Tn(o,n))if(a=cn(o,n),ne(a))r=zv(r,pe(),i.children);else{const l=uo(i.children,se(a));if(l){const c=l.getChild(Ce(a));r=ja(r,pe(),c)}}}else throw ko("WriteRecord should have .snap or .children")}}return r}function ZT(t,e,n,r,s){if(!r&&!s){const i=mi(t.visibleWrites,e);if(i!=null)return i;{const o=ns(t.visibleWrites,e);if(w2(o))return n;if(n==null&&!y2(o,pe()))return null;{const a=n||he.EMPTY_NODE;return To(o,a)}}}else{const i=ns(t.visibleWrites,e);if(!s&&w2(i))return n;if(!s&&n==null&&!y2(i,pe()))return null;{const o=function(c){return(c.visible||s)&&(!r||!~r.indexOf(c.writeId))&&(Tn(c.path,e)||Tn(e,c.path))},a=JT(t.allWrites,o,e),l=n||he.EMPTY_NODE;return To(a,l)}}}function oO(t,e,n){let r=he.EMPTY_NODE;const s=mi(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(yt,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=ns(t.visibleWrites,e);return n.forEachChild(yt,(o,a)=>{const l=To(ns(i,new Ae(o)),a);r=r.updateImmediateChild(o,l)}),Wv(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=ns(t.visibleWrites,e);return Wv(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function aO(t,e,n,r,s){O(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Ze(e,n);if(y2(t.visibleWrites,i))return null;{const o=ns(t.visibleWrites,i);return w2(o)?s.getChild(n):To(o,s.getChild(n))}}function lO(t,e,n,r){const s=Ze(e,n),i=mi(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=ns(t.visibleWrites,s);return To(o,r.getNode().getImmediateChild(n))}else return null}function cO(t,e){return mi(t.visibleWrites,e)}function uO(t,e,n,r,s,i,o){let a;const l=ns(t.visibleWrites,e),c=mi(l,pe());if(c!=null)a=c;else if(n!=null)a=To(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),f=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let m=f.getNext();for(;m&&h.length<s;)d(m,r)!==0&&h.push(m),m=f.getNext();return h}else return[]}function hO(){return{visibleWrites:Sn.empty(),allWrites:[],lastWriteId:-1}}function E2(t,e,n,r){return ZT(t.writeTree,t.treePath,e,n,r)}function eC(t,e){return oO(t.writeTree,t.treePath,e)}function Hv(t,e,n,r){return aO(t.writeTree,t.treePath,e,n,r)}function ch(t,e){return cO(t.writeTree,Ze(t.treePath,e))}function dO(t,e,n,r,s,i){return uO(t.writeTree,t.treePath,e,n,r,s,i)}function ug(t,e,n){return lO(t.writeTree,t.treePath,e,n)}function tC(t,e){return nC(Ze(t.treePath,e),t.writeTree)}function nC(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;O(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),O(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Vv(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,zD(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,$D(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Vv(r,e.snapshotNode,s.oldSnap));else throw ko("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const rC=new pO;class hg{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new cg(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ug(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ii(this.viewCache_),i=dO(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}function mO(t,e){O(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),O(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function gO(t,e,n,r,s){const i=new fO;let o,a;if(n.type===Vn.OVERWRITE){const c=n;c.source.fromUser?o=x2(t,e,c.path,c.snap,r,s,i):(O(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ne(c.path),o=uh(t,e,c.path,c.snap,r,s,a,i))}else if(n.type===Vn.MERGE){const c=n;c.source.fromUser?o=vO(t,e,c.path,c.children,r,s,i):(O(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=T2(t,e,c.path,c.children,r,s,a,i))}else if(n.type===Vn.ACK_USER_WRITE){const c=n;c.revert?o=EO(t,e,c.path,r,s,i):o=yO(t,e,c.path,c.affectedTree,r,s,i)}else if(n.type===Vn.LISTEN_COMPLETE)o=wO(t,e,n.path,r,i);else throw ko("Unknown operation type: "+n.type);const l=i.getChanges();return _O(e,o,l),{viewCache:o,changes:l}}function _O(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=v2(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(UD(v2(e)))}}function sC(t,e,n,r,s,i){const o=e.eventCache;if(ch(r,n)!=null)return e;{let a,l;if(ne(n))if(O(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=ii(e),h=c instanceof he?c:he.EMPTY_NODE,d=eC(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const c=E2(r,ii(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,i)}else{const c=se(n);if(c===".priority"){O(cs(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=Hv(r,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=Ce(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=Hv(r,n,o.getNode(),l);f!=null?d=o.getNode().getImmediateChild(c).updateChild(h,f):d=o.getNode().getImmediateChild(c)}else d=ug(r,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,h,s,i):a=o.getNode()}}return Ma(e,a,o.isFullyInitialized()||ne(n),t.filter.filtersNodes())}}function uh(t,e,n,r,s,i,o,a){const l=e.serverCache;let c;const h=o?t.filter:t.filter.getIndexedFilter();if(ne(n))c=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const m=l.getNode().updateChild(n,r);c=h.updateFullNode(l.getNode(),m,null)}else{const m=se(n);if(!l.isCompleteForPath(n)&&cs(n)>1)return e;const v=Ce(n),E=l.getNode().getImmediateChild(m).updateChild(v,r);m===".priority"?c=h.updatePriority(l.getNode(),E):c=h.updateChild(l.getNode(),m,E,v,rC,null)}const d=QT(e,c,l.isFullyInitialized()||ne(n),h.filtersNodes()),f=new hg(s,d,i);return sC(t,d,n,s,f,a)}function x2(t,e,n,r,s,i,o){const a=e.eventCache;let l,c;const h=new hg(s,e,i);if(ne(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Ma(e,c,!0,t.filter.filtersNodes());else{const d=se(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Ma(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=Ce(n),m=a.getNode().getImmediateChild(d);let v;if(ne(f))v=r;else{const w=h.getCompleteChild(d);w!=null?DT(f)===".priority"&&w.getChild(MT(f)).isEmpty()?v=w:v=w.updateChild(f,r):v=he.EMPTY_NODE}if(m.equals(v))l=e;else{const w=t.filter.updateChild(a.getNode(),d,v,f,h,o);l=Ma(e,w,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function qv(t,e){return t.eventCache.isCompleteForChild(e)}function vO(t,e,n,r,s,i,o){let a=e;return r.foreach((l,c)=>{const h=Ze(n,l);qv(e,se(h))&&(a=x2(t,a,h,c,s,i,o))}),r.foreach((l,c)=>{const h=Ze(n,l);qv(e,se(h))||(a=x2(t,a,h,c,s,i,o))}),a}function Gv(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function T2(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;ne(n)?c=r:c=new Te(null).setTree(n,r);const h=e.serverCache.getNode();return c.children.inorderTraversal((d,f)=>{if(h.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),v=Gv(t,m,f);l=uh(t,l,new Ae(d),v,s,i,o,a)}}),c.children.inorderTraversal((d,f)=>{const m=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!h.hasChild(d)&&!m){const v=e.serverCache.getNode().getImmediateChild(d),w=Gv(t,v,f);l=uh(t,l,new Ae(d),w,s,i,o,a)}}),l}function yO(t,e,n,r,s,i,o){if(ch(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(ne(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return uh(t,e,n,l.getNode().getChild(n),s,i,a,o);if(ne(n)){let c=new Te(null);return l.getNode().forEachChild(to,(h,d)=>{c=c.set(new Ae(h),d)}),T2(t,e,n,c,s,i,a,o)}else return e}else{let c=new Te(null);return r.foreach((h,d)=>{const f=Ze(n,h);l.isCompleteForPath(f)&&(c=c.set(h,l.getNode().getChild(f)))}),T2(t,e,n,c,s,i,a,o)}}function wO(t,e,n,r,s){const i=e.serverCache,o=QT(e,i.getNode(),i.isFullyInitialized()||ne(n),i.isFiltered());return sC(t,o,n,r,rC,s)}function EO(t,e,n,r,s,i){let o;if(ch(r,n)!=null)return e;{const a=new hg(r,e,s),l=e.eventCache.getNode();let c;if(ne(n)||se(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=E2(r,ii(e));else{const d=e.serverCache.getNode();O(d instanceof he,"serverChildren would be complete if leaf node"),h=eC(r,d)}h=h,c=t.filter.updateFullNode(l,h,i)}else{const h=se(n);let d=ug(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?c=t.filter.updateChild(l,h,d,Ce(n),a,i):e.eventCache.getNode().hasChild(h)?c=t.filter.updateChild(l,h,he.EMPTY_NODE,Ce(n),a,i):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=E2(r,ii(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,i)))}return o=e.serverCache.isFullyInitialized()||ch(r,pe())!=null,Ma(e,c,o,t.filter.filtersNodes())}}function xO(t,e){const n=ii(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ne(e)&&!n.getImmediateChild(se(e)).isEmpty())?n.getChild(e):null}function Kv(t,e,n,r){e.type===Vn.MERGE&&e.source.queryId!==null&&(O(ii(t.viewCache_),"We should always have a full cache before handling merges"),O(v2(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=gO(t.processor_,s,e,n,r);return mO(t.processor_,i.viewCache),O(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,TO(t,i.changes,i.viewCache.eventCache.getNode(),null)}function TO(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return YD(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qv;function CO(t){O(!Qv,"__referenceConstructor has already been defined"),Qv=t}function dg(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return O(i!=null,"SyncTree gave us an op for an invalid query."),Kv(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(Kv(o,e,n,r));return i}}function fg(t,e){let n=null;for(const r of t.views.values())n=n||xO(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yv;function IO(t){O(!Yv,"__referenceConstructor has already been defined"),Yv=t}class Xv{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Te(null),this.pendingWriteTree_=hO(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function SO(t,e,n,r,s){return eO(t.pendingWriteTree_,e,n,r,s),s?Td(t,new si(HT(),e,n)):[]}function Vi(t,e,n=!1){const r=tO(t.pendingWriteTree_,e);if(nO(t.pendingWriteTree_,e)){let i=new Te(null);return r.snap!=null?i=i.set(pe(),!0):gn(r.children,o=>{i=i.set(new Ae(o),!0)}),Td(t,new lh(r.path,i,n))}else return[]}function xd(t,e,n){return Td(t,new si(qT(),e,n))}function AO(t,e,n){const r=Te.fromObject(n);return Td(t,new Il(qT(),e,r))}function RO(t,e,n,r){const s=lC(t,r);if(s!=null){const i=cC(s),o=i.path,a=i.queryId,l=cn(o,e),c=new si(GT(a),l,n);return uC(t,o,c)}else return[]}function NO(t,e,n,r){const s=lC(t,r);if(s){const i=cC(s),o=i.path,a=i.queryId,l=cn(o,e),c=Te.fromObject(n),h=new Il(GT(a),l,c);return uC(t,o,h)}else return[]}function iC(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=cn(o,e),c=fg(a,l);if(c)return c});return ZT(s,e,i,n,!0)}function Td(t,e){return oC(e,t.syncPointTree_,null,XT(t.pendingWriteTree_,pe()))}function oC(t,e,n,r){if(ne(t.path))return aC(t,e,n,r);{const s=e.get(pe());n==null&&s!=null&&(n=fg(s,pe()));let i=[];const o=se(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,h=tC(r,o);i=i.concat(oC(a,l,c,h))}return s&&(i=i.concat(dg(s,t,r,n))),i}}function aC(t,e,n,r){const s=e.get(pe());n==null&&s!=null&&(n=fg(s,pe()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=tC(r,o),h=t.operationForChild(o);h&&(i=i.concat(aC(h,a,l,c)))}),s&&(i=i.concat(dg(s,t,r,n))),i}function lC(t,e){return t.tagToQueryMap.get(e)}function cC(t){const e=t.indexOf("$");return O(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ae(t.substr(0,e))}}function uC(t,e,n){const r=t.syncPointTree_.get(e);O(r,"Missing sync point for query tag that we're tracking");const s=XT(t.pendingWriteTree_,e);return dg(r,n,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new pg(n)}node(){return this.node_}}class mg{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ze(this.path_,e);return new mg(this.syncTree_,n)}node(){return iC(this.syncTree_,this.path_)}}const kO=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Jv=function(t,e,n){if(!t||typeof t!="object")return t;if(O(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return PO(t[".sv"],e,n);if(typeof t[".sv"]=="object")return LO(t[".sv"],e);O(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},PO=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:O(!1,"Unexpected server value: "+t)}},LO=function(t,e,n){t.hasOwnProperty("increment")||O(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&O(!1,"Unexpected increment value: "+r);const s=e.node();if(O(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},bO=function(t,e,n,r){return gg(e,new mg(n,t),r)},DO=function(t,e,n){return gg(t,new pg(e),n)};function gg(t,e,n){const r=t.getPriority().val(),s=Jv(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=Jv(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Qe(a,vt(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Qe(s))),o.forEachChild(yt,(a,l)=>{const c=gg(l,e.getImmediateChild(a),n);c!==l&&(i=i.updateImmediateChild(a,c))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function vg(t,e){let n=e instanceof Ae?e:new Ae(e),r=t,s=se(n);for(;s!==null;){const i=uo(r.node.children,s)||{children:{},childCount:0};r=new _g(s,r,i),n=Ce(n),s=se(n)}return r}function $o(t){return t.node.value}function hC(t,e){t.node.value=e,C2(t)}function dC(t){return t.node.childCount>0}function OO(t){return $o(t)===void 0&&!dC(t)}function Cd(t,e){gn(t.node.children,(n,r)=>{e(new _g(n,t,r))})}function fC(t,e,n,r){n&&!r&&e(t),Cd(t,s=>{fC(s,e,!0,r)}),n&&r&&e(t)}function MO(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ic(t){return new Ae(t.parent===null?t.name:ic(t.parent)+"/"+t.name)}function C2(t){t.parent!==null&&jO(t.parent,t.name,t)}function jO(t,e,n){const r=OO(n),s=xr(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,C2(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,C2(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=/[\[\].#$\/\u0000-\u001F\u007F]/,FO=/[\[\].#$\u0000-\u001F\u007F]/,k0=10*1024*1024,pC=function(t){return typeof t=="string"&&t.length!==0&&!VO.test(t)},UO=function(t){return typeof t=="string"&&t.length!==0&&!FO.test(t)},$O=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),UO(t)},mC=function(t,e,n){const r=n instanceof Ae?new wD(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ss(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ss(r)+" with contents = "+e.toString());if(fT(e))throw new Error(t+"contains "+e.toString()+" "+Ss(r));if(typeof e=="string"&&e.length>k0/3&&Lh(e)>k0)throw new Error(t+"contains a string greater than "+k0+" utf8 bytes "+Ss(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(gn(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!pC(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ss(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);ED(r,o),mC(t,a,r),xD(r)}),s&&i)throw new Error(t+' contains ".value" child '+Ss(r)+" in addition to actual children.")}},zO=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!pC(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!$O(n))throw new Error(U9(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function WO(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!jT(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function gi(t,e,n){WO(t,n),HO(t,r=>Tn(r,e)||Tn(e,r))}function HO(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(qO(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function qO(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Ws&&_t("event: "+n.toString()),rc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO="repo_interrupt",KO=25;class QO{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new BO,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ah(),this.transactionQueueTree_=new _g,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function YO(t,e,n){if(t.stats_=sg(t.repoInfo_),t.forceRestClient_||Hb())t.server_=new oh(t.repoInfo_,(r,s,i,o)=>{Zv(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>ey(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{it(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new cr(t.repoInfo_,e,(r,s,i,o)=>{Zv(t,r,s,i,o)},r=>{ey(t,r)},r=>{JO(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Yb(t.repoInfo_,()=>new QD(t.stats_,t.server_)),t.infoData_=new WD,t.infoSyncTree_=new Xv({startListening:(r,s,i,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=xd(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),yg(t,"connected",!1),t.serverSyncTree_=new Xv({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,l)=>{const c=o(a,l);gi(t.eventQueue_,r._path,c)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function XO(t){const n=t.infoData_.getNode(new Ae(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function gC(t){return kO({timestamp:XO(t)})}function Zv(t,e,n,r,s){t.dataUpdateCount++;const i=new Ae(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const l=Lu(n,c=>vt(c));o=NO(t.serverSyncTree_,i,l,s)}else{const l=vt(n);o=RO(t.serverSyncTree_,i,l,s)}else if(r){const l=Lu(n,c=>vt(c));o=AO(t.serverSyncTree_,i,l)}else{const l=vt(n);o=xd(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=Eg(t,i)),gi(t.eventQueue_,a,o)}function ey(t,e){yg(t,"connected",e),e===!1&&eM(t)}function JO(t,e){gn(e,(n,r)=>{yg(t,n,r)})}function yg(t,e,n){const r=new Ae("/.info/"+e),s=vt(n);t.infoData_.updateSnapshot(r,s);const i=xd(t.infoSyncTree_,r,s);gi(t.eventQueue_,r,i)}function ZO(t){return t.nextWriteId_++}function eM(t){_C(t,"onDisconnectEvents");const e=gC(t),n=ah();_2(t.onDisconnect_,pe(),(s,i)=>{const o=bO(s,i,t.serverSyncTree_,e);WT(n,s,o)});let r=[];_2(n,pe(),(s,i)=>{r=r.concat(xd(t.serverSyncTree_,s,i));const o=sM(t,s);Eg(t,o)}),t.onDisconnect_=ah(),gi(t.eventQueue_,pe(),r)}function tM(t){t.persistentConnection_&&t.persistentConnection_.interrupt(GO)}function _C(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),_t(n,...e)}function vC(t,e,n){return iC(t.serverSyncTree_,e,n)||he.EMPTY_NODE}function wg(t,e=t.transactionQueueTree_){if(e||Id(t,e),$o(e)){const n=wC(t,e);O(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&nM(t,ic(e),n)}else dC(e)&&Cd(e,n=>{wg(t,n)})}function nM(t,e,n){const r=n.map(c=>c.currentWriteId),s=vC(t,e,r);let i=s;const o=s.hash();for(let c=0;c<n.length;c++){const h=n[c];O(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=cn(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,c=>{_C(t,"transaction put response",{path:l.toString(),status:c});let h=[];if(c==="ok"){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,h=h.concat(Vi(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Id(t,vg(t.transactionQueueTree_,e)),wg(t,t.transactionQueueTree_),gi(t.eventQueue_,e,h);for(let f=0;f<d.length;f++)rc(d[f])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Qt("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}Eg(t,e)}},o)}function Eg(t,e){const n=yC(t,e),r=ic(n),s=wC(t,n);return rM(t,s,r),r}function rM(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=cn(n,l.path);let h=!1,d;if(O(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,d=l.abortReason,s=s.concat(Vi(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=KO)h=!0,d="maxretry",s=s.concat(Vi(t.serverSyncTree_,l.currentWriteId,!0));else{const f=vC(t,l.path,o);l.currentInputSnapshot=f;const m=e[a].update(f.val());if(m!==void 0){mC("transaction failed: Data returned ",m,l.path);let v=vt(m);typeof m=="object"&&m!=null&&xr(m,".priority")||(v=v.updatePriority(f.getPriority()));const E=l.currentWriteId,p=gC(t),g=DO(v,f,p);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=g,l.currentWriteId=ZO(t),o.splice(o.indexOf(E),1),s=s.concat(SO(t.serverSyncTree_,l.path,g,l.currentWriteId,l.applyLocally)),s=s.concat(Vi(t.serverSyncTree_,E,!0))}else h=!0,d="nodata",s=s.concat(Vi(t.serverSyncTree_,l.currentWriteId,!0))}gi(t.eventQueue_,n,s),s=[],h&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Id(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)rc(r[a]);wg(t,t.transactionQueueTree_)}function yC(t,e){let n,r=t.transactionQueueTree_;for(n=se(e);n!==null&&$o(r)===void 0;)r=vg(r,n),e=Ce(e),n=se(e);return r}function wC(t,e){const n=[];return EC(t,e,n),n.sort((r,s)=>r.order-s.order),n}function EC(t,e,n){const r=$o(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Cd(e,s=>{EC(t,s,n)})}function Id(t,e){const n=$o(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,hC(e,n.length>0?n:void 0)}Cd(e,r=>{Id(t,r)})}function sM(t,e){const n=ic(yC(t,e)),r=vg(t.transactionQueueTree_,e);return MO(r,s=>{P0(t,s)}),P0(t,r),fC(r,s=>{P0(t,s)}),n}function P0(t,e){const n=$o(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(O(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(O(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Vi(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?hC(e,void 0):n.length=i+1,gi(t.eventQueue_,ic(e),s);for(let o=0;o<r.length;o++)rc(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function oM(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Qt(`Invalid query segment '${n}' in query '${t}'`)}return e}const ty=function(t,e){const n=aM(t),r=n.namespace;n.domain==="firebase.com"&&yr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&yr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||jb();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new IT(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Ae(n.pathString)}},aM=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(s=iM(t.substring(h,d)));const f=oM(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const m=e.slice(0,c);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return ne(this._path)?null:DT(this._path)}get ref(){return new zo(this._repo,this._path)}get _queryIdentifier(){const e=Uv(this._queryParams),n=ng(e);return n==="{}"?"default":n}get _queryObject(){return Uv(this._queryParams)}isEqual(e){if(e=ge(e),!(e instanceof xg))return!1;const n=this._repo===e._repo,r=jT(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+yD(this._path)}}class zo extends xg{constructor(e,n){super(e,n,new lg,!1)}get parent(){const e=MT(this._path);return e===null?null:new zo(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}CO(zo);IO(zo);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM="FIREBASE_DATABASE_EMULATOR_HOST",I2={};let cM=!1;function uM(t,e,n,r){t.repoInfo_=new IT(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function hM(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||yr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_t("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=ty(i,s),a=o.repoInfo,l,c;typeof process<"u"&&Ev&&(c=Ev[lM]),c?(l=!0,i=`http://${c}?ns=${a.namespace}`,o=ty(i,s),a=o.repoInfo):l=!o.repoInfo.secure;const h=s&&l?new eo(eo.OWNER):new Gb(t.name,t.options,e);zO("Invalid Firebase Database URL",o),ne(o.path)||yr("Database URL must point to the root of a Firebase Database (not including a child path).");const d=fM(a,t,h,new qb(t.name,n));return new pM(d,t)}function dM(t,e){const n=I2[e];(!n||n[t.key]!==t)&&yr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),tM(t),delete n[t.key]}function fM(t,e,n,r){let s=I2[e.name];s||(s={},I2[e.name]=s);let i=s[t.toURLString()];return i&&yr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new QO(t,cM,n,r),s[t.toURLString()]=i,i}class pM{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(YO(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new zo(this._repo,pe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(dM(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&yr("Cannot call "+e+" on a deleted database.")}}function mM(t=Dh(),e){const n=bl(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Ip("database");r&&gM(n,...r)}return n}function gM(t,e,n,r={}){t=ge(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&yr("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&yr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new eo(eo.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Ap(r.mockUserToken,t.app.options.projectId);i=new eo(o)}uM(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(t){Lb(ps),is(new pr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return hM(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),hn(xv,Tv,t),hn(xv,Tv,"esm2017")}cr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};cr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};_M();function S2(t,e){localStorage.setItem(t,JSON.stringify(e))}function ny(t){let e=localStorage.getItem(t);try{return JSON.parse(e)}catch{return null}}const vM={apiKey:"AIzaSyCwF75LGVuWriGfXEyHzoGBvobiOdMEwHs",authDomain:"star-education-academy.firebaseapp.com",projectId:"star-education-academy",storageBucket:"star-education-academy.appspot.com",messagingSenderId:"693801186794",appId:"1:693801186794:web:b202cdffa55530e687ee93",measurementId:"G-JN1DV2YT81",databaseURL:"https://star-education-academy-default-rtdb.asia-southeast1.firebasedatabase.app"},Sd=H3(vM),U=vL(Sd),yM=new tr,le=Fk(Sd),Vs=Rb(Sd);mM(Sd);const Co=(t,e,n)=>{_.useEffect(()=>{try{if(n){const r=It(le,t),s=Kn(r,i=>{const o=i.docs.map(a=>({...a.data(),[t==="users"?"uid":"id"]:a.id}));o.length!==0&&e(o)});return()=>{s()}}}catch(r){console.log(r.message)}},[n])},wM=(t,e,n)=>{_.useEffect(()=>{var r;try{if(n){const s=oe(le,t,(r=U==null?void 0:U.currentUser)==null?void 0:r.uid),i=Kn(s,o=>{const a={uid:o.id,...o.data()};return a!=null&&a.name&&e(a),()=>i()})}}catch(s){console.log(s.message)}},[n])};function Tr(t,e){let n;return t.forEach(r=>{r.uid===e&&(n=r)}),n}async function Tg(t,e,n,r=null){try{const s=It(le,"notifications"),i={uid:U.currentUser.uid,type:t,[e]:n,isReadBy:[],timestamp:jt(),comment:r};await Vo(s,i)}catch(s){console.log(s.message)}}const EM=({data:t})=>{const{nextPage:e,prevPage:n,isEnded:r,startIndex:s}=t,{startTimer:i,formattedTime:o,stopTest:a,currentTest:l,answeredQuestions:c}=_.useContext(V),h=tn(),d=async()=>{try{const m=It(oe(le,"users",U.currentUser.uid),"history"),v=d9(c,l,o),w=await Vo(m,v),E=(await fx(w)).id;h(`/app/history/${E}`)}catch(m){console.log(m.message)}},f=()=>{i(),d(),a(),Tg(["took","test"],"testName",l.name)};return u.jsxs("div",{className:"flex justify-center gap-x-5",children:[s!==0&&u.jsx(ue,{data:{clickFn:n,text:"Previous",image:"back"}}),r?u.jsx(ue,{data:{clickFn:f,text:"Finish",image:"finish"}}):u.jsx(ue,{data:{clickFn:e,text:"Next",image:"next"}})]})},kn=()=>{const[t,e]=_.useState(!0),[n,r]=_.useState(0),{theme:s}=_.useContext(V);if(_.useEffect(()=>{const i=setInterval(()=>{r(Math.min(n+1,100)),n===100&&(e(!1),r(0))},5);return()=>{clearInterval(i)}},[n]),t&&(document.title="Loading..."),t)return u.jsx("div",{className:`transition-all fixed z-30  top-0 right-0 left-0 bottom-0 flex  items-center justify-center ${s==="light"?"bg-white":"bg-slate-600 text-white"}`,children:u.jsxs("div",{className:"flex flex-col items-center justify-center gap-y-4",children:[u.jsx("img",{className:"w-20 rounded-lg",src:"/images/sea-logo.jpg"}),u.jsx("div",{className:"h-3 w-[200px] rounded-md overflow-hidden",children:u.jsx("div",{style:{width:`${n}%`},className:"h-full bg-blue-300"})}),u.jsxs("p",{className:"text-lg",children:[n,"%"]})]})})},xM=()=>{const{answeredQuestions:t,setAnsweredQuestions:e,currentTest:n,seaLocalStorage:r,seconds:s,hours:i,minutes:o}=_.useContext(V),a=t.length,l=n.quizzes.length,[c,h]=_.useState((r==null?void 0:r.startIndex)||0),[d,f]=_.useState(!1),[m,v]=_.useState(!1),[w,E]=_.useState(!1),p=10;let g=n.quizzes.slice(c,c+p);const y=n.name,x=Math.ceil(l/p),C=Math.ceil((c+p)/p),T=Math.round(a/l*100);_.useEffect(()=>(Kt(),Kt()),[]),_.useEffect(()=>{S2("sea-localStorage",{answeredQuestions:t,currentTest:n,startIndex:c,timer:{seconds:s,minutes:o,hours:i}})},[t,n,c,s]),_.useEffect(()=>{a===l&&c+p>=l?f(!0):f(!1)},[c,t]),_.useEffect(()=>{a>=c+p?v(!0):v(!1)},[t,c]);const k={pageTitle:y,currentPage:C,totalPage:x,percentage:T,answerLength:a,questionsLength:l,currentQuestions:g,isEnded:d,chooseAnswer:(z,F)=>{const Q=o6(z,t);e(Q?t.map(we=>z===we.id?{id:z,userAnswer:F}:we):[...t,{id:z,userAnswer:F}])},nextPage:()=>{m?(h(c+p),a<=c+p&&Kt()):a6(E)},prevPage:()=>{h(Math.max(c-p,0))},startIndex:c};return u.jsxs("div",{className:"p-3 grid gap-y-3",children:[u.jsx(kn,{}),u.jsx(l6,{data:k}),u.jsx(c6,{data:k}),w&&u.jsx(h6,{}),u.jsx(EM,{data:k})]})},Ad=({title:t,text:e})=>{const{isLogin:n,theme:r}=_.useContext(V),s=tn();return u.jsxs("div",{className:"grid p-5 gap-y-2",children:[e&&u.jsx("div",{className:` ${r==="light"?"":"text-white"}`,children:e}),u.jsx("div",{children:u.jsx(ue,{data:{clickFn:()=>s(n?"/app/posts":"/login"),image:"redo",text:n?"Return Home":"Login"}})})]})},TM=()=>{const{theme:t,userData:e}=_.useContext(V),[n,r]=_.useState(null),s=`${n==null?void 0:n.testName} - Results`,i=Math.round((n==null?void 0:n.score)/(n==null?void 0:n.totalScore)*100),o=tn(),{resultId:a}=Tp(),l=()=>{try{const h=It(oe(le,"users",e.uid),"history"),d=oe(h,a);return Kn(d,m=>{const v={id:m.id,...m.data()};r(v)})}catch(h){return console.log(h.message),()=>{}}};_.useEffect(()=>{const h=l();return()=>{h()}},[a]),_.useEffect(()=>(Kt(),Kt()),[]);const c=async()=>{try{await navigator.share({title:"Check out my score!",text:`I scored ${n.score} out of ${n.totalScore} in '${n.testName}'.
Website URL - https://wwww.seaacademy.onrender.com
        `})}catch{console.log("Error")}};return u.jsxs("div",{className:"p-5 ",children:[u.jsx(kn,{}),n?u.jsxs("div",{className:"",children:[u.jsxs("div",{className:"flex items-center gap-x-1 h-10 font-medium mb-4",children:[u.jsx(me,{data:{image:"back",clickFn:()=>o("/app/history")}}),u.jsx("div",{className:`text-lg pl-2 place-items-center bg-blue-40 ${t==="light"?"text-gray-500":"text-white"}`,children:s})]}),u.jsxs("div",{className:"flex items-center gap-x-1 mb-2",children:[u.jsx("div",{children:u.jsx("div",{className:"grid items-center justify-center bg-blue-300/50 h-40 w-40 rounded-full",children:u.jsx("div",{className:"grid items-center justify-center bg-blue-400/50 h-32 w-32 rounded-full",children:u.jsx("div",{className:"grid items-center justify-center bg-blue-500/50 h-28 w-28 rounded-full",children:u.jsx("div",{className:`grid  h-20 w-20 items-center justify-center rounded-full ${t==="light"?"bg-slate-50":"bg-slate-600"}`,children:u.jsxs("div",{className:`flex flex-col items-center justify-center font-medium ${t==="light"?"text-blue-500":"text-white"}`,children:[u.jsx("div",{className:"text-sm font-bold",children:"Your Score"}),u.jsxs("div",{className:" text-lg ",children:[n.score," / ",n.totalScore]})]})})})})})}),u.jsx("div",{className:`grid items-center justify-center font-bold
             text-lg ${t==="light"?"text-blue-700":"text-white"}`,children:u.jsx("div",{children:n.level})})]}),u.jsxs("div",{className:"mt-1 mb-2 h-2 border flex ",children:[u.jsx("div",{className:`h-full ${t==="light"?"bg-lime-400":"bg-slate-500"}`,style:{width:`${i}%`}}),u.jsx("div",{className:"h-full bg-gray-200",style:{width:`${100-i}%`}})]}),u.jsxs("div",{className:`grid grid-cols-2 gap-y-2 border p-2 rounded-lg ${t==="light"?"bg-white border-gray-200":"border-slate-500/70 text-white"}`,children:[u.jsx(xs,{text:"Score Percentage",value:`${i}%`,color:"text-lime-500"}),u.jsx(xs,{text:"Total Questions",value:n.totalScore,color:"text-lime-500"}),u.jsx(xs,{text:"Correct",value:n.score,color:"text-green-500"}),u.jsx(xs,{text:"Wrong",value:n.totalScore-n.score,color:"text-red-500"}),u.jsx(xs,{text:"Date",value:n.date,color:"text-lime-500"}),u.jsx(xs,{text:"Time",value:n.time,color:"text-lime-500"}),u.jsx(xs,{text:"Time taken",value:w3(n.timeTaken)||"Unknown",color:"text-lime-500"})]}),u.jsxs("div",{className:`grid grid-cols-3 justify-center gap-y-2 mt-5 ${t==="light"?"":"text-white"}`,children:[u.jsxs("div",{className:"flex flex-col items-center justify-center",children:[u.jsx(me,{data:{clickFn:()=>o(`/app/history/${a}/reviews`),image:"review"}}),u.jsx("div",{className:"text-sm",children:"Review Answers"})]}),u.jsxs("div",{className:"flex flex-col items-center justify-center",children:[u.jsx(me,{data:{clickFn:c,image:"share"}}),u.jsx("div",{className:"text-sm",children:"Share Score"})]}),u.jsxs("div",{className:"flex flex-col items-center justify-center",children:[u.jsx(me,{data:{clickFn:()=>o("/app/posts"),image:"home"}}),u.jsx("div",{className:"text-sm",children:"Home"})]})]})]}):u.jsx(Ad,{text:"Unavailable"})]})},xs=({text:t,value:e,color:n})=>u.jsxs("div",{children:[u.jsxs("div",{className:`font-medium ${n}`,children:["● ",e]}),u.jsx("div",{className:"text-sm",children:t})]}),xC=({image:t,clickFn:e,active:n})=>{const{theme:r}=_.useContext(V);return u.jsx("button",{className:`transition-all rounded-full p-2  ${r==="light"?`hover:bg-slate-200/70 ${n?"bg-slate-200/70":""}`:`hover:bg-slate-600/70 ${n?"bg-slate-500/70":""}`} mr-2`,onClick:e,children:u.jsx("img",{className:"w-8",src:J(t)})})};function Cr(t,e=15){const n=t.slice(0,e);return e>=t.length?n:`${n}...`}const Ir=({image:t,name:e,size:n="size-10",fontSize:r="text-lg"})=>{const s=t&&t.trim(),i=e&&e.trim(),o=s&&i,a=()=>{const l=e.trim().split(" ");return l.length<=3?l[0][0].toUpperCase():`${l[0][0]}${l[1][0]}`.toUpperCase()};if(s||o)return u.jsx("img",{className:`${n} rounded-full object-cover`,src:t});if(i)return u.jsx("div",{className:`flex font-roboto justify-center ${r} items-center  rounded-full font-bold text-white bg-blue-400 ${n}`,children:a()});if(!o)return u.jsx("div",{className:`flex font-roboto justify-center ${r} items-center  rounded-full font-bold text-white bg-blue-400 ${n}`,children:"U"})},CM=({data:t})=>{const{setIsMenuOpen:e}=t,[n,r]=_.useState(!1),s=_.useRef(null),i=tn(),{setIsLogIn:o,theme:a,userData:l,refreshUserData:c,inspecting:h,isOnline:d}=_.useContext(V),f=async()=>{try{await oP(U),e(!1),o(!1)}catch(w){console.log(w.message)}};li(s,r);const m=async()=>{const w=oe(le,"users",U.currentUser.uid);await St(w,{isOnline:!1,lastSeen:jt()})},v=async()=>{const w=oe(le,"users",U.currentUser.uid);await St(w,{isOnline:!0})};return u.jsxs("div",{ref:s,className:"p-2 ",children:[u.jsx("button",{onClick:()=>r(!n),className:`transition-all p-1 rounded-md cursor-pointer w-full min-h-14 ${a==="light"?`${n?"bg-slate-200/70":"hover:bg-slate-200/70"}`:`${n?"bg-slate-500/70":"hover:bg-slate-500/70"}`}`,children:u.jsxs("div",{className:"flex gap-x-2 items-center mb-2",children:[u.jsxs("div",{className:"relative w-10",children:[u.jsx(Ir,{image:l==null?void 0:l.image,name:l==null?void 0:l.name}),u.jsx("div",{className:`absolute bottom-0 right-0 size-3 rounded-full ${l!=null&&l.isOnline?"bg-green-500":"bg-gray-500"}`})]}),u.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[u.jsxs("div",{className:"font-medium",children:[l==null?void 0:l.name," ",u.jsxs("span",{className:"text-blue-500",children:["(",l.isAdmin?"admin":"user",")"]})]}),h&&u.jsx(me,{data:{clickFn:c,image:"exit"}})]})]})}),n&&u.jsxs("div",{className:`fixed bottom-[70px] left-1 border w-4/6 sm:w-3/5 md:w-4/6  p-2 rounded-md ${a==="light"?"border-gray-200 bg-white ":"bg-slate-500 text-white border-slate-500 "}`,children:[u.jsxs("div",{children:[u.jsxs("button",{onClick:()=>{l!=null&&l.isOnline?m():v()},className:`flex w-full p-1 rounded-md gap-x-2 items-center  ${a==="light"?"hover:bg-gray-200/70":"hover:bg-slate-600 text-white"}`,children:[u.jsx("img",{className:"w-6",src:J(l!=null&&l.isOnline?"offline":"online")}),u.jsxs("div",{children:["Switch to ",l!=null&&l.isOnline?"offline":"online"]})]}),u.jsxs("button",{onClick:()=>{i("/app/settings"),e(!1),r(!1)},className:`flex w-full p-1 rounded-md gap-x-2 items-center  ${a==="light"?"hover:bg-gray-200/70":"hover:bg-slate-600 text-white"}`,children:[u.jsx("img",{className:"w-6",src:J("admin")}),u.jsx("div",{children:"Settings"})]})]}),u.jsxs("button",{onClick:f,className:`flex w-full p-1 rounded-md gap-x-2 items-center ${a==="light"?"hover:bg-gray-200/70":"hover:bg-slate-600 text-white"}`,children:[u.jsx("img",{className:"w-6",src:J("logout")}),u.jsx("div",{children:"Log out"})]})]})]})},IM=({data:t})=>{const{isMenuOpen:e,setIsMenuOpen:n}=t,r=_.useRef(null),s=No(),{setHeaderTitle:i,theme:o,userData:a}=_.useContext(V),l=["/app/admin","/app/admin/posts","/app/admin/users","/app/admin/helps","/app/admin/tests"],c=["/app/posts","/app/tests"],h=s.pathname.includes("/app/history"),d=l.includes(s.pathname),f=c.includes(s.pathname),m=s.pathname==="/app/help",v=s.pathname==="/app/settings",w=s.pathname==="/login",E=s.pathname==="/app/notifications",p=s.pathname==="/app/chatroom";if(h)i("History");else if(m)i("Help");else if(d)switch(s.pathname){case"/app/admin":i("Admin");break;case"/app/admin/posts":i("Admin - Posts");break;case"/app/admin/users":i("Admin - Users");break;case"/app/admin/tests":i("Admin - Tests");break;case"/app/admin/help":i("Admin - Help");break}else v?i("Settings"):(w||f)&&i("STAR EDUCATION ACADEMY");const g=[{text:"Home",image:"home",path:"/app/posts",active:f,clickFn:()=>n(!1)},{text:"History",image:"history",path:"/app/history",active:h,clickFn:()=>n(!1)},{text:"Help",image:"help",path:"/app/help",active:m,clickFn:()=>n(!1)},{text:"Notifications",image:"notification",path:"/app/notifications",color:"bg-red-600",active:E,clickFn:()=>n(!1)},{text:"Chat Room",image:"chat",path:"/app/chatroom",color:"bg-red-600",active:p,clickFn:()=>n(!1)},{text:"Admin",image:"admin",path:"/app/admin",active:d,clickFn:()=>n(!1)}],y=["Admin","Notifications"],x=g.filter(C=>a.isAdmin?!0:!y.includes(C.text));return _.useEffect(()=>{Xt(e?"hidden":"auto")},[e]),li(r,n),u.jsx("div",{style:{left:e?0:"-1500px",right:e?0:""},className:"z-30 transition-all duration-300 fixed top-0 bottom-0 bg-black/40",children:u.jsxs("div",{ref:r,className:`flex flex-col backdrop-blur-sm  justify-between transition-all duration-300 h-full bg-slate-50 w-5/6 sm:w-3/5 md:w-3/6 lg:w-2/6 shadow-lg shadow-black ${o==="light"?"bg-white/60 ":" bg-slate-500/60 text-white"}`,children:[u.jsxs("div",{children:[u.jsx("div",{className:"flex p-3 items-center",children:u.jsxs("div",{className:"font-medium text-md flex-1 flex items-center",children:[u.jsx(xC,{clickFn:()=>n(!1),image:e?"close":"menu",active:e}),u.jsx("div",{className:`font-bold  ${o==="light"?"text-blue-500":" text-slate-700"}`,children:"STAR EDUCATION ACADEMY"})]})}),u.jsx("div",{className:"mr-2",children:x.map(C=>u.jsx(SM,{data:{active:C.active,image:C.image,path:C.path,text:C.text,items:C==null?void 0:C.items,clickFn:C.clickFn,color:C.color}},C.text))})]}),u.jsx(CM,{data:{setIsMenuOpen:n}})]})})},SM=({data:t})=>{const{active:e,image:n,text:r,items:s,path:i,clickFn:o,color:a}=t,l=tn(),{theme:c,currentTest:h}=_.useContext(V),d=()=>{o&&o()};return u.jsxs("button",{onClick:()=>{l(i),d()},className:`p-2 pl-2 transition-all font-medium rounded-tr-3xl rounded-br-3xl flex relative items-center gap-x-1 w-full  hover:shadow-md 
      ${c==="light"?` ${e?"bg-blue-500/70":"hover:bg-slate-200/70"}`:` ${e?"bg-blue-500/70":"hover:bg-slate-500/70"}`}
      `,children:[u.jsx("img",{className:`h-9 w-9 p-1 transition-all
        `,src:J(n)}),u.jsx("div",{children:r}),s>=0&&u.jsx("div",{className:` flex items-center rounded-full justify-center w-6 h-6 text-sm  top-0 -left-1 font-bold text-white ${a||"bg-black"}`,children:s}),h&&r==="Home"&&u.jsxs("div",{className:"text-sm",children:["(Taking ",Cr(h.name,45),")"]})]})},TC=({theme:t,setTheme:e})=>{const n=()=>{e(t==="light"?"dark":"light")};return u.jsxs("div",{className:`flex items-center gap-x-2 ${t==="light"?"":"text-white"} `,children:[u.jsx("div",{children:"Theme"}),u.jsx(me,{data:{clickFn:n,image:t==="light"?"light":"dark"}})]})},AM=()=>{const{headerTitle:t,theme:e,setTheme:n,isLogin:r}=_.useContext(V),[s,i]=_.useState(!1);return u.jsxs("header",{className:`p-2 w-full shadow-sm flex justify-between items-center sticky top-0 right-0 left-0 z-20 ${e==="light"?"bg-slate-50 ":"bg-slate-500"}`,children:[u.jsxs("div",{className:"flex items-center",children:[r&&u.jsxs(u.Fragment,{children:[u.jsx(xC,{clickFn:()=>i(!0),image:"menu",active:s}),u.jsx(IM,{data:{isMenuOpen:s,setIsMenuOpen:i}})]}),u.jsx("div",{className:"font-medium text-md flex-1 flex items-center gap-x-2",children:u.jsx("div",{className:`font-bold ${e==="light"?"text-blue-500":"text-slate-700"}`,children:t})})]}),u.jsxs("div",{className:"flex gap-x-2 items-center",children:[u.jsx("div",{className:"hidden md:block",children:u.jsx(TC,{setTheme:n,theme:e})}),u.jsx("img",{className:"size-12 rounded-full",src:"images/sea-logo.jpg"})]})]})},Fi=()=>u.jsx("div",{className:"h-0.5 border border-dashed border-gray-200 mb-2 mt-2"}),RM=()=>{var w;const{theme:t,userData:e}=_.useContext(V),n=0,r=10,[s,i]=_.useState(r),[o,a]=_.useState(!1),[l,c]=_.useState({}),h=(w=l==null?void 0:l.results)==null?void 0:w.slice(n,s),d=`${l==null?void 0:l.testName} - Review your answers`,{resultId:f}=Tp(),m=()=>{try{const E=It(oe(le,"users",e.uid),"history"),p=oe(E,f);return Kn(p,y=>{const x={id:y.id,...y.data()};c(x)})}catch(E){console.log(E.message)}};_.useEffect(()=>{const E=m();return()=>{E()}},[f]),_.useEffect(()=>(Kt(),Kt()),[]);const v=()=>{i(s+r)};return _.useEffect(()=>{var E;s>=((E=l==null?void 0:l.results)==null?void 0:E.length)&&a(!0)},[s]),document.title=d,u.jsxs("div",{className:"p-5",children:[u.jsx(kn,{}),l?u.jsxs("div",{className:"grid gap-y-5",children:[u.jsx("div",{className:`font-medium text-lg ${t==="light"?"":"text-white"}`,children:d}),h==null?void 0:h.map(E=>{const{id:p,question:g,isTrue:y,answer:x,userAnswer:C}=E;return y?u.jsxs("div",{className:"grid font-padauk gap-y-2",children:[u.jsxs("div",{className:"flex gap-x-3 items-center",children:[u.jsx("div",{className:"bg-green-500 h-9 w-9 text-white font-bold rounded-sm flex justify-center items-center ",children:p}),u.jsx("div",{className:`flex-1 ${t==="light"?"":"text-white"}`,children:g})]}),u.jsx("div",{children:u.jsxs("div",{className:"grid gap-y-1",children:[u.jsx("div",{className:"text-green-500 font-bold",children:"Correct (your answer)"}),u.jsxs("div",{className:"min-h-12  flex gap-x-3 p-2 border text-green-500 border-green-500 rounded-lg items-center shadow-md shadow-lime-200",children:[u.jsx("img",{className:"w-5 h-5",src:J("trueIcon")}),u.jsx("div",{children:x})]})]})}),u.jsx(Fi,{})]},`result-${p}`):u.jsxs("div",{className:"grid font-padauk gap-y-2",children:[u.jsxs("div",{className:"flex gap-x-3 items-center",children:[u.jsx("div",{className:"bg-red-500 h-9 w-9 text-white font-bold rounded-sm flex justify-center items-center ",children:p}),u.jsx("div",{className:`flex-1 ${t==="light"?"":"text-white"}`,children:g})]}),u.jsxs("div",{className:"grid gap-y-1",children:[u.jsxs("div",{className:"grid gap-y-1",children:[u.jsx("div",{className:"text-red-500 font-bold",children:"Incorrect (your answer)"}),u.jsxs("div",{className:"min-h-12 flex gap-x-3 p-2 border text-red-500 border-red-500 rounded-lg items-center shadow-md shadow-red-200",children:[u.jsx("img",{className:"w-5 h-5",src:J("falseIcon")}),u.jsx("div",{children:C})]})]}),u.jsxs("div",{className:"grid gap-y-1",children:[u.jsx("div",{className:"text-green-500 font-bold",children:"Correct"}),u.jsxs("div",{className:" min-h-12  flex gap-x-3 p-2 border text-green-500 shadow-md shadow-lime-200 border-green-500 rounded-lg items-center",children:[u.jsx("img",{className:"w-5 h-5",src:J("trueIcon")}),u.jsx("div",{children:x})]})]})]}),u.jsx(Fi,{})]},`result-${p}`)}),o?"":u.jsx("div",{className:"flex justify-center",children:u.jsx(ue,{data:{image:"down",text:"See More",clickFn:v}})}),u.jsx("div",{children:u.jsx(P3,{to:`/app/history/${f}`,children:u.jsx(ue,{data:{image:"back",text:"Back to results"}})})})]}):u.jsx(Ad,{text:"Unavailable"})]})},NM=()=>{const{deleteFromHistory:t,theme:e,history:n,setHistory:r,userData:s}=_.useContext(V),i=tn(),[o,a]=_.useState(null),[l,c]=_.useState(!1),[h,d]=_.useState(!1),[f,m]=_.useState(!1),[v,w]=_.useState([]),E=()=>{try{const T=It(oe(le,"users",s.uid),"history");return Kn(T,R=>{const S=R.docs.map(k=>({id:k.id,...k.data()}));S.length!==0&&r(S)})}catch(T){return console.log(T.message),()=>{}}};_.useEffect(()=>{Kt();const T=E();return()=>{Kt(),T()}},[]);const p=T=>{f||i(`/app/history/${T.id}`)},g=()=>{t(o),a(null),c(!1)},y=()=>{c(!1),a(null)},x=(T,I)=>{T.target.checked?w([...v,I]):w(v.filter(R=>R!==I))},C=()=>{const T=n.filter(I=>!v.includes(I.id));r(T),w([]),d(!1),m(!1)};return u.jsxs("div",{className:"p-5",children:[u.jsx(kn,{}),h&&u.jsx(co,{data:{text:`Are you sure to delete ${v.length} ${v.length<=1?"item":"items"} ?`,yesButton:C,noButton:()=>d(!1),setValue:d}}),l&&u.jsx(co,{data:{text:"Are you sure to delete ?",yesButton:g,noButton:y,setValue:c}}),n.length!==0?u.jsxs("div",{className:"grid gap-y-2  ",children:[u.jsxs("div",{className:"flex items-center gap-x-2 justify-between",children:[u.jsx(ue,{data:{clickFn:()=>{m(!f),w([])},text:f?"Done":"Select"}}),f&&u.jsxs("div",{className:"flex items-center gap-x-2",children:[u.jsxs("div",{className:"font-medium rounded-lg",children:[v.length," ",v.length<=1?"item":"items"," selected"]}),u.jsx(me,{data:{clickFn:()=>{v.length&&d(!0)},image:"trash"}})]})]}),n.map((T,I)=>u.jsxs("div",{className:`min-h-20 border rounded-md gap-x-3 ${e==="light"?"border-slate-200 shadow-gray-200":"border-slate-500/70 text-white shadow-slate-500"}`,children:[u.jsx("div",{className:`font-medium border-b p-2 rounded-tl-md rounded-tr-md ${e==="light"?"bg-slate-100 border-b-slate-200":"bg-slate-500/70 border-b-slate-400"}`,children:T.testName}),u.jsxs("div",{className:"p-2 flex items-center gap-x-2",children:[f&&u.jsx("input",{checked:v.includes(T.id),onChange:R=>x(R,T.id),className:"form-checkbox rounded-lg border-2 w-6 h-6 border-gray-200 checked:bg-transparent ",type:"checkbox"}),u.jsx("div",{onClick:()=>p(T),className:"flex flex-1 items-center gap-x-3 cursor-pointer",children:u.jsxs("div",{className:"flex-1 sm:flex items-center gap-x-3 ",children:[u.jsxs("div",{className:"",children:["Score: ",T.score," / ",T.results.length," "]}),u.jsxs("div",{className:"",children:["Message: ",Cr(T.level,15)]}),u.jsxs("div",{className:" ",children:["Date: ",T.date," (",` ${T.time}`,")"]}),u.jsxs("div",{className:"",children:["Time taken: ",w3(T.timeTaken)||"Unknown"]})]})}),!1]})]},`shadow-md history-item-${T.id}`)),u.jsx(P3,{to:"/posts",children:u.jsx(ue,{data:{image:"redo",text:"Return Home"}})})]}):u.jsx(Ad,{text:"No items"})]})},kM=()=>{const[t,e]=_.useState(0),n=()=>{const r=window.innerHeight,s=document.documentElement.scrollHeight,i=window.scrollY,o=s-r,a=i/o*100;e(a)};return _.useEffect(()=>(window.addEventListener("scroll",n),()=>{window.removeEventListener("scroll",n)}),[]),u.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-20",children:u.jsx("div",{style:{width:`${t}%`},className:"h-1 bg-blue-600"})})},PM=()=>{const{users:t,theme:e}=_.useContext(V),n=tn(),r=[{name:"Posts",image:"home",path:"/app/admin/posts"},{name:"Tests",image:"exam",path:"/app/admin/tests"},{name:"Users",image:"user",path:"/app/admin/users"}];return u.jsxs("div",{className:"p-5 grid gap-y-2",children:[u.jsx(kn,{}),r.map(s=>u.jsxs("button",{onClick:()=>{n(s.path)},className:`transition-all flex items-center gap-x-2 border  p-2 rounded-lg hover:shadow-md  hover:font-bold min-h-[70px] ${e==="light"?"border-gray-200 hover:bg-slate-100 hover:shadow-gray-500 ":"border-slate-500/70 hover:bg-slate-500/70 text-white"}`,children:[u.jsx("img",{className:"w-7 ",src:J(s.image)}),u.jsx("div",{children:s.name})]},s.name))]})},LM=["January","February","March","April","May","June","July","August","September","October","November","December"];function _i(t){const n=new Date().getTime()-t,r=Math.floor(n/1e3),s=Math.floor(r/60),i=Math.floor(s/60),o=Math.floor(i/24),a=Math.floor(o/7),l=Math.floor(o/30),c=Math.floor(l/12),h=new Date(t),d=h.getFullYear(),f=h.getMonth(),m=h.getDate(),v=`${LM[f]} ${m}, ${d}`;if(c>0)return v;if(l>0)return`${l}m • ${v}`;if(a>0)return`${a}w • ${v}`;if(o>0)return`${o}d`;if(i>0)return`${i}h`;if(s>0)return`${s}min`;if(r>0)return`${r}s`}const Rd=({options:t,left:e="-left-[102px]"})=>{const[n,r]=_.useState(!1),s=_.useRef(null),{theme:i}=_.useContext(V);li(s,r);const o=()=>{r(!n)};return u.jsxs("button",{className:`relative rounded-full p-1 ${i==="light"?"bg-slate-100":"bg-slate-500/70"}`,onClick:o,ref:s,children:[u.jsx("img",{className:"w-6",src:J("moreOption")}),n&&u.jsx("div",{className:`border p-1 rounded-md  grid absolute ${e} bottom-0 w-[100px] ${i==="light"?"border-gray-200 bg-white":"border-gray-500/70 bg-slate-500"}`,children:t.map(a=>{if(a)return u.jsxs("button",{onClick:a.onClick,className:`flex rounded-md items-center gap-x-1 b  p-2 ${i==="light"?"hover:bg-slate-100":"hover:bg-slate-600"}`,children:[u.jsx("img",{className:"w-6",src:J(a.icon)}),u.jsx("p",{children:a.text})]},a.text)})})]})},bM=["January","February","March","April","May","June","July","August","September","October","November","December"],DM=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Io(t){const n=new Date().getTime()-t,r=Math.floor(n/1e3),s=Math.floor(r/60),i=Math.floor(s/60),o=Math.floor(i/24),a=Math.floor(o/7),l=Math.floor(o/30),c=Math.floor(l/12),h=new Date(t),d=h.getFullYear(),f=h.getMonth(),m=h.getDate(),v=DM[h.getDay()],w=bM[f],E=`${w} ${m}, ${d}`,p=h.toLocaleTimeString([],{hour:"numeric",minute:"numeric",hour12:!0});if(c>0)return`${p} • ${E}`;if(l>0)return`${p} • ${w} ${m}`;if(a>0)return`${v}, ${p} • ${w} ${m}`;if(o>0)return`${v}, ${p}`;if(i>0)return p;if(s>0)return p;if(r>0)return p}function wr(t,e,n="timestamp",r="older"){var o,a;const s=new Date((o=t[n])!=null&&o.seconds?t[n].seconds*1e3:t[n]),i=new Date((a=e[n])!=null&&a.seconds?e[n].seconds*1e3:e[n]);return r==="older"?s-i:i-s}function _n(t){return t!=null&&t.seconds?t.seconds*1e3:t}const CC=({post:t,collectionName:e})=>{const{id:n}=t,[r,s]=_.useState([]),[i,o]=_.useState([]),{users:a,theme:l}=_.useContext(V),[c,h]=_.useState(!1),[d,f]=_.useState(!1),m=e==="posts",v=It(oe(le,e,n),"comments"),w=It(oe(le,e,n),"likes"),E=()=>Kn(w,I=>{const R=I.docs.map(S=>({id:S.id,...S.data()})).sort((S,k)=>wr(S,k,"timestamp","newer"));s(R)}),p=()=>Kn(v,I=>{const R=I.docs.map(S=>({id:S.id,...S.data()})).sort((S,k)=>wr(S,k,"timestamp"));o(R)});_.useEffect(()=>{const T=E(),I=p();return()=>{T(),I()}},[]);const g=()=>{let T=!1;return r.forEach(I=>{var R;I.uid===((R=U==null?void 0:U.currentUser)==null?void 0:R.uid)&&(T=!0)}),T},y=async()=>{try{const T=oe(w,U.currentUser.uid),I=g(),R={uid:U.currentUser.uid,timestamp:jt()};I?await Yl(T):(await px(T,R),Tg(["like",m?"post":"test"],m?"description":"testName",m?t.description:t.name))}catch(T){console.log(T.message)}},x=g(),C=()=>{var I;return Tr(a,(I=r[0])==null?void 0:I.uid)||null};return u.jsxs("div",{className:"mt-2",children:[u.jsxs("div",{className:"transition-all mb-1 flex justify-between",children:[u.jsx("button",{onClick:()=>{h(!c),f(!1)},className:`transition-all ${l==="light"?`${c?"bg-slate-200":"hover:bg-slate-200"}`:`${c?"bg-slate-500/70":"hover:bg-slate-500/70"}`}  p-1 rounded-lg`,children:C()?u.jsx("span",{children:r.length===1?C().name:`${C().name} and ${r.length-1} others`}):u.jsxs("span",{children:[r.length," ",r.length>1?"likes":"like"]})}),u.jsxs("button",{onClick:()=>{f(!d),h(!1)},className:`transition-all ${l==="light"?`${d?"bg-slate-200":"hover:bg-slate-200"}`:`${d?"bg-slate-500/70":"hover:bg-slate-500/70"}`}  p-1 rounded-lg`,children:[i.length," ",i.length>1?"comments":"comment"]})]}),u.jsxs("div",{className:`border-t pt-2 flex gap-x-2 ${l==="light"?"border-t-slate-300":"border-t-slate-500/70"}`,children:[u.jsx(ue,{data:{clickFn:y,image:x?"liked":"like",text:x?"Liked":"Like"}}),u.jsx(ue,{data:{clickFn:()=>{f(!d),h(!1)},image:"comment",text:"Comment"}})]}),c&&u.jsx(OM,{likes:r,users:a}),d&&u.jsx(MM,{isPost:m,post:t,id:n,comments:i,collectionName:e})]})},OM=({likes:t})=>{const{users:e}=_.useContext(V);return u.jsx("div",{className:"mt-2 grid gap-y-2",children:t.map(n=>{const r=Tr(e,n.uid);return u.jsxs("div",{className:"flex gap-x-2 items-center",children:[u.jsx(Ir,{image:r==null?void 0:r.image,name:r==null?void 0:r.name}),u.jsx("div",{children:r==null?void 0:r.name})]},`user-${r==null?void 0:r.uid}`)})})},MM=({post:t,isPost:e,comments:n,id:r,collectionName:s})=>{const[i,o]=_.useState(""),{users:a,theme:l,userData:c}=_.useContext(V),h=It(oe(le,s,r),"comments"),[d,f]=_.useState(null),m=async()=>{if(i.trim()){const E={uid:U.currentUser.uid,text:i.trim(),timestamp:jt()};await Vo(h,E),o(""),Tg(["comment",e?"post":"test"],e?"description":"testName",e?t.description:t.name,i.trim())}},v=async()=>{const E=oe(h,d);if(i.trim()){const p={text:i.trim(),editedTime:jt()};await St(E,p),o(""),f(null)}},w=async E=>{const p=oe(h,E);try{await Yl(p)}catch(g){console.log(g.message)}};return u.jsxs("div",{className:"mt-2",children:[u.jsx("div",{className:"grid gap-y-2",children:n.map(E=>{var x;const p=Tr(a,E.uid);console.log(p);const g=E.uid===((x=U==null?void 0:U.currentUser)==null?void 0:x.uid),y=g&&{text:"Edit",icon:"editPencil",onClick:()=>{f(E.id),o(E.text)}};return u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{className:"flex gap-x-1",children:[u.jsx("div",{children:u.jsx(Ir,{image:p==null?void 0:p.image,name:p==null?void 0:p.name})}),u.jsxs("div",{className:"max-w-[250px]",children:[u.jsxs("div",{className:`p-2  rounded-lg ${l==="light"?"bg-slate-100":"bg-slate-500/70 text-white"}`,children:[u.jsx("div",{className:"font-bold",children:p==null?void 0:p.name}),u.jsx("div",{children:E.text})]}),u.jsx("div",{className:`text-sm mt-1 ${l==="light"?"text-gray-600":"text-white"}`,children:E!=null&&E.editedTime?u.jsxs("span",{children:["edited ",Io(_n(E.editedTime))]}):u.jsx("span",{children:Io(_n(E.timestamp))})})]})]}),g||c!=null&&c.isAdmin?u.jsx(Rd,{options:[y,{text:"Delete",icon:"deleteIcon",onClick:()=>w(E.id)}]}):""]},`${E.uid}-${E.id}`)})}),u.jsxs("div",{className:"mt-2 flex gap-x-1",children:[u.jsx("input",{autoFocus:!0,onChange:E=>o(E.target.value),value:i,className:`h-10 flex-1 rounded-lg pl-2 border ${l==="light"?"border-gray-300 focus:outline-blue-500":"outline-none bg-slate-500/70 border-slate-500/70"}`,placeholder:"Write a comment..."}),u.jsxs("div",{className:"flex gap-x-1",children:[d&&u.jsx(ue,{data:{image:"falseIcon",clickFn:()=>{f(null),o("")}}}),u.jsx(ue,{data:{clickFn:()=>{i.trim()&&(d?v():m())},image:"send"}})]})]})]})},jM=({t,takeTest:e})=>{const{users:n,theme:r}=_.useContext(V),s=Tr(n,t.uid);return u.jsxs("div",{className:`flex flex-col justify-between min-h-60 border shadow-md  rounded-md bg-gradient-to-tr ${r==="light"?"border-blue-200 shadow-gray-200":"border-blue-200 text-white shadow-slate-500"}`,children:[u.jsxs("div",{className:"flex gap-x-2 mb-2 p-2",children:[u.jsx("img",{className:"size-10 rounded-full shadow-md object-cover",src:s.image}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:s.name}),u.jsx("div",{className:` text-sm ${r==="light"?"text-gray-500 ":"text-white"}`,children:_i(_n(t.time))})]}),u.jsxs("span",{className:`rounded-md flex items-center p-1 ${r==="light"?"bg-slate-100 ":"bg-slate-500/70 "}`,children:[t.quizzes.length,t.quizzes.length>1?" questions":" question"]})]}),t.image&&u.jsx("div",{className:"m-2 min-h-32",children:u.jsx("img",{className:"w-full",src:`images/tests/${t.image}`})}),u.jsxs("div",{className:`rounded-bl-lg rounded-br-lg border-t  p-2 pb-5 ${r==="light"?"border-t-slate-300":"border-t-slate-500/70"}`,children:[u.jsx("div",{className:"font-medium text-lg",children:t.name}),u.jsx("p",{className:" mb-2 break-words white-space-pre-wrap",children:t.description.trim()||"No description"}),u.jsx(ue,{data:{clickFn:()=>e(t),text:"Take the test"}}),u.jsx(CC,{post:t,collectionName:"tests"})]})]})},ry=({text:t})=>{const{theme:e}=_.useContext(V);return u.jsx("div",{className:"h-[300px] flex flex-col justify-center items-center",children:u.jsx("p",{className:`text-center ${e==="light"?"":"text-white"}`,children:t})})},VM=()=>{const{setCurrentTest:t,startTimer:e,users:n,theme:r,isLogin:s,posts:i,setPosts:o,tests:a,setTests:l}=_.useContext(V),{page:c}=Tp(),h=No(),d=tn(),f=h.pathname==="/app/posts",m=h.pathname==="/app/tests";_.useState(!0),_.useState(!0);const v=[{name:"Posts",active:f,image:"home",path:"/app/posts"},{name:"Tests",active:m,image:"exam",path:"/app/tests"}];Co("posts",o,s),Co("tests",l,s);const w=p=>{scrollTo({top:0}),t(p),e()},E=()=>{switch(c){case"posts":return u.jsx("div",{className:"grid gap-y-2 mb-2",children:i.length===0?u.jsx(ry,{text:"No posts"}):i.sort((p,g)=>wr(p,g,"time","newer")).map(p=>{var y,x;const g=Tr(n,p.uid);if(!p.draft)return u.jsxs("div",{className:`w-full border rounded-md shadow-md p-2 ${r==="light"?"border-blue-200 shadow-gray-200":"border-blue-200 text-white shadow-slate-500"}`,children:[u.jsxs("div",{className:"top-section flex gap-x-2 mb-2",children:[u.jsx("img",{className:"size-10 rounded-full shadow-md object-cover",src:g.image}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:g.name}),u.jsx("div",{className:` text-sm ${r==="light"?"text-gray-500":"text-white"}`,children:_i(_n(p.time))})]})]}),(p==null?void 0:p.description)&&u.jsx("p",{className:"mb-2 break-words whitespace-pre-wrap",children:p.description}),p.images.length!==0&&u.jsx("div",{className:"image grid gap-y-2",children:u.jsx(FM,{data:{post:p}})}),p.files&&((y=p==null?void 0:p.files)==null?void 0:y.length)!==0&&u.jsx(UM,{files:p.files}),(p==null?void 0:p.links)&&((x=p==null?void 0:p.links)==null?void 0:x.length)!==0&&u.jsx($M,{links:p.links}),u.jsx(CC,{post:p,collectionName:"posts"})]},`post-${p.id}`)})});case"tests":return u.jsx("div",{className:"grid gap-y-2 mb-2",children:a.length===0?u.jsx(ry,{text:"No tests"}):a.sort((p,g)=>wr(p,g,"timestamp","newer")).map(p=>{if(p.isUploaded)return u.jsx(jM,{t:p,takeTest:w},`tests-${p.id}-${p.name}`)})})}};return u.jsxs("div",{children:[u.jsx(kn,{}),u.jsxs("div",{className:"grid p-5",children:[u.jsx("div",{className:"flex mb-2 -mt-5 justify-center",children:u.jsx("div",{className:`flex -mt-[2px] gap-x-1 w-2/3 justify-center rounded-bl-lg rounded-br-lg shadow-sm p-2 ${r==="light"?"bg-slate-50/50":"bg-slate-500/70"}`,children:v.map(p=>u.jsxs("button",{onClick:()=>d(p.path),className:`transition text-slate-700 shadow-sm rounded-lg border-solid flex font-bold gap-x-1 items-center p-2 pl-3 pr-3 ${r==="light"?`${p.active?" bg-blue-500/70":"hover:bg-slate-200 border-transparent"}`:`${p.active?" bg-blue-500/70":"hover:bg-slate-500 border-transparent"}`} font-bold text-md`,children:[u.jsx("img",{className:"w-6",src:J(p.image)}),u.jsx("div",{children:p.name})]},p.name))})}),E()]})]})},FM=({data:t})=>{const{post:e}=t,n=0,[r,s]=_.useState(4),[i,o]=_.useState(!0),a=e.images.slice(n,r),l=e.images.length-4,c=()=>{o(!1),s(e.images.length)};return a.map((h,d)=>u.jsxs("div",{className:"relative ",children:[u.jsx("img",{className:"w-full shadow-md min-h-48",src:h.imageURL,alt:h.name}),u.jsx("div",{className:"z-20 absolute right-1 top-1"}),d+1===4&&i&&l?u.jsx("div",{onClick:c,className:"z-10 absolute top-0 right-0 left-0 bottom-0 flex cursor-pointer items-center justify-center",children:u.jsxs("div",{className:"font-medium text-8xl text-white",children:["+",l]})}):""]},`post-${e.id}-image-${h.imageURL}`))},UM=({files:t})=>{const{theme:e}=_.useContext(V);return u.jsx("div",{className:"grid gap-y-2 mt-2",children:t.map((n,r)=>u.jsx("a",{href:n.fileURL,download:n.name,target:"_blank",children:u.jsxs("div",{className:`p-1 cursor-pointer  min-h-14 rounded-md flex gap-x-1 items-center font-bold border  border-l-4 border-l-green-500 ${e==="light"?"bg-slate-50 border-gray-300 text-blue-600":"bg-slate-500/70 border-slate-500/70 text-white"}`,children:[u.jsx("img",{className:"w-7 ",src:J("download")}),u.jsxs("div",{children:[u.jsx("p",{className:"underline",children:n.name}),(n==null?void 0:n.size)&&u.jsxs("p",{children:[(n.size/(1024*1024)).toFixed(2)," MB"]})]})]})},`${r}-${n.fileURL}`))})},$M=({links:t})=>{const{theme:e}=_.useContext(V);return u.jsx("div",{className:"grid gap-y-2 mt-2",children:t.map((n,r)=>u.jsx("a",{href:n.link,target:"_blank",children:u.jsxs("div",{className:`p-1 cursor-pointer  min-h-14 rounded-md flex ga-x-1 items-center font-bold border  border-l-4 border-l-green-500 ${e==="light"?"bg-slate-50 border-gray-300 text-blue-600":"bg-slate-500/70 border-slate-500/70 text-white"}`,children:[u.jsx("img",{className:"w-7 ",src:J("link")}),u.jsx("div",{children:u.jsx("p",{className:"underline",children:n.title})})]})},`${r}-${n.link}`))})},zM=()=>{const e=new Date().getFullYear(),{theme:n}=_.useContext(V);return u.jsxs("footer",{className:`w-full flex flex-col items-center p-1 bg-slate-50 border-t  mt-auto ${n==="light"?"border-t-gray-100":"bg-slate-600 text-white border-t-slate-500"}`,children:[u.jsxs("div",{children:["SEA copyright 2015 - ",e]}),u.jsx("div",{children:"All rights reserved."}),u.jsx("div",{children:"Author: Than Aung Naing"})]})},hh=({message:t,bgColor:e="bg-slate-200"})=>u.jsx("div",{className:"z-30 fixed flex justify-center bottom-5 left-0 right-0 ",children:u.jsx("div",{className:`${e} font-bold p-3 rounded-lg`,children:t})}),BM=({data:t})=>{const{isLogin:e,refreshUserData:n,setHeaderTitle:r,theme:s}=_.useContext(V),[i,o]=_.useState(""),[a,l]=_.useState(""),[c,h]=_.useState(""),[d,f]=_.useState(null),[m,v]=_.useState("login"),w=tn();let E;document.title="Login",_.useEffect(()=>{e&&w("/"),r("STAR EDUCATION ACADEMY")},[]),Xt("auto");const p=async(T,I,R,S)=>{try{const k=oe(le,"users",U.currentUser.uid),z=await fx(k),F={name:T,email:I,password:R,image:S,isAdmin:!1,createdAt:jt()};z.exists()||await px(k,F),n()}catch(k){console.log(k.message)}},g=async()=>{try{await AP(U,yM),p(U.currentUser.displayName,U.currentUser.email,"",U.currentUser.photoURL)}catch(T){clearTimeout(E),f(T.message),E=setTimeout(()=>{f(null)},3e3)}},y=async()=>{try{await nP(U,a,c)}catch(T){clearTimeout(E),f(T.message),E=setTimeout(()=>{f(null)},3e3)}},x=async()=>{try{await tP(U,a,c),p(i,a,c,null)}catch(T){clearTimeout(E),f(T.message),E=setTimeout(()=>{f(null)},3e3)}},C=()=>{switch(m){case"login":return u.jsxs("div",{children:[u.jsx("div",{className:`text-md rounded-md font-medium  p-1 pl-2 border-b  ${s==="light"?"text-lime-700 bg-lime-100/70 border-b-lime-300":"text-white bg-slate-500/70 border-slate-500/70"}`,children:"You must log in first."}),u.jsxs("div",{className:"mt-10 flex flex-col items-center ",children:[u.jsx("div",{className:"text-lg font-medium text-blue-500",children:"Log in"}),u.jsxs("div",{className:"grid p-2 w-5/6 sm:w-3/5 lg:w-4/6 gap-y-2",children:[u.jsx(ia,{data:{type:"text",value:a,setValue:l,placeholder:"Enter your email"}}),u.jsx(ia,{data:{type:"password",value:c,setValue:h,placeholder:"Enter your password"}}),d&&u.jsx(hh,{message:d,bgColor:"bg-red-300"}),u.jsx("button",{onClick:y,className:"transition-all bg-blue-400 text-white font-medium h-10 rounded-lg border border-transparent hover:border-lime-500",children:"Log in"})]}),u.jsx(sy,{}),u.jsx("div",{children:u.jsx(ue,{data:{clickFn:g,image:"google",text:"Sign in with Google"}})}),u.jsx(sy,{}),u.jsx("div",{children:u.jsx(ue,{data:{clickFn:()=>v("signup"),text:"Create new Account"}})})]})]});case"signup":return u.jsxs("div",{children:[u.jsx("div",{className:`text-md rounded-md font-medium  p-1 pl-2 border-b  ${s==="light"?"text-lime-700 bg-lime-100/70 border-b-lime-300":" bg-slate-500/70 border-slate-500/70 text-white"}`,children:"You must log in first."}),u.jsxs("div",{className:"mt-10 flex flex-col items-center ",children:[u.jsx("div",{className:"text-lg font-medium text-blue-500",children:"Create new account"}),u.jsxs("div",{className:"grid p-2 w-5/6 sm:w-3/5 lg:w-4/6 gap-y-2",children:[u.jsx(ia,{data:{type:"text",value:i,setValue:o,placeholder:"Enter your name"}}),u.jsx(ia,{data:{type:"text",value:a,setValue:l,placeholder:"Enter your email"}}),u.jsx(ia,{data:{type:"password",value:c,setValue:h,placeholder:"Enter your password"}}),d&&u.jsx(hh,{message:d,bgColor:"bg-red-300"}),u.jsx("button",{onClick:()=>{i.trim()&&x()},className:"transition-all bg-blue-400 text-white font-medium h-10 rounded-lg border border-transparent hover:border-lime-500",children:"Sign up"}),u.jsx("div",{children:u.jsx(ue,{data:{clickFn:()=>v("login"),text:"Back",image:"back"}})})]})]})]})}};return u.jsxs("div",{className:"Login mb-5",children:[u.jsx(kn,{}),C()]})},ia=({data:t})=>{const{value:e,setValue:n,placeholder:r,type:s}=t,{theme:i}=_.useContext(V);return u.jsx("input",{type:s,value:e,onChange:o=>n(o.target.value),className:`h-10  pl-1 border rounded-lg   ${i==="light"?"border-gray-200 focus:outline-blue-500":"bg-slate-500/70 outline-none border-slate-500/70 text-white"}`,placeholder:r})},sy=()=>{const{theme:t}=_.useContext(V);return u.jsx("div",{className:`mt-2 mb-2 ${t==="light"?"":"text-white"}`,children:"OR"})},WM=()=>{const{userData:t,refreshUserData:e,theme:n,setTheme:r,isOnline:s}=_.useContext(V),[i,o]=_.useState(t.name||""),[a,l]=_.useState(null),[c,h]=_.useState(!1),d=_.useRef(null),[f,m]=_.useState(null),v=async()=>{var y;if(i.trim())try{const x=oe(le,"users",(y=U==null?void 0:U.currentUser)==null?void 0:y.uid),C={name:i.trim()};await St(x,C),e(),g("Updated name successfully!")}catch(x){g(x.message)}};li(d,h);const w=async()=>{var x;const y=Ms(Vs,`profile/${U.currentUser.uid}/${t.name}-${a.name}`);try{const C=oe(le,"users",(x=U==null?void 0:U.currentUser)==null?void 0:x.uid);g("Uploading image...");const T=await th(y,a),R={image:await nh(T.ref)};await St(C,R),l(null),g("Updated profile picture successfully!")}catch(C){g(C.message)}},E=()=>{a&&w(),i.trim()!==t.name&&v()};let p;const g=(y,x=3e3)=>{clearTimeout(p),m(y),p=setTimeout(()=>{m(null)},x)};return u.jsxs("div",{className:"Settings p-2",children:[u.jsx(kn,{}),u.jsxs("div",{className:"p-2",children:[u.jsxs("div",{className:"relative size-20",children:[u.jsx(Ir,{name:t.name||i||"User",image:a?URL.createObjectURL(a):t.image,size:"size-full",fontSize:"text-3xl"}),u.jsx("input",{type:"file",accept:"image/*",id:"imageInput",className:"hidden",onChange:y=>l(y.target.files[0])}),u.jsx("label",{htmlFor:"imageInput",className:` p-1 rounded-full absolute -bottom-1 -right-1 cursor-pointer ${n==="light"?"bg-gray-200":"bg-slate-500/70"}`,children:u.jsx("img",{className:"w-5",src:J("edit")})})]}),u.jsxs("div",{className:`${n==="light"?"":"text-white"}`,children:["Hi, ",Cr(t.name||i||"User",25),"!"]})]}),u.jsxs("div",{className:`grid gap-y-2 border  p-2 rounded-md ${n==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[u.jsxs("div",{children:[u.jsx("div",{children:"Name"}),u.jsxs("div",{ref:d,className:"flex gap-x-2 items-center",children:[!c&&u.jsx("div",{children:i||t.name||"User"}),c&&u.jsx("input",{autoFocus:!0,value:i,onChange:y=>o(y.target.value),className:` ${n==="light"?"focus:outline-blue-500":"bg-slate-500/70 outline-none"}`,placeholder:"Enter your full name"}),u.jsx("button",{onClick:()=>{h(!c)},className:` p-1 rounded-full cursor-pointer ${n==="light"?"bg-gray-200":"bg-slate-500/70"}`,children:u.jsx("img",{className:"w-5",src:J(c?"save":"edit")})})]})]}),u.jsxs("div",{children:[u.jsx("div",{children:"Email"}),u.jsx("div",{children:t.email||"example@gmail.com"})]})]}),u.jsx("div",{className:"flex gap-x-2 mt-2",children:a||i.trim()!==t.name?u.jsx(ue,{data:{clickFn:()=>{s?E():console.log("You are offline")},image:"save",text:"Update"}}):""}),f&&u.jsx(hh,{message:f}),u.jsx("div",{className:`mt-4 ${n==="light"?"":"text-white"} md:hidden`,children:u.jsx(TC,{setTheme:r,theme:n})})]})},dh=({data:t})=>{const{text:e,onChangeFn:n,value:r,placeholder:s}=t,{theme:i}=_.useContext(V);return u.jsxs("div",{className:"grid items-center gap-y-2",children:[u.jsx("div",{className:"font-medium",children:e}),u.jsx("input",{onChange:n,value:r,className:`border rounded-md h-10 pl-1 pr-1  w-full outline-2  ${i==="light"?"focus:outline-blue-300 border-gray-300":"border-slate-500/70 outline-none bg-slate-500/70"}`,placeholder:s})]})},HM=({data:t})=>{const{close:e}=t,{theme:n}=_.useContext(V),[r,s]=_.useState(""),[i,o]=_.useState(""),a=r.trim(),l=It(le,"tests"),c=async f=>{try{await Vo(l,f)}catch(m){console.log(m.message)}},h=()=>{const f={uid:U.currentUser.uid,isUploaded:!1,name:r,description:i,quizzes:[],gradingRules:[],time:jt()};c(f),e()},d=()=>{a&&h()};return _.useEffect(()=>(Xt("hidden"),()=>{Xt("auto")}),[]),u.jsx("div",{className:"fixed flex items-center z-20 bg-black/60 justify-center top-0 left-0 right-0 bottom-0",children:u.jsxs("div",{className:`border w-4/5 sm:w-4/5 md:w-3/5 lg:w-2/5 rounded-md p-10 pb-5 grid gap-y-5 ${n==="light"?"bg-white border-gray-300":"bg-slate-600 border-slate-500/70 text-white"}`,children:[u.jsxs("div",{className:"grid gap-y-2",children:[u.jsx(dh,{data:{text:"Name",onChangeFn:f=>s(f.target.value),value:r,placeholder:"Type test name here"}}),u.jsx(dh,{data:{text:"Description",onChangeFn:f=>o(f.target.value),value:i,placeholder:"Type description here"}})]}),u.jsxs("div",{className:"flex items-center gap-x-3 justify-center",children:[u.jsx(ue,{data:{clickFn:d,text:"Save",image:"save"}}),u.jsx(ue,{data:{clickFn:e,text:"Cancel"}})]})]})})},qM=({data:t})=>{const{options:e,value:n,setValue:r}=t,{theme:s}=_.useContext(V),[i,o]=_.useState(!1),a=_.useRef(null);li(a,o);const l=()=>{o(!i)},c=h=>{r(h)};return u.jsxs("div",{ref:a,className:"w-full relative font-padauk",children:[u.jsxs("button",{onClick:l,className:`border flex items-center rounded-lg justify-between h-10 w-full cursor-pointer hover:border-blue-500 shadow-sm gap-x-2 px-2 ${s==="light"?"border-gray-300 hover:bg-gray-50":"hover:bg-slate-500/70 text-white border-slate-500/70"}`,children:[u.jsx("span",{children:n||"Select correct answer"}),u.jsx("img",{className:"h-6 w-6",src:J(i?"up":"down")})]}),i&&e.length!==0?u.jsx("div",{className:`absolute grid gap-y-1 min-w-full p-2 rounded-md border -top-40 ${s==="light"?"border-gray-200 bg-white":"text-white bg-slate-500/70 border-slate-500/70"}`,children:e.map(h=>u.jsx("div",{onClick:()=>{l(),c(h)},className:`p-1 cursor-pointer rounded-lg transition-all ${s==="light"?`${h===n?"bg-black font-medium text-white ":"hover:bg-gray-200"}`:`${h===n?"bg-slate-600 font-medium text-white ":"hover:bg-slate-600"}`}`,children:h},`choice-${h}`))}):""]})},Vr=({data:t})=>{const{choice:e,handleFn:n,value:r,placeholder:s}=t,{theme:i}=_.useContext(V);return u.jsxs("div",{className:"grid gap-y-2 font-padauk",children:[u.jsx("div",{className:`font-medium ${i==="light"?"":"text-white"}`,children:e}),u.jsx("input",{onChange:o=>n(e,o),value:r,className:` w-full border rounded-md h-10 pl-1 pr-1  ${i==="light"?"focus:outline-blue-500 border-gray-300":"text-white outline-none border-slate-500/70 bg-slate-600"}`,placeholder:s})]})},GM=({data:t})=>{const{cancel:e,quizzes:n,setQuizzes:r,editData:s,clearEditData:i}=t,{theme:o}=_.useContext(V),[a,l]=_.useState(s?s.question:""),[c,h]=_.useState(s?s.choices[0]:""),[d,f]=_.useState(s?s.choices[1]:""),[m,v]=_.useState(s?s.choices[2]:""),[w,E]=_.useState(s?s.choices[3]:""),[p,g]=_.useState(s?s.answer:"");let y=[];const x=c.trim()&&d.trim()&&m.trim()&&w.trim(),C=a.trim()&&c.trim()&&d.trim()&&m.trim()&&w.trim()&&p.trim();x&&(y=[c,d,m,w]);const T=(F,Q)=>{F.toLowerCase()==="question"?l(Q.target.value):g(Q.target.value)},I=()=>{let F,Q;C&&(F={id:n.length===0?1:n[n.length-1].id+1,question:a,choices:y,answer:p},Q=[...n,F],r(Q),Aa(),e())},R=()=>{const F=s.id,Q={id:F,question:a,choices:y,answer:p},we=n.map(nn=>F===nn.id?Q:nn);r(we),e(),i()},S=(F,Q)=>{F.toLowerCase()==="choice 1"?h(Q.target.value):F.toLowerCase()==="choice 2"?f(Q.target.value):F.toLowerCase()==="choice 3"?v(Q.target.value):E(Q.target.value)},k=()=>{s?R():I()},z=()=>{e(),i()};return _.useEffect(()=>(Xt("hidden"),()=>{Xt("auto")}),[]),u.jsx("div",{className:"fixed flex items-center z-20 bg-black/60 justify-center top-0 left-0 right-0 bottom-0",children:u.jsxs("div",{className:`border w-5/6 sm:w-4/5 md:w-3/5 lg:w-2/5 grid gap-y-2  p-3  top-0 left-0 right-0 bottom-0 rounded-lg relative ${o==="light"?"bg-white border-gray-200":"text-white border-slate-500/70 bg-slate-600"}`,children:[u.jsx("div",{className:`top-1 shadow-md border rounded-full right-1 h-9 w-9 text-white font-medium flex justify-center absolute items-center ${o==="light"?"bg-black border-gray-200":"bg-slate-500/70 border-slate-600"}`,children:s?s.number:n.length+1}),u.jsxs("div",{className:"grid gap-y-2",children:[u.jsx(Vr,{data:{handleFn:T,value:a,choice:"Question",placeholder:"Enter question"}}),u.jsx(Vr,{data:{handleFn:S,value:c,choice:"Choice 1",placeholder:"Enter choice 1"}}),u.jsx(Vr,{data:{handleFn:S,value:d,choice:"Choice 2",placeholder:"Enter choice 2"}}),u.jsx(Vr,{data:{handleFn:S,value:m,choice:"Choice 3",placeholder:"Enter choice 3"}}),u.jsx(Vr,{data:{handleFn:S,value:w,choice:"Choice 4",placeholder:"Enter choice 4"}}),u.jsxs("div",{className:"flex items-center gap-x-5",children:[u.jsx("div",{className:"font-medium",children:"Answer"}),u.jsx(qM,{data:{options:y,value:p,setValue:g}})]})]}),u.jsxs("div",{className:"flex justify-end gap-x-2",children:[u.jsx(ue,{data:{clickFn:k,text:"Save",image:"save"}}),u.jsx(ue,{data:{clickFn:z,text:"Cancel"}})]})]})})},KM=({data:t})=>{const{theme:e}=_.useContext(V),{testName:n,numbers:r,changePage:s}=t;return u.jsx("div",{className:`text-lg p-1 font-medium sticky top-0 z-10 flex justify-between items-center ${e==="light"?"":"text-white"}`,children:u.jsxs("div",{className:"flex items-center gap-x-2",children:[u.jsx(me,{data:{clickFn:()=>s("test"),image:"back"}}),u.jsxs("div",{children:[n,u.jsxs("span",{className:"text-sm",children:[" • "," ",r," ",r>1?"questions":"question"]})]})]})})},QM=({data:t})=>{const{quizzes:e,editQuestion:n,askToDelete:r,add:s,changePage:i}=t,{theme:o}=_.useContext(V);return u.jsxs("div",{className:"grid gap-y-2",children:[u.jsx("div",{className:`pl-1 font-medium ${o==="light"?"":"text-white"}`,children:"Questions"}),e.map((a,l)=>u.jsxs("div",{className:`border font-padauk p-2 relative ${o==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[u.jsxs("div",{className:"absolute bottom-2 right-2 flex items-center gap-x-2",children:[u.jsx(me,{data:{clickFn:()=>n(a,l),image:"edit"}}),u.jsx(me,{data:{clickFn:()=>r(a.id),image:"trash"}})]}),u.jsxs("div",{className:"flex items-center justify-between gap-x-2",children:[u.jsx("div",{className:"overflow-x-auto p-0.5 flex-1",children:a.question}),u.jsx("div",{className:`top-0 shadow-md border rounded-full right-1 h-9 w-9 text-white font-medium flex justify-center absolute items-center ${o==="light"?"bg-black border-gray-200":"bg-slate-500/70 border-slate-600"}`,children:l+1})]}),u.jsx("div",{className:"pl-2 pt-2 grid gap-y-1",children:a.choices.map((c,h)=>u.jsxs("div",{className:"flex gap-x-2",children:[u.jsx("div",{className:`w-8 flex h-8 items-center  justify-center text-white font-medium rounded-md ${o==="light"?"bg-black":"bg-slate-500/70"}`,children:h+1}),u.jsx("div",{className:"flex-1",children:c})]},`choice-${l}-${h}`))})]},`question-${l}`)),u.jsx("div",{className:"flex justify-center sticky bottom-5",children:u.jsx(me,{data:{clickFn:s,image:"add"}})})]})},YM=({data:t})=>{const{currentTest:e,setCurrentTest:n,setIsRulesAdding:r,setEditData:s}=t,{theme:i}=_.useContext(V),{gradingRules:o}=e,[a,l]=_.useState(null),c=v=>{const w=o.filter(p=>p.id!==v),E={...e,gradingRules:w};n(E)},h=v=>{l(v)},d=v=>{s(v),r(!0)},f=()=>{c(a),l(null)},m=()=>{l(null)};return u.jsxs("div",{className:"grid gap-y-3",children:[u.jsx("div",{className:`pl-1 font-medium ${i==="light"?"":"text-white"}`,children:"Grading Rules"}),a&&u.jsx(co,{data:{yesButton:f,noButton:m,text:"Are you sure to delete?"}}),o.map((v,w)=>u.jsxs("div",{className:`flex font-padauk items-center justify-between border  p-2 ${i==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[u.jsxs("div",{className:"grid flex-1 grid-cols-3 justify-between mr-10",children:[u.jsx(L0,{data:{text:"From",value:v.from}}),u.jsx(L0,{data:{text:"To",value:v.to}}),u.jsx(L0,{data:{text:"Level",value:v.level}})]}),u.jsxs("div",{className:"flex items-center gap-x-1 h-full ",children:[u.jsx(me,{data:{clickFn:()=>d(v),image:"edit"}}),u.jsx(me,{data:{clickFn:()=>h(v.id),image:"trash"}})]})]},`rule-${w}-${v.from}-${v.to}-${v.level}`)),u.jsx("div",{className:"flex justify-center sticky bottom-5",children:u.jsx(me,{data:{clickFn:()=>r(!0),image:"add"}})})]})},L0=({data:t})=>{const{text:e,value:n}=t,{theme:r}=_.useContext(V);return u.jsxs("div",{className:"grid gap-y-1",children:[u.jsx("div",{className:"font-medium",children:e}),u.jsx("div",{className:`font-medium max-h-10 ${r==="light"?"text-slate-600":"text-white"}`,children:typeof n=="string"?Cr(n,15):n})]})},XM=({data:t})=>{const{currentTest:e,setCurrentTest:n,editData:r,setEditData:s,setIsRulesAdding:i}=t,{theme:o}=_.useContext(V),{gradingRules:a}=e,[l,c]=_.useState(r?r.from:null),[h,d]=_.useState(r?r.to:null),[f,m]=_.useState(r?r.level:""),v=l&&h&&f.trim(),w=()=>{const x={id:a.length===0?1:a[a.length-1].id+1,from:Number(l),to:Number(h),level:f},C={...e,gradingRules:[...a,x]};n(C)},E=()=>{const x=r.id,C={id:x,from:Number(l),to:Number(h),level:f},T=a.map(R=>x===R.id?C:R),I={...e,gradingRules:T};n(I)},p=()=>{i(!1),s(null)},g=()=>{v&&(r?E():w(),p())},y=(x,C)=>{const T=C.target.value;x.toLowerCase()==="from"?c(T):x.toLowerCase()==="to"?d(T):m(T)};return _.useEffect(()=>(Xt("hidden"),()=>{Xt("auto")}),[]),u.jsx("div",{className:"fixed z-20 bg-black/50 top-0 right-0 left-0 bottom-0 flex justify-center items-center",children:u.jsxs("div",{className:`border w-5/6 sm:w-4/5 md:w-3/5 lg:w-2/5 grid gap-y-2 p-3  top-0 left-0 right-0 bottom-0 rounded-lg relative ${o==="light"?"border-gray-200 bg-white":"text-white bg-slate-600 border-slate-500/70"}`,children:[u.jsx(Vr,{data:{handleFn:y,value:l!==null?l:"",choice:"From",placeholder:"Enter 'from' value"}}),u.jsx(Vr,{data:{handleFn:y,value:h!==null?h:"",choice:"To",placeholder:"Enter 'to' value"}}),u.jsx(Vr,{data:{handleFn:y,value:f,choice:"Level",placeholder:"Enter level"}}),u.jsxs("div",{className:"flex justify-end gap-x-2",children:[u.jsx(ue,{data:{clickFn:g,text:"Save",image:"save"}}),u.jsx(ue,{data:{clickFn:p,text:"Cancel"}})]})]})})},iy=({data:t})=>{const{currentTest:e,setCurrentTest:n,title:r}=t,{theme:s}=_.useContext(V),{description:i,name:o}=e,[a,l]=_.useState(r==="Description"?i:o),[c,h]=_.useState(!1),d=w=>{l(w.target.value)},f=()=>{if(r==="Description"){const w={...e,description:a};n(w)}else{const w={...e,name:a};n(w)}},m=()=>{f(),h(!1)},v=()=>{h(!1),l(r==="Description"?i:o)};return u.jsxs("div",{className:"grid gap-y-2",children:[u.jsx("div",{className:`font-medium ${s==="light"?"":"text-white"}`,children:r}),c?u.jsx("textarea",{autoFocus:!0,placeholder:`Type ${r.toLowerCase()} here`,onChange:d,className:`p-1 border border-gray-200 outline-none ${s==="light"?"":"text-white bg-slate-600"}`,value:a}):u.jsx("div",{className:`text-gray-500 p-1 ${s==="light"?"":"text-white"}`,children:a||"No description"}),c?u.jsxs("div",{className:"flex gap-x-2",children:[u.jsx(me,{data:{clickFn:m,image:"save"}}),u.jsx(me,{data:{clickFn:v,image:"falseIcon"}})]}):u.jsx(me,{data:{clickFn:()=>h(!0),image:"edit"}})]})},JM=({data:t})=>{const{setHeaderTitle:e}=_.useContext(V),{setPage:n,currentTest:r,setCurrentTest:s}=t,[i,o]=_.useState(!1),[a,l]=_.useState(!1),[c,h]=_.useState(r.quizzes),[d,f]=_.useState(null),[m,v]=_.useState(null);_.useEffect(()=>{e(r.name)});const w=async(F,Q)=>{try{const we=oe(le,"tests",F);await St(we,Q)}catch(we){console.log(we.message)}};_.useEffect(()=>{E()},[r,c]);const E=()=>{w(r.id,{...r,quizzes:c})},p=()=>{o(!0)},g=()=>{o(!1),v(null)},y=F=>{v(F)},x=()=>{I(m),v(null)},C=()=>{v(null)},T=F=>{n(F)},I=F=>{const Q=c.filter(we=>we.id!==F);h(Q)},R=(F,Q)=>{const we={...F,number:Q+1};f(we),p()},S=()=>{f(null)},k={testName:r.name,numbers:c.length,changePage:T},z={quizzes:c,editQuestion:R,askToDelete:y,add:p};return u.jsxs("div",{className:"grid gap-y-2 z-65 p-5",children:[u.jsx(KM,{data:k}),u.jsx(Fi,{}),u.jsx(iy,{data:{title:"Test Name",currentTest:r,setCurrentTest:s}}),u.jsx(iy,{data:{title:"Description",currentTest:r,setCurrentTest:s}}),u.jsx(Fi,{}),u.jsx(YM,{data:{currentTest:r,setEditData:f,setCurrentTest:s,setIsRulesAdding:l}}),u.jsx(Fi,{}),u.jsx(QM,{data:z}),i&&u.jsx(GM,{data:{cancel:g,setQuizzes:h,quizzes:c,editData:d,clearEditData:S}}),a&&u.jsx(XM,{data:{currentTest:r,setCurrentTest:s,editData:d,setEditData:f,setIsRulesAdding:l}}),m&&u.jsx(co,{data:{yesButton:x,noButton:C,text:"Are you sure to delete ?"}}),u.jsx(Fi,{})]})},Cg=({text:t,length:e})=>{const n=tn(),{theme:r}=_.useContext(V);return u.jsxs("div",{className:`flex items-center gap-x-1 mb-2 ${r==="light"?"":"text-white"}`,children:[u.jsx(me,{data:{clickFn:()=>n("/app/admin"),image:"back"}}),u.jsxs("p",{children:[t," (",e,")"]})]})},ZM=()=>{const[t,e]=_.useState("test"),{theme:n,isLogin:r,tests:s,setTests:i}=_.useContext(V),[o,a]=_.useState({}),[l,c]=_.useState(!1),[h,d]=_.useState(!1),[f,m]=_.useState(null);Co("tests",i,r),_.useEffect(()=>(Kt(),Kt()),[]);const v=I=>{a(I),e("editTest")},w=I=>{m(I),d(!0)},E=async I=>{const R=oe(le,"tests",I.id);await St(R,{isUploaded:!I.isUploaded})},p=()=>{C(f),m(null),d(!1)},g=()=>{d(!1)},y=()=>{c(!0)},x=()=>{c(!1)},C=async I=>{try{const R=oe(le,"tests",I);await Yl(R)}catch(R){console.log(R.message)}};return(()=>{switch(t){case"test":return u.jsxs("div",{className:"p-5 grid gap-y-2",children:[u.jsx("div",{className:"flex justify-between",children:u.jsx(Cg,{text:"Tests",length:s.length})}),l&&u.jsx(HM,{data:{close:x}}),h&&u.jsx(co,{data:{yesButton:p,noButton:g,text:"Are you sure to delete ?"}}),u.jsx("div",{className:"grid gap-y-2",children:s.map(I=>u.jsxs("div",{className:`flex items-center border p-2 rounded-md min-h-[100px] ${n==="light"?"border-gray-100":"border-slate-500/70 text-white"}`,children:[u.jsxs("div",{className:"flex flex-1 gap-x-2 items-center",children:[u.jsx("input",{checked:I.isUploaded,onChange:()=>E(I),className:"size-6",type:"checkbox"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:I.name}),u.jsxs("div",{className:`text-sm ${n==="light"?"text-gray-500":"text-white"}`,children:[I.quizzes.length,I.quizzes.length>1?" questions":" question",I.isUploaded?" (Uploaded)":" (Not uploaded)"]})]})]}),u.jsx("div",{className:"flex gap-x-2",children:u.jsx(Rd,{options:[{text:"Edit",icon:"editPencil",onClick:()=>{v(I)}},{text:"Delete",icon:"deleteIcon",onClick:()=>w(I.id)}]})})]},`tests-${I.id}`))}),u.jsx("div",{children:u.jsx(ue,{data:{clickFn:y,text:"New Test",image:"add"}})})]});case"editTest":return u.jsx(JM,{data:{setPage:e,currentTest:o,setCurrentTest:a}})}})()},ej=()=>{const{setUserData:t,users:e,theme:n}=_.useContext(V);_.useEffect(()=>(Kt(),Kt()),[]);const r=tn(),s=o=>{t(o),r("/app/posts")},i=async o=>{const a=oe(le,"users",o.uid);await St(a,{isAdmin:!o.isAdmin})};return u.jsxs("div",{className:"mt-2 p-5",children:[u.jsx(Cg,{text:"Users",length:e==null?void 0:e.length}),u.jsx("div",{className:"mt-2 grid gap-y-2",children:e.sort((o,a)=>wr(o,a,"timestamp","newer")).map(o=>{var a,l,c,h,d;return u.jsxs("div",{className:`hover:border-blue-300 border p-2  ${n==="light"?`hover:bg-slate-50 ${((a=U==null?void 0:U.currentUser)==null?void 0:a.uid)===o.uid?"bg-slate-50 border-blue-300 ":"border-gray-200"}`:`hover:bg-slate-500/70 text-white ${((l=U==null?void 0:U.currentUser)==null?void 0:l.uid)===o.uid?" border-blue-300 bg-slate-500/70":"border-slate-500/70 "}`}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex w-5/6 gap-x-2 items-center",children:[u.jsx(Ir,{image:o.image,name:o.name}),u.jsxs("div",{children:[u.jsxs("div",{className:"font-medium",children:[o.name," ",u.jsxs("span",{className:`${o!=null&&o.isAdmin?"text-blue-500":"text-white"}`,children:["(",o!=null&&o.isAdmin?"admin":"user",")"," ",((c=U==null?void 0:U.currentUser)==null?void 0:c.uid)===o.uid?"(You)":""]})]}),u.jsx("div",{className:"text-md ",children:o.email}),u.jsxs("div",{className:"text-md",children:["Created: ",Io(_n(o.createdAt))]}),u.jsxs("div",{className:"text-md font-medium text-lime-600",children:["UID : ",o.uid]})]})]}),((h=U==null?void 0:U.currentUser)==null?void 0:h.uid)!==o.uid&&u.jsx(me,{data:{clickFn:()=>s(o),image:"review"}})]}),((d=U==null?void 0:U.currentUser)==null?void 0:d.uid)!==o.uid&&u.jsx(ue,{data:{image:"admin",clickFn:()=>i(o),text:o.isAdmin?"Remove from admin":"Set as admin"}})]},o.uid)})})]})},Ig=({data:t,children:e})=>{const{setValue:n}=t,{theme:r}=_.useContext(V),s=_.useRef(null);return li(s,n),_.useEffect(()=>(Xt("hidden"),()=>{Xt("auto")}),[]),u.jsx("div",{className:"fixed flex items-center z-40 bg-black/60 justify-center top-0 left-0 right-0 bottom-0 ",children:u.jsx("div",{ref:s,className:`w-4/5 sm:w-3/5 md:w-2/5 p-5 min-h-40 grid gap-y-3 rounded-md items-center border  ${r==="light"?"border-gray-300 bg-white":"border-slate-500/70 text-white bg-slate-600"}`,children:e})})},tj=({data:t})=>{const{links:e,setLinks:n,setIsLinkAdding:r}=t,[s,i]=_.useState(""),[o,a]=_.useState(""),l=s.trim()&&o.trim(),c=()=>{if(l){const h={id:e.length===0?1:e[e.length-1].id+1,title:s.trim(),link:o.trim()},d=[...e,h];n(d),r(!1)}};return u.jsxs(Ig,{data:{setValue:r},children:[u.jsxs("div",{className:"grid gap-y-2",children:[u.jsx(dh,{data:{text:"Title",onChangeFn:h=>i(h.target.value),value:s,placeholder:"Enter title..."}}),u.jsx(dh,{data:{text:"Link",onChangeFn:h=>a(h.target.value),value:o,placeholder:"Enter link..."}})]}),u.jsx("div",{children:u.jsx(ue,{data:{image:"add",text:"Add Link",clickFn:c}})})]})},nj=()=>{const{users:t,theme:e,isLogin:n,posts:r,setPosts:s}=_.useContext(V),[i,o]=_.useState("posts"),[a,l]=_.useState(null);Co("posts",s,n);const c=async d=>{const f=oe(le,"posts",d);await Yl(f)},h=()=>{switch(i){case"posts":return u.jsxs("div",{className:"grid gap-y-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx(Cg,{text:"Posts",length:r.length}),u.jsx(ue,{data:{clickFn:()=>o("createPost"),text:"Create a post"}})]}),u.jsx("div",{className:"grid gap-y-2 mb-2",children:r.sort((d,f)=>wr(d,f,"time","newer")).map(d=>{var m,v,w;let f;return t.forEach(E=>{E.uid===d.uid&&(f=E)}),u.jsxs("div",{className:`p-2 border min-h-20 flex items-center rounded-md ${e==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"top-section flex mb-2 gap-x-2",children:[u.jsx("img",{className:"size-10 rounded-full shadow-md object-cover",src:f.image}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:f.name}),u.jsx("div",{className:` text-sm ${e==="light"?"text-gray-500":"text-white"}`,children:_i(_n(d.time))})]})]}),u.jsx("p",{className:"mb-2 break-words whitespace-normal",children:Cr(d.description,25)}),u.jsxs("div",{className:"flex items-center gap-x-1",children:[d.images.length!==0&&u.jsxs("div",{className:`p-1 min-h-9 flex items-center gap-x-1  rounded-md ${e==="light"?"bg-green-100":"bg-slate-500/70"}`,children:[u.jsx("img",{className:"w-7",src:J("image")}),u.jsxs("span",{children:[d.images.length," ",d.images.length<=1?"image":"images"]})]}),d.files.length!==0&&u.jsxs("div",{className:`p-1 min-h-9  flex items-center gap-x-1 rounded-md ${e==="light"?"bg-green-100":"bg-slate-500/70"}`,children:[u.jsx("img",{className:"w-7",src:J("file")}),u.jsxs("span",{children:[d.files.length," ",d.files.length<=1?"file":"files"]})]}),d.links&&((m=d==null?void 0:d.links)==null?void 0:m.length)!==0&&u.jsxs("div",{className:`p-1 min-h-9  flex items-center gap-x-1 rounded-md ${e==="light"?"bg-green-100":"bg-slate-500/70"}`,children:[u.jsx("img",{className:"w-7",src:J("link")}),u.jsxs("span",{children:[(v=d==null?void 0:d.links)==null?void 0:v.length," ",((w=d==null?void 0:d.links)==null?void 0:w.length)<=1?"link":"links"]})]}),d.draft&&u.jsx("div",{className:`p-1 min-h-9 flex items-center gap-x-1 rounded-md ${e==="light"?"bg-green-100":"bg-slate-500/70"}`,children:u.jsx("span",{className:"font-bold text-red-500",children:"(Draft)"})})]})]}),u.jsx("div",{className:"flex items-center gap-x-1",children:u.jsx(Rd,{options:[{text:"Edit",icon:"editPencil",onClick:()=>{l(d),o("createPost")}},{text:"Delete",icon:"deleteIcon",onClick:()=>c(d.id)}]})})]},`post-${d.id}`)})})]});case"createPost":return u.jsx(rj,{setPage:o,postData:a,setPostData:l})}};return u.jsx("div",{className:"p-5",children:h()})},rj=({setPage:t,postData:e,setPostData:n})=>{const{theme:r}=_.useContext(V),[s,i]=_.useState(e?e.images:[]),[o,a]=_.useState(null),[l,c]=_.useState(e?e.description:""),[h,d]=_.useState(e?e==null?void 0:e.files:[]),[f,m]=_.useState(e?(e==null?void 0:e.links)||[]:[]),[v,w]=_.useState(!1),E=l.trim()||s.length!==0||h.length!==0||f.length!==0,p=async(S=!1)=>{try{const k=It(le,"posts");await Vo(k,{uid:U.currentUser.uid,time:jt(),editedTime:jt(),description:l,images:s,files:h,links:f,draft:S}),t("posts")}catch(k){console.log(k.message)}},g=async()=>{try{const S=oe(le,"posts",e.id);await St(S,{editedTime:jt(),description:l,images:s,files:h,links:f,draft:!1}),t("posts")}catch(S){console.log(S.message)}},y=async()=>{try{if(e){const S=oe(le,"posts",e.id);await St(S,{editedTime:jt(),description:l,images:s,files:h,links:f,draft:!0})}else p(!0);t("posts")}catch(S){console.log(S.message)}},x=async S=>{try{const k=`posts/${U.currentUser.uid}/${S.name}`,z=Ms(Vs,k);a("Uploading image...");const F=await th(z,S),Q=await nh(F.ref),we=[...s,{name:S.name,path:k,imageURL:Q}];i(we),a("Uploaded image"),setTimeout(()=>{a(null)},3e3)}catch(k){a(k.message),setTimeout(()=>{a(null)},3e3)}},C=async S=>{try{const k=`posts/${U.currentUser.uid}/${S.name}`,z=Ms(Vs,k);a("Uploading file...");const F=await th(z,S),Q=await nh(F.ref),we=[...h,{name:S.name,path:k,fileURL:Q,size:S.size}];d(we),a("Uploaded file"),setTimeout(()=>{a(null)},3e3)}catch(k){a(k.message),setTimeout(()=>{a(null)},3e3)}},T=async(S,k)=>{const z=s.filter(Q=>k!==Q.imageURL);i(z);const F=Ms(Vs,S);await d2(F)},I=async(S,k)=>{const z=h.filter(Q=>k!==Q.fileURL);d(z);const F=Ms(Vs,S);await d2(F)},R=S=>{const k=f.filter(z=>S!==z.id);m(k)};return u.jsxs("div",{children:[u.jsxs("div",{className:"flex mb-2 items-center justify-between",children:[o&&u.jsx(hh,{message:o}),u.jsxs("div",{className:"flex gap-x-1 items-center",children:[u.jsx(me,{data:{clickFn:()=>{t("posts"),n(null)},image:"back"}}),u.jsx("div",{className:r==="light"?"":"text-white",children:e?"Edit post":"Create a post"})]}),u.jsxs("div",{className:"flex items-center gap-x-1",children:[u.jsx(ue,{data:{text:"Draft",clickFn:()=>{E&&y()}}}),u.jsx(ue,{data:{clickFn:()=>{E?(e?g():p(),n(null)):a("Create a post first!")},text:e?"Save":"Publish",image:e?"save":"upload"}})]})]}),u.jsxs("div",{className:"mb-2",children:[u.jsx("textarea",{value:l,onChange:S=>c(S.target.value),className:`w-full p-2 resize-none border min-h-28 ${r==="light"?"border-slate-200  focus:outline-blue-500":"border-slate-500/70 outline-none bg-slate-600 text-white"}`,placeholder:"Write description here"}),u.jsx("input",{className:"hidden",id:"imagesInput",type:"file",accept:"image/*",onChange:S=>x(S.target.files[0])}),u.jsx("input",{className:"hidden",id:"filesInput",type:"file",onChange:S=>C(S.target.files[0])}),u.jsxs("div",{className:"flex justify-start gap-x-2 mt-1",children:[u.jsxs("label",{htmlFor:"imagesInput",className:`min-h-10 shadow-md hover:opacity-70 border  font-medium px-2 py-1 rounded-lg flex justify-center items-center gap-x-1 transition-all ${r==="light"?"bg-gray-50/50 border-gray-200":"bg-slate-500/70 text-white border-slate-500/70"}`,children:[u.jsx("img",{className:" h-7",src:J("image")}),u.jsx("span",{children:"Image"})]}),u.jsxs("label",{htmlFor:"filesInput",className:`min-h-10 shadow-md hover:opacity-70 border  font-medium px-2 py-1 rounded-lg flex justify-center items-center gap-x-1 transition-all ${r==="light"?"bg-gray-50/50 border-gray-200":"bg-slate-500/70 text-white border-slate-500/70"}`,children:[u.jsx("img",{className:" h-7",src:J("file")}),u.jsx("span",{children:"File"})]}),u.jsxs("label",{onClick:()=>{w(!0)},className:`min-h-10 shadow-md hover:opacity-70 border  font-medium px-2 py-1 rounded-lg flex justify-center items-center gap-x-1 transition-all ${r==="light"?"bg-gray-50/50 border-gray-200":"bg-slate-500/70 text-white border-slate-500/70"}`,children:[u.jsx("img",{className:" h-7",src:J("link")}),u.jsx("span",{children:"Link"})]}),v&&u.jsx(tj,{data:{links:f,setLinks:m,setIsLinkAdding:w}})]})]}),s.length!==0&&u.jsx("div",{className:"grid gap-y-2",children:s.map(S=>u.jsxs("div",{className:"relative min-h-20",children:[u.jsx("img",{alt:S.name,className:"size-full",src:S.imageURL}),u.jsx("div",{className:"absolute top-1 right-1",children:u.jsx(me,{data:{clickFn:()=>T(S.path,S.imageURL),image:"falseIcon"}})})]},S.imageURL))}),h.length!==0&&u.jsx("div",{className:"grid gap-y-1 mt-2",children:h.map(S=>u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:`p-1  min-h-14 rounded-md flex gap-x-1 items-center font-bold border  border-l-4 border-l-green-500 ${r==="light"?"bg-slate-50 border-gray-300 text-blue-600":"bg-slate-500/70 border-slate-500/70 text-white"}`,children:[u.jsx("img",{className:"w-7 ",src:J("download")}),u.jsxs("div",{children:[u.jsx("p",{className:"underline text-blue-600",children:S.name}),(S==null?void 0:S.size)&&u.jsxs("p",{children:[(S.size/(1024*1024)).toFixed(2)," MB"]})]})]}),u.jsx("div",{className:"absolute top-1 right-1",children:u.jsx(me,{data:{clickFn:()=>I(S.path,S.fileURL),image:"falseIcon"}})})]},S.fileURL))}),f.length!==0&&u.jsx("div",{className:"grid gap-y-1 mt-2",children:f.map(S=>u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:`p-1  min-h-14 rounded-md flex gap-x-1 items-center font-bold border  border-l-4 border-l-green-500 ${r==="light"?"bg-slate-50 border-gray-300 text-blue-600":"bg-slate-500/70 border-slate-500/70 text-white"}`,children:[u.jsx("img",{className:"w-7 ",src:J("link")}),u.jsx("div",{children:u.jsx("p",{className:"underline text-blue-600",children:S.title})})]}),u.jsx("div",{className:"absolute top-1 right-1",children:u.jsx(me,{data:{image:"falseIcon",clickFn:()=>R(S.id)}})})]},S.link))})]})},sj=()=>{const{users:t,setHeaderTitle:e,theme:n,notifications:r,setNotifications:s}=_.useContext(V),[i,o]=_.useState(null),a=5,l=()=>{const c=It(le,"notifications");let h=Yi(c,Ku("timestamp","desc"),Qu(a));i&&(h=Yi(h,lx(i))),Kn(h,d=>{const f=d.docs.map(m=>({id:m.id,...m.data()}));s([...r,...f]),o(d.docs[d.docs.length-1])})};return _.useEffect(()=>{const c=It(le,"notifications"),h=Yi(c,Ku("timestamp","desc"),Qu(5)),d=Kn(h,f=>{const m=f.docs.map(v=>({id:v.id,...v.data()}));m.length!==0&&(s(m),o(f.docs[f.docs.length-1]))});return()=>d()},[]),_.useEffect(()=>{e("Notifications")},[]),u.jsxs("div",{className:"p-5 grid gap-y-2 ",children:[u.jsx(kn,{}),r.map(c=>{let h;return t.forEach(d=>{c.uid===d.uid&&(h=d)}),u.jsx(ij,{notification:c,user:h},c.id)}),r.length===0&&u.jsx("div",{className:`${n==="light"?"":"text-white"}`,children:"No notifications"}),r.length>=a&&u.jsx("div",{className:"flex justify-center mt-1 mb-2 ",children:u.jsx("button",{onClick:l,className:`border  rounded-md text-sm p-1 ${n==="light"?"border-gray-100":"text-white bg-slate-500/70"}`,children:"load more"})})]})},ij=({notification:t,user:e})=>{let n;const{type:r,description:s,timestamp:i,testName:o,comment:a}=t,{theme:l}=_.useContext(V);switch(`${r[0]} ${r[1]}`){case"like post":n="liked a post";break;case"like test":n="liked a test";break;case"comment post":n="commented on a post";break;case"comment test":n="commented on a test";break;case"added post":n="added a post";break;case"added test":n="added a test";break;case"took test":n="took a test";break}return u.jsxs("div",{className:`cursor-pointer shadow-md flex items-center gap-x-2 p-2 border  rounded-md ${l==="light"?"border-slate-300 bg-white shadow-gray-200":"border-slate-500/70 bg-slate-500/70 text-white shadow-slate-500 "}`,children:[u.jsx("div",{children:u.jsx("img",{className:"size-10 object-cover rounded-full object-center bg-cover",src:e==null?void 0:e.image})}),u.jsxs("div",{children:[u.jsxs("p",{children:[u.jsx("b",{children:e==null?void 0:e.name})," ",n]}),s&&u.jsx("p",{children:Cr(s,30)}),o&&u.jsx("p",{children:o}),a&&u.jsx("p",{children:a}),u.jsx("p",{children:_i(_n(i))})]})]})},oj=({members:t})=>{const{users:e,theme:n}=_.useContext(V);return u.jsxs("div",{className:`p-2 grid gap-y-2 ${n==="light"?"":"text-white"}`,children:[u.jsx("p",{className:"text-lg font-bold",children:"Members"}),t.sort((r,s)=>wr(r,s,"joinedAt","newer")).map(r=>{const s=Tr(e,r.uid);return u.jsxs("div",{className:`p-2 flex gap-x-2 items-center border  rounded-md ${n==="light"?"border-slate-200":"bg-slate-500/70 border-slate-500"}`,children:[u.jsxs("div",{className:"relative",children:[u.jsx(Ir,{image:s.image,name:s.name}),u.jsx("div",{className:`absolute bottom-0 right-0 size-3 rounded-full ${s!=null&&s.isOnline?"bg-green-500":"bg-gray-500"}`})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{children:s==null?void 0:s.name}),u.jsx("p",{className:`text-sm ${s!=null&&s.isOnline?"text-blue-500":"text-red-500"}`,children:s!=null&&s.isOnline?"Online":_i(_n(s==null?void 0:s.lastSeen))})]})]},r.uid+r.joinedAt)})]})},aj=({setSubPage:t,currentChat:e})=>{const{theme:n,users:r,userData:s}=_.useContext(V),{members:i}=e,o=async c=>{try{const h=oe(le,"chats",e.id);await St(h,{members:Jk({uid:c,joinedAt:new Date().getTime()})})}catch(h){console.log(h.message)}},a=async c=>{try{const h=oe(le,"chats",e.id),d=i.filter(f=>c!==f.uid);await St(h,{members:d})}catch(h){console.log(h.message)}},l=c=>{let h=!1;return i.forEach(d=>{c===d.uid&&(h=!0)}),h};return u.jsxs("div",{className:"",children:[u.jsx("div",{className:`h-[70px] z-30 fixed top-0 right-0 left-0 p-2 min-h-10 pb-2 flex items-center justify-between gap-x-1 border-b ${n==="light"?"border-b-slate-200 bg-slate-50":"border-b-slate-500/70 bg-slate-500"}`,children:u.jsxs("div",{className:"flex gap-x-1",children:[u.jsx("div",{children:u.jsx(me,{data:{image:"back",clickFn:()=>t("chat")}})}),u.jsxs("div",{className:` ${n==="light"?"":"text-white"}`,children:[u.jsx("p",{className:"text-lg font-bold",children:e.name}),u.jsxs("p",{className:"text-sm",children:[i.length," ",i.length<=1?"member":"members"]})]})]})}),(s==null?void 0:s.isAdmin)&&u.jsxs("div",{className:"p-2",children:[u.jsx("input",{id:"imageInput",className:"hidden",type:"file",accept:"image/*"}),u.jsxs("div",{className:"relative size-24",children:[u.jsx("img",{src:"images/sea-logo.jpg",className:"size-24 rounded-full object-cover object-center bg-cover"}),u.jsx("label",{htmlFor:"imageInput",className:` p-1 rounded-full absolute -bottom-1 -right-1 cursor-pointer ${n==="light"?"bg-gray-200":"bg-slate-500/70"}`,children:u.jsx("img",{className:"w-5",src:J("edit")})})]}),u.jsxs("div",{className:`mt-2 ${n==="light"?"":"text-white"}`,children:[u.jsx("p",{children:"Group Name"}),u.jsx("p",{children:e.name})]})]}),u.jsx(oj,{members:i}),(s==null?void 0:s.isAdmin)&&u.jsxs("div",{className:`p-2 grid gap-y-2 ${n==="light"?"":"text-white"}`,children:[u.jsx("p",{className:"text-lg font-bold",children:"Manage Members"}),r.sort((c,h)=>wr(c,h,"createdAt","newer")).map((c,h)=>u.jsxs("div",{className:`p-2 flex justify-between items-center border  rounded-md ${n==="light"?"border-slate-200":"bg-slate-500/70 border-slate-500"}`,children:[u.jsxs("div",{className:"flex gap-x-2 items-center",children:[u.jsxs("div",{className:"relative",children:[u.jsx(Ir,{image:c.image,name:c.name}),u.jsx("div",{className:`absolute bottom-0 right-0 size-3 rounded-full ${c!=null&&c.isOnline?"bg-green-500":"bg-gray-500"}`})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{children:c.name}),u.jsx("p",{className:`text-sm ${c!=null&&c.isOnline?"text-blue-500":"text-red-500"}`,children:c!=null&&c.isOnline?"Online":_i(_n(c==null?void 0:c.lastSeen))})]})]}),u.jsx("div",{children:l(c.uid)?!c.isAdmin&&u.jsx(me,{data:{clickFn:()=>a(c.uid),image:"trash"}}):u.jsx(me,{data:{clickFn:()=>o(c.uid),image:"add"}})})]},c.name+" "+c.image+h))]})]})},lj=({message:t,deleteMessage:e,setMessage:n,setImageObject:r,setEditMessageId:s,setViewingImage:i,setReplyMessage:o})=>{const{users:a,theme:l,userData:c}=_.useContext(V),h=U.currentUser.uid===t.senderId,d=Tr(a,t.senderId),f=h&&{text:"Edit",icon:"editPencil",onClick:()=>{s(t.id),n(t.content),r(t==null?void 0:t.image),o(t==null?void 0:t.reply)}};return u.jsxs("div",{className:`flex mb-2 gap-x-2 ${h?"flex-row-reverse":""} `,children:[u.jsxs("div",{className:"size-10 relative",children:[u.jsx(Ir,{name:d.name,image:d.image}),u.jsx("div",{className:`absolute bottom-0 right-0 size-3 rounded-full ${d!=null&&d.isOnline?"bg-green-500":"bg-gray-500"}`})]}),u.jsxs("div",{className:`grid gap-y-1 whitespace-pre-wrap ${l==="light"?"":"text-white"}`,children:[u.jsx("p",{className:`font-bold ${h?"text-right":"text-left"} `,children:d==null?void 0:d.name}),u.jsxs("div",{className:`flex items-start gap-x-1 ${h?"flex-row-reverse justify-start":""}`,children:[u.jsxs("div",{children:[(t==null?void 0:t.content)&&u.jsxs("p",{className:`max-w-[250px] break-words whitespace-pre-wrap text-wrap rounded-[10px] border border-slate-200 p-2  ${l==="light"?`${h?"rounded-tr-none bg-blue-300":"bg-white rounded-tl-none"}`:`${h?"rounded-tr-none bg-blue-300":"bg-white rounded-tl-none text-black"}`}`,children:[(t==null?void 0:t.reply)&&u.jsx(cj,{message:t}),t.content]}),(t==null?void 0:t.image)&&u.jsx("img",{onClick:()=>{i(t.image)},className:"cursor-pointer border mt-1 rounded-sm border-slate-200 w-[200px] min-h-[100px]",alt:t.image.name,src:t.image.URL})]}),h||c!=null&&c.isAdmin?u.jsx(Rd,{options:[f,{text:"Delete",icon:"deleteIcon",onClick:()=>e(t.id)}],left:h?"left-[35px]":"-left-[102px]"}):""]}),u.jsxs("div",{className:`flex  ${h?"flex-row-reverse":""} gap-x-1 items-center`,children:[u.jsx("button",{onClick:()=>{o(t)},children:u.jsx("img",{className:"w-6",src:J("reply")})}),u.jsx("p",{className:`text-sm ${h?"text-right":"text-left"}`,children:t!=null&&t.editedTime?u.jsxs("span",{children:["edited ",Io(_n(t.editedTime))]}):u.jsx("span",{children:Io(_n(t.timestamp))})})]})]})]})},cj=({message:t})=>{const{users:e,theme:n}=_.useContext(V),r=Tr(e,t.reply.senderId);return u.jsxs("div",{className:`mb-1 border-l-4 p-1 rounded-md border-l-green-500  ${n==="light"?"bg-green-200":"bg-green-300"}`,children:[u.jsx("p",{className:"font-bold ",children:r.name}),u.jsx("p",{children:Cr(t.reply.content,25)})]})},uj=({image:t,setViewingImage:e})=>u.jsx(Ig,{data:{setValue:e},children:t&&u.jsxs("div",{className:"",children:[u.jsxs("p",{children:["File size: ",(t.size/(1024*1024)).toFixed(2)," MB"]}),u.jsx("img",{alt:t.name,className:"mt-1 h-full w-full",src:t.URL})]})}),hj=({setIsRulesOpen:t,rules:e=["ရိုသေလေးစားမှုရှိပါ - Group ထဲတွင် ရှိသောသူများအားလုံးကို လေးစားရမည်။ မသင့်တော်သော စကားလုံးများ၊ အခြားသူများကို ထိခိုက်စေနိုင်သော စကားလုံးများကို မပြောရ။","No spamming - တူညီသော မက်ဆေ့ချ်များ၊ လင့်ခ် (link) များနှင့်၊ အမြောက်အများသော emoji များ ပို့ခြင်းကို မပြုရ။","Privacy ရှိပါ - တစ်စုံတစ်ဦး၏ ကိုယ်ရေးကိုယ်တာ အချက်အလက်များကို ခွင့်ပြုချက်မရှိဘဲ မမျှဝေရ။ လူတိုင်း၏ ကိုယ်ရေးကိုယ်တာကို လေးစားပါ။","အထက်ပါ စည်းမျဉ်းစည်းကမ်းများ (rules) ထဲမှ တစ်ခုခုကို ချိုးဖောက်ပါက Group ထဲမှ ရက်အကန့်အသတ်ဖြင့် သော်လည်းကောင်း၊ ရာသတ်ပန် သော်လည်းကောင်း ထုတ်ပယ်မည် (သို့မဟုတ်) ထိုက်တန်သော အပြစ်တစ်ခုခုကို ခံယူရမည်။"]})=>u.jsx(Ig,{data:{setValue:t},children:e?u.jsx("div",{className:"p-2",children:e.map((n,r)=>u.jsxs("div",{className:"flex items-center gap-x-1 mb-2",children:[u.jsx("p",{className:"size-10 flex items-center justify-center rounded-full bg-gray-300",children:r+1}),u.jsx("p",{className:"flex-1",children:n})]},`${r}-${n}`))}):u.jsx("div",{className:"p-2",children:"No rules"})}),dj=({data:t})=>{const{setPage:e,chatId:n,chats:r,messages:s,viewingOldMessages:i,setViewingOldMessages:o,loadMoreWithoutSnapshot:a,loadMessages:l}=t,{theme:c,userData:h,users:d}=_.useContext(V),[f,m]=_.useState(""),[v,w]=_.useState("chat"),[E,p]=_.useState(null),g=oe(le,"chats",n),y=It(g,"messages"),[x,C]=_.useState(null),[T,I]=_.useState(!1),[R,S]=_.useState(!1),[k,z]=_.useState(null),[F,Q]=_.useState(null),[we,nn]=_.useState(null),[Es,Sr]=_.useState(!1);let b;r.forEach(X=>{n===X.id&&(b=X)}),_.useEffect(()=>{const X=Tr(d,F==null?void 0:F.senderId);nn(X),console.log(F,X)},[F]),_.useEffect(()=>{Aa()},[]);const H=async X=>{const be=`chats/${n}/${h.name}-${X.name}`,Xn=Ms(Vs,be);I(!0),S(!0);const oc=await th(Xn,X),ac=await nh(oc.ref),Nd={name:X.name,path:be,URL:ac,size:X.size};C(Nd),I(!1),S(!1)},Y=async X=>{const be=Ms(Vs,X);await d2(be),C(null)},Ee=async()=>{try{const X={senderId:U.currentUser.uid,content:f.trim(),timestamp:jt(),image:x||null,reply:F||null};S(!0),await Vo(y,X),await St(g,{lastMessage:X}),m(""),C(null),Aa(),S(!1),Q(null),nn(null)}catch(X){console.log(X.message)}},Ne=async()=>{try{const X=oe(y,E),be={content:f.trim(),editedTime:jt(),image:x||null,reply:F||null};S(!0),await St(X,be),m(""),C(null),p(null),S(!1),Q(null),nn(null)}catch(X){console.log(X.message)}},Ar=async X=>{const be=oe(y,X);await Yl(be)},rn=()=>{switch(v){case"chat":return u.jsxs("div",{className:"",children:[k&&u.jsx(uj,{image:k,setViewingImage:z}),Es&&u.jsx(hj,{setIsRulesOpen:Sr,rules:b==null?void 0:b.rules}),u.jsxs("div",{className:`h-[70px] z-30 fixed top-0 right-0 left-0 p-2 min-h-10 pb-2 flex items-center justify-between gap-x-1 border-b ${c==="light"?"border-b-slate-200 bg-slate-50":"border-b-slate-500/70 bg-slate-500"}`,children:[u.jsxs("div",{className:"flex gap-x-1",children:[u.jsx("div",{children:u.jsx(me,{data:{image:"back",clickFn:()=>e("chatroom")}})}),u.jsxs("div",{className:` ${c==="light"?"":"text-white"}`,children:[u.jsx("p",{className:"text-lg font-bold",children:b.name}),u.jsxs("p",{className:"text-sm",children:[b.members.length," ",b.members.length<=1?"member":"members"]})]})]}),u.jsx("button",{onClick:()=>w("info"),children:u.jsx("img",{src:"images/sea-logo.jpg",alt:"group-image",className:"size-12 rounded-full object-center object-cover "})})]}),u.jsxs("div",{className:"p-2 gap-y-2 mb-[98px]",children:[u.jsx("div",{className:"flex justify-center mt-1 mb-2",children:u.jsx("button",{onClick:()=>{a("old"),o(!0)},className:`border  rounded-md text-sm p-1 ${c==="light"?"border-gray-100":"text-white bg-slate-500/70"}`,children:"Older messages"})}),s.sort((X,be)=>wr(X,be)).map((X,be)=>u.jsx(lj,{editMessage:Ne,setEditMessageId:p,deleteMessage:Ar,message:X,setMessage:m,setImageObject:C,setViewingImage:z,setReplyMessage:Q},`${be}-${X.content}`)),i&&u.jsxs("div",{className:"flex gap-x-1 justify-center mt-1 mb-2",children:[u.jsx("button",{onClick:()=>{a("newer")},className:`border  rounded-md text-sm p-1 ${c==="light"?"border-gray-100":"text-white bg-slate-500/70"}`,children:"Newer messages"}),u.jsx("button",{onClick:()=>{l(),o(!1),Aa()},className:`border  rounded-md text-sm p-1 ${c==="light"?"border-gray-100":"text-white bg-slate-500/70"}`,children:"Latest messages"})]})]}),u.jsxs("div",{className:`fixed bottom-0 right-0 left-0 p-2 min-h-[80px] flex flex-col items-center  ${c==="light"?" bg-slate-50":" bg-slate-500 text-white"}`,children:[u.jsx("div",{className:"w-full flex justify-between items-center text-sm p-1 md:w-2/3 lg:w-1/2",children:u.jsx("button",{onClick:()=>Sr(!0),className:"text-sm underline text-blue-300",children:"Group Rules"})}),E&&u.jsxs("div",{className:"w-full flex justify-between items-center text-sm p-1 md:w-2/3 lg:w-1/2",children:[u.jsx("p",{children:"Editing a message"}),u.jsx("button",{onClick:()=>{p(null),m(""),C(null),Q(null),nn(null)},className:" rounded-full shadow-sm p-1",children:u.jsx("img",{className:"w-6",src:J("falseIcon")})})]}),F&&u.jsxs("div",{className:"w-full flex justify-between items-center text-sm p-1 md:w-2/3 lg:w-1/2",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("p",{className:"font-bold",children:["Reply to ",we==null?void 0:we.name]}),u.jsx("p",{children:Cr(F==null?void 0:F.content,25)})]}),u.jsx("button",{onClick:()=>{Q(null),nn(null)},className:"rounded-full shadow-sm p-1",children:u.jsx("img",{className:"w-6",src:J("falseIcon")})})]}),T&&u.jsx("div",{className:"w-full flex justify-between items-center text-sm p-1 md:w-2/3 lg:w-1/2",children:u.jsx("p",{children:"Uploading image..."})}),x&&u.jsxs("div",{className:"w-full flex justify-between items-center text-sm p-1 md:w-2/3 lg:w-1/2",children:[u.jsxs("div",{className:"flex flex-1 items-center gap-x-1",children:[u.jsx("img",{src:x.URL,className:"h-10 rounded-sm"}),u.jsx("p",{children:x.name})]}),u.jsx("button",{onClick:()=>{Y(x.path),C(null)},className:"rounded-full shadow-sm p-1",children:u.jsx("img",{className:"w-6",src:J("falseIcon")})})]}),u.jsxs("div",{className:`border shadow-sm w-full md:w-2/3 lg:w-1/2 p-1 rounded-[12px] flex items-center justify-between ${c==="light"?"border-slate-200":"border-slate-600"}`,children:[u.jsx("input",{id:"imageFile",className:"hidden",type:"file",onChange:X=>{H(X.target.files[0])},accept:"image/*"}),u.jsx("label",{htmlFor:"imageFile",className:"p-1 cursor-pointer rounded-md",children:u.jsx("img",{className:"w-7",src:J("image")})}),u.jsx("textarea",{onChange:X=>m(X.target.value),value:f,className:`h-auto resize-none outline-none flex-1 p-1 pl-1 pr-1 rounded-md mr-2 ${c==="light"?"bg-transparent":"bg-transparent text-white"}`,placeholder:"Type message..."}),u.jsx("button",{onClick:()=>{!R&&(f.trim()||x)&&(E?Ne():Ee())},children:u.jsx("img",{className:"w-10",src:J(R?"sendingLetter":"sendLetter")})})]})]})]});case"info":return u.jsx(aj,{setSubPage:w,currentChat:b})}};return u.jsx(u.Fragment,{children:rn()})},fj=()=>{const[t,e]=_.useState("chatroom"),[n,r]=_.useState(null),[s,i]=_.useState(null),[o,a]=_.useState(!1),{theme:l,users:c,setHeaderTitle:h,isLogin:d,chats:f,setChats:m,messages:v,setMessages:w}=_.useContext(V);let E=0;Co("chats",m,d);const p=()=>{let T;try{if(!o){const I=It(oe(le,"chats",n),"messages");let R=Yi(I,Ku("timestamp","desc"),Qu(10));return T=Kn(R,S=>{const k=S.docs.map(z=>({id:z.id,...z.data()}));k.length!==0&&w(k),i(S.docs[S.docs.length-1]),Aa()}),()=>{T&&T()}}}catch(I){console.log(I.message)}},g=async T=>{try{const I=It(oe(le,"chats",n),"messages");let S=Yi(I,Ku("timestamp",T==="newer"?"asc":"desc"),Qu(10));s&&(S=Yi(S,lx(s)));const k=await Xk(S),z=k.docs.map(F=>({id:F.id,...F.data()}));z.length!==0&&w(z),i(k.docs[k.docs.length-1])}catch(I){console.log(I.message)}};_.useEffect(()=>p(),[o,n]),_.useEffect(()=>{h("Chat Room")},[]);const y=T=>{e("chat"),r(T)},x=(T,I)=>{let R=!1;return T.forEach(S=>{I===S.uid&&(R=!0)}),R},C=()=>{switch(t){case"chatroom":return u.jsxs("div",{className:"p-5 grid gap-y-2",children:[f.map(T=>{var R,S;let I;if(c.forEach(k=>{var z;k.uid===((z=T==null?void 0:T.lastMessage)==null?void 0:z.senderId)&&(I=k)}),x(T.members,(R=U==null?void 0:U.currentUser)==null?void 0:R.uid))return E++,u.jsxs("div",{onClick:()=>y(T.id),className:`p-1 min-h-[130px] shadow-md flex gap-x-2 items-center border rounded-md cursor-pointer relative  ${l==="light"?"border-slate-200 shadow-gray-200":"border-slate-500/70 text-white shadow-slate-500"}`,children:[u.jsx("div",{children:u.jsx("img",{src:"images/sea-logo.jpg",className:"size-12 object-cover object-center aspect-square bg-cover rounded-full "})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-lg",children:T==null?void 0:T.name}),u.jsxs("div",{children:[u.jsx("div",{className:"flex gap-x-1 items-center",children:(T==null?void 0:T.lastMessage)&&u.jsxs(u.Fragment,{children:[u.jsx(Ir,{size:"size-5",fontSize:"text-sm",name:I.name,image:I.image}),u.jsx("p",{children:I==null?void 0:I.name})]})}),(T==null?void 0:T.lastMessage)&&u.jsxs("div",{className:"text-sm mt-2",children:[u.jsx("p",{children:Cr(T.lastMessage.content,30)}),((S=T.lastMessage)==null?void 0:S.image)&&u.jsx("p",{children:"1 image"})]})]}),(T==null?void 0:T.lastMessage)&&u.jsx("div",{className:"text-sm",children:Io(_n(T.lastMessage.timestamp))})]})]},T.id)}),E===0&&u.jsxs("div",{className:`${l==="light"?"":"text-white"}`,children:[u.jsx("p",{children:"You don't have any chat rooms."}),u.jsx("p",{children:"Ask the admin to add you to a chat room."})]})]});case"chat":return u.jsx(dj,{data:{page:t,chats:f,setPage:e,chatId:n,messages:v,viewingOldMessages:o,setViewingOldMessages:a,setLastDoc:i,loadMoreWithoutSnapshot:g,loadMessages:p}})}};return u.jsxs(u.Fragment,{children:[u.jsx(kn,{}),C()]})},pj=()=>{const{headerTitle:t,refreshUserData:e,isLogin:n,setIsLogIn:r,isOnline:s,setIsOnline:i,setUserId:o}=_.useContext(V);document.title=t;const a=tn();_.useEffect(()=>{e()},[n]),_.useEffect(()=>(window.addEventListener("online",()=>i(!0)),window.addEventListener("offline",()=>i(!1)),()=>{window.removeEventListener("online",()=>i(!0)),window.removeEventListener("offline",()=>i(!1))}),[]);const l=async()=>{if(n){const c=oe(le,"users",U.currentUser.uid);s?await St(c,{isOnline:!0}):await St(c,{isOnline:!1,timestamp:jt()})}};_.useEffect(()=>{l()},[n,s]),_.useEffect(()=>{const c=iP(U,h=>{h&&(r(h),o(U.currentUser.uid))});return()=>{c()}},[]),_.useEffect(()=>{a(n?"/app/posts":"/login")},[n])},mj=()=>{const t={text:"About SEA",image:"about",answer:`SEA stands for Star Education Academy, is an education academy founded by U Aye Kyaw and Daw Sandar Lwin in 2015. At SEA, you can study variety of subjects including
    English Language and four skills,
    Philosophy, Maths and Science.`},e=[{text:"Is my data private ?",answer:"Yes, your data is private."},{text:"Where can I give feedback to developer ?",answer:"You can give feedback at aungnaingthan22@gmail.com"}],n=[{text:"What are updated in the latest version ?",answer:"Updated UI design and fix bugs."},{text:"What is the last update time ?",answer:` Updated ${_i(1712655376346)}.`}];return u.jsxs("div",{className:"p-5 ",children:[u.jsx(kn,{}),u.jsx(oa,{image:t.image,text:t.text,answer:t.answer}),u.jsx(oa,{text:"FAQ",image:"faq",answer:e.map(r=>u.jsx(oa,{text:r.text,answer:r.answer},r.text))}),u.jsx(oa,{image:"update",text:"Updates",answer:n.map(r=>u.jsx(oa,{text:r.text,answer:r.answer},r.text))})]})},oa=({image:t,text:e,answer:n})=>{const[r,s]=_.useState(!1),{theme:i}=_.useContext(V);return u.jsxs("div",{className:`border p-2  mb-2 ${i==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[u.jsxs("div",{className:"transition-all flex items-center rounded-md min-h-14 justify-between",children:[u.jsxs("div",{className:"flex items-center gap-x-2",children:[t&&u.jsx(gj,{image:t}),u.jsx("div",{children:e})]}),u.jsx("button",{onClick:()=>s(!r),className:`mr-2  rounded-full p-1 ${i==="light"?"bg-gray-200":"bg-slate-500"}`,children:u.jsx("img",{className:"w-6",src:J(r?"up":"down")})})]}),r&&u.jsx("div",{className:"font-medium ",children:n})]})},gj=({image:t})=>u.jsx("img",{className:"w-7",src:J(t)}),V=_.createContext();function _j(){var Xn,oc,ac;const t=ny("sea-localStorage"),[e,n]=_.useState(ny("seaacademy-theme-data")||"light"),[r,s]=_.useState(((Xn=t==null?void 0:t.timer)==null?void 0:Xn.seconds)||0),[i,o]=_.useState(((oc=t==null?void 0:t.timer)==null?void 0:oc.minutes)||0),[a,l]=_.useState(((ac=t==null?void 0:t.timer)==null?void 0:ac.hours)||0),[c,h]=_.useState(!1),[d,f]=_.useState({}),[m,v]=_.useState([]),[w,E]=_.useState(null),[p,g]=_.useState((t==null?void 0:t.answeredQuestions)||[]),[y,x]=_.useState((t==null?void 0:t.currentTest)||null),[C,T]=_.useState(!1),[I,R]=_.useState(""),[S,k]=_.useState(!0),[z,F]=_.useState([]),[Q,we]=_.useState([]),[nn,Es]=_.useState([]),[Sr,b]=_.useState([]),[H,Y]=_.useState([]),[Ee,Ne]=_.useState([]);Co("users",v,c),wM("users",f,c);const Ar=()=>{},rn=()=>{s(0),o(0),l(0)},X=()=>{rn(),g([]),x(null),S2("sea-localStorage",{answeredQuestions:[],currentTest:null,startIndex:null,timer:{seconds:0,minutes:0,hours:0}})};_.useEffect(()=>{S2("seaacademy-theme-data",e)},[e]);const be=`${a}:${M1(i)}:${M1(r)}`;return _.useEffect(()=>{const Nd=setInterval(()=>{r<59?s(r+1):(s(0),o(i+1)),i===59&&(o(0),l(a+1))},1e3);return()=>{clearInterval(Nd)}},[r]),u.jsx(V.Provider,{value:{answeredQuestions:p,setAnsweredQuestions:g,currentTest:y,stopTest:X,seaLocalStorage:t,formattedTime:be,startTimer:rn,seconds:r,minutes:i,hours:a,inspecting:C,userData:d,isLogin:c,setUserData:f,users:m,setCurrentTest:x,headerTitle:I,setHeaderTitle:R,theme:e,setTheme:n,refreshUserData:Ar,isOnline:S,setIsOnline:k,userId:w,setUserId:E,setInspecting:T,setIsLogIn:h,posts:z,setPosts:F,tests:Q,setTests:we,history:nn,setHistory:Es,chats:Sr,setChats:b,messages:H,setMessages:Y,notifications:Ee,setNotifications:Ne},children:u.jsx("div",{className:`transition-all duration-300 App font-padauk flex flex-col items-center min-h-screen ${e==="light"?"":"bg-slate-600"}`,children:u.jsxs(l9,{children:[u.jsx(pj,{}),u.jsx(AM,{}),u.jsx(kM,{}),u.jsx("div",{className:"flex-1 w-full h-full md:w-4/5 lg:w-3/5",children:u.jsxs(t9,{children:[!c&&u.jsx(Rt,{exact:!0,path:"/login",element:u.jsx(BM,{})}),c&&u.jsxs(u.Fragment,{children:[u.jsx(Rt,{exact:!0,path:"/app/:page",element:y?u.jsx(xM,{}):u.jsx(VM,{})}),u.jsx(Rt,{exact:!0,path:"/app/history/:resultId",element:u.jsx(TM,{})}),u.jsx(Rt,{exact:!0,path:"/app/help",element:u.jsx(mj,{})}),u.jsx(Rt,{exact:!0,path:"/app/history/:resultId/reviews",element:u.jsx(RM,{})}),u.jsx(Rt,{path:"/app/history",element:u.jsx(NM,{})}),u.jsx(Rt,{path:"/app/chatroom",element:u.jsx(fj,{})}),(d==null?void 0:d.isAdmin)&&u.jsxs(u.Fragment,{children:[u.jsx(Rt,{path:"/app/notifications",element:u.jsx(sj,{})}),u.jsx(Rt,{path:"/app/admin",element:u.jsx(PM,{})}),u.jsx(Rt,{path:"/app/admin/tests",element:u.jsx(ZM,{})}),u.jsx(Rt,{path:"/app/admin/users",element:u.jsx(ej,{})}),u.jsx(Rt,{path:"/app/admin/posts",element:u.jsx(nj,{})})]}),u.jsx(Rt,{exact:!0,path:"/app/settings",element:u.jsx(WM,{})})]}),u.jsx(Rt,{path:"*",element:u.jsx(Ad,{title:"No page found!",text:"There is no page!"})})]})}),I!=="Chat Room"&&u.jsx(zM,{})]})})})}b0.createRoot(document.getElementById("root")).render(u.jsx(my.StrictMode,{children:u.jsx(_j,{})}));
