import{j as t,r as a,A as w,u as C,c as y,d as P,aP as p,S as E,W as k,b as R,e as z}from"./index-dSD7UM6z.js";import{P as I}from"./ProfilePicture-M_ZZBSpq.js";import{c as U}from"./createSvgIcon-5tUNT3Hd.js";import{B as V}from"./Button-ZTLNkO5Z.js";import{T as A}from"./TextField-tugteksq.js";import{S as B}from"./SearchSharp-Oy0ZvDJ_.js";import{I as F}from"./IconButton-M8OEfqkq.js";import{C as $}from"./CloseSharp-rElFupoQ.js";import{T as h}from"./Tooltip-pmR5sMk3.js";import{T as x}from"./Typography-GbCp5BvV.js";import"./ButtonBase-D-lMm-wW.js";import"./Portal-nV2JPNiI.js";import"./Modal-40Myj6Vm.js";import"./debounce-gOEKrWSg.js";import"./useControlled-ajujHaEs.js";const D=U(t.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"PeopleSharp"),ae=()=>{const{setHeaderTitle:f}=a.useContext(w),[s,c]=a.useState(""),[j,W]=a.useState([{title:"Users",icon:t.jsx(D,{})}]),[n,S]=a.useState("Users");a.useState([]);const[l,v]=a.useState([]),g=C(),u=()=>{switch(n){case"Users":return"Enter uid or name...";case"Posts":return"Enter the title...";case"Tests":return"Enter the title..."}};a.useEffect(()=>{f("Search")},[]);const N=async()=>{const e=y(P,"users");let i=[];if(s.trim())try{const o=E(e,p("name",">=",s.trim()),p("name","<=",s.trim()+"ï£¿")),b=(await k(o)).docs.map(d=>({uid:d.id,...d.data()}));i=[...i,...b];const T=R(e,s.trim()),r=await z(T);r.exists()&&i.push({uid:r.id,...r.data()}),v(i)}catch(o){console.log(o.message)}},m=e=>{g(`/app/profile/${e}`)};return t.jsxs("div",{className:"p-5 ",children:[t.jsx("div",{className:"flex gap-x-1 items-center mb-2",children:j.map(e=>t.jsx(V,{onClick:()=>S(e.title),color:"primary",startIcon:e.icon,size:"small",variant:n===e.title?"contained":"outlined",children:e.title},e.title))}),t.jsxs("div",{className:" flex items-center mb-1",children:[t.jsx("div",{className:"h-11 flex-1 ",children:t.jsx(A,{placeholder:u(),size:"small",fullWidth:!0,value:s,onChange:e=>c(e.target.value)})}),t.jsx("button",{onClick:N,className:"bg-gray-500 rounded-full p-3 -ml-6 z-10",children:t.jsx(B,{})})]}),t.jsx("div",{className:"",children:s.trim()&&t.jsxs("div",{className:" mb-2 text-sm flex justify-between items-center mr-2 ml-2",children:[t.jsxs("div",{className:" flex-1",children:['Results for "',s,'"']}),t.jsx(F,{onClick:()=>c(""),children:t.jsx($,{})})]})}),l.length>0?t.jsx("div",{className:"border border-slate-400 shadow-md rounded-md ",children:l.map(e=>t.jsxs("div",{className:"flex items-center gap-x-2 p-1 b",children:[t.jsx(h,{arrow:!0,placement:"top",title:`View ${e==null?void 0:e.name}'s profile`,children:t.jsx("div",{onClick:()=>m(e.uid),className:"cursor-pointer",children:t.jsx(I,{image:e==null?void 0:e.image,name:e==null?void 0:e.name})})}),t.jsx(h,{arrow:!0,placement:"top",title:`View ${e==null?void 0:e.name}'s profile`,children:t.jsxs(x,{onClick:()=>m(e.uid),sx:{cursor:"pointer"},variant:"h6",fontSize:"0.9rem",children:[e==null?void 0:e.name," ",e!=null&&e.isAdmin?t.jsx(x,{variant:"caption",children:"(admin)"}):""]})})]}))}):""]})};export{ae as default};
