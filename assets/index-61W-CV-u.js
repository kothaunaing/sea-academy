function yC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function wC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qv={exports:{}},ih={},Yv={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tl=Symbol.for("react.element"),EC=Symbol.for("react.portal"),xC=Symbol.for("react.fragment"),TC=Symbol.for("react.strict_mode"),CC=Symbol.for("react.profiler"),IC=Symbol.for("react.provider"),SC=Symbol.for("react.context"),AC=Symbol.for("react.forward_ref"),RC=Symbol.for("react.suspense"),NC=Symbol.for("react.memo"),kC=Symbol.for("react.lazy"),gg=Symbol.iterator;function PC(t){return t===null||typeof t!="object"?null:(t=gg&&t[gg]||t["@@iterator"],typeof t=="function"?t:null)}var Xv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jv=Object.assign,Zv={};function To(t,e,n){this.props=t,this.context=e,this.refs=Zv,this.updater=n||Xv}To.prototype.isReactComponent={};To.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};To.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ey(){}ey.prototype=To.prototype;function E2(t,e,n){this.props=t,this.context=e,this.refs=Zv,this.updater=n||Xv}var x2=E2.prototype=new ey;x2.constructor=E2;Jv(x2,To.prototype);x2.isPureReactComponent=!0;var _g=Array.isArray,ty=Object.prototype.hasOwnProperty,T2={current:null},ny={key:!0,ref:!0,__self:!0,__source:!0};function ry(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ty.call(e,r)&&!ny.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Tl,type:t,key:i,ref:o,props:s,_owner:T2.current}}function LC(t,e){return{$$typeof:Tl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function C2(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tl}function bC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vg=/\/+/g;function wd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bC(""+t.key):e.toString(36)}function bc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Tl:case EC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+wd(o,0):r,_g(s)?(n="",t!=null&&(n=t.replace(vg,"$&/")+"/"),bc(s,e,n,"",function(c){return c})):s!=null&&(C2(s)&&(s=LC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(vg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",_g(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+wd(i,a);o+=bc(i,e,n,l,s)}else if(l=PC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+wd(i,a++),o+=bc(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function rc(t,e,n){if(t==null)return t;var r=[],s=0;return bc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function DC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Lt={current:null},Dc={transition:null},OC={ReactCurrentDispatcher:Lt,ReactCurrentBatchConfig:Dc,ReactCurrentOwner:T2};te.Children={map:rc,forEach:function(t,e,n){rc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rc(t,function(){e++}),e},toArray:function(t){return rc(t,function(e){return e})||[]},only:function(t){if(!C2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=To;te.Fragment=xC;te.Profiler=CC;te.PureComponent=E2;te.StrictMode=TC;te.Suspense=RC;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OC;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Jv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=T2.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ty.call(e,l)&&!ny.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Tl,type:t.type,key:s,ref:i,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:SC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:IC,_context:t},t.Consumer=t};te.createElement=ry;te.createFactory=function(t){var e=ry.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:AC,render:t}};te.isValidElement=C2;te.lazy=function(t){return{$$typeof:kC,_payload:{_status:-1,_result:t},_init:DC}};te.memo=function(t,e){return{$$typeof:NC,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Dc.transition;Dc.transition={};try{t()}finally{Dc.transition=e}};te.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};te.useCallback=function(t,e){return Lt.current.useCallback(t,e)};te.useContext=function(t){return Lt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return Lt.current.useDeferredValue(t)};te.useEffect=function(t,e){return Lt.current.useEffect(t,e)};te.useId=function(){return Lt.current.useId()};te.useImperativeHandle=function(t,e,n){return Lt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return Lt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return Lt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return Lt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return Lt.current.useReducer(t,e,n)};te.useRef=function(t){return Lt.current.useRef(t)};te.useState=function(t){return Lt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return Lt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return Lt.current.useTransition()};te.version="18.2.0";Yv.exports=te;var v=Yv.exports;const sy=wC(v),MC=yC({__proto__:null,default:sy},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jC=v,VC=Symbol.for("react.element"),FC=Symbol.for("react.fragment"),UC=Object.prototype.hasOwnProperty,$C=jC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zC={key:!0,ref:!0,__self:!0,__source:!0};function iy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)UC.call(e,r)&&!zC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:VC,type:t,key:i,ref:o,props:s,_owner:$C.current}}ih.Fragment=FC;ih.jsx=iy;ih.jsxs=iy;Qv.exports=ih;var u=Qv.exports,T0={},oy={exports:{}},Zt={},ay={exports:{}},ly={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,W){var X=M.length;M.push(W);e:for(;0<X;){var Ee=X-1>>>1,B=M[Ee];if(0<s(B,W))M[Ee]=W,M[X]=B,X=Ee;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var W=M[0],X=M.pop();if(X!==W){M[0]=X;e:for(var Ee=0,B=M.length,Me=B>>>1;Ee<Me;){var Dt=2*(Ee+1)-1,Qn=M[Dt],Ot=Dt+1,nn=M[Ot];if(0>s(Qn,X))Ot<B&&0>s(nn,Qn)?(M[Ee]=nn,M[Ot]=X,Ee=Ot):(M[Ee]=Qn,M[Dt]=X,Ee=Dt);else if(Ot<B&&0>s(nn,X))M[Ee]=nn,M[Ot]=X,Ee=Ot;else break e}}return W}function s(M,W){var X=M.sortIndex-W.sortIndex;return X!==0?X:M.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,m=!1,_=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(M){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=M)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function T(M){if(w=!1,y(M),!_)if(n(l)!==null)_=!0,ws(x);else{var W=n(c);W!==null&&Es(T,W.startTime-M)}}function x(M,W){_=!1,w&&(w=!1,p(S),S=-1),m=!0;var X=f;try{for(y(W),d=n(l);d!==null&&(!(d.expirationTime>W)||M&&!V());){var Ee=d.callback;if(typeof Ee=="function"){d.callback=null,f=d.priorityLevel;var B=Ee(d.expirationTime<=W);W=t.unstable_now(),typeof B=="function"?d.callback=B:d===n(l)&&r(l),y(W)}else r(l);d=n(l)}if(d!==null)var Me=!0;else{var Dt=n(c);Dt!==null&&Es(T,Dt.startTime-W),Me=!1}return Me}finally{d=null,f=X,m=!1}}var C=!1,I=null,S=-1,R=5,k=-1;function V(){return!(t.unstable_now()-k<R)}function $(){if(I!==null){var M=t.unstable_now();k=M;var W=!0;try{W=I(!0,M)}finally{W?Y():(C=!1,I=null)}}else C=!1}var Y;if(typeof g=="function")Y=function(){g($)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,Ke=oe.port2;oe.port1.onmessage=$,Y=function(){Ke.postMessage(null)}}else Y=function(){E($,0)};function ws(M){I=M,C||(C=!0,Y())}function Es(M,W){S=E(function(){M(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,ws(x))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(M){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var X=f;f=W;try{return M()}finally{f=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,W){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var X=f;f=M;try{return W()}finally{f=X}},t.unstable_scheduleCallback=function(M,W,X){var Ee=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Ee+X:Ee):X=Ee,M){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=X+B,M={id:h++,callback:W,priorityLevel:M,startTime:X,expirationTime:B,sortIndex:-1},X>Ee?(M.sortIndex=X,e(c,M),n(l)===null&&M===n(c)&&(w?(p(S),S=-1):w=!0,Es(T,X-Ee))):(M.sortIndex=B,e(l,M),_||m||(_=!0,ws(x))),M},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(M){var W=f;return function(){var X=f;f=W;try{return M.apply(this,arguments)}finally{f=X}}}})(ly);ay.exports=ly;var BC=ay.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy=v,Yt=BC;function P(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uy=new Set,Da={};function oi(t,e){eo(t,e),eo(t+"Capture",e)}function eo(t,e){for(Da[t]=e,t=0;t<e.length;t++)uy.add(e[t])}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C0=Object.prototype.hasOwnProperty,WC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yg={},wg={};function HC(t){return C0.call(wg,t)?!0:C0.call(yg,t)?!1:WC.test(t)?wg[t]=!0:(yg[t]=!0,!1)}function qC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function GC(t,e,n,r){if(e===null||typeof e>"u"||qC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ht[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ht[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ht[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ht[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ht[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ht[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ht[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ht[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ht[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var I2=/[\-:]([a-z])/g;function S2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(I2,S2);ht[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(I2,S2);ht[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(I2,S2);ht[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ht[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});ht.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ht[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function A2(t,e,n,r){var s=ht.hasOwnProperty(e)?ht[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GC(e,n,s,r)&&(n=null),r||s===null?HC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var vr=cy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sc=Symbol.for("react.element"),Ti=Symbol.for("react.portal"),Ci=Symbol.for("react.fragment"),R2=Symbol.for("react.strict_mode"),I0=Symbol.for("react.profiler"),hy=Symbol.for("react.provider"),dy=Symbol.for("react.context"),N2=Symbol.for("react.forward_ref"),S0=Symbol.for("react.suspense"),A0=Symbol.for("react.suspense_list"),k2=Symbol.for("react.memo"),Sr=Symbol.for("react.lazy"),fy=Symbol.for("react.offscreen"),Eg=Symbol.iterator;function Fo(t){return t===null||typeof t!="object"?null:(t=Eg&&t[Eg]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,Ed;function ra(t){if(Ed===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ed=e&&e[1]||""}return`
`+Ed+t}var xd=!1;function Td(t,e){if(!t||xd)return"";xd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{xd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ra(t):""}function KC(t){switch(t.tag){case 5:return ra(t.type);case 16:return ra("Lazy");case 13:return ra("Suspense");case 19:return ra("SuspenseList");case 0:case 2:case 15:return t=Td(t.type,!1),t;case 11:return t=Td(t.type.render,!1),t;case 1:return t=Td(t.type,!0),t;default:return""}}function R0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ci:return"Fragment";case Ti:return"Portal";case I0:return"Profiler";case R2:return"StrictMode";case S0:return"Suspense";case A0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dy:return(t.displayName||"Context")+".Consumer";case hy:return(t._context.displayName||"Context")+".Provider";case N2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k2:return e=t.displayName||null,e!==null?e:R0(t.type)||"Memo";case Sr:e=t._payload,t=t._init;try{return R0(t(e))}catch{}}return null}function QC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R0(e);case 8:return e===R2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function py(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function YC(t){var e=py(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ic(t){t._valueTracker||(t._valueTracker=YC(t))}function my(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=py(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Zc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function N0(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gy(t,e){e=e.checked,e!=null&&A2(t,"checked",e,!1)}function k0(t,e){gy(t,e);var n=Zr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?P0(t,e.type,n):e.hasOwnProperty("defaultValue")&&P0(t,e.type,Zr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Tg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function P0(t,e,n){(e!=="number"||Zc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sa=Array.isArray;function Fi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function L0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(P(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(P(92));if(sa(n)){if(1<n.length)throw Error(P(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zr(n)}}function _y(t,e){var n=Zr(e.value),r=Zr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ig(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function b0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var oc,yy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(oc=oc||document.createElement("div"),oc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=oc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Oa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XC=["Webkit","ms","Moz","O"];Object.keys(pa).forEach(function(t){XC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pa[e]=pa[t]})});function wy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pa.hasOwnProperty(t)&&pa[t]?(""+e).trim():e+"px"}function Ey(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=wy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var JC=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function D0(t,e){if(e){if(JC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(P(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(P(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(P(61))}if(e.style!=null&&typeof e.style!="object")throw Error(P(62))}}function O0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var M0=null;function P2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var j0=null,Ui=null,$i=null;function Sg(t){if(t=Sl(t)){if(typeof j0!="function")throw Error(P(280));var e=t.stateNode;e&&(e=uh(e),j0(t.stateNode,t.type,e))}}function xy(t){Ui?$i?$i.push(t):$i=[t]:Ui=t}function Ty(){if(Ui){var t=Ui,e=$i;if($i=Ui=null,Sg(t),e)for(t=0;t<e.length;t++)Sg(e[t])}}function Cy(t,e){return t(e)}function Iy(){}var Cd=!1;function Sy(t,e,n){if(Cd)return t(e,n);Cd=!0;try{return Cy(t,e,n)}finally{Cd=!1,(Ui!==null||$i!==null)&&(Iy(),Ty())}}function Ma(t,e){var n=t.stateNode;if(n===null)return null;var r=uh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(P(231,e,typeof n));return n}var V0=!1;if(cr)try{var Uo={};Object.defineProperty(Uo,"passive",{get:function(){V0=!0}}),window.addEventListener("test",Uo,Uo),window.removeEventListener("test",Uo,Uo)}catch{V0=!1}function ZC(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ma=!1,eu=null,tu=!1,F0=null,e4={onError:function(t){ma=!0,eu=t}};function t4(t,e,n,r,s,i,o,a,l){ma=!1,eu=null,ZC.apply(e4,arguments)}function n4(t,e,n,r,s,i,o,a,l){if(t4.apply(this,arguments),ma){if(ma){var c=eu;ma=!1,eu=null}else throw Error(P(198));tu||(tu=!0,F0=c)}}function ai(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ay(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ag(t){if(ai(t)!==t)throw Error(P(188))}function r4(t){var e=t.alternate;if(!e){if(e=ai(t),e===null)throw Error(P(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ag(s),t;if(i===r)return Ag(s),e;i=i.sibling}throw Error(P(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(P(189))}}if(n.alternate!==r)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?t:e}function Ry(t){return t=r4(t),t!==null?Ny(t):null}function Ny(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ny(t);if(e!==null)return e;t=t.sibling}return null}var ky=Yt.unstable_scheduleCallback,Rg=Yt.unstable_cancelCallback,s4=Yt.unstable_shouldYield,i4=Yt.unstable_requestPaint,je=Yt.unstable_now,o4=Yt.unstable_getCurrentPriorityLevel,L2=Yt.unstable_ImmediatePriority,Py=Yt.unstable_UserBlockingPriority,nu=Yt.unstable_NormalPriority,a4=Yt.unstable_LowPriority,Ly=Yt.unstable_IdlePriority,oh=null,Fn=null;function l4(t){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(oh,t,void 0,(t.current.flags&128)===128)}catch{}}var Cn=Math.clz32?Math.clz32:h4,c4=Math.log,u4=Math.LN2;function h4(t){return t>>>=0,t===0?32:31-(c4(t)/u4|0)|0}var ac=64,lc=4194304;function ia(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ru(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ia(a):(i&=o,i!==0&&(r=ia(i)))}else o=n&~s,o!==0?r=ia(o):i!==0&&(r=ia(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Cn(e),s=1<<n,r|=t[n],e&=~s;return r}function d4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Cn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=d4(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function U0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function by(){var t=ac;return ac<<=1,!(ac&4194240)&&(ac=64),t}function Id(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Cl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cn(e),t[e]=n}function p4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Cn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function b2(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Cn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var fe=0;function Dy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Oy,D2,My,jy,Vy,$0=!1,cc=[],Fr=null,Ur=null,$r=null,ja=new Map,Va=new Map,Rr=[],m4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ng(t,e){switch(t){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":ja.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Va.delete(e.pointerId)}}function $o(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Sl(e),e!==null&&D2(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function g4(t,e,n,r,s){switch(e){case"focusin":return Fr=$o(Fr,t,e,n,r,s),!0;case"dragenter":return Ur=$o(Ur,t,e,n,r,s),!0;case"mouseover":return $r=$o($r,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ja.set(i,$o(ja.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Va.set(i,$o(Va.get(i)||null,t,e,n,r,s)),!0}return!1}function Fy(t){var e=Rs(t.target);if(e!==null){var n=ai(e);if(n!==null){if(e=n.tag,e===13){if(e=Ay(n),e!==null){t.blockedOn=e,Vy(t.priority,function(){My(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=z0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);M0=r,n.target.dispatchEvent(r),M0=null}else return e=Sl(n),e!==null&&D2(e),t.blockedOn=n,!1;e.shift()}return!0}function kg(t,e,n){Oc(t)&&n.delete(e)}function _4(){$0=!1,Fr!==null&&Oc(Fr)&&(Fr=null),Ur!==null&&Oc(Ur)&&(Ur=null),$r!==null&&Oc($r)&&($r=null),ja.forEach(kg),Va.forEach(kg)}function zo(t,e){t.blockedOn===e&&(t.blockedOn=null,$0||($0=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,_4)))}function Fa(t){function e(s){return zo(s,t)}if(0<cc.length){zo(cc[0],t);for(var n=1;n<cc.length;n++){var r=cc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Fr!==null&&zo(Fr,t),Ur!==null&&zo(Ur,t),$r!==null&&zo($r,t),ja.forEach(e),Va.forEach(e),n=0;n<Rr.length;n++)r=Rr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rr.length&&(n=Rr[0],n.blockedOn===null);)Fy(n),n.blockedOn===null&&Rr.shift()}var zi=vr.ReactCurrentBatchConfig,su=!0;function v4(t,e,n,r){var s=fe,i=zi.transition;zi.transition=null;try{fe=1,O2(t,e,n,r)}finally{fe=s,zi.transition=i}}function y4(t,e,n,r){var s=fe,i=zi.transition;zi.transition=null;try{fe=4,O2(t,e,n,r)}finally{fe=s,zi.transition=i}}function O2(t,e,n,r){if(su){var s=z0(t,e,n,r);if(s===null)Od(t,e,r,iu,n),Ng(t,r);else if(g4(s,t,e,n,r))r.stopPropagation();else if(Ng(t,r),e&4&&-1<m4.indexOf(t)){for(;s!==null;){var i=Sl(s);if(i!==null&&Oy(i),i=z0(t,e,n,r),i===null&&Od(t,e,r,iu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Od(t,e,r,null,n)}}var iu=null;function z0(t,e,n,r){if(iu=null,t=P2(r),t=Rs(t),t!==null)if(e=ai(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ay(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return iu=t,null}function Uy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o4()){case L2:return 1;case Py:return 4;case nu:case a4:return 16;case Ly:return 536870912;default:return 16}default:return 16}}var Or=null,M2=null,Mc=null;function $y(){if(Mc)return Mc;var t,e=M2,n=e.length,r,s="value"in Or?Or.value:Or.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Mc=s.slice(t,1<r?1-r:void 0)}function jc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function uc(){return!0}function Pg(){return!1}function en(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?uc:Pg,this.isPropagationStopped=Pg,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=uc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=uc)},persist:function(){},isPersistent:uc}),e}var Co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},j2=en(Co),Il=Pe({},Co,{view:0,detail:0}),w4=en(Il),Sd,Ad,Bo,ah=Pe({},Il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:V2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bo&&(Bo&&t.type==="mousemove"?(Sd=t.screenX-Bo.screenX,Ad=t.screenY-Bo.screenY):Ad=Sd=0,Bo=t),Sd)},movementY:function(t){return"movementY"in t?t.movementY:Ad}}),Lg=en(ah),E4=Pe({},ah,{dataTransfer:0}),x4=en(E4),T4=Pe({},Il,{relatedTarget:0}),Rd=en(T4),C4=Pe({},Co,{animationName:0,elapsedTime:0,pseudoElement:0}),I4=en(C4),S4=Pe({},Co,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),A4=en(S4),R4=Pe({},Co,{data:0}),bg=en(R4),N4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},k4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},P4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function L4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=P4[t])?!!e[t]:!1}function V2(){return L4}var b4=Pe({},Il,{key:function(t){if(t.key){var e=N4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?k4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:V2,charCode:function(t){return t.type==="keypress"?jc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),D4=en(b4),O4=Pe({},ah,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dg=en(O4),M4=Pe({},Il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:V2}),j4=en(M4),V4=Pe({},Co,{propertyName:0,elapsedTime:0,pseudoElement:0}),F4=en(V4),U4=Pe({},ah,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$4=en(U4),z4=[9,13,27,32],F2=cr&&"CompositionEvent"in window,ga=null;cr&&"documentMode"in document&&(ga=document.documentMode);var B4=cr&&"TextEvent"in window&&!ga,zy=cr&&(!F2||ga&&8<ga&&11>=ga),Og=" ",Mg=!1;function By(t,e){switch(t){case"keyup":return z4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ii=!1;function W4(t,e){switch(t){case"compositionend":return Wy(e);case"keypress":return e.which!==32?null:(Mg=!0,Og);case"textInput":return t=e.data,t===Og&&Mg?null:t;default:return null}}function H4(t,e){if(Ii)return t==="compositionend"||!F2&&By(t,e)?(t=$y(),Mc=M2=Or=null,Ii=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zy&&e.locale!=="ko"?null:e.data;default:return null}}var q4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!q4[t.type]:e==="textarea"}function Hy(t,e,n,r){xy(r),e=ou(e,"onChange"),0<e.length&&(n=new j2("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _a=null,Ua=null;function G4(t){nw(t,0)}function lh(t){var e=Ri(t);if(my(e))return t}function K4(t,e){if(t==="change")return e}var qy=!1;if(cr){var Nd;if(cr){var kd="oninput"in document;if(!kd){var Vg=document.createElement("div");Vg.setAttribute("oninput","return;"),kd=typeof Vg.oninput=="function"}Nd=kd}else Nd=!1;qy=Nd&&(!document.documentMode||9<document.documentMode)}function Fg(){_a&&(_a.detachEvent("onpropertychange",Gy),Ua=_a=null)}function Gy(t){if(t.propertyName==="value"&&lh(Ua)){var e=[];Hy(e,Ua,t,P2(t)),Sy(G4,e)}}function Q4(t,e,n){t==="focusin"?(Fg(),_a=e,Ua=n,_a.attachEvent("onpropertychange",Gy)):t==="focusout"&&Fg()}function Y4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lh(Ua)}function X4(t,e){if(t==="click")return lh(e)}function J4(t,e){if(t==="input"||t==="change")return lh(e)}function Z4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var An=typeof Object.is=="function"?Object.is:Z4;function $a(t,e){if(An(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!C0.call(e,s)||!An(t[s],e[s]))return!1}return!0}function Ug(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $g(t,e){var n=Ug(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ug(n)}}function Ky(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ky(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Qy(){for(var t=window,e=Zc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zc(t.document)}return e}function U2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function eI(t){var e=Qy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ky(n.ownerDocument.documentElement,n)){if(r!==null&&U2(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=$g(n,i);var o=$g(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tI=cr&&"documentMode"in document&&11>=document.documentMode,Si=null,B0=null,va=null,W0=!1;function zg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;W0||Si==null||Si!==Zc(r)||(r=Si,"selectionStart"in r&&U2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),va&&$a(va,r)||(va=r,r=ou(B0,"onSelect"),0<r.length&&(e=new j2("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Si)))}function hc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ai={animationend:hc("Animation","AnimationEnd"),animationiteration:hc("Animation","AnimationIteration"),animationstart:hc("Animation","AnimationStart"),transitionend:hc("Transition","TransitionEnd")},Pd={},Yy={};cr&&(Yy=document.createElement("div").style,"AnimationEvent"in window||(delete Ai.animationend.animation,delete Ai.animationiteration.animation,delete Ai.animationstart.animation),"TransitionEvent"in window||delete Ai.transitionend.transition);function ch(t){if(Pd[t])return Pd[t];if(!Ai[t])return t;var e=Ai[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Yy)return Pd[t]=e[n];return t}var Xy=ch("animationend"),Jy=ch("animationiteration"),Zy=ch("animationstart"),ew=ch("transitionend"),tw=new Map,Bg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ls(t,e){tw.set(t,e),oi(e,[t])}for(var Ld=0;Ld<Bg.length;Ld++){var bd=Bg[Ld],nI=bd.toLowerCase(),rI=bd[0].toUpperCase()+bd.slice(1);ls(nI,"on"+rI)}ls(Xy,"onAnimationEnd");ls(Jy,"onAnimationIteration");ls(Zy,"onAnimationStart");ls("dblclick","onDoubleClick");ls("focusin","onFocus");ls("focusout","onBlur");ls(ew,"onTransitionEnd");eo("onMouseEnter",["mouseout","mouseover"]);eo("onMouseLeave",["mouseout","mouseover"]);eo("onPointerEnter",["pointerout","pointerover"]);eo("onPointerLeave",["pointerout","pointerover"]);oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oi("onBeforeInput",["compositionend","keypress","textInput","paste"]);oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sI=new Set("cancel close invalid load scroll toggle".split(" ").concat(oa));function Wg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,n4(r,e,void 0,t),t.currentTarget=null}function nw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Wg(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Wg(s,a,c),i=l}}}if(tu)throw t=F0,tu=!1,F0=null,t}function xe(t,e){var n=e[Q0];n===void 0&&(n=e[Q0]=new Set);var r=t+"__bubble";n.has(r)||(rw(e,t,2,!1),n.add(r))}function Dd(t,e,n){var r=0;e&&(r|=4),rw(n,t,r,e)}var dc="_reactListening"+Math.random().toString(36).slice(2);function za(t){if(!t[dc]){t[dc]=!0,uy.forEach(function(n){n!=="selectionchange"&&(sI.has(n)||Dd(n,!1,t),Dd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[dc]||(e[dc]=!0,Dd("selectionchange",!1,e))}}function rw(t,e,n,r){switch(Uy(e)){case 1:var s=v4;break;case 4:s=y4;break;default:s=O2}n=s.bind(null,e,n,t),s=void 0,!V0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Od(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Rs(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Sy(function(){var c=i,h=P2(n),d=[];e:{var f=tw.get(t);if(f!==void 0){var m=j2,_=t;switch(t){case"keypress":if(jc(n)===0)break e;case"keydown":case"keyup":m=D4;break;case"focusin":_="focus",m=Rd;break;case"focusout":_="blur",m=Rd;break;case"beforeblur":case"afterblur":m=Rd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=x4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=j4;break;case Xy:case Jy:case Zy:m=I4;break;case ew:m=F4;break;case"scroll":m=w4;break;case"wheel":m=$4;break;case"copy":case"cut":case"paste":m=A4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Dg}var w=(e&4)!==0,E=!w&&t==="scroll",p=w?f!==null?f+"Capture":null:f;w=[];for(var g=c,y;g!==null;){y=g;var T=y.stateNode;if(y.tag===5&&T!==null&&(y=T,p!==null&&(T=Ma(g,p),T!=null&&w.push(Ba(g,T,y)))),E)break;g=g.return}0<w.length&&(f=new m(f,_,null,n,h),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==M0&&(_=n.relatedTarget||n.fromElement)&&(Rs(_)||_[ur]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=c,_=_?Rs(_):null,_!==null&&(E=ai(_),_!==E||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=c),m!==_)){if(w=Lg,T="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(w=Dg,T="onPointerLeave",p="onPointerEnter",g="pointer"),E=m==null?f:Ri(m),y=_==null?f:Ri(_),f=new w(T,g+"leave",m,n,h),f.target=E,f.relatedTarget=y,T=null,Rs(h)===c&&(w=new w(p,g+"enter",_,n,h),w.target=y,w.relatedTarget=E,T=w),E=T,m&&_)t:{for(w=m,p=_,g=0,y=w;y;y=_i(y))g++;for(y=0,T=p;T;T=_i(T))y++;for(;0<g-y;)w=_i(w),g--;for(;0<y-g;)p=_i(p),y--;for(;g--;){if(w===p||p!==null&&w===p.alternate)break t;w=_i(w),p=_i(p)}w=null}else w=null;m!==null&&Hg(d,f,m,w,!1),_!==null&&E!==null&&Hg(d,E,_,w,!0)}}e:{if(f=c?Ri(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var x=K4;else if(jg(f))if(qy)x=J4;else{x=Y4;var C=Q4}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=X4);if(x&&(x=x(t,c))){Hy(d,x,n,h);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&P0(f,"number",f.value)}switch(C=c?Ri(c):window,t){case"focusin":(jg(C)||C.contentEditable==="true")&&(Si=C,B0=c,va=null);break;case"focusout":va=B0=Si=null;break;case"mousedown":W0=!0;break;case"contextmenu":case"mouseup":case"dragend":W0=!1,zg(d,n,h);break;case"selectionchange":if(tI)break;case"keydown":case"keyup":zg(d,n,h)}var I;if(F2)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Ii?By(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(zy&&n.locale!=="ko"&&(Ii||S!=="onCompositionStart"?S==="onCompositionEnd"&&Ii&&(I=$y()):(Or=h,M2="value"in Or?Or.value:Or.textContent,Ii=!0)),C=ou(c,S),0<C.length&&(S=new bg(S,t,null,n,h),d.push({event:S,listeners:C}),I?S.data=I:(I=Wy(n),I!==null&&(S.data=I)))),(I=B4?W4(t,n):H4(t,n))&&(c=ou(c,"onBeforeInput"),0<c.length&&(h=new bg("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=I))}nw(d,e)})}function Ba(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ou(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ma(t,n),i!=null&&r.unshift(Ba(t,i,s)),i=Ma(t,e),i!=null&&r.push(Ba(t,i,s))),t=t.return}return r}function _i(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Ma(n,i),l!=null&&o.unshift(Ba(n,l,a))):s||(l=Ma(n,i),l!=null&&o.push(Ba(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var iI=/\r\n?/g,oI=/\u0000|\uFFFD/g;function qg(t){return(typeof t=="string"?t:""+t).replace(iI,`
`).replace(oI,"")}function fc(t,e,n){if(e=qg(e),qg(t)!==e&&n)throw Error(P(425))}function au(){}var H0=null,q0=null;function G0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var K0=typeof setTimeout=="function"?setTimeout:void 0,aI=typeof clearTimeout=="function"?clearTimeout:void 0,Gg=typeof Promise=="function"?Promise:void 0,lI=typeof queueMicrotask=="function"?queueMicrotask:typeof Gg<"u"?function(t){return Gg.resolve(null).then(t).catch(cI)}:K0;function cI(t){setTimeout(function(){throw t})}function Md(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Fa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Fa(e)}function zr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Io=Math.random().toString(36).slice(2),bn="__reactFiber$"+Io,Wa="__reactProps$"+Io,ur="__reactContainer$"+Io,Q0="__reactEvents$"+Io,uI="__reactListeners$"+Io,hI="__reactHandles$"+Io;function Rs(t){var e=t[bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ur]||n[bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Kg(t);t!==null;){if(n=t[bn])return n;t=Kg(t)}return e}t=n,n=t.parentNode}return null}function Sl(t){return t=t[bn]||t[ur],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ri(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(P(33))}function uh(t){return t[Wa]||null}var Y0=[],Ni=-1;function cs(t){return{current:t}}function Se(t){0>Ni||(t.current=Y0[Ni],Y0[Ni]=null,Ni--)}function ye(t,e){Ni++,Y0[Ni]=t.current,t.current=e}var es={},Ct=cs(es),Ut=cs(!1),Hs=es;function to(t,e){var n=t.type.contextTypes;if(!n)return es;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function $t(t){return t=t.childContextTypes,t!=null}function lu(){Se(Ut),Se(Ct)}function Qg(t,e,n){if(Ct.current!==es)throw Error(P(168));ye(Ct,e),ye(Ut,n)}function sw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(P(108,QC(t)||"Unknown",s));return Pe({},n,r)}function cu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||es,Hs=Ct.current,ye(Ct,t),ye(Ut,Ut.current),!0}function Yg(t,e,n){var r=t.stateNode;if(!r)throw Error(P(169));n?(t=sw(t,e,Hs),r.__reactInternalMemoizedMergedChildContext=t,Se(Ut),Se(Ct),ye(Ct,t)):Se(Ut),ye(Ut,n)}var Jn=null,hh=!1,jd=!1;function iw(t){Jn===null?Jn=[t]:Jn.push(t)}function dI(t){hh=!0,iw(t)}function us(){if(!jd&&Jn!==null){jd=!0;var t=0,e=fe;try{var n=Jn;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Jn=null,hh=!1}catch(s){throw Jn!==null&&(Jn=Jn.slice(t+1)),ky(L2,us),s}finally{fe=e,jd=!1}}return null}var ki=[],Pi=0,uu=null,hu=0,rn=[],sn=0,qs=null,er=1,tr="";function Ts(t,e){ki[Pi++]=hu,ki[Pi++]=uu,uu=t,hu=e}function ow(t,e,n){rn[sn++]=er,rn[sn++]=tr,rn[sn++]=qs,qs=t;var r=er;t=tr;var s=32-Cn(r)-1;r&=~(1<<s),n+=1;var i=32-Cn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,er=1<<32-Cn(e)+s|n<<s|r,tr=i+t}else er=1<<i|n<<s|r,tr=t}function $2(t){t.return!==null&&(Ts(t,1),ow(t,1,0))}function z2(t){for(;t===uu;)uu=ki[--Pi],ki[Pi]=null,hu=ki[--Pi],ki[Pi]=null;for(;t===qs;)qs=rn[--sn],rn[sn]=null,tr=rn[--sn],rn[sn]=null,er=rn[--sn],rn[sn]=null}var Gt=null,Wt=null,Re=!1,wn=null;function aw(t,e){var n=an(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Xg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gt=t,Wt=zr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gt=t,Wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qs!==null?{id:er,overflow:tr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=an(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Gt=t,Wt=null,!0):!1;default:return!1}}function X0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function J0(t){if(Re){var e=Wt;if(e){var n=e;if(!Xg(t,e)){if(X0(t))throw Error(P(418));e=zr(n.nextSibling);var r=Gt;e&&Xg(t,e)?aw(r,n):(t.flags=t.flags&-4097|2,Re=!1,Gt=t)}}else{if(X0(t))throw Error(P(418));t.flags=t.flags&-4097|2,Re=!1,Gt=t}}}function Jg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gt=t}function pc(t){if(t!==Gt)return!1;if(!Re)return Jg(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!G0(t.type,t.memoizedProps)),e&&(e=Wt)){if(X0(t))throw lw(),Error(P(418));for(;e;)aw(t,e),e=zr(e.nextSibling)}if(Jg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wt=zr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wt=null}}else Wt=Gt?zr(t.stateNode.nextSibling):null;return!0}function lw(){for(var t=Wt;t;)t=zr(t.nextSibling)}function no(){Wt=Gt=null,Re=!1}function B2(t){wn===null?wn=[t]:wn.push(t)}var fI=vr.ReactCurrentBatchConfig;function vn(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var du=cs(null),fu=null,Li=null,W2=null;function H2(){W2=Li=fu=null}function q2(t){var e=du.current;Se(du),t._currentValue=e}function Z0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bi(t,e){fu=t,W2=Li=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vt=!0),t.firstContext=null)}function fn(t){var e=t._currentValue;if(W2!==t)if(t={context:t,memoizedValue:e,next:null},Li===null){if(fu===null)throw Error(P(308));Li=t,fu.dependencies={lanes:0,firstContext:t}}else Li=Li.next=t;return e}var Ns=null;function G2(t){Ns===null?Ns=[t]:Ns.push(t)}function cw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,G2(e)):(n.next=s.next,s.next=n),e.interleaved=n,hr(t,r)}function hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ar=!1;function K2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function or(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Br(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,hr(t,n)}return s=r.interleaved,s===null?(e.next=e,G2(r)):(e.next=s.next,s.next=e),r.interleaved=e,hr(t,n)}function Vc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,b2(t,n)}}function Zg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pu(t,e,n,r){var s=t.updateQueue;Ar=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,h=c=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,w=a;switch(f=e,m=n,w.tag){case 1:if(_=w.payload,typeof _=="function"){d=_.call(m,d,f);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=w.payload,f=typeof _=="function"?_.call(m,d,f):_,f==null)break e;d=Pe({},d,f);break e;case 2:Ar=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ks|=o,t.lanes=o,t.memoizedState=d}}function e1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(P(191,s));s.call(r)}}}var hw=new cy.Component().refs;function ef(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var dh={isMounted:function(t){return(t=t._reactInternals)?ai(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Pt(),s=Hr(t),i=or(r,s);i.payload=e,n!=null&&(i.callback=n),e=Br(t,i,s),e!==null&&(In(e,t,s,r),Vc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Pt(),s=Hr(t),i=or(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Br(t,i,s),e!==null&&(In(e,t,s,r),Vc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pt(),r=Hr(t),s=or(n,r);s.tag=2,e!=null&&(s.callback=e),e=Br(t,s,r),e!==null&&(In(e,t,r,n),Vc(e,t,r))}};function t1(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!$a(n,r)||!$a(s,i):!0}function dw(t,e,n){var r=!1,s=es,i=e.contextType;return typeof i=="object"&&i!==null?i=fn(i):(s=$t(e)?Hs:Ct.current,r=e.contextTypes,i=(r=r!=null)?to(t,s):es),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function n1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&dh.enqueueReplaceState(e,e.state,null)}function tf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=hw,K2(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=fn(i):(i=$t(e)?Hs:Ct.current,s.context=to(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ef(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&dh.enqueueReplaceState(s,s.state,null),pu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Wo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(P(309));var r=n.stateNode}if(!r)throw Error(P(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===hw&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(P(284));if(!n._owner)throw Error(P(290,t))}return t}function mc(t,e){throw t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function r1(t){var e=t._init;return e(t._payload)}function fw(t){function e(p,g){if(t){var y=p.deletions;y===null?(p.deletions=[g],p.flags|=16):y.push(g)}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function r(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function s(p,g){return p=qr(p,g),p.index=0,p.sibling=null,p}function i(p,g,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<g?(p.flags|=2,g):y):(p.flags|=2,g)):(p.flags|=1048576,g)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,g,y,T){return g===null||g.tag!==6?(g=Wd(y,p.mode,T),g.return=p,g):(g=s(g,y),g.return=p,g)}function l(p,g,y,T){var x=y.type;return x===Ci?h(p,g,y.props.children,T,y.key):g!==null&&(g.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Sr&&r1(x)===g.type)?(T=s(g,y.props),T.ref=Wo(p,g,y),T.return=p,T):(T=Wc(y.type,y.key,y.props,null,p.mode,T),T.ref=Wo(p,g,y),T.return=p,T)}function c(p,g,y,T){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Hd(y,p.mode,T),g.return=p,g):(g=s(g,y.children||[]),g.return=p,g)}function h(p,g,y,T,x){return g===null||g.tag!==7?(g=Us(y,p.mode,T,x),g.return=p,g):(g=s(g,y),g.return=p,g)}function d(p,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Wd(""+g,p.mode,y),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case sc:return y=Wc(g.type,g.key,g.props,null,p.mode,y),y.ref=Wo(p,null,g),y.return=p,y;case Ti:return g=Hd(g,p.mode,y),g.return=p,g;case Sr:var T=g._init;return d(p,T(g._payload),y)}if(sa(g)||Fo(g))return g=Us(g,p.mode,y,null),g.return=p,g;mc(p,g)}return null}function f(p,g,y,T){var x=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return x!==null?null:a(p,g,""+y,T);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case sc:return y.key===x?l(p,g,y,T):null;case Ti:return y.key===x?c(p,g,y,T):null;case Sr:return x=y._init,f(p,g,x(y._payload),T)}if(sa(y)||Fo(y))return x!==null?null:h(p,g,y,T,null);mc(p,y)}return null}function m(p,g,y,T,x){if(typeof T=="string"&&T!==""||typeof T=="number")return p=p.get(y)||null,a(g,p,""+T,x);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case sc:return p=p.get(T.key===null?y:T.key)||null,l(g,p,T,x);case Ti:return p=p.get(T.key===null?y:T.key)||null,c(g,p,T,x);case Sr:var C=T._init;return m(p,g,y,C(T._payload),x)}if(sa(T)||Fo(T))return p=p.get(y)||null,h(g,p,T,x,null);mc(g,T)}return null}function _(p,g,y,T){for(var x=null,C=null,I=g,S=g=0,R=null;I!==null&&S<y.length;S++){I.index>S?(R=I,I=null):R=I.sibling;var k=f(p,I,y[S],T);if(k===null){I===null&&(I=R);break}t&&I&&k.alternate===null&&e(p,I),g=i(k,g,S),C===null?x=k:C.sibling=k,C=k,I=R}if(S===y.length)return n(p,I),Re&&Ts(p,S),x;if(I===null){for(;S<y.length;S++)I=d(p,y[S],T),I!==null&&(g=i(I,g,S),C===null?x=I:C.sibling=I,C=I);return Re&&Ts(p,S),x}for(I=r(p,I);S<y.length;S++)R=m(I,p,S,y[S],T),R!==null&&(t&&R.alternate!==null&&I.delete(R.key===null?S:R.key),g=i(R,g,S),C===null?x=R:C.sibling=R,C=R);return t&&I.forEach(function(V){return e(p,V)}),Re&&Ts(p,S),x}function w(p,g,y,T){var x=Fo(y);if(typeof x!="function")throw Error(P(150));if(y=x.call(y),y==null)throw Error(P(151));for(var C=x=null,I=g,S=g=0,R=null,k=y.next();I!==null&&!k.done;S++,k=y.next()){I.index>S?(R=I,I=null):R=I.sibling;var V=f(p,I,k.value,T);if(V===null){I===null&&(I=R);break}t&&I&&V.alternate===null&&e(p,I),g=i(V,g,S),C===null?x=V:C.sibling=V,C=V,I=R}if(k.done)return n(p,I),Re&&Ts(p,S),x;if(I===null){for(;!k.done;S++,k=y.next())k=d(p,k.value,T),k!==null&&(g=i(k,g,S),C===null?x=k:C.sibling=k,C=k);return Re&&Ts(p,S),x}for(I=r(p,I);!k.done;S++,k=y.next())k=m(I,p,S,k.value,T),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?S:k.key),g=i(k,g,S),C===null?x=k:C.sibling=k,C=k);return t&&I.forEach(function($){return e(p,$)}),Re&&Ts(p,S),x}function E(p,g,y,T){if(typeof y=="object"&&y!==null&&y.type===Ci&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case sc:e:{for(var x=y.key,C=g;C!==null;){if(C.key===x){if(x=y.type,x===Ci){if(C.tag===7){n(p,C.sibling),g=s(C,y.props.children),g.return=p,p=g;break e}}else if(C.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Sr&&r1(x)===C.type){n(p,C.sibling),g=s(C,y.props),g.ref=Wo(p,C,y),g.return=p,p=g;break e}n(p,C);break}else e(p,C);C=C.sibling}y.type===Ci?(g=Us(y.props.children,p.mode,T,y.key),g.return=p,p=g):(T=Wc(y.type,y.key,y.props,null,p.mode,T),T.ref=Wo(p,g,y),T.return=p,p=T)}return o(p);case Ti:e:{for(C=y.key;g!==null;){if(g.key===C)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(p,g.sibling),g=s(g,y.children||[]),g.return=p,p=g;break e}else{n(p,g);break}else e(p,g);g=g.sibling}g=Hd(y,p.mode,T),g.return=p,p=g}return o(p);case Sr:return C=y._init,E(p,g,C(y._payload),T)}if(sa(y))return _(p,g,y,T);if(Fo(y))return w(p,g,y,T);mc(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(p,g.sibling),g=s(g,y),g.return=p,p=g):(n(p,g),g=Wd(y,p.mode,T),g.return=p,p=g),o(p)):n(p,g)}return E}var ro=fw(!0),pw=fw(!1),Al={},Un=cs(Al),Ha=cs(Al),qa=cs(Al);function ks(t){if(t===Al)throw Error(P(174));return t}function Q2(t,e){switch(ye(qa,e),ye(Ha,t),ye(Un,Al),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:b0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=b0(e,t)}Se(Un),ye(Un,e)}function so(){Se(Un),Se(Ha),Se(qa)}function mw(t){ks(qa.current);var e=ks(Un.current),n=b0(e,t.type);e!==n&&(ye(Ha,t),ye(Un,n))}function Y2(t){Ha.current===t&&(Se(Un),Se(Ha))}var Ne=cs(0);function mu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vd=[];function X2(){for(var t=0;t<Vd.length;t++)Vd[t]._workInProgressVersionPrimary=null;Vd.length=0}var Fc=vr.ReactCurrentDispatcher,Fd=vr.ReactCurrentBatchConfig,Gs=0,ke=null,He=null,Xe=null,gu=!1,ya=!1,Ga=0,pI=0;function dt(){throw Error(P(321))}function J2(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!An(t[n],e[n]))return!1;return!0}function Z2(t,e,n,r,s,i){if(Gs=i,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fc.current=t===null||t.memoizedState===null?vI:yI,t=n(r,s),ya){i=0;do{if(ya=!1,Ga=0,25<=i)throw Error(P(301));i+=1,Xe=He=null,e.updateQueue=null,Fc.current=wI,t=n(r,s)}while(ya)}if(Fc.current=_u,e=He!==null&&He.next!==null,Gs=0,Xe=He=ke=null,gu=!1,e)throw Error(P(300));return t}function ep(){var t=Ga!==0;return Ga=0,t}function Ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?ke.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function pn(){if(He===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Xe===null?ke.memoizedState:Xe.next;if(e!==null)Xe=e,He=t;else{if(t===null)throw Error(P(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Xe===null?ke.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Ka(t,e){return typeof e=="function"?e(t):e}function Ud(t){var e=pn(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=He,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var h=c.lane;if((Gs&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,ke.lanes|=h,Ks|=h}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,An(r,e.memoizedState)||(Vt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ke.lanes|=i,Ks|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $d(t){var e=pn(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);An(i,e.memoizedState)||(Vt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function gw(){}function _w(t,e){var n=ke,r=pn(),s=e(),i=!An(r.memoizedState,s);if(i&&(r.memoizedState=s,Vt=!0),r=r.queue,tp(ww.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,Qa(9,yw.bind(null,n,r,s,e),void 0,null),et===null)throw Error(P(349));Gs&30||vw(n,e,s)}return s}function vw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function yw(t,e,n,r){e.value=n,e.getSnapshot=r,Ew(e)&&xw(t)}function ww(t,e,n){return n(function(){Ew(e)&&xw(t)})}function Ew(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!An(t,n)}catch{return!0}}function xw(t){var e=hr(t,1);e!==null&&In(e,t,1,-1)}function s1(t){var e=Ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:t},e.queue=t,t=t.dispatch=_I.bind(null,ke,t),[e.memoizedState,t]}function Qa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Tw(){return pn().memoizedState}function Uc(t,e,n,r){var s=Ln();ke.flags|=t,s.memoizedState=Qa(1|e,n,void 0,r===void 0?null:r)}function fh(t,e,n,r){var s=pn();r=r===void 0?null:r;var i=void 0;if(He!==null){var o=He.memoizedState;if(i=o.destroy,r!==null&&J2(r,o.deps)){s.memoizedState=Qa(e,n,i,r);return}}ke.flags|=t,s.memoizedState=Qa(1|e,n,i,r)}function i1(t,e){return Uc(8390656,8,t,e)}function tp(t,e){return fh(2048,8,t,e)}function Cw(t,e){return fh(4,2,t,e)}function Iw(t,e){return fh(4,4,t,e)}function Sw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Aw(t,e,n){return n=n!=null?n.concat([t]):null,fh(4,4,Sw.bind(null,e,t),n)}function np(){}function Rw(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&J2(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Nw(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&J2(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function kw(t,e,n){return Gs&21?(An(n,e)||(n=by(),ke.lanes|=n,Ks|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vt=!0),t.memoizedState=n)}function mI(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=Fd.transition;Fd.transition={};try{t(!1),e()}finally{fe=n,Fd.transition=r}}function Pw(){return pn().memoizedState}function gI(t,e,n){var r=Hr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Lw(t))bw(e,n);else if(n=cw(t,e,n,r),n!==null){var s=Pt();In(n,t,r,s),Dw(n,e,r)}}function _I(t,e,n){var r=Hr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lw(t))bw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,An(a,o)){var l=e.interleaved;l===null?(s.next=s,G2(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=cw(t,e,s,r),n!==null&&(s=Pt(),In(n,t,r,s),Dw(n,e,r))}}function Lw(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function bw(t,e){ya=gu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Dw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,b2(t,n)}}var _u={readContext:fn,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},vI={readContext:fn,useCallback:function(t,e){return Ln().memoizedState=[t,e===void 0?null:e],t},useContext:fn,useEffect:i1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Uc(4194308,4,Sw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Uc(4,2,t,e)},useMemo:function(t,e){var n=Ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=gI.bind(null,ke,t),[r.memoizedState,t]},useRef:function(t){var e=Ln();return t={current:t},e.memoizedState=t},useState:s1,useDebugValue:np,useDeferredValue:function(t){return Ln().memoizedState=t},useTransition:function(){var t=s1(!1),e=t[0];return t=mI.bind(null,t[1]),Ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ke,s=Ln();if(Re){if(n===void 0)throw Error(P(407));n=n()}else{if(n=e(),et===null)throw Error(P(349));Gs&30||vw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,i1(ww.bind(null,r,i,t),[t]),r.flags|=2048,Qa(9,yw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ln(),e=et.identifierPrefix;if(Re){var n=tr,r=er;n=(r&~(1<<32-Cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ga++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yI={readContext:fn,useCallback:Rw,useContext:fn,useEffect:tp,useImperativeHandle:Aw,useInsertionEffect:Cw,useLayoutEffect:Iw,useMemo:Nw,useReducer:Ud,useRef:Tw,useState:function(){return Ud(Ka)},useDebugValue:np,useDeferredValue:function(t){var e=pn();return kw(e,He.memoizedState,t)},useTransition:function(){var t=Ud(Ka)[0],e=pn().memoizedState;return[t,e]},useMutableSource:gw,useSyncExternalStore:_w,useId:Pw,unstable_isNewReconciler:!1},wI={readContext:fn,useCallback:Rw,useContext:fn,useEffect:tp,useImperativeHandle:Aw,useInsertionEffect:Cw,useLayoutEffect:Iw,useMemo:Nw,useReducer:$d,useRef:Tw,useState:function(){return $d(Ka)},useDebugValue:np,useDeferredValue:function(t){var e=pn();return He===null?e.memoizedState=t:kw(e,He.memoizedState,t)},useTransition:function(){var t=$d(Ka)[0],e=pn().memoizedState;return[t,e]},useMutableSource:gw,useSyncExternalStore:_w,useId:Pw,unstable_isNewReconciler:!1};function io(t,e){try{var n="",r=e;do n+=KC(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function zd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function nf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var EI=typeof WeakMap=="function"?WeakMap:Map;function Ow(t,e,n){n=or(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){yu||(yu=!0,ff=r),nf(t,e)},n}function Mw(t,e,n){n=or(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){nf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){nf(t,e),typeof r!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function o1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new EI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=OI.bind(null,t,e,n),e.then(t,t))}function a1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function l1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=or(-1,1),e.tag=2,Br(n,e,1))),n.lanes|=1),t)}var xI=vr.ReactCurrentOwner,Vt=!1;function Nt(t,e,n,r){e.child=t===null?pw(e,null,n,r):ro(e,t.child,n,r)}function c1(t,e,n,r,s){n=n.render;var i=e.ref;return Bi(e,s),r=Z2(t,e,n,r,i,s),n=ep(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,dr(t,e,s)):(Re&&n&&$2(e),e.flags|=1,Nt(t,e,r,s),e.child)}function u1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!up(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,jw(t,e,i,r,s)):(t=Wc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:$a,n(o,r)&&t.ref===e.ref)return dr(t,e,s)}return e.flags|=1,t=qr(i,r),t.ref=e.ref,t.return=e,e.child=t}function jw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if($a(i,r)&&t.ref===e.ref)if(Vt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Vt=!0);else return e.lanes=t.lanes,dr(t,e,s)}return rf(t,e,n,r,s)}function Vw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(Di,Bt),Bt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(Di,Bt),Bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ye(Di,Bt),Bt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ye(Di,Bt),Bt|=r;return Nt(t,e,s,n),e.child}function Fw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function rf(t,e,n,r,s){var i=$t(n)?Hs:Ct.current;return i=to(e,i),Bi(e,s),n=Z2(t,e,n,r,i,s),r=ep(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,dr(t,e,s)):(Re&&r&&$2(e),e.flags|=1,Nt(t,e,n,s),e.child)}function h1(t,e,n,r,s){if($t(n)){var i=!0;cu(e)}else i=!1;if(Bi(e,s),e.stateNode===null)$c(t,e),dw(e,n,r),tf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=fn(c):(c=$t(n)?Hs:Ct.current,c=to(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&n1(e,o,r,c),Ar=!1;var f=e.memoizedState;o.state=f,pu(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Ut.current||Ar?(typeof h=="function"&&(ef(e,n,h,r),l=e.memoizedState),(a=Ar||t1(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,uw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:vn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=fn(l):(l=$t(n)?Hs:Ct.current,l=to(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&n1(e,o,r,l),Ar=!1,f=e.memoizedState,o.state=f,pu(e,r,o,s);var _=e.memoizedState;a!==d||f!==_||Ut.current||Ar?(typeof m=="function"&&(ef(e,n,m,r),_=e.memoizedState),(c=Ar||t1(e,n,c,r,f,_,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return sf(t,e,n,r,i,s)}function sf(t,e,n,r,s,i){Fw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Yg(e,n,!1),dr(t,e,i);r=e.stateNode,xI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ro(e,t.child,null,i),e.child=ro(e,null,a,i)):Nt(t,e,a,i),e.memoizedState=r.state,s&&Yg(e,n,!0),e.child}function Uw(t){var e=t.stateNode;e.pendingContext?Qg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qg(t,e.context,!1),Q2(t,e.containerInfo)}function d1(t,e,n,r,s){return no(),B2(s),e.flags|=256,Nt(t,e,n,r),e.child}var of={dehydrated:null,treeContext:null,retryLane:0};function af(t){return{baseLanes:t,cachePool:null,transitions:null}}function $w(t,e,n){var r=e.pendingProps,s=Ne.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ye(Ne,s&1),t===null)return J0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=gh(o,r,0,null),t=Us(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=af(n),e.memoizedState=of,t):rp(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return TI(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=qr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=qr(a,i):(i=Us(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?af(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=of,r}return i=t.child,t=i.sibling,r=qr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rp(t,e){return e=gh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gc(t,e,n,r){return r!==null&&B2(r),ro(e,t.child,null,n),t=rp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function TI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=zd(Error(P(422))),gc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=gh({mode:"visible",children:r.children},s,0,null),i=Us(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ro(e,t.child,null,o),e.child.memoizedState=af(o),e.memoizedState=of,i);if(!(e.mode&1))return gc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(P(419)),r=zd(i,r,void 0),gc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Vt||a){if(r=et,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hr(t,s),In(r,t,s,-1))}return cp(),r=zd(Error(P(421))),gc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=MI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Wt=zr(s.nextSibling),Gt=e,Re=!0,wn=null,t!==null&&(rn[sn++]=er,rn[sn++]=tr,rn[sn++]=qs,er=t.id,tr=t.overflow,qs=e),e=rp(e,r.children),e.flags|=4096,e)}function f1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Z0(t.return,e,n)}function Bd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function zw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Nt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&f1(t,n,e);else if(t.tag===19)f1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&mu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Bd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&mu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Bd(e,!0,n,null,i);break;case"together":Bd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $c(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ks|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,n=qr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function CI(t,e,n){switch(e.tag){case 3:Uw(e),no();break;case 5:mw(e);break;case 1:$t(e.type)&&cu(e);break;case 4:Q2(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ye(du,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?$w(t,e,n):(ye(Ne,Ne.current&1),t=dr(t,e,n),t!==null?t.sibling:null);ye(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return zw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ye(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,Vw(t,e,n)}return dr(t,e,n)}var Bw,lf,Ww,Hw;Bw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lf=function(){};Ww=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ks(Un.current);var i=null;switch(n){case"input":s=N0(t,s),r=N0(t,r),i=[];break;case"select":s=Pe({},s,{value:void 0}),r=Pe({},r,{value:void 0}),i=[];break;case"textarea":s=L0(t,s),r=L0(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=au)}D0(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Da.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Da.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Hw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ho(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function II(t,e,n){var r=e.pendingProps;switch(z2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return $t(e.type)&&lu(),ft(e),null;case 3:return r=e.stateNode,so(),Se(Ut),Se(Ct),X2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wn!==null&&(gf(wn),wn=null))),lf(t,e),ft(e),null;case 5:Y2(e);var s=ks(qa.current);if(n=e.type,t!==null&&e.stateNode!=null)Ww(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(P(166));return ft(e),null}if(t=ks(Un.current),pc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[bn]=e,r[Wa]=i,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(s=0;s<oa.length;s++)xe(oa[s],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":xg(r,i),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},xe("invalid",r);break;case"textarea":Cg(r,i),xe("invalid",r)}D0(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&fc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&fc(r.textContent,a,t),s=["children",""+a]):Da.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xe("scroll",r)}switch(n){case"input":ic(r),Tg(r,i,!0);break;case"textarea":ic(r),Ig(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=au)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[bn]=e,t[Wa]=r,Bw(t,e,!1,!1),e.stateNode=t;e:{switch(o=O0(n,r),n){case"dialog":xe("cancel",t),xe("close",t),s=r;break;case"iframe":case"object":case"embed":xe("load",t),s=r;break;case"video":case"audio":for(s=0;s<oa.length;s++)xe(oa[s],t);s=r;break;case"source":xe("error",t),s=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),s=r;break;case"details":xe("toggle",t),s=r;break;case"input":xg(t,r),s=N0(t,r),xe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Pe({},r,{value:void 0}),xe("invalid",t);break;case"textarea":Cg(t,r),s=L0(t,r),xe("invalid",t);break;default:s=r}D0(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Ey(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&yy(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Oa(t,l):typeof l=="number"&&Oa(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Da.hasOwnProperty(i)?l!=null&&i==="onScroll"&&xe("scroll",t):l!=null&&A2(t,i,l,o))}switch(n){case"input":ic(t),Tg(t,r,!1);break;case"textarea":ic(t),Ig(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Fi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Fi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=au)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ft(e),null;case 6:if(t&&e.stateNode!=null)Hw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(P(166));if(n=ks(qa.current),ks(Un.current),pc(e)){if(r=e.stateNode,n=e.memoizedProps,r[bn]=e,(i=r.nodeValue!==n)&&(t=Gt,t!==null))switch(t.tag){case 3:fc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bn]=e,e.stateNode=r}return ft(e),null;case 13:if(Se(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Wt!==null&&e.mode&1&&!(e.flags&128))lw(),no(),e.flags|=98560,i=!1;else if(i=pc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(P(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[bn]=e}else no(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),i=!1}else wn!==null&&(gf(wn),wn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?qe===0&&(qe=3):cp())),e.updateQueue!==null&&(e.flags|=4),ft(e),null);case 4:return so(),lf(t,e),t===null&&za(e.stateNode.containerInfo),ft(e),null;case 10:return q2(e.type._context),ft(e),null;case 17:return $t(e.type)&&lu(),ft(e),null;case 19:if(Se(Ne),i=e.memoizedState,i===null)return ft(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ho(i,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=mu(t),o!==null){for(e.flags|=128,Ho(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(Ne,Ne.current&1|2),e.child}t=t.sibling}i.tail!==null&&je()>oo&&(e.flags|=128,r=!0,Ho(i,!1),e.lanes=4194304)}else{if(!r)if(t=mu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ho(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Re)return ft(e),null}else 2*je()-i.renderingStartTime>oo&&n!==1073741824&&(e.flags|=128,r=!0,Ho(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=je(),e.sibling=null,n=Ne.current,ye(Ne,r?n&1|2:n&1),e):(ft(e),null);case 22:case 23:return lp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bt&1073741824&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),null;case 24:return null;case 25:return null}throw Error(P(156,e.tag))}function SI(t,e){switch(z2(e),e.tag){case 1:return $t(e.type)&&lu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return so(),Se(Ut),Se(Ct),X2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Y2(e),null;case 13:if(Se(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));no()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Se(Ne),null;case 4:return so(),null;case 10:return q2(e.type._context),null;case 22:case 23:return lp(),null;case 24:return null;default:return null}}var _c=!1,gt=!1,AI=typeof WeakSet=="function"?WeakSet:Set,j=null;function bi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function cf(t,e,n){try{n()}catch(r){Le(t,e,r)}}var p1=!1;function RI(t,e){if(H0=su,t=Qy(),U2(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++h===r&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(q0={focusedElem:t,selectionRange:n},su=!1,j=e;j!==null;)if(e=j,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,j=t;else for(;j!==null;){e=j;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var w=_.memoizedProps,E=_.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?w:vn(e.type,w),E);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(T){Le(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,j=t;break}j=e.return}return _=p1,p1=!1,_}function wa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&cf(e,n,i)}s=s.next}while(s!==r)}}function ph(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function uf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qw(t){var e=t.alternate;e!==null&&(t.alternate=null,qw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bn],delete e[Wa],delete e[Q0],delete e[uI],delete e[hI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Gw(t){return t.tag===5||t.tag===3||t.tag===4}function m1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Gw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=au));else if(r!==4&&(t=t.child,t!==null))for(hf(t,e,n),t=t.sibling;t!==null;)hf(t,e,n),t=t.sibling}function df(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(df(t,e,n),t=t.sibling;t!==null;)df(t,e,n),t=t.sibling}var rt=null,yn=!1;function Cr(t,e,n){for(n=n.child;n!==null;)Kw(t,e,n),n=n.sibling}function Kw(t,e,n){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(oh,n)}catch{}switch(n.tag){case 5:gt||bi(n,e);case 6:var r=rt,s=yn;rt=null,Cr(t,e,n),rt=r,yn=s,rt!==null&&(yn?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(yn?(t=rt,n=n.stateNode,t.nodeType===8?Md(t.parentNode,n):t.nodeType===1&&Md(t,n),Fa(t)):Md(rt,n.stateNode));break;case 4:r=rt,s=yn,rt=n.stateNode.containerInfo,yn=!0,Cr(t,e,n),rt=r,yn=s;break;case 0:case 11:case 14:case 15:if(!gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&cf(n,e,o),s=s.next}while(s!==r)}Cr(t,e,n);break;case 1:if(!gt&&(bi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Le(n,e,a)}Cr(t,e,n);break;case 21:Cr(t,e,n);break;case 22:n.mode&1?(gt=(r=gt)||n.memoizedState!==null,Cr(t,e,n),gt=r):Cr(t,e,n);break;default:Cr(t,e,n)}}function g1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new AI),e.forEach(function(r){var s=jI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function _n(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:rt=a.stateNode,yn=!1;break e;case 3:rt=a.stateNode.containerInfo,yn=!0;break e;case 4:rt=a.stateNode.containerInfo,yn=!0;break e}a=a.return}if(rt===null)throw Error(P(160));Kw(i,o,s),rt=null,yn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Le(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Qw(e,t),e=e.sibling}function Qw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_n(e,t),Pn(t),r&4){try{wa(3,t,t.return),ph(3,t)}catch(w){Le(t,t.return,w)}try{wa(5,t,t.return)}catch(w){Le(t,t.return,w)}}break;case 1:_n(e,t),Pn(t),r&512&&n!==null&&bi(n,n.return);break;case 5:if(_n(e,t),Pn(t),r&512&&n!==null&&bi(n,n.return),t.flags&32){var s=t.stateNode;try{Oa(s,"")}catch(w){Le(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&gy(s,i),O0(a,o);var c=O0(a,i);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?Ey(s,d):h==="dangerouslySetInnerHTML"?yy(s,d):h==="children"?Oa(s,d):A2(s,h,d,c)}switch(a){case"input":k0(s,i);break;case"textarea":_y(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Fi(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Fi(s,!!i.multiple,i.defaultValue,!0):Fi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Wa]=i}catch(w){Le(t,t.return,w)}}break;case 6:if(_n(e,t),Pn(t),r&4){if(t.stateNode===null)throw Error(P(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){Le(t,t.return,w)}}break;case 3:if(_n(e,t),Pn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fa(e.containerInfo)}catch(w){Le(t,t.return,w)}break;case 4:_n(e,t),Pn(t);break;case 13:_n(e,t),Pn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(op=je())),r&4&&g1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(gt=(c=gt)||h,_n(e,t),gt=c):_n(e,t),Pn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(j=t,h=t.child;h!==null;){for(d=j=h;j!==null;){switch(f=j,m=f.child,f.tag){case 0:case 11:case 14:case 15:wa(4,f,f.return);break;case 1:bi(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(w){Le(r,n,w)}}break;case 5:bi(f,f.return);break;case 22:if(f.memoizedState!==null){v1(d);continue}}m!==null?(m.return=f,j=m):v1(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=wy("display",o))}catch(w){Le(t,t.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(w){Le(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_n(e,t),Pn(t),r&4&&g1(t);break;case 21:break;default:_n(e,t),Pn(t)}}function Pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Gw(n)){var r=n;break e}n=n.return}throw Error(P(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Oa(s,""),r.flags&=-33);var i=m1(t);df(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=m1(t);hf(t,a,o);break;default:throw Error(P(161))}}catch(l){Le(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NI(t,e,n){j=t,Yw(t)}function Yw(t,e,n){for(var r=(t.mode&1)!==0;j!==null;){var s=j,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||_c;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||gt;a=_c;var c=gt;if(_c=o,(gt=l)&&!c)for(j=s;j!==null;)o=j,l=o.child,o.tag===22&&o.memoizedState!==null?y1(s):l!==null?(l.return=o,j=l):y1(s);for(;i!==null;)j=i,Yw(i),i=i.sibling;j=s,_c=a,gt=c}_1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,j=i):_1(t)}}function _1(t){for(;j!==null;){var e=j;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||ph(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!gt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:vn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&e1(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}e1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Fa(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}gt||e.flags&512&&uf(e)}catch(f){Le(e,e.return,f)}}if(e===t){j=null;break}if(n=e.sibling,n!==null){n.return=e.return,j=n;break}j=e.return}}function v1(t){for(;j!==null;){var e=j;if(e===t){j=null;break}var n=e.sibling;if(n!==null){n.return=e.return,j=n;break}j=e.return}}function y1(t){for(;j!==null;){var e=j;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ph(4,e)}catch(l){Le(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Le(e,s,l)}}var i=e.return;try{uf(e)}catch(l){Le(e,i,l)}break;case 5:var o=e.return;try{uf(e)}catch(l){Le(e,o,l)}}}catch(l){Le(e,e.return,l)}if(e===t){j=null;break}var a=e.sibling;if(a!==null){a.return=e.return,j=a;break}j=e.return}}var kI=Math.ceil,vu=vr.ReactCurrentDispatcher,sp=vr.ReactCurrentOwner,cn=vr.ReactCurrentBatchConfig,ae=0,et=null,Ue=null,at=0,Bt=0,Di=cs(0),qe=0,Ya=null,Ks=0,mh=0,ip=0,Ea=null,Mt=null,op=0,oo=1/0,Xn=null,yu=!1,ff=null,Wr=null,vc=!1,Mr=null,wu=0,xa=0,pf=null,zc=-1,Bc=0;function Pt(){return ae&6?je():zc!==-1?zc:zc=je()}function Hr(t){return t.mode&1?ae&2&&at!==0?at&-at:fI.transition!==null?(Bc===0&&(Bc=by()),Bc):(t=fe,t!==0||(t=window.event,t=t===void 0?16:Uy(t.type)),t):1}function In(t,e,n,r){if(50<xa)throw xa=0,pf=null,Error(P(185));Cl(t,n,r),(!(ae&2)||t!==et)&&(t===et&&(!(ae&2)&&(mh|=n),qe===4&&Nr(t,at)),zt(t,r),n===1&&ae===0&&!(e.mode&1)&&(oo=je()+500,hh&&us()))}function zt(t,e){var n=t.callbackNode;f4(t,e);var r=ru(t,t===et?at:0);if(r===0)n!==null&&Rg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Rg(n),e===1)t.tag===0?dI(w1.bind(null,t)):iw(w1.bind(null,t)),lI(function(){!(ae&6)&&us()}),n=null;else{switch(Dy(r)){case 1:n=L2;break;case 4:n=Py;break;case 16:n=nu;break;case 536870912:n=Ly;break;default:n=nu}n=s3(n,Xw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Xw(t,e){if(zc=-1,Bc=0,ae&6)throw Error(P(327));var n=t.callbackNode;if(Wi()&&t.callbackNode!==n)return null;var r=ru(t,t===et?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Eu(t,r);else{e=r;var s=ae;ae|=2;var i=Zw();(et!==t||at!==e)&&(Xn=null,oo=je()+500,Fs(t,e));do try{bI();break}catch(a){Jw(t,a)}while(!0);H2(),vu.current=i,ae=s,Ue!==null?e=0:(et=null,at=0,e=qe)}if(e!==0){if(e===2&&(s=U0(t),s!==0&&(r=s,e=mf(t,s))),e===1)throw n=Ya,Fs(t,0),Nr(t,r),zt(t,je()),n;if(e===6)Nr(t,r);else{if(s=t.current.alternate,!(r&30)&&!PI(s)&&(e=Eu(t,r),e===2&&(i=U0(t),i!==0&&(r=i,e=mf(t,i))),e===1))throw n=Ya,Fs(t,0),Nr(t,r),zt(t,je()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(P(345));case 2:Cs(t,Mt,Xn);break;case 3:if(Nr(t,r),(r&130023424)===r&&(e=op+500-je(),10<e)){if(ru(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Pt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=K0(Cs.bind(null,t,Mt,Xn),e);break}Cs(t,Mt,Xn);break;case 4:if(Nr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Cn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kI(r/1960))-r,10<r){t.timeoutHandle=K0(Cs.bind(null,t,Mt,Xn),r);break}Cs(t,Mt,Xn);break;case 5:Cs(t,Mt,Xn);break;default:throw Error(P(329))}}}return zt(t,je()),t.callbackNode===n?Xw.bind(null,t):null}function mf(t,e){var n=Ea;return t.current.memoizedState.isDehydrated&&(Fs(t,e).flags|=256),t=Eu(t,e),t!==2&&(e=Mt,Mt=n,e!==null&&gf(e)),t}function gf(t){Mt===null?Mt=t:Mt.push.apply(Mt,t)}function PI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!An(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nr(t,e){for(e&=~ip,e&=~mh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cn(e),r=1<<n;t[n]=-1,e&=~r}}function w1(t){if(ae&6)throw Error(P(327));Wi();var e=ru(t,0);if(!(e&1))return zt(t,je()),null;var n=Eu(t,e);if(t.tag!==0&&n===2){var r=U0(t);r!==0&&(e=r,n=mf(t,r))}if(n===1)throw n=Ya,Fs(t,0),Nr(t,e),zt(t,je()),n;if(n===6)throw Error(P(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cs(t,Mt,Xn),zt(t,je()),null}function ap(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(oo=je()+500,hh&&us())}}function Qs(t){Mr!==null&&Mr.tag===0&&!(ae&6)&&Wi();var e=ae;ae|=1;var n=cn.transition,r=fe;try{if(cn.transition=null,fe=1,t)return t()}finally{fe=r,cn.transition=n,ae=e,!(ae&6)&&us()}}function lp(){Bt=Di.current,Se(Di)}function Fs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,aI(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(z2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lu();break;case 3:so(),Se(Ut),Se(Ct),X2();break;case 5:Y2(r);break;case 4:so();break;case 13:Se(Ne);break;case 19:Se(Ne);break;case 10:q2(r.type._context);break;case 22:case 23:lp()}n=n.return}if(et=t,Ue=t=qr(t.current,null),at=Bt=e,qe=0,Ya=null,ip=mh=Ks=0,Mt=Ea=null,Ns!==null){for(e=0;e<Ns.length;e++)if(n=Ns[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ns=null}return t}function Jw(t,e){do{var n=Ue;try{if(H2(),Fc.current=_u,gu){for(var r=ke.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}gu=!1}if(Gs=0,Xe=He=ke=null,ya=!1,Ga=0,sp.current=null,n===null||n.return===null){qe=1,Ya=e,Ue=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=at,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=a1(o);if(m!==null){m.flags&=-257,l1(m,o,a,i,e),m.mode&1&&o1(i,c,e),e=m,l=c;var _=e.updateQueue;if(_===null){var w=new Set;w.add(l),e.updateQueue=w}else _.add(l);break e}else{if(!(e&1)){o1(i,c,e),cp();break e}l=Error(P(426))}}else if(Re&&a.mode&1){var E=a1(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),l1(E,o,a,i,e),B2(io(l,a));break e}}i=l=io(l,a),qe!==4&&(qe=2),Ea===null?Ea=[i]:Ea.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=Ow(i,l,e);Zg(i,p);break e;case 1:a=l;var g=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Wr===null||!Wr.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var T=Mw(i,a,e);Zg(i,T);break e}}i=i.return}while(i!==null)}t3(n)}catch(x){e=x,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function Zw(){var t=vu.current;return vu.current=_u,t===null?_u:t}function cp(){(qe===0||qe===3||qe===2)&&(qe=4),et===null||!(Ks&268435455)&&!(mh&268435455)||Nr(et,at)}function Eu(t,e){var n=ae;ae|=2;var r=Zw();(et!==t||at!==e)&&(Xn=null,Fs(t,e));do try{LI();break}catch(s){Jw(t,s)}while(!0);if(H2(),ae=n,vu.current=r,Ue!==null)throw Error(P(261));return et=null,at=0,qe}function LI(){for(;Ue!==null;)e3(Ue)}function bI(){for(;Ue!==null&&!s4();)e3(Ue)}function e3(t){var e=r3(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,e===null?t3(t):Ue=e,sp.current=null}function t3(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=SI(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Ue=null;return}}else if(n=II(n,e,Bt),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);qe===0&&(qe=5)}function Cs(t,e,n){var r=fe,s=cn.transition;try{cn.transition=null,fe=1,DI(t,e,n,r)}finally{cn.transition=s,fe=r}return null}function DI(t,e,n,r){do Wi();while(Mr!==null);if(ae&6)throw Error(P(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(P(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(p4(t,i),t===et&&(Ue=et=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vc||(vc=!0,s3(nu,function(){return Wi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=cn.transition,cn.transition=null;var o=fe;fe=1;var a=ae;ae|=4,sp.current=null,RI(t,n),Qw(n,t),eI(q0),su=!!H0,q0=H0=null,t.current=n,NI(n),i4(),ae=a,fe=o,cn.transition=i}else t.current=n;if(vc&&(vc=!1,Mr=t,wu=s),i=t.pendingLanes,i===0&&(Wr=null),l4(n.stateNode),zt(t,je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(yu)throw yu=!1,t=ff,ff=null,t;return wu&1&&t.tag!==0&&Wi(),i=t.pendingLanes,i&1?t===pf?xa++:(xa=0,pf=t):xa=0,us(),null}function Wi(){if(Mr!==null){var t=Dy(wu),e=cn.transition,n=fe;try{if(cn.transition=null,fe=16>t?16:t,Mr===null)var r=!1;else{if(t=Mr,Mr=null,wu=0,ae&6)throw Error(P(331));var s=ae;for(ae|=4,j=t.current;j!==null;){var i=j,o=i.child;if(j.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(j=c;j!==null;){var h=j;switch(h.tag){case 0:case 11:case 15:wa(8,h,i)}var d=h.child;if(d!==null)d.return=h,j=d;else for(;j!==null;){h=j;var f=h.sibling,m=h.return;if(qw(h),h===c){j=null;break}if(f!==null){f.return=m,j=f;break}j=m}}}var _=i.alternate;if(_!==null){var w=_.child;if(w!==null){_.child=null;do{var E=w.sibling;w.sibling=null,w=E}while(w!==null)}}j=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,j=o;else e:for(;j!==null;){if(i=j,i.flags&2048)switch(i.tag){case 0:case 11:case 15:wa(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,j=p;break e}j=i.return}}var g=t.current;for(j=g;j!==null;){o=j;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,j=y;else e:for(o=g;j!==null;){if(a=j,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ph(9,a)}}catch(x){Le(a,a.return,x)}if(a===o){j=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,j=T;break e}j=a.return}}if(ae=s,us(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(oh,t)}catch{}r=!0}return r}finally{fe=n,cn.transition=e}}return!1}function E1(t,e,n){e=io(n,e),e=Ow(t,e,1),t=Br(t,e,1),e=Pt(),t!==null&&(Cl(t,1,e),zt(t,e))}function Le(t,e,n){if(t.tag===3)E1(t,t,n);else for(;e!==null;){if(e.tag===3){E1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wr===null||!Wr.has(r))){t=io(n,t),t=Mw(e,t,1),e=Br(e,t,1),t=Pt(),e!==null&&(Cl(e,1,t),zt(e,t));break}}e=e.return}}function OI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Pt(),t.pingedLanes|=t.suspendedLanes&n,et===t&&(at&n)===n&&(qe===4||qe===3&&(at&130023424)===at&&500>je()-op?Fs(t,0):ip|=n),zt(t,e)}function n3(t,e){e===0&&(t.mode&1?(e=lc,lc<<=1,!(lc&130023424)&&(lc=4194304)):e=1);var n=Pt();t=hr(t,e),t!==null&&(Cl(t,e,n),zt(t,n))}function MI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),n3(t,n)}function jI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(P(314))}r!==null&&r.delete(e),n3(t,n)}var r3;r3=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ut.current)Vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vt=!1,CI(t,e,n);Vt=!!(t.flags&131072)}else Vt=!1,Re&&e.flags&1048576&&ow(e,hu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$c(t,e),t=e.pendingProps;var s=to(e,Ct.current);Bi(e,n),s=Z2(null,e,r,t,s,n);var i=ep();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(r)?(i=!0,cu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,K2(e),s.updater=dh,e.stateNode=s,s._reactInternals=e,tf(e,r,t,n),e=sf(null,e,r,!0,i,n)):(e.tag=0,Re&&i&&$2(e),Nt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch($c(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=FI(r),t=vn(r,t),s){case 0:e=rf(null,e,r,t,n);break e;case 1:e=h1(null,e,r,t,n);break e;case 11:e=c1(null,e,r,t,n);break e;case 14:e=u1(null,e,r,vn(r.type,t),n);break e}throw Error(P(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vn(r,s),rf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vn(r,s),h1(t,e,r,s,n);case 3:e:{if(Uw(e),t===null)throw Error(P(387));r=e.pendingProps,i=e.memoizedState,s=i.element,uw(t,e),pu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=io(Error(P(423)),e),e=d1(t,e,r,n,s);break e}else if(r!==s){s=io(Error(P(424)),e),e=d1(t,e,r,n,s);break e}else for(Wt=zr(e.stateNode.containerInfo.firstChild),Gt=e,Re=!0,wn=null,n=pw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(no(),r===s){e=dr(t,e,n);break e}Nt(t,e,r,n)}e=e.child}return e;case 5:return mw(e),t===null&&J0(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,G0(r,s)?o=null:i!==null&&G0(r,i)&&(e.flags|=32),Fw(t,e),Nt(t,e,o,n),e.child;case 6:return t===null&&J0(e),null;case 13:return $w(t,e,n);case 4:return Q2(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ro(e,null,r,n):Nt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vn(r,s),c1(t,e,r,s,n);case 7:return Nt(t,e,e.pendingProps,n),e.child;case 8:return Nt(t,e,e.pendingProps.children,n),e.child;case 12:return Nt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ye(du,r._currentValue),r._currentValue=o,i!==null)if(An(i.value,o)){if(i.children===s.children&&!Ut.current){e=dr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=or(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Z0(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(P(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Z0(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Nt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Bi(e,n),s=fn(s),r=r(s),e.flags|=1,Nt(t,e,r,n),e.child;case 14:return r=e.type,s=vn(r,e.pendingProps),s=vn(r.type,s),u1(t,e,r,s,n);case 15:return jw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vn(r,s),$c(t,e),e.tag=1,$t(r)?(t=!0,cu(e)):t=!1,Bi(e,n),dw(e,r,s),tf(e,r,s,n),sf(null,e,r,!0,t,n);case 19:return zw(t,e,n);case 22:return Vw(t,e,n)}throw Error(P(156,e.tag))};function s3(t,e){return ky(t,e)}function VI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(t,e,n,r){return new VI(t,e,n,r)}function up(t){return t=t.prototype,!(!t||!t.isReactComponent)}function FI(t){if(typeof t=="function")return up(t)?1:0;if(t!=null){if(t=t.$$typeof,t===N2)return 11;if(t===k2)return 14}return 2}function qr(t,e){var n=t.alternate;return n===null?(n=an(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")up(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ci:return Us(n.children,s,i,e);case R2:o=8,s|=8;break;case I0:return t=an(12,n,e,s|2),t.elementType=I0,t.lanes=i,t;case S0:return t=an(13,n,e,s),t.elementType=S0,t.lanes=i,t;case A0:return t=an(19,n,e,s),t.elementType=A0,t.lanes=i,t;case fy:return gh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hy:o=10;break e;case dy:o=9;break e;case N2:o=11;break e;case k2:o=14;break e;case Sr:o=16,r=null;break e}throw Error(P(130,t==null?t:typeof t,""))}return e=an(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Us(t,e,n,r){return t=an(7,t,r,e),t.lanes=n,t}function gh(t,e,n,r){return t=an(22,t,r,e),t.elementType=fy,t.lanes=n,t.stateNode={isHidden:!1},t}function Wd(t,e,n){return t=an(6,t,null,e),t.lanes=n,t}function Hd(t,e,n){return e=an(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function UI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Id(0),this.expirationTimes=Id(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Id(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function hp(t,e,n,r,s,i,o,a,l){return t=new UI(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=an(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},K2(i),t}function $I(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ti,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function i3(t){if(!t)return es;t=t._reactInternals;e:{if(ai(t)!==t||t.tag!==1)throw Error(P(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(P(171))}if(t.tag===1){var n=t.type;if($t(n))return sw(t,n,e)}return e}function o3(t,e,n,r,s,i,o,a,l){return t=hp(n,r,!0,t,s,i,o,a,l),t.context=i3(null),n=t.current,r=Pt(),s=Hr(n),i=or(r,s),i.callback=e??null,Br(n,i,s),t.current.lanes=s,Cl(t,s,r),zt(t,r),t}function _h(t,e,n,r){var s=e.current,i=Pt(),o=Hr(s);return n=i3(n),e.context===null?e.context=n:e.pendingContext=n,e=or(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Br(s,e,o),t!==null&&(In(t,s,o,i),Vc(t,s,o)),o}function xu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function x1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function dp(t,e){x1(t,e),(t=t.alternate)&&x1(t,e)}function zI(){return null}var a3=typeof reportError=="function"?reportError:function(t){console.error(t)};function fp(t){this._internalRoot=t}vh.prototype.render=fp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));_h(t,e,null,null)};vh.prototype.unmount=fp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qs(function(){_h(null,t,null,null)}),e[ur]=null}};function vh(t){this._internalRoot=t}vh.prototype.unstable_scheduleHydration=function(t){if(t){var e=jy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rr.length&&e!==0&&e<Rr[n].priority;n++);Rr.splice(n,0,t),n===0&&Fy(t)}};function pp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function T1(){}function BI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=xu(o);i.call(c)}}var o=o3(e,r,t,0,null,!1,!1,"",T1);return t._reactRootContainer=o,t[ur]=o.current,za(t.nodeType===8?t.parentNode:t),Qs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=xu(l);a.call(c)}}var l=hp(t,0,!1,null,null,!1,!1,"",T1);return t._reactRootContainer=l,t[ur]=l.current,za(t.nodeType===8?t.parentNode:t),Qs(function(){_h(e,l,n,r)}),l}function wh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=xu(o);a.call(l)}}_h(e,o,t,s)}else o=BI(n,e,t,s,r);return xu(o)}Oy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ia(e.pendingLanes);n!==0&&(b2(e,n|1),zt(e,je()),!(ae&6)&&(oo=je()+500,us()))}break;case 13:Qs(function(){var r=hr(t,1);if(r!==null){var s=Pt();In(r,t,1,s)}}),dp(t,1)}};D2=function(t){if(t.tag===13){var e=hr(t,134217728);if(e!==null){var n=Pt();In(e,t,134217728,n)}dp(t,134217728)}};My=function(t){if(t.tag===13){var e=Hr(t),n=hr(t,e);if(n!==null){var r=Pt();In(n,t,e,r)}dp(t,e)}};jy=function(){return fe};Vy=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};j0=function(t,e,n){switch(e){case"input":if(k0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=uh(r);if(!s)throw Error(P(90));my(r),k0(r,s)}}}break;case"textarea":_y(t,n);break;case"select":e=n.value,e!=null&&Fi(t,!!n.multiple,e,!1)}};Cy=ap;Iy=Qs;var WI={usingClientEntryPoint:!1,Events:[Sl,Ri,uh,xy,Ty,ap]},qo={findFiberByHostInstance:Rs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},HI={bundleType:qo.bundleType,version:qo.version,rendererPackageName:qo.rendererPackageName,rendererConfig:qo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ry(t),t===null?null:t.stateNode},findFiberByHostInstance:qo.findFiberByHostInstance||zI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yc.isDisabled&&yc.supportsFiber)try{oh=yc.inject(HI),Fn=yc}catch{}}Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WI;Zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pp(e))throw Error(P(200));return $I(t,e,null,n)};Zt.createRoot=function(t,e){if(!pp(t))throw Error(P(299));var n=!1,r="",s=a3;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=hp(t,1,!1,null,null,n,!1,r,s),t[ur]=e.current,za(t.nodeType===8?t.parentNode:t),new fp(e)};Zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=Ry(e),t=t===null?null:t.stateNode,t};Zt.flushSync=function(t){return Qs(t)};Zt.hydrate=function(t,e,n){if(!yh(e))throw Error(P(200));return wh(null,t,e,!0,n)};Zt.hydrateRoot=function(t,e,n){if(!pp(t))throw Error(P(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=a3;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=o3(e,null,t,1,n??null,s,!1,i,o),t[ur]=e.current,za(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new vh(e)};Zt.render=function(t,e,n){if(!yh(e))throw Error(P(200));return wh(null,t,e,!1,n)};Zt.unmountComponentAtNode=function(t){if(!yh(t))throw Error(P(40));return t._reactRootContainer?(Qs(function(){wh(null,null,t,!1,function(){t._reactRootContainer=null,t[ur]=null})}),!0):!1};Zt.unstable_batchedUpdates=ap;Zt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!yh(n))throw Error(P(200));if(t==null||t._reactInternals===void 0)throw Error(P(38));return wh(t,e,n,!1,r)};Zt.version="18.2.0-next-9e3b772b8-20220608";function l3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l3)}catch(t){console.error(t)}}l3(),oy.exports=Zt;var qI=oy.exports,C1=qI;T0.createRoot=C1.createRoot,T0.hydrateRoot=C1.hydrateRoot;const GI="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%20width='500'%20height='500'%3e%3cpath%20d='M41.9375%208.625C41.273438%208.648438%2040.664063%209%2040.3125%209.5625L21.5%2038.34375L9.3125%2027.8125C8.789063%2027.269531%208.003906%2027.066406%207.28125%2027.292969C6.5625%2027.515625%206.027344%2028.125%205.902344%2028.867188C5.777344%2029.613281%206.078125%2030.363281%206.6875%2030.8125L20.625%2042.875C21.0625%2043.246094%2021.640625%2043.410156%2022.207031%2043.328125C22.777344%2043.242188%2023.28125%2042.917969%2023.59375%2042.4375L43.6875%2011.75C44.117188%2011.121094%2044.152344%2010.308594%2043.78125%209.644531C43.410156%208.984375%2042.695313%208.589844%2041.9375%208.625Z'%20fill='%231EE97C'%20/%3e%3c/svg%3e",KI="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%20width='500'%20height='500'%3e%3cpath%20d='M9.15625%206.3125L6.3125%209.15625L22.15625%2025L6.21875%2040.96875L9.03125%2043.78125L25%2027.84375L40.9375%2043.78125L43.78125%2040.9375L27.84375%2025L43.6875%209.15625L40.84375%206.3125L25%2022.15625Z'%20fill='%23E91E25'%20/%3e%3c/svg%3e",QI="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M15%203C14.168432%203%2013.456063%203.5067238%2013.154297%204.2285156L2.3007812%2022.947266L2.3007812%2022.949219%20A%202%202%200%200%200%202%2024%20A%202%202%200%200%200%204%2026%20A%202%202%200%200%200%204.140625%2025.994141L4.1445312%2026L15%2026L25.855469%2026L25.859375%2025.992188%20A%202%202%200%200%200%2026%2026%20A%202%202%200%200%200%2028%2024%20A%202%202%200%200%200%2027.699219%2022.947266L27.683594%2022.919922%20A%202%202%200%200%200%2027.681641%2022.917969L16.845703%204.2285156C16.543937%203.5067238%2015.831568%203%2015%203%20z%20M%2013.787109%2011.359375L16.212891%2011.359375L16.011719%2017.832031L13.988281%2017.832031L13.787109%2011.359375%20z%20M%2015.003906%2019.810547C15.825906%2019.810547%2016.318359%2020.252813%2016.318359%2021.007812C16.318359%2021.748812%2015.825906%2022.189453%2015.003906%2022.189453C14.175906%2022.189453%2013.679688%2021.748813%2013.679688%2021.007812C13.679688%2020.252813%2014.174906%2019.810547%2015.003906%2019.810547%20z'%20fill='%23E91E25'%20/%3e%3c/svg%3e",YI="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M3,12v-2c0-0.386,0.223-0.738,0.572-0.904s0.762-0.115,1.062,0.13L15,17.708l10.367-8.482%20c0.299-0.245,0.712-0.295,1.062-0.13C26.779,9.261,27,9.614,27,10v2c0,0.3-0.135,0.584-0.367,0.774l-11,9%20c-0.369,0.301-0.898,0.301-1.267,0l-11-9C3.135,12.584,3,12.3,3,12z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",XI="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M17,3h2c0.386,0,0.738,0.223,0.904,0.572s0.115,0.762-0.13,1.062L11.292,15l8.482,10.367%20c0.245,0.299,0.295,0.712,0.13,1.062S19.386,27,19,27h-2c-0.3,0-0.584-0.135-0.774-0.367l-9-11c-0.301-0.369-0.301-0.898,0-1.267%20l9-11C16.416,3.135,16.7,3,17,3z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",JI="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M19,7h-6.774l0.564-1.551c0.604-1.662-0.134-3.512-1.716-4.302c-0.691-0.345-1.532-0.064-1.877,0.627L6.339,7.504%20C5.532,8.042,5,8.958,5,10v7c0,2.209,1.791,4,4,4h6.989c2.344,0,4.373-1.628,4.881-3.915L22,12v-2C22,8.343,20.657,7,19,7z'%20opacity='.35'%20fill='%232E2E2E'%20/%3e%3cpath%20d='M7,19.5c0-0.386,0-10.614,0-11C7,7.672,6.328,7,5.5,7S4,7.672,4,8.5c0,0.386,0,10.614,0,11C4,20.328,4.672,21,5.5,21S7,20.328,7,19.5z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",ZI="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M12,6h4V3.706c0-0.615,0.742-0.924,1.178-0.491l4.104,4.075c0.395,0.391,0.395,1.03,0,1.421l-4.104,4.075C16.742,13.218,16,12.908,16,12.294V10h-4c-4.351,0-5,2.661-5,4H3C3,10.31,5.357,6,12,6z'%20opacity='.35'%20fill='%232E2E2E'%20/%3e%3cpath%20d='M8,22c0.513,0,1.024-0.196,1.415-0.587c0.78-0.781,0.78-2.046,0-2.827C8.786,17.951,7,15.753,7,14c0-6.845,5-8,5-8c-6.643,0-9,4.31-9,8c0,3.726,3.22,7.049,3.587,7.415C6.978,21.805,7.488,22,8,22z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",eS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M12,27h-2c-0.386,0-0.738-0.223-0.904-0.572s-0.115-0.762,0.13-1.062L17.708,15L9.226,4.633%20c-0.245-0.299-0.295-0.712-0.13-1.062S9.614,3,10,3h2c0.3,0,0.584,0.135,0.774,0.367l9,11c0.301,0.369,0.301,0.898,0,1.267l-9,11%20C12.584,26.865,12.3,27,12,27z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",tS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M11.5%206C8.4802259%206%206%208.4802259%206%2011.5L6%2036.5C6%2039.519774%208.4802259%2042%2011.5%2042L36.5%2042C39.519774%2042%2042%2039.519774%2042%2036.5L42%2011.5C42%208.4802259%2039.519774%206%2036.5%206L11.5%206%20z%20M%2011.5%209L36.5%209C37.898226%209%2039%2010.101774%2039%2011.5L39%2036.5C39%2037.898226%2037.898226%2039%2036.5%2039L11.5%2039C10.101774%2039%209%2037.898226%209%2036.5L9%2011.5C9%2010.101774%2010.101774%209%2011.5%209%20z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",nS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%204C11.832031%204%208.152344%206.113281%206%209.34375L6%206L4%206L4%2013L11%2013L11%2011L7.375%2011C9.101563%208.019531%2012.296875%206%2016%206C21.535156%206%2026%2010.464844%2026%2016C26%2021.535156%2021.535156%2026%2016%2026C10.464844%2026%206%2021.535156%206%2016L4%2016C4%2022.617188%209.382813%2028%2016%2028C22.617188%2028%2028%2022.617188%2028%2016C28%209.382813%2022.617188%204%2016%204%20Z%20M%2015%208L15%2017L22%2017L22%2015L17%2015L17%208Z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",rS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M10%202L9%203L5%203C4.4%203%204%203.4%204%204C4%204.6%204.4%205%205%205L7%205L17%205L19%205C19.6%205%2020%204.6%2020%204C20%203.4%2019.6%203%2019%203L15%203L14%202L10%202%20z%20M%205%207L5%2020C5%2021.1%205.9%2022%207%2022L17%2022C18.1%2022%2019%2021.1%2019%2020L19%207L5%207%20z%20M%209%209C9.6%209%2010%209.4%2010%2010L10%2019C10%2019.6%209.6%2020%209%2020C8.4%2020%208%2019.6%208%2019L8%2010C8%209.4%208.4%209%209%209%20z%20M%2015%209C15.6%209%2016%209.4%2016%2010L16%2019C16%2019.6%2015.6%2020%2015%2020C14.4%2020%2014%2019.6%2014%2019L14%2010C14%209.4%2014.4%209%2015%209%20z'%20fill='%23FF4A33'%20/%3e%3c/svg%3e",sS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M11%203H13V21H11z'%20fill='%230F0F0F'%20/%3e%3cpath%20d='M3%2011H21V13H3z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",iS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20128%20128'%20width='512'%20height='512'%3e%3cpath%20d='M79.335938%2015.667969C78.064453%2015.622266%2076.775%2015.762109%2075.5%2016.099609C72.1%2016.999609%2069.299609%2019.199219%2067.599609%2022.199219L64%2028.699219C63.2%2030.099219%2063.699609%2032.000781%2065.099609%2032.800781L82.400391%2042.800781C82.900391%2043.100781%2083.400391%2043.199219%2083.900391%2043.199219C84.200391%2043.199219%2084.399219%2043.199609%2084.699219%2043.099609C85.499219%2042.899609%2086.1%2042.399219%2086.5%2041.699219L90.199219%2035.199219C91.899219%2032.199219%2092.4%2028.700781%2091.5%2025.300781C90.6%2021.900781%2088.400391%2019.100391%2085.400391%2017.400391C83.525391%2016.337891%2081.455078%2015.744141%2079.335938%2015.667969%20z%20M%2060.097656%2038.126953C59.128906%2038.201172%2058.199219%2038.724609%2057.699219%2039.599609L27.5%2092C24.1%2097.8%2022.200781%20104.30039%2021.800781%20110.90039L21%20123.80078C20.9%20124.90078%2021.5%20125.99961%2022.5%20126.59961C23%20126.89961%2023.5%20127%2024%20127C24.6%20127%2025.199219%20126.8%2025.699219%20126.5L36.5%20119.40039C42%20115.70039%2046.7%20110.8%2050%20105L80.300781%2052.599609C81.100781%2051.199609%2080.599219%2049.3%2079.199219%2048.5C77.799219%2047.7%2075.899609%2048.199609%2075.099609%2049.599609L44.800781%20102C41.900781%20106.9%2037.899609%20111.20039%2033.099609%20114.40039L27.300781%20118.19922L27.699219%20111.30078C27.999219%20105.60078%2029.699609%20100%2032.599609%2095L62.900391%2042.599609C63.700391%2041.199609%2063.200781%2039.3%2061.800781%2038.5C61.275781%2038.2%2060.678906%2038.082422%2060.097656%2038.126953%20z%20M%2049%20121C47.3%20121%2046%20122.3%2046%20124C46%20125.7%2047.3%20127%2049%20127L89%20127C90.7%20127%2092%20125.7%2092%20124C92%20122.3%2090.7%20121%2089%20121L49%20121%20z%20M%20104%20121%20A%203%203%200%200%200%20101%20124%20A%203%203%200%200%200%20104%20127%20A%203%203%200%200%200%20107%20124%20A%203%203%200%200%200%20104%20121%20z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",oS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M5%203C3.9057453%203%203%203.9057453%203%205L3%2019C3%2020.094255%203.9057453%2021%205%2021L19%2021C20.094255%2021%2021%2020.094255%2021%2019L21%207L17%203L5%203%20z%20M%205%205L16.171875%205L19%207.828125L19%2019L5%2019L5%205%20z%20M%207%207L7%2010L15%2010L15%207L7%207%20z%20M%2011.5%2012%20A%202.5%202.5%200%200%200%209%2014.5%20A%202.5%202.5%200%200%200%2011.5%2017%20A%202.5%202.5%200%200%200%2014%2014.5%20A%202.5%202.5%200%200%200%2011.5%2012%20z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",aS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M27,18v2c0,0.386-0.223,0.738-0.572,0.904c-0.349,0.166-0.762,0.115-1.062-0.13L15,12.292L4.633,20.774%20c-0.299,0.245-0.712,0.295-1.062,0.13C3.221,20.739,3,20.386,3,20v-2c0-0.3,0.135-0.584,0.367-0.774l11-9%20c0.369-0.301,0.898-0.301,1.267,0l11,9C26.865,17.416,27,17.7,27,18z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",lS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M15%200C13.35499%200%2012%201.3549904%2012%203L8%203C6.3550302%203%205%204.3550302%205%206L5%2024C5%2025.64497%206.3550302%2027%208%2027L22%2027C23.64497%2027%2025%2025.64497%2025%2024L25%206C25%204.3550302%2023.64497%203%2022%203L18%203C18%201.3549904%2016.64501%200%2015%200%20z%20M%2015%202C15.564129%202%2016%202.4358706%2016%203C16%203.5641294%2015.564129%204%2015%204C14.435871%204%2014%203.5641294%2014%203C14%202.4358706%2014.435871%202%2015%202%20z%20M%208%205L12%205L12%206C12%206.552%2012.448%207%2013%207L17%207C17.552%207%2018%206.552%2018%206L18%205L22%205C22.56503%205%2023%205.4349698%2023%206L23%2024C23%2024.56503%2022.56503%2025%2022%2025L8%2025C7.4349698%2025%207%2024.56503%207%2024L7%206C7%205.4349698%207.4349698%205%208%205%20z%20M%2011%2011%20A%201.0001%201.0001%200%201%200%2011%2013L19%2013%20A%201.0001%201.0001%200%201%200%2019%2011L11%2011%20z%20M%2011%2015%20A%201.0001%201.0001%200%201%200%2011%2017L16%2017%20A%201.0001%201.0001%200%201%200%2016%2015L11%2015%20z%20M%2011%2019%20A%201.0001%201.0001%200%201%200%2011%2021L19%2021%20A%201.0001%201.0001%200%201%200%2019%2019L11%2019%20z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",cS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16.03125%204C14.921875%204%2013.8125%204.15625%2012.71875%204.46875L11.9375%204.6875L12%205.5C12.042969%206.238281%2011.679688%206.949219%2011%207.34375C10.320313%207.738281%209.523438%207.6875%208.90625%207.28125L8.25%206.84375L7.65625%207.375C6.023438%208.957031%204.910156%2010.957031%204.375%2013.09375L4.1875%2013.875L4.875%2014.21875C5.535156%2014.550781%206%2015.210938%206%2016C6%2016.789063%205.535156%2017.449219%204.875%2017.78125L4.15625%2018.125L4.375%2018.90625C4.636719%2019.957031%205.019531%2021.007813%205.59375%2022C6.167969%2022.992188%206.878906%2023.871094%207.65625%2024.625L8.25%2025.1875L8.90625%2024.75C9.523438%2024.34375%2010.316406%2024.261719%2011%2024.65625C11.683594%2025.050781%2012.042969%2025.761719%2012%2026.5L11.9375%2027.3125L12.71875%2027.53125C14.109375%2027.925781%2015.558594%2028.039063%2017%2027.90625L17%2032L32%2032L32%2018L27.59375%2018L27.125%2017.78125C26.464844%2017.449219%2026%2016.789063%2026%2016C26%2015.210938%2026.464844%2014.550781%2027.125%2014.21875L27.84375%2013.875L27.625%2013.09375C27.363281%2012.042969%2026.980469%2010.992188%2026.40625%2010C25.832031%209.007813%2025.121094%208.128906%2024.34375%207.375L23.78125%206.8125L23.09375%207.28125C22.476563%207.6875%2021.683594%207.738281%2021%207.34375L20.96875%207.3125C20.3125%206.914063%2019.957031%206.222656%2020%205.5L20.0625%204.6875L19.28125%204.46875C18.222656%204.167969%2017.140625%204%2016.03125%204%20Z%20M%2016%206.09375C16.742188%206.09375%2017.496094%206.179688%2018.21875%206.34375C18.429688%207.4375%2018.960938%208.460938%2020%209.0625C21.050781%209.667969%2022.21875%209.597656%2023.28125%209.21875C23.785156%209.757813%2024.273438%2010.335938%2024.65625%2011C25.042969%2011.671875%2025.285156%2012.378906%2025.5%2013.09375C24.648438%2013.824219%2024%2014.792969%2024%2016C24%2016.730469%2024.214844%2017.410156%2024.5625%2018L21.65625%2018C21.882813%2017.378906%2022%2016.703125%2022%2016C22%2012.699219%2019.300781%2010%2016%2010C12.699219%2010%2010%2012.699219%2010%2016C10%2019.300781%2012.699219%2022%2016%2022C16.34375%2022%2016.671875%2021.960938%2017%2021.90625L17%2025.90625C15.910156%2026.007813%2014.832031%2025.921875%2013.78125%2025.6875C13.574219%2024.582031%2013.050781%2023.542969%2012%2022.9375C10.949219%2022.332031%209.78125%2022.402344%208.71875%2022.78125C8.210938%2022.238281%207.726563%2021.664063%207.34375%2021C6.957031%2020.328125%206.714844%2019.621094%206.5%2018.90625C7.351563%2018.175781%208%2017.207031%208%2016C8%2014.792969%207.351563%2013.824219%206.5%2013.09375C6.933594%2011.667969%207.710938%2010.371094%208.75%209.25C9.800781%209.609375%2010.960938%209.660156%2012%209.0625C13.039063%208.464844%2013.570313%207.4375%2013.78125%206.34375C14.523438%206.175781%2015.257813%206.09375%2016%206.09375%20Z%20M%2016%2012C18.21875%2012%2020%2013.78125%2020%2016C20%2016.730469%2019.785156%2017.40625%2019.4375%2018L17%2018L17%2019.84375C16.675781%2019.933594%2016.351563%2020%2016%2020C13.78125%2020%2012%2018.21875%2012%2016C12%2013.78125%2013.78125%2012%2016%2012%20Z%20M%2019%2020L30%2020L30%2021L19%2021%20Z%20M%2019%2023L30%2023L30%2030L19%2030%20Z%20M%2026.28125%2023.78125L24%2026.0625L22.71875%2024.78125L21.28125%2026.21875L23.28125%2028.21875L24%2028.90625L24.71875%2028.21875L27.71875%2025.21875Z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",uS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M4%207L4%209L28%209L28%207%20Z%20M%204%2015L4%2017L28%2017L28%2015%20Z%20M%204%2023L4%2025L28%2025L28%2023Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",hS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%202.59375L15.28125%203.28125L2.28125%2016.28125L3.71875%2017.71875L5%2016.4375L5%2028L14%2028L14%2018L18%2018L18%2028L27%2028L27%2016.4375L28.28125%2017.71875L29.71875%2016.28125L16.71875%203.28125%20Z%20M%2016%205.4375L25%2014.4375L25%2026L20%2026L20%2016L12%2016L12%2026L7%2026L7%2014.4375Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",dS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M20.5%204C18.203405%204%2016.305701%205.7666235%2016.050781%208L12.5%208C10.032499%208%208%2010.032499%208%2012.5L8%2039.5C8%2041.967501%2010.032499%2044%2012.5%2044L35.5%2044C37.967501%2044%2040%2041.967501%2040%2039.5L40%2012.5C40%2010.032499%2037.967501%208%2035.5%208L31.949219%208C31.694299%205.7666235%2029.796595%204%2027.5%204L20.5%204%20z%20M%2020.5%207L27.5%207C28.346499%207%2029%207.6535009%2029%208.5C29%209.3464991%2028.346499%2010%2027.5%2010L20.5%2010C19.653501%2010%2019%209.3464991%2019%208.5C19%207.6535009%2019.653501%207%2020.5%207%20z%20M%2012.5%2011L16.769531%2011C17.581237%2012.2019%2018.954719%2013%2020.5%2013L27.5%2013C29.045281%2013%2030.418763%2012.2019%2031.230469%2011L35.5%2011C36.346499%2011%2037%2011.653501%2037%2012.5L37%2039.5C37%2040.346499%2036.346499%2041%2035.5%2041L12.5%2041C11.653501%2041%2011%2040.346499%2011%2039.5L11%2012.5C11%2011.653501%2011.653501%2011%2012.5%2011%20z%20M%2032.470703%2018.986328%20A%201.50015%201.50015%200%200%200%2031.439453%2019.439453L28.5%2022.378906L27.560547%2021.439453%20A%201.50015%201.50015%200%201%200%2025.439453%2023.560547L27.439453%2025.560547%20A%201.50015%201.50015%200%200%200%2029.560547%2025.560547L33.560547%2021.560547%20A%201.50015%201.50015%200%200%200%2032.470703%2018.986328%20z%20M%2015.5%2021%20A%201.50015%201.50015%200%201%200%2015.5%2024L21.5%2024%20A%201.50015%201.50015%200%201%200%2021.5%2021L15.5%2021%20z%20M%2032.486328%2027.978516%20A%201.50015%201.50015%200%200%200%2031.439453%2028.439453L30%2029.878906L28.560547%2028.439453%20A%201.50015%201.50015%200%200%200%2027.484375%2027.984375%20A%201.50015%201.50015%200%200%200%2026.439453%2030.560547L27.878906%2032L26.439453%2033.439453%20A%201.50015%201.50015%200%201%200%2028.560547%2035.560547L30%2034.121094L31.439453%2035.560547%20A%201.50015%201.50015%200%201%200%2033.560547%2033.439453L32.121094%2032L33.560547%2030.560547%20A%201.50015%201.50015%200%200%200%2032.486328%2027.978516%20z%20M%2015.5%2030%20A%201.50015%201.50015%200%201%200%2015.5%2033L21.5%2033%20A%201.50015%201.50015%200%201%200%2021.5%2030L15.5%2030%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",fS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%204C9.382813%204%204%209.382813%204%2016C4%2022.617188%209.382813%2028%2016%2028C22.617188%2028%2028%2022.617188%2028%2016C28%209.382813%2022.617188%204%2016%204%20Z%20M%2016%206C21.535156%206%2026%2010.464844%2026%2016C26%2021.535156%2021.535156%2026%2016%2026C10.464844%2026%206%2021.535156%206%2016C6%2010.464844%2010.464844%206%2016%206%20Z%20M%2016%2010C13.800781%2010%2012%2011.800781%2012%2014L14%2014C14%2012.882813%2014.882813%2012%2016%2012C17.117188%2012%2018%2012.882813%2018%2014C18%2014.765625%2017.507813%2015.445313%2016.78125%2015.6875L16.375%2015.8125C15.558594%2016.082031%2015%2016.863281%2015%2017.71875L15%2019L17%2019L17%2017.71875L17.40625%2017.59375C18.945313%2017.082031%2020%2015.621094%2020%2014C20%2011.800781%2018.199219%2010%2016%2010%20Z%20M%2015%2020L15%2022L17%2022L17%2020Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",pS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20x='0'%20y='0'%20viewBox='0%200%20128%20128'%20width='512'%20height='512'%3e%3ccircle%20cx='64'%20cy='64'%20r='55'%20fill='%23fff'%20/%3e%3cpath%20fill='%23444b54'%20d='M64,122C32,122,6,96,6,64S32,6,64,6s58,26,58,58S96,122,64,122z%20M64,12c-28.7,0-52,23.3-52,52s23.3,52,52,52%20s52-23.3,52-52S92.7,12,64,12z'%20/%3e%3cpath%20fill='%23444b54'%20d='M64,90c-1.7,0-3-1.3-3-3V61c0-1.7,1.3-3,3-3s3,1.3,3,3v26C67,88.7,65.7,90,64,90z'%20/%3e%3cpath%20fill='%23444b54'%20d='M64,49c-1.7,0-3-1.3-3-3v-5c0-1.7,1.3-3,3-3s3,1.3,3,3v5C67,47.7,65.7,49,64,49z'%20/%3e%3c/svg%3e",mS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M6%203L6%2029L17.765625%2029C19.233126%2030.826376%2021.480367%2032%2024%2032C26.396%2032%2028.534%2030.929859%2030%2029.255859L30%2032L32%2032L32%2026L26%2026L26%2028L28.445312%2028C27.347313%2029.221%2025.768%2030%2024%2030C20.691%2030%2018%2027.309%2018%2024C18%2020.691%2020.691%2018%2024%2018C27.309%2018%2030%2020.691%2030%2024L32%2024C32%2020.280606%2029.444687%2017.153349%2026%2016.261719L26%209.5859375L19.414062%203L6%203%20z%20M%208%205L18%205L18%2011L24%2011L24%2016C21.979283%2016%2020.136244%2016.75962%2018.726562%2018L11%2018L11%2020L17.082031%2020C16.722543%2020.619242%2016.445366%2021.290505%2016.261719%2022L11%2022L11%2024L16%2024C16%2025.060938%2016.211142%2026.072669%2016.587891%2027L8%2027L8%205%20z%20M%2020%206.4140625L22.585938%209L20%209L20%206.4140625%20z%20M%2011%2014L11%2016L21%2016L21%2014L11%2014%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",gS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M4.0097656%203C2.9179106%203%202.0097656%203.9049841%202.0097656%204.9980469L2%2023L6%2019L20%2019C21.093063%2019%2022%2018.093063%2022%2017L22%205C22%203.9069372%2021.093063%203%2020%203L4.0097656%203%20z%20M%204.0097656%205L20%205L20%2017L5.171875%2017L4.0039062%2018.167969L4.0097656%205%20z%20M%2011%207L11%209L13%209L13%207L11%207%20z%20M%2011%2011L11%2015L13%2015L13%2011L11%2011%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",_S="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='480'%20height='480'%3e%3cpath%20d='M11%203L11%2011L3%2011L3%2013L11%2013L11%2021L13%2021L13%2013L21%2013L21%2011L13%2011L13%203L11%203%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",vS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M11%203H13V21H11z'%20transform='rotate(90%2012%2012)'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",yS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='480'%20height='480'%3e%3cpath%20d='M18%202%20A%203%203%200%200%200%2015%205%20A%203%203%200%200%200%2015.054688%205.5605469L7.9394531%209.7109375%20A%203%203%200%200%200%206%209%20A%203%203%200%200%200%203%2012%20A%203%203%200%200%200%206%2015%20A%203%203%200%200%200%207.9355469%2014.287109L15.054688%2018.439453%20A%203%203%200%200%200%2015%2019%20A%203%203%200%200%200%2018%2022%20A%203%203%200%200%200%2021%2019%20A%203%203%200%200%200%2018%2016%20A%203%203%200%200%200%2016.0625%2016.712891L8.9453125%2012.560547%20A%203%203%200%200%200%209%2012%20A%203%203%200%200%200%208.9453125%2011.439453L16.060547%207.2890625%20A%203%203%200%200%200%2018%208%20A%203%203%200%200%200%2021%205%20A%203%203%200%200%200%2018%202%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",wS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%208C7.664063%208%201.25%2015.34375%201.25%2015.34375L0.65625%2016L1.25%2016.65625C1.25%2016.65625%207.097656%2023.324219%2014.875%2023.9375C15.246094%2023.984375%2015.617188%2024%2016%2024C16.382813%2024%2016.753906%2023.984375%2017.125%2023.9375C24.902344%2023.324219%2030.75%2016.65625%2030.75%2016.65625L31.34375%2016L30.75%2015.34375C30.75%2015.34375%2024.335938%208%2016%208%20Z%20M%2016%2010C18.203125%2010%2020.234375%2010.601563%2022%2011.40625C22.636719%2012.460938%2023%2013.675781%2023%2015C23%2018.613281%2020.289063%2021.582031%2016.78125%2021.96875C16.761719%2021.972656%2016.738281%2021.964844%2016.71875%2021.96875C16.480469%2021.980469%2016.242188%2022%2016%2022C15.734375%2022%2015.476563%2021.984375%2015.21875%2021.96875C11.710938%2021.582031%209%2018.613281%209%2015C9%2013.695313%209.351563%2012.480469%209.96875%2011.4375L9.9375%2011.4375C11.71875%2010.617188%2013.773438%2010%2016%2010%20Z%20M%2016%2012C14.34375%2012%2013%2013.34375%2013%2015C13%2016.65625%2014.34375%2018%2016%2018C17.65625%2018%2019%2016.65625%2019%2015C19%2013.34375%2017.65625%2012%2016%2012%20Z%20M%207.25%2012.9375C7.09375%2013.609375%207%2014.285156%207%2015C7%2016.753906%207.5%2018.394531%208.375%2019.78125C5.855469%2018.324219%204.105469%2016.585938%203.53125%2016C4.011719%2015.507813%205.351563%2014.203125%207.25%2012.9375%20Z%20M%2024.75%2012.9375C26.648438%2014.203125%2027.988281%2015.507813%2028.46875%2016C27.894531%2016.585938%2026.144531%2018.324219%2023.625%2019.78125C24.5%2018.394531%2025%2016.753906%2025%2015C25%2014.285156%2024.90625%2013.601563%2024.75%2012.9375Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",ES="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M11.5%206C8.4802259%206%206%208.4802259%206%2011.5L6%2017.5%20A%201.50015%201.50015%200%201%200%209%2017.5L9%2011.5C9%2010.101774%2010.101774%209%2011.5%209L17.5%209%20A%201.50015%201.50015%200%201%200%2017.5%206L11.5%206%20z%20M%2030.5%206%20A%201.50015%201.50015%200%201%200%2030.5%209L36.5%209C37.898226%209%2039%2010.101774%2039%2011.5L39%2017.5%20A%201.50015%201.50015%200%201%200%2042%2017.5L42%2011.5C42%208.4802259%2039.519774%206%2036.5%206L30.5%206%20z%20M%207.4765625%2028.978516%20A%201.50015%201.50015%200%200%200%206%2030.5L6%2036.5C6%2039.519774%208.4802259%2042%2011.5%2042L17.5%2042%20A%201.50015%201.50015%200%201%200%2017.5%2039L11.5%2039C10.101774%2039%209%2037.898226%209%2036.5L9%2030.5%20A%201.50015%201.50015%200%200%200%207.4765625%2028.978516%20z%20M%2040.476562%2028.978516%20A%201.50015%201.50015%200%200%200%2039%2030.5L39%2036.5C39%2037.898226%2037.898226%2039%2036.5%2039L30.5%2039%20A%201.50015%201.50015%200%201%200%2030.5%2042L36.5%2042C39.519774%2042%2042%2039.519774%2042%2036.5L42%2030.5%20A%201.50015%201.50015%200%200%200%2040.476562%2028.978516%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",xS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M19%203C13.488281%203%209%207.488281%209%2013C9%2015.394531%209.839844%2017.589844%2011.25%2019.3125L3.28125%2027.28125L4.71875%2028.71875L12.6875%2020.75C14.410156%2022.160156%2016.605469%2023%2019%2023C24.511719%2023%2029%2018.511719%2029%2013C29%207.488281%2024.511719%203%2019%203%20Z%20M%2019%205C23.429688%205%2027%208.570313%2027%2013C27%2017.429688%2023.429688%2021%2019%2021C14.570313%2021%2011%2017.429688%2011%2013C11%208.570313%2014.570313%205%2019%205Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",TS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M9%202C5.1458514%202%202%205.1458514%202%209C2%2012.854149%205.1458514%2016%209%2016C10.747998%2016%2012.345009%2015.348024%2013.574219%2014.28125L14%2014.707031L14%2016L19.585938%2021.585938C20.137937%2022.137937%2021.033938%2022.137938%2021.585938%2021.585938C22.137938%2021.033938%2022.137938%2020.137938%2021.585938%2019.585938L16%2014L14.707031%2014L14.28125%2013.574219C15.348024%2012.345009%2016%2010.747998%2016%209C16%205.1458514%2012.854149%202%209%202%20z%20M%209%204C11.773268%204%2014%206.2267316%2014%209C14%2011.773268%2011.773268%2014%209%2014C6.2267316%2014%204%2011.773268%204%209C4%206.2267316%206.2267316%204%209%204%20z'%20fill='%23F0F0F0'%20/%3e%3c/svg%3e",CS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%20width='500'%20height='500'%3e%3cpath%20d='M9.15625%206.3125L6.3125%209.15625L22.15625%2025L6.21875%2040.96875L9.03125%2043.78125L25%2027.84375L40.9375%2043.78125L43.78125%2040.9375L27.84375%2025L43.6875%209.15625L40.84375%206.3125L25%2022.15625Z'%20fill='%23313131'%20/%3e%3c/svg%3e",IS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M18.5%205C15.480226%205%2013%207.4802259%2013%2010.5L13%2032.5C13%2035.519774%2015.480226%2038%2018.5%2038L34.5%2038C37.519774%2038%2040%2035.519774%2040%2032.5L40%2010.5C40%207.4802259%2037.519774%205%2034.5%205L18.5%205%20z%20M%2018.5%208L34.5%208C35.898226%208%2037%209.1017741%2037%2010.5L37%2032.5C37%2033.898226%2035.898226%2035%2034.5%2035L18.5%2035C17.101774%2035%2016%2033.898226%2016%2032.5L16%2010.5C16%209.1017741%2017.101774%208%2018.5%208%20z%20M%2011%2010L9.78125%2010.8125C8.66825%2011.5545%208%2012.803625%208%2014.140625L8%2033.5C8%2038.747%2012.253%2043%2017.5%2043L30.859375%2043C32.197375%2043%2033.4465%2042.33175%2034.1875%2041.21875L35%2040L17.5%2040C13.91%2040%2011%2037.09%2011%2033.5L11%2010%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",SS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='480'%20height='480'%20viewBox='0%200%2048%2048'%3e%3cpath%20fill='%23FFC107'%20d='M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z'%20/%3e%3cpath%20fill='%23FF3D00'%20d='M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z'%20/%3e%3cpath%20fill='%234CAF50'%20d='M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z'%20/%3e%3cpath%20fill='%231976D2'%20d='M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z'%20/%3e%3c/svg%3e",AS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%204C10.886719%204%206.617188%207.160156%204.875%2011.625L6.71875%2012.375C8.175781%208.640625%2011.710938%206%2016%206C19.242188%206%2022.132813%207.589844%2023.9375%2010L20%2010L20%2012L27%2012L27%205L25%205L25%208.09375C22.808594%205.582031%2019.570313%204%2016%204%20Z%20M%2025.28125%2019.625C23.824219%2023.359375%2020.289063%2026%2016%2026C12.722656%2026%209.84375%2024.386719%208.03125%2022L12%2022L12%2020L5%2020L5%2027L7%2027L7%2023.90625C9.1875%2026.386719%2012.394531%2028%2016%2028C21.113281%2028%2025.382813%2024.839844%2027.125%2020.375Z'%20fill='%23313131'%20/%3e%3c/svg%3e",RS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2026%2026'%20width='208'%20height='208'%3e%3cpath%20d='M6%200C4.34375%200%203%201.34375%203%203L3%2023C3%2024.65625%204.34375%2026%206%2026L20%2026C21.65625%2026%2023%2024.65625%2023%2023L23%2017.8125L21%2019.5625L21%2023C21%2023.550781%2020.550781%2024%2020%2024L6%2024C5.449219%2024%205%2023.550781%205%2023L5%203C5%202.449219%205.449219%202%206%202L20%202C20.550781%202%2021%202.449219%2021%203L21%206.4375L23%208.1875L23%203C23%201.34375%2021.65625%200%2020%200%20Z%20M%2016.5%206.46875C16.25%206.542969%2016%206.796875%2016%207.46875L16%2010L10%2010C9.449219%2010%209%2010.449219%209%2011L9%2015C9%2015.550781%209.449219%2016%2010%2016L16%2016L16%2018.5C16%2019.78125%2017%2019.5%2017%2019.5L24.5%2013L17%206.5C17%206.5%2016.75%206.394531%2016.5%206.46875Z'%20fill='%23313131'%20/%3e%3c/svg%3e",NS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M12.5%204C10.032499%204%208%206.0324991%208%208.5L8%2039.5C8%2041.967501%2010.032499%2044%2012.5%2044L35.5%2044C37.967501%2044%2040%2041.967501%2040%2039.5L40%2018.5%20A%201.50015%201.50015%200%200%200%2039.560547%2017.439453L39.544922%2017.423828L26.560547%204.4394531%20A%201.50015%201.50015%200%200%200%2025.5%204L12.5%204%20z%20M%2012.5%207L24%207L24%2015.5C24%2017.967501%2026.032499%2020%2028.5%2020L37%2020L37%2039.5C37%2040.346499%2036.346499%2041%2035.5%2041L12.5%2041C11.653501%2041%2011%2040.346499%2011%2039.5L11%208.5C11%207.6535009%2011.653501%207%2012.5%207%20z%20M%2027%209.1210938L34.878906%2017L28.5%2017C27.653501%2017%2027%2016.346499%2027%2015.5L27%209.1210938%20z%20M%2019%2022.998047C18.391%2022.998047%2017.841328%2023.365687%2017.611328%2023.929688L13.111328%2034.929688C12.797328%2035.696688%2013.164641%2036.573719%2013.931641%2036.886719C14.698641%2037.202719%2015.575672%2036.834406%2015.888672%2036.066406L16.326172%2034.998047L21.673828%2034.998047L22.111328%2036.066406C22.349328%2036.647406%2022.909%2036.998047%2023.5%2036.998047C23.689%2036.998047%2023.881359%2036.963719%2024.068359%2036.886719C24.834359%2036.573719%2025.202672%2035.696688%2024.888672%2034.929688L20.388672%2023.929688C20.158672%2023.365688%2019.609%2022.998047%2019%2022.998047%20z%20M%2030.476562%2023.978516%20A%201.50015%201.50015%200%200%200%2029%2025.5L29%2027L27.5%2027%20A%201.50015%201.50015%200%201%200%2027.5%2030L29%2030L29%2031.5%20A%201.50015%201.50015%200%201%200%2032%2031.5L32%2030L33.5%2030%20A%201.50015%201.50015%200%201%200%2033.5%2027L32%2027L32%2025.5%20A%201.50015%201.50015%200%200%200%2030.476562%2023.978516%20z%20M%2019%2028.460938L20.447266%2031.998047L17.552734%2031.998047L19%2028.460938%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",kS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M26.886719%203.0234375C26.437415%203.0492805%2025.990861%203.1581308%2025.574219%203.3847656C24.740935%203.8380352%2024.23601%204.6408958%2023.933594%205.484375%20A%201.50015%201.50015%200%200%200%2023.931641%205.4863281C23.856851%205.6965582%2023.895729%205.5996163%2023.880859%205.6503906C23.865989%205.7011646%2023.846326%205.768146%2023.822266%205.8515625C23.774136%206.0183955%2023.709041%206.2482122%2023.630859%206.5214844C23.474496%207.0680287%2023.269926%207.787416%2023.066406%208.5019531C22.659368%209.9310274%2022.255859%2011.345703%2022.255859%2011.345703%20A%201.50015%201.50015%200%200%200%2022.255859%2011.349609C22.141471%2011.755416%2022.046189%2011.970637%2022.005859%2012.033203%20A%201.50015%201.50015%200%200%200%2022.003906%2012.037109C20.528039%2014.338252%2018.938262%2016.655605%2017.394531%2019L10.5%2019C8.0324991%2019%206%2021.032499%206%2023.5L6%2039.5C6%2041.967501%208.0324991%2044%2010.5%2044L14.5%2044C15.757335%2044%2016.892811%2043.465209%2017.712891%2042.621094C20.020827%2043.120886%2022.596814%2043.674636%2024.695312%2044.117188C25.795053%2044.349109%2026.761579%2044.550006%2027.490234%2044.697266C28.21796%2044.844337%2028.488997%2044.922925%2028.96875%2044.96875C29.276882%2044.99849%2029.582707%2045.013672%2029.884766%2045.013672C34.166546%2045.013672%2037.951276%2042.101357%2039.046875%2037.871094C39.884581%2034.63323%2041.600002%2027.921603%2041.607422%2027.892578C41.746989%2027.37849%2041.941717%2026.687301%2041.986328%2025.859375%20A%201.50015%201.50015%200%200%200%2041.986328%2025.857422C42.082078%2024.068723%2041.461123%2022.328247%2040.242188%2021.039062%20A%201.50015%201.50015%200%200%200%2040.242188%2021.037109C39.003328%2019.728222%2037.266509%2019.003801%2035.439453%2019%20A%201.50015%201.50015%200%200%200%2035.435547%2019L31.466797%2019C31.818422%2017.742495%2032.16537%2016.527227%2032.417969%2015.541016%20A%201.50015%201.50015%200%200%200%2032.417969%2015.539062C33.021899%2013.169223%2033.163006%2011.052777%2032.796875%209.0214844%20A%201.50015%201.50015%200%200%200%2032.796875%209.0195312C32.612962%208.0064557%2032.266053%206.5283049%2031.216797%205.1679688C30.454227%204.1798868%2029.406708%203.4604803%2028.21875%203.1621094%20A%201.50015%201.50015%200%200%200%2028.214844%203.1621094C27.787706%203.0556602%2027.336023%202.9975943%2026.886719%203.0234375%20z%20M%2027.083984%206.0097656C27.153229%206.0089389%2027.277677%206.0200946%2027.488281%206.0722656C28.020323%206.2058951%2028.434367%206.4720819%2028.841797%207C29.43854%207.7736637%2029.69161%208.705806%2029.845703%209.5546875C30.125167%2011.106826%2030.039576%2012.7275%2029.511719%2014.798828C29.151131%2016.206389%2028.056641%2020.09375%2028.056641%2020.09375%20A%201.50015%201.50015%200%200%200%2029.5%2022L35.435547%2022C36.491612%2022.0027%2037.39379%2022.393048%2038.0625%2023.099609C38.717564%2023.792425%2039.04448%2024.683965%2038.990234%2025.697266C38.966844%2026.13134%2038.851324%2026.59751%2038.712891%2027.107422%20A%201.50015%201.50015%200%200%200%2038.707031%2027.128906C38.707031%2027.128906%2036.979062%2033.886003%2036.142578%2037.119141C35.380177%2040.062877%2032.818985%2042.013672%2029.884766%2042.013672C29.676824%2042.013672%2029.467681%2042.002682%2029.257812%2041.982422%20A%201.50015%201.50015%200%200%200%2029.255859%2041.982422C29.484761%2042.004222%2028.797548%2041.902023%2028.083984%2041.757812C27.370421%2041.613604%2026.409589%2041.412593%2025.314453%2041.181641C23.401221%2040.778161%2021.082509%2040.278628%2018.935547%2039.814453C18.94375%2039.705129%2019%2039.611242%2019%2039.5L19%2022.011719C20.770748%2019.246238%2022.705347%2016.498683%2024.527344%2013.658203L24.529297%2013.65625C24.857875%2013.14567%2025.005183%2012.649533%2025.142578%2012.162109C25.143578%2012.158509%2025.544977%2010.748377%2025.951172%209.3222656C26.154528%208.6083028%2026.357942%207.891987%2026.513672%207.3476562C26.591532%207.0754909%2026.658135%206.8463076%2026.705078%206.6835938C26.728548%206.6022368%2026.746996%206.5377315%2026.759766%206.4941406C26.916091%206.0606215%2027.022027%206.0117998%2027.007812%206.0195312C27.000698%206.0234013%2027.014739%206.0105924%2027.083984%206.0097656%20z%20M%2010.5%2022L16%2022L16%2039.5C16%2040.346499%2015.346499%2041%2014.5%2041L10.5%2041C9.6535009%2041%209%2040.346499%209%2039.5L9%2023.5C9%2022.653501%209.6535009%2022%2010.5%2022%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",PS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M11.677734%202.1816406C11.255625%202.2202656%2010.879797%202.5279063%2010.779297%202.9726562L10.224609%205.4179688L7.5136719%208.4296875C7.1826719%208.7966875%207%209.2735781%207%209.7675781L7%2019C7%2020.105%207.895%2021%209%2021L17.03125%2021C17.77225%2021%2018.443141%2020.563719%2018.744141%2019.886719L21.746094%2013.130859C21.913094%2012.756859%2022%2012.351406%2022%2011.941406L22%2011C22%209.9%2021.1%209%2020%209L13%209C13%209%2014%206.6292813%2014%204.8632812C14%203.2502813%2012.962422%202.5443281%2012.107422%202.2363281C11.964672%202.1845781%2011.818437%202.1687656%2011.677734%202.1816406%20z%20M%203.5%209C2.672%209%202%209.672%202%2010.5L2%2019.5C2%2020.328%202.672%2021%203.5%2021C4.328%2021%205%2020.328%205%2019.5L5%2010.5C5%209.672%204.328%209%203.5%209%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",LS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M10.5%207C6.9280619%207%204%209.9280619%204%2013.5L4%2030.5C4%2034.071938%206.9280619%2037%2010.5%2037L12%2037L12%2042.5C12%2044.46599%2014.427297%2045.67893%2016%2044.5L26%2037L37.5%2037C41.071938%2037%2044%2034.071938%2044%2030.5L44%2013.5C44%209.9280619%2041.071938%207%2037.5%207L10.5%207%20z%20M%2010.5%2010L37.5%2010C39.450062%2010%2041%2011.549938%2041%2013.5L41%2030.5C41%2032.450062%2039.450062%2034%2037.5%2034L25.5%2034%20A%201.50015%201.50015%200%200%200%2024.599609%2034.300781L15%2041.5L15%2035.5%20A%201.50015%201.50015%200%200%200%2013.5%2034L10.5%2034C8.5499381%2034%207%2032.450062%207%2030.5L7%2013.5C7%2011.549938%208.5499381%2010%2010.5%2010%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",bS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M26%203%20A%201%201%200%200%200%2025.716797%203.0429688%20A%201%201%200%200%200%2025.636719%203.0683594L3.6503906%2010.060547L3.6503906%2010.064453%20A%201%201%200%200%200%203%2011%20A%201%201%200%200%200%203.4824219%2011.853516L10.164062%2017.154297L23.373047%206.6269531L12.845703%2019.835938L18.142578%2026.513672%20A%201%201%200%200%200%2019%2027%20A%201%201%200%200%200%2019.935547%2026.349609L19.939453%2026.349609L26.9375%204.34375%20A%201%201%200%200%200%2026.957031%204.2832031%20A%201%201%200%200%200%2027%204%20A%201%201%200%200%200%2026%203%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",DS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='480'%20height='480'%3e%3cpath%20d='M6%202C4.897%202%204%202.897%204%204L4%2020C4%2021.103%204.897%2022%206%2022L18%2022C19.103%2022%2020%2021.103%2020%2020L20%2015.25L18.001953%2016.748047L18.001953%2020L6%2020L6%204L18%204L18%207.25L20%208.75L20%204C20%202.897%2019.103%202%2018%202L6%202%20z%20M%2016%208.25L16%2011L11%2011L11%2013L16%2013L16%2015.75L21%2012L16%208.25%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",OS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M12%203%20A%204%204%200%200%200%208%207%20A%204%204%200%200%200%2012%2011%20A%204%204%200%200%200%2016%207%20A%204%204%200%200%200%2012%203%20z%20M%2012%2014C8.996%2014%203%2015.508%203%2018.5L3%2020C3%2020.552%203.448%2021%204%2021L20%2021C20.552%2021%2021%2020.552%2021%2020L21%2018.5C21%2015.508%2015.004%2014%2012%2014%20z'%20/%3e%3c/svg%3e",MS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M17,18H4c-1.105,0-2-0.895-2-2V6c0-1.105,0.895-2,2-2h13c1.105,0,2,0.895,2,2v10C19,17.105,18.105,18,17,18z'%20opacity='.35'%20/%3e%3ccircle%20cx='14.5'%20cy='7.5'%20r='1.5'%20/%3e%3cpath%20d='M4,15.125C4,15.604,4.364,16,4.812,16h11.375C16.636,16,17,15.611,17,15.125C17,13.932,15.829,12,14.969,12%20c-0.896,0-1.383,1.001-2.969,1.001C10.015,13.001,8.875,9,7.25,9S4,12.817,4,15.125z'%20/%3e%3cpath%20d='M20,6h-1v10c0,1.105-0.895,2-2,2H5c0,1.105,0.895,2,2,2h13c1.105,0,2-0.895,2-2V8C22,6.895,21.105,6,20,6z'%20/%3e%3c/svg%3e",jS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M14,15.5V8h3l-5-5L7,8h3v7.5c0,0.3,0.2,0.5,0.5,0.5h3C13.8,16,14,15.8,14,15.5z'%20opacity='.3'%20/%3e%3cpath%20d='M2%2020H22V22H2zM13.5%2017h-3C9.7%2017%209%2016.3%209%2015.5V9H4.6L12%201.6%2019.4%209H15v6.5C15%2016.3%2014.3%2017%2013.5%2017zM11%2015h2V7h1.6L12%204.4%209.4%207H11V15z'%20/%3e%3c/svg%3e",VS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M14.984375%200.98632812%20A%201.0001%201.0001%200%200%200%2014%202L14%205%20A%201.0001%201.0001%200%201%200%2016%205L16%202%20A%201.0001%201.0001%200%200%200%2014.984375%200.98632812%20z%20M%205.796875%204.7988281%20A%201.0001%201.0001%200%200%200%205.1015625%206.515625L7.2226562%208.6367188%20A%201.0001%201.0001%200%201%200%208.6367188%207.2226562L6.515625%205.1015625%20A%201.0001%201.0001%200%200%200%205.796875%204.7988281%20z%20M%2024.171875%204.7988281%20A%201.0001%201.0001%200%200%200%2023.484375%205.1015625L21.363281%207.2226562%20A%201.0001%201.0001%200%201%200%2022.777344%208.6367188L24.898438%206.515625%20A%201.0001%201.0001%200%200%200%2024.171875%204.7988281%20z%20M%2015%208%20A%207%207%200%200%200%208%2015%20A%207%207%200%200%200%2015%2022%20A%207%207%200%200%200%2022%2015%20A%207%207%200%200%200%2015%208%20z%20M%202%2014%20A%201.0001%201.0001%200%201%200%202%2016L5%2016%20A%201.0001%201.0001%200%201%200%205%2014L2%2014%20z%20M%2025%2014%20A%201.0001%201.0001%200%201%200%2025%2016L28%2016%20A%201.0001%201.0001%200%201%200%2028%2014L25%2014%20z%20M%207.9101562%2021.060547%20A%201.0001%201.0001%200%200%200%207.2226562%2021.363281L5.1015625%2023.484375%20A%201.0001%201.0001%200%201%200%206.515625%2024.898438L8.6367188%2022.777344%20A%201.0001%201.0001%200%200%200%207.9101562%2021.060547%20z%20M%2022.060547%2021.060547%20A%201.0001%201.0001%200%200%200%2021.363281%2022.777344L23.484375%2024.898438%20A%201.0001%201.0001%200%201%200%2024.898438%2023.484375L22.777344%2021.363281%20A%201.0001%201.0001%200%200%200%2022.060547%2021.060547%20z%20M%2014.984375%2023.986328%20A%201.0001%201.0001%200%200%200%2014%2025L14%2028%20A%201.0001%201.0001%200%201%200%2016%2028L16%2025%20A%201.0001%201.0001%200%200%200%2014.984375%2023.986328%20z'%20/%3e%3c/svg%3e",FS="/assets/dark-i8sdGySW.svg",US="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M12%2018.071L6.429%2012.5%204.929%2014%2012%2021.071%2019.071%2014%2017.571%2012.5z'%20/%3e%3cpath%20d='M4%2010H20V12H4z'%20transform='rotate(-90%2012%2011)'%20/%3e%3c/svg%3e",$S="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M4,19V5c0-1.657,1.343-3,3-3h7l6,6v11c0,1.657-1.343,3-3,3H7C5.343,22,4,20.657,4,19z'%20opacity='.35'%20/%3e%3cpath%20d='M14,6V2l6,6h-4C14.895,8,14,7.105,14,6z'%20/%3e%3c/svg%3e",zS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M23.277344%204.0175781C15.193866%204.3983176%209%2011.343391%209%2019.380859L9%2026.648438L6.3496094%2031.980469%20A%201.50015%201.50015%200%200%200%206.3359375%2032.009766C5.2696804%2034.277268%206.9957076%2037%209.5019531%2037L18%2037C18%2040.295865%2020.704135%2043%2024%2043C27.295865%2043%2030%2040.295865%2030%2037L38.496094%2037C41.002339%2037%2042.730582%2034.277829%2041.664062%2032.009766%20A%201.50015%201.50015%200%200%200%2041.650391%2031.980469L39%2026.648438L39%2019C39%2010.493798%2031.863289%203.6133643%2023.277344%204.0175781%20z%20M%2023.417969%207.0136719C30.338024%206.6878857%2036%2012.162202%2036%2019L36%2027%20A%201.50015%201.50015%200%200%200%2036.15625%2027.667969L38.949219%2033.289062C39.128826%2033.674017%2038.921017%2034%2038.496094%2034L9.5019531%2034C9.077027%2034%208.8709034%2033.674574%209.0507812%2033.289062C9.0507812%2033.289062%209.0507812%2033.287109%209.0507812%2033.287109L11.84375%2027.667969%20A%201.50015%201.50015%200%200%200%2012%2027L12%2019.380859C12%2012.880328%2016.979446%207.3169324%2023.417969%207.0136719%20z%20M%2021%2037L27%2037C27%2038.674135%2025.674135%2040%2024%2040C22.325865%2040%2021%2038.674135%2021%2037%20z'%20/%3e%3c/svg%3e",BS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M10.5%206C6.9280619%206%204%208.9280619%204%2012.5L4%2028.5L4%2034.535156C4%2036.486795%206.3899087%2037.705105%207.96875%2036.558594%20A%201.50015%201.50015%200%200%200%207.9707031%2036.558594L12.291016%2033.416016C13.114957%2036.061625%2015.594339%2038%2018.5%2038L31.011719%2038L40.029297%2044.558594%20A%201.50015%201.50015%200%200%200%2040.03125%2044.558594C41.610044%2045.705105%2044%2044.486795%2044%2042.535156L44%2036.5L44%2020.5C44%2016.928062%2041.071938%2014%2037.5%2014L36%2014L36%2012.5C36%208.9280619%2033.071938%206%2029.5%206L10.5%206%20z%20M%2010.5%209L29.5%209C31.450062%209%2033%2010.549938%2033%2012.5L33%2023.5C33%2025.450062%2031.450062%2027%2029.5%2027L16.5%2027%20A%201.50015%201.50015%200%200%200%2015.617188%2027.287109L7%2033.554688L7%2028.5L7%2012.5C7%2010.549938%208.5499381%209%2010.5%209%20z%20M%2036%2017L37.5%2017C39.450062%2017%2041%2018.549938%2041%2020.5L41%2036.5L41%2041.554688L32.382812%2035.287109%20A%201.50015%201.50015%200%200%200%2031.5%2035L18.5%2035C16.549938%2035%2015%2033.450062%2015%2031.5L15%2031.445312L16.988281%2030L29.5%2030C33.071938%2030%2036%2027.071938%2036%2023.5L36%2017%20z'%20/%3e%3c/svg%3e",WS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2026%2026'%20width='208'%20height='208'%3e%3cpath%20d='M5%201L10.3125%2011L4%2011L1%207L0%207L1%2013L0%2019L1%2019L4%2015L10.3125%2015L5%2025L7.1875%2025L15.90625%2015L24%2015C25.101563%2015%2026%2014.101563%2026%2013C26%2011.898438%2025.101563%2011%2024%2011L15.90625%2011L7.1875%201Z'%20/%3e%3c/svg%3e",HS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M5.40625%205.40625C-0.441406%2011.253906%20-0.441406%2020.746094%205.40625%2026.59375L6.8125%2025.1875C1.726563%2020.101563%201.726563%2011.898438%206.8125%206.8125%20Z%20M%2026.59375%205.40625L25.1875%206.8125C30.273438%2011.898438%2030.273438%2020.101563%2025.1875%2025.1875L26.59375%2026.59375C32.441406%2020.746094%2032.441406%2011.253906%2026.59375%205.40625%20Z%20M%209.625%209.625C6.117188%2013.132813%206.117188%2018.867188%209.625%2022.375L11.0625%2020.9375C8.320313%2018.195313%208.320313%2013.804688%2011.0625%2011.0625%20Z%20M%2022.375%209.625L20.9375%2011.0625C23.679688%2013.804688%2023.679688%2018.195313%2020.9375%2020.9375L22.375%2022.375C25.882813%2018.867188%2025.882813%2013.132813%2022.375%209.625%20Z%20M%2016%2013C14.355469%2013%2013%2014.355469%2013%2016C13%2017.644531%2014.355469%2019%2016%2019C17.644531%2019%2019%2017.644531%2019%2016C19%2014.355469%2017.644531%2013%2016%2013%20Z%20M%2016%2015C16.5625%2015%2017%2015.4375%2017%2016C17%2016.5625%2016.5625%2017%2016%2017C15.4375%2017%2015%2016.5625%2015%2016C15%2015.4375%2015.4375%2015%2016%2015Z'%20/%3e%3c/svg%3e",qS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='240'%20height='240'%3e%3clinearGradient%20id='SO5UwR~UHtGc~sBTMNyFWa'%20x1='21.302'%20x2='27.254'%20y1='21.302'%20y2='27.254'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0'%20stop-color='%2332bdef'%20/%3e%3cstop%20offset='1'%20stop-color='%231ea2e4'%20/%3e%3c/linearGradient%3e%3ccircle%20cx='24'%20cy='24'%20r='4'%20fill='url(%23SO5UwR~UHtGc~sBTMNyFWa)'%20/%3e%3clinearGradient%20id='SO5UwR~UHtGc~sBTMNyFWb'%20x1='21.302'%20x2='27.254'%20y1='7.302'%20y2='13.254'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0'%20stop-color='%2332bdef'%20/%3e%3cstop%20offset='1'%20stop-color='%231ea2e4'%20/%3e%3c/linearGradient%3e%3ccircle%20cx='24'%20cy='10'%20r='4'%20fill='url(%23SO5UwR~UHtGc~sBTMNyFWb)'%20/%3e%3clinearGradient%20id='SO5UwR~UHtGc~sBTMNyFWc'%20x1='21.302'%20x2='27.254'%20y1='35.302'%20y2='41.254'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0'%20stop-color='%2332bdef'%20/%3e%3cstop%20offset='1'%20stop-color='%231ea2e4'%20/%3e%3c/linearGradient%3e%3ccircle%20cx='24'%20cy='38'%20r='4'%20fill='url(%23SO5UwR~UHtGc~sBTMNyFWc)'%20/%3e%3c/svg%3e",GS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M10%202L9%203L4%203L4%205L20%205L20%203L15%203L14%202L10%202%20z%20M%205%207L5%2022L14.220703%2022L16.230469%2020L14%2020L14%209L16%209L16%2015.978516L16.464844%2015.515625L17.878906%2014.101562L19%2015.222656L19%207L5%207%20z%20M%208%209L10%209L10%2020L8%2020L8%209%20z%20M%2017.878906%2016.929688L16.464844%2018.34375L18.585938%2020.464844L16.464844%2022.585938L17.878906%2024L20%2021.878906L22.121094%2024L23.535156%2022.585938L21.414062%2020.464844L23.535156%2018.34375L22.121094%2016.929688L20%2019.050781L17.878906%2016.929688%20z'%20/%3e%3c/svg%3e",KS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M20.011,3.989c-1.318-1.318-3.455-1.318-4.773,0L4.208,14.998c-0.302,0.302-0.503,0.689-0.576,1.11l-0.615,3.567c-0.133,0.772,0.538,1.442,1.31,1.308l3.525-0.613c0.418-0.073,0.804-0.273,1.104-0.573L20.011,8.761C21.33,7.443,21.33,5.307,20.011,3.989z'%20opacity='.35'%20/%3e%3cpolygon%20points='13.075,6.144%2017.848,10.917%2019.832,8.94%2015.059,4.167'%20/%3e%3cpath%20d='M3.392,17.5l-0.375,2.175c-0.133,0.772,0.538,1.442,1.31,1.308l2.171-0.378L3.392,17.5z'%20/%3e%3c/svg%3e",QS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M16.414,7.586c-0.781-0.781-2.047-0.781-2.828,0l-6,6c-0.781,0.781-0.781,2.047,0,2.828c0.781,0.781,2.047,0.781,2.828,0l6-6C17.195,9.633,17.195,8.367,16.414,7.586z'%20/%3e%3cpath%20d='M20.389,3.611c-2.148-2.148-5.63-2.148-7.778,0c-0.171,0.171-0.829,0.829-1,1c-1.548,1.548-1.963,3.786-1.279,5.722%20c-1.936-0.684-4.173-0.27-5.721,1.278c-0.171,0.171-0.829,0.829-1,1c-2.148,2.148-2.148,5.63,0,7.778%20c2.148,2.148,5.63,2.148,7.778,0c0.171-0.171,0.829-0.829,1-1c1.548-1.548,1.963-3.786,1.279-5.722%20c1.936,0.684,4.173,0.27,5.721-1.278c0.171-0.171,0.829-0.829,1-1C22.537,9.241,22.537,5.759,20.389,3.611z'%20opacity='.35'%20/%3e%3c/svg%3e",YS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M15,3C8.373,3,3,8.373,3,15c0,6.627,5.373,12,12,12s12-5.373,12-12C27,8.373,21.627,3,15,3z%20M19.707,13.707%20C19.511,13.903,19.255,14,18.999,14H16v7c0,0.552-0.447,1-1,1s-1-0.448-1-1v-7h-2.999c-0.256,0-0.512-0.097-0.708-0.293%20c-0.391-0.391-0.391-1.023,0-1.414l4-4C14.488,8.098,14.744,8,15,8s0.512,0.098,0.707,0.293l4,4%20C20.098,12.684,20.098,13.316,19.707,13.707z'%20/%3e%3c/svg%3e",XS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M15,3C8.373,3,3,8.373,3,15c0,6.627,5.373,12,12,12s12-5.373,12-12C27,8.373,21.627,3,15,3z%20M19.707,13.707%20C19.511,13.903,19.255,14,18.999,14H16v7c0,0.552-0.447,1-1,1s-1-0.448-1-1v-7h-2.999c-0.256,0-0.512-0.097-0.708-0.293%20c-0.391-0.391-0.391-1.023,0-1.414l4-4C14.488,8.098,14.744,8,15,8s0.512,0.098,0.707,0.293l4,4%20C20.098,12.684,20.098,13.316,19.707,13.707z'%20fill='%238D8D8D'%20/%3e%3c/svg%3e",JS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M19.999,3H4.01c-1.1,0-2.001,0.9-2.001,2L2,16.999C2,18.104,2.895,19,4,19h1.499c0.276,0,0.5,0.224,0.5,0.5v2.086%20c0,0.891,1.077,1.337,1.707,0.707l3-3C10.894,19.105,11.148,19,11.413,19h8.586c1.1,0,2-0.9,2-2V5C21.999,3.9,21.099,3,19.999,3z%20M15.903,15c-0.492,0-0.883-0.363-0.988-0.843C14.472,12.147,12.455,12.006,12,12V14c0,0.404-0.243,0.769-0.617,0.924%20C11.259,14.975,11.129,15,11,15c-0.26,0-0.516-0.102-0.707-0.293l-3-3c-0.391-0.391-0.391-1.023,0-1.414l3-3%20c0.286-0.286,0.715-0.371,1.09-0.217C11.757,7.231,12,7.595,12,8v2v0c1.535,0,4.284,0.823,4.883,3.773%20C17.011,14.403,16.545,15,15.903,15z'%20fill='%23050505'%20/%3e%3c/svg%3e",ZS={link:QS,reply:JS,sendLetter:YS,sendingLetter:XS,deleteIcon:GS,editPencil:KS,moreOption:qS,download:US,offline:WS,online:HS,chat:BS,notification:zS,file:$S,light:VS,dark:FS,upload:jS,trueIcon:GI,falseIcon:KI,error:QI,down:YI,back:XI,thumbUp:JI,redo:ZI,next:eS,finish:tS,history:nS,trash:rS,add:sS,edit:iS,save:oS,up:aS,clipboard:lS,admin:cS,menu:uS,home:hS,result:dS,help:fS,about:pS,update:mS,faq:gS,plus:_S,minus:vS,share:yS,review:wS,fullScreen:ES,search:xS,searchLeft:TS,close:CS,copy:IS,google:SS,refresh:AS,exit:RS,exam:NS,like:kS,liked:PS,comment:LS,send:bS,logout:DS,user:OS,image:MS};function J(t){return ZS[t]||null}const ge=({data:t})=>{const{clickFn:e,image:n}=t,r=J(n),{theme:s}=v.useContext(F),i=()=>{e&&e()};return u.jsx("button",{onClick:i,className:`shadow-md border  rounded-full p-2 h-10 w-10  font-medium flex  justify-center items-center hover:opacity-70 transition-all ${s==="light"?"bg-gray-50/50 border-gray-200":"bg-slate-500/70 text-white border-slate-500/70"}`,children:u.jsx("img",{src:r})})};function e6(t,e){let n=!1;return e.forEach(r=>{r.id===t&&(n=!0)}),n}let I1;function t6(t){t(!0),clearTimeout(I1),I1=setTimeout(()=>{t(!1)},[4e3])}function Kt(){scrollTo({top:0,behavior:"smooth"})}function _f(){const t=window.innerHeight,n=document.documentElement.scrollHeight-t;scrollTo({top:n+200,behavior:"smooth"})}function Xt(t){document.body.style.overflow=t}function li(t,e){v.useEffect(()=>{const n=r=>{t.current&&!t.current.contains(r.target)&&e(!1)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[])}function c3(t){try{const e=t.split(":"),n=Number(e[0]),r=Number(e[1]),s=Number(e[2]);return`${qd(n,"hours")} ${qd(r,"minutes")} ${qd(s,"seconds")}`}catch{return null}}function qd(t,e){return t?`${t} ${e}`:""}function S1(t){return t>=10?t:`0${t}`}const he=({data:t})=>{const{clickFn:e,text:n,image:r}=t,s=J(r),{theme:i}=v.useContext(F),o=()=>{e&&e()};return u.jsxs("button",{onClick:o,className:`min-h-10 shadow-md hover:opacity-70 border  font-medium px-2 py-1 rounded-lg flex justify-center items-center gap-x-1 transition-all ${i==="light"?"bg-blue-200/60 border-gray-200":"bg-blue-200/60 text-white border-slate-500/70"}`,children:[r&&u.jsx("img",{className:" h-7",src:s}),n&&u.jsx("span",{children:n})]})},ao=({data:t})=>{const{yesButton:e,noButton:n,text:r,setValue:s}=t,{theme:i}=v.useContext(F),o=v.useRef(null);return li(o,s),v.useEffect(()=>(Xt("hidden"),()=>{Xt("auto")}),[]),u.jsx("div",{className:"fixed flex items-center z-20 bg-black/60 justify-center top-0 left-0 right-0 bottom-0",children:u.jsx("div",{ref:o,className:`w-4/5 sm:w-3/5 md:w-2/5 min-h-40 grid gap-y-3 rounded-md items-center border  ${i==="light"?"border-gray-300 bg-white":"border-slate-500/70 text-white bg-slate-600"}`,children:u.jsxs("div",{children:[u.jsx("div",{className:"text-center",children:r}),u.jsxs("div",{className:"flex justify-center mt-2 items-center gap-x-3 ",children:[u.jsx(he,{data:{clickFn:e,image:"trueIcon",text:"Yes"}}),u.jsx(he,{data:{clickFn:n,image:"falseIcon",text:"No"}})]})]})})})},n6=({data:t})=>{const{pageTitle:e,currentPage:n,totalPage:r,percentage:s,answerLength:i,questionsLength:o}=t,{stopTest:a,formattedTime:l,theme:c}=v.useContext(F),[h,d]=v.useState(!1),f=()=>{a(),d(!1)},m=()=>{d(!1)};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:" font-medium text-lg flex items-center justify-start",children:[u.jsx(ge,{data:{clickFn:()=>d(!0),image:"back"}}),u.jsx("div",{className:`ml-2 ${c==="light"?"":"text-white"}`,children:e}),h&&u.jsx(ao,{data:{yesButton:f,noButton:m,text:"Are you sure to stop the test ?",setValue:d}})]}),u.jsxs("div",{className:`flex justify-between items-center sticky left-0 pt-1 right-0 z-10 ${c==="light"?"":"text-white"}`,children:[u.jsxs("div",{children:["Page ",n," of ",r]}),u.jsxs("div",{className:`w-2/3 border h-7 relative ${c==="light"?"border-gray-300":"border-slate-500/70"}`,children:[u.jsx("div",{style:{width:`${s}%`},className:`text-center h-full ${c==="light"?"bg-lime-200":"bg-slate-500/70"}`}),u.jsxs("div",{className:"absolute top-0 left-2 font-medium",children:[i," ","/"," ",o]})]}),u.jsx("div",{className:"min-h-12 font-medium fixed right-0 top-1/4 h-10 min-w-20 bg-lime-200/50 backdrop-blur-lg flex items-center justify-center rounded-bl-lg rounded-tl-lg border-r-4 border-r-blue-400",children:l})]})]})},r6=({data:t})=>{const{currentQuestions:e,chooseAnswer:n}=t,{answeredQuestions:r,theme:s}=v.useContext(F);return u.jsx("div",{children:e.map((i,o)=>u.jsxs("div",{children:[u.jsxs("div",{className:`grid gap-y-2 ${s==="light"?"":"text-white"}`,children:[u.jsxs("div",{className:"flex gap-x-3 items-center",children:[u.jsx("div",{className:"bg-blue-600 rounded-sm shadow-lg h-9 w-9 text-white font-bold flex justify-center items-center ",children:i.id}),u.jsx("div",{className:"flex-1 font-padauk",children:i.question})]}),u.jsx("div",{className:"grid gap-y-2",children:i.choices.map((a,l)=>{let c,h=!1;return r.forEach(d=>{i.id===d.id&&(c=d)}),(c==null?void 0:c.userAnswer)===a&&(h=!0),u.jsxs("div",{onClick:()=>{n(i.id,a)},className:`border  h-12 flex gap-x-3 p-2 cursor-pointer items-center rounded-lg font-padauk ${s==="light"?`${h?"border-blue-500 border-dotted font-bold bg-lime-50":"border-lime-200 hover:bg-slate-50"}`:`${h?"border-slate-500/70 border-dotted font-bold bg-slate-500/70":"border-slate-500/70 hover:bg-slate-500/70"}`}`,children:[u.jsx("input",{onChange:()=>{n(i.id,a)},className:"h-5 w-5",name:`question-${i.id}`,type:"radio",checked:!!h}),u.jsx("div",{children:a})]},`choice-${i.id}-${l}-${a}`)})})]}),u.jsx(s6,{})]},`question-${i.id}-${o}-${i.question}`))})},s6=()=>u.jsx("div",{className:" border border-dashed border-gray-500 mb-7 mt-7"}),i6=()=>(v.useContext(F),u.jsxs("div",{className:"flex gap-x-2 items-center",children:[u.jsx("img",{className:"w-8 ",src:J("error")}),u.jsx("div",{className:"text-red-600 font-bold",children:"You need to answer all questions before proceeding!"})]}));/**
 * @remix-run/router v1.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xa(){return Xa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xa.apply(this,arguments)}var jr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(jr||(jr={}));const A1="popstate";function o6(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=ci(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),vf("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Tu(i))}function r(s,i){Eh(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return l6(e,n,r,t)}function ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Eh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function a6(){return Math.random().toString(36).substr(2,8)}function R1(t,e){return{usr:t.state,key:t.key,idx:e}}function vf(t,e,n,r){return n===void 0&&(n=null),Xa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ci(e):e,{state:n,key:e&&e.key||r||a6()})}function Tu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ci(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function l6(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=jr.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Xa({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=jr.Pop;let E=h(),p=E==null?null:E-c;c=E,l&&l({action:a,location:w.location,delta:p})}function f(E,p){a=jr.Push;let g=vf(w.location,E,p);n&&n(g,E),c=h()+1;let y=R1(g,c),T=w.createHref(g);try{o.pushState(y,"",T)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;s.location.assign(T)}i&&l&&l({action:a,location:w.location,delta:1})}function m(E,p){a=jr.Replace;let g=vf(w.location,E,p);n&&n(g,E),c=h();let y=R1(g,c),T=w.createHref(g);o.replaceState(y,"",T),i&&l&&l({action:a,location:w.location,delta:0})}function _(E){let p=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof E=="string"?E:Tu(E);return ze(p,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,p)}let w={get action(){return a},get location(){return t(s,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(A1,d),l=E,()=>{s.removeEventListener(A1,d),l=null}},createHref(E){return e(s,E)},createURL:_,encodeLocation(E){let p=_(E);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:f,replace:m,go(E){return o.go(E)}};return w}var N1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(N1||(N1={}));function c6(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?ci(e):e,s=mp(r.pathname||"/",n);if(s==null)return null;let i=u3(t);u6(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=y6(i[a],x6(s));return o}function u3(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(ze(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Gr([r,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&(ze(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),u3(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:_6(c,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of h3(i.path))s(i,o,l)}),e}function h3(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=h3(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function u6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:v6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const h6=/^:[\w-]+$/,d6=3,f6=2,p6=1,m6=10,g6=-2,k1=t=>t==="*";function _6(t,e){let n=t.split("/"),r=n.length;return n.some(k1)&&(r+=g6),e&&(r+=f6),n.filter(s=>!k1(s)).reduce((s,i)=>s+(h6.test(i)?d6:i===""?p6:m6),r)}function v6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function y6(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",h=w6({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!h)return null;Object.assign(r,h.params);let d=a.route;i.push({params:r,pathname:Gr([s,h.pathname]),pathnameBase:A6(Gr([s,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(s=Gr([s,h.pathnameBase]))}return i}function w6(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=E6(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:f,isOptional:m}=h;if(f==="*"){let w=a[d]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const _=a[d];return m&&!_?c[f]=void 0:c[f]=T6(_||"",f),c},{}),pathname:i,pathnameBase:o,pattern:t}}function E6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Eh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function x6(t){try{return decodeURI(t)}catch(e){return Eh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function T6(t,e){try{return decodeURIComponent(t)}catch(n){return Eh(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function mp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function C6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ci(t):t;return{pathname:n?n.startsWith("/")?n:I6(n,e):e,search:R6(r),hash:N6(s)}}function I6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Gd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function S6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function d3(t,e){let n=S6(t);return e?n.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function f3(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ci(t):(s=Xa({},t),ze(!s.pathname||!s.pathname.includes("?"),Gd("?","pathname","search",s)),ze(!s.pathname||!s.pathname.includes("#"),Gd("#","pathname","hash",s)),ze(!s.search||!s.search.includes("#"),Gd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=C6(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Gr=t=>t.join("/").replace(/\/\/+/g,"/"),A6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),R6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,N6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function k6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const p3=["post","put","patch","delete"];new Set(p3);const P6=["get",...p3];new Set(P6);/**
 * React Router v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ja(){return Ja=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ja.apply(this,arguments)}const gp=v.createContext(null),L6=v.createContext(null),ui=v.createContext(null),xh=v.createContext(null),hs=v.createContext({outlet:null,matches:[],isDataRoute:!1}),m3=v.createContext(null);function b6(t,e){let{relative:n}=e===void 0?{}:e;Rl()||ze(!1);let{basename:r,navigator:s}=v.useContext(ui),{hash:i,pathname:o,search:a}=_3(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Gr([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Rl(){return v.useContext(xh)!=null}function So(){return Rl()||ze(!1),v.useContext(xh).location}function g3(t){v.useContext(ui).static||v.useLayoutEffect(t)}function tn(){let{isDataRoute:t}=v.useContext(hs);return t?q6():D6()}function D6(){Rl()||ze(!1);let t=v.useContext(gp),{basename:e,future:n,navigator:r}=v.useContext(ui),{matches:s}=v.useContext(hs),{pathname:i}=So(),o=JSON.stringify(d3(s,n.v7_relativeSplatPath)),a=v.useRef(!1);return g3(()=>{a.current=!0}),v.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=f3(c,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Gr([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,i,t])}function _p(){let{matches:t}=v.useContext(hs),e=t[t.length-1];return e?e.params:{}}function _3(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=v.useContext(ui),{matches:s}=v.useContext(hs),{pathname:i}=So(),o=JSON.stringify(d3(s,r.v7_relativeSplatPath));return v.useMemo(()=>f3(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function O6(t,e){return M6(t,e)}function M6(t,e,n,r){Rl()||ze(!1);let{navigator:s}=v.useContext(ui),{matches:i}=v.useContext(hs),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=So(),h;if(e){var d;let E=typeof e=="string"?ci(e):e;l==="/"||(d=E.pathname)!=null&&d.startsWith(l)||ze(!1),h=E}else h=c;let f=h.pathname||"/",m=l==="/"?f:f.slice(l.length)||"/",_=c6(t,{pathname:m}),w=$6(_&&_.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:Gr([l,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:Gr([l,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,n,r);return e&&w?v.createElement(xh.Provider,{value:{location:Ja({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:jr.Pop}},w):w}function j6(){let t=H6(),e=k6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:s},n):null,i)}const V6=v.createElement(j6,null);class F6 extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?v.createElement(hs.Provider,{value:this.props.routeContext},v.createElement(m3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function U6(t){let{routeContext:e,match:n,children:r}=t,s=v.useContext(gp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(hs.Provider,{value:e},r)}function $6(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));h>=0||ze(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:m}=n,_=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||_){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let m,_=!1,w=null,E=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||V6,l&&(c<0&&f===0?(G6("route-fallback",!1),_=!0,E=null):c===f&&(_=!0,E=d.route.hydrateFallbackElement||null)));let p=e.concat(o.slice(0,f+1)),g=()=>{let y;return m?y=w:_?y=E:d.route.Component?y=v.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=h,v.createElement(U6,{match:d,routeContext:{outlet:h,matches:p,isDataRoute:n!=null},children:y})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?v.createElement(F6,{location:n.location,revalidation:n.revalidation,component:w,error:m,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var v3=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(v3||{}),Cu=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Cu||{});function z6(t){let e=v.useContext(gp);return e||ze(!1),e}function B6(t){let e=v.useContext(L6);return e||ze(!1),e}function W6(t){let e=v.useContext(hs);return e||ze(!1),e}function y3(t){let e=W6(),n=e.matches[e.matches.length-1];return n.route.id||ze(!1),n.route.id}function H6(){var t;let e=v.useContext(m3),n=B6(Cu.UseRouteError),r=y3(Cu.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function q6(){let{router:t}=z6(v3.UseNavigateStable),e=y3(Cu.UseNavigateStable),n=v.useRef(!1);return g3(()=>{n.current=!0}),v.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ja({fromRouteId:e},i)))},[t,e])}const P1={};function G6(t,e,n){!e&&!P1[t]&&(P1[t]=!0)}function Rt(t){ze(!1)}function K6(t){let{basename:e="/",children:n=null,location:r,navigationType:s=jr.Pop,navigator:i,static:o=!1,future:a}=t;Rl()&&ze(!1);let l=e.replace(/^\/*/,"/"),c=v.useMemo(()=>({basename:l,navigator:i,static:o,future:Ja({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=ci(r));let{pathname:h="/",search:d="",hash:f="",state:m=null,key:_="default"}=r,w=v.useMemo(()=>{let E=mp(h,l);return E==null?null:{location:{pathname:E,search:d,hash:f,state:m,key:_},navigationType:s}},[l,h,d,f,m,_,s]);return w==null?null:v.createElement(ui.Provider,{value:c},v.createElement(xh.Provider,{children:n,value:w}))}function Q6(t){let{children:e,location:n}=t;return O6(yf(e),n)}new Promise(()=>{});function yf(t,e){e===void 0&&(e=[]);let n=[];return v.Children.forEach(t,(r,s)=>{if(!v.isValidElement(r))return;let i=[...e,s];if(r.type===v.Fragment){n.push.apply(n,yf(r.props.children,i));return}r.type!==Rt&&ze(!1),!r.props.index||!r.props.children||ze(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=yf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wf(){return wf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wf.apply(this,arguments)}function Y6(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function X6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function J6(t,e){return t.button===0&&(!e||e==="_self")&&!X6(t)}const Z6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],e9="6";try{window.__reactRouterVersion=e9}catch{}const t9="startTransition",L1=MC[t9];function n9(t){let{basename:e,children:n,future:r,window:s}=t,i=v.useRef();i.current==null&&(i.current=o6({window:s,v5Compat:!0}));let o=i.current,[a,l]=v.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=v.useCallback(d=>{c&&L1?L1(()=>l(d)):l(d)},[l,c]);return v.useLayoutEffect(()=>o.listen(h),[o,h]),v.createElement(K6,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const r9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",s9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,w3=v.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:h,unstable_viewTransition:d}=e,f=Y6(e,Z6),{basename:m}=v.useContext(ui),_,w=!1;if(typeof c=="string"&&s9.test(c)&&(_=c,r9))try{let y=new URL(window.location.href),T=c.startsWith("//")?new URL(y.protocol+c):new URL(c),x=mp(T.pathname,m);T.origin===y.origin&&x!=null?c=x+T.search+T.hash:w=!0}catch{}let E=b6(c,{relative:s}),p=i9(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,unstable_viewTransition:d});function g(y){r&&r(y),y.defaultPrevented||p(y)}return v.createElement("a",wf({},f,{href:_||E,onClick:w||i?r:g,ref:n,target:l}))});var b1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(b1||(b1={}));var D1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(D1||(D1={}));function i9(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=tn(),c=So(),h=_3(t,{relative:o});return v.useCallback(d=>{if(J6(d,n)){d.preventDefault();let f=r!==void 0?r:Tu(c)===Tu(h);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:a})}},[c,l,h,r,s,n,t,i,o,a])}function o9(t,e,n){const r=e.name,s=a9(t,e.quizzes),i=l9(s),o=t.length,a=e.gradingRules.length!==0?c9(i,e.gradingRules)||"There is an error in your grading rules":"Level is not defined",l=u9(),c=h9();return{testName:r,results:s,score:i,totalScore:o,level:a,date:l,time:c,timeTaken:n}}function a9(t,e){return e.map(r=>{const{id:s,question:i,answer:o}=r;let a;t.forEach(c=>{s===c.id&&(a=c)});const{userAnswer:l}=a;return l===r.answer?{id:s,question:i,userAnswer:l,answer:o,isTrue:!0}:{id:s,question:i,userAnswer:l,answer:o,isTrue:!1}})}function l9(t){let e=0;return t.forEach(n=>{n.isTrue&&e++}),e}function c9(t,e){let n;try{e.forEach(r=>{t>=Number(r.from)&&t<=Number(r.to)&&(n=r.level)})}catch(r){console.log(r.message)}return n}function u9(){const t=new Date,e=t.getDate(),n=t.getMonth()+1,r=t.getFullYear();return`${e}/${n}/${r}`}function h9(){const t=new Date;let e=t.getHours();const n=t.getMinutes(),r=e>12?"PM":"AM";e=e%12||12;const s=n<10?`0${n}`:n;return`${e}:${s} ${r}`}var O1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D=function(t,e){if(!t)throw Ao(e)},Ao=function(t){return new Error("Firebase Database ("+E3.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},d9=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},vp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[h],n[d],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(x3(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):d9(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||d==null)throw new f9;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),d!==64){const _=c<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class f9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const T3=function(t){const e=x3(t);return vp.encodeByteArray(e,!0)},Iu=function(t){return T3(t).replace(/\./g,"")},Su=function(t){try{return vp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p9(t){return C3(void 0,t)}function C3(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!m9(n)||(t[n]=C3(t[n],e[n]));return t}function m9(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9=()=>g9().__FIREBASE_DEFAULTS__,v9=()=>{if(typeof process>"u"||typeof O1>"u")return;const t=O1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},y9=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Su(t[1]);return e&&JSON.parse(e)},Th=()=>{try{return _9()||v9()||y9()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},I3=t=>{var e,n;return(n=(e=Th())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},yp=t=>{const e=I3(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},S3=()=>{var t;return(t=Th())===null||t===void 0?void 0:t.config},A3=t=>{var e;return(e=Th())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Iu(JSON.stringify(n)),Iu(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function w9(){var t;const e=(t=Th())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function E9(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function R3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function x9(){const t=Be();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function N3(){return E3.NODE_ADMIN===!0}function T9(){return!w9()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k3(){try{return typeof indexedDB=="object"}catch{return!1}}function C9(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9="FirebaseError";class Kn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=I9,Object.setPrototypeOf(this,Kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nl.prototype.create)}}class Nl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?S9(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Kn(s,a,r)}}function S9(t,e){return t.replace(A9,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const A9=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t){return JSON.parse(t)}function it(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Za(Su(i[0])||""),n=Za(Su(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},R9=function(t){const e=P3(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},N9=function(t){const e=P3(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function lo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ef(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Au(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function el(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(M1(i)&&M1(o)){if(!el(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function M1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function aa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function la(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,h;for(let d=0;d<80;d++){d<40?d<20?(c=a^i&(o^a),h=1518500249):(c=i^o^a,h=1859775393):d<60?(c=i&o|a&(i|o),h=2400959708):(c=i^o^a,h=3395469782);const f=(s<<5|s>>>27)+c+l+h+r[d]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function P9(t,e){const n=new L9(t,e);return n.subscribe.bind(n)}class L9{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");b9(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Kd),s.error===void 0&&(s.error=Kd),s.complete===void 0&&(s.complete=Kd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function b9(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Kd(){}function D9(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,D(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Ch=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t){return t&&t._delegate?t._delegate:t}class fr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new wp;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(V9(e))try{this.getOrInitializeService({instanceIdentifier:Is})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Is){return this.instances.has(e)}getOptions(e=Is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:j9(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Is){return this.component?this.component.multipleInstances?e:Is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function j9(t){return t===Is?void 0:t}function V9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new M9(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Z||(Z={}));const U9={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},$9=Z.INFO,z9={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},B9=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=z9[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ih{constructor(e){this.name=e,this._logLevel=$9,this._logHandler=B9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?U9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}}const W9=(t,e)=>e.some(n=>t instanceof n);let j1,V1;function H9(){return j1||(j1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function q9(){return V1||(V1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const L3=new WeakMap,xf=new WeakMap,b3=new WeakMap,Qd=new WeakMap,Tp=new WeakMap;function G9(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Kr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&L3.set(n,t)}).catch(()=>{}),Tp.set(e,t),e}function K9(t){if(xf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});xf.set(t,e)}let Tf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return xf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||b3.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Q9(t){Tf=t(Tf)}function Y9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Yd(this),e,...n);return b3.set(r,e.sort?e.sort():[e]),Kr(r)}:q9().includes(t)?function(...e){return t.apply(Yd(this),e),Kr(L3.get(this))}:function(...e){return Kr(t.apply(Yd(this),e))}}function X9(t){return typeof t=="function"?Y9(t):(t instanceof IDBTransaction&&K9(t),W9(t,H9())?new Proxy(t,Tf):t)}function Kr(t){if(t instanceof IDBRequest)return G9(t);if(Qd.has(t))return Qd.get(t);const e=X9(t);return e!==t&&(Qd.set(t,e),Tp.set(e,t)),e}const Yd=t=>Tp.get(t);function J9(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Kr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Kr(o.result),l.oldVersion,l.newVersion,Kr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Z9=["get","getKey","getAll","getAllKeys","count"],eA=["put","add","delete","clear"],Xd=new Map;function F1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xd.get(e))return Xd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=eA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Z9.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Xd.set(e,i),i}Q9(t=>({...t,get:(e,n,r)=>F1(e,n)||t.get(e,n,r),has:(e,n)=>!!F1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function nA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cf="@firebase/app",U1="0.9.29";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new Ih("@firebase/app"),rA="@firebase/app-compat",sA="@firebase/analytics-compat",iA="@firebase/analytics",oA="@firebase/app-check-compat",aA="@firebase/app-check",lA="@firebase/auth",cA="@firebase/auth-compat",uA="@firebase/database",hA="@firebase/database-compat",dA="@firebase/functions",fA="@firebase/functions-compat",pA="@firebase/installations",mA="@firebase/installations-compat",gA="@firebase/messaging",_A="@firebase/messaging-compat",vA="@firebase/performance",yA="@firebase/performance-compat",wA="@firebase/remote-config",EA="@firebase/remote-config-compat",xA="@firebase/storage",TA="@firebase/storage-compat",CA="@firebase/firestore",IA="@firebase/firestore-compat",SA="firebase",AA="10.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If="[DEFAULT]",RA={[Cf]:"fire-core",[rA]:"fire-core-compat",[iA]:"fire-analytics",[sA]:"fire-analytics-compat",[aA]:"fire-app-check",[oA]:"fire-app-check-compat",[lA]:"fire-auth",[cA]:"fire-auth-compat",[uA]:"fire-rtdb",[hA]:"fire-rtdb-compat",[dA]:"fire-fn",[fA]:"fire-fn-compat",[pA]:"fire-iid",[mA]:"fire-iid-compat",[gA]:"fire-fcm",[_A]:"fire-fcm-compat",[vA]:"fire-perf",[yA]:"fire-perf-compat",[wA]:"fire-rc",[EA]:"fire-rc-compat",[xA]:"fire-gcs",[TA]:"fire-gcs-compat",[CA]:"fire-fst",[IA]:"fire-fst-compat","fire-js":"fire-js",[SA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru=new Map,Sf=new Map;function NA(t,e){try{t.container.addComponent(e)}catch(n){Ys.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ts(t){const e=t.name;if(Sf.has(e))return Ys.debug(`There were multiple attempts to register component ${e}.`),!1;Sf.set(e,t);for(const n of Ru.values())NA(n,t);return!0}function kl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Qr=new Nl("app","Firebase",kA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=AA;function D3(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:If,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Qr.create("bad-app-name",{appName:String(s)});if(n||(n=S3()),!n)throw Qr.create("no-options");const i=Ru.get(s);if(i){if(el(n,i.options)&&el(r,i.config))return i;throw Qr.create("duplicate-app",{appName:s})}const o=new F9(s);for(const l of Sf.values())o.addComponent(l);const a=new PA(n,r,o);return Ru.set(s,a),a}function Sh(t=If){const e=Ru.get(t);if(!e&&t===If&&S3())return D3();if(!e)throw Qr.create("no-app",{appName:t});return e}function un(t,e,n){var r;let s=(r=RA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ys.warn(a.join(" "));return}ts(new fr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="firebase-heartbeat-database",bA=1,tl="firebase-heartbeat-store";let Jd=null;function O3(){return Jd||(Jd=J9(LA,bA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(tl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Qr.create("idb-open",{originalErrorMessage:t.message})})),Jd}async function DA(t){try{const n=(await O3()).transaction(tl),r=await n.objectStore(tl).get(M3(t));return await n.done,r}catch(e){if(e instanceof Kn)Ys.warn(e.message);else{const n=Qr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ys.warn(n.message)}}}async function $1(t,e){try{const r=(await O3()).transaction(tl,"readwrite");await r.objectStore(tl).put(e,M3(t)),await r.done}catch(n){if(n instanceof Kn)Ys.warn(n.message);else{const r=Qr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ys.warn(r.message)}}}function M3(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=1024,MA=30*24*60*60*1e3;class jA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new FA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=z1();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=MA}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=z1(),{heartbeatsToSend:r,unsentEntries:s}=VA(this._heartbeatsCache.heartbeats),i=Iu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function z1(){return new Date().toISOString().substring(0,10)}function VA(t,e=OA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),B1(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),B1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class FA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return k3()?C9().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await DA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function B1(t){return Iu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t){ts(new fr("platform-logger",e=>new tA(e),"PRIVATE")),ts(new fr("heartbeat",e=>new jA(e),"PRIVATE")),un(Cf,U1,t),un(Cf,U1,"esm2017"),un("fire-js","")}UA("");var $A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},O,Cp=Cp||{},G=$A||self;function Ah(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Pl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function zA(t){return Object.prototype.hasOwnProperty.call(t,Zd)&&t[Zd]||(t[Zd]=++BA)}var Zd="closure_uid_"+(1e9*Math.random()>>>0),BA=0;function WA(t,e,n){return t.call.apply(t.bind,arguments)}function HA(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Et(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Et=WA:Et=HA,Et.apply(null,arguments)}function wc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function nt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function fs(){this.s=this.s,this.o=this.o}var qA=0;fs.prototype.s=!1;fs.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),qA!=0)&&zA(this)};fs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const j3=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Ip(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function W1(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Ah(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function xt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}xt.prototype.h=function(){this.defaultPrevented=!0};var GA=function(){if(!G.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};G.addEventListener("test",n,e),G.removeEventListener("test",n,e)}catch{}return t}();function nl(t){return/^[\s\xa0]*$/.test(t)}function Rh(){var t=G.navigator;return t&&(t=t.userAgent)?t:""}function Dn(t){return Rh().indexOf(t)!=-1}function Sp(t){return Sp[" "](t),t}Sp[" "]=function(){};function KA(t,e){var n=UR;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var QA=Dn("Opera"),co=Dn("Trident")||Dn("MSIE"),V3=Dn("Edge"),Af=V3||co,F3=Dn("Gecko")&&!(Rh().toLowerCase().indexOf("webkit")!=-1&&!Dn("Edge"))&&!(Dn("Trident")||Dn("MSIE"))&&!Dn("Edge"),YA=Rh().toLowerCase().indexOf("webkit")!=-1&&!Dn("Edge");function U3(){var t=G.document;return t?t.documentMode:void 0}var Rf;e:{var e0="",t0=function(){var t=Rh();if(F3)return/rv:([^\);]+)(\)|;)/.exec(t);if(V3)return/Edge\/([\d\.]+)/.exec(t);if(co)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(YA)return/WebKit\/(\S+)/.exec(t);if(QA)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(t0&&(e0=t0?t0[1]:""),co){var n0=U3();if(n0!=null&&n0>parseFloat(e0)){Rf=String(n0);break e}}Rf=e0}var Nf;if(G.document&&co){var H1=U3();Nf=H1||parseInt(Rf,10)||void 0}else Nf=void 0;var XA=Nf;function rl(t,e){if(xt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(F3){e:{try{Sp(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:JA[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&rl.$.h.call(this)}}nt(rl,xt);var JA={2:"touch",3:"pen",4:"mouse"};rl.prototype.h=function(){rl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ll="closure_listenable_"+(1e6*Math.random()|0),ZA=0;function eR(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++ZA,this.fa=this.ia=!1}function Nh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Ap(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function tR(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function $3(t){const e={};for(const n in t)e[n]=t[n];return e}const q1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z3(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<q1.length;i++)n=q1[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function kh(t){this.src=t,this.g={},this.h=0}kh.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Pf(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new eR(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function kf(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=j3(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Nh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Pf(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var Rp="closure_lm_"+(1e6*Math.random()|0),r0={};function B3(t,e,n,r,s){if(r&&r.once)return H3(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)B3(t,e[i],n,r,s);return null}return n=Pp(n),t&&t[Ll]?t.O(e,n,Pl(r)?!!r.capture:!!r,s):W3(t,e,n,!1,r,s)}function W3(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=Pl(s)?!!s.capture:!!s,a=kp(t);if(a||(t[Rp]=a=new kh(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=nR(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)GA||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(G3(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function nR(){function t(n){return e.call(t.src,t.listener,n)}const e=rR;return t}function H3(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)H3(t,e[i],n,r,s);return null}return n=Pp(n),t&&t[Ll]?t.P(e,n,Pl(r)?!!r.capture:!!r,s):W3(t,e,n,!0,r,s)}function q3(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)q3(t,e[i],n,r,s);else r=Pl(r)?!!r.capture:!!r,n=Pp(n),t&&t[Ll]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Pf(i,n,r,s),-1<n&&(Nh(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=kp(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Pf(e,n,r,s)),(n=-1<t?e[t]:null)&&Np(n))}function Np(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Ll])kf(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(G3(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=kp(e))?(kf(n,t),n.h==0&&(n.src=null,e[Rp]=null)):Nh(t)}}}function G3(t){return t in r0?r0[t]:r0[t]="on"+t}function rR(t,e){if(t.fa)t=!0;else{e=new rl(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Np(t),t=n.call(r,e)}return t}function kp(t){return t=t[Rp],t instanceof kh?t:null}var s0="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pp(t){return typeof t=="function"?t:(t[s0]||(t[s0]=function(e){return t.handleEvent(e)}),t[s0])}function tt(){fs.call(this),this.i=new kh(this),this.S=this,this.J=null}nt(tt,fs);tt.prototype[Ll]=!0;tt.prototype.removeEventListener=function(t,e,n,r){q3(this,t,e,n,r)};function lt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new xt(e,t);else if(e instanceof xt)e.target=e.target||t;else{var s=e;e=new xt(r,t),z3(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Ec(o,r,!0,e)&&s}if(o=e.g=t,s=Ec(o,r,!0,e)&&s,s=Ec(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Ec(o,r,!1,e)&&s}tt.prototype.N=function(){if(tt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Nh(n[r]);delete t.g[e],t.h--}}this.J=null};tt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};tt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Ec(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&kf(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var Lp=G.JSON.stringify;class sR{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function iR(){var t=bp;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class oR{constructor(){this.h=this.g=null}add(e,n){const r=K3.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var K3=new sR(()=>new aR,t=>t.reset());class aR{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function lR(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function cR(t){G.setTimeout(()=>{throw t},0)}let sl,il=!1,bp=new oR,Q3=()=>{const t=G.Promise.resolve(void 0);sl=()=>{t.then(uR)}};var uR=()=>{for(var t;t=iR();){try{t.h.call(t.g)}catch(n){cR(n)}var e=K3;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}il=!1};function Ph(t,e){tt.call(this),this.h=t||1,this.g=e||G,this.j=Et(this.qb,this),this.l=Date.now()}nt(Ph,tt);O=Ph.prototype;O.ga=!1;O.T=null;O.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),lt(this,"tick"),this.ga&&(Dp(this),this.start()))}};O.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Dp(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}O.N=function(){Ph.$.N.call(this),Dp(this),delete this.g};function Op(t,e,n){if(typeof t=="function")n&&(t=Et(t,n));else if(t&&typeof t.handleEvent=="function")t=Et(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:G.setTimeout(t,e||0)}function Y3(t){t.g=Op(()=>{t.g=null,t.i&&(t.i=!1,Y3(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class hR extends fs{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Y3(this)}N(){super.N(),this.g&&(G.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ol(t){fs.call(this),this.h=t,this.g={}}nt(ol,fs);var G1=[];function X3(t,e,n,r){Array.isArray(n)||(n&&(G1[0]=n.toString()),n=G1);for(var s=0;s<n.length;s++){var i=B3(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function J3(t){Ap(t.g,function(e,n){this.g.hasOwnProperty(n)&&Np(e)},t),t.g={}}ol.prototype.N=function(){ol.$.N.call(this),J3(this)};ol.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Lh(){this.g=!0}Lh.prototype.Ea=function(){this.g=!1};function dR(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var h=c[0];c=c[1];var d=h.split("_");o=2<=d.length&&d[1]=="type"?o+(h+"="+c+"&"):o+(h+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function fR(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Oi(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+mR(t,n)+(r?" "+r:"")})}function pR(t,e){t.info(function(){return"TIMEOUT: "+e})}Lh.prototype.info=function(){};function mR(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Lp(n)}catch{return e}}var hi={},K1=null;function bh(){return K1=K1||new tt}hi.Ta="serverreachability";function Z3(t){xt.call(this,hi.Ta,t)}nt(Z3,xt);function al(t){const e=bh();lt(e,new Z3(e))}hi.STAT_EVENT="statevent";function e5(t,e){xt.call(this,hi.STAT_EVENT,t),this.stat=e}nt(e5,xt);function kt(t){const e=bh();lt(e,new e5(e,t))}hi.Ua="timingevent";function t5(t,e){xt.call(this,hi.Ua,t),this.size=e}nt(t5,xt);function bl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return G.setTimeout(function(){t()},e)}var Dh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},n5={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Mp(){}Mp.prototype.h=null;function Q1(t){return t.h||(t.h=t.i())}function r5(){}var Dl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function jp(){xt.call(this,"d")}nt(jp,xt);function Vp(){xt.call(this,"c")}nt(Vp,xt);var Lf;function Oh(){}nt(Oh,Mp);Oh.prototype.g=function(){return new XMLHttpRequest};Oh.prototype.i=function(){return{}};Lf=new Oh;function Ol(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new ol(this),this.P=gR,t=Af?125:void 0,this.V=new Ph(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new s5}function s5(){this.i=null,this.g="",this.h=!1}var gR=45e3,i5={},bf={};O=Ol.prototype;O.setTimeout=function(t){this.P=t};function Df(t,e,n){t.L=1,t.A=jh(pr(e)),t.u=n,t.S=!0,o5(t,null)}function o5(t,e){t.G=Date.now(),Ml(t),t.B=pr(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),p5(n.i,"t",r),t.o=0,n=t.l.J,t.h=new s5,t.g=O5(t.l,n?e:null,!t.u),0<t.O&&(t.M=new hR(Et(t.Pa,t,t.g),t.O)),X3(t.U,t.g,"readystatechange",t.nb),e=t.I?$3(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),al(),dR(t.j,t.v,t.B,t.m,t.W,t.u)}O.nb=function(t){t=t.target;const e=this.M;e&&On(t)==3?e.l():this.Pa(t)};O.Pa=function(t){try{if(t==this.g)e:{const h=On(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>h)&&(h!=3||Af||this.g&&(this.h.h||this.g.ja()||Z1(this.g)))){this.J||h!=4||e==7||(e==8||0>=d?al(3):al(2)),Mh(this);var n=this.g.da();this.ca=n;t:if(a5(this)){var r=Z1(this.g);t="";var s=r.length,i=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ps(this),Ta(this);var o="";break t}this.h.i=new G.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,fR(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nl(a)){var c=a;break t}}c=null}if(n=c)Oi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Of(this,n);else{this.i=!1,this.s=3,kt(12),Ps(this),Ta(this);break e}}this.S?(l5(this,h,o),Af&&this.i&&h==3&&(X3(this.U,this.V,"tick",this.mb),this.V.start())):(Oi(this.j,this.m,o,null),Of(this,o)),h==4&&Ps(this),this.i&&!this.J&&(h==4?P5(this.l,this):(this.i=!1,Ml(this)))}else jR(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Ps(this),Ta(this)}}}catch{}finally{}};function a5(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function l5(t,e,n){let r=!0,s;for(;!t.J&&t.o<n.length;)if(s=_R(t,n),s==bf){e==4&&(t.s=4,kt(14),r=!1),Oi(t.j,t.m,null,"[Incomplete Response]");break}else if(s==i5){t.s=4,kt(15),Oi(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Oi(t.j,t.m,s,null),Of(t,s);a5(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,kt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Wp(e),e.M=!0,kt(11))):(Oi(t.j,t.m,n,"[Invalid Chunked Response]"),Ps(t),Ta(t))}O.mb=function(){if(this.g){var t=On(this.g),e=this.g.ja();this.o<e.length&&(Mh(this),l5(this,t,e),this.i&&t!=4&&Ml(this))}};function _R(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?bf:(n=Number(e.substring(n,r)),isNaN(n)?i5:(r+=1,r+n>e.length?bf:(e=e.slice(r,r+n),t.o=r+n,e)))}O.cancel=function(){this.J=!0,Ps(this)};function Ml(t){t.Y=Date.now()+t.P,c5(t,t.P)}function c5(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=bl(Et(t.lb,t),e)}function Mh(t){t.C&&(G.clearTimeout(t.C),t.C=null)}O.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(pR(this.j,this.B),this.L!=2&&(al(),kt(17)),Ps(this),this.s=2,Ta(this)):c5(this,this.Y-t)};function Ta(t){t.l.H==0||t.J||P5(t.l,t)}function Ps(t){Mh(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Dp(t.V),J3(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Of(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Mf(n.i,t))){if(!t.K&&Mf(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Pu(n),$h(n);else break e;Bp(n),kt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=bl(Et(n.ib,n),6e3));if(1>=_5(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ls(n,11)}else if((t.K||n.g==t)&&Pu(n),!nl(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const h=c[3];h!=null&&(n.ra=h,n.l.info("VER="+n.ra));const d=c[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));const f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const _=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var i=r.i;i.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Fp(i,i.h),i.h=null))}if(r.F){const w=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,Ie(r.I,r.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=D5(r,r.J?r.pa:null,r.Y),o.K){v5(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Mh(a),Ml(a)),r.g=o}else N5(r);0<n.j.length&&zh(n)}else c[0]!="stop"&&c[0]!="close"||Ls(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Ls(n,7):zp(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}al(4)}catch{}}function vR(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Ah(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function yR(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Ah(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function u5(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Ah(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=yR(t),r=vR(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var h5=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wR(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function $s(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof $s){this.h=t.h,Nu(this,t.j),this.s=t.s,this.g=t.g,ku(this,t.m),this.l=t.l;var e=t.i,n=new ll;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Y1(this,n),this.o=t.o}else t&&(e=String(t).match(h5))?(this.h=!1,Nu(this,e[1]||"",!0),this.s=ca(e[2]||""),this.g=ca(e[3]||"",!0),ku(this,e[4]),this.l=ca(e[5]||"",!0),Y1(this,e[6]||"",!0),this.o=ca(e[7]||"")):(this.h=!1,this.i=new ll(null,this.h))}$s.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ua(e,X1,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ua(e,X1,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(ua(n,n.charAt(0)=="/"?TR:xR,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ua(n,IR)),t.join("")};function pr(t){return new $s(t)}function Nu(t,e,n){t.j=n?ca(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ku(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Y1(t,e,n){e instanceof ll?(t.i=e,SR(t.i,t.h)):(n||(e=ua(e,CR)),t.i=new ll(e,t.h))}function Ie(t,e,n){t.i.set(e,n)}function jh(t){return Ie(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ca(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ua(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,ER),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ER(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var X1=/[#\/\?@]/g,xR=/[#\?:]/g,TR=/[#\?]/g,CR=/[#\?@]/g,IR=/#/g;function ll(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ps(t){t.g||(t.g=new Map,t.h=0,t.i&&wR(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}O=ll.prototype;O.add=function(t,e){ps(this),this.i=null,t=No(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function d5(t,e){ps(t),e=No(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function f5(t,e){return ps(t),e=No(t,e),t.g.has(e)}O.forEach=function(t,e){ps(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};O.ta=function(){ps(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};O.Z=function(t){ps(this);let e=[];if(typeof t=="string")f5(this,t)&&(e=e.concat(this.g.get(No(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};O.set=function(t,e){return ps(this),this.i=null,t=No(this,t),f5(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};O.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function p5(t,e,n){d5(t,e),0<n.length&&(t.i=null,t.g.set(No(t,e),Ip(n)),t.h+=n.length)}O.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function No(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function SR(t,e){e&&!t.j&&(ps(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(d5(this,r),p5(this,s,n))},t)),t.j=e}var AR=class{constructor(t,e){this.g=t,this.map=e}};function m5(t){this.l=t||RR,G.PerformanceNavigationTiming?(t=G.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(G.g&&G.g.Ka&&G.g.Ka()&&G.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var RR=10;function g5(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function _5(t){return t.h?1:t.g?t.g.size:0}function Mf(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Fp(t,e){t.g?t.g.add(e):t.h=e}function v5(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}m5.prototype.cancel=function(){if(this.i=y5(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function y5(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Ip(t.i)}var NR=class{stringify(t){return G.JSON.stringify(t,void 0)}parse(t){return G.JSON.parse(t,void 0)}};function kR(){this.g=new NR}function PR(t,e,n){const r=n||"";try{u5(t,function(s,i){let o=s;Pl(s)&&(o=Lp(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function LR(t,e){const n=new Lh;if(G.Image){const r=new Image;r.onload=wc(xc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=wc(xc,n,r,"TestLoadImage: error",!1,e),r.onabort=wc(xc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=wc(xc,n,r,"TestLoadImage: timeout",!1,e),G.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function xc(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Vh(t){this.l=t.ec||null,this.j=t.ob||!1}nt(Vh,Mp);Vh.prototype.g=function(){return new Fh(this.l,this.j)};Vh.prototype.i=function(t){return function(){return t}}({});function Fh(t,e){tt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Up,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nt(Fh,tt);var Up=0;O=Fh.prototype;O.open=function(t,e){if(this.readyState!=Up)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,cl(this)};O.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||G).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};O.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jl(this)),this.readyState=Up};O.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,cl(this)),this.g&&(this.readyState=3,cl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof G.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;w5(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function w5(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}O.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?jl(this):cl(this),this.readyState==3&&w5(this)}};O.Za=function(t){this.g&&(this.response=this.responseText=t,jl(this))};O.Ya=function(t){this.g&&(this.response=t,jl(this))};O.ka=function(){this.g&&jl(this)};function jl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,cl(t)}O.setRequestHeader=function(t,e){this.v.append(t,e)};O.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};O.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function cl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Fh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var bR=G.JSON.parse;function be(t){tt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=E5,this.L=this.M=!1}nt(be,tt);var E5="",DR=/^https?$/i,OR=["POST","PUT"];O=be.prototype;O.Oa=function(t){this.M=t};O.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Lf.g(),this.C=this.u?Q1(this.u):Q1(Lf),this.g.onreadystatechange=Et(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){J1(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=G.FormData&&t instanceof G.FormData,!(0<=j3(OR,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{C5(this),0<this.B&&((this.L=MR(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Et(this.ua,this)):this.A=Op(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){J1(this,i)}};function MR(t){return co&&typeof t.timeout=="number"&&t.ontimeout!==void 0}O.ua=function(){typeof Cp<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,lt(this,"timeout"),this.abort(8))};function J1(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,x5(t),Uh(t)}function x5(t){t.F||(t.F=!0,lt(t,"complete"),lt(t,"error"))}O.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,lt(this,"complete"),lt(this,"abort"),Uh(this))};O.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Uh(this,!0)),be.$.N.call(this)};O.La=function(){this.s||(this.G||this.v||this.l?T5(this):this.kb())};O.kb=function(){T5(this)};function T5(t){if(t.h&&typeof Cp<"u"&&(!t.C[1]||On(t)!=4||t.da()!=2)){if(t.v&&On(t)==4)Op(t.La,0,t);else if(lt(t,"readystatechange"),On(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(h5)[1]||null;!s&&G.self&&G.self.location&&(s=G.self.location.protocol.slice(0,-1)),r=!DR.test(s?s.toLowerCase():"")}n=r}if(n)lt(t,"complete"),lt(t,"success");else{t.m=6;try{var i=2<On(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",x5(t)}}finally{Uh(t)}}}}function Uh(t,e){if(t.g){C5(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||lt(t,"ready");try{n.onreadystatechange=r}catch{}}}function C5(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(G.clearTimeout(t.A),t.A=null)}O.isActive=function(){return!!this.g};function On(t){return t.g?t.g.readyState:0}O.da=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}};O.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};O.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),bR(e)}};function Z1(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case E5:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function jR(t){const e={};t=(t.g&&2<=On(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(nl(t[r]))continue;var n=lR(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}tR(e,function(r){return r.join(", ")})}O.Ia=function(){return this.m};O.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function I5(t){let e="";return Ap(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function $p(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=I5(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ie(t,e,n))}function Go(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function S5(t){this.Ga=0,this.j=[],this.l=new Lh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Go("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Go("baseRetryDelayMs",5e3,t),this.hb=Go("retryDelaySeedMs",1e4,t),this.eb=Go("forwardChannelMaxRetries",2,t),this.xa=Go("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new m5(t&&t.concurrentRequestLimit),this.Ja=new kR,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}O=S5.prototype;O.ra=8;O.H=1;function zp(t){if(A5(t),t.H==3){var e=t.W++,n=pr(t.I);if(Ie(n,"SID",t.K),Ie(n,"RID",e),Ie(n,"TYPE","terminate"),Vl(t,n),e=new Ol(t,t.l,e),e.L=2,e.A=jh(pr(n)),n=!1,G.navigator&&G.navigator.sendBeacon)try{n=G.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&G.Image&&(new Image().src=e.A,n=!0),n||(e.g=O5(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Ml(e)}b5(t)}function $h(t){t.g&&(Wp(t),t.g.cancel(),t.g=null)}function A5(t){$h(t),t.u&&(G.clearTimeout(t.u),t.u=null),Pu(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&G.clearTimeout(t.m),t.m=null)}function zh(t){if(!g5(t.i)&&!t.m){t.m=!0;var e=t.Na;sl||Q3(),il||(sl(),il=!0),bp.add(e,t),t.C=0}}function VR(t,e){return _5(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=bl(Et(t.Na,t,e),L5(t,t.C)),t.C++,!0)}O.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new Ol(this,this.l,t);let i=this.s;if(this.U&&(i?(i=$3(i),z3(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=R5(this,s,e),n=pr(this.I),Ie(n,"RID",t),Ie(n,"CVER",22),this.F&&Ie(n,"X-HTTP-Session-Id",this.F),Vl(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(I5(i)))+"&"+e:this.o&&$p(n,this.o,i)),Fp(this.i,s),this.bb&&Ie(n,"TYPE","init"),this.P?(Ie(n,"$req",e),Ie(n,"SID","null"),s.aa=!0,Df(s,n,null)):Df(s,n,e),this.H=2}}else this.H==3&&(t?e_(this,t):this.j.length==0||g5(this.i)||e_(this))};function e_(t,e){var n;e?n=e.m:n=t.W++;const r=pr(t.I);Ie(r,"SID",t.K),Ie(r,"RID",n),Ie(r,"AID",t.V),Vl(t,r),t.o&&t.s&&$p(r,t.o,t.s),n=new Ol(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=R5(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Fp(t.i,n),Df(n,r,e)}function Vl(t,e){t.na&&Ap(t.na,function(n,r){Ie(e,r,n)}),t.h&&u5({},function(n,r){Ie(e,r,n)})}function R5(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Et(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const h=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{PR(h,o,"req"+c+"_")}catch{r&&r(h)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function N5(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;sl||Q3(),il||(sl(),il=!0),bp.add(e,t),t.A=0}}function Bp(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=bl(Et(t.Ma,t),L5(t,t.A)),t.A++,!0)}O.Ma=function(){if(this.u=null,k5(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=bl(Et(this.jb,this),t)}};O.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,kt(10),$h(this),k5(this))};function Wp(t){t.B!=null&&(G.clearTimeout(t.B),t.B=null)}function k5(t){t.g=new Ol(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=pr(t.wa);Ie(e,"RID","rpc"),Ie(e,"SID",t.K),Ie(e,"AID",t.V),Ie(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ie(e,"TO",t.qa),Ie(e,"TYPE","xmlhttp"),Vl(t,e),t.o&&t.s&&$p(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=jh(pr(e)),n.u=null,n.S=!0,o5(n,t)}O.ib=function(){this.v!=null&&(this.v=null,$h(this),Bp(this),kt(19))};function Pu(t){t.v!=null&&(G.clearTimeout(t.v),t.v=null)}function P5(t,e){var n=null;if(t.g==e){Pu(t),Wp(t),t.g=null;var r=2}else if(Mf(t.i,e))n=e.F,v5(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var s=t.C;r=bh(),lt(r,new t5(r,n)),zh(t)}else N5(t);else if(s=e.s,s==3||s==0&&0<e.ca||!(r==1&&VR(t,e)||r==2&&Bp(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Ls(t,5);break;case 4:Ls(t,10);break;case 3:Ls(t,6);break;default:Ls(t,2)}}}function L5(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ls(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Et(t.pb,t);n||(n=new $s("//www.google.com/images/cleardot.gif"),G.location&&G.location.protocol=="http"||Nu(n,"https"),jh(n)),LR(n.toString(),r)}else kt(2);t.H=0,t.h&&t.h.za(e),b5(t),A5(t)}O.pb=function(t){t?(this.l.info("Successfully pinged google.com"),kt(2)):(this.l.info("Failed to ping google.com"),kt(1))};function b5(t){if(t.H=0,t.ma=[],t.h){const e=y5(t.i);(e.length!=0||t.j.length!=0)&&(W1(t.ma,e),W1(t.ma,t.j),t.i.i.length=0,Ip(t.j),t.j.length=0),t.h.ya()}}function D5(t,e,n){var r=n instanceof $s?pr(n):new $s(n);if(r.g!="")e&&(r.g=e+"."+r.g),ku(r,r.m);else{var s=G.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new $s(null);r&&Nu(i,r),e&&(i.g=e),s&&ku(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&Ie(r,n,e),Ie(r,"VER",t.ra),Vl(t,r),r}function O5(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new be(new Vh({ob:n})):new be(t.va),e.Oa(t.J),e}O.isActive=function(){return!!this.h&&this.h.isActive(this)};function M5(){}O=M5.prototype;O.Ba=function(){};O.Aa=function(){};O.za=function(){};O.ya=function(){};O.isActive=function(){return!0};O.Va=function(){};function Lu(){if(co&&!(10<=Number(XA)))throw Error("Environmental error: no available transport.")}Lu.prototype.g=function(t,e){return new Jt(t,e)};function Jt(t,e){tt.call(this),this.g=new S5(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!nl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!nl(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ko(this)}nt(Jt,tt);Jt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;kt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=D5(t,null,t.Y),zh(t)};Jt.prototype.close=function(){zp(this.g)};Jt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Lp(t),t=n);e.j.push(new AR(e.fb++,t)),e.H==3&&zh(e)};Jt.prototype.N=function(){this.g.h=null,delete this.j,zp(this.g),delete this.g,Jt.$.N.call(this)};function j5(t){jp.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}nt(j5,jp);function V5(){Vp.call(this),this.status=1}nt(V5,Vp);function ko(t){this.g=t}nt(ko,M5);ko.prototype.Ba=function(){lt(this.g,"a")};ko.prototype.Aa=function(t){lt(this.g,new j5(t))};ko.prototype.za=function(t){lt(this.g,new V5)};ko.prototype.ya=function(){lt(this.g,"b")};function FR(){this.blockSize=-1}function Rn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}nt(Rn,FR);Rn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function i0(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}Rn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)i0(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){i0(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){i0(this,r),s=0;break}}this.h=s,this.i+=e};Rn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function pe(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var UR={};function Hp(t){return-128<=t&&128>t?KA(t,function(e){return new pe([e|0],0>e?-1:0)}):new pe([t|0],0>t?-1:0)}function Mn(t){if(isNaN(t)||!isFinite(t))return Hi;if(0>t)return st(Mn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=jf;return new pe(e,0)}function F5(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return st(F5(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Mn(Math.pow(e,8)),r=Hi,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=Mn(Math.pow(e,i)),r=r.R(i).add(Mn(o))):(r=r.R(n),r=r.add(Mn(o)))}return r}var jf=4294967296,Hi=Hp(0),Vf=Hp(1),t_=Hp(16777216);O=pe.prototype;O.ea=function(){if(on(this))return-st(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:jf+r)*e,e*=jf}return t};O.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(nr(this))return"0";if(on(this))return"-"+st(this).toString(t);for(var e=Mn(Math.pow(t,6)),n=this,r="";;){var s=Du(n,e).g;n=bu(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,nr(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};O.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function nr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function on(t){return t.h==-1}O.X=function(t){return t=bu(this,t),on(t)?-1:nr(t)?0:1};function st(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new pe(n,~t.h).add(Vf)}O.abs=function(){return on(this)?st(this):this};O.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new pe(n,n[n.length-1]&-2147483648?-1:0)};function bu(t,e){return t.add(st(e))}O.R=function(t){if(nr(this)||nr(t))return Hi;if(on(this))return on(t)?st(this).R(st(t)):st(st(this).R(t));if(on(t))return st(this.R(st(t)));if(0>this.X(t_)&&0>t.X(t_))return Mn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,Tc(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Tc(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Tc(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Tc(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new pe(n,0)};function Tc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ko(t,e){this.g=t,this.h=e}function Du(t,e){if(nr(e))throw Error("division by zero");if(nr(t))return new Ko(Hi,Hi);if(on(t))return e=Du(st(t),e),new Ko(st(e.g),st(e.h));if(on(e))return e=Du(t,st(e)),new Ko(st(e.g),e.h);if(30<t.g.length){if(on(t)||on(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Vf,r=e;0>=r.X(t);)n=n_(n),r=n_(r);var s=vi(n,1),i=vi(r,1);for(r=vi(r,2),n=vi(n,2);!nr(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=vi(r,1),n=vi(n,1)}return e=bu(t,s.R(e)),new Ko(s,e)}for(s=Hi;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Mn(n),o=i.R(e);on(o)||0<o.X(t);)n-=r,i=Mn(n),o=i.R(e);nr(i)&&(i=Vf),s=s.add(i),t=bu(t,o)}return new Ko(s,t)}O.gb=function(t){return Du(this,t).h};O.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new pe(n,this.h&t.h)};O.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new pe(n,this.h|t.h)};O.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new pe(n,this.h^t.h)};function n_(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new pe(n,t.h)}function vi(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new pe(s,t.h)}Lu.prototype.createWebChannel=Lu.prototype.g;Jt.prototype.send=Jt.prototype.u;Jt.prototype.open=Jt.prototype.m;Jt.prototype.close=Jt.prototype.close;Dh.NO_ERROR=0;Dh.TIMEOUT=8;Dh.HTTP_ERROR=6;n5.COMPLETE="complete";r5.EventType=Dl;Dl.OPEN="a";Dl.CLOSE="b";Dl.ERROR="c";Dl.MESSAGE="d";tt.prototype.listen=tt.prototype.O;be.prototype.listenOnce=be.prototype.P;be.prototype.getLastError=be.prototype.Sa;be.prototype.getLastErrorCode=be.prototype.Ia;be.prototype.getStatus=be.prototype.da;be.prototype.getResponseJson=be.prototype.Wa;be.prototype.getResponseText=be.prototype.ja;be.prototype.send=be.prototype.ha;be.prototype.setWithCredentials=be.prototype.Oa;Rn.prototype.digest=Rn.prototype.l;Rn.prototype.reset=Rn.prototype.reset;Rn.prototype.update=Rn.prototype.j;pe.prototype.add=pe.prototype.add;pe.prototype.multiply=pe.prototype.R;pe.prototype.modulo=pe.prototype.gb;pe.prototype.compare=pe.prototype.X;pe.prototype.toNumber=pe.prototype.ea;pe.prototype.toString=pe.prototype.toString;pe.prototype.getBits=pe.prototype.D;pe.fromNumber=Mn;pe.fromString=F5;var $R=function(){return new Lu},zR=function(){return bh()},o0=Dh,BR=n5,WR=hi,r_={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Cc=r5,HR=be,qR=Rn,qi=pe;const s_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mt.UNAUTHENTICATED=new mt(null),mt.GOOGLE_CREDENTIALS=new mt("google-credentials-uid"),mt.FIRST_PARTY=new mt("first-party-uid"),mt.MOCK_USER=new mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Po="10.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new Ih("@firebase/firestore");function Qo(){return Xs.logLevel}function b(t,...e){if(Xs.logLevel<=Z.DEBUG){const n=e.map(qp);Xs.debug(`Firestore (${Po}): ${t}`,...n)}}function Hn(t,...e){if(Xs.logLevel<=Z.ERROR){const n=e.map(qp);Xs.error(`Firestore (${Po}): ${t}`,...n)}}function uo(t,...e){if(Xs.logLevel<=Z.WARN){const n=e.map(qp);Xs.warn(`Firestore (${Po}): ${t}`,...n)}}function qp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q(t="Unexpected state"){const e=`FIRESTORE (${Po}) INTERNAL ASSERTION FAILED: `+t;throw Hn(e),new Error(e)}function we(t,e){t||q()}function Q(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends Kn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(mt.UNAUTHENTICATED))}shutdown(){}}class KR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class QR{constructor(e){this.t=e,this.currentUser=mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ar,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{b("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(b("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ar)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(b("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new U5(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new mt(e)}}class YR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=mt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class XR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new YR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class JR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&b("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,b("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{b("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):b("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new JR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=e7(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ue(t,e){return t<e?-1:t>e?1:0}function ho(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new L(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ge(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.timestamp=e}static fromTimestamp(e){return new K(e)}static min(){return new K(new Ge(0,0))}static max(){return new K(new Ge(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n,r){n===void 0?n=0:n>e.length&&q(),r===void 0?r=e.length-n:r>e.length-n&&q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ul.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ul?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ve extends ul{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new L(A.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const t7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends ul{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return t7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ot(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new L(A.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new L(A.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new L(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new L(A.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.path=e}static fromPath(e){return new z(ve.fromString(e))}static fromName(e){return new z(ve.fromString(e).popFirst(5))}static empty(){return new z(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new z(new ve(e.slice()))}}function n7(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=K.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new ns(s,z.empty(),e)}function r7(t){return new ns(t.readTime,t.key,-1)}class ns{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ns(K.min(),z.empty(),-1)}static max(){return new ns(K.max(),z.empty(),-1)}}function s7(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=z.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class o7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(t){if(t.code!==A.FAILED_PRECONDITION||t.message!==i7)throw t;b("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,r)=>{n(e)})}static reject(e){return new N((n,r)=>{r(e)})}static waitFor(e){return new N((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=N.resolve(!1);for(const r of e)n=n.next(s=>s?N.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new N((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new N((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new ar,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ca(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Kp(r.target.error);this.V.reject(new Ca(e,s))}}static open(e,n,r,s){try{return new Gp(n,e.transaction(s,r))}catch(i){throw new Ca(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(b("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new l7(n)}}class bs{constructor(e,n,r){this.name=e,this.version=n,this.p=r,bs.S(Be())===12.2&&Hn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return b("SimpleDb","Removing database:",e),As(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!k3())return!1;if(bs.C())return!0;const e=Be(),n=bs.S(e),r=0<n&&n<10,s=bs.v(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(b("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Ca(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new L(A.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new L(A.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ca(e,o))},s.onupgradeneeded=i=>{b("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.N(o,s.transaction,i.oldVersion,this.version).next(()=>{b("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=Gp.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),N.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(b("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class a7{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return As(this.k.delete())}}class Ca extends L{constructor(e,n){super(A.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ul(t){return t.name==="IndexedDbTransactionError"}class l7{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(b("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(b("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),As(r)}add(e){return b("SimpleDb","ADD",this.store.name,e,e),As(this.store.add(e))}get(e){return As(this.store.get(e)).next(n=>(n===void 0&&(n=null),b("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return b("SimpleDb","DELETE",this.store.name,e),As(this.store.delete(e))}count(){return b("SimpleDb","COUNT",this.store.name),As(this.store.count())}W(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new N((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.G(i,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new N((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}H(e,n){b("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const s=this.cursor(r);return this.G(s,(i,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.G(s,n)}Z(e){const n=this.cursor({});return new N((r,s)=>{n.onerror=i=>{const o=Kp(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new N((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new a7(a),c=n(a.primaryKey,a.value,l);if(c instanceof N){const h=c.catch(d=>(l.done(),N.reject(d)));r.push(h)}l.isDone?s():l.$===null?a.continue():a.continue(l.$)}}).next(()=>N.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function As(t){return new N((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Kp(r.target.error);n(s)}})}let i_=!1;function Kp(t){const e=bs.S(Be());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new L("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return i_||(i_=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}Qp._e=-1;function Bh(t){return t==null}function Ou(t){return t===0&&1/t==-1/0}function c7(t){return typeof t=="number"&&Number.isInteger(t)&&!Ou(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function di(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function z5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let We=class Ff{constructor(e,n){this.comparator=e,this.root=n||Yr.EMPTY}insert(e,n){return new Ff(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new Ff(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ic(this.root,e,this.comparator,!0)}},Ic=class{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Yr=class Yn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Yn.RED,this.left=s??Yn.EMPTY,this.right=i??Yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Yn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Yn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw q();const e=this.left.check();if(e!==this.right.check())throw q();return e+(this.isRed()?0:1)}};Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1;Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw q()}get value(){throw q()}get color(){throw q()}get left(){throw q()}get right(){throw q()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Yr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new a_(this.data.getIterator())}getIteratorFrom(e){return new a_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ct(this.comparator);return n.data=e,n}}class a_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Ht([])}unionWith(e){let n=new ct(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ht(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ho(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new B5("Invalid base64 string: "+i):i}}(e);return new It(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new It(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const u7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(t){if(we(!!t),typeof t=="string"){let e=0;const n=u7.exec(t);if(we(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Js(t){return typeof t=="string"?It.fromBase64String(t):It.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Yp(t){const e=t.mapValue.fields.__previous_value__;return Wh(e)?Yp(e):e}function hl(t){const e=rs(t.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class dl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new dl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof dl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Zs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wh(t)?4:d7(t)?9007199254740991:10:q()}function qn(t,e){if(t===e)return!0;const n=Zs(t);if(n!==Zs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hl(t).isEqual(hl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=rs(s.timestampValue),a=rs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Js(s.bytesValue).isEqual(Js(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Fe(s.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(s.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Fe(s.integerValue)===Fe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Fe(s.doubleValue),a=Fe(i.doubleValue);return o===a?Ou(o)===Ou(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ho(t.arrayValue.values||[],e.arrayValue.values||[],qn);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(o_(o)!==o_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!qn(o[l],a[l])))return!1;return!0}(t,e);default:return q()}}function fl(t,e){return(t.values||[]).find(n=>qn(n,e))!==void 0}function fo(t,e){if(t===e)return 0;const n=Zs(t),r=Zs(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Fe(i.integerValue||i.doubleValue),l=Fe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return l_(t.timestampValue,e.timestampValue);case 4:return l_(hl(t),hl(e));case 5:return ue(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Js(i),l=Js(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ue(a[c],l[c]);if(h!==0)return h}return ue(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ue(Fe(i.latitude),Fe(o.latitude));return a!==0?a:ue(Fe(i.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=fo(a[c],l[c]);if(h)return h}return ue(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Sc.mapValue&&o===Sc.mapValue)return 0;if(i===Sc.mapValue)return 1;if(o===Sc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=ue(l[d],h[d]);if(f!==0)return f;const m=fo(a[l[d]],c[h[d]]);if(m!==0)return m}return ue(l.length,h.length)}(t.mapValue,e.mapValue);default:throw q()}}function l_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=rs(t),r=rs(e),s=ue(n.seconds,r.seconds);return s!==0?s:ue(n.nanos,r.nanos)}function po(t){return Uf(t)}function Uf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=rs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Js(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Uf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Uf(n.fields[o])}`;return s+"}"}(t.mapValue):q()}function Mu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function $f(t){return!!t&&"integerValue"in t}function Xp(t){return!!t&&"arrayValue"in t}function c_(t){return!!t&&"nullValue"in t}function u_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hc(t){return!!t&&"mapValue"in t}function Ia(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return di(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ia(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ia(t.arrayValue.values[n]);return e}return Object.assign({},t)}function d7(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Hc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ia(n)}setAll(e){let n=ot.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Ia(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Hc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Hc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){di(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new jt(Ia(this.value))}}function W5(t){const e=[];return di(t.fields,(n,r)=>{const s=new ot([n]);if(Hc(r)){const i=W5(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ht(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new _t(e,0,K.min(),K.min(),K.min(),jt.empty(),0)}static newFoundDocument(e,n,r,s){return new _t(e,1,n,K.min(),r,s,0)}static newNoDocument(e,n){return new _t(e,2,n,K.min(),K.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new _t(e,3,n,K.min(),K.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n){this.position=e,this.inclusive=n}}function h_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=z.comparator(z.fromName(o.referenceValue),n.key):r=fo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function d_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n="asc"){this.field=e,this.dir=n}}function f7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{}class $e extends H5{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new m7(e,n,r):n==="array-contains"?new v7(e,r):n==="in"?new y7(e,r):n==="not-in"?new w7(e,r):n==="array-contains-any"?new E7(e,r):new $e(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new g7(e,r):new _7(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(fo(n,this.value)):n!==null&&Zs(this.value)===Zs(n)&&this.matchesComparison(fo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends H5{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Nn(e,n)}matches(e){return q5(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function q5(t){return t.op==="and"}function G5(t){return p7(t)&&q5(t)}function p7(t){for(const e of t.filters)if(e instanceof Nn)return!1;return!0}function zf(t){if(t instanceof $e)return t.field.canonicalString()+t.op.toString()+po(t.value);if(G5(t))return t.filters.map(e=>zf(e)).join(",");{const e=t.filters.map(n=>zf(n)).join(",");return`${t.op}(${e})`}}function K5(t,e){return t instanceof $e?function(r,s){return s instanceof $e&&r.op===s.op&&r.field.isEqual(s.field)&&qn(r.value,s.value)}(t,e):t instanceof Nn?function(r,s){return s instanceof Nn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&K5(o,s.filters[a]),!0):!1}(t,e):void q()}function Q5(t){return t instanceof $e?function(n){return`${n.field.canonicalString()} ${n.op} ${po(n.value)}`}(t):t instanceof Nn?function(n){return n.op.toString()+" {"+n.getFilters().map(Q5).join(" ,")+"}"}(t):"Filter"}class m7 extends $e{constructor(e,n,r){super(e,n,r),this.key=z.fromName(r.referenceValue)}matches(e){const n=z.comparator(e.key,this.key);return this.matchesComparison(n)}}class g7 extends $e{constructor(e,n){super(e,"in",n),this.keys=Y5("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class _7 extends $e{constructor(e,n){super(e,"not-in",n),this.keys=Y5("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Y5(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>z.fromName(r.referenceValue))}class v7 extends $e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xp(n)&&fl(n.arrayValue,this.value)}}class y7 extends $e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fl(this.value.arrayValue,n)}}class w7 extends $e{constructor(e,n){super(e,"not-in",n)}matches(e){if(fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!fl(this.value.arrayValue,n)}}class E7 extends $e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>fl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function f_(t,e=null,n=[],r=[],s=null,i=null,o=null){return new x7(t,e,n,r,s,i,o)}function Jp(t){const e=Q(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>zf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Bh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>po(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>po(r)).join(",")),e.ce=n}return e.ce}function Zp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!f7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!K5(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!d_(t.startAt,e.startAt)&&d_(t.endAt,e.endAt)}function Bf(t){return z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function T7(t,e,n,r,s,i,o,a){return new fi(t,e,n,r,s,i,o,a)}function Hh(t){return new fi(t)}function p_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function em(t){return t.collectionGroup!==null}function Gi(t){const e=Q(t);if(e.le===null){e.le=[];const n=new Set;for(const i of e.explicitOrderBy)e.le.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ct(ot.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.le.push(new pl(i,r))}),n.has(ot.keyField().canonicalString())||e.le.push(new pl(ot.keyField(),r))}return e.le}function $n(t){const e=Q(t);return e.he||(e.he=C7(e,Gi(t))),e.he}function C7(t,e){if(t.limitType==="F")return f_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new pl(s.field,i)});const n=t.endAt?new mo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new mo(t.startAt.position,t.startAt.inclusive):null;return f_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Wf(t,e){const n=t.filters.concat([e]);return new fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ju(t,e,n){return new fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qh(t,e){return Zp($n(t),$n(e))&&t.limitType===e.limitType}function X5(t){return`${Jp($n(t))}|lt:${t.limitType}`}function wi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Q5(s)).join(", ")}]`),Bh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>po(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>po(s)).join(",")),`Target(${r})`}($n(t))}; limitType=${t.limitType})`}function Gh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Gi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=h_(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Gi(r),s)||r.endAt&&!function(o,a,l){const c=h_(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Gi(r),s))}(t,e)}function I7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function J5(t){return(e,n)=>{let r=!1;for(const s of Gi(t)){const i=S7(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function S7(t,e,n){const r=t.field.isKeyField()?z.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?fo(l,c):q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){di(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return z5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7=new We(z.comparator);function mr(){return A7}const Z5=new We(z.comparator);function ha(...t){let e=Z5;for(const n of t)e=e.insert(n.key,n);return e}function eE(t){let e=Z5;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ds(){return Sa()}function tE(){return Sa()}function Sa(){return new Lo(t=>t.toString(),(t,e)=>t.isEqual(e))}const R7=new We(z.comparator),N7=new ct(z.comparator);function ee(...t){let e=N7;for(const n of t)e=e.add(n);return e}const k7=new ct(ue);function P7(){return k7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ou(e)?"-0":e}}function rE(t){return{integerValue:""+t}}function L7(t,e){return c7(e)?rE(e):nE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(){this._=void 0}}function b7(t,e,n){return t instanceof ml?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Wh(i)&&(i=Yp(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof go?iE(t,e):t instanceof gl?oE(t,e):function(s,i){const o=sE(s,i),a=m_(o)+m_(s.Ie);return $f(o)&&$f(s.Ie)?rE(a):nE(s.serializer,a)}(t,e)}function D7(t,e,n){return t instanceof go?iE(t,e):t instanceof gl?oE(t,e):n}function sE(t,e){return t instanceof Vu?function(r){return $f(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ml extends Kh{}class go extends Kh{constructor(e){super(),this.elements=e}}function iE(t,e){const n=aE(e);for(const r of t.elements)n.some(s=>qn(s,r))||n.push(r);return{arrayValue:{values:n}}}class gl extends Kh{constructor(e){super(),this.elements=e}}function oE(t,e){let n=aE(e);for(const r of t.elements)n=n.filter(s=>!qn(s,r));return{arrayValue:{values:n}}}class Vu extends Kh{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function m_(t){return Fe(t.integerValue||t.doubleValue)}function aE(t){return Xp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,n){this.field=e,this.transform=n}}function O7(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof go&&s instanceof go||r instanceof gl&&s instanceof gl?ho(r.elements,s.elements,qn):r instanceof Vu&&s instanceof Vu?qn(r.Ie,s.Ie):r instanceof ml&&s instanceof ml}(t.transform,e.transform)}class M7{constructor(e,n){this.version=e,this.transformResults=n}}class hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hn}static exists(e){return new hn(void 0,e)}static updateTime(e){return new hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qh{}function cE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tm(t.key,hn.none()):new $l(t.key,t.data,hn.none());{const n=t.data,r=jt.empty();let s=new ct(ot.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ms(t.key,r,new Ht(s.toArray()),hn.none())}}function j7(t,e,n){t instanceof $l?function(s,i,o){const a=s.value.clone(),l=__(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ms?function(s,i,o){if(!qc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=__(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(uE(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Aa(t,e,n,r){return t instanceof $l?function(i,o,a,l){if(!qc(i.precondition,o))return a;const c=i.value.clone(),h=v_(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ms?function(i,o,a,l){if(!qc(i.precondition,o))return a;const c=v_(i.fieldTransforms,l,o),h=o.data;return h.setAll(uE(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,o,a){return qc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function V7(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=sE(r.transform,s||null);i!=null&&(n===null&&(n=jt.empty()),n.set(r.field,i))}return n||null}function g_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ho(r,s,(i,o)=>O7(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $l extends Qh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ms extends Qh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function uE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function __(t,e,n){const r=new Map;we(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,D7(o,a,n[s]))}return r}function v_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,b7(i,o,e))}return r}class tm extends Qh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class F7 extends Qh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&j7(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Aa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Aa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=tE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=cE(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(K.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ee())}isEqual(e){return this.batchId===e.batchId&&ho(this.mutations,e.mutations,(n,r)=>g_(n,r))&&ho(this.baseMutations,e.baseMutations,(n,r)=>g_(n,r))}}class nm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){we(e.mutations.length===r.length);let s=function(){return R7}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new nm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve,re;function B7(t){switch(t){default:return q();case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return!1;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return!0}}function hE(t){if(t===void 0)return Hn("GRPC error has no .code"),A.UNKNOWN;switch(t){case Ve.OK:return A.OK;case Ve.CANCELLED:return A.CANCELLED;case Ve.UNKNOWN:return A.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return A.INTERNAL;case Ve.UNAVAILABLE:return A.UNAVAILABLE;case Ve.UNAUTHENTICATED:return A.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case Ve.NOT_FOUND:return A.NOT_FOUND;case Ve.ALREADY_EXISTS:return A.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return A.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case Ve.ABORTED:return A.ABORTED;case Ve.OUT_OF_RANGE:return A.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return A.UNIMPLEMENTED;case Ve.DATA_LOSS:return A.DATA_LOSS;default:return q()}}(re=Ve||(Ve={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7=new qi([4294967295,4294967295],0);function y_(t){const e=W7().encode(t),n=new qR;return n.update(e),new Uint8Array(n.digest())}function w_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new qi([n,r],0),new qi([s,i],0)]}class rm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new da(`Invalid padding: ${n}`);if(r<0)throw new da(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new da(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new da(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=qi.fromNumber(this.Te)}de(e,n,r){let s=e.add(n.multiply(qi.fromNumber(r)));return s.compare(H7)===1&&(s=new qi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=y_(e),[r,s]=w_(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new rm(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=y_(e),[r,s]=w_(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class da extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,zl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yh(K.min(),s,new We(ue),mr(),ee())}}class zl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new zl(r,n,ee(),ee(),ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n,r,s){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=s}}class dE{constructor(e,n){this.targetId=e,this.fe=n}}class fE{constructor(e,n,r=It.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class E_{constructor(){this.ge=0,this.pe=T_(),this.ye=It.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ee(),n=ee(),r=ee();return this.pe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:q()}}),new zl(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=T_()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,we(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class q7{constructor(e){this.Be=e,this.ke=new Map,this.qe=mr(),this.Qe=x_(),this.Ke=new We(ue)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(e){const n=e.targetId,r=e.fe.count,s=this.Ye(n);if(s){const i=s.target;if(Bf(i))if(r===0){const o=new z(i.path);this.We(n,o,_t.newNoDocument(o,K.min()))}else we(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Js(r).toUint8Array()}catch(l){if(l instanceof B5)return uo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new rm(o,s,i)}catch(l){return uo(l instanceof da?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.We(n,i,null),s++)}),s}it(e){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&Bf(a.target)){const l=new z(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,_t.newNoDocument(l,e))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=ee();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(e));const s=new Yh(e,n,this.Ke,this.qe,r);return this.qe=mr(),this.Qe=x_(),this.Ke=new We(ue),s}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new E_,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new ct(ue),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||b("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new E_),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function x_(){return new We(z.comparator)}function T_(){return new We(z.comparator)}const G7={asc:"ASCENDING",desc:"DESCENDING"},K7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Q7={and:"AND",or:"OR"};class Y7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Hf(t,e){return t.useProto3Json||Bh(e)?e:{value:e}}function Fu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function X7(t,e){return Fu(t,e.toTimestamp())}function zn(t){return we(!!t),K.fromTimestamp(function(n){const r=rs(n);return new Ge(r.seconds,r.nanos)}(t))}function sm(t,e){return qf(t,e).canonicalString()}function qf(t,e){const n=function(s){return new ve(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function mE(t){const e=ve.fromString(t);return we(wE(e)),e}function Gf(t,e){return sm(t.databaseId,e.path)}function a0(t,e){const n=mE(e);if(n.get(1)!==t.databaseId.projectId)throw new L(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new z(_E(n))}function gE(t,e){return sm(t.databaseId,e)}function J7(t){const e=mE(t);return e.length===4?ve.emptyPath():_E(e)}function Kf(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _E(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function C_(t,e,n){return{name:Gf(t,e),fields:n.value.mapValue.fields}}function Z7(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:q()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(we(h===void 0||typeof h=="string"),It.fromBase64String(h||"")):(we(h===void 0||h instanceof Uint8Array),It.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?A.UNKNOWN:hE(c.code);return new L(h,c.message||"")}(o);n=new fE(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=a0(t,r.document.name),i=zn(r.document.updateTime),o=r.document.createTime?zn(r.document.createTime):K.min(),a=new jt({mapValue:{fields:r.document.fields}}),l=_t.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Gc(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=a0(t,r.document),i=r.readTime?zn(r.readTime):K.min(),o=_t.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Gc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=a0(t,r.document),i=r.removedTargetIds||[];n=new Gc([],i,s,null)}else{if(!("filter"in e))return q();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new z7(s,i),a=r.targetId;n=new dE(a,o)}}return n}function eN(t,e){let n;if(e instanceof $l)n={update:C_(t,e.key,e.value)};else if(e instanceof tm)n={delete:Gf(t,e.key)};else if(e instanceof ms)n={update:C_(t,e.key,e.data),updateMask:cN(e.fieldMask)};else{if(!(e instanceof F7))return q();n={verify:Gf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof ml)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof go)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof gl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Vu)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:X7(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:q()}(t,e.precondition)),n}function tN(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?zn(s.updateTime):zn(i);return o.isEqual(K.min())&&(o=zn(i)),new M7(o,s.transformResults||[])}(n,e))):[]}function nN(t,e){return{documents:[gE(t,e.path)]}}function rN(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=gE(t,s);const i=function(c){if(c.length!==0)return yE(Nn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:Ei(f.field),direction:oN(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Hf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:s}}function sN(t){let e=J7(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){we(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(d){const f=vE(d);return f instanceof Nn&&G5(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(_){return new pl(xi(_.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Bh(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new mo(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,m=d.values||[];return new mo(m,f)}(n.endAt)),T7(e,s,o,i,a,"F",l,c)}function iN(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xi(n.unaryFilter.field);return $e.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=xi(n.unaryFilter.field);return $e.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=xi(n.unaryFilter.field);return $e.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xi(n.unaryFilter.field);return $e.create(o,"!=",{nullValue:"NULL_VALUE"});default:return q()}}(t):t.fieldFilter!==void 0?function(n){return $e.create(xi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Nn.create(n.compositeFilter.filters.map(r=>vE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return q()}}(n.compositeFilter.op))}(t):q()}function oN(t){return G7[t]}function aN(t){return K7[t]}function lN(t){return Q7[t]}function Ei(t){return{fieldPath:t.canonicalString()}}function xi(t){return ot.fromServerFormat(t.fieldPath)}function yE(t){return t instanceof $e?function(n){if(n.op==="=="){if(u_(n.value))return{unaryFilter:{field:Ei(n.field),op:"IS_NAN"}};if(c_(n.value))return{unaryFilter:{field:Ei(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(u_(n.value))return{unaryFilter:{field:Ei(n.field),op:"IS_NOT_NAN"}};if(c_(n.value))return{unaryFilter:{field:Ei(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ei(n.field),op:aN(n.op),value:n.value}}}(t):t instanceof Nn?function(n){const r=n.getFilters().map(s=>yE(s));return r.length===1?r[0]:{compositeFilter:{op:lN(n.op),filters:r}}}(t):q()}function cN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n,r,s,i=K.min(),o=K.min(),a=It.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.ct=e}}function hN(t){const e=sN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ju(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this._n=new fN}addToCollectionParentIndex(e,n){return this._n.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(ns.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class fN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ct(ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ct(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new _o(0)}static Ln(){return new _o(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(){this.changes=new Lo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Aa(r.mutation,s,Ht.empty(),Ge.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ee()){const s=Ds();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ha();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ds();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ee()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=mr();const o=Sa(),a=function(){return Sa()}();return n.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof ms)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Aa(h.mutation,c,h.mutation.getFieldMask(),Ge.now())):o.set(c.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new mN(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Sa();let s=new We((o,a)=>o-a),i=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Ht.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(s.get(a.batchId)||ee()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=tE();h.forEach(f=>{if(!i.has(f)){const m=cE(n.get(f),r.get(f));m!==null&&d.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return N.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):em(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):N.resolve(Ds());let a=-1,l=i;return o.next(c=>N.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?N.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ee())).next(h=>({batchId:a,changes:eE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new z(n)).next(r=>{let s=ha();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ha();return this.indexManager.getCollectionParents(e,i).next(a=>N.forEach(a,l=>{const c=function(d,f){return new fi(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,_t.newInvalidDocument(h)))});let a=ha();return o.forEach((l,c)=>{const h=i.get(l);h!==void 0&&Aa(h.mutation,c,Ht.empty(),Ge.now()),Gh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return N.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:zn(s.createTime)}}(n)),N.resolve()}getNamedQuery(e,n){return N.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:hN(s.bundledQuery),readTime:zn(s.readTime)}}(n)),N.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this.overlays=new We(z.comparator),this.hr=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ds();return N.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),N.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){const s=Ds(),i=n.length+1,o=new z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return N.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new We((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=Ds(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ds(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return N.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $7(n,r));let i=this.hr.get(n);i===void 0&&(i=ee(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(){this.Pr=new ct(Ye.Ir),this.Tr=new ct(Ye.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Ye(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Ye(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new z(new ve([])),r=new Ye(n,e),s=new Ye(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new z(new ve([])),r=new Ye(n,e),s=new Ye(n,e+1);let i=ee();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ye(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ye{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return z.comparator(e.key,n.key)||ue(e.pr,n.pr)}static Er(e,n){return ue(e.pr,n.pr)||z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new ct(Ye.Ir)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new U7(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new Ye(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return N.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ye(n,0),s=new Ye(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),N.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ct(ue);return n.forEach(s=>{const i=new Ye(s,0),o=new Ye(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),N.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;z.isDocumentKey(i)||(i=i.child(""));const o=new Ye(new z(i),0);let a=new ct(ue);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),N.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){we(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return N.forEach(n.mutations,s=>{const i=new Ye(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Ye(n,0),s=this.wr.firstAfterOrEqual(r);return N.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.vr=e,this.docs=function(){return new We(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():_t.newInvalidDocument(n))}getEntries(e,n){let r=mr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():_t.newInvalidDocument(s))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=mr();const o=n.path,a=new z(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||s7(r7(h),r)<=0||(s.has(h.key)||Gh(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return N.resolve(i)}getAllFromCollectionGroup(e,n,r,s){q()}Fr(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new EN(this)}getSize(e){return N.resolve(this.size)}}class EN extends pN{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.persistence=e,this.Mr=new Lo(n=>Jp(n),Zp),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.Or=0,this.Nr=new im,this.targetCount=0,this.Lr=_o.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),N.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new _o(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.qn(n),N.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),N.waitFor(i).next(()=>s)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),N.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),N.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),N.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n){this.Br={},this.overlays={},this.kr=new Qp(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new xN(this),this.indexManager=new dN,this.remoteDocumentCache=function(s){return new wN(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new uN(n),this.$r=new _N(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new yN(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){b("MemoryPersistence","Starting transaction:",e);const s=new CN(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return N.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class CN extends o7{constructor(e){super(),this.currentSequenceNumber=e}}class om{constructor(e){this.persistence=e,this.zr=new im,this.jr=null}static Hr(e){return new om(e)}get Jr(){if(this.jr)return this.jr;throw q()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),N.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Jr,r=>{const s=z.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,K.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return N.or([()=>N.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=ee(),s=ee();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new am(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return T9()?8:bs.v(Be())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ji(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new IN;return this.Ji(e,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>i.result)}Yi(e,n,r,s){return r.documentReadCount<this.Wi?(Qo()<=Z.DEBUG&&b("QueryEngine","SDK will not create cache indexes for query:",wi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),N.resolve()):(Qo()<=Z.DEBUG&&b("QueryEngine","Query:",wi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(Qo()<=Z.DEBUG&&b("QueryEngine","The SDK decides to create cache indexes for query:",wi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$n(n))):N.resolve())}ji(e,n){if(p_(n))return N.resolve(null);let r=$n(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ju(n,null,"F"),r=$n(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ee(...i);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,ju(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,s){return p_(n)||s.isEqual(K.min())?N.resolve(null):this.zi.getDocuments(e,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?N.resolve(null):(Qo()<=Z.DEBUG&&b("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),wi(n)),this.es(e,o,n,n7(s,-1)).next(a=>a))})}Zi(e,n){let r=new ct(J5(e));return n.forEach((s,i)=>{Gh(e,i)&&(r=r.add(i))}),r}Xi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(e,n,r){return Qo()<=Z.DEBUG&&b("QueryEngine","Using full collection scan to execute query:",wi(n)),this.zi.getDocumentsMatchingQuery(e,n,ns.min(),r)}es(e,n,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,n,r,s){this.persistence=e,this.ts=n,this.serializer=s,this.ns=new We(ue),this.rs=new Lo(i=>Jp(i),Zp),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gN(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function RN(t,e,n,r){return new AN(t,e,n,r)}async function EE(t,e){const n=Q(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ee();for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function NN(t,e){const n=Q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let m=N.resolve();return f.forEach(_=>{m=m.next(()=>h.getEntry(l,_)).next(w=>{const E=c.docVersions.get(_);we(E!==null),w.version.compareTo(E)<0&&(d.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),h.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ee();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function xE(t){const e=Q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function kN(t,e){const n=Q(t),r=e.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];e.targetChanges.forEach((h,d)=>{const f=s.get(d);if(!f)return;a.push(n.Qr.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(i,h.addedDocuments,d)));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(It.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),s=s.insert(d,m),function(w,E,p){return w.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size>0}(f,m,h)&&a.push(n.Qr.updateTargetData(i,m))});let l=mr(),c=ee();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(PN(i,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(K.min())){const h=n.Qr.getLastRemoteSnapshotVersion(i).next(d=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return N.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.ns=s,i))}function PN(t,e,n){let r=ee(),s=ee();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=mr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(K.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):b("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:s}})}function LN(t,e){const n=Q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bN(t,e){const n=Q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,N.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new Vr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function Qf(t,e,n){const r=Q(t),s=r.ns.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ul(o))throw o;b("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)}function I_(t,e,n){const r=Q(t);let s=K.min(),i=ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=Q(l),f=d.rs.get(h);return f!==void 0?N.resolve(d.ns.get(f)):d.Qr.getTargetData(c,h)}(r,o,$n(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?s:K.min(),n?i:ee())).next(a=>(DN(r,I7(e),a),{documents:a,hs:i})))}function DN(t,e,n){let r=t.ss.get(e)||K.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.ss.set(e,r)}class S_{constructor(){this.activeTargetIds=P7()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ON{constructor(){this.no=new S_,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new S_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){b("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){b("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ac=null;function l0(){return Ac===null?Ac=function(){return 268435456+Math.round(2147483648*Math.random())}():Ac++,"0x"+Ac.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt="WebChannelConnection";class FN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${s}/databases/${i}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get wo(){return!1}So(n,r,s,i,o){const a=l0(),l=this.bo(n,r.toUriEncodedString());b("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,i,o),this.Co(n,l,c,s).then(h=>(b("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw uo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}vo(n,r,s,i,o,a){return this.So(n,r,s,i,o)}Do(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Po}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}bo(n,r){const s=jN[n];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,s){const i=l0();return new Promise((o,a)=>{const l=new HR;l.setWithCredentials(!0),l.listenOnce(BR.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case o0.NO_ERROR:const h=l.getResponseJson();b(pt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case o0.TIMEOUT:b(pt,`RPC '${e}' ${i} timed out`),a(new L(A.DEADLINE_EXCEEDED,"Request time out"));break;case o0.HTTP_ERROR:const d=l.getStatus();if(b(pt,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const _=function(E){const p=E.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(p)>=0?p:A.UNKNOWN}(m.status);a(new L(_,m.message))}else a(new L(A.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new L(A.UNAVAILABLE,"Connection failed."));break;default:q()}}finally{b(pt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);b(pt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const s=l0(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$R(),a=zR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");b(pt,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,m=!1;const _=new VN({lo:E=>{m?b(pt,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(f||(b(pt,`Opening RPC '${e}' stream ${s} transport.`),d.open(),f=!0),b(pt,`RPC '${e}' stream ${s} sending:`,E),d.send(E))},ho:()=>d.close()}),w=(E,p,g)=>{E.listen(p,y=>{try{g(y)}catch(T){setTimeout(()=>{throw T},0)}})};return w(d,Cc.EventType.OPEN,()=>{m||b(pt,`RPC '${e}' stream ${s} transport opened.`)}),w(d,Cc.EventType.CLOSE,()=>{m||(m=!0,b(pt,`RPC '${e}' stream ${s} transport closed`),_.Vo())}),w(d,Cc.EventType.ERROR,E=>{m||(m=!0,uo(pt,`RPC '${e}' stream ${s} transport errored:`,E),_.Vo(new L(A.UNAVAILABLE,"The operation could not be completed")))}),w(d,Cc.EventType.MESSAGE,E=>{var p;if(!m){const g=E.data[0];we(!!g);const y=g,T=y.error||((p=y[0])===null||p===void 0?void 0:p.error);if(T){b(pt,`RPC '${e}' stream ${s} received error:`,T);const x=T.status;let C=function(R){const k=Ve[R];if(k!==void 0)return hE(k)}(x),I=T.message;C===void 0&&(C=A.INTERNAL,I="Unknown error status: "+x+" with message "+T.message),m=!0,_.Vo(new L(C,I)),d.close()}else b(pt,`RPC '${e}' stream ${s} received:`,g),_.mo(g)}}),w(a,WR.STAT_EVENT,E=>{E.stat===r_.PROXY?b(pt,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===r_.NOPROXY&&b(pt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.Ro()},0),_}}function c0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(t){return new Y7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=s,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),s=Math.max(0,n-r);s>0&&b("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.$o=r,this.Uo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new TE(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===A.RESOURCE_EXHAUSTED?(Hn(n.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===A.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===n&&this.o_(r,s)},r=>{e(()=>{const s=new L(A.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return b("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(b("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UN extends CE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=Z7(this.serializer,e),r=function(i){if(!("targetChange"in i))return K.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?K.min():o.readTime?zn(o.readTime):K.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=Kf(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Bf(l)?{documents:nN(i,l)}:{query:rN(i,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=pE(i,o.resumeToken);const c=Hf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(K.min())>0){a.readTime=Fu(i,o.snapshotVersion.toTimestamp());const c=Hf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=iN(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=Kf(this.serializer),n.removeTarget=e,this.t_(n)}}class $N extends CE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=tN(e.writeResults,e.commitTime),r=zn(e.commitTime);return this.listener.T_(r,n)}return we(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Kf(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>eN(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new L(A.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,qf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new L(A.UNKNOWN,i.toString())})}vo(e,n,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,qf(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(A.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class BN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Hn(n),this.g_=!1):b("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{r.enqueueAndForget(async()=>{pi(this)&&(b("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Q(l);c.v_.add(4),await Bl(c),c.x_.set("Unknown"),c.v_.delete(4),await Jh(c)}(this))})}),this.x_=new BN(r,s)}}async function Jh(t){if(pi(t))for(const e of t.F_)await e(!0)}async function Bl(t){for(const e of t.F_)await e(!1)}function IE(t,e){const n=Q(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),hm(n)?um(n):bo(n).Jo()&&cm(n,e))}function lm(t,e){const n=Q(t),r=bo(n);n.C_.delete(e),r.Jo()&&SE(n,e),n.C_.size===0&&(r.Jo()?r.Xo():pi(n)&&n.x_.set("Unknown"))}function cm(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bo(t).c_(e)}function SE(t,e){t.O_.Oe(e),bo(t).l_(e)}function um(t){t.O_=new q7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),bo(t).start(),t.x_.p_()}function hm(t){return pi(t)&&!bo(t).Ho()&&t.C_.size>0}function pi(t){return Q(t).v_.size===0}function AE(t){t.O_=void 0}async function HN(t){t.C_.forEach((e,n)=>{cm(t,e)})}async function qN(t,e){AE(t),hm(t)?(t.x_.S_(e),um(t)):t.x_.set("Unknown")}async function GN(t,e,n){if(t.x_.set("Online"),e instanceof fE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.C_.delete(a),s.O_.removeTarget(a))}(t,e)}catch(r){b("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Uu(t,r)}else if(e instanceof Gc?t.O_.$e(e):e instanceof dE?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(K.min()))try{const r=await xE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.C_.get(c);h&&i.C_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=i.C_.get(l);if(!h)return;i.C_.set(l,h.withResumeToken(It.EMPTY_BYTE_STRING,h.snapshotVersion)),SE(i,l);const d=new Vr(h.target,l,c,h.sequenceNumber);cm(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){b("RemoteStore","Failed to raise snapshot:",r),await Uu(t,r)}}async function Uu(t,e,n){if(!Ul(e))throw e;t.v_.add(1),await Bl(t),t.x_.set("Offline"),n||(n=()=>xE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{b("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await Jh(t)})}function RE(t,e){return e().catch(n=>Uu(t,n,e))}async function Zh(t){const e=Q(t),n=ss(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;KN(e);)try{const s=await LN(e.localStore,r);if(s===null){e.D_.length===0&&n.Xo();break}r=s.batchId,QN(e,s)}catch(s){await Uu(e,s)}NE(e)&&kE(e)}function KN(t){return pi(t)&&t.D_.length<10}function QN(t,e){t.D_.push(e);const n=ss(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function NE(t){return pi(t)&&!ss(t).Ho()&&t.D_.length>0}function kE(t){ss(t).start()}async function YN(t){ss(t).d_()}async function XN(t){const e=ss(t);for(const n of t.D_)e.I_(n.mutations)}async function JN(t,e,n){const r=t.D_.shift(),s=nm.from(r,e,n);await RE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Zh(t)}async function ZN(t,e){e&&ss(t).P_&&await async function(r,s){if(function(o){return B7(o)&&o!==A.ABORTED}(s.code)){const i=r.D_.shift();ss(r).Zo(),await RE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Zh(r)}}(t,e),NE(t)&&kE(t)}async function R_(t,e){const n=Q(t);n.asyncQueue.verifyOperationInProgress(),b("RemoteStore","RemoteStore received new credentials");const r=pi(n);n.v_.add(3),await Bl(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await Jh(n)}async function ek(t,e){const n=Q(t);e?(n.v_.delete(2),await Jh(n)):e||(n.v_.add(2),await Bl(n),n.x_.set("Unknown"))}function bo(t){return t.N_||(t.N_=function(n,r,s){const i=Q(n);return i.R_(),new UN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:HN.bind(null,t),To:qN.bind(null,t),u_:GN.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),hm(t)?um(t):t.x_.set("Unknown")):(await t.N_.stop(),AE(t))})),t.N_}function ss(t){return t.L_||(t.L_=function(n,r,s){const i=Q(n);return i.R_(),new $N(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:YN.bind(null,t),To:ZN.bind(null,t),E_:XN.bind(null,t),T_:JN.bind(null,t)}),t.F_.push(async e=>{e?(t.L_.Zo(),await Zh(t)):(await t.L_.stop(),t.D_.length>0&&(b("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new dm(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(A.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fm(t,e){if(Hn("AsyncQueue",`${e}: ${t}`),Ul(t))return new L(A.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.comparator=e?(n,r)=>e(n,r)||z.comparator(n.key,r.key):(n,r)=>z.comparator(n.key,r.key),this.keyedMap=ha(),this.sortedSet=new We(this.comparator)}static emptySet(e){return new Ki(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ki)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ki;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(){this.B_=new We(z.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):q():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class vo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new vo(e,n,Ki.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class nk{constructor(){this.queries=new Lo(e=>X5(e),qh),this.onlineState="Unknown",this.W_=new Set}}async function PE(t,e){const n=Q(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.K_()&&e.U_()&&(r=2):(i=new tk,r=e.U_()?0:1);try{switch(r){case 0:i.q_=await n.onListen(s,!0);break;case 1:i.q_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=fm(o,`Initialization of query '${wi(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Q_.push(e),e.G_(n.onlineState),i.q_&&e.z_(i.q_)&&pm(n)}async function LE(t,e){const n=Q(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Q_.indexOf(e);o>=0&&(i.Q_.splice(o,1),i.Q_.length===0?s=e.U_()?0:1:!i.K_()&&e.U_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function rk(t,e){const n=Q(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Q_)a.z_(s)&&(r=!0);o.q_=s}}r&&pm(n)}function sk(t,e,n){const r=Q(t),s=r.queries.get(e);if(s)for(const i of s.Q_)i.onError(n);r.queries.delete(e)}function pm(t){t.W_.forEach(e=>{e.next()})}var Yf,k_;(k_=Yf||(Yf={})).j_="default",k_.Cache="cache";class bE{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new vo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==Yf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e){this.key=e}}class OE{constructor(e){this.key=e}}class ik{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=ee(),this.mutatedKeys=ee(),this.ha=J5(e),this.Pa=new Ki(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new N_,s=n?n.Pa:this.Pa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const f=s.get(h),m=Gh(this.query,d)?d:null,_=!!f&&this.mutatedKeys.has(f.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let E=!1;f&&m?f.data.isEqual(m.data)?_!==w&&(r.track({type:3,doc:m}),E=!0):this.da(f,m)||(r.track({type:2,doc:m}),E=!0,(l&&this.ha(m,l)>0||c&&this.ha(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),E=!0):f&&!m&&(r.track({type:1,doc:f}),E=!0,(l||c)&&(a=!0)),E&&(m?(o=o.add(m),i=w?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:i}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((h,d)=>function(m,_){const w=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q()}};return w(m)-w(_)}(h.type,d.type)||this.ha(h.doc,d.doc)),this.Aa(r),s=s!=null&&s;const a=n&&!s?this.Ra():[],l=this.la.size===0&&this.current&&!s?1:0,c=l!==this.ca;return this.ca=l,o.length!==0||c?{snapshot:new vo(this.query,e.Pa,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new N_,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=ee(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new OE(r))}),this.la.forEach(r=>{e.has(r)||n.push(new DE(r))}),n}fa(e){this.ua=e.hs,this.la=ee();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return vo.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class ok{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ak{constructor(e){this.key=e,this.pa=!1}}class lk{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Lo(a=>X5(a),qh),this.Sa=new Map,this.ba=new Set,this.Da=new We(z.comparator),this.Ca=new Map,this.va=new im,this.Fa={},this.Ma=new Map,this.xa=_o.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function ck(t,e,n=!0){const r=$E(t);let s;const i=r.wa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ga()):s=await ME(r,e,n,!0),s}async function uk(t,e){const n=$E(t);await ME(n,e,!0,!1)}async function ME(t,e,n,r){const s=await bN(t.localStore,$n(e)),i=s.targetId,o=n?t.sharedClientState.addLocalQueryTarget(i):"not-current";let a;return r&&(a=await hk(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&IE(t.remoteStore,s),a}async function hk(t,e,n,r,s){t.Na=(d,f,m)=>async function(w,E,p,g){let y=E.view.Ta(p);y.Xi&&(y=await I_(w.localStore,E.query,!1).then(({documents:I})=>E.view.Ta(I,y)));const T=g&&g.targetChanges.get(E.targetId),x=g&&g.targetMismatches.get(E.targetId)!=null,C=E.view.applyChanges(y,w.isPrimaryClient,T,x);return L_(w,E.targetId,C.Va),C.snapshot}(t,d,f,m);const i=await I_(t.localStore,e,!0),o=new ik(e,i.hs),a=o.Ta(i.documents),l=zl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);L_(t,n,c.Va);const h=new ok(e,n,o);return t.wa.set(e,h),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}async function dk(t,e,n){const r=Q(t),s=r.wa.get(e),i=r.Sa.get(s.targetId);if(i.length>1)return r.Sa.set(s.targetId,i.filter(o=>!qh(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Qf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&lm(r.remoteStore,s.targetId),Xf(r,s.targetId)}).catch(Fl)):(Xf(r,s.targetId),await Qf(r.localStore,s.targetId,!0))}async function fk(t,e){const n=Q(t),r=n.wa.get(e),s=n.Sa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),lm(n.remoteStore,r.targetId))}async function pk(t,e,n){const r=Ek(t);try{const s=await function(o,a){const l=Q(o),c=Ge.now(),h=a.reduce((m,_)=>m.add(_.key),ee());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=mr(),w=ee();return l.os.getEntries(m,h).next(E=>{_=E,_.forEach((p,g)=>{g.isValidDocument()||(w=w.add(p))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,_)).next(E=>{d=E;const p=[];for(const g of a){const y=V7(g,d.get(g.key).overlayedDocument);y!=null&&p.push(new ms(g.key,y,W5(y.value.mapValue),hn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,p,a)}).next(E=>{f=E;const p=E.applyToLocalDocumentSet(d,w);return l.documentOverlayCache.saveOverlays(m,E.batchId,p)})}).then(()=>({batchId:f.batchId,changes:eE(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Fa[o.currentUser.toKey()];c||(c=new We(ue)),c=c.insert(a,l),o.Fa[o.currentUser.toKey()]=c}(r,s.batchId,n),await Wl(r,s.changes),await Zh(r.remoteStore)}catch(s){const i=fm(s,"Failed to persist write");n.reject(i)}}async function jE(t,e){const n=Q(t);try{const r=await kN(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Ca.get(i);o&&(we(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.pa=!0:s.modifiedDocuments.size>0?we(o.pa):s.removedDocuments.size>0&&(we(o.pa),o.pa=!1))}),await Wl(n,r,e)}catch(r){await Fl(r)}}function P_(t,e,n){const r=Q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.wa.forEach((i,o)=>{const a=o.view.G_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Q(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.Q_)f.G_(a)&&(c=!0)}),c&&pm(l)}(r.eventManager,e),s.length&&r.ya.u_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mk(t,e,n){const r=Q(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ca.get(e),i=s&&s.key;if(i){let o=new We(z.comparator);o=o.insert(i,_t.newNoDocument(i,K.min()));const a=ee().add(i),l=new Yh(K.min(),new Map,new We(ue),o,a);await jE(r,l),r.Da=r.Da.remove(i),r.Ca.delete(e),mm(r)}else await Qf(r.localStore,e,!1).then(()=>Xf(r,e,n)).catch(Fl)}async function gk(t,e){const n=Q(t),r=e.batch.batchId;try{const s=await NN(n.localStore,e);FE(n,r,null),VE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wl(n,s)}catch(s){await Fl(s)}}async function _k(t,e,n){const r=Q(t);try{const s=await function(o,a){const l=Q(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(we(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);FE(r,e,n),VE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Wl(r,s)}catch(s){await Fl(s)}}function VE(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function FE(t,e,n){const r=Q(t);let s=r.Fa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Fa[r.currentUser.toKey()]=s}}function Xf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||UE(t,r)})}function UE(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);n!==null&&(lm(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),mm(t))}function L_(t,e,n){for(const r of n)r instanceof DE?(t.va.addReference(r.key,e),vk(t,r)):r instanceof OE?(b("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||UE(t,r.key)):q()}function vk(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(b("SyncEngine","New document in limbo: "+n),t.ba.add(r),mm(t))}function mm(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new z(ve.fromString(e)),r=t.xa.next();t.Ca.set(r,new ak(n)),t.Da=t.Da.insert(n,r),IE(t.remoteStore,new Vr($n(Hh(n.path)),r,"TargetPurposeLimboResolution",Qp._e))}}async function Wl(t,e,n){const r=Q(t),s=[],i=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{o.push(r.Na(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const h=am.Ki(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.ya.u_(s),await async function(l,c){const h=Q(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>N.forEach(c,f=>N.forEach(f.qi,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>N.forEach(f.Qi,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!Ul(d))throw d;b("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const m=h.ns.get(f),_=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(_);h.ns=h.ns.insert(f,w)}}}(r.localStore,i))}async function yk(t,e){const n=Q(t);if(!n.currentUser.isEqual(e)){b("SyncEngine","User change. New user:",e.toKey());const r=await EE(n.localStore,e);n.currentUser=e,function(i,o){i.Ma.forEach(a=>{a.forEach(l=>{l.reject(new L(A.CANCELLED,o))})}),i.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Wl(n,r.us)}}function wk(t,e){const n=Q(t),r=n.Ca.get(e);if(r&&r.pa)return ee().add(r.key);{let s=ee();const i=n.Sa.get(e);if(!i)return s;for(const o of i){const a=n.wa.get(o);s=s.unionWith(a.view.Ia)}return s}}function $E(t){const e=Q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mk.bind(null,e),e.ya.u_=rk.bind(null,e.eventManager),e.ya.La=sk.bind(null,e.eventManager),e}function Ek(t){const e=Q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_k.bind(null,e),e}class b_{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Xh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return RN(this.persistence,new SN,e.initialUser,this.serializer)}createPersistence(e){return new TN(om.Hr,this.serializer)}createSharedClientState(e){return new ON}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class xk{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>P_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yk.bind(null,this.syncEngine),await ek(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nk}()}createDatastore(e){const n=Xh(e.databaseInfo.databaseId),r=function(i){return new FN(i)}(e.databaseInfo);return function(i,o,a,l){return new zN(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new WN(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>P_(this.syncEngine,n,0),function(){return A_.D()?new A_:new MN}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,h){const d=new lk(s,i,o,a,l,c);return h&&(d.Oa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const s=Q(r);b("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await Bl(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=mt.UNAUTHENTICATED,this.clientId=$5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{b("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(b("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new L(A.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=fm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function u0(t,e){t.asyncQueue.verifyOperationInProgress(),b("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await EE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function D_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Ik(t);b("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>R_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>R_(e.remoteStore,s)),t._onlineComponents=e}function Ck(t){return t.name==="FirebaseError"?t.code===A.FAILED_PRECONDITION||t.code===A.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Ik(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){b("FirestoreClient","Using user provided OfflineComponentProvider");try{await u0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Ck(n))throw n;uo("Error using user provided cache. Falling back to memory cache: "+n),await u0(t,new b_)}}else b("FirestoreClient","Using default OfflineComponentProvider"),await u0(t,new b_);return t._offlineComponents}async function BE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(b("FirestoreClient","Using user provided OnlineComponentProvider"),await D_(t,t._uninitializedComponentsProvider._online)):(b("FirestoreClient","Using default OnlineComponentProvider"),await D_(t,new xk))),t._onlineComponents}function Sk(t){return BE(t).then(e=>e.syncEngine)}async function Jf(t){const e=await BE(t),n=e.eventManager;return n.onListen=ck.bind(null,e.syncEngine),n.onUnlisten=dk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=uk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fk.bind(null,e.syncEngine),n}function Ak(t,e,n={}){const r=new ar;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new zE({next:f=>{o.enqueueAndForget(()=>LE(i,d));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new L(A.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new L(A.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new bE(Hh(a.path),h,{includeMetadataChanges:!0,ta:!0});return PE(i,d)}(await Jf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t,e,n){if(!n)throw new L(A.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Rk(t,e,n,r){if(e===!0&&r===!0)throw new L(A.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function M_(t){if(!z.isDocumentKey(t))throw new L(A.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function j_(t){if(z.isDocumentKey(t))throw new L(A.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ed(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q()}function dn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ed(t);throw new L(A.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Nk(t,e){if(e<=0)throw new L(A.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new L(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new L(A.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new L(A.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new L(A.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class td{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new V_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new L(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new L(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new V_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new GR;switch(r.type){case"firstParty":return new XR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(A.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=O_.get(n);r&&(b("ComponentProvider","Removing Datastore"),O_.delete(n),r.terminate())}(this),Promise.resolve()}}function kk(t,e,n,r={}){var s;const i=(t=dn(t,td))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=mt.MOCK_USER;else{a=Ep(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new L(A.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new mt(c)}t._authCredentials=new KR(new U5(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wr(this.firestore,e,this._query)}}class Tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}}class Xr extends wr{constructor(e,n,r){super(e,n,Hh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new z(e))}withConverter(e){return new Xr(this.firestore,e,this._path)}}function ut(t,e,...n){if(t=_e(t),HE("collection","path",e),t instanceof td){const r=ve.fromString(e,...n);return j_(r),new Xr(t,null,r)}{if(!(t instanceof Tt||t instanceof Xr))throw new L(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return j_(r),new Xr(t.firestore,null,r)}}function le(t,e,...n){if(t=_e(t),arguments.length===1&&(e=$5.newId()),HE("doc","path",e),t instanceof td){const r=ve.fromString(e,...n);return M_(r),new Tt(t,null,new z(r))}{if(!(t instanceof Tt||t instanceof Xr))throw new L(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return M_(r),new Tt(t.firestore,t instanceof Xr?t.converter:null,new z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new TE(this,"async_queue_retry"),this.cu=()=>{const n=c0();n&&b("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=c0();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=c0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new ar;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Ul(e))throw e;b("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Hn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const s=dm.createAndSchedule(this,e,n,r,i=>this.Iu(i));return this.su.push(s),s}lu(){this.ou&&q()}verifyOperationInProgress(){}async Tu(){let e;do e=this.nu,await e;while(e!==this.nu)}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function F_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class is extends td{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new Pk}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||qE(this),this._firestoreClient.terminate()}}function Lk(t,e){const n=typeof t=="object"?t:Sh(),r=typeof t=="string"?t:e||"(default)",s=kl(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=yp("firestore");i&&kk(s,...i)}return s}function gm(t){return t._firestoreClient||qE(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function qE(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,h){return new h7(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,WE(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new Tk(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yo(It.fromBase64String(e))}catch(n){throw new L(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yo(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=/^__.*__$/;class Dk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ms(e,this.data,this.fieldMask,n,this.fieldTransforms):new $l(e,this.data,n,this.fieldTransforms)}}class GE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ms(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function KE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q()}}class rd{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new rd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.mu({path:r,gu:!1});return s.pu(e),s}yu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.mu({path:r,gu:!1});return s.Ru(),s}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return $u(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(KE(this.Vu)&&bk.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class Ok{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xh(e)}Cu(e,n,r,s=!1){return new rd({Vu:e,methodName:n,Du:r,path:ot.emptyPath(),gu:!1,bu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ql(t){const e=t._freezeSettings(),n=Xh(t._databaseId);return new Ok(t._databaseId,!!e.ignoreUndefinedProperties,n)}function QE(t,e,n,r,s,i={}){const o=t.Cu(i.merge||i.mergeFields?2:0,e,n,s);wm("Data must be an object, but it was:",o,r);const a=XE(r,o);let l,c;if(i.merge)l=new Ht(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const f=Zf(e,d,n);if(!o.contains(f))throw new L(A.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);ZE(h,f)||h.push(f)}l=new Ht(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new Dk(new jt(a),l,c)}class sd extends Hl{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sd}}function Mk(t,e,n){return new rd({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class vm extends Hl{_toFieldTransform(e){return new lE(e.path,new ml)}isEqual(e){return e instanceof vm}}class ym extends Hl{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=Mk(this,e,!0),r=this.vu.map(i=>Do(i,n)),s=new go(r);return new lE(e.path,s)}isEqual(e){return e instanceof ym&&el(this.vu,e.vu)}}function jk(t,e,n,r){const s=t.Cu(1,e,n);wm("Data must be an object, but it was:",s,r);const i=[],o=jt.empty();di(r,(l,c)=>{const h=Em(e,l,n);c=_e(c);const d=s.yu(h);if(c instanceof sd)i.push(h);else{const f=Do(c,d);f!=null&&(i.push(h),o.set(h,f))}});const a=new Ht(i);return new GE(o,a,s.fieldTransforms)}function Vk(t,e,n,r,s,i){const o=t.Cu(1,e,n),a=[Zf(e,r,n)],l=[s];if(i.length%2!=0)throw new L(A.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(Zf(e,i[f])),l.push(i[f+1]);const c=[],h=jt.empty();for(let f=a.length-1;f>=0;--f)if(!ZE(c,a[f])){const m=a[f];let _=l[f];_=_e(_);const w=o.yu(m);if(_ instanceof sd)c.push(m);else{const E=Do(_,w);E!=null&&(c.push(m),h.set(m,E))}}const d=new Ht(c);return new GE(h,d,o.fieldTransforms)}function YE(t,e,n,r=!1){return Do(n,t.Cu(r?4:3,e))}function Do(t,e){if(JE(t=_e(t)))return wm("Unsupported field value:",e,t),XE(t,e);if(t instanceof Hl)return function(r,s){if(!KE(s.Vu))throw s.Su(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Su(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Do(a,s.wu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=_e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return L7(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ge.fromDate(r);return{timestampValue:Fu(s.serializer,i)}}if(r instanceof Ge){const i=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fu(s.serializer,i)}}if(r instanceof _m)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yo)return{bytesValue:pE(s.serializer,r._byteString)};if(r instanceof Tt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:sm(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Su(`Unsupported field value: ${ed(r)}`)}(t,e)}function XE(t,e){const n={};return z5(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):di(t,(r,s)=>{const i=Do(s,e.fu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function JE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof _m||t instanceof yo||t instanceof Tt||t instanceof Hl)}function wm(t,e,n){if(!JE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ed(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function Zf(t,e,n){if((e=_e(e))instanceof nd)return e._internalPath;if(typeof e=="string")return Em(t,e);throw $u("Field path arguments must be of type string or ",t,!1,void 0,n)}const Fk=new RegExp("[~\\*/\\[\\]]");function Em(t,e,n){if(e.search(Fk)>=0)throw $u(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new nd(...e.split("."))._internalPath}catch{throw $u(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $u(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new L(A.INVALID_ARGUMENT,a+t+l)}function ZE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Uk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Tm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Uk extends xm{data(){return super.data()}}function Tm(t,e){return typeof e=="string"?Em(t,e):e instanceof nd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cm{}class id extends Cm{}function Ra(t,e,...n){let r=[];e instanceof Cm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Sm).length,a=i.filter(l=>l instanceof Im).length;if(o>1||o>0&&a>0)throw new L(A.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Im extends id{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Im(e,n,r)}_apply(e){const n=this._parse(e);return tx(e._query,n),new wr(e.firestore,e.converter,Wf(e._query,n))}_parse(e){const n=ql(e.firestore);return function(i,o,a,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(A.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){$_(d,h);const m=[];for(const _ of d)m.push(U_(l,i,_));f={arrayValue:{values:m}}}else f=U_(l,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||$_(d,h),f=YE(a,o,d,h==="in"||h==="not-in");return $e.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Sm extends Cm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Nn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)tx(o,l),o=Wf(o,l)}(e._query,n),new wr(e.firestore,e.converter,Wf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Am extends id{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Am(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new L(A.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new L(A.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pl(i,o)}(e._query,this._field,this._direction);return new wr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new fi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function e2(t,e="asc"){const n=e,r=Tm("orderBy",t);return Am._create(r,n)}class Rm extends id{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Rm(e,n,r)}_apply(e){return new wr(e.firestore,e.converter,ju(e._query,this._limit,this._limitType))}}function t2(t){return Nk("limit",t),Rm._create("limit",t,"F")}class Nm extends id{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Nm(e,n,r)}_apply(e){const n=zk(e,this.type,this._docOrFields,this._inclusive);return new wr(e.firestore,e.converter,function(s,i){return new fi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function ex(...t){return Nm._create("startAfter",t,!1)}function zk(t,e,n,r){if(n[0]=_e(n[0]),n[0]instanceof xm)return function(i,o,a,l,c){if(!l)throw new L(A.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const d of Gi(i))if(d.field.isKeyField())h.push(Mu(o,l.key));else{const f=l.data.field(d.field);if(Wh(f))throw new L(A.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=d.field.canonicalString();throw new L(A.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}h.push(f)}return new mo(h,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=ql(t.firestore);return function(o,a,l,c,h,d){const f=o.explicitOrderBy;if(h.length>f.length)throw new L(A.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let _=0;_<h.length;_++){const w=h[_];if(f[_].field.isKeyField()){if(typeof w!="string")throw new L(A.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof w}`);if(!em(o)&&w.indexOf("/")!==-1)throw new L(A.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${w}' contains a slash.`);const E=o.path.child(ve.fromString(w));if(!z.isDocumentKey(E))throw new L(A.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const p=new z(E);m.push(Mu(a,p))}else{const E=YE(l,c,w);m.push(E)}}return new mo(m,d)}(t._query,t.firestore._databaseId,s,e,n,r)}}function U_(t,e,n){if(typeof(n=_e(n))=="string"){if(n==="")throw new L(A.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!em(e)&&n.indexOf("/")!==-1)throw new L(A.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ve.fromString(n));if(!z.isDocumentKey(r))throw new L(A.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Mu(t,new z(r))}if(n instanceof Tt)return Mu(t,n._key);throw new L(A.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ed(n)}.`)}function $_(t,e){if(!Array.isArray(t)||t.length===0)throw new L(A.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tx(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new L(A.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(A.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Bk{convertValue(e,n="none"){switch(Zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return di(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new _m(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Yp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hl(e));default:return null}}convertTimestamp(e){const n=rs(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);we(wE(r));const s=new dl(r.get(1),r.get(3)),i=new z(r.popFirst(5));return s.isEqual(n)||Hn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rx extends xm{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Tm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Kc extends rx{data(e={}){return super.data(e)}}class Wk{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new fa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Kc(this._firestore,this._userDataWriter,r.key,r,new fa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Kc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new fa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Kc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new fa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Hk(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Hk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(t){t=dn(t,Tt);const e=dn(t.firestore,is);return Ak(gm(e),t._key).then(n=>ax(e,t,n))}class ix extends Bk{constructor(e){super(),this.firestore=e}convertBytes(e){return new yo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}function ox(t,e,n){t=dn(t,Tt);const r=dn(t.firestore,is),s=nx(t.converter,e,n);return od(r,[QE(ql(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,hn.none())])}function St(t,e,n,...r){t=dn(t,Tt);const s=dn(t.firestore,is),i=ql(s);let o;return o=typeof(e=_e(e))=="string"||e instanceof nd?Vk(i,"updateDoc",t._key,e,n,r):jk(i,"updateDoc",t._key,e),od(s,[o.toMutation(t._key,hn.exists(!0))])}function Gl(t){return od(dn(t.firestore,is),[new tm(t._key,hn.none())])}function os(t,e){const n=dn(t.firestore,is),r=le(t),s=nx(t.converter,e);return od(n,[QE(ql(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,hn.exists(!1))]).then(()=>r)}function Gn(t,...e){var n,r,s;t=_e(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||F_(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(F_(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,c,h;if(t instanceof Tt)c=dn(t.firestore,is),h=Hh(t._key.path),l={next:d=>{e[o]&&e[o](ax(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=dn(t,wr);c=dn(d.firestore,is),h=d._query;const f=new ix(c);l={next:m=>{e[o]&&e[o](new Wk(c,f,d,m))},error:e[o+1],complete:e[o+2]},$k(t._query)}return function(f,m,_,w){const E=new zE(w),p=new bE(m,E,_);return f.asyncQueue.enqueueAndForget(async()=>PE(await Jf(f),p)),()=>{E.Qa(),f.asyncQueue.enqueueAndForget(async()=>LE(await Jf(f),p))}}(gm(c),h,a,l)}function od(t,e){return function(r,s){const i=new ar;return r.asyncQueue.enqueueAndForget(async()=>pk(await Sk(r),s,i)),i.promise}(gm(t),e)}function ax(t,e,n){const r=n.docs.get(e._key),s=new ix(t);return new rx(t,s,e._key,r,new fa(n.hasPendingWrites,n.fromCache),e.converter)}function xn(){return new vm("serverTimestamp")}function qk(...t){return new ym("arrayUnion",t)}(function(e,n=!0){(function(s){Po=s})(ds),ts(new fr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new is(new QR(r.getProvider("auth-internal")),new ZR(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new L(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dl(c.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),un(s_,"4.5.0",e),un(s_,"4.5.0","esm2017")})();var Gk="firebase",Kk="10.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un(Gk,Kk,"app");function km(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function lx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Qk=lx,cx=new Nl("auth","Firebase",lx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=new Ih("@firebase/auth");function Yk(t,...e){zu.logLevel<=Z.WARN&&zu.warn(`Auth (${ds}): ${t}`,...e)}function Qc(t,...e){zu.logLevel<=Z.ERROR&&zu.error(`Auth (${ds}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t,...e){throw Pm(t,...e)}function Bn(t,...e){return Pm(t,...e)}function ux(t,e,n){const r=Object.assign(Object.assign({},Qk()),{[e]:n});return new Nl("auth","Firebase",r).create(e,{appName:t.name})}function Xk(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&mn(t,"argument-error"),ux(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return cx.create(t,...e)}function H(t,e,...n){if(!t)throw Pm(e,...n)}function rr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qc(e),new Error(e)}function gr(t,e){t||rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Jk(){return z_()==="http:"||z_()==="https:"}function z_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Jk()||E9()||"connection"in navigator)?navigator.onLine:!0}function e8(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n){this.shortDelay=e,this.longDelay=n,gr(n>e,"Short delay should be less than long delay!"),this.isMobile=xp()||R3()}get(){return Zk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(t,e){gr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8=new Kl(3e4,6e4);function gs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function _s(t,e,n,r,s={}){return dx(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Ro(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),hx.fetch()(fx(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function dx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},t8),e);try{const s=new s8(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Rc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Rc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Rc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw ux(t,h,c);mn(t,h)}}catch(s){if(s instanceof Kn)throw s;mn(t,"network-request-failed",{message:String(s)})}}async function Ql(t,e,n,r,s={}){const i=await _s(t,e,n,r,s);return"mfaPendingCredential"in i&&mn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function fx(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Lm(t.config,s):`${t.config.apiScheme}://${s}`}function r8(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class s8{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Bn(this.auth,"network-request-failed")),n8.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Bn(t,e,r);return s.customData._tokenResponse=n,s}function B_(t){return t!==void 0&&t.enterprise!==void 0}class i8{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return r8(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function o8(t,e){return _s(t,"GET","/v2/recaptchaConfig",gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a8(t,e){return _s(t,"POST","/v1/accounts:delete",e)}async function l8(t,e){return _s(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function c8(t,e=!1){const n=_e(t),r=await n.getIdToken(e),s=bm(r);H(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Na(h0(s.auth_time)),issuedAtTime:Na(h0(s.iat)),expirationTime:Na(h0(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function h0(t){return Number(t)*1e3}function bm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qc("JWT malformed, contained fewer than 3 sections"),null;try{const s=Su(n);return s?JSON.parse(s):(Qc("Failed to decode base64 JWT payload"),null)}catch(s){return Qc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function u8(t){const e=bm(t);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Kn&&h8(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function h8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Na(this.lastLoginAt),this.creationTime=Na(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await _l(t,l8(n,{idToken:r}));H(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?m8(i.providerUserInfo):[],a=p8(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new px(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function f8(t){const e=_e(t);await Bu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function p8(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function m8(t){return t.map(e=>{var{providerId:n}=e,r=km(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g8(t,e){const n=await dx(t,{},async()=>{const r=Ro({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=fx(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",hx.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _8(t,e){return _s(t,"POST","/v2/accounts:revokeToken",gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):u8(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return H(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await g8(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new vl;return r&&(H(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(H(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(H(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vl,this.toJSON())}_performRefresh(){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(t,e){H(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zs{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=km(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new d8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new px(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await _l(this,this.stsTokenManager.getToken(this.auth,e));return H(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return c8(this,e)}reload(){return f8(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await _l(this,a8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,p=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:y,emailVerified:T,isAnonymous:x,providerData:C,stsTokenManager:I}=n;H(y&&I,e,"internal-error");const S=vl.fromJSON(this.name,I);H(typeof y=="string",e,"internal-error"),Ir(d,e.name),Ir(f,e.name),H(typeof T=="boolean",e,"internal-error"),H(typeof x=="boolean",e,"internal-error"),Ir(m,e.name),Ir(_,e.name),Ir(w,e.name),Ir(E,e.name),Ir(p,e.name),Ir(g,e.name);const R=new zs({uid:y,auth:e,email:f,emailVerified:T,displayName:d,isAnonymous:x,photoURL:_,phoneNumber:m,tenantId:w,stsTokenManager:S,createdAt:p,lastLoginAt:g});return C&&Array.isArray(C)&&(R.providerData=C.map(k=>Object.assign({},k))),E&&(R._redirectEventId=E),R}static async _fromIdTokenResponse(e,n,r=!1){const s=new vl;s.updateFromServerResponse(n);const i=new zs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Bu(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=new Map;function sr(t){gr(t instanceof Function,"Expected a class definition");let e=W_.get(t);return e?(gr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,W_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}mx.type="NONE";const H_=mx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(t,e,n){return`firebase:${t}:${e}:${n}`}class Qi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Yc(this.userKey,s.apiKey,i),this.fullPersistenceKey=Yc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Qi(sr(H_),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||sr(H_);const o=Yc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=zs._fromJSON(e,h);c!==i&&(a=d),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Qi(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Qi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wx(e))return"Blackberry";if(Ex(e))return"Webos";if(Dm(e))return"Safari";if((e.includes("chrome/")||_x(e))&&!e.includes("edge/"))return"Chrome";if(yx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gx(t=Be()){return/firefox\//i.test(t)}function Dm(t=Be()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _x(t=Be()){return/crios\//i.test(t)}function vx(t=Be()){return/iemobile/i.test(t)}function yx(t=Be()){return/android/i.test(t)}function wx(t=Be()){return/blackberry/i.test(t)}function Ex(t=Be()){return/webos/i.test(t)}function ad(t=Be()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function v8(t=Be()){var e;return ad(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function y8(){return x9()&&document.documentMode===10}function xx(t=Be()){return ad(t)||yx(t)||Ex(t)||wx(t)||/windows phone/i.test(t)||vx(t)}function w8(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t,e=[]){let n;switch(t){case"Browser":n=q_(Be());break;case"Worker":n=`${q_(Be())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ds}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x8(t,e={}){return _s(t,"GET","/v2/passwordPolicy",gs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8=6;class C8{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:T8,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new G_(this),this.idTokenSubscription=new G_(this),this.beforeStateQueue=new E8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=sr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Qi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=e8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?_e(e):null;return n&&H(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await x8(this),n=new C8(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Nl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&sr(e)||this._popupRedirectResolver;H(n,this,"argument-error"),this.redirectPersistenceManager=await Qi.create(this,[sr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Tx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Yk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function vs(t){return _e(t)}class G_{constructor(e){this.auth=e,this.observer=null,this.addObserver=P9(n=>this.observer=n)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function S8(t){ld=t}function Cx(t){return ld.loadJS(t)}function A8(){return ld.recaptchaEnterpriseScript}function R8(){return ld.gapiScript}function N8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const k8="recaptcha-enterprise",P8="NO_RECAPTCHA";class L8{constructor(e){this.type=k8,this.auth=vs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{o8(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new i8(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;B_(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(P8)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&B_(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=A8();l.length!==0&&(l+=a),Cx(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function K_(t,e,n,r=!1){const s=new L8(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function r2(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await K_(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await K_(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(t,e){const n=kl(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(el(i,e??{}))return s;mn(s,"already-initialized")}return n.initialize({options:e})}function D8(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(sr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function O8(t,e,n){const r=vs(t);H(r._canInitEmulator,r,"emulator-config-failed"),H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=Ix(e),{host:o,port:a}=M8(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||j8()}function Ix(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function M8(t){const e=Ix(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Q_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Q_(o)}}}function Q_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function j8(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,n){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}}async function V8(t,e){return _s(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F8(t,e){return Ql(t,"POST","/v1/accounts:signInWithPassword",gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U8(t,e){return Ql(t,"POST","/v1/accounts:signInWithEmailLink",gs(t,e))}async function $8(t,e){return Ql(t,"POST","/v1/accounts:signInWithEmailLink",gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl extends Om{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new yl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new yl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return r2(e,n,"signInWithPassword",F8);case"emailLink":return U8(e,{email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return r2(e,r,"signUpPassword",V8);case"emailLink":return $8(e,{idToken:n,email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yi(t,e){return Ql(t,"POST","/v1/accounts:signInWithIdp",gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8="http://localhost";class ei extends Om{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ei(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=km(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ei(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Yi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Yi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yi(e,n)}buildRequest(){const e={requestUri:z8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ro(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function W8(t){const e=aa(la(t)).link,n=e?aa(la(e)).deep_link_id:null,r=aa(la(t)).deep_link_id;return(r?aa(la(r)).link:null)||r||n||e||t}class Mm{constructor(e){var n,r,s,i,o,a;const l=aa(la(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=B8((s=l.mode)!==null&&s!==void 0?s:null);H(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=W8(e);try{return new Mm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.providerId=Oo.PROVIDER_ID}static credential(e,n){return yl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Mm.parseLink(n);return H(r,"argument-error"),yl._fromEmailAndCode(e,r.code,r.tenantId)}}Oo.PROVIDER_ID="password";Oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends jm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Yl{constructor(){super("facebook.com")}static credential(e){return ei._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends Yl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ei._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Zn.credential(n,r)}catch{return null}}}Zn.GOOGLE_SIGN_IN_METHOD="google.com";Zn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Yl{constructor(){super("github.com")}static credential(e){return ei._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pr.credential(e.oauthAccessToken)}catch{return null}}}Pr.GITHUB_SIGN_IN_METHOD="github.com";Pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Yl{constructor(){super("twitter.com")}static credential(e,n){return ei._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Lr.credential(n,r)}catch{return null}}}Lr.TWITTER_SIGN_IN_METHOD="twitter.com";Lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H8(t,e){return Ql(t,"POST","/v1/accounts:signUp",gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await zs._fromIdTokenResponse(e,r,s),o=Y_(r);return new ti({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Y_(r);return new ti({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Y_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu extends Kn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Wu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Wu(e,n,r,s)}}function Sx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Wu._fromErrorAndOperation(t,i,e,r):i})}async function q8(t,e,n=!1){const r=await _l(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ti._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G8(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await _l(t,Sx(r,s,e,t),n);H(i.idToken,r,"internal-error");const o=bm(i.idToken);H(o,r,"internal-error");const{sub:a}=o;return H(t.uid===a,r,"user-mismatch"),ti._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&mn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ax(t,e,n=!1){const r="signIn",s=await Sx(t,r,e),i=await ti._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function K8(t,e){return Ax(vs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rx(t){const e=vs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Q8(t,e,n){const r=vs(t),o=await r2(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",H8).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Rx(t),l}),a=await ti._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function Y8(t,e,n){return K8(_e(t),Oo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Rx(t),r})}function X8(t,e,n,r){return _e(t).onIdTokenChanged(e,n,r)}function J8(t,e,n){return _e(t).beforeAuthStateChanged(e,n)}function Z8(t,e,n,r){return _e(t).onAuthStateChanged(e,n,r)}function eP(t){return _e(t).signOut()}const Hu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hu,"1"),this.storage.removeItem(Hu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(){const t=Be();return Dm(t)||ad(t)}const nP=1e3,rP=10;class kx extends Nx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=tP()&&w8(),this.fallbackToPolling=xx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);y8()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,rP):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},nP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}kx.type="LOCAL";const sP=kx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px extends Nx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Px.type="SESSION";const Lx=Px;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new cd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await iP(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Vm("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(){return window}function aP(t){Wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(){return typeof Wn().WorkerGlobalScope<"u"&&typeof Wn().importScripts=="function"}async function lP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function uP(){return bx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="firebaseLocalStorageDb",hP=1,qu="firebaseLocalStorage",Ox="fbase_key";class Xl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ud(t,e){return t.transaction([qu],e?"readwrite":"readonly").objectStore(qu)}function dP(){const t=indexedDB.deleteDatabase(Dx);return new Xl(t).toPromise()}function s2(){const t=indexedDB.open(Dx,hP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(qu,{keyPath:Ox})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(qu)?e(r):(r.close(),await dP(),e(await s2()))})})}async function X_(t,e,n){const r=ud(t,!0).put({[Ox]:e,value:n});return new Xl(r).toPromise()}async function fP(t,e){const n=ud(t,!1).get(e),r=await new Xl(n).toPromise();return r===void 0?null:r.value}function J_(t,e){const n=ud(t,!0).delete(e);return new Xl(n).toPromise()}const pP=800,mP=3;class Mx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await s2(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>mP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cd._getInstance(uP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await lP(),!this.activeServiceWorker)return;this.sender=new oP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await s2();return await X_(e,Hu,"1"),await J_(e,Hu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>X_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>fP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>J_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ud(s,!1).getAll();return new Xl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Mx.type="LOCAL";const gP=Mx;new Kl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(t,e){return e?sr(e):(H(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm extends Om{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _P(t){return Ax(t.auth,new Fm(t),t.bypassAuthState)}function vP(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),G8(n,new Fm(t),t.bypassAuthState)}async function yP(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),q8(n,new Fm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _P;case"linkViaPopup":case"linkViaRedirect":return yP;case"reauthViaPopup":case"reauthViaRedirect":return vP;default:mn(this.auth,"internal-error")}}resolve(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=new Kl(2e3,1e4);async function EP(t,e,n){const r=vs(t);Xk(t,e,jm);const s=jx(r,n);return new Os(r,"signInViaPopup",e,s).executeNotNull()}class Os extends Vx{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Os.currentPopupAction&&Os.currentPopupAction.cancel(),Os.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return H(e,this.auth,"internal-error"),e}async onExecution(){gr(this.filter.length===1,"Popup operations only handle one event");const e=Vm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Os.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wP.get())};e()}}Os.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP="pendingRedirect",Xc=new Map;class TP extends Vx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xc.get(this.auth._key());if(!e){try{const r=await CP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xc.set(this.auth._key(),e)}return this.bypassAuthState||Xc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CP(t,e){const n=AP(e),r=SP(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function IP(t,e){Xc.set(t._key(),e)}function SP(t){return sr(t._redirectPersistence)}function AP(t){return Yc(xP,t.config.apiKey,t.name)}async function RP(t,e,n=!1){const r=vs(t),s=jx(r,e),o=await new TP(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP=10*60*1e3;class kP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Fx(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Bn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z_(e))}saveEventToCache(e){this.cachedEventUids.add(Z_(e)),this.lastProcessedEventTime=Date.now()}}function Z_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Fx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function PP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LP(t,e={}){return _s(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DP=/^https?/;async function OP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await LP(t);for(const n of e)try{if(MP(n))return}catch{}mn(t,"unauthorized-domain")}function MP(t){const e=n2(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!DP.test(n))return!1;if(bP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=new Kl(3e4,6e4);function ev(){const t=Wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function VP(t){return new Promise((e,n)=>{var r,s,i;function o(){ev(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ev(),n(Bn(t,"network-request-failed"))},timeout:jP.get()})}if(!((s=(r=Wn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Wn().gapi)===null||i===void 0)&&i.load)o();else{const a=N8("iframefcb");return Wn()[a]=()=>{gapi.load?o():n(Bn(t,"network-request-failed"))},Cx(`${R8()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Jc=null,e})}let Jc=null;function FP(t){return Jc=Jc||VP(t),Jc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=new Kl(5e3,15e3),$P="__/auth/iframe",zP="emulator/auth/iframe",BP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HP(t){const e=t.config;H(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Lm(e,zP):`https://${t.config.authDomain}/${$P}`,r={apiKey:e.apiKey,appName:t.name,v:ds},s=WP.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ro(r).slice(1)}`}async function qP(t){const e=await FP(t),n=Wn().gapi;return H(n,t,"internal-error"),e.open({where:document.body,url:HP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BP,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Bn(t,"network-request-failed"),a=Wn().setTimeout(()=>{i(o)},UP.get());function l(){Wn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KP=500,QP=600,YP="_blank",XP="http://localhost";class tv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JP(t,e,n,r=KP,s=QP){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},GP),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Be().toLowerCase();n&&(a=_x(c)?YP:n),gx(c)&&(e=e||XP,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[m,_])=>`${f}${m}=${_},`,"");if(v8(c)&&a!=="_self")return ZP(e||"",a),new tv(null);const d=window.open(e||"",a,h);H(d,t,"popup-blocked");try{d.focus()}catch{}return new tv(d)}function ZP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL="__/auth/handler",tL="emulator/auth/handler",nL=encodeURIComponent("fac");async function nv(t,e,n,r,s,i){H(t.config.authDomain,t,"auth-domain-config-required"),H(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ds,eventId:s};if(e instanceof jm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Ef(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(i||{}))o[h]=d}if(e instanceof Yl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${nL}=${encodeURIComponent(l)}`:"";return`${rL(t)}?${Ro(a).slice(1)}${c}`}function rL({config:t}){return t.emulator?Lm(t,tL):`https://${t.authDomain}/${eL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="webStorageSupport";class sL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lx,this._completeRedirectFn=RP,this._overrideRedirectResult=IP}async _openPopup(e,n,r,s){var i;gr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await nv(e,n,r,n2(),s);return JP(e,o,Vm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await nv(e,n,r,n2(),s);return aP(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(gr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await qP(e),r=new kP(e);return n.register("authEvent",s=>(H(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(d0,{type:d0},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[d0];o!==void 0&&n(!!o),mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xx()||Dm()||ad()}}const iL=sL;var rv="@firebase/auth",sv="1.6.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lL(t){ts(new fr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;H(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Tx(t)},c=new I8(r,s,i,l);return D8(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ts(new fr("auth-internal",e=>{const n=vs(e.getProvider("auth").getImmediate());return(r=>new oL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),un(rv,sv,aL(t)),un(rv,sv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=5*60,uL=A3("authIdTokenMaxAge")||cL;let iv=null;const hL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>uL)return;const s=n==null?void 0:n.token;iv!==s&&(iv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function dL(t=Sh()){const e=kl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=b8(t,{popupRedirectResolver:iL,persistence:[gP,sP,Lx]}),r=A3("authTokenSyncURL");if(r&&r.match(/^\/[^\/].*/)){const i=hL(r);J8(n,i,()=>i(n.currentUser)),X8(n,o=>i(o))}const s=I3("auth");return s&&O8(n,`http://${s}`),n}function fL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}S8({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Bn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",fL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lL("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="firebasestorage.googleapis.com",$x="storageBucket",pL=2*60*1e3,mL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe extends Kn{constructor(e,n,r=0){super(f0(e),`Firebase Storage: ${n} (${f0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Oe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return f0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var De;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(De||(De={}));function f0(t){return"storage/"+t}function Um(){const t="An unknown error occurred, please check the error payload for server response.";return new Oe(De.UNKNOWN,t)}function gL(t){return new Oe(De.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function _L(t){return new Oe(De.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function vL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Oe(De.UNAUTHENTICATED,t)}function yL(){return new Oe(De.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function wL(t){return new Oe(De.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function EL(){return new Oe(De.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xL(){return new Oe(De.CANCELED,"User canceled the upload/download.")}function TL(t){return new Oe(De.INVALID_URL,"Invalid URL '"+t+"'.")}function CL(t){return new Oe(De.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function IL(){return new Oe(De.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+$x+"' property when initializing the app?")}function SL(){return new Oe(De.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function AL(){return new Oe(De.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function RL(t){return new Oe(De.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function i2(t){return new Oe(De.INVALID_ARGUMENT,t)}function zx(){return new Oe(De.APP_DELETED,"The Firebase app was deleted.")}function NL(t){return new Oe(De.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ka(t,e){return new Oe(De.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Yo(t){throw new Oe(De.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=qt.makeFromUrl(e,n)}catch{return new qt(e,"")}if(r.path==="")return r;throw CL(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(T){T.path_=decodeURIComponent(T.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${s}/o${f}`,"i"),_={bucket:1,path:3},w=n===Ux?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",p=new RegExp(`^https?://${w}/${s}/${E}`,"i"),y=[{regex:a,indices:l,postModify:i},{regex:m,indices:_,postModify:c},{regex:p,indices:{bucket:1,path:2},postModify:c}];for(let T=0;T<y.length;T++){const x=y[T],C=x.regex.exec(e);if(C){const I=C[x.indices.bucket];let S=C[x.indices.path];S||(S=""),r=new qt(I,S),x.postModify(r);break}}if(r==null)throw TL(e);return r}}class kL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...E){c||(c=!0,e.apply(null,E))}function d(E){s=setTimeout(()=>{s=null,t(m,l())},E)}function f(){i&&clearTimeout(i)}function m(E,...p){if(c){f();return}if(E){f(),h.call(null,E,...p);return}if(l()||o){f(),h.call(null,E,...p);return}r<64&&(r*=2);let y;a===1?(a=2,y=0):y=(r+Math.random())*1e3,d(y)}let _=!1;function w(E){_||(_=!0,f(),!c&&(s!==null?(E||(a=2),clearTimeout(s),d(0)):E||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,w(!0)},n),w}function LL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(t){return t!==void 0}function DL(t){return typeof t=="object"&&!Array.isArray(t)}function $m(t){return typeof t=="string"||t instanceof String}function ov(t){return zm()&&t instanceof Blob}function zm(){return typeof Blob<"u"}function av(t,e,n,r){if(r<e)throw i2(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw i2(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Bx(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Bs||(Bs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,n,r,s,i,o,a,l,c,h,d,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,_)=>{this.resolve_=m,this.reject_=_,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Nc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Bs.NO_ERROR,l=i.getStatus();if(!a||OL(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Bs.ABORT;r(!1,new Nc(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Nc(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());bL(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Um();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?zx():xL();o(l)}else{const l=EL();o(l)}};this.canceled_?n(!1,new Nc(!1,null,!0)):this.backoffId_=PL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&LL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Nc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function jL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function VL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function FL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function UL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function $L(t,e,n,r,s,i,o=!0){const a=Bx(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return FL(c,e),jL(c,n),VL(c,i),UL(c,r),new ML(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function BL(...t){const e=zL();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(zm())return new Blob(t);throw new Oe(De.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function WL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(t){if(typeof atob>"u")throw RL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class p0{constructor(e,n){this.data=e,this.contentType=n||null}}function qL(t,e){switch(t){case jn.RAW:return new p0(Wx(e));case jn.BASE64:case jn.BASE64URL:return new p0(Hx(t,e));case jn.DATA_URL:return new p0(KL(e),QL(e))}throw Um()}function Wx(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function GL(t){let e;try{e=decodeURIComponent(t)}catch{throw ka(jn.DATA_URL,"Malformed data URL.")}return Wx(e)}function Hx(t,e){switch(t){case jn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw ka(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case jn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw ka(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=HL(e)}catch(s){throw s.message.includes("polyfill")?s:ka(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class qx{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ka(jn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=YL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function KL(t){const e=new qx(t);return e.base64?Hx(jn.BASE64,e.rest):GL(e.rest)}function QL(t){return new qx(t).contentType}function YL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n){let r=0,s="";ov(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(ov(this.data_)){const r=this.data_,s=WL(r,e,n);return s===null?null:new br(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new br(r,!0)}}static getBlob(...e){if(zm()){const n=e.map(r=>r instanceof br?r.data_:r);return new br(BL.apply(null,n))}else{const n=e.map(o=>$m(o)?qL(jn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new br(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t){let e;try{e=JSON.parse(t)}catch{return null}return DL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function JL(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Kx(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(t,e){return e}class At{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||ZL}}let kc=null;function eb(t){return!$m(t)||t.length<2?t:Kx(t)}function Qx(){if(kc)return kc;const t=[];t.push(new At("bucket")),t.push(new At("generation")),t.push(new At("metageneration")),t.push(new At("name","fullPath",!0));function e(i,o){return eb(o)}const n=new At("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new At("size");return s.xform=r,t.push(s),t.push(new At("timeCreated")),t.push(new At("updated")),t.push(new At("md5Hash",null,!0)),t.push(new At("cacheControl",null,!0)),t.push(new At("contentDisposition",null,!0)),t.push(new At("contentEncoding",null,!0)),t.push(new At("contentLanguage",null,!0)),t.push(new At("contentType",null,!0)),t.push(new At("metadata","customMetadata",!0)),kc=t,kc}function tb(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new qt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function nb(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return tb(r,t),r}function Yx(t,e,n){const r=Gx(e);return r===null?null:nb(t,r,n)}function rb(t,e,n,r){const s=Gx(e);if(s===null||!$m(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const h=t.bucket,d=t.fullPath,f="/b/"+o(h)+"/o/"+o(d),m=hd(f,n,r),_=Bx({alt:"media",token:c});return m+_})[0]}function sb(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Bm{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(t){if(!t)throw Um()}function ib(t,e){function n(r,s){const i=Yx(t,s,e);return Xx(i!==null),i}return n}function ob(t,e){function n(r,s){const i=Yx(t,s,e);return Xx(i!==null),rb(i,s,t.host,t._protocol)}return n}function Jx(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=yL():s=vL():n.getStatus()===402?s=_L(t.bucket):n.getStatus()===403?s=wL(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Zx(t){const e=Jx(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=gL(t.path)),i.serverResponse=s.serverResponse,i}return n}function ab(t,e,n){const r=e.fullServerUrl(),s=hd(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Bm(s,i,ob(t,n),o);return a.errorHandler=Zx(e),a}function lb(t,e){const n=e.fullServerUrl(),r=hd(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new Bm(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=Zx(e),a}function cb(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function ub(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=cb(null,e)),r}function hb(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let y="";for(let T=0;T<2;T++)y=y+Math.random().toString().slice(2);return y}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=ub(e,r,s),h=sb(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=br.getBlob(d,r,f);if(m===null)throw SL();const _={name:c.fullPath},w=hd(i,t.host,t._protocol),E="POST",p=t.maxUploadRetryTime,g=new Bm(w,E,ib(t,n),p);return g.urlParams=_,g.headers=o,g.body=m.uploadData(),g.errorHandler=Jx(e),g}class db{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Bs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Bs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Yo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Yo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Yo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Yo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Yo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class fb extends db{initXhr(){this.xhr_.responseType="text"}}function Wm(){return new fb}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n){this._service=e,n instanceof qt?this._location=n:this._location=qt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ni(e,n)}get root(){const e=new qt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Kx(this._location.path)}get storage(){return this._service}get parent(){const e=XL(this._location.path);if(e===null)return null;const n=new qt(this._location.bucket,e);return new ni(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw NL(e)}}function pb(t,e,n){t._throwIfRoot("uploadBytes");const r=hb(t.storage,t._location,Qx(),new br(e,!0),n);return t.storage.makeRequestWithTokens(r,Wm).then(s=>({metadata:s,ref:t}))}function mb(t){t._throwIfRoot("getDownloadURL");const e=ab(t.storage,t._location,Qx());return t.storage.makeRequestWithTokens(e,Wm).then(n=>{if(n===null)throw AL();return n})}function gb(t){t._throwIfRoot("deleteObject");const e=lb(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Wm)}function _b(t,e){const n=JL(t._location.path,e),r=new qt(t._location.bucket,n);return new ni(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(t){return/^[A-Za-z]+:\/\//.test(t)}function yb(t,e){return new ni(t,e)}function eT(t,e){if(t instanceof Hm){const n=t;if(n._bucket==null)throw IL();const r=new ni(n,n._bucket);return e!=null?eT(r,e):r}else return e!==void 0?_b(t,e):t}function wb(t,e){if(e&&vb(e)){if(t instanceof Hm)return yb(t,e);throw i2("To use ref(service, url), the first argument must be a Storage instance.")}else return eT(t,e)}function lv(t,e){const n=e==null?void 0:e[$x];return n==null?null:qt.makeFromBucketSpec(n,t)}function Eb(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Ep(s,t.app.options.projectId))}class Hm{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=Ux,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pL,this._maxUploadRetryTime=mL,this._requests=new Set,s!=null?this._bucket=qt.makeFromBucketSpec(s,this._host):this._bucket=lv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qt.makeFromBucketSpec(this._url,e):this._bucket=lv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){av("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){av("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ni(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new kL(zx());{const o=$L(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const cv="@firebase/storage",uv="0.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="storage";function Gu(t,e,n){return t=_e(t),pb(t,e,n)}function Ku(t){return t=_e(t),mb(t)}function o2(t){return t=_e(t),gb(t)}function Ms(t,e){return t=_e(t),wb(t,e)}function xb(t=Sh(),e){t=_e(t);const r=kl(t,tT).getImmediate({identifier:e}),s=yp("storage");return s&&Tb(r,...s),r}function Tb(t,e,n,r={}){Eb(t,e,n,r)}function Cb(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Hm(n,r,s,e,ds)}function Ib(){ts(new fr(tT,Cb,"PUBLIC").setMultipleInstances(!0)),un(cv,uv,""),un(cv,uv,"esm2017")}Ib();var hv={};const dv="@firebase/database",fv="1.0.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nT="";function Sb(t){nT=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),it(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Za(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return yr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ab(e)}}catch{}return new Rb},js=rT("localStorage"),a2=rT("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new Ih("@firebase/database"),Nb=function(){let t=1;return function(){return t++}}(),sT=function(t){const e=O9(t),n=new k9;n.update(e);const r=n.digest();return vp.encodeByteArray(r)},Jl=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Jl.apply(null,r):typeof r=="object"?e+=it(r):e+=r,e+=" "}return e};let Ws=null,pv=!0;const kb=function(t,e){D(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Xi.logLevel=Z.VERBOSE,Ws=Xi.log.bind(Xi),e&&a2.set("logging_enabled",!0)):typeof t=="function"?Ws=t:(Ws=null,a2.remove("logging_enabled"))},vt=function(...t){if(pv===!0&&(pv=!1,Ws===null&&a2.get("logging_enabled")===!0&&kb(!0)),Ws){const e=Jl.apply(null,t);Ws(e)}},Zl=function(t){return function(...e){vt(t,...e)}},l2=function(...t){const e="FIREBASE INTERNAL ERROR: "+Jl(...t);Xi.error(e)},_r=function(...t){const e=`FIREBASE FATAL ERROR: ${Jl(...t)}`;throw Xi.error(e),new Error(e)},Qt=function(...t){const e="FIREBASE WARNING: "+Jl(...t);Xi.warn(e)},Pb=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Qt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},iT=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Lb=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},wo="[MIN_NAME]",ri="[MAX_NAME]",Mo=function(t,e){if(t===e)return 0;if(t===wo||e===ri)return-1;if(e===wo||t===ri)return 1;{const n=mv(t),r=mv(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},bb=function(t,e){return t===e?0:t<e?-1:1},Xo=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+it(e))},qm=function(t){if(typeof t!="object"||t===null)return it(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=it(e[r]),n+=":",n+=qm(t[e[r]]);return n+="}",n},oT=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function gn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const aT=function(t){D(!iT(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,l;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(i%2?1:0),i=Math.floor(i/2);c.push(s?1:0),c.reverse();const h=c.join("");let d="";for(l=0;l<64;l+=8){let f=parseInt(h.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},Db=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Ob=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},Mb=new RegExp("^-?(0*)\\d{1,10}$"),jb=-2147483648,Vb=2147483647,mv=function(t){if(Mb.test(t)){const e=Number(t);if(e>=jb&&e<=Vb)return e}return null},ec=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Qt("Exception was thrown by user callback.",n),e},Math.floor(0))}},Fb=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Pa=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Qt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(vt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qt(e)}}class Ji{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ji.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="5",lT="v",cT="s",uT="r",hT="f",dT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,fT="ls",pT="p",c2="ac",mT="websocket",gT="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,n,r,s,i=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=js.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&js.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function zb(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function vT(t,e,n){D(typeof e=="string","typeof type must == string"),D(typeof n=="object","typeof params must == object");let r;if(e===mT)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===gT)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);zb(t)&&(n.ns=t.namespace);const s=[];return gn(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this.counters_={}}incrementCounter(e,n=1){yr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return p9(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0={},g0={};function Km(t){const e=t.toString();return m0[e]||(m0[e]=new Bb),m0[e]}function Wb(t,e){const n=t.toString();return g0[n]||(g0[n]=e()),g0[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&ec(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="start",qb="close",Gb="pLPCommand",Kb="pRTLPCB",yT="id",wT="pw",ET="ser",Qb="cb",Yb="seg",Xb="ts",Jb="d",Zb="dframe",xT=1870,TT=30,eD=xT-TT,tD=25e3,nD=3e4;class Mi{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Zl(e),this.stats_=Km(n),this.urlFn=l=>(this.appCheckToken&&(l[c2]=this.appCheckToken),vT(n,gT,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Hb(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(nD)),Lb(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Qm((...i)=>{const[o,a,l,c,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===gv)this.id=a,this.password=l;else if(o===qb)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[gv]="t",r[ET]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Qb]=this.scriptTagHolder.uniqueCallbackIdentifier),r[lT]=Gm,this.transportSessionId&&(r[cT]=this.transportSessionId),this.lastSessionId&&(r[fT]=this.lastSessionId),this.applicationId&&(r[pT]=this.applicationId),this.appCheckToken&&(r[c2]=this.appCheckToken),typeof location<"u"&&location.hostname&&dT.test(location.hostname)&&(r[uT]=hT);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Mi.forceAllow_=!0}static forceDisallow(){Mi.forceDisallow_=!0}static isAvailable(){return Mi.forceAllow_?!0:!Mi.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Db()&&!Ob()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=it(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=T3(n),s=oT(r,eD);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Zb]="t",r[yT]=e,r[wT]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=it(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Qm{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Nb(),window[Gb+this.uniqueCallbackIdentifier]=e,window[Kb+this.uniqueCallbackIdentifier]=n,this.myIFrame=Qm.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){vt("frame writing exception"),a.stack&&vt(a.stack),vt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||vt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[yT]=this.myID,e[wT]=this.myPW,e[ET]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+TT+r.length<=xT;){const o=this.pendingSegs.shift();r=r+"&"+Yb+s+"="+o.seg+"&"+Xb+s+"="+o.ts+"&"+Jb+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(tD)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{vt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=16384,sD=45e3;let Qu=null;typeof MozWebSocket<"u"?Qu=MozWebSocket:typeof WebSocket<"u"&&(Qu=WebSocket);class En{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Zl(this.connId),this.stats_=Km(n),this.connURL=En.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[lT]=Gm,typeof location<"u"&&location.hostname&&dT.test(location.hostname)&&(o[uT]=hT),n&&(o[cT]=n),r&&(o[fT]=r),s&&(o[c2]=s),i&&(o[pT]=i),vT(e,mT,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,js.set("previous_websocket_failure",!0);try{let r;N3(),this.mySock=new Qu(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){En.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Qu!==null&&!En.forceDisallow_}static previouslyFailed(){return js.isInMemoryStorage||js.get("previous_websocket_failure")===!0}markConnectionHealthy(){js.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Za(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(D(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=it(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=oT(n,rD);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(sD))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}En.responsesRequiredToBeHealthy=2;En.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Mi,En]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=En&&En.isAvailable();let r=n&&!En.previouslyFailed();if(e.webSocketOnly&&(n||Qt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[En];else{const s=this.transports_=[];for(const i of wl.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);wl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}wl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=6e4,oD=5e3,aD=10*1024,lD=100*1024,_0="t",_v="d",cD="s",vv="r",uD="e",yv="o",wv="a",Ev="n",xv="p",hD="h";class dD{constructor(e,n,r,s,i,o,a,l,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Zl("c:"+this.id+":"),this.transportManager_=new wl(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Pa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>lD?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>aD?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(_0 in e){const n=e[_0];n===wv?this.upgradeIfSecondaryHealthy_():n===vv?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===yv&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Xo("t",e),r=Xo("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:xv,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:wv,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Ev,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Xo("t",e),r=Xo("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Xo(_0,e);if(_v in e){const r=e[_v];if(n===hD){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Ev){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===cD?this.onConnectionShutdown_(r):n===vv?this.onReset_(r):n===uD?l2("Server Error: "+r):n===yv?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):l2("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Gm!==r&&Qt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Pa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(iD))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Pa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(oD))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:xv,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(js.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e){this.allowedEvents_=e,this.listeners_={},D(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){D(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends IT{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!xp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Yu}getInitialEvent(e){return D(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=32,Cv=768;class Ae{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function me(){return new Ae("")}function se(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function as(t){return t.pieces_.length-t.pieceNum_}function Ce(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ae(t.pieces_,e)}function ST(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function fD(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function AT(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function RT(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ae(e,0)}function Ze(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ae)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Ae(n,0)}function ne(t){return t.pieceNum_>=t.pieces_.length}function ln(t,e){const n=se(t),r=se(e);if(n===null)return e;if(n===r)return ln(Ce(t),Ce(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function NT(t,e){if(as(t)!==as(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Tn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(as(t)>as(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class pD{constructor(e,n){this.errorPrefix_=n,this.parts_=AT(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ch(this.parts_[r]);kT(this)}}function mD(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ch(e),kT(t)}function gD(t){const e=t.parts_.pop();t.byteLength_-=Ch(e),t.parts_.length>0&&(t.byteLength_-=1)}function kT(t){if(t.byteLength_>Cv)throw new Error(t.errorPrefix_+"has a key path longer than "+Cv+" bytes ("+t.byteLength_+").");if(t.parts_.length>Tv)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Tv+") or object contains a cycle "+Ss(t))}function Ss(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym extends IT{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Ym}getInitialEvent(e){return D(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=1e3,_D=60*5*1e3,Iv=30*1e3,vD=1.3,yD=3e4,wD="server_kill",Sv=3;class lr extends CT{constructor(e,n,r,s,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=lr.nextPersistentConnectionId_++,this.log_=Zl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Jo,this.maxReconnectDelay_=_D,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!N3())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ym.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Yu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(it(i)),D(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new wp,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),D(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),D(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,c=a.s;lr.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&yr(e,"w")){const r=lo(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Qt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||N9(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Iv)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=R9(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),D(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+it(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):l2("Unrecognized action received from server: "+it(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){D(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Jo,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Jo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>yD&&(this.reconnectDelay_=Jo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*vD)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+lr.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(d){D(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?vt("getToken() completed but was canceled"):(vt("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,a=new dD(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,m=>{Qt(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(wD)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Qt(d),l())}}}interrupt(e){vt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){vt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ef(this.interruptReasons_)&&(this.reconnectDelay_=Jo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>qm(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Ae(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){vt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Sv&&(this.reconnectDelay_=Iv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){vt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Sv&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+nT.replace(/\./g,"-")]=1,xp()?e["framework.cordova"]=1:R3()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Yu.getInstance().currentlyOnline();return Ef(this.interruptReasons_)&&e}}lr.nextPersistentConnectionId_=0;lr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ie(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ie(wo,e),s=new ie(wo,n);return this.compare(r,s)!==0}minPost(){return ie.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pc;class PT extends dd{static get __EMPTY_NODE(){return Pc}static set __EMPTY_NODE(e){Pc=e}compare(e,n){return Mo(e.name,n.name)}isDefinedOn(e){throw Ao("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ie.MIN}maxPost(){return new ie(ri,Pc)}makePost(e,n){return D(typeof e=="string","KeyIndex indexValue must always be a string."),new ie(e,Pc)}toString(){return".key"}}const Zi=new PT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Je{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Je.RED,this.left=s??Ft.EMPTY_NODE,this.right=i??Ft.EMPTY_NODE}copy(e,n,r,s,i){return new Je(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ft.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Ft.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Je.RED=!0;Je.BLACK=!1;class ED{copy(e,n,r,s,i){return this}insert(e,n,r){return new Je(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ft{constructor(e,n=Ft.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ft(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Je.BLACK,null,null))}remove(e){return new Ft(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Je.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Lc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Lc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Lc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Lc(this.root_,null,this.comparator_,!0,e)}}Ft.EMPTY_NODE=new ED;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t,e){return Mo(t.name,e.name)}function Xm(t,e){return Mo(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let u2;function TD(t){u2=t}const LT=function(t){return typeof t=="number"?"number:"+aT(t):"string:"+t},bT=function(t){if(t.isLeafNode()){const e=t.val();D(typeof e=="string"||typeof e=="number"||typeof e=="object"&&yr(e,".sv"),"Priority must be a string or number.")}else D(t===u2||t.isEmpty(),"priority of unexpected type.");D(t===u2||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Av;class Qe{constructor(e,n=Qe.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,D(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),bT(this.priorityNode_)}static set __childrenNodeConstructor(e){Av=e}static get __childrenNodeConstructor(){return Av}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Qe(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Qe.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ne(e)?this:se(e)===".priority"?this.priorityNode_:Qe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Qe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=se(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(D(r!==".priority"||as(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Qe.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ce(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+LT(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=aT(this.value_):e+=this.value_,this.lazyHash_=sT(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Qe.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Qe.__childrenNodeConstructor?-1:(D(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Qe.VALUE_TYPE_ORDER.indexOf(n),i=Qe.VALUE_TYPE_ORDER.indexOf(r);return D(s>=0,"Unknown leaf type: "+n),D(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Qe.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DT,OT;function CD(t){DT=t}function ID(t){OT=t}class SD extends dd{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Mo(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ie.MIN}maxPost(){return new ie(ri,new Qe("[PRIORITY-POST]",OT))}makePost(e,n){const r=DT(e);return new ie(n,new Qe("[PRIORITY-POST]",r))}toString(){return".priority"}}const wt=new SD;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=Math.log(2);class RD{constructor(e){const n=i=>parseInt(Math.log(i)/AD,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Xu=function(t,e,n,r){t.sort(e);const s=function(l,c){const h=c-l;let d,f;if(h===0)return null;if(h===1)return d=t[l],f=n?n(d):d,new Je(f,d.node,Je.BLACK,null,null);{const m=parseInt(h/2,10)+l,_=s(l,m),w=s(m+1,c);return d=t[m],f=n?n(d):d,new Je(f,d.node,Je.BLACK,_,w)}},i=function(l){let c=null,h=null,d=t.length;const f=function(_,w){const E=d-_,p=d;d-=_;const g=s(E+1,p),y=t[E],T=n?n(y):y;m(new Je(T,y.node,w,null,g))},m=function(_){c?(c.left=_,c=_):(h=_,c=_)};for(let _=0;_<l.count;++_){const w=l.nextBitIsOne(),E=Math.pow(2,l.count-(_+1));w?f(E,Je.BLACK):(f(E,Je.BLACK),f(E,Je.RED))}return h},o=new RD(t.length),a=i(o);return new Ft(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v0;const yi={};class ir{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return D(yi&&wt,"ChildrenNode.ts has not been loaded"),v0=v0||new ir({".priority":yi},{".priority":wt}),v0}get(e){const n=lo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ft?n:null}hasIndex(e){return yr(this.indexSet_,e.toString())}addIndex(e,n){D(e!==Zi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(ie.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=Xu(r,e.getCompare()):a=yi;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new ir(h,c)}addToIndexes(e,n){const r=Au(this.indexes_,(s,i)=>{const o=lo(this.indexSet_,i);if(D(o,"Missing index implementation for "+i),s===yi)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(ie.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Xu(a,o.getCompare())}else return yi;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new ie(e.name,a))),l.insert(e,e.node)}});return new ir(r,this.indexSet_)}removeFromIndexes(e,n){const r=Au(this.indexes_,s=>{if(s===yi)return s;{const i=n.get(e.name);return i?s.remove(new ie(e.name,i)):s}});return new ir(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo;class de{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&bT(this.priorityNode_),this.children_.isEmpty()&&D(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Zo||(Zo=new de(new Ft(Xm),null,ir.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Zo}updatePriority(e){return this.children_.isEmpty()?this:new de(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Zo:n}}getChild(e){const n=se(e);return n===null?this:this.getImmediateChild(n).getChild(Ce(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(D(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ie(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Zo:this.priorityNode_;return new de(s,o,i)}}updateChild(e,n){const r=se(e);if(r===null)return n;{D(se(e)!==".priority"||as(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Ce(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(wt,(o,a)=>{n[o]=a.val(e),r++,i&&de.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+LT(this.getPriority().val())+":"),this.forEachChild(wt,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":sT(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new ie(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ie(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ie(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,ie.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,ie.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===tc?-1:0}withIndex(e){if(e===Zi||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new de(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Zi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(wt),s=n.getIterator(wt);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Zi?null:this.indexMap_.get(e.toString())}}de.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class ND extends de{constructor(){super(new Ft(Xm),de.EMPTY_NODE,ir.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return de.EMPTY_NODE}isEmpty(){return!1}}const tc=new ND;Object.defineProperties(ie,{MIN:{value:new ie(wo,de.EMPTY_NODE)},MAX:{value:new ie(ri,tc)}});PT.__EMPTY_NODE=de.EMPTY_NODE;Qe.__childrenNodeConstructor=de;TD(tc);ID(tc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=!0;function yt(t,e=null){if(t===null)return de.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),D(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Qe(n,yt(e))}if(!(t instanceof Array)&&kD){const n=[];let r=!1;if(gn(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=yt(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new ie(o,l)))}}),n.length===0)return de.EMPTY_NODE;const i=Xu(n,xD,o=>o.name,Xm);if(r){const o=Xu(n,wt.getCompare());return new de(i,yt(e),new ir({".priority":o},{".priority":wt}))}else return new de(i,yt(e),ir.Default)}else{let n=de.EMPTY_NODE;return gn(t,(r,s)=>{if(yr(t,r)&&r.substring(0,1)!=="."){const i=yt(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(yt(e))}}CD(yt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD extends dd{constructor(e){super(),this.indexPath_=e,D(!ne(e)&&se(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Mo(e.name,n.name):i}makePost(e,n){const r=yt(e),s=de.EMPTY_NODE.updateChild(this.indexPath_,r);return new ie(n,s)}maxPost(){const e=de.EMPTY_NODE.updateChild(this.indexPath_,tc);return new ie(ri,e)}toString(){return AT(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD extends dd{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Mo(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ie.MIN}maxPost(){return ie.MAX}makePost(e,n){const r=yt(e);return new ie(n,r)}toString(){return".value"}}const bD=new LD;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(t){return{type:"value",snapshotNode:t}}function OD(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function MD(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Rv(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function jD(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=wt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return D(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return D(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:wo}hasEnd(){return this.endSet_}getIndexEndValue(){return D(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return D(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ri}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return D(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===wt}copy(){const e=new Jm;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Nv(t){const e={};if(t.isDefault())return e;let n;if(t.index_===wt?n="$priority":t.index_===bD?n="$value":t.index_===Zi?n="$key":(D(t.index_ instanceof PD,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=it(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=it(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+it(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=it(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+it(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function kv(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==wt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends CT{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Zl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(D(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Ju.getListenId_(e,r),a={};this.listens_[o]=a;const l=Nv(e._queryParams);this.restRequest_(i+".json",l,(c,h)=>{let d=h;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(i,d,!1,r),lo(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",s(f,null)}})}unlisten(e,n){const r=Ju.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Nv(e._queryParams),r=e._path.toString(),s=new wp;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ro(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Za(a.responseText)}catch{Qt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Qt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.rootNode_=de.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(){return{value:null,children:new Map}}function MT(t,e,n){if(ne(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=se(e);t.children.has(r)||t.children.set(r,Zu());const s=t.children.get(r);e=Ce(e),MT(s,e,n)}}function h2(t,e,n){t.value!==null?n(e,t.value):FD(t,(r,s)=>{const i=new Ae(e.toString()+"/"+r);h2(s,i,n)})}function FD(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&gn(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=10*1e3,$D=30*1e3,zD=5*60*1e3;class BD{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new UD(e);const r=Pv+($D-Pv)*Math.random();Pa(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;gn(e,(s,i)=>{i>0&&yr(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Pa(this.reportStats_.bind(this),Math.floor(Math.random()*2*zD))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Vn||(Vn={}));function jT(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function VT(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function FT(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Vn.ACK_USER_WRITE,this.source=jT()}operationForChild(e){if(ne(this.path)){if(this.affectedTree.value!=null)return D(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ae(e));return new eh(me(),n,this.revert)}}else return D(se(this.path)===e,"operationForChild called for unrelated child."),new eh(Ce(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Vn.OVERWRITE}operationForChild(e){return ne(this.path)?new si(this.source,me(),this.snap.getImmediateChild(e)):new si(this.source,Ce(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Vn.MERGE}operationForChild(e){if(ne(this.path)){const n=this.children.subtree(new Ae(e));return n.isEmpty()?null:n.value?new si(this.source,me(),n.value):new El(this.source,me(),n)}else return D(se(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new El(this.source,Ce(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ne(e))return this.isFullyInitialized()&&!this.filtered_;const n=se(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function WD(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(jD(o.childName,o.snapshotNode))}),ea(t,s,"child_removed",e,r,n),ea(t,s,"child_added",e,r,n),ea(t,s,"child_moved",i,r,n),ea(t,s,"child_changed",e,r,n),ea(t,s,"value",e,r,n),s}function ea(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,l)=>qD(t,a,l)),o.forEach(a=>{const l=HD(t,a,i);s.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function HD(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function qD(t,e,n){if(e.childName==null||n.childName==null)throw Ao("Should only compare child_ events.");const r=new ie(e.childName,e.snapshotNode),s=new ie(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t,e){return{eventCache:t,serverCache:e}}function La(t,e,n,r){return UT(new Zm(e,n,r),t.serverCache)}function $T(t,e,n,r){return UT(t.eventCache,new Zm(e,n,r))}function d2(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ii(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y0;const GD=()=>(y0||(y0=new Ft(bb)),y0);class Te{constructor(e,n=GD()){this.value=e,this.children=n}static fromObject(e){let n=new Te(null);return gn(e,(r,s)=>{n=n.set(new Ae(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:me(),value:this.value};if(ne(e))return null;{const r=se(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Ce(e),n);return i!=null?{path:Ze(new Ae(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ne(e))return this;{const n=se(e),r=this.children.get(n);return r!==null?r.subtree(Ce(e)):new Te(null)}}set(e,n){if(ne(e))return new Te(n,this.children);{const r=se(e),i=(this.children.get(r)||new Te(null)).set(Ce(e),n),o=this.children.insert(r,i);return new Te(this.value,o)}}remove(e){if(ne(e))return this.children.isEmpty()?new Te(null):new Te(null,this.children);{const n=se(e),r=this.children.get(n);if(r){const s=r.remove(Ce(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Te(null):new Te(this.value,i)}else return this}}get(e){if(ne(e))return this.value;{const n=se(e),r=this.children.get(n);return r?r.get(Ce(e)):null}}setTree(e,n){if(ne(e))return n;{const r=se(e),i=(this.children.get(r)||new Te(null)).setTree(Ce(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Te(this.value,o)}}fold(e){return this.fold_(me(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Ze(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,me(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(ne(e))return null;{const i=se(e),o=this.children.get(i);return o?o.findOnPath_(Ce(e),Ze(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,me(),n)}foreachOnPath_(e,n,r){if(ne(e))return this;{this.value&&r(n,this.value);const s=se(e),i=this.children.get(s);return i?i.foreachOnPath_(Ce(e),Ze(n,s),r):new Te(null)}}foreach(e){this.foreach_(me(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Ze(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.writeTree_=e}static empty(){return new Sn(new Te(null))}}function ba(t,e,n){if(ne(e))return new Sn(new Te(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=ln(s,e);return i=i.updateChild(o,n),new Sn(t.writeTree_.set(s,i))}else{const s=new Te(n),i=t.writeTree_.setTree(e,s);return new Sn(i)}}}function Lv(t,e,n){let r=t;return gn(n,(s,i)=>{r=ba(r,Ze(e,s),i)}),r}function bv(t,e){if(ne(e))return Sn.empty();{const n=t.writeTree_.setTree(e,new Te(null));return new Sn(n)}}function f2(t,e){return mi(t,e)!=null}function mi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ln(n.path,e)):null}function Dv(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(wt,(r,s)=>{e.push(new ie(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new ie(r,s.value))}),e}function Jr(t,e){if(ne(e))return t;{const n=mi(t,e);return n!=null?new Sn(new Te(n)):new Sn(t.writeTree_.subtree(e))}}function p2(t){return t.writeTree_.isEmpty()}function Eo(t,e){return zT(me(),t.writeTree_,e)}function zT(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(D(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=zT(Ze(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ze(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(t,e){return KT(e,t)}function KD(t,e,n,r,s){D(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=ba(t.visibleWrites,e,n)),t.lastWriteId=r}function QD(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function YD(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);D(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&XD(a,r.path)?s=!1:Tn(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return JD(t),!0;if(r.snap)t.visibleWrites=bv(t.visibleWrites,r.path);else{const a=r.children;gn(a,l=>{t.visibleWrites=bv(t.visibleWrites,Ze(r.path,l))})}return!0}else return!1}function XD(t,e){if(t.snap)return Tn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Tn(Ze(t.path,n),e))return!0;return!1}function JD(t){t.visibleWrites=WT(t.allWrites,ZD,me()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function ZD(t){return t.visible}function WT(t,e,n){let r=Sn.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)Tn(n,o)?(a=ln(n,o),r=ba(r,a,i.snap)):Tn(o,n)&&(a=ln(o,n),r=ba(r,me(),i.snap.getChild(a)));else if(i.children){if(Tn(n,o))a=ln(n,o),r=Lv(r,a,i.children);else if(Tn(o,n))if(a=ln(o,n),ne(a))r=Lv(r,me(),i.children);else{const l=lo(i.children,se(a));if(l){const c=l.getChild(Ce(a));r=ba(r,me(),c)}}}else throw Ao("WriteRecord should have .snap or .children")}}return r}function HT(t,e,n,r,s){if(!r&&!s){const i=mi(t.visibleWrites,e);if(i!=null)return i;{const o=Jr(t.visibleWrites,e);if(p2(o))return n;if(n==null&&!f2(o,me()))return null;{const a=n||de.EMPTY_NODE;return Eo(o,a)}}}else{const i=Jr(t.visibleWrites,e);if(!s&&p2(i))return n;if(!s&&n==null&&!f2(i,me()))return null;{const o=function(c){return(c.visible||s)&&(!r||!~r.indexOf(c.writeId))&&(Tn(c.path,e)||Tn(e,c.path))},a=WT(t.allWrites,o,e),l=n||de.EMPTY_NODE;return Eo(a,l)}}}function eO(t,e,n){let r=de.EMPTY_NODE;const s=mi(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(wt,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Jr(t.visibleWrites,e);return n.forEachChild(wt,(o,a)=>{const l=Eo(Jr(i,new Ae(o)),a);r=r.updateImmediateChild(o,l)}),Dv(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Jr(t.visibleWrites,e);return Dv(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function tO(t,e,n,r,s){D(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Ze(e,n);if(f2(t.visibleWrites,i))return null;{const o=Jr(t.visibleWrites,i);return p2(o)?s.getChild(n):Eo(o,s.getChild(n))}}function nO(t,e,n,r){const s=Ze(e,n),i=mi(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Jr(t.visibleWrites,s);return Eo(o,r.getNode().getImmediateChild(n))}else return null}function rO(t,e){return mi(t.visibleWrites,e)}function sO(t,e,n,r,s,i,o){let a;const l=Jr(t.visibleWrites,e),c=mi(l,me());if(c!=null)a=c;else if(n!=null)a=Eo(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),f=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let m=f.getNext();for(;m&&h.length<s;)d(m,r)!==0&&h.push(m),m=f.getNext();return h}else return[]}function iO(){return{visibleWrites:Sn.empty(),allWrites:[],lastWriteId:-1}}function m2(t,e,n,r){return HT(t.writeTree,t.treePath,e,n,r)}function qT(t,e){return eO(t.writeTree,t.treePath,e)}function Ov(t,e,n,r){return tO(t.writeTree,t.treePath,e,n,r)}function th(t,e){return rO(t.writeTree,Ze(t.treePath,e))}function oO(t,e,n,r,s,i){return sO(t.writeTree,t.treePath,e,n,r,s,i)}function eg(t,e,n){return nO(t.writeTree,t.treePath,e,n)}function GT(t,e){return KT(Ze(t.treePath,e),t.writeTree)}function KT(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;D(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),D(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Rv(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,MD(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,OD(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Rv(r,e.snapshotNode,s.oldSnap));else throw Ao("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const QT=new lO;class tg{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Zm(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return eg(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ii(this.viewCache_),i=oO(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}function cO(t,e){D(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),D(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function uO(t,e,n,r,s){const i=new aO;let o,a;if(n.type===Vn.OVERWRITE){const c=n;c.source.fromUser?o=g2(t,e,c.path,c.snap,r,s,i):(D(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ne(c.path),o=nh(t,e,c.path,c.snap,r,s,a,i))}else if(n.type===Vn.MERGE){const c=n;c.source.fromUser?o=dO(t,e,c.path,c.children,r,s,i):(D(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=_2(t,e,c.path,c.children,r,s,a,i))}else if(n.type===Vn.ACK_USER_WRITE){const c=n;c.revert?o=mO(t,e,c.path,r,s,i):o=fO(t,e,c.path,c.affectedTree,r,s,i)}else if(n.type===Vn.LISTEN_COMPLETE)o=pO(t,e,n.path,r,i);else throw Ao("Unknown operation type: "+n.type);const l=i.getChanges();return hO(e,o,l),{viewCache:o,changes:l}}function hO(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=d2(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(DD(d2(e)))}}function YT(t,e,n,r,s,i){const o=e.eventCache;if(th(r,n)!=null)return e;{let a,l;if(ne(n))if(D(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=ii(e),h=c instanceof de?c:de.EMPTY_NODE,d=qT(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const c=m2(r,ii(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,i)}else{const c=se(n);if(c===".priority"){D(as(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=Ov(r,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=Ce(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=Ov(r,n,o.getNode(),l);f!=null?d=o.getNode().getImmediateChild(c).updateChild(h,f):d=o.getNode().getImmediateChild(c)}else d=eg(r,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,h,s,i):a=o.getNode()}}return La(e,a,o.isFullyInitialized()||ne(n),t.filter.filtersNodes())}}function nh(t,e,n,r,s,i,o,a){const l=e.serverCache;let c;const h=o?t.filter:t.filter.getIndexedFilter();if(ne(n))c=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const m=l.getNode().updateChild(n,r);c=h.updateFullNode(l.getNode(),m,null)}else{const m=se(n);if(!l.isCompleteForPath(n)&&as(n)>1)return e;const _=Ce(n),E=l.getNode().getImmediateChild(m).updateChild(_,r);m===".priority"?c=h.updatePriority(l.getNode(),E):c=h.updateChild(l.getNode(),m,E,_,QT,null)}const d=$T(e,c,l.isFullyInitialized()||ne(n),h.filtersNodes()),f=new tg(s,d,i);return YT(t,d,n,s,f,a)}function g2(t,e,n,r,s,i,o){const a=e.eventCache;let l,c;const h=new tg(s,e,i);if(ne(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=La(e,c,!0,t.filter.filtersNodes());else{const d=se(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=La(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=Ce(n),m=a.getNode().getImmediateChild(d);let _;if(ne(f))_=r;else{const w=h.getCompleteChild(d);w!=null?ST(f)===".priority"&&w.getChild(RT(f)).isEmpty()?_=w:_=w.updateChild(f,r):_=de.EMPTY_NODE}if(m.equals(_))l=e;else{const w=t.filter.updateChild(a.getNode(),d,_,f,h,o);l=La(e,w,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function Mv(t,e){return t.eventCache.isCompleteForChild(e)}function dO(t,e,n,r,s,i,o){let a=e;return r.foreach((l,c)=>{const h=Ze(n,l);Mv(e,se(h))&&(a=g2(t,a,h,c,s,i,o))}),r.foreach((l,c)=>{const h=Ze(n,l);Mv(e,se(h))||(a=g2(t,a,h,c,s,i,o))}),a}function jv(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function _2(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;ne(n)?c=r:c=new Te(null).setTree(n,r);const h=e.serverCache.getNode();return c.children.inorderTraversal((d,f)=>{if(h.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),_=jv(t,m,f);l=nh(t,l,new Ae(d),_,s,i,o,a)}}),c.children.inorderTraversal((d,f)=>{const m=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!h.hasChild(d)&&!m){const _=e.serverCache.getNode().getImmediateChild(d),w=jv(t,_,f);l=nh(t,l,new Ae(d),w,s,i,o,a)}}),l}function fO(t,e,n,r,s,i,o){if(th(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(ne(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return nh(t,e,n,l.getNode().getChild(n),s,i,a,o);if(ne(n)){let c=new Te(null);return l.getNode().forEachChild(Zi,(h,d)=>{c=c.set(new Ae(h),d)}),_2(t,e,n,c,s,i,a,o)}else return e}else{let c=new Te(null);return r.foreach((h,d)=>{const f=Ze(n,h);l.isCompleteForPath(f)&&(c=c.set(h,l.getNode().getChild(f)))}),_2(t,e,n,c,s,i,a,o)}}function pO(t,e,n,r,s){const i=e.serverCache,o=$T(e,i.getNode(),i.isFullyInitialized()||ne(n),i.isFiltered());return YT(t,o,n,r,QT,s)}function mO(t,e,n,r,s,i){let o;if(th(r,n)!=null)return e;{const a=new tg(r,e,s),l=e.eventCache.getNode();let c;if(ne(n)||se(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=m2(r,ii(e));else{const d=e.serverCache.getNode();D(d instanceof de,"serverChildren would be complete if leaf node"),h=qT(r,d)}h=h,c=t.filter.updateFullNode(l,h,i)}else{const h=se(n);let d=eg(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?c=t.filter.updateChild(l,h,d,Ce(n),a,i):e.eventCache.getNode().hasChild(h)?c=t.filter.updateChild(l,h,de.EMPTY_NODE,Ce(n),a,i):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=m2(r,ii(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,i)))}return o=e.serverCache.isFullyInitialized()||th(r,me())!=null,La(e,c,o,t.filter.filtersNodes())}}function gO(t,e){const n=ii(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ne(e)&&!n.getImmediateChild(se(e)).isEmpty())?n.getChild(e):null}function Vv(t,e,n,r){e.type===Vn.MERGE&&e.source.queryId!==null&&(D(ii(t.viewCache_),"We should always have a full cache before handling merges"),D(d2(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=uO(t.processor_,s,e,n,r);return cO(t.processor_,i.viewCache),D(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,_O(t,i.changes,i.viewCache.eventCache.getNode(),null)}function _O(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return WD(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fv;function vO(t){D(!Fv,"__referenceConstructor has already been defined"),Fv=t}function ng(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return D(i!=null,"SyncTree gave us an op for an invalid query."),Vv(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(Vv(o,e,n,r));return i}}function rg(t,e){let n=null;for(const r of t.views.values())n=n||gO(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uv;function yO(t){D(!Uv,"__referenceConstructor has already been defined"),Uv=t}class $v{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Te(null),this.pendingWriteTree_=iO(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function wO(t,e,n,r,s){return KD(t.pendingWriteTree_,e,n,r,s),s?pd(t,new si(jT(),e,n)):[]}function ji(t,e,n=!1){const r=QD(t.pendingWriteTree_,e);if(YD(t.pendingWriteTree_,e)){let i=new Te(null);return r.snap!=null?i=i.set(me(),!0):gn(r.children,o=>{i=i.set(new Ae(o),!0)}),pd(t,new eh(r.path,i,n))}else return[]}function fd(t,e,n){return pd(t,new si(VT(),e,n))}function EO(t,e,n){const r=Te.fromObject(n);return pd(t,new El(VT(),e,r))}function xO(t,e,n,r){const s=eC(t,r);if(s!=null){const i=tC(s),o=i.path,a=i.queryId,l=ln(o,e),c=new si(FT(a),l,n);return nC(t,o,c)}else return[]}function TO(t,e,n,r){const s=eC(t,r);if(s){const i=tC(s),o=i.path,a=i.queryId,l=ln(o,e),c=Te.fromObject(n),h=new El(FT(a),l,c);return nC(t,o,h)}else return[]}function XT(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=ln(o,e),c=rg(a,l);if(c)return c});return HT(s,e,i,n,!0)}function pd(t,e){return JT(e,t.syncPointTree_,null,BT(t.pendingWriteTree_,me()))}function JT(t,e,n,r){if(ne(t.path))return ZT(t,e,n,r);{const s=e.get(me());n==null&&s!=null&&(n=rg(s,me()));let i=[];const o=se(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,h=GT(r,o);i=i.concat(JT(a,l,c,h))}return s&&(i=i.concat(ng(s,t,r,n))),i}}function ZT(t,e,n,r){const s=e.get(me());n==null&&s!=null&&(n=rg(s,me()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=GT(r,o),h=t.operationForChild(o);h&&(i=i.concat(ZT(h,a,l,c)))}),s&&(i=i.concat(ng(s,t,r,n))),i}function eC(t,e){return t.tagToQueryMap.get(e)}function tC(t){const e=t.indexOf("$");return D(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ae(t.substr(0,e))}}function nC(t,e,n){const r=t.syncPointTree_.get(e);D(r,"Missing sync point for query tag that we're tracking");const s=BT(t.pendingWriteTree_,e);return ng(r,n,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new sg(n)}node(){return this.node_}}class ig{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ze(this.path_,e);return new ig(this.syncTree_,n)}node(){return XT(this.syncTree_,this.path_)}}const CO=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},zv=function(t,e,n){if(!t||typeof t!="object")return t;if(D(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return IO(t[".sv"],e,n);if(typeof t[".sv"]=="object")return SO(t[".sv"],e);D(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},IO=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:D(!1,"Unexpected server value: "+t)}},SO=function(t,e,n){t.hasOwnProperty("increment")||D(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&D(!1,"Unexpected increment value: "+r);const s=e.node();if(D(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},AO=function(t,e,n,r){return og(e,new ig(n,t),r)},RO=function(t,e,n){return og(t,new sg(e),n)};function og(t,e,n){const r=t.getPriority().val(),s=zv(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=zv(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Qe(a,yt(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Qe(s))),o.forEachChild(wt,(a,l)=>{const c=og(l,e.getImmediateChild(a),n);c!==l&&(i=i.updateImmediateChild(a,c))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function lg(t,e){let n=e instanceof Ae?e:new Ae(e),r=t,s=se(n);for(;s!==null;){const i=lo(r.node.children,s)||{children:{},childCount:0};r=new ag(s,r,i),n=Ce(n),s=se(n)}return r}function jo(t){return t.node.value}function rC(t,e){t.node.value=e,v2(t)}function sC(t){return t.node.childCount>0}function NO(t){return jo(t)===void 0&&!sC(t)}function md(t,e){gn(t.node.children,(n,r)=>{e(new ag(n,t,r))})}function iC(t,e,n,r){n&&!r&&e(t),md(t,s=>{iC(s,e,!0,r)}),n&&r&&e(t)}function kO(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function nc(t){return new Ae(t.parent===null?t.name:nc(t.parent)+"/"+t.name)}function v2(t){t.parent!==null&&PO(t.parent,t.name,t)}function PO(t,e,n){const r=NO(n),s=yr(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,v2(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,v2(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=/[\[\].#$\/\u0000-\u001F\u007F]/,bO=/[\[\].#$\u0000-\u001F\u007F]/,w0=10*1024*1024,oC=function(t){return typeof t=="string"&&t.length!==0&&!LO.test(t)},DO=function(t){return typeof t=="string"&&t.length!==0&&!bO.test(t)},OO=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),DO(t)},aC=function(t,e,n){const r=n instanceof Ae?new pD(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ss(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ss(r)+" with contents = "+e.toString());if(iT(e))throw new Error(t+"contains "+e.toString()+" "+Ss(r));if(typeof e=="string"&&e.length>w0/3&&Ch(e)>w0)throw new Error(t+"contains a string greater than "+w0+" utf8 bytes "+Ss(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(gn(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!oC(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ss(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);mD(r,o),aC(t,a,r),gD(r)}),s&&i)throw new Error(t+' contains ".value" child '+Ss(r)+" in addition to actual children.")}},MO=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!oC(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!OO(n))throw new Error(D9(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function VO(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!NT(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function gi(t,e,n){VO(t,n),FO(t,r=>Tn(r,e)||Tn(e,r))}function FO(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(UO(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function UO(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Ws&&vt("event: "+n.toString()),ec(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O="repo_interrupt",zO=25;class BO{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new jO,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Zu(),this.transactionQueueTree_=new ag,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function WO(t,e,n){if(t.stats_=Km(t.repoInfo_),t.forceRestClient_||Fb())t.server_=new Ju(t.repoInfo_,(r,s,i,o)=>{Bv(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Wv(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{it(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new lr(t.repoInfo_,e,(r,s,i,o)=>{Bv(t,r,s,i,o)},r=>{Wv(t,r)},r=>{qO(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Wb(t.repoInfo_,()=>new BD(t.stats_,t.server_)),t.infoData_=new VD,t.infoSyncTree_=new $v({startListening:(r,s,i,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=fd(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),cg(t,"connected",!1),t.serverSyncTree_=new $v({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,l)=>{const c=o(a,l);gi(t.eventQueue_,r._path,c)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function HO(t){const n=t.infoData_.getNode(new Ae(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function lC(t){return CO({timestamp:HO(t)})}function Bv(t,e,n,r,s){t.dataUpdateCount++;const i=new Ae(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const l=Au(n,c=>yt(c));o=TO(t.serverSyncTree_,i,l,s)}else{const l=yt(n);o=xO(t.serverSyncTree_,i,l,s)}else if(r){const l=Au(n,c=>yt(c));o=EO(t.serverSyncTree_,i,l)}else{const l=yt(n);o=fd(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=hg(t,i)),gi(t.eventQueue_,a,o)}function Wv(t,e){cg(t,"connected",e),e===!1&&KO(t)}function qO(t,e){gn(e,(n,r)=>{cg(t,n,r)})}function cg(t,e,n){const r=new Ae("/.info/"+e),s=yt(n);t.infoData_.updateSnapshot(r,s);const i=fd(t.infoSyncTree_,r,s);gi(t.eventQueue_,r,i)}function GO(t){return t.nextWriteId_++}function KO(t){cC(t,"onDisconnectEvents");const e=lC(t),n=Zu();h2(t.onDisconnect_,me(),(s,i)=>{const o=AO(s,i,t.serverSyncTree_,e);MT(n,s,o)});let r=[];h2(n,me(),(s,i)=>{r=r.concat(fd(t.serverSyncTree_,s,i));const o=JO(t,s);hg(t,o)}),t.onDisconnect_=Zu(),gi(t.eventQueue_,me(),r)}function QO(t){t.persistentConnection_&&t.persistentConnection_.interrupt($O)}function cC(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),vt(n,...e)}function uC(t,e,n){return XT(t.serverSyncTree_,e,n)||de.EMPTY_NODE}function ug(t,e=t.transactionQueueTree_){if(e||gd(t,e),jo(e)){const n=dC(t,e);D(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&YO(t,nc(e),n)}else sC(e)&&md(e,n=>{ug(t,n)})}function YO(t,e,n){const r=n.map(c=>c.currentWriteId),s=uC(t,e,r);let i=s;const o=s.hash();for(let c=0;c<n.length;c++){const h=n[c];D(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=ln(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,c=>{cC(t,"transaction put response",{path:l.toString(),status:c});let h=[];if(c==="ok"){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,h=h.concat(ji(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();gd(t,lg(t.transactionQueueTree_,e)),ug(t,t.transactionQueueTree_),gi(t.eventQueue_,e,h);for(let f=0;f<d.length;f++)ec(d[f])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Qt("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}hg(t,e)}},o)}function hg(t,e){const n=hC(t,e),r=nc(n),s=dC(t,n);return XO(t,s,r),r}function XO(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=ln(n,l.path);let h=!1,d;if(D(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,d=l.abortReason,s=s.concat(ji(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=zO)h=!0,d="maxretry",s=s.concat(ji(t.serverSyncTree_,l.currentWriteId,!0));else{const f=uC(t,l.path,o);l.currentInputSnapshot=f;const m=e[a].update(f.val());if(m!==void 0){aC("transaction failed: Data returned ",m,l.path);let _=yt(m);typeof m=="object"&&m!=null&&yr(m,".priority")||(_=_.updatePriority(f.getPriority()));const E=l.currentWriteId,p=lC(t),g=RO(_,f,p);l.currentOutputSnapshotRaw=_,l.currentOutputSnapshotResolved=g,l.currentWriteId=GO(t),o.splice(o.indexOf(E),1),s=s.concat(wO(t.serverSyncTree_,l.path,g,l.currentWriteId,l.applyLocally)),s=s.concat(ji(t.serverSyncTree_,E,!0))}else h=!0,d="nodata",s=s.concat(ji(t.serverSyncTree_,l.currentWriteId,!0))}gi(t.eventQueue_,n,s),s=[],h&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}gd(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)ec(r[a]);ug(t,t.transactionQueueTree_)}function hC(t,e){let n,r=t.transactionQueueTree_;for(n=se(e);n!==null&&jo(r)===void 0;)r=lg(r,n),e=Ce(e),n=se(e);return r}function dC(t,e){const n=[];return fC(t,e,n),n.sort((r,s)=>r.order-s.order),n}function fC(t,e,n){const r=jo(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);md(e,s=>{fC(t,s,n)})}function gd(t,e){const n=jo(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,rC(e,n.length>0?n:void 0)}md(e,r=>{gd(t,r)})}function JO(t,e){const n=nc(hC(t,e)),r=lg(t.transactionQueueTree_,e);return kO(r,s=>{E0(t,s)}),E0(t,r),iC(r,s=>{E0(t,s)}),n}function E0(t,e){const n=jo(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(D(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(D(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(ji(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?rC(e,void 0):n.length=i+1,gi(t.eventQueue_,nc(e),s);for(let o=0;o<r.length;o++)ec(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function eM(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Qt(`Invalid query segment '${n}' in query '${t}'`)}return e}const Hv=function(t,e){const n=tM(t),r=n.namespace;n.domain==="firebase.com"&&_r(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&_r("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Pb();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new _T(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Ae(n.pathString)}},tM=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(s=ZO(t.substring(h,d)));const f=eM(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const m=e.slice(0,c);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return ne(this._path)?null:ST(this._path)}get ref(){return new Vo(this._repo,this._path)}get _queryIdentifier(){const e=kv(this._queryParams),n=qm(e);return n==="{}"?"default":n}get _queryObject(){return kv(this._queryParams)}isEqual(e){if(e=_e(e),!(e instanceof dg))return!1;const n=this._repo===e._repo,r=NT(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+fD(this._path)}}class Vo extends dg{constructor(e,n){super(e,n,new Jm,!1)}get parent(){const e=RT(this._path);return e===null?null:new Vo(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}vO(Vo);yO(Vo);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM="FIREBASE_DATABASE_EMULATOR_HOST",y2={};let rM=!1;function sM(t,e,n,r){t.repoInfo_=new _T(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function iM(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||_r("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),vt("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Hv(i,s),a=o.repoInfo,l,c;typeof process<"u"&&hv&&(c=hv[nM]),c?(l=!0,i=`http://${c}?ns=${a.namespace}`,o=Hv(i,s),a=o.repoInfo):l=!o.repoInfo.secure;const h=s&&l?new Ji(Ji.OWNER):new $b(t.name,t.options,e);MO("Invalid Firebase Database URL",o),ne(o.path)||_r("Database URL must point to the root of a Firebase Database (not including a child path).");const d=aM(a,t,h,new Ub(t.name,n));return new lM(d,t)}function oM(t,e){const n=y2[e];(!n||n[t.key]!==t)&&_r(`Database ${e}(${t.repoInfo_}) has already been deleted.`),QO(t),delete n[t.key]}function aM(t,e,n,r){let s=y2[e.name];s||(s={},y2[e.name]=s);let i=s[t.toURLString()];return i&&_r("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new BO(t,rM,n,r),s[t.toURLString()]=i,i}class lM{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(WO(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Vo(this._repo,me())),this._rootInternal}_delete(){return this._rootInternal!==null&&(oM(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&_r("Cannot call "+e+" on a deleted database.")}}function cM(t=Sh(),e){const n=kl(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=yp("database");r&&uM(n,...r)}return n}function uM(t,e,n,r={}){t=_e(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&_r("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&_r('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new Ji(Ji.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Ep(r.mockUserToken,t.app.options.projectId);i=new Ji(o)}sM(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(t){Sb(ds),ts(new fr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return iM(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),un(dv,fv,t),un(dv,fv,"esm2017")}lr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};lr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};hM();function w2(t,e){localStorage.setItem(t,JSON.stringify(e))}function qv(t){let e=localStorage.getItem(t);try{return JSON.parse(e)}catch{return null}}const dM={apiKey:"AIzaSyCwF75LGVuWriGfXEyHzoGBvobiOdMEwHs",authDomain:"star-education-academy.firebaseapp.com",projectId:"star-education-academy",storageBucket:"star-education-academy.appspot.com",messagingSenderId:"693801186794",appId:"1:693801186794:web:b202cdffa55530e687ee93",measurementId:"G-JN1DV2YT81",databaseURL:"https://star-education-academy-default-rtdb.asia-southeast1.firebasedatabase.app"},_d=D3(dM),U=dL(_d),fM=new Zn,ce=Lk(_d),Vs=xb(_d);cM(_d);const xo=(t,e,n)=>{v.useEffect(()=>{try{if(n){const r=ut(ce,t),s=Gn(r,i=>{const o=i.docs.map(a=>({...a.data(),[t==="users"?"uid":"id"]:a.id}));o.length!==0&&e(o)});return()=>{s()}}}catch(r){console.log(r.message)}},[n])},pM=(t,e,n)=>{v.useEffect(()=>{var r;try{if(n){const s=le(ce,t,(r=U==null?void 0:U.currentUser)==null?void 0:r.uid),i=Gn(s,o=>{const a={uid:o.id,...o.data()};return a!=null&&a.name&&e(a),()=>i()})}}catch(s){console.log(s.message)}},[n])};function Er(t,e){let n;return t.forEach(r=>{r.uid===e&&(n=r)}),n}const mM=({data:t})=>{const{nextPage:e,prevPage:n,isEnded:r,startIndex:s}=t,{startTimer:i,formattedTime:o,stopTest:a,currentTest:l,answeredQuestions:c}=v.useContext(F),h=tn(),d=async()=>{try{const _=ut(ce,"notifications"),w={uid:U.currentUser.uid,type:["took","test"],testName:l.name,isReadBy:[],timestamp:new Date().getTime()};await os(_,w)}catch(_){console.log(_.message)}},f=async()=>{try{const _=ut(le(ce,"users",U.currentUser.uid),"history"),w=o9(c,l,o),E=await os(_,w),p=(await sx(E)).id;h(`/app/history/${p}`)}catch(_){console.log(_.message)}},m=()=>{i(),f(),a(),d()};return u.jsxs("div",{className:"flex justify-center gap-x-5",children:[s!==0&&u.jsx(he,{data:{clickFn:n,text:"Previous",image:"back"}}),r?u.jsx(he,{data:{clickFn:m,text:"Finish",image:"finish"}}):u.jsx(he,{data:{clickFn:e,text:"Next",image:"next"}})]})},kn=()=>{const[t,e]=v.useState(!0),[n,r]=v.useState(0),{theme:s}=v.useContext(F);if(v.useEffect(()=>{const i=setInterval(()=>{r(Math.min(n+1,100)),n===100&&(e(!1),r(0))},5);return()=>{clearInterval(i)}},[n]),t&&(document.title="Loading..."),t)return u.jsx("div",{className:`transition-all fixed z-30  top-0 right-0 left-0 bottom-0 flex  items-center justify-center ${s==="light"?"bg-white":"bg-slate-600 text-white"}`,children:u.jsxs("div",{className:"flex flex-col items-center justify-center gap-y-4",children:[u.jsx("img",{className:"w-20 rounded-lg",src:"/images/sea-logo.jpg"}),u.jsx("div",{className:"h-3 w-[200px] rounded-md overflow-hidden",children:u.jsx("div",{style:{width:`${n}%`},className:"h-full bg-blue-300"})}),u.jsxs("p",{className:"text-lg",children:[n,"%"]})]})})},gM=()=>{const{answeredQuestions:t,setAnsweredQuestions:e,currentTest:n,seaLocalStorage:r,seconds:s,hours:i,minutes:o}=v.useContext(F),a=t.length,l=n.quizzes.length,[c,h]=v.useState((r==null?void 0:r.startIndex)||0),[d,f]=v.useState(!1),[m,_]=v.useState(!1),[w,E]=v.useState(!1),p=10;let g=n.quizzes.slice(c,c+p);const y=n.name,T=Math.ceil(l/p),x=Math.ceil((c+p)/p),C=Math.round(a/l*100);v.useEffect(()=>(Kt(),Kt()),[]),v.useEffect(()=>{w2("sea-localStorage",{answeredQuestions:t,currentTest:n,startIndex:c,timer:{seconds:s,minutes:o,hours:i}})},[t,n,c,s]),v.useEffect(()=>{a===l&&c+p>=l?f(!0):f(!1)},[c,t]),v.useEffect(()=>{a>=c+p?_(!0):_(!1)},[t,c]);const k={pageTitle:y,currentPage:x,totalPage:T,percentage:C,answerLength:a,questionsLength:l,currentQuestions:g,isEnded:d,chooseAnswer:(V,$)=>{const Y=e6(V,t);e(Y?t.map(oe=>V===oe.id?{id:V,userAnswer:$}:oe):[...t,{id:V,userAnswer:$}])},nextPage:()=>{m?(h(c+p),a<=c+p&&Kt()):t6(E)},prevPage:()=>{h(Math.max(c-p,0))},startIndex:c};return u.jsxs("div",{className:"p-3 grid gap-y-3",children:[u.jsx(kn,{}),u.jsx(n6,{data:k}),u.jsx(r6,{data:k}),w&&u.jsx(i6,{}),u.jsx(mM,{data:k})]})},vd=({title:t,text:e})=>{const{isLogin:n,theme:r}=v.useContext(F),s=tn();return u.jsxs("div",{className:"grid p-5 gap-y-2",children:[e&&u.jsx("div",{className:` ${r==="light"?"":"text-white"}`,children:e}),u.jsx("div",{children:u.jsx(he,{data:{clickFn:()=>s(n?"/app/posts":"/login"),image:"redo",text:n?"Return Home":"Login"}})})]})},_M=()=>{const{theme:t,userData:e}=v.useContext(F),[n,r]=v.useState(null),s=`${n==null?void 0:n.testName} - Results`,i=Math.round((n==null?void 0:n.score)/(n==null?void 0:n.totalScore)*100),o=tn(),{resultId:a}=_p(),l=()=>{try{const h=ut(le(ce,"users",e.uid),"history"),d=le(h,a);return Gn(d,m=>{const _={id:m.id,...m.data()};r(_)})}catch(h){return console.log(h.message),()=>{}}};v.useEffect(()=>{const h=l();return()=>{h()}},[a]),v.useEffect(()=>(Kt(),Kt()),[]);const c=async()=>{try{await navigator.share({title:"Check out my score!",text:`I scored ${n.score} out of ${n.totalScore} in '${n.testName}'.
Website URL - https://wwww.seaacademy.onrender.com
        `})}catch{console.log("Error")}};return u.jsxs("div",{className:"p-5 ",children:[u.jsx(kn,{}),n?u.jsxs("div",{className:"",children:[u.jsxs("div",{className:"flex items-center gap-x-1 h-10 font-medium mb-4",children:[u.jsx(ge,{data:{image:"back",clickFn:()=>o("/app/history")}}),u.jsx("div",{className:`text-lg pl-2 place-items-center bg-blue-40 ${t==="light"?"text-gray-500":"text-white"}`,children:s})]}),u.jsxs("div",{className:"flex items-center gap-x-1 mb-2",children:[u.jsx("div",{children:u.jsx("div",{className:"grid items-center justify-center bg-blue-300/50 h-40 w-40 rounded-full",children:u.jsx("div",{className:"grid items-center justify-center bg-blue-400/50 h-32 w-32 rounded-full",children:u.jsx("div",{className:"grid items-center justify-center bg-blue-500/50 h-28 w-28 rounded-full",children:u.jsx("div",{className:`grid  h-20 w-20 items-center justify-center rounded-full ${t==="light"?"bg-slate-50":"bg-slate-600"}`,children:u.jsxs("div",{className:`flex flex-col items-center justify-center font-medium ${t==="light"?"text-blue-500":"text-white"}`,children:[u.jsx("div",{className:"text-sm font-bold",children:"Your Score"}),u.jsxs("div",{className:" text-lg ",children:[n.score," / ",n.totalScore]})]})})})})})}),u.jsx("div",{className:`grid items-center justify-center font-bold
             text-lg ${t==="light"?"text-blue-700":"text-white"}`,children:u.jsx("div",{children:n.level})})]}),u.jsxs("div",{className:"mt-1 mb-2 h-2 border flex ",children:[u.jsx("div",{className:`h-full ${t==="light"?"bg-lime-400":"bg-slate-500"}`,style:{width:`${i}%`}}),u.jsx("div",{className:"h-full bg-gray-200",style:{width:`${100-i}%`}})]}),u.jsxs("div",{className:`grid grid-cols-2 gap-y-2 border p-2 rounded-lg ${t==="light"?"bg-white border-gray-200":"border-slate-500/70 text-white"}`,children:[u.jsx(xs,{text:"Score Percentage",value:`${i}%`,color:"text-lime-500"}),u.jsx(xs,{text:"Total Questions",value:n.totalScore,color:"text-lime-500"}),u.jsx(xs,{text:"Correct",value:n.score,color:"text-green-500"}),u.jsx(xs,{text:"Wrong",value:n.totalScore-n.score,color:"text-red-500"}),u.jsx(xs,{text:"Date",value:n.date,color:"text-lime-500"}),u.jsx(xs,{text:"Time",value:n.time,color:"text-lime-500"}),u.jsx(xs,{text:"Time taken",value:c3(n.timeTaken)||"Unknown",color:"text-lime-500"})]}),u.jsxs("div",{className:`grid grid-cols-3 justify-center gap-y-2 mt-5 ${t==="light"?"":"text-white"}`,children:[u.jsxs("div",{className:"flex flex-col items-center justify-center",children:[u.jsx(ge,{data:{clickFn:()=>o(`/app/history/${a}/reviews`),image:"review"}}),u.jsx("div",{className:"text-sm",children:"Review Answers"})]}),u.jsxs("div",{className:"flex flex-col items-center justify-center",children:[u.jsx(ge,{data:{clickFn:c,image:"share"}}),u.jsx("div",{className:"text-sm",children:"Share Score"})]}),u.jsxs("div",{className:"flex flex-col items-center justify-center",children:[u.jsx(ge,{data:{clickFn:()=>o("/app/posts"),image:"home"}}),u.jsx("div",{className:"text-sm",children:"Home"})]})]})]}):u.jsx(vd,{text:"Unavailable"})]})},xs=({text:t,value:e,color:n})=>u.jsxs("div",{children:[u.jsxs("div",{className:`font-medium ${n}`,children:["● ",e]}),u.jsx("div",{className:"text-sm",children:t})]}),pC=({image:t,clickFn:e,active:n})=>{const{theme:r}=v.useContext(F);return u.jsx("button",{className:`transition-all rounded-full p-2  ${r==="light"?`hover:bg-slate-200/70 ${n?"bg-slate-200/70":""}`:`hover:bg-slate-600/70 ${n?"bg-slate-500/70":""}`} mr-2`,onClick:e,children:u.jsx("img",{className:"w-8",src:J(t)})})};function xr(t,e=15){const n=t.slice(0,e);return e>=t.length?n:`${n}...`}const Tr=({image:t,name:e,size:n="size-10",fontSize:r="text-lg"})=>{const s=t&&t.trim(),i=e&&e.trim(),o=s&&i,a=()=>{const l=e.trim().split(" ");return l.length<=3?l[0][0].toUpperCase():`${l[0][0]}${l[1][0]}`.toUpperCase()};if(s||o)return u.jsx("img",{className:`${n} rounded-full object-cover`,src:t});if(i)return u.jsx("div",{className:`flex font-roboto justify-center ${r} items-center  rounded-full font-bold text-white bg-blue-400 ${n}`,children:a()});if(!o)return u.jsx("div",{className:`flex font-roboto justify-center ${r} items-center  rounded-full font-bold text-white bg-blue-400 ${n}`,children:"U"})},vM=({data:t})=>{const{setIsMenuOpen:e}=t,[n,r]=v.useState(!1),s=v.useRef(null),i=tn(),{setIsLogIn:o,theme:a,userData:l,refreshUserData:c,inspecting:h,isOnline:d}=v.useContext(F),f=async()=>{try{await eP(U),e(!1),o(!1)}catch(w){console.log(w.message)}};li(s,r);const m=async()=>{const w=le(ce,"users",U.currentUser.uid);await St(w,{isOnline:!1,lastSeen:new Date().getTime()})},_=async()=>{const w=le(ce,"users",U.currentUser.uid);await St(w,{isOnline:!0})};return u.jsxs("div",{ref:s,className:"p-2 ",children:[u.jsx("button",{onClick:()=>r(!n),className:`transition-all p-1 rounded-md cursor-pointer w-full min-h-14 ${a==="light"?`${n?"bg-slate-200/70":"hover:bg-slate-200/70"}`:`${n?"bg-slate-500/70":"hover:bg-slate-500/70"}`}`,children:u.jsxs("div",{className:"flex gap-x-2 items-center mb-2",children:[u.jsxs("div",{className:"relative w-10",children:[u.jsx(Tr,{image:l==null?void 0:l.image,name:l==null?void 0:l.name}),u.jsx("div",{className:`absolute bottom-0 right-0 size-3 rounded-full ${l!=null&&l.isOnline?"bg-green-500":"bg-gray-500"}`})]}),u.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[u.jsxs("div",{className:"font-medium",children:[l==null?void 0:l.name," ",u.jsxs("span",{className:"text-blue-500",children:["(",l.isAdmin?"admin":"user",")"]})]}),h&&u.jsx(ge,{data:{clickFn:c,image:"exit"}})]})]})}),n&&u.jsxs("div",{className:`fixed bottom-[70px] left-1 border w-4/6 sm:w-3/5 md:w-4/6  p-2 rounded-md ${a==="light"?"border-gray-200 bg-white ":"bg-slate-500 text-white border-slate-500 "}`,children:[u.jsxs("div",{children:[u.jsxs("button",{onClick:()=>{l!=null&&l.isOnline?m():_()},className:`flex w-full p-1 rounded-md gap-x-2 items-center  ${a==="light"?"hover:bg-gray-200/70":"hover:bg-slate-600 text-white"}`,children:[u.jsx("img",{className:"w-6",src:J(l!=null&&l.isOnline?"offline":"online")}),u.jsxs("div",{children:["Switch to ",l!=null&&l.isOnline?"offline":"online"]})]}),u.jsxs("button",{onClick:()=>{i("/app/settings"),e(!1),r(!1)},className:`flex w-full p-1 rounded-md gap-x-2 items-center  ${a==="light"?"hover:bg-gray-200/70":"hover:bg-slate-600 text-white"}`,children:[u.jsx("img",{className:"w-6",src:J("admin")}),u.jsx("div",{children:"Settings"})]})]}),u.jsxs("button",{onClick:f,className:`flex w-full p-1 rounded-md gap-x-2 items-center ${a==="light"?"hover:bg-gray-200/70":"hover:bg-slate-600 text-white"}`,children:[u.jsx("img",{className:"w-6",src:J("logout")}),u.jsx("div",{children:"Log out"})]})]})]})},yM=({data:t})=>{const{isMenuOpen:e,setIsMenuOpen:n}=t,r=v.useRef(null),s=So(),{setHeaderTitle:i,theme:o,userData:a}=v.useContext(F),l=["/app/admin","/app/admin/posts","/app/admin/users","/app/admin/helps","/app/admin/tests"],c=["/app/posts","/app/tests"],h=s.pathname.includes("/app/history"),d=l.includes(s.pathname),f=c.includes(s.pathname),m=s.pathname==="/app/help",_=s.pathname==="/app/settings",w=s.pathname==="/login",E=s.pathname==="/app/notifications",p=s.pathname==="/app/chatroom";if(h)i("History");else if(m)i("Help");else if(d)switch(s.pathname){case"/app/admin":i("Admin");break;case"/app/admin/posts":i("Admin - Posts");break;case"/app/admin/users":i("Admin - Users");break;case"/app/admin/tests":i("Admin - Tests");break;case"/app/admin/help":i("Admin - Help");break}else _?i("Settings"):(w||f)&&i("STAR EDUCATION ACADEMY");const g=[{text:"Home",image:"home",path:"/app/posts",active:f,clickFn:()=>n(!1)},{text:"History",image:"history",path:"/app/history",active:h,clickFn:()=>n(!1)},{text:"Help",image:"help",path:"/app/help",active:m,clickFn:()=>n(!1)},{text:"Notifications",image:"notification",path:"/app/notifications",color:"bg-red-600",active:E,clickFn:()=>n(!1)},{text:"Chat Room",image:"chat",path:"/app/chatroom",color:"bg-red-600",active:p,clickFn:()=>n(!1)},{text:"Admin",image:"admin",path:"/app/admin",active:d,clickFn:()=>n(!1)}],y=["Admin","Notifications"],T=g.filter(x=>a.isAdmin?!0:!y.includes(x.text));return v.useEffect(()=>{Xt(e?"hidden":"auto")},[e]),li(r,n),u.jsx("div",{style:{left:e?0:"-1500px",right:e?0:""},className:"z-30 transition-all duration-300 fixed top-0 bottom-0 bg-black/40",children:u.jsxs("div",{ref:r,className:`flex flex-col backdrop-blur-sm  justify-between transition-all duration-300 h-full bg-slate-50 w-5/6 sm:w-3/5 md:w-3/6 lg:w-2/6 shadow-lg shadow-black ${o==="light"?"bg-white/60 ":" bg-slate-500/60 text-white"}`,children:[u.jsxs("div",{children:[u.jsx("div",{className:"flex p-3 items-center",children:u.jsxs("div",{className:"font-medium text-md flex-1 flex items-center",children:[u.jsx(pC,{clickFn:()=>n(!1),image:e?"close":"menu",active:e}),u.jsx("div",{className:`font-bold  ${o==="light"?"text-blue-500":" text-slate-700"}`,children:"STAR EDUCATION ACADEMY"})]})}),u.jsx("div",{className:"mr-2",children:T.map(x=>u.jsx(wM,{data:{active:x.active,image:x.image,path:x.path,text:x.text,items:x==null?void 0:x.items,clickFn:x.clickFn,color:x.color}},x.text))})]}),u.jsx(vM,{data:{setIsMenuOpen:n}})]})})},wM=({data:t})=>{const{active:e,image:n,text:r,items:s,path:i,clickFn:o,color:a}=t,l=tn(),{theme:c,currentTest:h}=v.useContext(F),d=()=>{o&&o()};return u.jsxs("button",{onClick:()=>{l(i),d()},className:`p-2 pl-2 transition-all font-medium rounded-tr-3xl rounded-br-3xl flex relative items-center gap-x-1 w-full  hover:shadow-md 
      ${c==="light"?` ${e?"bg-blue-500/70":"hover:bg-slate-200/70"}`:` ${e?"bg-blue-500/70":"hover:bg-slate-500/70"}`}
      `,children:[u.jsx("img",{className:`h-9 w-9 p-1 transition-all
        `,src:J(n)}),u.jsx("div",{children:r}),s>=0&&u.jsx("div",{className:` flex items-center rounded-full justify-center w-6 h-6 text-sm  top-0 -left-1 font-bold text-white ${a||"bg-black"}`,children:s}),h&&r==="Home"&&u.jsxs("div",{className:"text-sm",children:["(Taking ",xr(h.name,45),")"]})]})},mC=({theme:t,setTheme:e})=>{const n=()=>{e(t==="light"?"dark":"light")};return u.jsxs("div",{className:`flex items-center gap-x-2 ${t==="light"?"":"text-white"} `,children:[u.jsx("div",{children:"Theme"}),u.jsx(ge,{data:{clickFn:n,image:t==="light"?"light":"dark"}})]})},EM=()=>{const{headerTitle:t,theme:e,setTheme:n,isLogin:r}=v.useContext(F),[s,i]=v.useState(!1);return u.jsxs("header",{className:`p-2 w-full shadow-sm flex justify-between items-center sticky top-0 right-0 left-0 z-20 ${e==="light"?"bg-slate-50 ":"bg-slate-500"}`,children:[u.jsxs("div",{className:"flex items-center",children:[r&&u.jsxs(u.Fragment,{children:[u.jsx(pC,{clickFn:()=>i(!0),image:"menu",active:s}),u.jsx(yM,{data:{isMenuOpen:s,setIsMenuOpen:i}})]}),u.jsx("div",{className:"font-medium text-md flex-1 flex items-center gap-x-2",children:u.jsx("div",{className:`font-bold ${e==="light"?"text-blue-500":"text-slate-700"}`,children:t})})]}),u.jsxs("div",{className:"flex gap-x-2 items-center",children:[u.jsx("div",{className:"hidden md:block",children:u.jsx(mC,{setTheme:n,theme:e})}),u.jsx("img",{className:"size-12 rounded-full",src:"images/sea-logo.jpg"})]})]})},Vi=()=>u.jsx("div",{className:"h-0.5 border border-dashed border-gray-200 mb-2 mt-2"}),xM=()=>{var w;const{theme:t,userData:e}=v.useContext(F),n=0,r=10,[s,i]=v.useState(r),[o,a]=v.useState(!1),[l,c]=v.useState({}),h=(w=l==null?void 0:l.results)==null?void 0:w.slice(n,s),d=`${l==null?void 0:l.testName} - Review your answers`,{resultId:f}=_p(),m=()=>{try{const E=ut(le(ce,"users",e.uid),"history"),p=le(E,f);return Gn(p,y=>{const T={id:y.id,...y.data()};c(T)})}catch(E){console.log(E.message)}};v.useEffect(()=>{const E=m();return()=>{E()}},[f]),v.useEffect(()=>(Kt(),Kt()),[]);const _=()=>{i(s+r)};return v.useEffect(()=>{var E;s>=((E=l==null?void 0:l.results)==null?void 0:E.length)&&a(!0)},[s]),document.title=d,u.jsxs("div",{className:"p-5",children:[u.jsx(kn,{}),l?u.jsxs("div",{className:"grid gap-y-5",children:[u.jsx("div",{className:`font-medium text-lg ${t==="light"?"":"text-white"}`,children:d}),h==null?void 0:h.map(E=>{const{id:p,question:g,isTrue:y,answer:T,userAnswer:x}=E;return y?u.jsxs("div",{className:"grid font-padauk gap-y-2",children:[u.jsxs("div",{className:"flex gap-x-3 items-center",children:[u.jsx("div",{className:"bg-green-500 h-9 w-9 text-white font-bold rounded-sm flex justify-center items-center ",children:p}),u.jsx("div",{className:`flex-1 ${t==="light"?"":"text-white"}`,children:g})]}),u.jsx("div",{children:u.jsxs("div",{className:"grid gap-y-1",children:[u.jsx("div",{className:"text-green-500 font-bold",children:"Correct (your answer)"}),u.jsxs("div",{className:"min-h-12  flex gap-x-3 p-2 border text-green-500 border-green-500 rounded-lg items-center shadow-md shadow-lime-200",children:[u.jsx("img",{className:"w-5 h-5",src:J("trueIcon")}),u.jsx("div",{children:T})]})]})}),u.jsx(Vi,{})]},`result-${p}`):u.jsxs("div",{className:"grid font-padauk gap-y-2",children:[u.jsxs("div",{className:"flex gap-x-3 items-center",children:[u.jsx("div",{className:"bg-red-500 h-9 w-9 text-white font-bold rounded-sm flex justify-center items-center ",children:p}),u.jsx("div",{className:`flex-1 ${t==="light"?"":"text-white"}`,children:g})]}),u.jsxs("div",{className:"grid gap-y-1",children:[u.jsxs("div",{className:"grid gap-y-1",children:[u.jsx("div",{className:"text-red-500 font-bold",children:"Incorrect (your answer)"}),u.jsxs("div",{className:"min-h-12 flex gap-x-3 p-2 border text-red-500 border-red-500 rounded-lg items-center shadow-md shadow-red-200",children:[u.jsx("img",{className:"w-5 h-5",src:J("falseIcon")}),u.jsx("div",{children:x})]})]}),u.jsxs("div",{className:"grid gap-y-1",children:[u.jsx("div",{className:"text-green-500 font-bold",children:"Correct"}),u.jsxs("div",{className:" min-h-12  flex gap-x-3 p-2 border text-green-500 shadow-md shadow-lime-200 border-green-500 rounded-lg items-center",children:[u.jsx("img",{className:"w-5 h-5",src:J("trueIcon")}),u.jsx("div",{children:T})]})]})]}),u.jsx(Vi,{})]},`result-${p}`)}),o?"":u.jsx("div",{className:"flex justify-center",children:u.jsx(he,{data:{image:"down",text:"See More",clickFn:_}})}),u.jsx("div",{children:u.jsx(w3,{to:`/app/history/${f}`,children:u.jsx(he,{data:{image:"back",text:"Back to results"}})})})]}):u.jsx(vd,{text:"Unavailable"})]})},TM=()=>{const{deleteFromHistory:t,theme:e,history:n,setHistory:r,userData:s}=v.useContext(F),i=tn(),[o,a]=v.useState(null),[l,c]=v.useState(!1),[h,d]=v.useState(!1),[f,m]=v.useState(!1),[_,w]=v.useState([]),E=()=>{try{const C=ut(le(ce,"users",s.uid),"history");return Gn(C,S=>{const R=S.docs.map(k=>({id:k.id,...k.data()}));R.length!==0&&r(R)})}catch(C){return console.log(C.message),()=>{}}};v.useEffect(()=>{Kt();const C=E();return()=>{Kt(),C()}},[]);const p=C=>{f||i(`/app/history/${C.id}`)},g=()=>{t(o),a(null),c(!1)},y=()=>{c(!1),a(null)},T=(C,I)=>{C.target.checked?w([..._,I]):w(_.filter(S=>S!==I))},x=()=>{const C=n.filter(I=>!_.includes(I.id));r(C),w([]),d(!1),m(!1)};return u.jsxs("div",{className:"p-5",children:[u.jsx(kn,{}),h&&u.jsx(ao,{data:{text:`Are you sure to delete ${_.length} ${_.length<=1?"item":"items"} ?`,yesButton:x,noButton:()=>d(!1),setValue:d}}),l&&u.jsx(ao,{data:{text:"Are you sure to delete ?",yesButton:g,noButton:y,setValue:c}}),n.length!==0?u.jsxs("div",{className:"grid gap-y-2  ",children:[u.jsxs("div",{className:"flex items-center gap-x-2 justify-between",children:[u.jsx(he,{data:{clickFn:()=>{m(!f),w([])},text:f?"Done":"Select"}}),f&&u.jsxs("div",{className:"flex items-center gap-x-2",children:[u.jsxs("div",{className:"font-medium rounded-lg",children:[_.length," ",_.length<=1?"item":"items"," selected"]}),u.jsx(ge,{data:{clickFn:()=>{_.length&&d(!0)},image:"trash"}})]})]}),n.map((C,I)=>u.jsxs("div",{className:`min-h-20 border rounded-md gap-x-3 ${e==="light"?"border-slate-200 shadow-gray-200":"border-slate-500/70 text-white shadow-slate-500"}`,children:[u.jsx("div",{className:`font-medium border-b p-2 rounded-tl-md rounded-tr-md ${e==="light"?"bg-slate-100 border-b-slate-200":"bg-slate-500/70 border-b-slate-400"}`,children:C.testName}),u.jsxs("div",{className:"p-2 flex items-center gap-x-2",children:[f&&u.jsx("input",{checked:_.includes(C.id),onChange:S=>T(S,C.id),className:"form-checkbox rounded-lg border-2 w-6 h-6 border-gray-200 checked:bg-transparent ",type:"checkbox"}),u.jsx("div",{onClick:()=>p(C),className:"flex flex-1 items-center gap-x-3 cursor-pointer",children:u.jsxs("div",{className:"flex-1 sm:flex items-center gap-x-3 ",children:[u.jsxs("div",{className:"",children:["Score: ",C.score," / ",C.results.length," "]}),u.jsxs("div",{className:"",children:["Message: ",xr(C.level,15)]}),u.jsxs("div",{className:" ",children:["Date: ",C.date," (",` ${C.time}`,")"]}),u.jsxs("div",{className:"",children:["Time taken: ",c3(C.timeTaken)||"Unknown"]})]})}),!1]})]},`shadow-md history-item-${C.id}`)),u.jsx(w3,{to:"/posts",children:u.jsx(he,{data:{image:"redo",text:"Return Home"}})})]}):u.jsx(vd,{text:"No items"})]})},CM=()=>{const[t,e]=v.useState(0),n=()=>{const r=window.innerHeight,s=document.documentElement.scrollHeight,i=window.scrollY,o=s-r,a=i/o*100;e(a)};return v.useEffect(()=>(window.addEventListener("scroll",n),()=>{window.removeEventListener("scroll",n)}),[]),u.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-20",children:u.jsx("div",{style:{width:`${t}%`},className:"h-1 bg-blue-600"})})},IM=()=>{const{users:t,theme:e}=v.useContext(F),n=tn(),r=[{name:"Posts",image:"home",path:"/app/admin/posts"},{name:"Tests",image:"exam",path:"/app/admin/tests"},{name:"Users",image:"user",path:"/app/admin/users"}];return u.jsxs("div",{className:"p-5 grid gap-y-2",children:[u.jsx(kn,{}),r.map(s=>u.jsxs("button",{onClick:()=>{n(s.path)},className:`transition-all flex items-center gap-x-2 border  p-2 rounded-lg hover:shadow-md  hover:font-bold min-h-[70px] ${e==="light"?"border-gray-200 hover:bg-slate-100 hover:shadow-gray-500 ":"border-slate-500/70 hover:bg-slate-500/70 text-white"}`,children:[u.jsx("img",{className:"w-7 ",src:J(s.image)}),u.jsx("div",{children:s.name})]},s.name))]})},SM=["January","February","March","April","May","June","July","August","September","October","November","December"];function ys(t){const n=new Date().getTime()-t,r=Math.floor(n/1e3),s=Math.floor(r/60),i=Math.floor(s/60),o=Math.floor(i/24),a=Math.floor(o/7),l=Math.floor(o/30),c=Math.floor(l/12),h=new Date(t),d=h.getFullYear(),f=h.getMonth(),m=h.getDate(),_=`${SM[f]} ${m}, ${d}`;if(c>0)return _;if(l>0)return`${l}m • ${_}`;if(a>0)return`${a}w • ${_}`;if(o>0)return`${o}d`;if(i>0)return`${i}h`;if(s>0)return`${s}min`;if(r>0)return`${r}s`}const yd=({options:t,left:e="-left-[102px]"})=>{const[n,r]=v.useState(!1),s=v.useRef(null),{theme:i}=v.useContext(F);li(s,r);const o=()=>{r(!n)};return u.jsxs("button",{className:`relative rounded-full p-1 ${i==="light"?"bg-slate-100":"bg-slate-500/70"}`,onClick:o,ref:s,children:[u.jsx("img",{className:"w-6",src:J("moreOption")}),n&&u.jsx("div",{className:`border p-1 rounded-md  grid absolute ${e} bottom-0 w-[100px] ${i==="light"?"border-gray-200 bg-white":"border-gray-500/70 bg-slate-500"}`,children:t.map(a=>{if(a)return u.jsxs("button",{onClick:a.onClick,className:`flex rounded-md items-center gap-x-1 b  p-2 ${i==="light"?"hover:bg-slate-100":"hover:bg-slate-600"}`,children:[u.jsx("img",{className:"w-6",src:J(a.icon)}),u.jsx("p",{children:a.text})]},a.text)})})]})},AM=["January","February","March","April","May","June","July","August","September","October","November","December"],RM=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function xl(t){const n=new Date().getTime()-t,r=Math.floor(n/1e3),s=Math.floor(r/60),i=Math.floor(s/60),o=Math.floor(i/24),a=Math.floor(o/7),l=Math.floor(o/30),c=Math.floor(l/12),h=new Date(t),d=h.getFullYear(),f=h.getMonth(),m=h.getDate(),_=RM[h.getDay()],w=AM[f],E=`${w} ${m}, ${d}`,p=h.toLocaleTimeString([],{hour:"numeric",minute:"numeric",hour12:!0});if(c>0)return`${p} • ${E}`;if(l>0)return`${p} • ${w} ${m}`;if(a>0)return`${_}, ${p} • ${w} ${m}`;if(o>0)return`${_}, ${p}`;if(i>0)return p;if(s>0)return p;if(r>0)return p}const gC=({post:t,collectionName:e})=>{const{id:n}=t,[r,s]=v.useState([]),[i,o]=v.useState([]),{users:a,theme:l}=v.useContext(F),[c,h]=v.useState(!1),[d,f]=v.useState(!1),m=e==="posts",_=ut(le(ce,e,n),"comments"),w=ut(le(ce,e,n),"likes"),E=()=>Gn(w,S=>{const R=S.docs.map(k=>({id:k.id,...k.data()})).sort((k,V)=>{var oe,Ke;const $=new Date((oe=k.timestamp)!=null&&oe.seconds?k.timestamp.seconds*1e3:k.timestamp);return new Date((Ke=V.timestamp)!=null&&Ke.seconds?V.timestamp.seconds*1e3:V.timestamp)-$});s(R)}),p=()=>Gn(_,S=>{const R=S.docs.map(k=>({id:k.id,...k.data()})).sort((k,V)=>{var oe,Ke;const $=new Date((oe=k.timestamp)!=null&&oe.seconds?k.timestamp.seconds*1e3:k.timestamp);return new Date((Ke=V.timestamp)!=null&&Ke.seconds?V.timestamp.seconds*1e3:V.timestamp)-$});o(R)});v.useEffect(()=>{const I=E(),S=p();return()=>{I(),S()}},[]);const g=async()=>{try{const I=ut(ce,"notifications"),S={uid:U.currentUser.uid,type:["like",m?"post":"test"],[m?"description":"testName"]:m?t.description:t.name,isReadBy:[],timestamp:xn()};await os(I,S)}catch(I){console.log(I.message)}},y=()=>{let I=!1;return r.forEach(S=>{var R;S.uid===((R=U==null?void 0:U.currentUser)==null?void 0:R.uid)&&(I=!0)}),I},T=async()=>{try{const I=le(w,U.currentUser.uid),S=y(),R={uid:U.currentUser.uid,timestamp:xn()};S?await Gl(I):(await ox(I,R),g())}catch(I){console.log(I.message)}},x=y(),C=()=>{var S;return Er(a,(S=r[0])==null?void 0:S.uid)||null};return u.jsxs("div",{className:"mt-2",children:[u.jsxs("div",{className:"transition-all mb-1 flex justify-between",children:[u.jsx("button",{onClick:()=>{h(!c),f(!1)},className:`transition-all ${l==="light"?`${c?"bg-slate-200":"hover:bg-slate-200"}`:`${c?"bg-slate-500/70":"hover:bg-slate-500/70"}`}  p-1 rounded-lg`,children:C()?u.jsx("span",{children:r.length===1?C().name:`${C().name} and ${r.length-1} others`}):u.jsxs("span",{children:[r.length," ",r.length>1?"likes":"like"]})}),u.jsxs("button",{onClick:()=>{f(!d),h(!1)},className:`transition-all ${l==="light"?`${d?"bg-slate-200":"hover:bg-slate-200"}`:`${d?"bg-slate-500/70":"hover:bg-slate-500/70"}`}  p-1 rounded-lg`,children:[i.length," ",i.length>1?"comments":"comment"]})]}),u.jsxs("div",{className:`border-t pt-2 flex gap-x-2 ${l==="light"?"border-t-slate-300":"border-t-slate-500/70"}`,children:[u.jsx(he,{data:{clickFn:T,image:x?"liked":"like",text:x?"Liked":"Like"}}),u.jsx(he,{data:{clickFn:()=>{f(!d),h(!1)},image:"comment",text:"Comment"}})]}),c&&u.jsx(NM,{likes:r,users:a}),d&&u.jsx(kM,{isPost:m,post:t,id:n,comments:i,collectionName:e})]})},NM=({likes:t})=>{const{users:e}=v.useContext(F);return u.jsx("div",{className:"mt-2 grid gap-y-2",children:t.map(n=>{const r=Er(e,n.uid);return u.jsxs("div",{className:"flex gap-x-2 items-center",children:[u.jsx(Tr,{image:r==null?void 0:r.image,name:r==null?void 0:r.name}),u.jsx("div",{children:r==null?void 0:r.name})]},`user-${r==null?void 0:r.uid}`)})})},kM=({post:t,isPost:e,comments:n,id:r,collectionName:s})=>{const[i,o]=v.useState(""),{users:a,theme:l,userData:c}=v.useContext(F),h=30,d=0,[f,m]=v.useState(h),_=ut(le(ce,s,r),"comments"),[w,E]=v.useState(null),p=async()=>{try{const x=ut(ce,"notifications"),C={uid:U.currentUser.uid,type:["comment",e?"post":"test"],[e?"description":"testName"]:e?t.description:t.name,isReadBy:[],comment:i.trim(),timestamp:xn()};await os(x,C)}catch(x){console.log(x.message)}},g=async()=>{if(i.trim()){const x={uid:U.currentUser.uid,text:i.trim(),timestamp:xn()};await os(_,x),o(""),p()}},y=async()=>{const x=le(_,w);if(i.trim()){const C={text:i.trim(),editedTime:new Date().getTime()};await St(x,C),o(""),E(null)}},T=async x=>{const C=le(_,x);try{await Gl(C)}catch(I){console.log(I.message)}};return u.jsxs("div",{className:"mt-2",children:[u.jsx("div",{className:"grid gap-y-2",children:n.slice(d,f).sort((x,C)=>{var R,k;const I=new Date((R=x.timestamp)!=null&&R.seconds?x.timestamp.seconds*1e3:x.timestamp),S=new Date((k=C.timestamp)!=null&&k.seconds?C.timestamp.seconds*1e3:C.timestamp);return I-S}).map(x=>{var R;const C=Er(a,x.uid);console.log(C);const I=x.uid===((R=U==null?void 0:U.currentUser)==null?void 0:R.uid),S=I&&{text:"Edit",icon:"editPencil",onClick:()=>{E(x.id),o(x.text)}};return u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{className:"flex gap-x-1",children:[u.jsx("div",{children:u.jsx(Tr,{image:C==null?void 0:C.image,name:C==null?void 0:C.name})}),u.jsxs("div",{className:"max-w-[250px]",children:[u.jsxs("div",{className:`p-2  rounded-lg ${l==="light"?"bg-slate-100":"bg-slate-500/70 text-white"}`,children:[u.jsx("div",{className:"font-bold",children:C==null?void 0:C.name}),u.jsx("div",{children:x.text})]}),u.jsx("div",{className:`text-sm mt-1 ${l==="light"?"text-gray-600":"text-white"}`,children:x!=null&&x.editedTime?u.jsxs("span",{children:["edited ",xl(x.editedTime)]}):u.jsx("span",{children:xl(x.timestamp)})})]})]}),I||c!=null&&c.isAdmin?u.jsx(yd,{options:[S,{text:"Delete",icon:"deleteIcon",onClick:()=>T(x.id)}]}):""]},`${x.uid}-${x.id}`)})}),u.jsxs("div",{className:"mt-2 flex gap-x-1",children:[u.jsx("input",{autoFocus:!0,onChange:x=>o(x.target.value),value:i,className:`h-10 flex-1 rounded-lg pl-2 border ${l==="light"?"border-gray-300 focus:outline-blue-500":"outline-none bg-slate-500/70 border-slate-500/70"}`,placeholder:"Write a comment..."}),u.jsxs("div",{className:"flex gap-x-1",children:[w&&u.jsx(he,{data:{image:"falseIcon",clickFn:()=>{E(null),o("")}}}),u.jsx(he,{data:{clickFn:()=>{i.trim()&&(w?y():g())},image:"send"}})]})]})]})},PM=({t,takeTest:e})=>{var i;const{users:n,theme:r}=v.useContext(F),s=Er(n,t.uid);return u.jsxs("div",{className:`flex flex-col justify-between min-h-60 border shadow-md  rounded-md bg-gradient-to-tr ${r==="light"?"border-blue-200 shadow-gray-200":"border-blue-200 text-white shadow-slate-500"}`,children:[u.jsxs("div",{className:"flex gap-x-2 mb-2 p-2",children:[u.jsx("img",{className:"size-10 rounded-full shadow-md object-cover",src:s.image}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:s.name}),u.jsx("div",{className:` text-sm ${r==="light"?"text-gray-500 ":"text-white"}`,children:ys((i=t.time)!=null&&i.seconds?t.time.seconds*1e3:t.time)})]}),u.jsxs("span",{className:`rounded-md flex items-center p-1 ${r==="light"?"bg-slate-100 ":"bg-slate-500/70 "}`,children:[t.quizzes.length,t.quizzes.length>1?" questions":" question"]})]}),t.image&&u.jsx("div",{className:"m-2 min-h-32",children:u.jsx("img",{className:"w-full",src:`images/tests/${t.image}`})}),u.jsxs("div",{className:`rounded-bl-lg rounded-br-lg border-t  p-2 pb-5 ${r==="light"?"border-t-slate-300":"border-t-slate-500/70"}`,children:[u.jsx("div",{className:"font-medium text-lg",children:t.name}),u.jsx("p",{className:" mb-2 break-words white-space-pre-wrap",children:t.description.trim()||"No description"}),u.jsx(he,{data:{clickFn:()=>e(t),text:"Take the test"}}),u.jsx(gC,{post:t,collectionName:"tests"})]})]})},LM=()=>{const{setCurrentTest:t,startTimer:e,users:n,theme:r,isLogin:s,posts:i,setPosts:o,tests:a,setTests:l}=v.useContext(F),{page:c}=_p(),h=So(),d=tn(),f=h.pathname==="/app/posts",m=h.pathname==="/app/tests",_=[{name:"Posts",active:f,image:"home",path:"/app/posts"},{name:"Tests",active:m,image:"exam",path:"/app/tests"}];xo("posts",o,s),xo("tests",l,s);const w=p=>{scrollTo({top:0}),t(p),e()},E=()=>{switch(c){case"posts":return u.jsx("div",{className:"grid gap-y-2 mb-2",children:i.length===0?u.jsx("div",{className:"h-[300px] flex flex-col justify-center items-center",children:u.jsx("p",{className:`text-center ${r==="light"?"":"text-white"}`,children:"No posts"})}):i.sort((p,g)=>{var x,C;const y=new Date((x=p.time)!=null&&x.seconds?p.time.seconds*1e3:p.time);return new Date((C=g.timestamp)!=null&&C.seconds?g.time.seconds*1e3:g.time)-y}).map(p=>{var y,T,x;const g=Er(n,p.uid);if(!p.draft)return u.jsxs("div",{className:`w-full border rounded-md shadow-md p-2 ${r==="light"?"border-blue-200 shadow-gray-200":"border-blue-200 text-white shadow-slate-500"}`,children:[u.jsxs("div",{className:"top-section flex gap-x-2 mb-2",children:[u.jsx("img",{className:"size-10 rounded-full shadow-md object-cover",src:g.image}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:g.name}),u.jsx("div",{className:` text-sm ${r==="light"?"text-gray-500":"text-white"}`,children:ys((y=p.time)!=null&&y.seconds?p.time.seconds*1e3:p.time)})]})]}),(p==null?void 0:p.description)&&u.jsx("p",{className:"mb-2 break-words whitespace-pre-wrap",children:p.description}),p.images.length!==0&&u.jsx("div",{className:"image grid gap-y-2",children:u.jsx(bM,{data:{post:p}})}),p.files&&((T=p==null?void 0:p.files)==null?void 0:T.length)!==0&&u.jsx(DM,{files:p.files}),(p==null?void 0:p.links)&&((x=p==null?void 0:p.links)==null?void 0:x.length)!==0&&u.jsx(OM,{links:p.links}),u.jsx(gC,{post:p,collectionName:"posts"})]},`post-${p.id}`)})});case"tests":return u.jsx("div",{className:"grid gap-y-2 mb-2",children:a.length===0?u.jsx("div",{className:"h-[300px] flex flex-col justify-center items-center",children:u.jsx("p",{className:`text-center ${r==="light"?"":"text-white"}`,children:"No tests"})}):a.sort((p,g)=>{var x,C;const y=new Date((x=p.timestamp)!=null&&x.seconds?p.timestamp.seconds*1e3:p.timestamp);return new Date((C=g.timestamp)!=null&&C.seconds?g.timestamp.seconds*1e3:g.timestamp)-y}).map(p=>{if(p.isUploaded)return u.jsx(PM,{t:p,takeTest:w},`tests-${p.id}-${p.name}`)})})}};return u.jsxs("div",{children:[u.jsx(kn,{}),u.jsxs("div",{className:"grid p-5",children:[u.jsx("div",{className:"flex mb-2 -mt-5 justify-center",children:u.jsx("div",{className:`flex -mt-[2px] gap-x-1 w-2/3 justify-center rounded-bl-lg rounded-br-lg shadow-sm p-2 ${r==="light"?"bg-slate-50/50":"bg-slate-500/70"}`,children:_.map(p=>u.jsxs("button",{onClick:()=>d(p.path),className:`transition text-slate-700 shadow-sm rounded-lg border-solid flex font-bold gap-x-1 items-center p-2 pl-3 pr-3 ${r==="light"?`${p.active?" bg-blue-500/70":"hover:bg-slate-200 border-transparent"}`:`${p.active?" bg-blue-500/70":"hover:bg-slate-500 border-transparent"}`} font-bold text-md`,children:[u.jsx("img",{className:"w-6",src:J(p.image)}),u.jsx("div",{children:p.name})]},p.name))})}),E()]})]})},bM=({data:t})=>{const{post:e}=t,n=0,[r,s]=v.useState(4),[i,o]=v.useState(!0),a=e.images.slice(n,r),l=e.images.length-4,c=()=>{o(!1),s(e.images.length)};return a.map((h,d)=>u.jsxs("div",{className:"relative ",children:[u.jsx("img",{className:"w-full shadow-md min-h-48",src:h.imageURL,alt:h.name}),u.jsx("div",{className:"z-20 absolute right-1 top-1"}),d+1===4&&i&&l?u.jsx("div",{onClick:c,className:"z-10 absolute top-0 right-0 left-0 bottom-0 flex cursor-pointer items-center justify-center",children:u.jsxs("div",{className:"font-medium text-8xl text-white",children:["+",l]})}):""]},`post-${e.id}-image-${h.imageURL}`))},DM=({files:t})=>{const{theme:e}=v.useContext(F);return u.jsx("div",{className:"grid gap-y-2 mt-2",children:t.map((n,r)=>u.jsx("a",{href:n.fileURL,download:n.name,target:"_blank",children:u.jsxs("div",{className:`p-1 cursor-pointer  min-h-14 rounded-md flex gap-x-1 items-center font-bold border  border-l-4 border-l-green-500 ${e==="light"?"bg-slate-50 border-gray-300 text-blue-600":"bg-slate-500/70 border-slate-500/70 text-white"}`,children:[u.jsx("img",{className:"w-7 ",src:J("download")}),u.jsxs("div",{children:[u.jsx("p",{className:"underline",children:n.name}),(n==null?void 0:n.size)&&u.jsxs("p",{children:[(n.size/(1024*1024)).toFixed(2)," MB"]})]})]})},`${r}-${n.fileURL}`))})},OM=({links:t})=>{const{theme:e}=v.useContext(F);return u.jsx("div",{className:"grid gap-y-2 mt-2",children:t.map((n,r)=>u.jsx("a",{href:n.link,target:"_blank",children:u.jsxs("div",{className:`p-1 cursor-pointer  min-h-14 rounded-md flex ga-x-1 items-center font-bold border  border-l-4 border-l-green-500 ${e==="light"?"bg-slate-50 border-gray-300 text-blue-600":"bg-slate-500/70 border-slate-500/70 text-white"}`,children:[u.jsx("img",{className:"w-7 ",src:J("link")}),u.jsx("div",{children:u.jsx("p",{className:"underline",children:n.title})})]})},`${r}-${n.link}`))})},MM=()=>{const e=new Date().getFullYear(),{theme:n}=v.useContext(F);return u.jsxs("footer",{className:`w-full flex flex-col items-center p-1 bg-slate-50 border-t  mt-auto ${n==="light"?"border-t-gray-100":"bg-slate-600 text-white border-t-slate-500"}`,children:[u.jsxs("div",{children:["SEA copyright 2015 - ",e]}),u.jsx("div",{children:"All rights reserved."}),u.jsx("div",{children:"Author: Than Aung Naing"})]})},rh=({message:t,bgColor:e="bg-slate-200"})=>u.jsx("div",{className:"z-30 fixed flex justify-center bottom-5 left-0 right-0 ",children:u.jsx("div",{className:`${e} font-bold p-3 rounded-lg`,children:t})}),jM=({data:t})=>{const{isLogin:e,refreshUserData:n,setHeaderTitle:r,theme:s}=v.useContext(F),[i,o]=v.useState(""),[a,l]=v.useState(""),[c,h]=v.useState(""),[d,f]=v.useState(null),[m,_]=v.useState("login"),w=tn();let E;document.title="Login",v.useEffect(()=>{e&&w("/"),r("STAR EDUCATION ACADEMY")},[]),Xt("auto");const p=async(C,I,S,R)=>{try{const k=le(ce,"users",U.currentUser.uid),V=await sx(k),$={name:C,email:I,password:S,image:R,isAdmin:!1,createdAt:new Date().getTime()};V.exists()||await ox(k,$),n()}catch(k){console.log(k.message)}},g=async()=>{try{await EP(U,fM),p(U.currentUser.displayName,U.currentUser.email,"",U.currentUser.photoURL)}catch(C){clearTimeout(E),f(C.message),E=setTimeout(()=>{f(null)},3e3)}},y=async()=>{try{await Y8(U,a,c)}catch(C){clearTimeout(E),f(C.message),E=setTimeout(()=>{f(null)},3e3)}},T=async()=>{try{await Q8(U,a,c),p(i,a,c,null)}catch(C){clearTimeout(E),f(C.message),E=setTimeout(()=>{f(null)},3e3)}},x=()=>{switch(m){case"login":return u.jsxs("div",{children:[u.jsx("div",{className:`text-md rounded-md font-medium  p-1 pl-2 border-b  ${s==="light"?"text-lime-700 bg-lime-100/70 border-b-lime-300":"text-white bg-slate-500/70 border-slate-500/70"}`,children:"You must log in first."}),u.jsxs("div",{className:"mt-10 flex flex-col items-center ",children:[u.jsx("div",{className:"text-lg font-medium text-blue-500",children:"Log in"}),u.jsxs("div",{className:"grid p-2 w-5/6 sm:w-3/5 lg:w-4/6 gap-y-2",children:[u.jsx(ta,{data:{type:"text",value:a,setValue:l,placeholder:"Enter your email"}}),u.jsx(ta,{data:{type:"password",value:c,setValue:h,placeholder:"Enter your password"}}),d&&u.jsx(rh,{message:d,bgColor:"bg-red-300"}),u.jsx("button",{onClick:y,className:"transition-all bg-blue-400 text-white font-medium h-10 rounded-lg border border-transparent hover:border-lime-500",children:"Log in"})]}),u.jsx(Gv,{}),u.jsx("div",{children:u.jsx(he,{data:{clickFn:g,image:"google",text:"Sign in with Google"}})}),u.jsx(Gv,{}),u.jsx("div",{children:u.jsx(he,{data:{clickFn:()=>_("signup"),text:"Create new Account"}})})]})]});case"signup":return u.jsxs("div",{children:[u.jsx("div",{className:`text-md rounded-md font-medium  p-1 pl-2 border-b  ${s==="light"?"text-lime-700 bg-lime-100/70 border-b-lime-300":" bg-slate-500/70 border-slate-500/70 text-white"}`,children:"You must log in first."}),u.jsxs("div",{className:"mt-10 flex flex-col items-center ",children:[u.jsx("div",{className:"text-lg font-medium text-blue-500",children:"Create new account"}),u.jsxs("div",{className:"grid p-2 w-5/6 sm:w-3/5 lg:w-4/6 gap-y-2",children:[u.jsx(ta,{data:{type:"text",value:i,setValue:o,placeholder:"Enter your name"}}),u.jsx(ta,{data:{type:"text",value:a,setValue:l,placeholder:"Enter your email"}}),u.jsx(ta,{data:{type:"password",value:c,setValue:h,placeholder:"Enter your password"}}),d&&u.jsx(rh,{message:d,bgColor:"bg-red-300"}),u.jsx("button",{onClick:()=>{i.trim()&&T()},className:"transition-all bg-blue-400 text-white font-medium h-10 rounded-lg border border-transparent hover:border-lime-500",children:"Sign up"}),u.jsx("div",{children:u.jsx(he,{data:{clickFn:()=>_("login"),text:"Back",image:"back"}})})]})]})]})}};return u.jsxs("div",{className:"Login mb-5",children:[u.jsx(kn,{}),x()]})},ta=({data:t})=>{const{value:e,setValue:n,placeholder:r,type:s}=t,{theme:i}=v.useContext(F);return u.jsx("input",{type:s,value:e,onChange:o=>n(o.target.value),className:`h-10  pl-1 border rounded-lg   ${i==="light"?"border-gray-200 focus:outline-blue-500":"bg-slate-500/70 outline-none border-slate-500/70 text-white"}`,placeholder:r})},Gv=()=>{const{theme:t}=v.useContext(F);return u.jsx("div",{className:`mt-2 mb-2 ${t==="light"?"":"text-white"}`,children:"OR"})},VM=()=>{const{userData:t,refreshUserData:e,theme:n,setTheme:r,isOnline:s}=v.useContext(F),[i,o]=v.useState(t.name||""),[a,l]=v.useState(null),[c,h]=v.useState(!1),d=v.useRef(null),[f,m]=v.useState(null),_=async()=>{var y;if(i.trim())try{const T=le(ce,"users",(y=U==null?void 0:U.currentUser)==null?void 0:y.uid),x={name:i.trim()};await St(T,x),e(),g("Updated name successfully!")}catch(T){g(T.message)}};li(d,h);const w=async()=>{var T;const y=Ms(Vs,`profile/${U.currentUser.uid}/${t.name}-${a.name}`);try{const x=le(ce,"users",(T=U==null?void 0:U.currentUser)==null?void 0:T.uid);g("Uploading image...");const C=await Gu(y,a),S={image:await Ku(C.ref)};await St(x,S),l(null),g("Updated profile picture successfully!")}catch(x){g(x.message)}},E=()=>{a&&w(),i.trim()!==t.name&&_()};let p;const g=(y,T=3e3)=>{clearTimeout(p),m(y),p=setTimeout(()=>{m(null)},T)};return u.jsxs("div",{className:"Settings p-2",children:[u.jsx(kn,{}),u.jsxs("div",{className:"p-2",children:[u.jsxs("div",{className:"relative size-20",children:[u.jsx(Tr,{name:t.name||i||"User",image:a?URL.createObjectURL(a):t.image,size:"size-full",fontSize:"text-3xl"}),u.jsx("input",{type:"file",accept:"image/*",id:"imageInput",className:"hidden",onChange:y=>l(y.target.files[0])}),u.jsx("label",{htmlFor:"imageInput",className:` p-1 rounded-full absolute -bottom-1 -right-1 cursor-pointer ${n==="light"?"bg-gray-200":"bg-slate-500/70"}`,children:u.jsx("img",{className:"w-5",src:J("edit")})})]}),u.jsxs("div",{className:`${n==="light"?"":"text-white"}`,children:["Hi, ",xr(t.name||i||"User",25),"!"]})]}),u.jsxs("div",{className:`grid gap-y-2 border  p-2 rounded-md ${n==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[u.jsxs("div",{children:[u.jsx("div",{children:"Name"}),u.jsxs("div",{ref:d,className:"flex gap-x-2 items-center",children:[!c&&u.jsx("div",{children:i||t.name||"User"}),c&&u.jsx("input",{autoFocus:!0,value:i,onChange:y=>o(y.target.value),className:` ${n==="light"?"focus:outline-blue-500":"bg-slate-500/70 outline-none"}`,placeholder:"Enter your full name"}),u.jsx("button",{onClick:()=>{h(!c)},className:` p-1 rounded-full cursor-pointer ${n==="light"?"bg-gray-200":"bg-slate-500/70"}`,children:u.jsx("img",{className:"w-5",src:J(c?"save":"edit")})})]})]}),u.jsxs("div",{children:[u.jsx("div",{children:"Email"}),u.jsx("div",{children:t.email||"example@gmail.com"})]})]}),u.jsx("div",{className:"flex gap-x-2 mt-2",children:a||i.trim()!==t.name?u.jsx(he,{data:{clickFn:()=>{s?E():console.log("You are offline")},image:"save",text:"Update"}}):""}),f&&u.jsx(rh,{message:f}),u.jsx("div",{className:`mt-4 ${n==="light"?"":"text-white"} md:hidden`,children:u.jsx(mC,{setTheme:r,theme:n})})]})},sh=({data:t})=>{const{text:e,onChangeFn:n,value:r,placeholder:s}=t,{theme:i}=v.useContext(F);return u.jsxs("div",{className:"grid items-center gap-y-2",children:[u.jsx("div",{className:"font-medium",children:e}),u.jsx("input",{onChange:n,value:r,className:`border rounded-md h-10 pl-1 pr-1  w-full outline-2  ${i==="light"?"focus:outline-blue-300 border-gray-300":"border-slate-500/70 outline-none bg-slate-500/70"}`,placeholder:s})]})},FM=({data:t})=>{const{close:e}=t,{theme:n}=v.useContext(F),[r,s]=v.useState(""),[i,o]=v.useState(""),a=r.trim(),l=ut(ce,"tests"),c=async f=>{try{await os(l,f)}catch(m){console.log(m.message)}},h=()=>{const f={uid:U.currentUser.uid,isUploaded:!1,name:r,description:i,quizzes:[],gradingRules:[],time:xn()};c(f),e()},d=()=>{a&&h()};return v.useEffect(()=>(Xt("hidden"),()=>{Xt("auto")}),[]),u.jsx("div",{className:"fixed flex items-center z-20 bg-black/60 justify-center top-0 left-0 right-0 bottom-0",children:u.jsxs("div",{className:`border w-4/5 sm:w-4/5 md:w-3/5 lg:w-2/5 rounded-md p-10 pb-5 grid gap-y-5 ${n==="light"?"bg-white border-gray-300":"bg-slate-600 border-slate-500/70 text-white"}`,children:[u.jsxs("div",{className:"grid gap-y-2",children:[u.jsx(sh,{data:{text:"Name",onChangeFn:f=>s(f.target.value),value:r,placeholder:"Type test name here"}}),u.jsx(sh,{data:{text:"Description",onChangeFn:f=>o(f.target.value),value:i,placeholder:"Type description here"}})]}),u.jsxs("div",{className:"flex items-center gap-x-3 justify-center",children:[u.jsx(he,{data:{clickFn:d,text:"Save",image:"save"}}),u.jsx(he,{data:{clickFn:e,text:"Cancel"}})]})]})})},UM=({data:t})=>{const{options:e,value:n,setValue:r}=t,{theme:s}=v.useContext(F),[i,o]=v.useState(!1),a=v.useRef(null);li(a,o);const l=()=>{o(!i)},c=h=>{r(h)};return u.jsxs("div",{ref:a,className:"w-full relative font-padauk",children:[u.jsxs("button",{onClick:l,className:`border flex items-center rounded-lg justify-between h-10 w-full cursor-pointer hover:border-blue-500 shadow-sm gap-x-2 px-2 ${s==="light"?"border-gray-300 hover:bg-gray-50":"hover:bg-slate-500/70 text-white border-slate-500/70"}`,children:[u.jsx("span",{children:n||"Select correct answer"}),u.jsx("img",{className:"h-6 w-6",src:J(i?"up":"down")})]}),i&&e.length!==0?u.jsx("div",{className:`absolute grid gap-y-1 min-w-full p-2 rounded-md border -top-40 ${s==="light"?"border-gray-200 bg-white":"text-white bg-slate-500/70 border-slate-500/70"}`,children:e.map(h=>u.jsx("div",{onClick:()=>{l(),c(h)},className:`p-1 cursor-pointer rounded-lg transition-all ${s==="light"?`${h===n?"bg-black font-medium text-white ":"hover:bg-gray-200"}`:`${h===n?"bg-slate-600 font-medium text-white ":"hover:bg-slate-600"}`}`,children:h},`choice-${h}`))}):""]})},Dr=({data:t})=>{const{choice:e,handleFn:n,value:r,placeholder:s}=t,{theme:i}=v.useContext(F);return u.jsxs("div",{className:"grid gap-y-2 font-padauk",children:[u.jsx("div",{className:`font-medium ${i==="light"?"":"text-white"}`,children:e}),u.jsx("input",{onChange:o=>n(e,o),value:r,className:` w-full border rounded-md h-10 pl-1 pr-1  ${i==="light"?"focus:outline-blue-500 border-gray-300":"text-white outline-none border-slate-500/70 bg-slate-600"}`,placeholder:s})]})},$M=({data:t})=>{const{cancel:e,quizzes:n,setQuizzes:r,editData:s,clearEditData:i}=t,{theme:o}=v.useContext(F),[a,l]=v.useState(s?s.question:""),[c,h]=v.useState(s?s.choices[0]:""),[d,f]=v.useState(s?s.choices[1]:""),[m,_]=v.useState(s?s.choices[2]:""),[w,E]=v.useState(s?s.choices[3]:""),[p,g]=v.useState(s?s.answer:"");let y=[];const T=c.trim()&&d.trim()&&m.trim()&&w.trim(),x=a.trim()&&c.trim()&&d.trim()&&m.trim()&&w.trim()&&p.trim();T&&(y=[c,d,m,w]);const C=($,Y)=>{$.toLowerCase()==="question"?l(Y.target.value):g(Y.target.value)},I=()=>{let $,Y;x&&($={id:n.length===0?1:n[n.length-1].id+1,question:a,choices:y,answer:p},Y=[...n,$],r(Y),_f(),e())},S=()=>{const $=s.id,Y={id:$,question:a,choices:y,answer:p},oe=n.map(Ke=>$===Ke.id?Y:Ke);r(oe),e(),i()},R=($,Y)=>{$.toLowerCase()==="choice 1"?h(Y.target.value):$.toLowerCase()==="choice 2"?f(Y.target.value):$.toLowerCase()==="choice 3"?_(Y.target.value):E(Y.target.value)},k=()=>{s?S():I()},V=()=>{e(),i()};return v.useEffect(()=>(Xt("hidden"),()=>{Xt("auto")}),[]),u.jsx("div",{className:"fixed flex items-center z-20 bg-black/60 justify-center top-0 left-0 right-0 bottom-0",children:u.jsxs("div",{className:`border w-5/6 sm:w-4/5 md:w-3/5 lg:w-2/5 grid gap-y-2  p-3  top-0 left-0 right-0 bottom-0 rounded-lg relative ${o==="light"?"bg-white border-gray-200":"text-white border-slate-500/70 bg-slate-600"}`,children:[u.jsx("div",{className:`top-1 shadow-md border rounded-full right-1 h-9 w-9 text-white font-medium flex justify-center absolute items-center ${o==="light"?"bg-black border-gray-200":"bg-slate-500/70 border-slate-600"}`,children:s?s.number:n.length+1}),u.jsxs("div",{className:"grid gap-y-2",children:[u.jsx(Dr,{data:{handleFn:C,value:a,choice:"Question",placeholder:"Enter question"}}),u.jsx(Dr,{data:{handleFn:R,value:c,choice:"Choice 1",placeholder:"Enter choice 1"}}),u.jsx(Dr,{data:{handleFn:R,value:d,choice:"Choice 2",placeholder:"Enter choice 2"}}),u.jsx(Dr,{data:{handleFn:R,value:m,choice:"Choice 3",placeholder:"Enter choice 3"}}),u.jsx(Dr,{data:{handleFn:R,value:w,choice:"Choice 4",placeholder:"Enter choice 4"}}),u.jsxs("div",{className:"flex items-center gap-x-5",children:[u.jsx("div",{className:"font-medium",children:"Answer"}),u.jsx(UM,{data:{options:y,value:p,setValue:g}})]})]}),u.jsxs("div",{className:"flex justify-end gap-x-2",children:[u.jsx(he,{data:{clickFn:k,text:"Save",image:"save"}}),u.jsx(he,{data:{clickFn:V,text:"Cancel"}})]})]})})},zM=({data:t})=>{const{theme:e}=v.useContext(F),{testName:n,numbers:r,changePage:s}=t;return u.jsx("div",{className:`text-lg p-1 font-medium sticky top-0 z-10 flex justify-between items-center ${e==="light"?"":"text-white"}`,children:u.jsxs("div",{className:"flex items-center gap-x-2",children:[u.jsx(ge,{data:{clickFn:()=>s("test"),image:"back"}}),u.jsxs("div",{children:[n,u.jsxs("span",{className:"text-sm",children:[" • "," ",r," ",r>1?"questions":"question"]})]})]})})},BM=({data:t})=>{const{quizzes:e,editQuestion:n,askToDelete:r,add:s,changePage:i}=t,{theme:o}=v.useContext(F);return u.jsxs("div",{className:"grid gap-y-2",children:[u.jsx("div",{className:`pl-1 font-medium ${o==="light"?"":"text-white"}`,children:"Questions"}),e.map((a,l)=>u.jsxs("div",{className:`border font-padauk p-2 relative ${o==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[u.jsxs("div",{className:"absolute bottom-2 right-2 flex items-center gap-x-2",children:[u.jsx(ge,{data:{clickFn:()=>n(a,l),image:"edit"}}),u.jsx(ge,{data:{clickFn:()=>r(a.id),image:"trash"}})]}),u.jsxs("div",{className:"flex items-center justify-between gap-x-2",children:[u.jsx("div",{className:"overflow-x-auto p-0.5 flex-1",children:a.question}),u.jsx("div",{className:`top-0 shadow-md border rounded-full right-1 h-9 w-9 text-white font-medium flex justify-center absolute items-center ${o==="light"?"bg-black border-gray-200":"bg-slate-500/70 border-slate-600"}`,children:l+1})]}),u.jsx("div",{className:"pl-2 pt-2 grid gap-y-1",children:a.choices.map((c,h)=>u.jsxs("div",{className:"flex gap-x-2",children:[u.jsx("div",{className:`w-8 flex h-8 items-center  justify-center text-white font-medium rounded-md ${o==="light"?"bg-black":"bg-slate-500/70"}`,children:h+1}),u.jsx("div",{className:"flex-1",children:c})]},`choice-${l}-${h}`))})]},`question-${l}`)),u.jsx("div",{className:"flex justify-center sticky bottom-5",children:u.jsx(ge,{data:{clickFn:s,image:"add"}})})]})},WM=({data:t})=>{const{currentTest:e,setCurrentTest:n,setIsRulesAdding:r,setEditData:s}=t,{theme:i}=v.useContext(F),{gradingRules:o}=e,[a,l]=v.useState(null),c=_=>{const w=o.filter(p=>p.id!==_),E={...e,gradingRules:w};n(E)},h=_=>{l(_)},d=_=>{s(_),r(!0)},f=()=>{c(a),l(null)},m=()=>{l(null)};return u.jsxs("div",{className:"grid gap-y-3",children:[u.jsx("div",{className:`pl-1 font-medium ${i==="light"?"":"text-white"}`,children:"Grading Rules"}),a&&u.jsx(ao,{data:{yesButton:f,noButton:m,text:"Are you sure to delete?"}}),o.map((_,w)=>u.jsxs("div",{className:`flex font-padauk items-center justify-between border  p-2 ${i==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[u.jsxs("div",{className:"grid flex-1 grid-cols-3 justify-between mr-10",children:[u.jsx(x0,{data:{text:"From",value:_.from}}),u.jsx(x0,{data:{text:"To",value:_.to}}),u.jsx(x0,{data:{text:"Level",value:_.level}})]}),u.jsxs("div",{className:"flex items-center gap-x-1 h-full ",children:[u.jsx(ge,{data:{clickFn:()=>d(_),image:"edit"}}),u.jsx(ge,{data:{clickFn:()=>h(_.id),image:"trash"}})]})]},`rule-${w}-${_.from}-${_.to}-${_.level}`)),u.jsx("div",{className:"flex justify-center sticky bottom-5",children:u.jsx(ge,{data:{clickFn:()=>r(!0),image:"add"}})})]})},x0=({data:t})=>{const{text:e,value:n}=t,{theme:r}=v.useContext(F);return u.jsxs("div",{className:"grid gap-y-1",children:[u.jsx("div",{className:"font-medium",children:e}),u.jsx("div",{className:`font-medium max-h-10 ${r==="light"?"text-slate-600":"text-white"}`,children:typeof n=="string"?xr(n,15):n})]})},HM=({data:t})=>{const{currentTest:e,setCurrentTest:n,editData:r,setEditData:s,setIsRulesAdding:i}=t,{theme:o}=v.useContext(F),{gradingRules:a}=e,[l,c]=v.useState(r?r.from:null),[h,d]=v.useState(r?r.to:null),[f,m]=v.useState(r?r.level:""),_=l&&h&&f.trim(),w=()=>{const T={id:a.length===0?1:a[a.length-1].id+1,from:Number(l),to:Number(h),level:f},x={...e,gradingRules:[...a,T]};n(x)},E=()=>{const T=r.id,x={id:T,from:Number(l),to:Number(h),level:f},C=a.map(S=>T===S.id?x:S),I={...e,gradingRules:C};n(I)},p=()=>{i(!1),s(null)},g=()=>{_&&(r?E():w(),p())},y=(T,x)=>{const C=x.target.value;T.toLowerCase()==="from"?c(C):T.toLowerCase()==="to"?d(C):m(C)};return v.useEffect(()=>(Xt("hidden"),()=>{Xt("auto")}),[]),u.jsx("div",{className:"fixed z-20 bg-black/50 top-0 right-0 left-0 bottom-0 flex justify-center items-center",children:u.jsxs("div",{className:`border w-5/6 sm:w-4/5 md:w-3/5 lg:w-2/5 grid gap-y-2 p-3  top-0 left-0 right-0 bottom-0 rounded-lg relative ${o==="light"?"border-gray-200 bg-white":"text-white bg-slate-600 border-slate-500/70"}`,children:[u.jsx(Dr,{data:{handleFn:y,value:l!==null?l:"",choice:"From",placeholder:"Enter 'from' value"}}),u.jsx(Dr,{data:{handleFn:y,value:h!==null?h:"",choice:"To",placeholder:"Enter 'to' value"}}),u.jsx(Dr,{data:{handleFn:y,value:f,choice:"Level",placeholder:"Enter level"}}),u.jsxs("div",{className:"flex justify-end gap-x-2",children:[u.jsx(he,{data:{clickFn:g,text:"Save",image:"save"}}),u.jsx(he,{data:{clickFn:p,text:"Cancel"}})]})]})})},Kv=({data:t})=>{const{currentTest:e,setCurrentTest:n,title:r}=t,{theme:s}=v.useContext(F),{description:i,name:o}=e,[a,l]=v.useState(r==="Description"?i:o),[c,h]=v.useState(!1),d=w=>{l(w.target.value)},f=()=>{if(r==="Description"){const w={...e,description:a};n(w)}else{const w={...e,name:a};n(w)}},m=()=>{f(),h(!1)},_=()=>{h(!1),l(r==="Description"?i:o)};return u.jsxs("div",{className:"grid gap-y-2",children:[u.jsx("div",{className:`font-medium ${s==="light"?"":"text-white"}`,children:r}),c?u.jsx("textarea",{autoFocus:!0,placeholder:`Type ${r.toLowerCase()} here`,onChange:d,className:`p-1 border border-gray-200 outline-none ${s==="light"?"":"text-white bg-slate-600"}`,value:a}):u.jsx("div",{className:`text-gray-500 p-1 ${s==="light"?"":"text-white"}`,children:a||"No description"}),c?u.jsxs("div",{className:"flex gap-x-2",children:[u.jsx(ge,{data:{clickFn:m,image:"save"}}),u.jsx(ge,{data:{clickFn:_,image:"falseIcon"}})]}):u.jsx(ge,{data:{clickFn:()=>h(!0),image:"edit"}})]})},qM=({data:t})=>{const{setHeaderTitle:e}=v.useContext(F),{setPage:n,currentTest:r,setCurrentTest:s}=t,[i,o]=v.useState(!1),[a,l]=v.useState(!1),[c,h]=v.useState(r.quizzes),[d,f]=v.useState(null),[m,_]=v.useState(null);v.useEffect(()=>{e(r.name)});const w=async($,Y)=>{try{const oe=le(ce,"tests",$);await St(oe,Y)}catch(oe){console.log(oe.message)}};v.useEffect(()=>{E()},[r,c]);const E=()=>{w(r.id,{...r,quizzes:c})},p=()=>{o(!0)},g=()=>{o(!1),_(null)},y=$=>{_($)},T=()=>{I(m),_(null)},x=()=>{_(null)},C=$=>{n($)},I=$=>{const Y=c.filter(oe=>oe.id!==$);h(Y)},S=($,Y)=>{const oe={...$,number:Y+1};f(oe),p()},R=()=>{f(null)},k={testName:r.name,numbers:c.length,changePage:C},V={quizzes:c,editQuestion:S,askToDelete:y,add:p};return u.jsxs("div",{className:"grid gap-y-2 z-65 p-5",children:[u.jsx(zM,{data:k}),u.jsx(Vi,{}),u.jsx(Kv,{data:{title:"Test Name",currentTest:r,setCurrentTest:s}}),u.jsx(Kv,{data:{title:"Description",currentTest:r,setCurrentTest:s}}),u.jsx(Vi,{}),u.jsx(WM,{data:{currentTest:r,setEditData:f,setCurrentTest:s,setIsRulesAdding:l}}),u.jsx(Vi,{}),u.jsx(BM,{data:V}),i&&u.jsx($M,{data:{cancel:g,setQuizzes:h,quizzes:c,editData:d,clearEditData:R}}),a&&u.jsx(HM,{data:{currentTest:r,setCurrentTest:s,editData:d,setEditData:f,setIsRulesAdding:l}}),m&&u.jsx(ao,{data:{yesButton:T,noButton:x,text:"Are you sure to delete ?"}}),u.jsx(Vi,{})]})},fg=({text:t,length:e})=>{const n=tn(),{theme:r}=v.useContext(F);return u.jsxs("div",{className:`flex items-center gap-x-1 mb-2 ${r==="light"?"":"text-white"}`,children:[u.jsx(ge,{data:{clickFn:()=>n("/app/admin"),image:"back"}}),u.jsxs("p",{children:[t," (",e,")"]})]})},GM=()=>{const[t,e]=v.useState("test"),{theme:n,isLogin:r,tests:s,setTests:i}=v.useContext(F),[o,a]=v.useState({}),[l,c]=v.useState(!1),[h,d]=v.useState(!1),[f,m]=v.useState(null);xo("tests",i,r),v.useEffect(()=>(Kt(),Kt()),[]);const _=I=>{a(I),e("editTest")},w=I=>{m(I),d(!0)},E=async I=>{const S=le(ce,"tests",I.id);await St(S,{isUploaded:!I.isUploaded})},p=()=>{x(f),m(null),d(!1)},g=()=>{d(!1)},y=()=>{c(!0)},T=()=>{c(!1)},x=async I=>{try{const S=le(ce,"tests",I);await Gl(S)}catch(S){console.log(S.message)}};return(()=>{switch(t){case"test":return u.jsxs("div",{className:"p-5 grid gap-y-2",children:[u.jsx("div",{className:"flex justify-between",children:u.jsx(fg,{text:"Tests",length:s.length})}),l&&u.jsx(FM,{data:{close:T}}),h&&u.jsx(ao,{data:{yesButton:p,noButton:g,text:"Are you sure to delete ?"}}),u.jsx("div",{className:"grid gap-y-2",children:s.map(I=>u.jsxs("div",{className:`flex items-center border p-2 rounded-md min-h-[100px] ${n==="light"?"border-gray-100":"border-slate-500/70 text-white"}`,children:[u.jsxs("div",{className:"flex flex-1 gap-x-2 items-center",children:[u.jsx("input",{checked:I.isUploaded,onChange:()=>E(I),className:"size-6",type:"checkbox"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:I.name}),u.jsxs("div",{className:`text-sm ${n==="light"?"text-gray-500":"text-white"}`,children:[I.quizzes.length,I.quizzes.length>1?" questions":" question",I.isUploaded?" (Uploaded)":" (Not uploaded)"]})]})]}),u.jsx("div",{className:"flex gap-x-2",children:u.jsx(yd,{options:[{text:"Edit",icon:"editPencil",onClick:()=>{_(I)}},{text:"Delete",icon:"deleteIcon",onClick:()=>w(I.id)}]})})]},`tests-${I.id}`))}),u.jsx("div",{children:u.jsx(he,{data:{clickFn:y,text:"New Test",image:"add"}})})]});case"editTest":return u.jsx(qM,{data:{setPage:e,currentTest:o,setCurrentTest:a}})}})()},KM=()=>{const{setUserData:t,users:e,theme:n}=v.useContext(F);v.useEffect(()=>(Kt(),Kt()),[]);const r=tn(),s=o=>{t(o),r("/app/posts")},i=async o=>{const a=le(ce,"users",o.uid);await St(a,{isAdmin:!o.isAdmin})};return u.jsxs("div",{className:"mt-2 p-5",children:[u.jsx(fg,{text:"Users",length:e==null?void 0:e.length}),u.jsx("div",{className:"mt-2 grid gap-y-2",children:e.map(o=>{var a,l,c,h,d;return u.jsxs("div",{className:`hover:border-blue-300 border p-2  ${n==="light"?`hover:bg-slate-50 ${((a=U==null?void 0:U.currentUser)==null?void 0:a.uid)===o.uid?"bg-slate-50 border-blue-300 ":"border-gray-200"}`:`hover:bg-slate-500/70 text-white ${((l=U==null?void 0:U.currentUser)==null?void 0:l.uid)===o.uid?" border-blue-300 bg-slate-500/70":"border-slate-500/70 "}`}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex w-5/6 gap-x-2 items-center",children:[u.jsx(Tr,{image:o.image,name:o.name}),u.jsxs("div",{children:[u.jsxs("div",{className:"font-medium",children:[o.name," ",u.jsxs("span",{className:`${o!=null&&o.isAdmin?"text-blue-500":"text-white"}`,children:["(",o!=null&&o.isAdmin?"admin":"user",")"," ",((c=U==null?void 0:U.currentUser)==null?void 0:c.uid)===o.uid?"(You)":""]})]}),u.jsx("div",{className:"text-md ",children:o.email}),u.jsxs("div",{className:"text-md",children:["Created: ",ys(o.createdAt)]}),u.jsx("div",{className:"text-md font-medium text-lime-600",children:"History: Unknown"})]})]}),((h=U==null?void 0:U.currentUser)==null?void 0:h.uid)!==o.uid&&u.jsx(ge,{data:{clickFn:()=>s(o),image:"review"}})]}),((d=U==null?void 0:U.currentUser)==null?void 0:d.uid)!==o.uid&&u.jsx(he,{data:{image:"admin",clickFn:()=>i(o),text:o.isAdmin?"Remove from admin":"Set as admin"}})]},o.uid)})})]})},_C=({data:t,children:e})=>{const{setValue:n}=t,{theme:r}=v.useContext(F),s=v.useRef(null);return li(s,n),v.useEffect(()=>(Xt("hidden"),()=>{Xt("auto")}),[]),u.jsx("div",{className:"fixed flex items-center z-40 bg-black/60 justify-center top-0 left-0 right-0 bottom-0 ",children:u.jsx("div",{ref:s,className:`w-4/5 sm:w-3/5 md:w-2/5 p-5 min-h-40 grid gap-y-3 rounded-md items-center border  ${r==="light"?"border-gray-300 bg-white":"border-slate-500/70 text-white bg-slate-600"}`,children:e})})},QM=({data:t})=>{const{links:e,setLinks:n,setIsLinkAdding:r}=t,[s,i]=v.useState(""),[o,a]=v.useState(""),l=s.trim()&&o.trim(),c=()=>{if(l){const h={id:e.length===0?1:e[e.length-1].id+1,title:s.trim(),link:o.trim()},d=[...e,h];n(d),r(!1)}};return u.jsxs(_C,{data:{setValue:r},children:[u.jsxs("div",{className:"grid gap-y-2",children:[u.jsx(sh,{data:{text:"Title",onChangeFn:h=>i(h.target.value),value:s,placeholder:"Enter title..."}}),u.jsx(sh,{data:{text:"Link",onChangeFn:h=>a(h.target.value),value:o,placeholder:"Enter link..."}})]}),u.jsx("div",{children:u.jsx(he,{data:{image:"add",text:"Add Link",clickFn:c}})})]})},YM=()=>{const{users:t,theme:e,isLogin:n,posts:r,setPosts:s}=v.useContext(F),[i,o]=v.useState("posts"),[a,l]=v.useState(null);xo("posts",s,n);const c=async d=>{const f=le(ce,"posts",d);await Gl(f)},h=()=>{switch(i){case"posts":return u.jsxs("div",{className:"grid gap-y-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx(fg,{text:"Posts",length:r.length}),u.jsx(he,{data:{clickFn:()=>o("createPost"),text:"Create a post"}})]}),u.jsx("div",{className:"grid gap-y-2 mb-2",children:r.sort((d,f)=>{const m=new Date(d.time);return new Date(f.time)-m}).map(d=>{var m,_,w;let f;return t.forEach(E=>{E.uid===d.uid&&(f=E)}),u.jsxs("div",{className:`p-2 border min-h-20 flex items-center rounded-md ${e==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"top-section flex mb-2 gap-x-2",children:[u.jsx("img",{className:"size-10 rounded-full shadow-md object-cover",src:f.image}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:f.name}),u.jsx("div",{className:` text-sm ${e==="light"?"text-gray-500":"text-white"}`,children:ys(d.time)})]})]}),u.jsx("p",{className:"mb-2 break-words whitespace-normal",children:xr(d.description,25)}),u.jsxs("div",{className:"flex items-center gap-x-1",children:[d.images.length!==0&&u.jsxs("div",{className:`p-1 min-h-9 flex items-center gap-x-1  rounded-md ${e==="light"?"bg-green-100":"bg-slate-500/70"}`,children:[u.jsx("img",{className:"w-7",src:J("image")}),u.jsxs("span",{children:[d.images.length," ",d.images.length<=1?"image":"images"]})]}),d.files.length!==0&&u.jsxs("div",{className:`p-1 min-h-9  flex items-center gap-x-1 rounded-md ${e==="light"?"bg-green-100":"bg-slate-500/70"}`,children:[u.jsx("img",{className:"w-7",src:J("file")}),u.jsxs("span",{children:[d.files.length," ",d.files.length<=1?"file":"files"]})]}),d.links&&((m=d==null?void 0:d.links)==null?void 0:m.length)!==0&&u.jsxs("div",{className:`p-1 min-h-9  flex items-center gap-x-1 rounded-md ${e==="light"?"bg-green-100":"bg-slate-500/70"}`,children:[u.jsx("img",{className:"w-7",src:J("link")}),u.jsxs("span",{children:[(_=d==null?void 0:d.links)==null?void 0:_.length," ",((w=d==null?void 0:d.links)==null?void 0:w.length)<=1?"link":"links"]})]}),d.draft&&u.jsx("div",{className:`p-1 min-h-9 flex items-center gap-x-1 rounded-md ${e==="light"?"bg-green-100":"bg-slate-500/70"}`,children:u.jsx("span",{className:"font-bold text-red-500",children:"(Draft)"})})]})]}),u.jsx("div",{className:"flex items-center gap-x-1",children:u.jsx(yd,{options:[{text:"Edit",icon:"editPencil",onClick:()=>{l(d),o("createPost")}},{text:"Delete",icon:"deleteIcon",onClick:()=>c(d.id)}]})})]},`post-${d.id}`)})})]});case"createPost":return u.jsx(XM,{setPage:o,postData:a,setPostData:l})}};return u.jsx("div",{className:"p-5",children:h()})},XM=({setPage:t,postData:e,setPostData:n})=>{const{theme:r}=v.useContext(F),[s,i]=v.useState(e?e.images:[]),[o,a]=v.useState(null),[l,c]=v.useState(e?e.description:""),[h,d]=v.useState(e?e==null?void 0:e.files:[]),[f,m]=v.useState(e?(e==null?void 0:e.links)||[]:[]),[_,w]=v.useState(!1),E=l.trim()||s.length!==0||h.length!==0||f.length!==0,p=async(R=!1)=>{try{const k=ut(ce,"posts");await os(k,{uid:U.currentUser.uid,time:xn(),editedTime:xn(),description:l,images:s,files:h,links:f,draft:R}),t("posts")}catch(k){console.log(k.message)}},g=async()=>{try{const R=le(ce,"posts",e.id);await St(R,{editedTime:xn(),description:l,images:s,files:h,links:f,draft:!1}),t("posts")}catch(R){console.log(R.message)}},y=async()=>{try{if(e){const R=le(ce,"posts",e.id);await St(R,{editedTime:xn(),description:l,images:s,files:h,links:f,draft:!0})}else p(!0);t("posts")}catch(R){console.log(R.message)}},T=async R=>{try{const k=`posts/${U.currentUser.uid}/${R.name}`,V=Ms(Vs,k);a("Uploading image...");const $=await Gu(V,R),Y=await Ku($.ref),oe=[...s,{name:R.name,path:k,imageURL:Y}];i(oe),a("Uploaded image"),setTimeout(()=>{a(null)},3e3)}catch(k){a(k.message),setTimeout(()=>{a(null)},3e3)}},x=async R=>{try{const k=`posts/${U.currentUser.uid}/${R.name}`,V=Ms(Vs,k);a("Uploading file...");const $=await Gu(V,R),Y=await Ku($.ref),oe=[...h,{name:R.name,path:k,fileURL:Y,size:R.size}];d(oe),a("Uploaded file"),setTimeout(()=>{a(null)},3e3)}catch(k){a(k.message),setTimeout(()=>{a(null)},3e3)}},C=async(R,k)=>{const V=s.filter(Y=>k!==Y.imageURL);i(V);const $=Ms(Vs,R);await o2($)},I=async(R,k)=>{const V=h.filter(Y=>k!==Y.fileURL);d(V);const $=Ms(Vs,R);await o2($)},S=R=>{const k=f.filter(V=>R!==V.id);m(k)};return u.jsxs("div",{children:[u.jsxs("div",{className:"flex mb-2 items-center justify-between",children:[o&&u.jsx(rh,{message:o}),u.jsxs("div",{className:"flex gap-x-1 items-center",children:[u.jsx(ge,{data:{clickFn:()=>{t("posts"),n(null)},image:"back"}}),u.jsx("div",{className:r==="light"?"":"text-white",children:e?"Edit post":"Create a post"})]}),u.jsxs("div",{className:"flex items-center gap-x-1",children:[u.jsx(he,{data:{text:"Draft",clickFn:()=>{E&&y()}}}),u.jsx(he,{data:{clickFn:()=>{E?(e?g():p(),n(null)):a("Create a post first!")},text:e?"Save":"Publish",image:e?"save":"upload"}})]})]}),u.jsxs("div",{className:"mb-2",children:[u.jsx("textarea",{value:l,onChange:R=>c(R.target.value),className:`w-full p-2 resize-none border min-h-28 ${r==="light"?"border-slate-200  focus:outline-blue-500":"border-slate-500/70 outline-none bg-slate-600 text-white"}`,placeholder:"Write description here"}),u.jsx("input",{className:"hidden",id:"imagesInput",type:"file",accept:"image/*",onChange:R=>T(R.target.files[0])}),u.jsx("input",{className:"hidden",id:"filesInput",type:"file",onChange:R=>x(R.target.files[0])}),u.jsxs("div",{className:"flex justify-start gap-x-2 mt-1",children:[u.jsxs("label",{htmlFor:"imagesInput",className:`min-h-10 shadow-md hover:opacity-70 border  font-medium px-2 py-1 rounded-lg flex justify-center items-center gap-x-1 transition-all ${r==="light"?"bg-gray-50/50 border-gray-200":"bg-slate-500/70 text-white border-slate-500/70"}`,children:[u.jsx("img",{className:" h-7",src:J("image")}),u.jsx("span",{children:"Image"})]}),u.jsxs("label",{htmlFor:"filesInput",className:`min-h-10 shadow-md hover:opacity-70 border  font-medium px-2 py-1 rounded-lg flex justify-center items-center gap-x-1 transition-all ${r==="light"?"bg-gray-50/50 border-gray-200":"bg-slate-500/70 text-white border-slate-500/70"}`,children:[u.jsx("img",{className:" h-7",src:J("file")}),u.jsx("span",{children:"File"})]}),u.jsxs("label",{onClick:()=>{w(!0)},className:`min-h-10 shadow-md hover:opacity-70 border  font-medium px-2 py-1 rounded-lg flex justify-center items-center gap-x-1 transition-all ${r==="light"?"bg-gray-50/50 border-gray-200":"bg-slate-500/70 text-white border-slate-500/70"}`,children:[u.jsx("img",{className:" h-7",src:J("link")}),u.jsx("span",{children:"Link"})]}),_&&u.jsx(QM,{data:{links:f,setLinks:m,setIsLinkAdding:w}})]})]}),s.length!==0&&u.jsx("div",{className:"grid gap-y-2",children:s.map(R=>u.jsxs("div",{className:"relative min-h-20",children:[u.jsx("img",{alt:R.name,className:"size-full",src:R.imageURL}),u.jsx("div",{className:"absolute top-1 right-1",children:u.jsx(ge,{data:{clickFn:()=>C(R.path,R.imageURL),image:"falseIcon"}})})]},R.imageURL))}),h.length!==0&&u.jsx("div",{className:"grid gap-y-1 mt-2",children:h.map(R=>u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:`p-1  min-h-14 rounded-md flex gap-x-1 items-center font-bold border  border-l-4 border-l-green-500 ${r==="light"?"bg-slate-50 border-gray-300 text-blue-600":"bg-slate-500/70 border-slate-500/70 text-white"}`,children:[u.jsx("img",{className:"w-7 ",src:J("download")}),u.jsxs("div",{children:[u.jsx("p",{className:"underline text-blue-600",children:R.name}),(R==null?void 0:R.size)&&u.jsxs("p",{children:[(R.size/(1024*1024)).toFixed(2)," MB"]})]})]}),u.jsx("div",{className:"absolute top-1 right-1",children:u.jsx(ge,{data:{clickFn:()=>I(R.path,R.fileURL),image:"falseIcon"}})})]},R.fileURL))}),f.length!==0&&u.jsx("div",{className:"grid gap-y-1 mt-2",children:f.map(R=>u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:`p-1  min-h-14 rounded-md flex gap-x-1 items-center font-bold border  border-l-4 border-l-green-500 ${r==="light"?"bg-slate-50 border-gray-300 text-blue-600":"bg-slate-500/70 border-slate-500/70 text-white"}`,children:[u.jsx("img",{className:"w-7 ",src:J("link")}),u.jsx("div",{children:u.jsx("p",{className:"underline text-blue-600",children:R.title})})]}),u.jsx("div",{className:"absolute top-1 right-1",children:u.jsx(ge,{data:{image:"falseIcon",clickFn:()=>S(R.id)}})})]},R.link))})]})},JM=()=>{const{users:t,setHeaderTitle:e,theme:n,notifications:r,setNotifications:s}=v.useContext(F),[i,o]=v.useState(null),a=5,l=()=>{const c=ut(ce,"notifications");let h=Ra(c,e2("timestamp","desc"),t2(a));i&&(h=Ra(h,ex(i))),Gn(h,d=>{const f=d.docs.map(m=>({id:m.id,...m.data()}));s([...r,...f]),o(d.docs[d.docs.length-1])})};return v.useEffect(()=>{const c=ut(ce,"notifications"),h=Ra(c,e2("timestamp","desc"),t2(5)),d=Gn(h,f=>{const m=f.docs.map(_=>({id:_.id,..._.data()}));m.length!==0&&(s(m),o(f.docs[f.docs.length-1]))});return()=>d()},[]),v.useEffect(()=>{e("Notifications")},[]),u.jsxs("div",{className:"p-5 grid gap-y-2 ",children:[u.jsx(kn,{}),r.map(c=>{let h;return t.forEach(d=>{c.uid===d.uid&&(h=d)}),u.jsx(ZM,{notification:c,user:h},c.id)}),r.length===0&&u.jsx("div",{className:`${n==="light"?"":"text-white"}`,children:"No notifications"}),r.length>=a&&u.jsx("div",{className:"flex justify-center mt-1 mb-2 ",children:u.jsx("button",{onClick:l,className:`border  rounded-md text-sm p-1 ${n==="light"?"border-gray-100":"text-white bg-slate-500/70"}`,children:"load more"})})]})},ZM=({notification:t,user:e})=>{let n;const{type:r,description:s,timestamp:i,testName:o,comment:a}=t,{theme:l}=v.useContext(F);switch(`${r[0]} ${r[1]}`){case"like post":n="liked a post";break;case"like test":n="liked a test";break;case"comment post":n="commented on a post";break;case"comment test":n="commented on a test";break;case"added post":n="added a post";break;case"added test":n="added a test";break;case"took test":n="took a test";break}return u.jsxs("div",{className:`cursor-pointer shadow-md flex items-center gap-x-2 p-2 border  rounded-md ${l==="light"?"border-slate-300 bg-white shadow-gray-200":"border-slate-500/70 bg-slate-500/70 text-white shadow-slate-500 "}`,children:[u.jsx("div",{children:u.jsx("img",{className:"size-10 object-cover rounded-full object-center bg-cover",src:e==null?void 0:e.image})}),u.jsxs("div",{children:[u.jsxs("p",{children:[u.jsx("b",{children:e==null?void 0:e.name})," ",n]}),s&&u.jsx("p",{children:xr(s,30)}),o&&u.jsx("p",{children:o}),a&&u.jsx("p",{children:a}),u.jsx("p",{children:ys(i!=null&&i.seconds?i.seconds*1e3:i)})]})]})},ej=({members:t})=>{const{users:e,theme:n}=v.useContext(F);return u.jsxs("div",{className:`p-2 grid gap-y-2 ${n==="light"?"":"text-white"}`,children:[u.jsx("p",{className:"text-lg font-bold",children:"Members"}),t.sort((r,s)=>{const i=new Date(r.joinedAt);return new Date(s.joinedAt)-i}).map(r=>{const s=Er(e,r.uid);return u.jsxs("div",{className:`p-2 flex gap-x-2 items-center border  rounded-md ${n==="light"?"border-slate-200":"bg-slate-500/70 border-slate-500"}`,children:[u.jsxs("div",{className:"relative",children:[u.jsx(Tr,{image:s.image,name:s.name}),u.jsx("div",{className:`absolute bottom-0 right-0 size-3 rounded-full ${s!=null&&s.isOnline?"bg-green-500":"bg-gray-500"}`})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{children:s==null?void 0:s.name}),u.jsx("p",{className:`text-sm ${s!=null&&s.isOnline?"text-blue-500":"text-red-500"}`,children:s!=null&&s.isOnline?"Online":ys(s==null?void 0:s.lastSeen)})]})]},r.uid+r.joinedAt)})]})},tj=({setSubPage:t,currentChat:e})=>{const{theme:n,users:r,userData:s}=v.useContext(F),{members:i}=e,o=async c=>{try{const h=le(ce,"chats",e.id);await St(h,{members:qk({uid:c,joinedAt:new Date().getTime()})})}catch(h){console.log(h.message)}},a=async c=>{try{const h=le(ce,"chats",e.id),d=i.filter(f=>c!==f.uid);await St(h,{members:d})}catch(h){console.log(h.message)}},l=c=>{let h=!1;return i.forEach(d=>{c===d.uid&&(h=!0)}),h};return u.jsxs("div",{className:"",children:[u.jsx("div",{className:`h-[70px] z-30 fixed top-0 right-0 left-0 p-2 min-h-10 pb-2 flex items-center justify-between gap-x-1 border-b ${n==="light"?"border-b-slate-200 bg-slate-50":"border-b-slate-500/70 bg-slate-500"}`,children:u.jsxs("div",{className:"flex gap-x-1",children:[u.jsx("div",{children:u.jsx(ge,{data:{image:"back",clickFn:()=>t("chat")}})}),u.jsxs("div",{className:` ${n==="light"?"":"text-white"}`,children:[u.jsx("p",{className:"text-lg font-bold",children:e.name}),u.jsxs("p",{className:"text-sm",children:[i.length," ",i.length<=1?"member":"members"]})]})]})}),(s==null?void 0:s.isAdmin)&&u.jsxs("div",{className:"p-2",children:[u.jsx("input",{id:"imageInput",className:"hidden",type:"file",accept:"image/*"}),u.jsxs("div",{className:"relative size-24",children:[u.jsx("img",{src:"images/sea-logo.jpg",className:"size-24 rounded-full object-cover object-center bg-cover"}),u.jsx("label",{htmlFor:"imageInput",className:` p-1 rounded-full absolute -bottom-1 -right-1 cursor-pointer ${n==="light"?"bg-gray-200":"bg-slate-500/70"}`,children:u.jsx("img",{className:"w-5",src:J("edit")})})]}),u.jsxs("div",{className:`mt-2 ${n==="light"?"":"text-white"}`,children:[u.jsx("p",{children:"Group Name"}),u.jsx("p",{children:e.name})]})]}),u.jsx(ej,{members:i}),(s==null?void 0:s.isAdmin)&&u.jsxs("div",{className:`p-2 grid gap-y-2 ${n==="light"?"":"text-white"}`,children:[u.jsx("p",{className:"text-lg font-bold",children:"Manage Members"}),r.sort((c,h)=>{const d=new Date(c.createdAt);return new Date(h.createdAt)-d}).map((c,h)=>u.jsxs("div",{className:`p-2 flex justify-between items-center border  rounded-md ${n==="light"?"border-slate-200":"bg-slate-500/70 border-slate-500"}`,children:[u.jsxs("div",{className:"flex gap-x-2 items-center",children:[u.jsxs("div",{className:"relative",children:[u.jsx(Tr,{image:c.image,name:c.name}),u.jsx("div",{className:`absolute bottom-0 right-0 size-3 rounded-full ${c!=null&&c.isOnline?"bg-green-500":"bg-gray-500"}`})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{children:c.name}),u.jsx("p",{className:`text-sm ${c!=null&&c.isOnline?"text-blue-500":"text-red-500"}`,children:c!=null&&c.isOnline?"Online":ys(c==null?void 0:c.lastSeen)})]})]}),u.jsx("div",{children:l(c.uid)?!c.isAdmin&&u.jsx(ge,{data:{clickFn:()=>a(c.uid),image:"trash"}}):u.jsx(ge,{data:{clickFn:()=>o(c.uid),image:"add"}})})]},c.name+" "+c.image+h))]})]})},nj=({message:t,deleteMessage:e,setMessage:n,setImageObject:r,setEditMessageId:s,setViewingImage:i,setReplyMessage:o})=>{var m,_;const{users:a,theme:l,userData:c}=v.useContext(F),h=U.currentUser.uid===t.senderId,d=Er(a,t.senderId),f=h&&{text:"Edit",icon:"editPencil",onClick:()=>{s(t.id),n(t.content),r(t==null?void 0:t.image),o(t==null?void 0:t.reply)}};return u.jsxs("div",{className:`flex mb-2 gap-x-2 ${h?"flex-row-reverse":""} `,children:[u.jsxs("div",{className:"size-10 relative",children:[u.jsx(Tr,{name:d.name,image:d.image}),u.jsx("div",{className:`absolute bottom-0 right-0 size-3 rounded-full ${d!=null&&d.isOnline?"bg-green-500":"bg-gray-500"}`})]}),u.jsxs("div",{className:`grid gap-y-1 whitespace-pre-wrap ${l==="light"?"":"text-white"}`,children:[u.jsx("p",{className:`font-bold ${h?"text-right":"text-left"} `,children:d==null?void 0:d.name}),u.jsxs("div",{className:`flex items-start gap-x-1 ${h?"flex-row-reverse justify-start":""}`,children:[u.jsxs("div",{children:[(t==null?void 0:t.content)&&u.jsxs("p",{className:`max-w-[250px] break-words whitespace-pre-wrap text-wrap rounded-[10px] border border-slate-200 p-2  ${l==="light"?`${h?"rounded-tr-none bg-blue-300":"bg-white rounded-tl-none"}`:`${h?"rounded-tr-none bg-blue-300":"bg-white rounded-tl-none text-black"}`}`,children:[(t==null?void 0:t.reply)&&u.jsx(rj,{message:t}),t.content]}),(t==null?void 0:t.image)&&u.jsx("img",{onClick:()=>{i(t.image)},className:"cursor-pointer border mt-1 rounded-sm border-slate-200 w-[200px] min-h-[100px]",alt:t.image.name,src:t.image.URL})]}),h||c!=null&&c.isAdmin?u.jsx(yd,{options:[f,{text:"Delete",icon:"deleteIcon",onClick:()=>e(t.id)}],left:h?"left-[35px]":"-left-[102px]"}):""]}),u.jsxs("div",{className:`flex  ${h?"flex-row-reverse":""} gap-x-1 items-center`,children:[u.jsx("button",{onClick:()=>{o(t)},children:u.jsx("img",{className:"w-6",src:J("reply")})}),u.jsx("p",{className:`text-sm ${h?"text-right":"text-left"}`,children:t!=null&&t.editedTime?u.jsxs("span",{children:["edited"," ",xl((m=t.editedTime)!=null&&m.seconds?t.editedTime.seconds*1e3:t.editedTime)]}):u.jsx("span",{children:xl((_=t.timestamp)!=null&&_.seconds?t.timestamp.seconds*1e3:t.timestamp)})})]})]})]})},rj=({message:t})=>{const{users:e,theme:n}=v.useContext(F),r=Er(e,t.reply.senderId);return u.jsxs("div",{className:`mb-1 border-l-4 p-1 rounded-md border-l-green-500  ${n==="light"?"bg-green-200":"bg-green-300"}`,children:[u.jsx("p",{className:"font-bold ",children:r.name}),u.jsx("p",{children:xr(t.reply.content,25)})]})},sj=({image:t,setViewingImage:e})=>u.jsx(_C,{data:{setValue:e},children:t&&u.jsxs("div",{className:"",children:[u.jsxs("p",{children:[(t.size/(1024*1024)).toFixed(2)," MB"]}),u.jsx("img",{alt:t.name,className:"mt-1 h-full w-full",src:t.URL})]})}),ij=({data:t})=>{const{setPage:e,chatId:n,chats:r,loadMore:s,messages:i,viewingOldMessages:o,setViewingOldMessages:a}=t,{theme:l,userData:c,users:h}=v.useContext(F),[d,f]=v.useState(""),[m,_]=v.useState("chat"),[w,E]=v.useState(null),p=le(ce,"chats",n),g=ut(p,"messages"),[y,T]=v.useState(null),[x,C]=v.useState(!1),[I,S]=v.useState(!1),[R,k]=v.useState(null),[V,$]=v.useState(null),[Y,oe]=v.useState(null);let Ke;r.forEach(B=>{n===B.id&&(Ke=B)}),v.useEffect(()=>{const B=Er(h,V==null?void 0:V.senderId);oe(B),console.log(V,B)},[V]),v.useEffect(()=>{_f()},[]);const ws=async B=>{const Me=`chats/${n}/${c.name}-${B.name}`,Dt=Ms(Vs,Me);C(!0),S(!0);const Qn=await Gu(Dt,B),Ot=await Ku(Qn.ref),nn={name:B.name,path:Me,URL:Ot,size:B.size};T(nn),C(!1),S(!1)},Es=async B=>{const Me=Ms(Vs,B);await o2(Me),T(null)},M=async()=>{try{const B={senderId:U.currentUser.uid,content:d.trim(),timestamp:xn(),image:y||null,reply:V||null};S(!0),await os(g,B),await St(p,{lastMessage:B}),f(""),T(null),_f(),S(!1),$(null),oe(null)}catch(B){console.log(B.message)}},W=async()=>{try{const B=le(g,w),Me={content:d.trim(),editedTime:xn(),image:y||null,reply:V||null};S(!0),await St(B,Me),f(""),T(null),E(null),S(!1),$(null),oe(null)}catch(B){console.log(B.message)}},X=async B=>{const Me=le(g,B);await Gl(Me)},Ee=()=>{switch(m){case"chat":return u.jsxs("div",{className:"",children:[R&&u.jsx(sj,{image:R,setViewingImage:k}),u.jsxs("div",{className:`h-[70px] z-30 fixed top-0 right-0 left-0 p-2 min-h-10 pb-2 flex items-center justify-between gap-x-1 border-b ${l==="light"?"border-b-slate-200 bg-slate-50":"border-b-slate-500/70 bg-slate-500"}`,children:[u.jsxs("div",{className:"flex gap-x-1",children:[u.jsx("div",{children:u.jsx(ge,{data:{image:"back",clickFn:()=>e("chatroom")}})}),u.jsxs("div",{className:` ${l==="light"?"":"text-white"}`,children:[u.jsx("p",{className:"text-lg font-bold",children:Ke.name}),u.jsxs("p",{className:"text-sm",children:[Ke.members.length," ",Ke.members.length<=1?"member":"members"]})]})]}),u.jsx("button",{onClick:()=>_("info"),children:u.jsx("img",{src:"images/sea-logo.jpg",alt:"group-image",className:"size-12 rounded-full object-center object-cover "})})]}),u.jsxs("div",{className:"p-2 gap-y-2 mb-[90px]",children:[u.jsx("div",{className:"flex justify-center mt-1 mb-2",children:u.jsx("button",{onClick:()=>{s("old"),a(!0)},className:`border  rounded-md text-sm p-1 ${l==="light"?"border-gray-100":"text-white bg-slate-500/70"}`,children:"Older messages"})}),i.sort((B,Me)=>{var Ot,nn;const Dt=new Date((Ot=B.timestamp)!=null&&Ot.seconds?B.timestamp.seconds*1e3:B.timestamp),Qn=new Date((nn=Me.timestamp)!=null&&nn.seconds?Me.timestamp.seconds*1e3:Me.timestamp);return Dt-Qn}).map((B,Me)=>u.jsx(nj,{editMessage:W,setEditMessageId:E,deleteMessage:X,message:B,setMessage:f,setImageObject:T,setViewingImage:k,setReplyMessage:$},`${Me}-${B.content}`)),o&&u.jsxs("div",{className:"flex gap-x-1 justify-center mt-1 mb-2",children:[u.jsx("button",{onClick:()=>{s("newer")},className:`border  rounded-md text-sm p-1 ${l==="light"?"border-gray-100":"text-white bg-slate-500/70"}`,children:"Newer messages"}),u.jsx("button",{onClick:()=>{s("new"),a(!1)},className:`border  rounded-md text-sm p-1 ${l==="light"?"border-gray-100":"text-white bg-slate-500/70"}`,children:"Latest messages"})]})]}),u.jsxs("div",{className:`fixed bottom-0 right-0 left-0 p-2 min-h-[80px] flex flex-col items-center  ${l==="light"?" bg-slate-50":" bg-slate-500 text-white"}`,children:[w&&u.jsxs("div",{className:"w-full flex justify-between items-center text-sm p-1 md:w-2/3 lg:w-1/2",children:[u.jsx("p",{children:"Editing a message"}),u.jsx("button",{onClick:()=>{E(null),f(""),T(null),$(null),oe(null)},className:" rounded-full shadow-sm p-1",children:u.jsx("img",{className:"w-6",src:J("falseIcon")})})]}),V&&u.jsxs("div",{className:"w-full flex justify-between items-center text-sm p-1 md:w-2/3 lg:w-1/2",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("p",{className:"font-bold",children:["Reply to ",Y==null?void 0:Y.name]}),u.jsx("p",{children:xr(V==null?void 0:V.content,25)})]}),u.jsx("button",{onClick:()=>{$(null),oe(null)},className:"rounded-full shadow-sm p-1",children:u.jsx("img",{className:"w-6",src:J("falseIcon")})})]}),x&&u.jsx("div",{className:"w-full flex justify-between items-center text-sm p-1 md:w-2/3 lg:w-1/2",children:u.jsx("p",{children:"Uploading image..."})}),y&&u.jsxs("div",{className:"w-full flex justify-between items-center text-sm p-1 md:w-2/3 lg:w-1/2",children:[u.jsxs("div",{className:"flex flex-1 items-center gap-x-1",children:[u.jsx("img",{src:y.URL,className:"h-10 rounded-sm"}),u.jsx("p",{children:y.name})]}),u.jsx("button",{onClick:()=>{Es(y.path),T(null)},className:"rounded-full shadow-sm p-1",children:u.jsx("img",{className:"w-6",src:J("falseIcon")})})]}),u.jsxs("div",{className:`border shadow-sm w-full md:w-2/3 lg:w-1/2 p-1 rounded-[12px] flex items-center justify-between ${l==="light"?"border-slate-200":"border-slate-600"}`,children:[u.jsx("input",{id:"imageFile",className:"hidden",type:"file",onChange:B=>{ws(B.target.files[0])},accept:"image/*"}),u.jsx("label",{htmlFor:"imageFile",className:"p-1 cursor-pointer rounded-md",children:u.jsx("img",{className:"w-7",src:J("image")})}),u.jsx("textarea",{onChange:B=>f(B.target.value),value:d,className:`h-auto resize-none outline-none flex-1 p-1 pl-1 pr-1 rounded-md mr-2 ${l==="light"?"bg-transparent":"bg-transparent text-white"}`,placeholder:"Type message..."}),u.jsx("button",{onClick:()=>{!I&&(d.trim()||y)&&(w?W():M())},children:u.jsx("img",{className:"w-10",src:J(I?"sendingLetter":"sendLetter")})})]})]})]});case"info":return u.jsx(tj,{setSubPage:_,currentChat:Ke})}};return u.jsx(u.Fragment,{children:Ee()})},oj=()=>{const[t,e]=v.useState("chatroom"),[n,r]=v.useState(null),[s,i]=v.useState(null),[o,a]=v.useState(!1),{theme:l,users:c,setHeaderTitle:h,isLogin:d,chats:f,setChats:m,messages:_,setMessages:w}=v.useContext(F);let E=0;xo("chats",m,d);const p=x=>{try{const C=ut(le(ce,"chats",n),"messages");let S=Ra(C,e2("timestamp",x==="newer"?"asc":"desc"),t2(10));return x!=="new"&&s&&(S=Ra(S,ex(s))),Gn(S,k=>{const V=k.docs.map($=>({id:$.id,...$.data()}));V.length!==0&&w(V),i(k.docs[k.docs.length-1])})}catch(C){console.log(C.message)}};v.useEffect(()=>{if(!o)return p("new")},[n]),v.useEffect(()=>{h("Chat Room")},[]);const g=x=>{e("chat"),r(x)},y=(x,C)=>{let I=!1;return x.forEach(S=>{C===S.uid&&(I=!0)}),I},T=()=>{switch(t){case"chatroom":return u.jsxs("div",{className:"p-5 grid gap-y-2",children:[f.map(x=>{var I,S,R,k;let C;if(c.forEach(V=>{var $;V.uid===(($=x==null?void 0:x.lastMessage)==null?void 0:$.senderId)&&(C=V)}),y(x.members,(I=U==null?void 0:U.currentUser)==null?void 0:I.uid))return E++,u.jsxs("div",{onClick:()=>g(x.id),className:`p-1 min-h-[130px] shadow-md flex gap-x-2 items-center border rounded-md cursor-pointer relative  ${l==="light"?"border-slate-200 shadow-gray-200":"border-slate-500/70 text-white shadow-slate-500"}`,children:[u.jsx("div",{children:u.jsx("img",{src:"images/sea-logo.jpg",className:"size-12 object-cover object-center aspect-square bg-cover rounded-full "})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-lg",children:x==null?void 0:x.name}),u.jsxs("div",{children:[u.jsx("div",{className:"flex gap-x-1 items-center",children:(x==null?void 0:x.lastMessage)&&u.jsxs(u.Fragment,{children:[u.jsx(Tr,{size:"size-5",fontSize:"text-sm",name:C.name,image:C.image}),u.jsx("p",{children:C==null?void 0:C.name})]})}),(x==null?void 0:x.lastMessage)&&u.jsxs("div",{className:"text-sm mt-2",children:[u.jsx("p",{children:xr(x.lastMessage.content,30)}),((S=x.lastMessage)==null?void 0:S.image)&&u.jsx("p",{children:"1 image"})]})]}),(x==null?void 0:x.lastMessage)&&u.jsx("div",{className:"text-sm",children:xl((R=x.lastMessage.timestamp)!=null&&R.seconds?((k=x.lastMessage.timestamp)==null?void 0:k.seconds)*1e3:x.lastMessage.timestamp)})]})]},x.id)}),E===0&&u.jsxs("div",{className:`${l==="light"?"":"text-white"}`,children:[u.jsx("p",{children:"You don't have any chat rooms."}),u.jsx("p",{children:"Ask the admin to add you to a chat room."})]})]});case"chat":return u.jsx(ij,{data:{page:t,chats:f,setPage:e,chatId:n,loadMore:p,messages:_,viewingOldMessages:o,setViewingOldMessages:a,setLastDoc:i}})}};return u.jsxs(u.Fragment,{children:[u.jsx(kn,{}),T()]})},aj=()=>{const{headerTitle:t,refreshUserData:e,isLogin:n,setIsLogIn:r,isOnline:s,setIsOnline:i,setUserId:o}=v.useContext(F);document.title=t;const a=tn();v.useEffect(()=>{e()},[n]),v.useEffect(()=>(window.addEventListener("online",()=>i(!0)),window.addEventListener("offline",()=>i(!1)),()=>{window.removeEventListener("online",()=>i(!0)),window.removeEventListener("offline",()=>i(!1))}),[]);const l=async()=>{if(n){const c=le(ce,"users",U.currentUser.uid);s?await St(c,{isOnline:!0}):await St(c,{isOnline:!1,timestamp:new Date().getTime()})}};v.useEffect(()=>{l()},[n,s]),v.useEffect(()=>{const c=Z8(U,h=>{h&&(r(h),o(U.currentUser.uid))});return()=>{c()}},[]),v.useEffect(()=>{a(n?"/app/posts":"/login")},[n])},lj=()=>{const t={text:"About SEA",image:"about",answer:`SEA stands for Star Education Academy, is an education academy founded by U Aye Kyaw and Daw Sandar Lwin in 2015. At SEA, you can study variety of subjects including
    English Language and four skills,
    Philosophy, Maths and Science.`},e=[{text:"Is my data private ?",answer:"Yes, your data is private."},{text:"Where can I give feedback to developer ?",answer:"You can give feedback at aungnaingthan22@gmail.com"}],n=[{text:"What are updated in the latest version ?",answer:"Updated UI design and fix bugs."},{text:"What is the last update time ?",answer:` Updated ${ys(1712655376346)}.`}];return u.jsxs("div",{className:"p-5 ",children:[u.jsx(kn,{}),u.jsx(na,{image:t.image,text:t.text,answer:t.answer}),u.jsx(na,{text:"FAQ",image:"faq",answer:e.map(r=>u.jsx(na,{text:r.text,answer:r.answer},r.text))}),u.jsx(na,{image:"update",text:"Updates",answer:n.map(r=>u.jsx(na,{text:r.text,answer:r.answer},r.text))})]})},na=({image:t,text:e,answer:n})=>{const[r,s]=v.useState(!1),{theme:i}=v.useContext(F);return u.jsxs("div",{className:`border p-2  mb-2 ${i==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[u.jsxs("div",{className:"transition-all flex items-center rounded-md min-h-14 justify-between",children:[u.jsxs("div",{className:"flex items-center gap-x-2",children:[t&&u.jsx(cj,{image:t}),u.jsx("div",{children:e})]}),u.jsx("button",{onClick:()=>s(!r),className:`mr-2  rounded-full p-1 ${i==="light"?"bg-gray-200":"bg-slate-500"}`,children:u.jsx("img",{className:"w-6",src:J(r?"up":"down")})})]}),r&&u.jsx("div",{className:"font-medium ",children:n})]})},cj=({image:t})=>u.jsx("img",{className:"w-7",src:J(t)}),F=v.createContext();function uj(){var nn,pg,mg;const t=qv("sea-localStorage"),[e,n]=v.useState(qv("seaacademy-theme-data")||"light"),[r,s]=v.useState(((nn=t==null?void 0:t.timer)==null?void 0:nn.seconds)||0),[i,o]=v.useState(((pg=t==null?void 0:t.timer)==null?void 0:pg.minutes)||0),[a,l]=v.useState(((mg=t==null?void 0:t.timer)==null?void 0:mg.hours)||0),[c,h]=v.useState(!1),[d,f]=v.useState({}),[m,_]=v.useState([]),[w,E]=v.useState(null),[p,g]=v.useState((t==null?void 0:t.answeredQuestions)||[]),[y,T]=v.useState((t==null?void 0:t.currentTest)||null),[x,C]=v.useState(!1),[I,S]=v.useState(""),[R,k]=v.useState(!0),[V,$]=v.useState([]),[Y,oe]=v.useState([]),[Ke,ws]=v.useState([]),[Es,M]=v.useState([]),[W,X]=v.useState([]),[Ee,B]=v.useState([]);xo("users",_,c),pM("users",f,c);const Me=()=>{},Dt=()=>{s(0),o(0),l(0)},Qn=()=>{Dt(),g([]),T(null),w2("sea-localStorage",{answeredQuestions:[],currentTest:null,startIndex:null,timer:{seconds:0,minutes:0,hours:0}})};v.useEffect(()=>{w2("seaacademy-theme-data",e)},[e]);const Ot=`${a}:${S1(i)}:${S1(r)}`;return v.useEffect(()=>{const vC=setInterval(()=>{r<59?s(r+1):(s(0),o(i+1)),i===59&&(o(0),l(a+1))},1e3);return()=>{clearInterval(vC)}},[r]),u.jsx(F.Provider,{value:{answeredQuestions:p,setAnsweredQuestions:g,currentTest:y,stopTest:Qn,seaLocalStorage:t,formattedTime:Ot,startTimer:Dt,seconds:r,minutes:i,hours:a,inspecting:x,userData:d,isLogin:c,setUserData:f,users:m,setCurrentTest:T,headerTitle:I,setHeaderTitle:S,theme:e,setTheme:n,refreshUserData:Me,isOnline:R,setIsOnline:k,userId:w,setUserId:E,setInspecting:C,setIsLogIn:h,posts:V,setPosts:$,tests:Y,setTests:oe,history:Ke,setHistory:ws,chats:Es,setChats:M,messages:W,setMessages:X,notifications:Ee,setNotifications:B},children:u.jsx("div",{className:`transition-all duration-300 App font-padauk flex flex-col items-center min-h-screen ${e==="light"?"":"bg-slate-600"}`,children:u.jsxs(n9,{children:[u.jsx(aj,{}),u.jsx(EM,{}),u.jsx(CM,{}),u.jsx("div",{className:"flex-1 w-full h-full md:w-4/5 lg:w-3/5",children:u.jsxs(Q6,{children:[!c&&u.jsx(Rt,{exact:!0,path:"/login",element:u.jsx(jM,{})}),c&&u.jsxs(u.Fragment,{children:[u.jsx(Rt,{exact:!0,path:"/app/:page",element:y?u.jsx(gM,{}):u.jsx(LM,{})}),u.jsx(Rt,{exact:!0,path:"/app/history/:resultId",element:u.jsx(_M,{})}),u.jsx(Rt,{exact:!0,path:"/app/help",element:u.jsx(lj,{})}),u.jsx(Rt,{exact:!0,path:"/app/history/:resultId/reviews",element:u.jsx(xM,{})}),u.jsx(Rt,{path:"/app/history",element:u.jsx(TM,{})}),u.jsx(Rt,{path:"/app/chatroom",element:u.jsx(oj,{})}),(d==null?void 0:d.isAdmin)&&u.jsxs(u.Fragment,{children:[u.jsx(Rt,{path:"/app/notifications",element:u.jsx(JM,{})}),u.jsx(Rt,{path:"/app/admin",element:u.jsx(IM,{})}),u.jsx(Rt,{path:"/app/admin/tests",element:u.jsx(GM,{})}),u.jsx(Rt,{path:"/app/admin/users",element:u.jsx(KM,{})}),u.jsx(Rt,{path:"/app/admin/posts",element:u.jsx(YM,{})})]}),u.jsx(Rt,{exact:!0,path:"/app/settings",element:u.jsx(VM,{})})]}),u.jsx(Rt,{path:"*",element:u.jsx(vd,{title:"No page found!",text:"404 No page found!"})})]})}),I!=="Chat Room"&&u.jsx(MM,{})]})})})}T0.createRoot(document.getElementById("root")).render(u.jsx(sy.StrictMode,{children:u.jsx(uj,{})}));
