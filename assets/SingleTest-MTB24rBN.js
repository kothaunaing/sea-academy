import{K as L,a as R,u as q,r,A,h as M,j as e,aJ as P,E as n,G as U,F as B,d as D,b as O,e as V}from"./index-bR4MaZOJ.js";import{p as F}from"./prettyDate-uNOGf4QX.js";import{f as G}from"./fixTime-t8Fgsaat.js";import{M as h}from"./EmptyComponent-mtutYQst.js";import{R as H}from"./ReactionsSingle-MvGSPct9.js";import{S as I}from"./SkeletongTest-kKLqdzCC.js";import{M as J}from"./MoreOption-mSkIibas.js";import{E as K}from"./EditSharp-tls7Gpwf.js";import{S as g}from"./Skeleton-LRfmB9RD.js";import{T as j}from"./Tooltip-jKN6Sqwz.js";import{L as Q}from"./LinkSharp-MvLMBxnF.js";import"./prettyDateChat-PSq7xrmC.js";import"./ProfilePicture-NkVAKawu.js";import"./sortByDateNewer-X-Bb2bKS.js";import"./notify-kdn7sAoT.js";import"./SkeletonUser-pwlHAotJ.js";import"./DeleteSharp-n4xHhV2L.js";import"./createSvgIcon-3G1Z23-M.js";import"./IconButton-zFeYIEAO.js";import"./FavoriteBorder-gZEnJaMG.js";import"./Stack-WYlN-LHL.js";import"./TextField-lZjHCUEq.js";import"./Portal-vj8E7tuN.js";import"./Modal-AMyV4m0Z.js";import"./debounce-gOEKrWSg.js";import"./useControlled-Tg6WpoLH.js";import"./CloseSharp-8hnKeMD4.js";import"./OtherActions-7net_NKU.js";import"./getImage-SzyEh5nT.js";import"./Dialog-pOjzfPCd.js";const ye=L.memo(()=>{const{testId:l}=R(),i=q(),[t,b]=r.useState(null),{users:k,openSnackbar:p,startTimer:S,userData:m,setHeaderTitle:w}=r.useContext(A),[s,N]=r.useState(null),[u,v]=r.useState(null),[y,T]=r.useState(!1),[$,a]=r.useState(!0),[x,C]=r.useState(!0),E=M(),{mode:c}=E.palette;r.useState(!1);const z=m!=null&&m.isAdmin?{text:"Edit Test",icon:e.jsx(K,{}),onClick:()=>{i("/app/admin/tests/")}}:null;return r.useEffect(()=>{(async()=>{try{a(!0);const o=O(D,"tests",l),d=await V(o);d.exists()?(b({id:d.id,...d.data()}),a(!1)):(a(!1),T(!0))}catch(o){a(!1),v(o.message),p(o.message),console.log(o.message)}})()},[l]),P(t==null?void 0:t.uid,k,N,C,[l,t],1200),r.useEffect(()=>{s&&w(s.name+"'s post")},[s]),$?e.jsx(n,{m:2,children:e.jsx(I,{})}):y?e.jsx(h,{text:"No post available"}):u?e.jsx(h,{text:u}):e.jsx(n,{m:2,children:e.jsxs(n,{bgcolor:"background.default",color:"text.primary",className:`${c==="dark"?"border-slate-700":"border-slate-200"} flex flex-col justify-between min-h-60 border shadow-md rounded-md bg-gradient-to-tr`,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex gap-x-2 mb-2 p-2",children:[x?e.jsx(g,{width:35,height:35,variant:"circular"}):e.jsx(j,{title:`View ${s&&s.name}'s profile`,arrow:!0,placement:"top",children:e.jsx("div",{className:"cursor-pointer",onClick:()=>i(`/app/profile/${s.uid}`),children:e.jsx("img",{className:"size-10 rounded-full shadow-md object-cover",src:s?s.image:"images/sea-logo.jpg"})})}),e.jsxs("div",{children:[x?e.jsx(g,{height:40,width:120}):e.jsx(j,{title:`View ${s&&s.name}'s profile`,arrow:!0,placement:"top",children:e.jsx(U,{onClick:()=>i(`/app/profile/${s.uid}`),variant:"h6",fontSize:"1rem",sx:{cursor:"pointer"},children:s?s.name:"Unknown User"})}),e.jsx("div",{className:" text-sm",children:F(G(t.time))})]}),e.jsxs("span",{className:`rounded-md border  text-sm text-gray-400 flex items-center p-1 ${c==="dark"?"border-slate-700":"border-slate-200"}`,children:[t.quizzes.length,t.quizzes.length>1?" questions":" question"]})]}),e.jsx(n,{children:e.jsx(J,{options:[{text:"Copy link",icon:e.jsx(Q,{}),onClick:()=>{const f=`${location.origin}/#/app/tests/st/${t.id}`;navigator.clipboard.writeText(f),p("Link copied successfully")}},z],isComment:!0})})]}),t.image&&e.jsx("div",{className:"m-2 flex justify-center p-2",children:e.jsx("img",{className:"h-[250px]",src:`images/tests/${t.image}`})}),e.jsxs("div",{className:`${c==="dark"?"border-slate-700":"border-slate-200"} p-2 rounded-bl-lg rounded-br-lg border-t shadow-t-md`,children:[e.jsx("div",{className:"font-medium text-lg",children:t.name}),e.jsx("p",{className:" mb-2 break-words white-space-pre-wrap",children:t.description.trim()||"No description"}),e.jsx(B,{sx:{textDecoration:"underline"},size:"small",onClick:()=>{S(),i(`/app/tests/${t.id}`)},children:"Take the test"})]}),e.jsx(H,{post:t,collectionName:"tests"})]})})});export{ye as default};
