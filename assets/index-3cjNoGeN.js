function MC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function jC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sw={exports:{}},rd={},iw={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dc=Symbol.for("react.element"),FC=Symbol.for("react.portal"),VC=Symbol.for("react.fragment"),UC=Symbol.for("react.strict_mode"),$C=Symbol.for("react.profiler"),zC=Symbol.for("react.provider"),BC=Symbol.for("react.context"),WC=Symbol.for("react.forward_ref"),HC=Symbol.for("react.suspense"),qC=Symbol.for("react.memo"),GC=Symbol.for("react.lazy"),T1=Symbol.iterator;function KC(t){return t===null||typeof t!="object"?null:(t=T1&&t[T1]||t["@@iterator"],typeof t=="function"?t:null)}var ow={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aw=Object.assign,lw={};function ua(t,e,n){this.props=t,this.context=e,this.refs=lw,this.updater=n||ow}ua.prototype.isReactComponent={};ua.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ua.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cw(){}cw.prototype=ua.prototype;function wp(t,e,n){this.props=t,this.context=e,this.refs=lw,this.updater=n||ow}var Ep=wp.prototype=new cw;Ep.constructor=wp;aw(Ep,ua.prototype);Ep.isPureReactComponent=!0;var C1=Array.isArray,uw=Object.prototype.hasOwnProperty,xp={current:null},hw={key:!0,ref:!0,__self:!0,__source:!0};function dw(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)uw.call(e,r)&&!hw.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:dc,type:t,key:i,ref:o,props:s,_owner:xp.current}}function QC(t,e){return{$$typeof:dc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Tp(t){return typeof t=="object"&&t!==null&&t.$$typeof===dc}function YC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var I1=/\/+/g;function x0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?YC(""+t.key):e.toString(36)}function Tu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case dc:case FC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+x0(o,0):r,C1(s)?(n="",t!=null&&(n=t.replace(I1,"$&/")+"/"),Tu(s,e,n,"",function(c){return c})):s!=null&&(Tp(s)&&(s=QC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(I1,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",C1(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+x0(i,a);o+=Tu(i,e,n,l,s)}else if(l=KC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+x0(i,a++),o+=Tu(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Gc(t,e,n){if(t==null)return t;var r=[],s=0;return Tu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function XC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var en={current:null},Cu={transition:null},JC={ReactCurrentDispatcher:en,ReactCurrentBatchConfig:Cu,ReactCurrentOwner:xp};de.Children={map:Gc,forEach:function(t,e,n){Gc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gc(t,function(){e++}),e},toArray:function(t){return Gc(t,function(e){return e})||[]},only:function(t){if(!Tp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=ua;de.Fragment=VC;de.Profiler=$C;de.PureComponent=wp;de.StrictMode=UC;de.Suspense=HC;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JC;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=aw({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=xp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)uw.call(e,l)&&!hw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:dc,type:t.type,key:s,ref:i,props:r,_owner:o}};de.createContext=function(t){return t={$$typeof:BC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zC,_context:t},t.Consumer=t};de.createElement=dw;de.createFactory=function(t){var e=dw.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:WC,render:t}};de.isValidElement=Tp;de.lazy=function(t){return{$$typeof:GC,_payload:{_status:-1,_result:t},_init:XC}};de.memo=function(t,e){return{$$typeof:qC,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=Cu.transition;Cu.transition={};try{t()}finally{Cu.transition=e}};de.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};de.useCallback=function(t,e){return en.current.useCallback(t,e)};de.useContext=function(t){return en.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return en.current.useDeferredValue(t)};de.useEffect=function(t,e){return en.current.useEffect(t,e)};de.useId=function(){return en.current.useId()};de.useImperativeHandle=function(t,e,n){return en.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return en.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return en.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return en.current.useMemo(t,e)};de.useReducer=function(t,e,n){return en.current.useReducer(t,e,n)};de.useRef=function(t){return en.current.useRef(t)};de.useState=function(t){return en.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return en.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return en.current.useTransition()};de.version="18.2.0";iw.exports=de;var I=iw.exports;const fw=jC(I),ZC=MC({__proto__:null,default:fw},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eI=I,tI=Symbol.for("react.element"),nI=Symbol.for("react.fragment"),rI=Object.prototype.hasOwnProperty,sI=eI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iI={key:!0,ref:!0,__self:!0,__source:!0};function pw(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)rI.call(e,r)&&!iI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:tI,type:t,key:i,ref:o,props:s,_owner:sI.current}}rd.Fragment=nI;rd.jsx=pw;rd.jsxs=pw;sw.exports=rd;var f=sw.exports,Af={},mw={exports:{}},An={},gw={exports:{}},_w={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,O){var j=M.length;M.push(O);e:for(;0<j;){var H=j-1>>>1,$=M[H];if(0<s($,O))M[H]=O,M[j]=$,j=H;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var O=M[0],j=M.pop();if(j!==O){M[0]=j;e:for(var H=0,$=M.length,Y=$>>>1;H<Y;){var B=2*(H+1)-1,V=M[B],ee=B+1,pe=M[ee];if(0>s(V,j))ee<$&&0>s(pe,V)?(M[H]=pe,M[ee]=j,H=ee):(M[H]=V,M[B]=j,H=B);else if(ee<$&&0>s(pe,j))M[H]=pe,M[ee]=j,H=ee;else break e}}return O}function s(M,O){var j=M.sortIndex-O.sortIndex;return j!==0?j:M.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,p=!1,g=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(M){for(var O=n(c);O!==null;){if(O.callback===null)r(c);else if(O.startTime<=M)r(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function C(M){if(_=!1,y(M),!g)if(n(l)!==null)g=!0,R(N);else{var O=n(c);O!==null&&S(C,O.startTime-M)}}function N(M,O){g=!1,_&&(_=!1,m(T),T=-1),p=!0;var j=d;try{for(y(O),h=n(l);h!==null&&(!(h.expirationTime>O)||M&&!P());){var H=h.callback;if(typeof H=="function"){h.callback=null,d=h.priorityLevel;var $=H(h.expirationTime<=O);O=t.unstable_now(),typeof $=="function"?h.callback=$:h===n(l)&&r(l),y(O)}else r(l);h=n(l)}if(h!==null)var Y=!0;else{var B=n(c);B!==null&&S(C,B.startTime-O),Y=!1}return Y}finally{h=null,d=j,p=!1}}var E=!1,k=null,T=-1,w=5,A=-1;function P(){return!(t.unstable_now()-A<w)}function b(){if(k!==null){var M=t.unstable_now();A=M;var O=!0;try{O=k(!0,M)}finally{O?D():(E=!1,k=null)}}else E=!1}var D;if(typeof v=="function")D=function(){v(b)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,F=L.port2;L.port1.onmessage=b,D=function(){F.postMessage(null)}}else D=function(){x(b,0)};function R(M){k=M,E||(E=!0,D())}function S(M,O){T=x(function(){M(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,R(N))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(M){switch(d){case 1:case 2:case 3:var O=3;break;default:O=d}var j=d;d=O;try{return M()}finally{d=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,O){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var j=d;d=M;try{return O()}finally{d=j}},t.unstable_scheduleCallback=function(M,O,j){var H=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?H+j:H):j=H,M){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=j+$,M={id:u++,callback:O,priorityLevel:M,startTime:j,expirationTime:$,sortIndex:-1},j>H?(M.sortIndex=j,e(c,M),n(l)===null&&M===n(c)&&(_?(m(T),T=-1):_=!0,S(C,j-H))):(M.sortIndex=$,e(l,M),g||p||(g=!0,R(N))),M},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(M){var O=d;return function(){var j=d;d=O;try{return M.apply(this,arguments)}finally{d=j}}}})(_w);gw.exports=_w;var oI=gw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vw=I,Tn=oI;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yw=new Set,Cl={};function Wi(t,e){Bo(t,e),Bo(t+"Capture",e)}function Bo(t,e){for(Cl[t]=e,t=0;t<e.length;t++)yw.add(e[t])}var Br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rf=Object.prototype.hasOwnProperty,aI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S1={},A1={};function lI(t){return Rf.call(A1,t)?!0:Rf.call(S1,t)?!1:aI.test(t)?A1[t]=!0:(S1[t]=!0,!1)}function cI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uI(t,e,n,r){if(e===null||typeof e>"u"||cI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kt[t]=new tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kt[e]=new tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kt[t]=new tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kt[t]=new tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kt[t]=new tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kt[t]=new tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kt[t]=new tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kt[t]=new tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kt[t]=new tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Cp=/[\-:]([a-z])/g;function Ip(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Cp,Ip);kt[e]=new tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Cp,Ip);kt[e]=new tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Cp,Ip);kt[e]=new tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kt[t]=new tn(t,1,!1,t.toLowerCase(),null,!1,!1)});kt.xlinkHref=new tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kt[t]=new tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sp(t,e,n,r){var s=kt.hasOwnProperty(e)?kt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uI(e,n,s,r)&&(n=null),r||s===null?lI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var es=vw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kc=Symbol.for("react.element"),co=Symbol.for("react.portal"),uo=Symbol.for("react.fragment"),Ap=Symbol.for("react.strict_mode"),kf=Symbol.for("react.profiler"),ww=Symbol.for("react.provider"),Ew=Symbol.for("react.context"),Rp=Symbol.for("react.forward_ref"),Nf=Symbol.for("react.suspense"),bf=Symbol.for("react.suspense_list"),kp=Symbol.for("react.memo"),ls=Symbol.for("react.lazy"),xw=Symbol.for("react.offscreen"),R1=Symbol.iterator;function ka(t){return t===null||typeof t!="object"?null:(t=R1&&t[R1]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,T0;function Ga(t){if(T0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);T0=e&&e[1]||""}return`
`+T0+t}var C0=!1;function I0(t,e){if(!t||C0)return"";C0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{C0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ga(t):""}function hI(t){switch(t.tag){case 5:return Ga(t.type);case 16:return Ga("Lazy");case 13:return Ga("Suspense");case 19:return Ga("SuspenseList");case 0:case 2:case 15:return t=I0(t.type,!1),t;case 11:return t=I0(t.type.render,!1),t;case 1:return t=I0(t.type,!0),t;default:return""}}function Pf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case uo:return"Fragment";case co:return"Portal";case kf:return"Profiler";case Ap:return"StrictMode";case Nf:return"Suspense";case bf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ew:return(t.displayName||"Context")+".Consumer";case ww:return(t._context.displayName||"Context")+".Provider";case Rp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kp:return e=t.displayName||null,e!==null?e:Pf(t.type)||"Memo";case ls:e=t._payload,t=t._init;try{return Pf(t(e))}catch{}}return null}function dI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pf(e);case 8:return e===Ap?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Os(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Tw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fI(t){var e=Tw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qc(t){t._valueTracker||(t._valueTracker=fI(t))}function Cw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Tw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Wu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lf(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function k1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Os(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Iw(t,e){e=e.checked,e!=null&&Sp(t,"checked",e,!1)}function Df(t,e){Iw(t,e);var n=Os(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Of(t,e.type,n):e.hasOwnProperty("defaultValue")&&Of(t,e.type,Os(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function N1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Of(t,e,n){(e!=="number"||Wu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ka=Array.isArray;function Ao(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Os(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Mf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function b1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Ka(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Os(n)}}function Sw(t,e){var n=Os(e.value),r=Os(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function P1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Aw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Aw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yc,Rw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Yc=Yc||document.createElement("div"),Yc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Il(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var sl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pI=["Webkit","ms","Moz","O"];Object.keys(sl).forEach(function(t){pI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),sl[e]=sl[t]})});function kw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||sl.hasOwnProperty(t)&&sl[t]?(""+e).trim():e+"px"}function Nw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=kw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var mI=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ff(t,e){if(e){if(mI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Vf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uf=null;function Np(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $f=null,Ro=null,ko=null;function L1(t){if(t=mc(t)){if(typeof $f!="function")throw Error(W(280));var e=t.stateNode;e&&(e=ld(e),$f(t.stateNode,t.type,e))}}function bw(t){Ro?ko?ko.push(t):ko=[t]:Ro=t}function Pw(){if(Ro){var t=Ro,e=ko;if(ko=Ro=null,L1(t),e)for(t=0;t<e.length;t++)L1(e[t])}}function Lw(t,e){return t(e)}function Dw(){}var S0=!1;function Ow(t,e,n){if(S0)return t(e,n);S0=!0;try{return Lw(t,e,n)}finally{S0=!1,(Ro!==null||ko!==null)&&(Dw(),Pw())}}function Sl(t,e){var n=t.stateNode;if(n===null)return null;var r=ld(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var zf=!1;if(Br)try{var Na={};Object.defineProperty(Na,"passive",{get:function(){zf=!0}}),window.addEventListener("test",Na,Na),window.removeEventListener("test",Na,Na)}catch{zf=!1}function gI(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var il=!1,Hu=null,qu=!1,Bf=null,_I={onError:function(t){il=!0,Hu=t}};function vI(t,e,n,r,s,i,o,a,l){il=!1,Hu=null,gI.apply(_I,arguments)}function yI(t,e,n,r,s,i,o,a,l){if(vI.apply(this,arguments),il){if(il){var c=Hu;il=!1,Hu=null}else throw Error(W(198));qu||(qu=!0,Bf=c)}}function Hi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Mw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function D1(t){if(Hi(t)!==t)throw Error(W(188))}function wI(t){var e=t.alternate;if(!e){if(e=Hi(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return D1(s),t;if(i===r)return D1(s),e;i=i.sibling}throw Error(W(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function jw(t){return t=wI(t),t!==null?Fw(t):null}function Fw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Fw(t);if(e!==null)return e;t=t.sibling}return null}var Vw=Tn.unstable_scheduleCallback,O1=Tn.unstable_cancelCallback,EI=Tn.unstable_shouldYield,xI=Tn.unstable_requestPaint,Ze=Tn.unstable_now,TI=Tn.unstable_getCurrentPriorityLevel,bp=Tn.unstable_ImmediatePriority,Uw=Tn.unstable_UserBlockingPriority,Gu=Tn.unstable_NormalPriority,CI=Tn.unstable_LowPriority,$w=Tn.unstable_IdlePriority,sd=null,gr=null;function II(t){if(gr&&typeof gr.onCommitFiberRoot=="function")try{gr.onCommitFiberRoot(sd,t,void 0,(t.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:RI,SI=Math.log,AI=Math.LN2;function RI(t){return t>>>=0,t===0?32:31-(SI(t)/AI|0)|0}var Xc=64,Jc=4194304;function Qa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ku(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Qa(a):(i&=o,i!==0&&(r=Qa(i)))}else o=n&~s,o!==0?r=Qa(o):i!==0&&(r=Qa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zn(e),s=1<<n,r|=t[n],e&=~s;return r}function kI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Zn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=kI(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Wf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zw(){var t=Xc;return Xc<<=1,!(Xc&4194240)&&(Xc=64),t}function A0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zn(e),t[e]=n}function bI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Zn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Pp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ie=0;function Bw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ww,Lp,Hw,qw,Gw,Hf=!1,Zc=[],Es=null,xs=null,Ts=null,Al=new Map,Rl=new Map,us=[],PI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function M1(t,e){switch(t){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":xs=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":Al.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rl.delete(e.pointerId)}}function ba(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=mc(e),e!==null&&Lp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function LI(t,e,n,r,s){switch(e){case"focusin":return Es=ba(Es,t,e,n,r,s),!0;case"dragenter":return xs=ba(xs,t,e,n,r,s),!0;case"mouseover":return Ts=ba(Ts,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Al.set(i,ba(Al.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Rl.set(i,ba(Rl.get(i)||null,t,e,n,r,s)),!0}return!1}function Kw(t){var e=ci(t.target);if(e!==null){var n=Hi(e);if(n!==null){if(e=n.tag,e===13){if(e=Mw(n),e!==null){t.blockedOn=e,Gw(t.priority,function(){Hw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Iu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Uf=r,n.target.dispatchEvent(r),Uf=null}else return e=mc(n),e!==null&&Lp(e),t.blockedOn=n,!1;e.shift()}return!0}function j1(t,e,n){Iu(t)&&n.delete(e)}function DI(){Hf=!1,Es!==null&&Iu(Es)&&(Es=null),xs!==null&&Iu(xs)&&(xs=null),Ts!==null&&Iu(Ts)&&(Ts=null),Al.forEach(j1),Rl.forEach(j1)}function Pa(t,e){t.blockedOn===e&&(t.blockedOn=null,Hf||(Hf=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,DI)))}function kl(t){function e(s){return Pa(s,t)}if(0<Zc.length){Pa(Zc[0],t);for(var n=1;n<Zc.length;n++){var r=Zc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Es!==null&&Pa(Es,t),xs!==null&&Pa(xs,t),Ts!==null&&Pa(Ts,t),Al.forEach(e),Rl.forEach(e),n=0;n<us.length;n++)r=us[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<us.length&&(n=us[0],n.blockedOn===null);)Kw(n),n.blockedOn===null&&us.shift()}var No=es.ReactCurrentBatchConfig,Qu=!0;function OI(t,e,n,r){var s=Ie,i=No.transition;No.transition=null;try{Ie=1,Dp(t,e,n,r)}finally{Ie=s,No.transition=i}}function MI(t,e,n,r){var s=Ie,i=No.transition;No.transition=null;try{Ie=4,Dp(t,e,n,r)}finally{Ie=s,No.transition=i}}function Dp(t,e,n,r){if(Qu){var s=qf(t,e,n,r);if(s===null)j0(t,e,r,Yu,n),M1(t,r);else if(LI(s,t,e,n,r))r.stopPropagation();else if(M1(t,r),e&4&&-1<PI.indexOf(t)){for(;s!==null;){var i=mc(s);if(i!==null&&Ww(i),i=qf(t,e,n,r),i===null&&j0(t,e,r,Yu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else j0(t,e,r,null,n)}}var Yu=null;function qf(t,e,n,r){if(Yu=null,t=Np(r),t=ci(t),t!==null)if(e=Hi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Mw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yu=t,null}function Qw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TI()){case bp:return 1;case Uw:return 4;case Gu:case CI:return 16;case $w:return 536870912;default:return 16}default:return 16}}var _s=null,Op=null,Su=null;function Yw(){if(Su)return Su;var t,e=Op,n=e.length,r,s="value"in _s?_s.value:_s.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Su=s.slice(t,1<r?1-r:void 0)}function Au(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function eu(){return!0}function F1(){return!1}function Rn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?eu:F1,this.isPropagationStopped=F1,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=eu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=eu)},persist:function(){},isPersistent:eu}),e}var ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mp=Rn(ha),pc=Ke({},ha,{view:0,detail:0}),jI=Rn(pc),R0,k0,La,id=Ke({},pc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==La&&(La&&t.type==="mousemove"?(R0=t.screenX-La.screenX,k0=t.screenY-La.screenY):k0=R0=0,La=t),R0)},movementY:function(t){return"movementY"in t?t.movementY:k0}}),V1=Rn(id),FI=Ke({},id,{dataTransfer:0}),VI=Rn(FI),UI=Ke({},pc,{relatedTarget:0}),N0=Rn(UI),$I=Ke({},ha,{animationName:0,elapsedTime:0,pseudoElement:0}),zI=Rn($I),BI=Ke({},ha,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),WI=Rn(BI),HI=Ke({},ha,{data:0}),U1=Rn(HI),qI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=KI[t])?!!e[t]:!1}function jp(){return QI}var YI=Ke({},pc,{key:function(t){if(t.key){var e=qI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Au(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jp,charCode:function(t){return t.type==="keypress"?Au(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Au(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),XI=Rn(YI),JI=Ke({},id,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$1=Rn(JI),ZI=Ke({},pc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jp}),e6=Rn(ZI),t6=Ke({},ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),n6=Rn(t6),r6=Ke({},id,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),s6=Rn(r6),i6=[9,13,27,32],Fp=Br&&"CompositionEvent"in window,ol=null;Br&&"documentMode"in document&&(ol=document.documentMode);var o6=Br&&"TextEvent"in window&&!ol,Xw=Br&&(!Fp||ol&&8<ol&&11>=ol),z1=" ",B1=!1;function Jw(t,e){switch(t){case"keyup":return i6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ho=!1;function a6(t,e){switch(t){case"compositionend":return Zw(e);case"keypress":return e.which!==32?null:(B1=!0,z1);case"textInput":return t=e.data,t===z1&&B1?null:t;default:return null}}function l6(t,e){if(ho)return t==="compositionend"||!Fp&&Jw(t,e)?(t=Yw(),Su=Op=_s=null,ho=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xw&&e.locale!=="ko"?null:e.data;default:return null}}var c6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!c6[t.type]:e==="textarea"}function e3(t,e,n,r){bw(r),e=Xu(e,"onChange"),0<e.length&&(n=new Mp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var al=null,Nl=null;function u6(t){h3(t,0)}function od(t){var e=mo(t);if(Cw(e))return t}function h6(t,e){if(t==="change")return e}var t3=!1;if(Br){var b0;if(Br){var P0="oninput"in document;if(!P0){var H1=document.createElement("div");H1.setAttribute("oninput","return;"),P0=typeof H1.oninput=="function"}b0=P0}else b0=!1;t3=b0&&(!document.documentMode||9<document.documentMode)}function q1(){al&&(al.detachEvent("onpropertychange",n3),Nl=al=null)}function n3(t){if(t.propertyName==="value"&&od(Nl)){var e=[];e3(e,Nl,t,Np(t)),Ow(u6,e)}}function d6(t,e,n){t==="focusin"?(q1(),al=e,Nl=n,al.attachEvent("onpropertychange",n3)):t==="focusout"&&q1()}function f6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return od(Nl)}function p6(t,e){if(t==="click")return od(e)}function m6(t,e){if(t==="input"||t==="change")return od(e)}function g6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nr=typeof Object.is=="function"?Object.is:g6;function bl(t,e){if(nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Rf.call(e,s)||!nr(t[s],e[s]))return!1}return!0}function G1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function K1(t,e){var n=G1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=G1(n)}}function r3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?r3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function s3(){for(var t=window,e=Wu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wu(t.document)}return e}function Vp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _6(t){var e=s3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&r3(n.ownerDocument.documentElement,n)){if(r!==null&&Vp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=K1(n,i);var o=K1(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var v6=Br&&"documentMode"in document&&11>=document.documentMode,fo=null,Gf=null,ll=null,Kf=!1;function Q1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kf||fo==null||fo!==Wu(r)||(r=fo,"selectionStart"in r&&Vp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ll&&bl(ll,r)||(ll=r,r=Xu(Gf,"onSelect"),0<r.length&&(e=new Mp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fo)))}function tu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var po={animationend:tu("Animation","AnimationEnd"),animationiteration:tu("Animation","AnimationIteration"),animationstart:tu("Animation","AnimationStart"),transitionend:tu("Transition","TransitionEnd")},L0={},i3={};Br&&(i3=document.createElement("div").style,"AnimationEvent"in window||(delete po.animationend.animation,delete po.animationiteration.animation,delete po.animationstart.animation),"TransitionEvent"in window||delete po.transitionend.transition);function ad(t){if(L0[t])return L0[t];if(!po[t])return t;var e=po[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in i3)return L0[t]=e[n];return t}var o3=ad("animationend"),a3=ad("animationiteration"),l3=ad("animationstart"),c3=ad("transitionend"),u3=new Map,Y1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zs(t,e){u3.set(t,e),Wi(e,[t])}for(var D0=0;D0<Y1.length;D0++){var O0=Y1[D0],y6=O0.toLowerCase(),w6=O0[0].toUpperCase()+O0.slice(1);zs(y6,"on"+w6)}zs(o3,"onAnimationEnd");zs(a3,"onAnimationIteration");zs(l3,"onAnimationStart");zs("dblclick","onDoubleClick");zs("focusin","onFocus");zs("focusout","onBlur");zs(c3,"onTransitionEnd");Bo("onMouseEnter",["mouseout","mouseover"]);Bo("onMouseLeave",["mouseout","mouseover"]);Bo("onPointerEnter",["pointerout","pointerover"]);Bo("onPointerLeave",["pointerout","pointerover"]);Wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ya));function X1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,yI(r,e,void 0,t),t.currentTarget=null}function h3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;X1(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;X1(s,a,c),i=l}}}if(qu)throw t=Bf,qu=!1,Bf=null,t}function Me(t,e){var n=e[Zf];n===void 0&&(n=e[Zf]=new Set);var r=t+"__bubble";n.has(r)||(d3(e,t,2,!1),n.add(r))}function M0(t,e,n){var r=0;e&&(r|=4),d3(n,t,r,e)}var nu="_reactListening"+Math.random().toString(36).slice(2);function Pl(t){if(!t[nu]){t[nu]=!0,yw.forEach(function(n){n!=="selectionchange"&&(E6.has(n)||M0(n,!1,t),M0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nu]||(e[nu]=!0,M0("selectionchange",!1,e))}}function d3(t,e,n,r){switch(Qw(e)){case 1:var s=OI;break;case 4:s=MI;break;default:s=Dp}n=s.bind(null,e,n,t),s=void 0,!zf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function j0(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ci(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Ow(function(){var c=i,u=Np(n),h=[];e:{var d=u3.get(t);if(d!==void 0){var p=Mp,g=t;switch(t){case"keypress":if(Au(n)===0)break e;case"keydown":case"keyup":p=XI;break;case"focusin":g="focus",p=N0;break;case"focusout":g="blur",p=N0;break;case"beforeblur":case"afterblur":p=N0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=V1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=VI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=e6;break;case o3:case a3:case l3:p=zI;break;case c3:p=n6;break;case"scroll":p=jI;break;case"wheel":p=s6;break;case"copy":case"cut":case"paste":p=WI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=$1}var _=(e&4)!==0,x=!_&&t==="scroll",m=_?d!==null?d+"Capture":null:d;_=[];for(var v=c,y;v!==null;){y=v;var C=y.stateNode;if(y.tag===5&&C!==null&&(y=C,m!==null&&(C=Sl(v,m),C!=null&&_.push(Ll(v,C,y)))),x)break;v=v.return}0<_.length&&(d=new p(d,g,null,n,u),h.push({event:d,listeners:_}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&n!==Uf&&(g=n.relatedTarget||n.fromElement)&&(ci(g)||g[Wr]))break e;if((p||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?ci(g):null,g!==null&&(x=Hi(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(_=V1,C="onMouseLeave",m="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(_=$1,C="onPointerLeave",m="onPointerEnter",v="pointer"),x=p==null?d:mo(p),y=g==null?d:mo(g),d=new _(C,v+"leave",p,n,u),d.target=x,d.relatedTarget=y,C=null,ci(u)===c&&(_=new _(m,v+"enter",g,n,u),_.target=y,_.relatedTarget=x,C=_),x=C,p&&g)t:{for(_=p,m=g,v=0,y=_;y;y=ro(y))v++;for(y=0,C=m;C;C=ro(C))y++;for(;0<v-y;)_=ro(_),v--;for(;0<y-v;)m=ro(m),y--;for(;v--;){if(_===m||m!==null&&_===m.alternate)break t;_=ro(_),m=ro(m)}_=null}else _=null;p!==null&&J1(h,d,p,_,!1),g!==null&&x!==null&&J1(h,x,g,_,!0)}}e:{if(d=c?mo(c):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var N=h6;else if(W1(d))if(t3)N=m6;else{N=f6;var E=d6}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(N=p6);if(N&&(N=N(t,c))){e3(h,N,n,u);break e}E&&E(t,d,c),t==="focusout"&&(E=d._wrapperState)&&E.controlled&&d.type==="number"&&Of(d,"number",d.value)}switch(E=c?mo(c):window,t){case"focusin":(W1(E)||E.contentEditable==="true")&&(fo=E,Gf=c,ll=null);break;case"focusout":ll=Gf=fo=null;break;case"mousedown":Kf=!0;break;case"contextmenu":case"mouseup":case"dragend":Kf=!1,Q1(h,n,u);break;case"selectionchange":if(v6)break;case"keydown":case"keyup":Q1(h,n,u)}var k;if(Fp)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ho?Jw(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Xw&&n.locale!=="ko"&&(ho||T!=="onCompositionStart"?T==="onCompositionEnd"&&ho&&(k=Yw()):(_s=u,Op="value"in _s?_s.value:_s.textContent,ho=!0)),E=Xu(c,T),0<E.length&&(T=new U1(T,t,null,n,u),h.push({event:T,listeners:E}),k?T.data=k:(k=Zw(n),k!==null&&(T.data=k)))),(k=o6?a6(t,n):l6(t,n))&&(c=Xu(c,"onBeforeInput"),0<c.length&&(u=new U1("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=k))}h3(h,e)})}function Ll(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Sl(t,n),i!=null&&r.unshift(Ll(t,i,s)),i=Sl(t,e),i!=null&&r.push(Ll(t,i,s))),t=t.return}return r}function ro(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function J1(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Sl(n,i),l!=null&&o.unshift(Ll(n,l,a))):s||(l=Sl(n,i),l!=null&&o.push(Ll(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var x6=/\r\n?/g,T6=/\u0000|\uFFFD/g;function Z1(t){return(typeof t=="string"?t:""+t).replace(x6,`
`).replace(T6,"")}function ru(t,e,n){if(e=Z1(e),Z1(t)!==e&&n)throw Error(W(425))}function Ju(){}var Qf=null,Yf=null;function Xf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jf=typeof setTimeout=="function"?setTimeout:void 0,C6=typeof clearTimeout=="function"?clearTimeout:void 0,e_=typeof Promise=="function"?Promise:void 0,I6=typeof queueMicrotask=="function"?queueMicrotask:typeof e_<"u"?function(t){return e_.resolve(null).then(t).catch(S6)}:Jf;function S6(t){setTimeout(function(){throw t})}function F0(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),kl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);kl(e)}function Cs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function t_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var da=Math.random().toString(36).slice(2),ur="__reactFiber$"+da,Dl="__reactProps$"+da,Wr="__reactContainer$"+da,Zf="__reactEvents$"+da,A6="__reactListeners$"+da,R6="__reactHandles$"+da;function ci(t){var e=t[ur];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wr]||n[ur]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=t_(t);t!==null;){if(n=t[ur])return n;t=t_(t)}return e}t=n,n=t.parentNode}return null}function mc(t){return t=t[ur]||t[Wr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function mo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function ld(t){return t[Dl]||null}var e2=[],go=-1;function Bs(t){return{current:t}}function Ue(t){0>go||(t.current=e2[go],e2[go]=null,go--)}function Pe(t,e){go++,e2[go]=t.current,t.current=e}var Ms={},Ht=Bs(Ms),ln=Bs(!1),Ai=Ms;function Wo(t,e){var n=t.type.contextTypes;if(!n)return Ms;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function cn(t){return t=t.childContextTypes,t!=null}function Zu(){Ue(ln),Ue(Ht)}function n_(t,e,n){if(Ht.current!==Ms)throw Error(W(168));Pe(Ht,e),Pe(ln,n)}function f3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(W(108,dI(t)||"Unknown",s));return Ke({},n,r)}function eh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ms,Ai=Ht.current,Pe(Ht,t),Pe(ln,ln.current),!0}function r_(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=f3(t,e,Ai),r.__reactInternalMemoizedMergedChildContext=t,Ue(ln),Ue(Ht),Pe(Ht,t)):Ue(ln),Pe(ln,n)}var Lr=null,cd=!1,V0=!1;function p3(t){Lr===null?Lr=[t]:Lr.push(t)}function k6(t){cd=!0,p3(t)}function Ws(){if(!V0&&Lr!==null){V0=!0;var t=0,e=Ie;try{var n=Lr;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Lr=null,cd=!1}catch(s){throw Lr!==null&&(Lr=Lr.slice(t+1)),Vw(bp,Ws),s}finally{Ie=e,V0=!1}}return null}var _o=[],vo=0,th=null,nh=0,Ln=[],Dn=0,Ri=null,Or=1,Mr="";function si(t,e){_o[vo++]=nh,_o[vo++]=th,th=t,nh=e}function m3(t,e,n){Ln[Dn++]=Or,Ln[Dn++]=Mr,Ln[Dn++]=Ri,Ri=t;var r=Or;t=Mr;var s=32-Zn(r)-1;r&=~(1<<s),n+=1;var i=32-Zn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Or=1<<32-Zn(e)+s|n<<s|r,Mr=i+t}else Or=1<<i|n<<s|r,Mr=t}function Up(t){t.return!==null&&(si(t,1),m3(t,1,0))}function $p(t){for(;t===th;)th=_o[--vo],_o[vo]=null,nh=_o[--vo],_o[vo]=null;for(;t===Ri;)Ri=Ln[--Dn],Ln[Dn]=null,Mr=Ln[--Dn],Ln[Dn]=null,Or=Ln[--Dn],Ln[Dn]=null}var yn=null,mn=null,He=!1,Yn=null;function g3(t,e){var n=Mn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function s_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yn=t,mn=Cs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yn=t,mn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ri!==null?{id:Or,overflow:Mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,yn=t,mn=null,!0):!1;default:return!1}}function t2(t){return(t.mode&1)!==0&&(t.flags&128)===0}function n2(t){if(He){var e=mn;if(e){var n=e;if(!s_(t,e)){if(t2(t))throw Error(W(418));e=Cs(n.nextSibling);var r=yn;e&&s_(t,e)?g3(r,n):(t.flags=t.flags&-4097|2,He=!1,yn=t)}}else{if(t2(t))throw Error(W(418));t.flags=t.flags&-4097|2,He=!1,yn=t}}}function i_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yn=t}function su(t){if(t!==yn)return!1;if(!He)return i_(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xf(t.type,t.memoizedProps)),e&&(e=mn)){if(t2(t))throw _3(),Error(W(418));for(;e;)g3(t,e),e=Cs(e.nextSibling)}if(i_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){mn=Cs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}mn=null}}else mn=yn?Cs(t.stateNode.nextSibling):null;return!0}function _3(){for(var t=mn;t;)t=Cs(t.nextSibling)}function Ho(){mn=yn=null,He=!1}function zp(t){Yn===null?Yn=[t]:Yn.push(t)}var N6=es.ReactCurrentBatchConfig;function Kn(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var rh=Bs(null),sh=null,yo=null,Bp=null;function Wp(){Bp=yo=sh=null}function Hp(t){var e=rh.current;Ue(rh),t._currentValue=e}function r2(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function bo(t,e){sh=t,Bp=yo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(on=!0),t.firstContext=null)}function $n(t){var e=t._currentValue;if(Bp!==t)if(t={context:t,memoizedValue:e,next:null},yo===null){if(sh===null)throw Error(W(308));yo=t,sh.dependencies={lanes:0,firstContext:t}}else yo=yo.next=t;return e}var ui=null;function qp(t){ui===null?ui=[t]:ui.push(t)}function v3(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,qp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hr(t,r)}function Hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var cs=!1;function Gp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function y3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $r(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Is(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Hr(t,n)}return s=r.interleaved,s===null?(e.next=e,qp(r)):(e.next=s.next,s.next=e),r.interleaved=e,Hr(t,n)}function Ru(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pp(t,n)}}function o_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ih(t,e,n,r){var s=t.updateQueue;cs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,u=c=l=null,a=i;do{var d=a.lane,p=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,_=a;switch(d=e,p=n,_.tag){case 1:if(g=_.payload,typeof g=="function"){h=g.call(p,h,d);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=_.payload,d=typeof g=="function"?g.call(p,h,d):g,d==null)break e;h=Ke({},h,d);break e;case 2:cs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ni|=o,t.lanes=o,t.memoizedState=h}}function a_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var w3=new vw.Component().refs;function s2(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ud={isMounted:function(t){return(t=t._reactInternals)?Hi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Zt(),s=As(t),i=$r(r,s);i.payload=e,n!=null&&(i.callback=n),e=Is(t,i,s),e!==null&&(er(e,t,s,r),Ru(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Zt(),s=As(t),i=$r(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Is(t,i,s),e!==null&&(er(e,t,s,r),Ru(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Zt(),r=As(t),s=$r(n,r);s.tag=2,e!=null&&(s.callback=e),e=Is(t,s,r),e!==null&&(er(e,t,r,n),Ru(e,t,r))}};function l_(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!bl(n,r)||!bl(s,i):!0}function E3(t,e,n){var r=!1,s=Ms,i=e.contextType;return typeof i=="object"&&i!==null?i=$n(i):(s=cn(e)?Ai:Ht.current,r=e.contextTypes,i=(r=r!=null)?Wo(t,s):Ms),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ud,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function c_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ud.enqueueReplaceState(e,e.state,null)}function i2(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=w3,Gp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=$n(i):(i=cn(e)?Ai:Ht.current,s.context=Wo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(s2(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ud.enqueueReplaceState(s,s.state,null),ih(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Da(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===w3&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function iu(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function u_(t){var e=t._init;return e(t._payload)}function x3(t){function e(m,v){if(t){var y=m.deletions;y===null?(m.deletions=[v],m.flags|=16):y.push(v)}}function n(m,v){if(!t)return null;for(;v!==null;)e(m,v),v=v.sibling;return null}function r(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function s(m,v){return m=Rs(m,v),m.index=0,m.sibling=null,m}function i(m,v,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<v?(m.flags|=2,v):y):(m.flags|=2,v)):(m.flags|=1048576,v)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,v,y,C){return v===null||v.tag!==6?(v=q0(y,m.mode,C),v.return=m,v):(v=s(v,y),v.return=m,v)}function l(m,v,y,C){var N=y.type;return N===uo?u(m,v,y.props.children,C,y.key):v!==null&&(v.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ls&&u_(N)===v.type)?(C=s(v,y.props),C.ref=Da(m,v,y),C.return=m,C):(C=Du(y.type,y.key,y.props,null,m.mode,C),C.ref=Da(m,v,y),C.return=m,C)}function c(m,v,y,C){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=G0(y,m.mode,C),v.return=m,v):(v=s(v,y.children||[]),v.return=m,v)}function u(m,v,y,C,N){return v===null||v.tag!==7?(v=xi(y,m.mode,C,N),v.return=m,v):(v=s(v,y),v.return=m,v)}function h(m,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=q0(""+v,m.mode,y),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Kc:return y=Du(v.type,v.key,v.props,null,m.mode,y),y.ref=Da(m,null,v),y.return=m,y;case co:return v=G0(v,m.mode,y),v.return=m,v;case ls:var C=v._init;return h(m,C(v._payload),y)}if(Ka(v)||ka(v))return v=xi(v,m.mode,y,null),v.return=m,v;iu(m,v)}return null}function d(m,v,y,C){var N=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return N!==null?null:a(m,v,""+y,C);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Kc:return y.key===N?l(m,v,y,C):null;case co:return y.key===N?c(m,v,y,C):null;case ls:return N=y._init,d(m,v,N(y._payload),C)}if(Ka(y)||ka(y))return N!==null?null:u(m,v,y,C,null);iu(m,y)}return null}function p(m,v,y,C,N){if(typeof C=="string"&&C!==""||typeof C=="number")return m=m.get(y)||null,a(v,m,""+C,N);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Kc:return m=m.get(C.key===null?y:C.key)||null,l(v,m,C,N);case co:return m=m.get(C.key===null?y:C.key)||null,c(v,m,C,N);case ls:var E=C._init;return p(m,v,y,E(C._payload),N)}if(Ka(C)||ka(C))return m=m.get(y)||null,u(v,m,C,N,null);iu(v,C)}return null}function g(m,v,y,C){for(var N=null,E=null,k=v,T=v=0,w=null;k!==null&&T<y.length;T++){k.index>T?(w=k,k=null):w=k.sibling;var A=d(m,k,y[T],C);if(A===null){k===null&&(k=w);break}t&&k&&A.alternate===null&&e(m,k),v=i(A,v,T),E===null?N=A:E.sibling=A,E=A,k=w}if(T===y.length)return n(m,k),He&&si(m,T),N;if(k===null){for(;T<y.length;T++)k=h(m,y[T],C),k!==null&&(v=i(k,v,T),E===null?N=k:E.sibling=k,E=k);return He&&si(m,T),N}for(k=r(m,k);T<y.length;T++)w=p(k,m,T,y[T],C),w!==null&&(t&&w.alternate!==null&&k.delete(w.key===null?T:w.key),v=i(w,v,T),E===null?N=w:E.sibling=w,E=w);return t&&k.forEach(function(P){return e(m,P)}),He&&si(m,T),N}function _(m,v,y,C){var N=ka(y);if(typeof N!="function")throw Error(W(150));if(y=N.call(y),y==null)throw Error(W(151));for(var E=N=null,k=v,T=v=0,w=null,A=y.next();k!==null&&!A.done;T++,A=y.next()){k.index>T?(w=k,k=null):w=k.sibling;var P=d(m,k,A.value,C);if(P===null){k===null&&(k=w);break}t&&k&&P.alternate===null&&e(m,k),v=i(P,v,T),E===null?N=P:E.sibling=P,E=P,k=w}if(A.done)return n(m,k),He&&si(m,T),N;if(k===null){for(;!A.done;T++,A=y.next())A=h(m,A.value,C),A!==null&&(v=i(A,v,T),E===null?N=A:E.sibling=A,E=A);return He&&si(m,T),N}for(k=r(m,k);!A.done;T++,A=y.next())A=p(k,m,T,A.value,C),A!==null&&(t&&A.alternate!==null&&k.delete(A.key===null?T:A.key),v=i(A,v,T),E===null?N=A:E.sibling=A,E=A);return t&&k.forEach(function(b){return e(m,b)}),He&&si(m,T),N}function x(m,v,y,C){if(typeof y=="object"&&y!==null&&y.type===uo&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Kc:e:{for(var N=y.key,E=v;E!==null;){if(E.key===N){if(N=y.type,N===uo){if(E.tag===7){n(m,E.sibling),v=s(E,y.props.children),v.return=m,m=v;break e}}else if(E.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ls&&u_(N)===E.type){n(m,E.sibling),v=s(E,y.props),v.ref=Da(m,E,y),v.return=m,m=v;break e}n(m,E);break}else e(m,E);E=E.sibling}y.type===uo?(v=xi(y.props.children,m.mode,C,y.key),v.return=m,m=v):(C=Du(y.type,y.key,y.props,null,m.mode,C),C.ref=Da(m,v,y),C.return=m,m=C)}return o(m);case co:e:{for(E=y.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){n(m,v.sibling),v=s(v,y.children||[]),v.return=m,m=v;break e}else{n(m,v);break}else e(m,v);v=v.sibling}v=G0(y,m.mode,C),v.return=m,m=v}return o(m);case ls:return E=y._init,x(m,v,E(y._payload),C)}if(Ka(y))return g(m,v,y,C);if(ka(y))return _(m,v,y,C);iu(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(n(m,v.sibling),v=s(v,y),v.return=m,m=v):(n(m,v),v=q0(y,m.mode,C),v.return=m,m=v),o(m)):n(m,v)}return x}var qo=x3(!0),T3=x3(!1),gc={},_r=Bs(gc),Ol=Bs(gc),Ml=Bs(gc);function hi(t){if(t===gc)throw Error(W(174));return t}function Kp(t,e){switch(Pe(Ml,e),Pe(Ol,t),Pe(_r,gc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jf(e,t)}Ue(_r),Pe(_r,e)}function Go(){Ue(_r),Ue(Ol),Ue(Ml)}function C3(t){hi(Ml.current);var e=hi(_r.current),n=jf(e,t.type);e!==n&&(Pe(Ol,t),Pe(_r,n))}function Qp(t){Ol.current===t&&(Ue(_r),Ue(Ol))}var qe=Bs(0);function oh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var U0=[];function Yp(){for(var t=0;t<U0.length;t++)U0[t]._workInProgressVersionPrimary=null;U0.length=0}var ku=es.ReactCurrentDispatcher,$0=es.ReactCurrentBatchConfig,ki=0,Ge=null,ct=null,mt=null,ah=!1,cl=!1,jl=0,b6=0;function Lt(){throw Error(W(321))}function Xp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nr(t[n],e[n]))return!1;return!0}function Jp(t,e,n,r,s,i){if(ki=i,Ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ku.current=t===null||t.memoizedState===null?O6:M6,t=n(r,s),cl){i=0;do{if(cl=!1,jl=0,25<=i)throw Error(W(301));i+=1,mt=ct=null,e.updateQueue=null,ku.current=j6,t=n(r,s)}while(cl)}if(ku.current=lh,e=ct!==null&&ct.next!==null,ki=0,mt=ct=Ge=null,ah=!1,e)throw Error(W(300));return t}function Zp(){var t=jl!==0;return jl=0,t}function lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Ge.memoizedState=mt=t:mt=mt.next=t,mt}function zn(){if(ct===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=mt===null?Ge.memoizedState:mt.next;if(e!==null)mt=e,ct=t;else{if(t===null)throw Error(W(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},mt===null?Ge.memoizedState=mt=t:mt=mt.next=t}return mt}function Fl(t,e){return typeof e=="function"?e(t):e}function z0(t){var e=zn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=ct,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((ki&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Ge.lanes|=u,Ni|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,nr(r,e.memoizedState)||(on=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ge.lanes|=i,Ni|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function B0(t){var e=zn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);nr(i,e.memoizedState)||(on=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function I3(){}function S3(t,e){var n=Ge,r=zn(),s=e(),i=!nr(r.memoizedState,s);if(i&&(r.memoizedState=s,on=!0),r=r.queue,em(k3.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,Vl(9,R3.bind(null,n,r,s,e),void 0,null),vt===null)throw Error(W(349));ki&30||A3(n,e,s)}return s}function A3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function R3(t,e,n,r){e.value=n,e.getSnapshot=r,N3(e)&&b3(t)}function k3(t,e,n){return n(function(){N3(e)&&b3(t)})}function N3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nr(t,n)}catch{return!0}}function b3(t){var e=Hr(t,1);e!==null&&er(e,t,1,-1)}function h_(t){var e=lr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fl,lastRenderedState:t},e.queue=t,t=t.dispatch=D6.bind(null,Ge,t),[e.memoizedState,t]}function Vl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function P3(){return zn().memoizedState}function Nu(t,e,n,r){var s=lr();Ge.flags|=t,s.memoizedState=Vl(1|e,n,void 0,r===void 0?null:r)}function hd(t,e,n,r){var s=zn();r=r===void 0?null:r;var i=void 0;if(ct!==null){var o=ct.memoizedState;if(i=o.destroy,r!==null&&Xp(r,o.deps)){s.memoizedState=Vl(e,n,i,r);return}}Ge.flags|=t,s.memoizedState=Vl(1|e,n,i,r)}function d_(t,e){return Nu(8390656,8,t,e)}function em(t,e){return hd(2048,8,t,e)}function L3(t,e){return hd(4,2,t,e)}function D3(t,e){return hd(4,4,t,e)}function O3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function M3(t,e,n){return n=n!=null?n.concat([t]):null,hd(4,4,O3.bind(null,e,t),n)}function tm(){}function j3(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function F3(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function V3(t,e,n){return ki&21?(nr(n,e)||(n=zw(),Ge.lanes|=n,Ni|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,on=!0),t.memoizedState=n)}function P6(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=$0.transition;$0.transition={};try{t(!1),e()}finally{Ie=n,$0.transition=r}}function U3(){return zn().memoizedState}function L6(t,e,n){var r=As(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$3(t))z3(e,n);else if(n=v3(t,e,n,r),n!==null){var s=Zt();er(n,t,r,s),B3(n,e,r)}}function D6(t,e,n){var r=As(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($3(t))z3(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,nr(a,o)){var l=e.interleaved;l===null?(s.next=s,qp(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=v3(t,e,s,r),n!==null&&(s=Zt(),er(n,t,r,s),B3(n,e,r))}}function $3(t){var e=t.alternate;return t===Ge||e!==null&&e===Ge}function z3(t,e){cl=ah=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function B3(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pp(t,n)}}var lh={readContext:$n,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},O6={readContext:$n,useCallback:function(t,e){return lr().memoizedState=[t,e===void 0?null:e],t},useContext:$n,useEffect:d_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Nu(4194308,4,O3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Nu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Nu(4,2,t,e)},useMemo:function(t,e){var n=lr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=lr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=L6.bind(null,Ge,t),[r.memoizedState,t]},useRef:function(t){var e=lr();return t={current:t},e.memoizedState=t},useState:h_,useDebugValue:tm,useDeferredValue:function(t){return lr().memoizedState=t},useTransition:function(){var t=h_(!1),e=t[0];return t=P6.bind(null,t[1]),lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ge,s=lr();if(He){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),vt===null)throw Error(W(349));ki&30||A3(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,d_(k3.bind(null,r,i,t),[t]),r.flags|=2048,Vl(9,R3.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=lr(),e=vt.identifierPrefix;if(He){var n=Mr,r=Or;n=(r&~(1<<32-Zn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=jl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=b6++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},M6={readContext:$n,useCallback:j3,useContext:$n,useEffect:em,useImperativeHandle:M3,useInsertionEffect:L3,useLayoutEffect:D3,useMemo:F3,useReducer:z0,useRef:P3,useState:function(){return z0(Fl)},useDebugValue:tm,useDeferredValue:function(t){var e=zn();return V3(e,ct.memoizedState,t)},useTransition:function(){var t=z0(Fl)[0],e=zn().memoizedState;return[t,e]},useMutableSource:I3,useSyncExternalStore:S3,useId:U3,unstable_isNewReconciler:!1},j6={readContext:$n,useCallback:j3,useContext:$n,useEffect:em,useImperativeHandle:M3,useInsertionEffect:L3,useLayoutEffect:D3,useMemo:F3,useReducer:B0,useRef:P3,useState:function(){return B0(Fl)},useDebugValue:tm,useDeferredValue:function(t){var e=zn();return ct===null?e.memoizedState=t:V3(e,ct.memoizedState,t)},useTransition:function(){var t=B0(Fl)[0],e=zn().memoizedState;return[t,e]},useMutableSource:I3,useSyncExternalStore:S3,useId:U3,unstable_isNewReconciler:!1};function Ko(t,e){try{var n="",r=e;do n+=hI(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function W0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function o2(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var F6=typeof WeakMap=="function"?WeakMap:Map;function W3(t,e,n){n=$r(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){uh||(uh=!0,g2=r),o2(t,e)},n}function H3(t,e,n){n=$r(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){o2(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){o2(t,e),typeof r!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function f_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new F6;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=J6.bind(null,t,e,n),e.then(t,t))}function p_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function m_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$r(-1,1),e.tag=2,Is(n,e,1))),n.lanes|=1),t)}var V6=es.ReactCurrentOwner,on=!1;function Xt(t,e,n,r){e.child=t===null?T3(e,null,n,r):qo(e,t.child,n,r)}function g_(t,e,n,r,s){n=n.render;var i=e.ref;return bo(e,s),r=Jp(t,e,n,r,i,s),n=Zp(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qr(t,e,s)):(He&&n&&Up(e),e.flags|=1,Xt(t,e,r,s),e.child)}function __(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!cm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,q3(t,e,i,r,s)):(t=Du(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:bl,n(o,r)&&t.ref===e.ref)return qr(t,e,s)}return e.flags|=1,t=Rs(i,r),t.ref=e.ref,t.return=e,e.child=t}function q3(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(bl(i,r)&&t.ref===e.ref)if(on=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(on=!0);else return e.lanes=t.lanes,qr(t,e,s)}return a2(t,e,n,r,s)}function G3(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Eo,pn),pn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(Eo,pn),pn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Pe(Eo,pn),pn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Pe(Eo,pn),pn|=r;return Xt(t,e,s,n),e.child}function K3(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function a2(t,e,n,r,s){var i=cn(n)?Ai:Ht.current;return i=Wo(e,i),bo(e,s),n=Jp(t,e,n,r,i,s),r=Zp(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qr(t,e,s)):(He&&r&&Up(e),e.flags|=1,Xt(t,e,n,s),e.child)}function v_(t,e,n,r,s){if(cn(n)){var i=!0;eh(e)}else i=!1;if(bo(e,s),e.stateNode===null)bu(t,e),E3(e,n,r),i2(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=$n(c):(c=cn(n)?Ai:Ht.current,c=Wo(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&c_(e,o,r,c),cs=!1;var d=e.memoizedState;o.state=d,ih(e,r,o,s),l=e.memoizedState,a!==r||d!==l||ln.current||cs?(typeof u=="function"&&(s2(e,n,u,r),l=e.memoizedState),(a=cs||l_(e,n,a,r,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,y3(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Kn(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=$n(l):(l=cn(n)?Ai:Ht.current,l=Wo(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&c_(e,o,r,l),cs=!1,d=e.memoizedState,o.state=d,ih(e,r,o,s);var g=e.memoizedState;a!==h||d!==g||ln.current||cs?(typeof p=="function"&&(s2(e,n,p,r),g=e.memoizedState),(c=cs||l_(e,n,c,r,d,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return l2(t,e,n,r,i,s)}function l2(t,e,n,r,s,i){K3(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&r_(e,n,!1),qr(t,e,i);r=e.stateNode,V6.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=qo(e,t.child,null,i),e.child=qo(e,null,a,i)):Xt(t,e,a,i),e.memoizedState=r.state,s&&r_(e,n,!0),e.child}function Q3(t){var e=t.stateNode;e.pendingContext?n_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&n_(t,e.context,!1),Kp(t,e.containerInfo)}function y_(t,e,n,r,s){return Ho(),zp(s),e.flags|=256,Xt(t,e,n,r),e.child}var c2={dehydrated:null,treeContext:null,retryLane:0};function u2(t){return{baseLanes:t,cachePool:null,transitions:null}}function Y3(t,e,n){var r=e.pendingProps,s=qe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Pe(qe,s&1),t===null)return n2(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=pd(o,r,0,null),t=xi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=u2(n),e.memoizedState=c2,t):nm(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return U6(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Rs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Rs(a,i):(i=xi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?u2(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=c2,r}return i=t.child,t=i.sibling,r=Rs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function nm(t,e){return e=pd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ou(t,e,n,r){return r!==null&&zp(r),qo(e,t.child,null,n),t=nm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function U6(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=W0(Error(W(422))),ou(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=pd({mode:"visible",children:r.children},s,0,null),i=xi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&qo(e,t.child,null,o),e.child.memoizedState=u2(o),e.memoizedState=c2,i);if(!(e.mode&1))return ou(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(W(419)),r=W0(i,r,void 0),ou(t,e,o,r)}if(a=(o&t.childLanes)!==0,on||a){if(r=vt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Hr(t,s),er(r,t,s,-1))}return lm(),r=W0(Error(W(421))),ou(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Z6.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,mn=Cs(s.nextSibling),yn=e,He=!0,Yn=null,t!==null&&(Ln[Dn++]=Or,Ln[Dn++]=Mr,Ln[Dn++]=Ri,Or=t.id,Mr=t.overflow,Ri=e),e=nm(e,r.children),e.flags|=4096,e)}function w_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),r2(t.return,e,n)}function H0(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function X3(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Xt(t,e,r.children,n),r=qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&w_(t,n,e);else if(t.tag===19)w_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pe(qe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&oh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),H0(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&oh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}H0(e,!0,n,null,i);break;case"together":H0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ni|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Rs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function $6(t,e,n){switch(e.tag){case 3:Q3(e),Ho();break;case 5:C3(e);break;case 1:cn(e.type)&&eh(e);break;case 4:Kp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Pe(rh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pe(qe,qe.current&1),e.flags|=128,null):n&e.child.childLanes?Y3(t,e,n):(Pe(qe,qe.current&1),t=qr(t,e,n),t!==null?t.sibling:null);Pe(qe,qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return X3(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Pe(qe,qe.current),r)break;return null;case 22:case 23:return e.lanes=0,G3(t,e,n)}return qr(t,e,n)}var J3,h2,Z3,e5;J3=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};h2=function(){};Z3=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,hi(_r.current);var i=null;switch(n){case"input":s=Lf(t,s),r=Lf(t,r),i=[];break;case"select":s=Ke({},s,{value:void 0}),r=Ke({},r,{value:void 0}),i=[];break;case"textarea":s=Mf(t,s),r=Mf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ju)}Ff(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Cl.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Cl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Me("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};e5=function(t,e,n,r){n!==r&&(e.flags|=4)};function Oa(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function z6(t,e,n){var r=e.pendingProps;switch($p(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return cn(e.type)&&Zu(),Dt(e),null;case 3:return r=e.stateNode,Go(),Ue(ln),Ue(Ht),Yp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(su(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yn!==null&&(y2(Yn),Yn=null))),h2(t,e),Dt(e),null;case 5:Qp(e);var s=hi(Ml.current);if(n=e.type,t!==null&&e.stateNode!=null)Z3(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Dt(e),null}if(t=hi(_r.current),su(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ur]=e,r[Dl]=i,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(s=0;s<Ya.length;s++)Me(Ya[s],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":k1(r,i),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Me("invalid",r);break;case"textarea":b1(r,i),Me("invalid",r)}Ff(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ru(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ru(r.textContent,a,t),s=["children",""+a]):Cl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Me("scroll",r)}switch(n){case"input":Qc(r),N1(r,i,!0);break;case"textarea":Qc(r),P1(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ju)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Aw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ur]=e,t[Dl]=r,J3(t,e,!1,!1),e.stateNode=t;e:{switch(o=Vf(n,r),n){case"dialog":Me("cancel",t),Me("close",t),s=r;break;case"iframe":case"object":case"embed":Me("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ya.length;s++)Me(Ya[s],t);s=r;break;case"source":Me("error",t),s=r;break;case"img":case"image":case"link":Me("error",t),Me("load",t),s=r;break;case"details":Me("toggle",t),s=r;break;case"input":k1(t,r),s=Lf(t,r),Me("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ke({},r,{value:void 0}),Me("invalid",t);break;case"textarea":b1(t,r),s=Mf(t,r),Me("invalid",t);break;default:s=r}Ff(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Nw(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Rw(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Il(t,l):typeof l=="number"&&Il(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Cl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Me("scroll",t):l!=null&&Sp(t,i,l,o))}switch(n){case"input":Qc(t),N1(t,r,!1);break;case"textarea":Qc(t),P1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Os(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ao(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ao(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ju)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)e5(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=hi(Ml.current),hi(_r.current),su(e)){if(r=e.stateNode,n=e.memoizedProps,r[ur]=e,(i=r.nodeValue!==n)&&(t=yn,t!==null))switch(t.tag){case 3:ru(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ru(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ur]=e,e.stateNode=r}return Dt(e),null;case 13:if(Ue(qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&mn!==null&&e.mode&1&&!(e.flags&128))_3(),Ho(),e.flags|=98560,i=!1;else if(i=su(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[ur]=e}else Ho(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),i=!1}else Yn!==null&&(y2(Yn),Yn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||qe.current&1?ut===0&&(ut=3):lm())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return Go(),h2(t,e),t===null&&Pl(e.stateNode.containerInfo),Dt(e),null;case 10:return Hp(e.type._context),Dt(e),null;case 17:return cn(e.type)&&Zu(),Dt(e),null;case 19:if(Ue(qe),i=e.memoizedState,i===null)return Dt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Oa(i,!1);else{if(ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=oh(t),o!==null){for(e.flags|=128,Oa(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pe(qe,qe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ze()>Qo&&(e.flags|=128,r=!0,Oa(i,!1),e.lanes=4194304)}else{if(!r)if(t=oh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Oa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!He)return Dt(e),null}else 2*Ze()-i.renderingStartTime>Qo&&n!==1073741824&&(e.flags|=128,r=!0,Oa(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ze(),e.sibling=null,n=qe.current,Pe(qe,r?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return am(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?pn&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function B6(t,e){switch($p(e),e.tag){case 1:return cn(e.type)&&Zu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Go(),Ue(ln),Ue(Ht),Yp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qp(e),null;case 13:if(Ue(qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Ho()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ue(qe),null;case 4:return Go(),null;case 10:return Hp(e.type._context),null;case 22:case 23:return am(),null;case 24:return null;default:return null}}var au=!1,jt=!1,W6=typeof WeakSet=="function"?WeakSet:Set,J=null;function wo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qe(t,e,r)}else n.current=null}function d2(t,e,n){try{n()}catch(r){Qe(t,e,r)}}var E_=!1;function H6(t,e){if(Qf=Qu,t=s3(),Vp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,d=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)d=h,h=p;for(;;){if(h===t)break t;if(d===n&&++c===s&&(a=o),d===i&&++u===r&&(l=o),(p=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yf={focusedElem:t,selectionRange:n},Qu=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var _=g.memoizedProps,x=g.memoizedState,m=e.stateNode,v=m.getSnapshotBeforeUpdate(e.elementType===e.type?_:Kn(e.type,_),x);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(C){Qe(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return g=E_,E_=!1,g}function ul(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&d2(e,n,i)}s=s.next}while(s!==r)}}function dd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function f2(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function t5(t){var e=t.alternate;e!==null&&(t.alternate=null,t5(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ur],delete e[Dl],delete e[Zf],delete e[A6],delete e[R6])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function n5(t){return t.tag===5||t.tag===3||t.tag===4}function x_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||n5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function p2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ju));else if(r!==4&&(t=t.child,t!==null))for(p2(t,e,n),t=t.sibling;t!==null;)p2(t,e,n),t=t.sibling}function m2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(m2(t,e,n),t=t.sibling;t!==null;)m2(t,e,n),t=t.sibling}var xt=null,Qn=!1;function os(t,e,n){for(n=n.child;n!==null;)r5(t,e,n),n=n.sibling}function r5(t,e,n){if(gr&&typeof gr.onCommitFiberUnmount=="function")try{gr.onCommitFiberUnmount(sd,n)}catch{}switch(n.tag){case 5:jt||wo(n,e);case 6:var r=xt,s=Qn;xt=null,os(t,e,n),xt=r,Qn=s,xt!==null&&(Qn?(t=xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xt.removeChild(n.stateNode));break;case 18:xt!==null&&(Qn?(t=xt,n=n.stateNode,t.nodeType===8?F0(t.parentNode,n):t.nodeType===1&&F0(t,n),kl(t)):F0(xt,n.stateNode));break;case 4:r=xt,s=Qn,xt=n.stateNode.containerInfo,Qn=!0,os(t,e,n),xt=r,Qn=s;break;case 0:case 11:case 14:case 15:if(!jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&d2(n,e,o),s=s.next}while(s!==r)}os(t,e,n);break;case 1:if(!jt&&(wo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Qe(n,e,a)}os(t,e,n);break;case 21:os(t,e,n);break;case 22:n.mode&1?(jt=(r=jt)||n.memoizedState!==null,os(t,e,n),jt=r):os(t,e,n);break;default:os(t,e,n)}}function T_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new W6),e.forEach(function(r){var s=e9.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:xt=a.stateNode,Qn=!1;break e;case 3:xt=a.stateNode.containerInfo,Qn=!0;break e;case 4:xt=a.stateNode.containerInfo,Qn=!0;break e}a=a.return}if(xt===null)throw Error(W(160));r5(i,o,s),xt=null,Qn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Qe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)s5(e,t),e=e.sibling}function s5(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(e,t),ar(t),r&4){try{ul(3,t,t.return),dd(3,t)}catch(_){Qe(t,t.return,_)}try{ul(5,t,t.return)}catch(_){Qe(t,t.return,_)}}break;case 1:qn(e,t),ar(t),r&512&&n!==null&&wo(n,n.return);break;case 5:if(qn(e,t),ar(t),r&512&&n!==null&&wo(n,n.return),t.flags&32){var s=t.stateNode;try{Il(s,"")}catch(_){Qe(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Iw(s,i),Vf(a,o);var c=Vf(a,i);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?Nw(s,h):u==="dangerouslySetInnerHTML"?Rw(s,h):u==="children"?Il(s,h):Sp(s,u,h,c)}switch(a){case"input":Df(s,i);break;case"textarea":Sw(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Ao(s,!!i.multiple,p,!1):d!==!!i.multiple&&(i.defaultValue!=null?Ao(s,!!i.multiple,i.defaultValue,!0):Ao(s,!!i.multiple,i.multiple?[]:"",!1))}s[Dl]=i}catch(_){Qe(t,t.return,_)}}break;case 6:if(qn(e,t),ar(t),r&4){if(t.stateNode===null)throw Error(W(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){Qe(t,t.return,_)}}break;case 3:if(qn(e,t),ar(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{kl(e.containerInfo)}catch(_){Qe(t,t.return,_)}break;case 4:qn(e,t),ar(t);break;case 13:qn(e,t),ar(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(im=Ze())),r&4&&T_(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(jt=(c=jt)||u,qn(e,t),jt=c):qn(e,t),ar(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(J=t,u=t.child;u!==null;){for(h=J=u;J!==null;){switch(d=J,p=d.child,d.tag){case 0:case 11:case 14:case 15:ul(4,d,d.return);break;case 1:wo(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(_){Qe(r,n,_)}}break;case 5:wo(d,d.return);break;case 22:if(d.memoizedState!==null){I_(h);continue}}p!==null?(p.return=d,J=p):I_(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=kw("display",o))}catch(_){Qe(t,t.return,_)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(_){Qe(t,t.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:qn(e,t),ar(t),r&4&&T_(t);break;case 21:break;default:qn(e,t),ar(t)}}function ar(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(n5(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Il(s,""),r.flags&=-33);var i=x_(t);m2(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=x_(t);p2(t,a,o);break;default:throw Error(W(161))}}catch(l){Qe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function q6(t,e,n){J=t,i5(t)}function i5(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||au;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||jt;a=au;var c=jt;if(au=o,(jt=l)&&!c)for(J=s;J!==null;)o=J,l=o.child,o.tag===22&&o.memoizedState!==null?S_(s):l!==null?(l.return=o,J=l):S_(s);for(;i!==null;)J=i,i5(i),i=i.sibling;J=s,au=a,jt=c}C_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):C_(t)}}function C_(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||dd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!jt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Kn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&a_(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}a_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&kl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}jt||e.flags&512&&f2(e)}catch(d){Qe(e,e.return,d)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function I_(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function S_(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{dd(4,e)}catch(l){Qe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Qe(e,s,l)}}var i=e.return;try{f2(e)}catch(l){Qe(e,i,l)}break;case 5:var o=e.return;try{f2(e)}catch(l){Qe(e,o,l)}}}catch(l){Qe(e,e.return,l)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var G6=Math.ceil,ch=es.ReactCurrentDispatcher,rm=es.ReactCurrentOwner,Fn=es.ReactCurrentBatchConfig,ve=0,vt=null,st=null,St=0,pn=0,Eo=Bs(0),ut=0,Ul=null,Ni=0,fd=0,sm=0,hl=null,nn=null,im=0,Qo=1/0,Pr=null,uh=!1,g2=null,Ss=null,lu=!1,vs=null,hh=0,dl=0,_2=null,Pu=-1,Lu=0;function Zt(){return ve&6?Ze():Pu!==-1?Pu:Pu=Ze()}function As(t){return t.mode&1?ve&2&&St!==0?St&-St:N6.transition!==null?(Lu===0&&(Lu=zw()),Lu):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:Qw(t.type)),t):1}function er(t,e,n,r){if(50<dl)throw dl=0,_2=null,Error(W(185));fc(t,n,r),(!(ve&2)||t!==vt)&&(t===vt&&(!(ve&2)&&(fd|=n),ut===4&&hs(t,St)),un(t,r),n===1&&ve===0&&!(e.mode&1)&&(Qo=Ze()+500,cd&&Ws()))}function un(t,e){var n=t.callbackNode;NI(t,e);var r=Ku(t,t===vt?St:0);if(r===0)n!==null&&O1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&O1(n),e===1)t.tag===0?k6(A_.bind(null,t)):p3(A_.bind(null,t)),I6(function(){!(ve&6)&&Ws()}),n=null;else{switch(Bw(r)){case 1:n=bp;break;case 4:n=Uw;break;case 16:n=Gu;break;case 536870912:n=$w;break;default:n=Gu}n=f5(n,o5.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function o5(t,e){if(Pu=-1,Lu=0,ve&6)throw Error(W(327));var n=t.callbackNode;if(Po()&&t.callbackNode!==n)return null;var r=Ku(t,t===vt?St:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=dh(t,r);else{e=r;var s=ve;ve|=2;var i=l5();(vt!==t||St!==e)&&(Pr=null,Qo=Ze()+500,Ei(t,e));do try{Y6();break}catch(a){a5(t,a)}while(!0);Wp(),ch.current=i,ve=s,st!==null?e=0:(vt=null,St=0,e=ut)}if(e!==0){if(e===2&&(s=Wf(t),s!==0&&(r=s,e=v2(t,s))),e===1)throw n=Ul,Ei(t,0),hs(t,r),un(t,Ze()),n;if(e===6)hs(t,r);else{if(s=t.current.alternate,!(r&30)&&!K6(s)&&(e=dh(t,r),e===2&&(i=Wf(t),i!==0&&(r=i,e=v2(t,i))),e===1))throw n=Ul,Ei(t,0),hs(t,r),un(t,Ze()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:ii(t,nn,Pr);break;case 3:if(hs(t,r),(r&130023424)===r&&(e=im+500-Ze(),10<e)){if(Ku(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Zt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Jf(ii.bind(null,t,nn,Pr),e);break}ii(t,nn,Pr);break;case 4:if(hs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Zn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*G6(r/1960))-r,10<r){t.timeoutHandle=Jf(ii.bind(null,t,nn,Pr),r);break}ii(t,nn,Pr);break;case 5:ii(t,nn,Pr);break;default:throw Error(W(329))}}}return un(t,Ze()),t.callbackNode===n?o5.bind(null,t):null}function v2(t,e){var n=hl;return t.current.memoizedState.isDehydrated&&(Ei(t,e).flags|=256),t=dh(t,e),t!==2&&(e=nn,nn=n,e!==null&&y2(e)),t}function y2(t){nn===null?nn=t:nn.push.apply(nn,t)}function K6(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!nr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hs(t,e){for(e&=~sm,e&=~fd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zn(e),r=1<<n;t[n]=-1,e&=~r}}function A_(t){if(ve&6)throw Error(W(327));Po();var e=Ku(t,0);if(!(e&1))return un(t,Ze()),null;var n=dh(t,e);if(t.tag!==0&&n===2){var r=Wf(t);r!==0&&(e=r,n=v2(t,r))}if(n===1)throw n=Ul,Ei(t,0),hs(t,e),un(t,Ze()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ii(t,nn,Pr),un(t,Ze()),null}function om(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(Qo=Ze()+500,cd&&Ws())}}function bi(t){vs!==null&&vs.tag===0&&!(ve&6)&&Po();var e=ve;ve|=1;var n=Fn.transition,r=Ie;try{if(Fn.transition=null,Ie=1,t)return t()}finally{Ie=r,Fn.transition=n,ve=e,!(ve&6)&&Ws()}}function am(){pn=Eo.current,Ue(Eo)}function Ei(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,C6(n)),st!==null)for(n=st.return;n!==null;){var r=n;switch($p(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zu();break;case 3:Go(),Ue(ln),Ue(Ht),Yp();break;case 5:Qp(r);break;case 4:Go();break;case 13:Ue(qe);break;case 19:Ue(qe);break;case 10:Hp(r.type._context);break;case 22:case 23:am()}n=n.return}if(vt=t,st=t=Rs(t.current,null),St=pn=e,ut=0,Ul=null,sm=fd=Ni=0,nn=hl=null,ui!==null){for(e=0;e<ui.length;e++)if(n=ui[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ui=null}return t}function a5(t,e){do{var n=st;try{if(Wp(),ku.current=lh,ah){for(var r=Ge.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ah=!1}if(ki=0,mt=ct=Ge=null,cl=!1,jl=0,rm.current=null,n===null||n.return===null){ut=1,Ul=e,st=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=St,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=p_(o);if(p!==null){p.flags&=-257,m_(p,o,a,i,e),p.mode&1&&f_(i,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var _=new Set;_.add(l),e.updateQueue=_}else g.add(l);break e}else{if(!(e&1)){f_(i,c,e),lm();break e}l=Error(W(426))}}else if(He&&a.mode&1){var x=p_(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),m_(x,o,a,i,e),zp(Ko(l,a));break e}}i=l=Ko(l,a),ut!==4&&(ut=2),hl===null?hl=[i]:hl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=W3(i,l,e);o_(i,m);break e;case 1:a=l;var v=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ss===null||!Ss.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=H3(i,a,e);o_(i,C);break e}}i=i.return}while(i!==null)}u5(n)}catch(N){e=N,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function l5(){var t=ch.current;return ch.current=lh,t===null?lh:t}function lm(){(ut===0||ut===3||ut===2)&&(ut=4),vt===null||!(Ni&268435455)&&!(fd&268435455)||hs(vt,St)}function dh(t,e){var n=ve;ve|=2;var r=l5();(vt!==t||St!==e)&&(Pr=null,Ei(t,e));do try{Q6();break}catch(s){a5(t,s)}while(!0);if(Wp(),ve=n,ch.current=r,st!==null)throw Error(W(261));return vt=null,St=0,ut}function Q6(){for(;st!==null;)c5(st)}function Y6(){for(;st!==null&&!EI();)c5(st)}function c5(t){var e=d5(t.alternate,t,pn);t.memoizedProps=t.pendingProps,e===null?u5(t):st=e,rm.current=null}function u5(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=B6(n,e),n!==null){n.flags&=32767,st=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,st=null;return}}else if(n=z6(n,e,pn),n!==null){st=n;return}if(e=e.sibling,e!==null){st=e;return}st=e=t}while(e!==null);ut===0&&(ut=5)}function ii(t,e,n){var r=Ie,s=Fn.transition;try{Fn.transition=null,Ie=1,X6(t,e,n,r)}finally{Fn.transition=s,Ie=r}return null}function X6(t,e,n,r){do Po();while(vs!==null);if(ve&6)throw Error(W(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(bI(t,i),t===vt&&(st=vt=null,St=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lu||(lu=!0,f5(Gu,function(){return Po(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Fn.transition,Fn.transition=null;var o=Ie;Ie=1;var a=ve;ve|=4,rm.current=null,H6(t,n),s5(n,t),_6(Yf),Qu=!!Qf,Yf=Qf=null,t.current=n,q6(n),xI(),ve=a,Ie=o,Fn.transition=i}else t.current=n;if(lu&&(lu=!1,vs=t,hh=s),i=t.pendingLanes,i===0&&(Ss=null),II(n.stateNode),un(t,Ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(uh)throw uh=!1,t=g2,g2=null,t;return hh&1&&t.tag!==0&&Po(),i=t.pendingLanes,i&1?t===_2?dl++:(dl=0,_2=t):dl=0,Ws(),null}function Po(){if(vs!==null){var t=Bw(hh),e=Fn.transition,n=Ie;try{if(Fn.transition=null,Ie=16>t?16:t,vs===null)var r=!1;else{if(t=vs,vs=null,hh=0,ve&6)throw Error(W(331));var s=ve;for(ve|=4,J=t.current;J!==null;){var i=J,o=i.child;if(J.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(J=c;J!==null;){var u=J;switch(u.tag){case 0:case 11:case 15:ul(8,u,i)}var h=u.child;if(h!==null)h.return=u,J=h;else for(;J!==null;){u=J;var d=u.sibling,p=u.return;if(t5(u),u===c){J=null;break}if(d!==null){d.return=p,J=d;break}J=p}}}var g=i.alternate;if(g!==null){var _=g.child;if(_!==null){g.child=null;do{var x=_.sibling;_.sibling=null,_=x}while(_!==null)}}J=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,J=o;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ul(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,J=m;break e}J=i.return}}var v=t.current;for(J=v;J!==null;){o=J;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,J=y;else e:for(o=v;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:dd(9,a)}}catch(N){Qe(a,a.return,N)}if(a===o){J=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,J=C;break e}J=a.return}}if(ve=s,Ws(),gr&&typeof gr.onPostCommitFiberRoot=="function")try{gr.onPostCommitFiberRoot(sd,t)}catch{}r=!0}return r}finally{Ie=n,Fn.transition=e}}return!1}function R_(t,e,n){e=Ko(n,e),e=W3(t,e,1),t=Is(t,e,1),e=Zt(),t!==null&&(fc(t,1,e),un(t,e))}function Qe(t,e,n){if(t.tag===3)R_(t,t,n);else for(;e!==null;){if(e.tag===3){R_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ss===null||!Ss.has(r))){t=Ko(n,t),t=H3(e,t,1),e=Is(e,t,1),t=Zt(),e!==null&&(fc(e,1,t),un(e,t));break}}e=e.return}}function J6(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Zt(),t.pingedLanes|=t.suspendedLanes&n,vt===t&&(St&n)===n&&(ut===4||ut===3&&(St&130023424)===St&&500>Ze()-im?Ei(t,0):sm|=n),un(t,e)}function h5(t,e){e===0&&(t.mode&1?(e=Jc,Jc<<=1,!(Jc&130023424)&&(Jc=4194304)):e=1);var n=Zt();t=Hr(t,e),t!==null&&(fc(t,e,n),un(t,n))}function Z6(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),h5(t,n)}function e9(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),h5(t,n)}var d5;d5=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ln.current)on=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return on=!1,$6(t,e,n);on=!!(t.flags&131072)}else on=!1,He&&e.flags&1048576&&m3(e,nh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;bu(t,e),t=e.pendingProps;var s=Wo(e,Ht.current);bo(e,n),s=Jp(null,e,r,t,s,n);var i=Zp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cn(r)?(i=!0,eh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Gp(e),s.updater=ud,e.stateNode=s,s._reactInternals=e,i2(e,r,t,n),e=l2(null,e,r,!0,i,n)):(e.tag=0,He&&i&&Up(e),Xt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(bu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=n9(r),t=Kn(r,t),s){case 0:e=a2(null,e,r,t,n);break e;case 1:e=v_(null,e,r,t,n);break e;case 11:e=g_(null,e,r,t,n);break e;case 14:e=__(null,e,r,Kn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),a2(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),v_(t,e,r,s,n);case 3:e:{if(Q3(e),t===null)throw Error(W(387));r=e.pendingProps,i=e.memoizedState,s=i.element,y3(t,e),ih(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ko(Error(W(423)),e),e=y_(t,e,r,n,s);break e}else if(r!==s){s=Ko(Error(W(424)),e),e=y_(t,e,r,n,s);break e}else for(mn=Cs(e.stateNode.containerInfo.firstChild),yn=e,He=!0,Yn=null,n=T3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ho(),r===s){e=qr(t,e,n);break e}Xt(t,e,r,n)}e=e.child}return e;case 5:return C3(e),t===null&&n2(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Xf(r,s)?o=null:i!==null&&Xf(r,i)&&(e.flags|=32),K3(t,e),Xt(t,e,o,n),e.child;case 6:return t===null&&n2(e),null;case 13:return Y3(t,e,n);case 4:return Kp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=qo(e,null,r,n):Xt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),g_(t,e,r,s,n);case 7:return Xt(t,e,e.pendingProps,n),e.child;case 8:return Xt(t,e,e.pendingProps.children,n),e.child;case 12:return Xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Pe(rh,r._currentValue),r._currentValue=o,i!==null)if(nr(i.value,o)){if(i.children===s.children&&!ln.current){e=qr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=$r(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),r2(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),r2(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Xt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,bo(e,n),s=$n(s),r=r(s),e.flags|=1,Xt(t,e,r,n),e.child;case 14:return r=e.type,s=Kn(r,e.pendingProps),s=Kn(r.type,s),__(t,e,r,s,n);case 15:return q3(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),bu(t,e),e.tag=1,cn(r)?(t=!0,eh(e)):t=!1,bo(e,n),E3(e,r,s),i2(e,r,s,n),l2(null,e,r,!0,t,n);case 19:return X3(t,e,n);case 22:return G3(t,e,n)}throw Error(W(156,e.tag))};function f5(t,e){return Vw(t,e)}function t9(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,e,n,r){return new t9(t,e,n,r)}function cm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function n9(t){if(typeof t=="function")return cm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rp)return 11;if(t===kp)return 14}return 2}function Rs(t,e){var n=t.alternate;return n===null?(n=Mn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Du(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")cm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case uo:return xi(n.children,s,i,e);case Ap:o=8,s|=8;break;case kf:return t=Mn(12,n,e,s|2),t.elementType=kf,t.lanes=i,t;case Nf:return t=Mn(13,n,e,s),t.elementType=Nf,t.lanes=i,t;case bf:return t=Mn(19,n,e,s),t.elementType=bf,t.lanes=i,t;case xw:return pd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ww:o=10;break e;case Ew:o=9;break e;case Rp:o=11;break e;case kp:o=14;break e;case ls:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=Mn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function xi(t,e,n,r){return t=Mn(7,t,r,e),t.lanes=n,t}function pd(t,e,n,r){return t=Mn(22,t,r,e),t.elementType=xw,t.lanes=n,t.stateNode={isHidden:!1},t}function q0(t,e,n){return t=Mn(6,t,null,e),t.lanes=n,t}function G0(t,e,n){return e=Mn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function r9(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=A0(0),this.expirationTimes=A0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=A0(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function um(t,e,n,r,s,i,o,a,l){return t=new r9(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Mn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gp(i),t}function s9(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:co,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function p5(t){if(!t)return Ms;t=t._reactInternals;e:{if(Hi(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(cn(n))return f3(t,n,e)}return e}function m5(t,e,n,r,s,i,o,a,l){return t=um(n,r,!0,t,s,i,o,a,l),t.context=p5(null),n=t.current,r=Zt(),s=As(n),i=$r(r,s),i.callback=e??null,Is(n,i,s),t.current.lanes=s,fc(t,s,r),un(t,r),t}function md(t,e,n,r){var s=e.current,i=Zt(),o=As(s);return n=p5(n),e.context===null?e.context=n:e.pendingContext=n,e=$r(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Is(s,e,o),t!==null&&(er(t,s,o,i),Ru(t,s,o)),o}function fh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function k_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hm(t,e){k_(t,e),(t=t.alternate)&&k_(t,e)}function i9(){return null}var g5=typeof reportError=="function"?reportError:function(t){console.error(t)};function dm(t){this._internalRoot=t}gd.prototype.render=dm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));md(t,e,null,null)};gd.prototype.unmount=dm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bi(function(){md(null,t,null,null)}),e[Wr]=null}};function gd(t){this._internalRoot=t}gd.prototype.unstable_scheduleHydration=function(t){if(t){var e=qw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<us.length&&e!==0&&e<us[n].priority;n++);us.splice(n,0,t),n===0&&Kw(t)}};function fm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _d(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function N_(){}function o9(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=fh(o);i.call(c)}}var o=m5(e,r,t,0,null,!1,!1,"",N_);return t._reactRootContainer=o,t[Wr]=o.current,Pl(t.nodeType===8?t.parentNode:t),bi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=fh(l);a.call(c)}}var l=um(t,0,!1,null,null,!1,!1,"",N_);return t._reactRootContainer=l,t[Wr]=l.current,Pl(t.nodeType===8?t.parentNode:t),bi(function(){md(e,l,n,r)}),l}function vd(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=fh(o);a.call(l)}}md(e,o,t,s)}else o=o9(n,e,t,s,r);return fh(o)}Ww=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qa(e.pendingLanes);n!==0&&(Pp(e,n|1),un(e,Ze()),!(ve&6)&&(Qo=Ze()+500,Ws()))}break;case 13:bi(function(){var r=Hr(t,1);if(r!==null){var s=Zt();er(r,t,1,s)}}),hm(t,1)}};Lp=function(t){if(t.tag===13){var e=Hr(t,134217728);if(e!==null){var n=Zt();er(e,t,134217728,n)}hm(t,134217728)}};Hw=function(t){if(t.tag===13){var e=As(t),n=Hr(t,e);if(n!==null){var r=Zt();er(n,t,e,r)}hm(t,e)}};qw=function(){return Ie};Gw=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};$f=function(t,e,n){switch(e){case"input":if(Df(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ld(r);if(!s)throw Error(W(90));Cw(r),Df(r,s)}}}break;case"textarea":Sw(t,n);break;case"select":e=n.value,e!=null&&Ao(t,!!n.multiple,e,!1)}};Lw=om;Dw=bi;var a9={usingClientEntryPoint:!1,Events:[mc,mo,ld,bw,Pw,om]},Ma={findFiberByHostInstance:ci,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},l9={bundleType:Ma.bundleType,version:Ma.version,rendererPackageName:Ma.rendererPackageName,rendererConfig:Ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:es.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jw(t),t===null?null:t.stateNode},findFiberByHostInstance:Ma.findFiberByHostInstance||i9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{sd=cu.inject(l9),gr=cu}catch{}}An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a9;An.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fm(e))throw Error(W(200));return s9(t,e,null,n)};An.createRoot=function(t,e){if(!fm(t))throw Error(W(299));var n=!1,r="",s=g5;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=um(t,1,!1,null,null,n,!1,r,s),t[Wr]=e.current,Pl(t.nodeType===8?t.parentNode:t),new dm(e)};An.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=jw(e),t=t===null?null:t.stateNode,t};An.flushSync=function(t){return bi(t)};An.hydrate=function(t,e,n){if(!_d(e))throw Error(W(200));return vd(null,t,e,!0,n)};An.hydrateRoot=function(t,e,n){if(!fm(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=g5;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=m5(e,null,t,1,n??null,s,!1,i,o),t[Wr]=e.current,Pl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new gd(e)};An.render=function(t,e,n){if(!_d(e))throw Error(W(200));return vd(null,t,e,!1,n)};An.unmountComponentAtNode=function(t){if(!_d(t))throw Error(W(40));return t._reactRootContainer?(bi(function(){vd(null,null,t,!1,function(){t._reactRootContainer=null,t[Wr]=null})}),!0):!1};An.unstable_batchedUpdates=om;An.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!_d(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return vd(t,e,n,!1,r)};An.version="18.2.0-next-9e3b772b8-20220608";function _5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_5)}catch(t){console.error(t)}}_5(),mw.exports=An;var c9=mw.exports,b_=c9;Af.createRoot=b_.createRoot,Af.hydrateRoot=b_.hydrateRoot;const u9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%20width='500'%20height='500'%3e%3cpath%20d='M41.9375%208.625C41.273438%208.648438%2040.664063%209%2040.3125%209.5625L21.5%2038.34375L9.3125%2027.8125C8.789063%2027.269531%208.003906%2027.066406%207.28125%2027.292969C6.5625%2027.515625%206.027344%2028.125%205.902344%2028.867188C5.777344%2029.613281%206.078125%2030.363281%206.6875%2030.8125L20.625%2042.875C21.0625%2043.246094%2021.640625%2043.410156%2022.207031%2043.328125C22.777344%2043.242188%2023.28125%2042.917969%2023.59375%2042.4375L43.6875%2011.75C44.117188%2011.121094%2044.152344%2010.308594%2043.78125%209.644531C43.410156%208.984375%2042.695313%208.589844%2041.9375%208.625Z'%20fill='%231EE97C'%20/%3e%3c/svg%3e",h9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%20width='500'%20height='500'%3e%3cpath%20d='M9.15625%206.3125L6.3125%209.15625L22.15625%2025L6.21875%2040.96875L9.03125%2043.78125L25%2027.84375L40.9375%2043.78125L43.78125%2040.9375L27.84375%2025L43.6875%209.15625L40.84375%206.3125L25%2022.15625Z'%20fill='%23E91E25'%20/%3e%3c/svg%3e",d9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M15%203C14.168432%203%2013.456063%203.5067238%2013.154297%204.2285156L2.3007812%2022.947266L2.3007812%2022.949219%20A%202%202%200%200%200%202%2024%20A%202%202%200%200%200%204%2026%20A%202%202%200%200%200%204.140625%2025.994141L4.1445312%2026L15%2026L25.855469%2026L25.859375%2025.992188%20A%202%202%200%200%200%2026%2026%20A%202%202%200%200%200%2028%2024%20A%202%202%200%200%200%2027.699219%2022.947266L27.683594%2022.919922%20A%202%202%200%200%200%2027.681641%2022.917969L16.845703%204.2285156C16.543937%203.5067238%2015.831568%203%2015%203%20z%20M%2013.787109%2011.359375L16.212891%2011.359375L16.011719%2017.832031L13.988281%2017.832031L13.787109%2011.359375%20z%20M%2015.003906%2019.810547C15.825906%2019.810547%2016.318359%2020.252813%2016.318359%2021.007812C16.318359%2021.748812%2015.825906%2022.189453%2015.003906%2022.189453C14.175906%2022.189453%2013.679688%2021.748813%2013.679688%2021.007812C13.679688%2020.252813%2014.174906%2019.810547%2015.003906%2019.810547%20z'%20fill='%23E91E25'%20/%3e%3c/svg%3e",f9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M3,12v-2c0-0.386,0.223-0.738,0.572-0.904s0.762-0.115,1.062,0.13L15,17.708l10.367-8.482%20c0.299-0.245,0.712-0.295,1.062-0.13C26.779,9.261,27,9.614,27,10v2c0,0.3-0.135,0.584-0.367,0.774l-11,9%20c-0.369,0.301-0.898,0.301-1.267,0l-11-9C3.135,12.584,3,12.3,3,12z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",p9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M17,3h2c0.386,0,0.738,0.223,0.904,0.572s0.115,0.762-0.13,1.062L11.292,15l8.482,10.367%20c0.245,0.299,0.295,0.712,0.13,1.062S19.386,27,19,27h-2c-0.3,0-0.584-0.135-0.774-0.367l-9-11c-0.301-0.369-0.301-0.898,0-1.267%20l9-11C16.416,3.135,16.7,3,17,3z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",m9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M19,7h-6.774l0.564-1.551c0.604-1.662-0.134-3.512-1.716-4.302c-0.691-0.345-1.532-0.064-1.877,0.627L6.339,7.504%20C5.532,8.042,5,8.958,5,10v7c0,2.209,1.791,4,4,4h6.989c2.344,0,4.373-1.628,4.881-3.915L22,12v-2C22,8.343,20.657,7,19,7z'%20opacity='.35'%20fill='%232E2E2E'%20/%3e%3cpath%20d='M7,19.5c0-0.386,0-10.614,0-11C7,7.672,6.328,7,5.5,7S4,7.672,4,8.5c0,0.386,0,10.614,0,11C4,20.328,4.672,21,5.5,21S7,20.328,7,19.5z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",g9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M12,6h4V3.706c0-0.615,0.742-0.924,1.178-0.491l4.104,4.075c0.395,0.391,0.395,1.03,0,1.421l-4.104,4.075C16.742,13.218,16,12.908,16,12.294V10h-4c-4.351,0-5,2.661-5,4H3C3,10.31,5.357,6,12,6z'%20opacity='.35'%20fill='%232E2E2E'%20/%3e%3cpath%20d='M8,22c0.513,0,1.024-0.196,1.415-0.587c0.78-0.781,0.78-2.046,0-2.827C8.786,17.951,7,15.753,7,14c0-6.845,5-8,5-8c-6.643,0-9,4.31-9,8c0,3.726,3.22,7.049,3.587,7.415C6.978,21.805,7.488,22,8,22z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",_9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M12,27h-2c-0.386,0-0.738-0.223-0.904-0.572s-0.115-0.762,0.13-1.062L17.708,15L9.226,4.633%20c-0.245-0.299-0.295-0.712-0.13-1.062S9.614,3,10,3h2c0.3,0,0.584,0.135,0.774,0.367l9,11c0.301,0.369,0.301,0.898,0,1.267l-9,11%20C12.584,26.865,12.3,27,12,27z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",v9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M11.5%206C8.4802259%206%206%208.4802259%206%2011.5L6%2036.5C6%2039.519774%208.4802259%2042%2011.5%2042L36.5%2042C39.519774%2042%2042%2039.519774%2042%2036.5L42%2011.5C42%208.4802259%2039.519774%206%2036.5%206L11.5%206%20z%20M%2011.5%209L36.5%209C37.898226%209%2039%2010.101774%2039%2011.5L39%2036.5C39%2037.898226%2037.898226%2039%2036.5%2039L11.5%2039C10.101774%2039%209%2037.898226%209%2036.5L9%2011.5C9%2010.101774%2010.101774%209%2011.5%209%20z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",y9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%204C11.832031%204%208.152344%206.113281%206%209.34375L6%206L4%206L4%2013L11%2013L11%2011L7.375%2011C9.101563%208.019531%2012.296875%206%2016%206C21.535156%206%2026%2010.464844%2026%2016C26%2021.535156%2021.535156%2026%2016%2026C10.464844%2026%206%2021.535156%206%2016L4%2016C4%2022.617188%209.382813%2028%2016%2028C22.617188%2028%2028%2022.617188%2028%2016C28%209.382813%2022.617188%204%2016%204%20Z%20M%2015%208L15%2017L22%2017L22%2015L17%2015L17%208Z'%20fill='%232E2E2E'%20/%3e%3c/svg%3e",w9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M10%202L9%203L5%203C4.4%203%204%203.4%204%204C4%204.6%204.4%205%205%205L7%205L17%205L19%205C19.6%205%2020%204.6%2020%204C20%203.4%2019.6%203%2019%203L15%203L14%202L10%202%20z%20M%205%207L5%2020C5%2021.1%205.9%2022%207%2022L17%2022C18.1%2022%2019%2021.1%2019%2020L19%207L5%207%20z%20M%209%209C9.6%209%2010%209.4%2010%2010L10%2019C10%2019.6%209.6%2020%209%2020C8.4%2020%208%2019.6%208%2019L8%2010C8%209.4%208.4%209%209%209%20z%20M%2015%209C15.6%209%2016%209.4%2016%2010L16%2019C16%2019.6%2015.6%2020%2015%2020C14.4%2020%2014%2019.6%2014%2019L14%2010C14%209.4%2014.4%209%2015%209%20z'%20fill='%23FF4A33'%20/%3e%3c/svg%3e",E9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M11%203H13V21H11z'%20fill='%230F0F0F'%20/%3e%3cpath%20d='M3%2011H21V13H3z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",x9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20128%20128'%20width='512'%20height='512'%3e%3cpath%20d='M79.335938%2015.667969C78.064453%2015.622266%2076.775%2015.762109%2075.5%2016.099609C72.1%2016.999609%2069.299609%2019.199219%2067.599609%2022.199219L64%2028.699219C63.2%2030.099219%2063.699609%2032.000781%2065.099609%2032.800781L82.400391%2042.800781C82.900391%2043.100781%2083.400391%2043.199219%2083.900391%2043.199219C84.200391%2043.199219%2084.399219%2043.199609%2084.699219%2043.099609C85.499219%2042.899609%2086.1%2042.399219%2086.5%2041.699219L90.199219%2035.199219C91.899219%2032.199219%2092.4%2028.700781%2091.5%2025.300781C90.6%2021.900781%2088.400391%2019.100391%2085.400391%2017.400391C83.525391%2016.337891%2081.455078%2015.744141%2079.335938%2015.667969%20z%20M%2060.097656%2038.126953C59.128906%2038.201172%2058.199219%2038.724609%2057.699219%2039.599609L27.5%2092C24.1%2097.8%2022.200781%20104.30039%2021.800781%20110.90039L21%20123.80078C20.9%20124.90078%2021.5%20125.99961%2022.5%20126.59961C23%20126.89961%2023.5%20127%2024%20127C24.6%20127%2025.199219%20126.8%2025.699219%20126.5L36.5%20119.40039C42%20115.70039%2046.7%20110.8%2050%20105L80.300781%2052.599609C81.100781%2051.199609%2080.599219%2049.3%2079.199219%2048.5C77.799219%2047.7%2075.899609%2048.199609%2075.099609%2049.599609L44.800781%20102C41.900781%20106.9%2037.899609%20111.20039%2033.099609%20114.40039L27.300781%20118.19922L27.699219%20111.30078C27.999219%20105.60078%2029.699609%20100%2032.599609%2095L62.900391%2042.599609C63.700391%2041.199609%2063.200781%2039.3%2061.800781%2038.5C61.275781%2038.2%2060.678906%2038.082422%2060.097656%2038.126953%20z%20M%2049%20121C47.3%20121%2046%20122.3%2046%20124C46%20125.7%2047.3%20127%2049%20127L89%20127C90.7%20127%2092%20125.7%2092%20124C92%20122.3%2090.7%20121%2089%20121L49%20121%20z%20M%20104%20121%20A%203%203%200%200%200%20101%20124%20A%203%203%200%200%200%20104%20127%20A%203%203%200%200%200%20107%20124%20A%203%203%200%200%200%20104%20121%20z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",T9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M5%203C3.9057453%203%203%203.9057453%203%205L3%2019C3%2020.094255%203.9057453%2021%205%2021L19%2021C20.094255%2021%2021%2020.094255%2021%2019L21%207L17%203L5%203%20z%20M%205%205L16.171875%205L19%207.828125L19%2019L5%2019L5%205%20z%20M%207%207L7%2010L15%2010L15%207L7%207%20z%20M%2011.5%2012%20A%202.5%202.5%200%200%200%209%2014.5%20A%202.5%202.5%200%200%200%2011.5%2017%20A%202.5%202.5%200%200%200%2014%2014.5%20A%202.5%202.5%200%200%200%2011.5%2012%20z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",C9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M27,18v2c0,0.386-0.223,0.738-0.572,0.904c-0.349,0.166-0.762,0.115-1.062-0.13L15,12.292L4.633,20.774%20c-0.299,0.245-0.712,0.295-1.062,0.13C3.221,20.739,3,20.386,3,20v-2c0-0.3,0.135-0.584,0.367-0.774l11-9%20c0.369-0.301,0.898-0.301,1.267,0l11,9C26.865,17.416,27,17.7,27,18z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",I9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M15%200C13.35499%200%2012%201.3549904%2012%203L8%203C6.3550302%203%205%204.3550302%205%206L5%2024C5%2025.64497%206.3550302%2027%208%2027L22%2027C23.64497%2027%2025%2025.64497%2025%2024L25%206C25%204.3550302%2023.64497%203%2022%203L18%203C18%201.3549904%2016.64501%200%2015%200%20z%20M%2015%202C15.564129%202%2016%202.4358706%2016%203C16%203.5641294%2015.564129%204%2015%204C14.435871%204%2014%203.5641294%2014%203C14%202.4358706%2014.435871%202%2015%202%20z%20M%208%205L12%205L12%206C12%206.552%2012.448%207%2013%207L17%207C17.552%207%2018%206.552%2018%206L18%205L22%205C22.56503%205%2023%205.4349698%2023%206L23%2024C23%2024.56503%2022.56503%2025%2022%2025L8%2025C7.4349698%2025%207%2024.56503%207%2024L7%206C7%205.4349698%207.4349698%205%208%205%20z%20M%2011%2011%20A%201.0001%201.0001%200%201%200%2011%2013L19%2013%20A%201.0001%201.0001%200%201%200%2019%2011L11%2011%20z%20M%2011%2015%20A%201.0001%201.0001%200%201%200%2011%2017L16%2017%20A%201.0001%201.0001%200%201%200%2016%2015L11%2015%20z%20M%2011%2019%20A%201.0001%201.0001%200%201%200%2011%2021L19%2021%20A%201.0001%201.0001%200%201%200%2019%2019L11%2019%20z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",S9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16.03125%204C14.921875%204%2013.8125%204.15625%2012.71875%204.46875L11.9375%204.6875L12%205.5C12.042969%206.238281%2011.679688%206.949219%2011%207.34375C10.320313%207.738281%209.523438%207.6875%208.90625%207.28125L8.25%206.84375L7.65625%207.375C6.023438%208.957031%204.910156%2010.957031%204.375%2013.09375L4.1875%2013.875L4.875%2014.21875C5.535156%2014.550781%206%2015.210938%206%2016C6%2016.789063%205.535156%2017.449219%204.875%2017.78125L4.15625%2018.125L4.375%2018.90625C4.636719%2019.957031%205.019531%2021.007813%205.59375%2022C6.167969%2022.992188%206.878906%2023.871094%207.65625%2024.625L8.25%2025.1875L8.90625%2024.75C9.523438%2024.34375%2010.316406%2024.261719%2011%2024.65625C11.683594%2025.050781%2012.042969%2025.761719%2012%2026.5L11.9375%2027.3125L12.71875%2027.53125C14.109375%2027.925781%2015.558594%2028.039063%2017%2027.90625L17%2032L32%2032L32%2018L27.59375%2018L27.125%2017.78125C26.464844%2017.449219%2026%2016.789063%2026%2016C26%2015.210938%2026.464844%2014.550781%2027.125%2014.21875L27.84375%2013.875L27.625%2013.09375C27.363281%2012.042969%2026.980469%2010.992188%2026.40625%2010C25.832031%209.007813%2025.121094%208.128906%2024.34375%207.375L23.78125%206.8125L23.09375%207.28125C22.476563%207.6875%2021.683594%207.738281%2021%207.34375L20.96875%207.3125C20.3125%206.914063%2019.957031%206.222656%2020%205.5L20.0625%204.6875L19.28125%204.46875C18.222656%204.167969%2017.140625%204%2016.03125%204%20Z%20M%2016%206.09375C16.742188%206.09375%2017.496094%206.179688%2018.21875%206.34375C18.429688%207.4375%2018.960938%208.460938%2020%209.0625C21.050781%209.667969%2022.21875%209.597656%2023.28125%209.21875C23.785156%209.757813%2024.273438%2010.335938%2024.65625%2011C25.042969%2011.671875%2025.285156%2012.378906%2025.5%2013.09375C24.648438%2013.824219%2024%2014.792969%2024%2016C24%2016.730469%2024.214844%2017.410156%2024.5625%2018L21.65625%2018C21.882813%2017.378906%2022%2016.703125%2022%2016C22%2012.699219%2019.300781%2010%2016%2010C12.699219%2010%2010%2012.699219%2010%2016C10%2019.300781%2012.699219%2022%2016%2022C16.34375%2022%2016.671875%2021.960938%2017%2021.90625L17%2025.90625C15.910156%2026.007813%2014.832031%2025.921875%2013.78125%2025.6875C13.574219%2024.582031%2013.050781%2023.542969%2012%2022.9375C10.949219%2022.332031%209.78125%2022.402344%208.71875%2022.78125C8.210938%2022.238281%207.726563%2021.664063%207.34375%2021C6.957031%2020.328125%206.714844%2019.621094%206.5%2018.90625C7.351563%2018.175781%208%2017.207031%208%2016C8%2014.792969%207.351563%2013.824219%206.5%2013.09375C6.933594%2011.667969%207.710938%2010.371094%208.75%209.25C9.800781%209.609375%2010.960938%209.660156%2012%209.0625C13.039063%208.464844%2013.570313%207.4375%2013.78125%206.34375C14.523438%206.175781%2015.257813%206.09375%2016%206.09375%20Z%20M%2016%2012C18.21875%2012%2020%2013.78125%2020%2016C20%2016.730469%2019.785156%2017.40625%2019.4375%2018L17%2018L17%2019.84375C16.675781%2019.933594%2016.351563%2020%2016%2020C13.78125%2020%2012%2018.21875%2012%2016C12%2013.78125%2013.78125%2012%2016%2012%20Z%20M%2019%2020L30%2020L30%2021L19%2021%20Z%20M%2019%2023L30%2023L30%2030L19%2030%20Z%20M%2026.28125%2023.78125L24%2026.0625L22.71875%2024.78125L21.28125%2026.21875L23.28125%2028.21875L24%2028.90625L24.71875%2028.21875L27.71875%2025.21875Z'%20fill='%230F0F0F'%20/%3e%3c/svg%3e",A9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M4%207L4%209L28%209L28%207%20Z%20M%204%2015L4%2017L28%2017L28%2015%20Z%20M%204%2023L4%2025L28%2025L28%2023Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",R9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%202.59375L15.28125%203.28125L2.28125%2016.28125L3.71875%2017.71875L5%2016.4375L5%2028L14%2028L14%2018L18%2018L18%2028L27%2028L27%2016.4375L28.28125%2017.71875L29.71875%2016.28125L16.71875%203.28125%20Z%20M%2016%205.4375L25%2014.4375L25%2026L20%2026L20%2016L12%2016L12%2026L7%2026L7%2014.4375Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",k9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M20.5%204C18.203405%204%2016.305701%205.7666235%2016.050781%208L12.5%208C10.032499%208%208%2010.032499%208%2012.5L8%2039.5C8%2041.967501%2010.032499%2044%2012.5%2044L35.5%2044C37.967501%2044%2040%2041.967501%2040%2039.5L40%2012.5C40%2010.032499%2037.967501%208%2035.5%208L31.949219%208C31.694299%205.7666235%2029.796595%204%2027.5%204L20.5%204%20z%20M%2020.5%207L27.5%207C28.346499%207%2029%207.6535009%2029%208.5C29%209.3464991%2028.346499%2010%2027.5%2010L20.5%2010C19.653501%2010%2019%209.3464991%2019%208.5C19%207.6535009%2019.653501%207%2020.5%207%20z%20M%2012.5%2011L16.769531%2011C17.581237%2012.2019%2018.954719%2013%2020.5%2013L27.5%2013C29.045281%2013%2030.418763%2012.2019%2031.230469%2011L35.5%2011C36.346499%2011%2037%2011.653501%2037%2012.5L37%2039.5C37%2040.346499%2036.346499%2041%2035.5%2041L12.5%2041C11.653501%2041%2011%2040.346499%2011%2039.5L11%2012.5C11%2011.653501%2011.653501%2011%2012.5%2011%20z%20M%2032.470703%2018.986328%20A%201.50015%201.50015%200%200%200%2031.439453%2019.439453L28.5%2022.378906L27.560547%2021.439453%20A%201.50015%201.50015%200%201%200%2025.439453%2023.560547L27.439453%2025.560547%20A%201.50015%201.50015%200%200%200%2029.560547%2025.560547L33.560547%2021.560547%20A%201.50015%201.50015%200%200%200%2032.470703%2018.986328%20z%20M%2015.5%2021%20A%201.50015%201.50015%200%201%200%2015.5%2024L21.5%2024%20A%201.50015%201.50015%200%201%200%2021.5%2021L15.5%2021%20z%20M%2032.486328%2027.978516%20A%201.50015%201.50015%200%200%200%2031.439453%2028.439453L30%2029.878906L28.560547%2028.439453%20A%201.50015%201.50015%200%200%200%2027.484375%2027.984375%20A%201.50015%201.50015%200%200%200%2026.439453%2030.560547L27.878906%2032L26.439453%2033.439453%20A%201.50015%201.50015%200%201%200%2028.560547%2035.560547L30%2034.121094L31.439453%2035.560547%20A%201.50015%201.50015%200%201%200%2033.560547%2033.439453L32.121094%2032L33.560547%2030.560547%20A%201.50015%201.50015%200%200%200%2032.486328%2027.978516%20z%20M%2015.5%2030%20A%201.50015%201.50015%200%201%200%2015.5%2033L21.5%2033%20A%201.50015%201.50015%200%201%200%2021.5%2030L15.5%2030%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",N9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%204C9.382813%204%204%209.382813%204%2016C4%2022.617188%209.382813%2028%2016%2028C22.617188%2028%2028%2022.617188%2028%2016C28%209.382813%2022.617188%204%2016%204%20Z%20M%2016%206C21.535156%206%2026%2010.464844%2026%2016C26%2021.535156%2021.535156%2026%2016%2026C10.464844%2026%206%2021.535156%206%2016C6%2010.464844%2010.464844%206%2016%206%20Z%20M%2016%2010C13.800781%2010%2012%2011.800781%2012%2014L14%2014C14%2012.882813%2014.882813%2012%2016%2012C17.117188%2012%2018%2012.882813%2018%2014C18%2014.765625%2017.507813%2015.445313%2016.78125%2015.6875L16.375%2015.8125C15.558594%2016.082031%2015%2016.863281%2015%2017.71875L15%2019L17%2019L17%2017.71875L17.40625%2017.59375C18.945313%2017.082031%2020%2015.621094%2020%2014C20%2011.800781%2018.199219%2010%2016%2010%20Z%20M%2015%2020L15%2022L17%2022L17%2020Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",b9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20x='0'%20y='0'%20viewBox='0%200%20128%20128'%20width='512'%20height='512'%3e%3ccircle%20cx='64'%20cy='64'%20r='55'%20fill='%23fff'%20/%3e%3cpath%20fill='%23444b54'%20d='M64,122C32,122,6,96,6,64S32,6,64,6s58,26,58,58S96,122,64,122z%20M64,12c-28.7,0-52,23.3-52,52s23.3,52,52,52%20s52-23.3,52-52S92.7,12,64,12z'%20/%3e%3cpath%20fill='%23444b54'%20d='M64,90c-1.7,0-3-1.3-3-3V61c0-1.7,1.3-3,3-3s3,1.3,3,3v26C67,88.7,65.7,90,64,90z'%20/%3e%3cpath%20fill='%23444b54'%20d='M64,49c-1.7,0-3-1.3-3-3v-5c0-1.7,1.3-3,3-3s3,1.3,3,3v5C67,47.7,65.7,49,64,49z'%20/%3e%3c/svg%3e",P9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M6%203L6%2029L17.765625%2029C19.233126%2030.826376%2021.480367%2032%2024%2032C26.396%2032%2028.534%2030.929859%2030%2029.255859L30%2032L32%2032L32%2026L26%2026L26%2028L28.445312%2028C27.347313%2029.221%2025.768%2030%2024%2030C20.691%2030%2018%2027.309%2018%2024C18%2020.691%2020.691%2018%2024%2018C27.309%2018%2030%2020.691%2030%2024L32%2024C32%2020.280606%2029.444687%2017.153349%2026%2016.261719L26%209.5859375L19.414062%203L6%203%20z%20M%208%205L18%205L18%2011L24%2011L24%2016C21.979283%2016%2020.136244%2016.75962%2018.726562%2018L11%2018L11%2020L17.082031%2020C16.722543%2020.619242%2016.445366%2021.290505%2016.261719%2022L11%2022L11%2024L16%2024C16%2025.060938%2016.211142%2026.072669%2016.587891%2027L8%2027L8%205%20z%20M%2020%206.4140625L22.585938%209L20%209L20%206.4140625%20z%20M%2011%2014L11%2016L21%2016L21%2014L11%2014%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",L9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M4.0097656%203C2.9179106%203%202.0097656%203.9049841%202.0097656%204.9980469L2%2023L6%2019L20%2019C21.093063%2019%2022%2018.093063%2022%2017L22%205C22%203.9069372%2021.093063%203%2020%203L4.0097656%203%20z%20M%204.0097656%205L20%205L20%2017L5.171875%2017L4.0039062%2018.167969L4.0097656%205%20z%20M%2011%207L11%209L13%209L13%207L11%207%20z%20M%2011%2011L11%2015L13%2015L13%2011L11%2011%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",D9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='480'%20height='480'%3e%3cpath%20d='M11%203L11%2011L3%2011L3%2013L11%2013L11%2021L13%2021L13%2013L21%2013L21%2011L13%2011L13%203L11%203%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",O9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M11%203H13V21H11z'%20transform='rotate(90%2012%2012)'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",M9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='480'%20height='480'%3e%3cpath%20d='M18%202%20A%203%203%200%200%200%2015%205%20A%203%203%200%200%200%2015.054688%205.5605469L7.9394531%209.7109375%20A%203%203%200%200%200%206%209%20A%203%203%200%200%200%203%2012%20A%203%203%200%200%200%206%2015%20A%203%203%200%200%200%207.9355469%2014.287109L15.054688%2018.439453%20A%203%203%200%200%200%2015%2019%20A%203%203%200%200%200%2018%2022%20A%203%203%200%200%200%2021%2019%20A%203%203%200%200%200%2018%2016%20A%203%203%200%200%200%2016.0625%2016.712891L8.9453125%2012.560547%20A%203%203%200%200%200%209%2012%20A%203%203%200%200%200%208.9453125%2011.439453L16.060547%207.2890625%20A%203%203%200%200%200%2018%208%20A%203%203%200%200%200%2021%205%20A%203%203%200%200%200%2018%202%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",j9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%208C7.664063%208%201.25%2015.34375%201.25%2015.34375L0.65625%2016L1.25%2016.65625C1.25%2016.65625%207.097656%2023.324219%2014.875%2023.9375C15.246094%2023.984375%2015.617188%2024%2016%2024C16.382813%2024%2016.753906%2023.984375%2017.125%2023.9375C24.902344%2023.324219%2030.75%2016.65625%2030.75%2016.65625L31.34375%2016L30.75%2015.34375C30.75%2015.34375%2024.335938%208%2016%208%20Z%20M%2016%2010C18.203125%2010%2020.234375%2010.601563%2022%2011.40625C22.636719%2012.460938%2023%2013.675781%2023%2015C23%2018.613281%2020.289063%2021.582031%2016.78125%2021.96875C16.761719%2021.972656%2016.738281%2021.964844%2016.71875%2021.96875C16.480469%2021.980469%2016.242188%2022%2016%2022C15.734375%2022%2015.476563%2021.984375%2015.21875%2021.96875C11.710938%2021.582031%209%2018.613281%209%2015C9%2013.695313%209.351563%2012.480469%209.96875%2011.4375L9.9375%2011.4375C11.71875%2010.617188%2013.773438%2010%2016%2010%20Z%20M%2016%2012C14.34375%2012%2013%2013.34375%2013%2015C13%2016.65625%2014.34375%2018%2016%2018C17.65625%2018%2019%2016.65625%2019%2015C19%2013.34375%2017.65625%2012%2016%2012%20Z%20M%207.25%2012.9375C7.09375%2013.609375%207%2014.285156%207%2015C7%2016.753906%207.5%2018.394531%208.375%2019.78125C5.855469%2018.324219%204.105469%2016.585938%203.53125%2016C4.011719%2015.507813%205.351563%2014.203125%207.25%2012.9375%20Z%20M%2024.75%2012.9375C26.648438%2014.203125%2027.988281%2015.507813%2028.46875%2016C27.894531%2016.585938%2026.144531%2018.324219%2023.625%2019.78125C24.5%2018.394531%2025%2016.753906%2025%2015C25%2014.285156%2024.90625%2013.601563%2024.75%2012.9375Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",F9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M11.5%206C8.4802259%206%206%208.4802259%206%2011.5L6%2017.5%20A%201.50015%201.50015%200%201%200%209%2017.5L9%2011.5C9%2010.101774%2010.101774%209%2011.5%209L17.5%209%20A%201.50015%201.50015%200%201%200%2017.5%206L11.5%206%20z%20M%2030.5%206%20A%201.50015%201.50015%200%201%200%2030.5%209L36.5%209C37.898226%209%2039%2010.101774%2039%2011.5L39%2017.5%20A%201.50015%201.50015%200%201%200%2042%2017.5L42%2011.5C42%208.4802259%2039.519774%206%2036.5%206L30.5%206%20z%20M%207.4765625%2028.978516%20A%201.50015%201.50015%200%200%200%206%2030.5L6%2036.5C6%2039.519774%208.4802259%2042%2011.5%2042L17.5%2042%20A%201.50015%201.50015%200%201%200%2017.5%2039L11.5%2039C10.101774%2039%209%2037.898226%209%2036.5L9%2030.5%20A%201.50015%201.50015%200%200%200%207.4765625%2028.978516%20z%20M%2040.476562%2028.978516%20A%201.50015%201.50015%200%200%200%2039%2030.5L39%2036.5C39%2037.898226%2037.898226%2039%2036.5%2039L30.5%2039%20A%201.50015%201.50015%200%201%200%2030.5%2042L36.5%2042C39.519774%2042%2042%2039.519774%2042%2036.5L42%2030.5%20A%201.50015%201.50015%200%200%200%2040.476562%2028.978516%20z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",V9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M19%203C13.488281%203%209%207.488281%209%2013C9%2015.394531%209.839844%2017.589844%2011.25%2019.3125L3.28125%2027.28125L4.71875%2028.71875L12.6875%2020.75C14.410156%2022.160156%2016.605469%2023%2019%2023C24.511719%2023%2029%2018.511719%2029%2013C29%207.488281%2024.511719%203%2019%203%20Z%20M%2019%205C23.429688%205%2027%208.570313%2027%2013C27%2017.429688%2023.429688%2021%2019%2021C14.570313%2021%2011%2017.429688%2011%2013C11%208.570313%2014.570313%205%2019%205Z'%20fill='%230E0E0E'%20/%3e%3c/svg%3e",U9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M9%202C5.1458514%202%202%205.1458514%202%209C2%2012.854149%205.1458514%2016%209%2016C10.747998%2016%2012.345009%2015.348024%2013.574219%2014.28125L14%2014.707031L14%2016L19.585938%2021.585938C20.137937%2022.137937%2021.033938%2022.137938%2021.585938%2021.585938C22.137938%2021.033938%2022.137938%2020.137938%2021.585938%2019.585938L16%2014L14.707031%2014L14.28125%2013.574219C15.348024%2012.345009%2016%2010.747998%2016%209C16%205.1458514%2012.854149%202%209%202%20z%20M%209%204C11.773268%204%2014%206.2267316%2014%209C14%2011.773268%2011.773268%2014%209%2014C6.2267316%2014%204%2011.773268%204%209C4%206.2267316%206.2267316%204%209%204%20z'%20fill='%23F0F0F0'%20/%3e%3c/svg%3e",$9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%20width='500'%20height='500'%3e%3cpath%20d='M9.15625%206.3125L6.3125%209.15625L22.15625%2025L6.21875%2040.96875L9.03125%2043.78125L25%2027.84375L40.9375%2043.78125L43.78125%2040.9375L27.84375%2025L43.6875%209.15625L40.84375%206.3125L25%2022.15625Z'%20fill='%23313131'%20/%3e%3c/svg%3e",z9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M18.5%205C15.480226%205%2013%207.4802259%2013%2010.5L13%2032.5C13%2035.519774%2015.480226%2038%2018.5%2038L34.5%2038C37.519774%2038%2040%2035.519774%2040%2032.5L40%2010.5C40%207.4802259%2037.519774%205%2034.5%205L18.5%205%20z%20M%2018.5%208L34.5%208C35.898226%208%2037%209.1017741%2037%2010.5L37%2032.5C37%2033.898226%2035.898226%2035%2034.5%2035L18.5%2035C17.101774%2035%2016%2033.898226%2016%2032.5L16%2010.5C16%209.1017741%2017.101774%208%2018.5%208%20z%20M%2011%2010L9.78125%2010.8125C8.66825%2011.5545%208%2012.803625%208%2014.140625L8%2033.5C8%2038.747%2012.253%2043%2017.5%2043L30.859375%2043C32.197375%2043%2033.4465%2042.33175%2034.1875%2041.21875L35%2040L17.5%2040C13.91%2040%2011%2037.09%2011%2033.5L11%2010%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",B9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='480'%20height='480'%20viewBox='0%200%2048%2048'%3e%3cpath%20fill='%23FFC107'%20d='M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z'%20/%3e%3cpath%20fill='%23FF3D00'%20d='M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z'%20/%3e%3cpath%20fill='%234CAF50'%20d='M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z'%20/%3e%3cpath%20fill='%231976D2'%20d='M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z'%20/%3e%3c/svg%3e",W9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M16%204C10.886719%204%206.617188%207.160156%204.875%2011.625L6.71875%2012.375C8.175781%208.640625%2011.710938%206%2016%206C19.242188%206%2022.132813%207.589844%2023.9375%2010L20%2010L20%2012L27%2012L27%205L25%205L25%208.09375C22.808594%205.582031%2019.570313%204%2016%204%20Z%20M%2025.28125%2019.625C23.824219%2023.359375%2020.289063%2026%2016%2026C12.722656%2026%209.84375%2024.386719%208.03125%2022L12%2022L12%2020L5%2020L5%2027L7%2027L7%2023.90625C9.1875%2026.386719%2012.394531%2028%2016%2028C21.113281%2028%2025.382813%2024.839844%2027.125%2020.375Z'%20fill='%23313131'%20/%3e%3c/svg%3e",H9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2026%2026'%20width='208'%20height='208'%3e%3cpath%20d='M6%200C4.34375%200%203%201.34375%203%203L3%2023C3%2024.65625%204.34375%2026%206%2026L20%2026C21.65625%2026%2023%2024.65625%2023%2023L23%2017.8125L21%2019.5625L21%2023C21%2023.550781%2020.550781%2024%2020%2024L6%2024C5.449219%2024%205%2023.550781%205%2023L5%203C5%202.449219%205.449219%202%206%202L20%202C20.550781%202%2021%202.449219%2021%203L21%206.4375L23%208.1875L23%203C23%201.34375%2021.65625%200%2020%200%20Z%20M%2016.5%206.46875C16.25%206.542969%2016%206.796875%2016%207.46875L16%2010L10%2010C9.449219%2010%209%2010.449219%209%2011L9%2015C9%2015.550781%209.449219%2016%2010%2016L16%2016L16%2018.5C16%2019.78125%2017%2019.5%2017%2019.5L24.5%2013L17%206.5C17%206.5%2016.75%206.394531%2016.5%206.46875Z'%20fill='%23313131'%20/%3e%3c/svg%3e",q9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M12.5%204C10.032499%204%208%206.0324991%208%208.5L8%2039.5C8%2041.967501%2010.032499%2044%2012.5%2044L35.5%2044C37.967501%2044%2040%2041.967501%2040%2039.5L40%2018.5%20A%201.50015%201.50015%200%200%200%2039.560547%2017.439453L39.544922%2017.423828L26.560547%204.4394531%20A%201.50015%201.50015%200%200%200%2025.5%204L12.5%204%20z%20M%2012.5%207L24%207L24%2015.5C24%2017.967501%2026.032499%2020%2028.5%2020L37%2020L37%2039.5C37%2040.346499%2036.346499%2041%2035.5%2041L12.5%2041C11.653501%2041%2011%2040.346499%2011%2039.5L11%208.5C11%207.6535009%2011.653501%207%2012.5%207%20z%20M%2027%209.1210938L34.878906%2017L28.5%2017C27.653501%2017%2027%2016.346499%2027%2015.5L27%209.1210938%20z%20M%2019%2022.998047C18.391%2022.998047%2017.841328%2023.365687%2017.611328%2023.929688L13.111328%2034.929688C12.797328%2035.696688%2013.164641%2036.573719%2013.931641%2036.886719C14.698641%2037.202719%2015.575672%2036.834406%2015.888672%2036.066406L16.326172%2034.998047L21.673828%2034.998047L22.111328%2036.066406C22.349328%2036.647406%2022.909%2036.998047%2023.5%2036.998047C23.689%2036.998047%2023.881359%2036.963719%2024.068359%2036.886719C24.834359%2036.573719%2025.202672%2035.696688%2024.888672%2034.929688L20.388672%2023.929688C20.158672%2023.365688%2019.609%2022.998047%2019%2022.998047%20z%20M%2030.476562%2023.978516%20A%201.50015%201.50015%200%200%200%2029%2025.5L29%2027L27.5%2027%20A%201.50015%201.50015%200%201%200%2027.5%2030L29%2030L29%2031.5%20A%201.50015%201.50015%200%201%200%2032%2031.5L32%2030L33.5%2030%20A%201.50015%201.50015%200%201%200%2033.5%2027L32%2027L32%2025.5%20A%201.50015%201.50015%200%200%200%2030.476562%2023.978516%20z%20M%2019%2028.460938L20.447266%2031.998047L17.552734%2031.998047L19%2028.460938%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",G9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M26.886719%203.0234375C26.437415%203.0492805%2025.990861%203.1581308%2025.574219%203.3847656C24.740935%203.8380352%2024.23601%204.6408958%2023.933594%205.484375%20A%201.50015%201.50015%200%200%200%2023.931641%205.4863281C23.856851%205.6965582%2023.895729%205.5996163%2023.880859%205.6503906C23.865989%205.7011646%2023.846326%205.768146%2023.822266%205.8515625C23.774136%206.0183955%2023.709041%206.2482122%2023.630859%206.5214844C23.474496%207.0680287%2023.269926%207.787416%2023.066406%208.5019531C22.659368%209.9310274%2022.255859%2011.345703%2022.255859%2011.345703%20A%201.50015%201.50015%200%200%200%2022.255859%2011.349609C22.141471%2011.755416%2022.046189%2011.970637%2022.005859%2012.033203%20A%201.50015%201.50015%200%200%200%2022.003906%2012.037109C20.528039%2014.338252%2018.938262%2016.655605%2017.394531%2019L10.5%2019C8.0324991%2019%206%2021.032499%206%2023.5L6%2039.5C6%2041.967501%208.0324991%2044%2010.5%2044L14.5%2044C15.757335%2044%2016.892811%2043.465209%2017.712891%2042.621094C20.020827%2043.120886%2022.596814%2043.674636%2024.695312%2044.117188C25.795053%2044.349109%2026.761579%2044.550006%2027.490234%2044.697266C28.21796%2044.844337%2028.488997%2044.922925%2028.96875%2044.96875C29.276882%2044.99849%2029.582707%2045.013672%2029.884766%2045.013672C34.166546%2045.013672%2037.951276%2042.101357%2039.046875%2037.871094C39.884581%2034.63323%2041.600002%2027.921603%2041.607422%2027.892578C41.746989%2027.37849%2041.941717%2026.687301%2041.986328%2025.859375%20A%201.50015%201.50015%200%200%200%2041.986328%2025.857422C42.082078%2024.068723%2041.461123%2022.328247%2040.242188%2021.039062%20A%201.50015%201.50015%200%200%200%2040.242188%2021.037109C39.003328%2019.728222%2037.266509%2019.003801%2035.439453%2019%20A%201.50015%201.50015%200%200%200%2035.435547%2019L31.466797%2019C31.818422%2017.742495%2032.16537%2016.527227%2032.417969%2015.541016%20A%201.50015%201.50015%200%200%200%2032.417969%2015.539062C33.021899%2013.169223%2033.163006%2011.052777%2032.796875%209.0214844%20A%201.50015%201.50015%200%200%200%2032.796875%209.0195312C32.612962%208.0064557%2032.266053%206.5283049%2031.216797%205.1679688C30.454227%204.1798868%2029.406708%203.4604803%2028.21875%203.1621094%20A%201.50015%201.50015%200%200%200%2028.214844%203.1621094C27.787706%203.0556602%2027.336023%202.9975943%2026.886719%203.0234375%20z%20M%2027.083984%206.0097656C27.153229%206.0089389%2027.277677%206.0200946%2027.488281%206.0722656C28.020323%206.2058951%2028.434367%206.4720819%2028.841797%207C29.43854%207.7736637%2029.69161%208.705806%2029.845703%209.5546875C30.125167%2011.106826%2030.039576%2012.7275%2029.511719%2014.798828C29.151131%2016.206389%2028.056641%2020.09375%2028.056641%2020.09375%20A%201.50015%201.50015%200%200%200%2029.5%2022L35.435547%2022C36.491612%2022.0027%2037.39379%2022.393048%2038.0625%2023.099609C38.717564%2023.792425%2039.04448%2024.683965%2038.990234%2025.697266C38.966844%2026.13134%2038.851324%2026.59751%2038.712891%2027.107422%20A%201.50015%201.50015%200%200%200%2038.707031%2027.128906C38.707031%2027.128906%2036.979062%2033.886003%2036.142578%2037.119141C35.380177%2040.062877%2032.818985%2042.013672%2029.884766%2042.013672C29.676824%2042.013672%2029.467681%2042.002682%2029.257812%2041.982422%20A%201.50015%201.50015%200%200%200%2029.255859%2041.982422C29.484761%2042.004222%2028.797548%2041.902023%2028.083984%2041.757812C27.370421%2041.613604%2026.409589%2041.412593%2025.314453%2041.181641C23.401221%2040.778161%2021.082509%2040.278628%2018.935547%2039.814453C18.94375%2039.705129%2019%2039.611242%2019%2039.5L19%2022.011719C20.770748%2019.246238%2022.705347%2016.498683%2024.527344%2013.658203L24.529297%2013.65625C24.857875%2013.14567%2025.005183%2012.649533%2025.142578%2012.162109C25.143578%2012.158509%2025.544977%2010.748377%2025.951172%209.3222656C26.154528%208.6083028%2026.357942%207.891987%2026.513672%207.3476562C26.591532%207.0754909%2026.658135%206.8463076%2026.705078%206.6835938C26.728548%206.6022368%2026.746996%206.5377315%2026.759766%206.4941406C26.916091%206.0606215%2027.022027%206.0117998%2027.007812%206.0195312C27.000698%206.0234013%2027.014739%206.0105924%2027.083984%206.0097656%20z%20M%2010.5%2022L16%2022L16%2039.5C16%2040.346499%2015.346499%2041%2014.5%2041L10.5%2041C9.6535009%2041%209%2040.346499%209%2039.5L9%2023.5C9%2022.653501%209.6535009%2022%2010.5%2022%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",K9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M11.677734%202.1816406C11.255625%202.2202656%2010.879797%202.5279063%2010.779297%202.9726562L10.224609%205.4179688L7.5136719%208.4296875C7.1826719%208.7966875%207%209.2735781%207%209.7675781L7%2019C7%2020.105%207.895%2021%209%2021L17.03125%2021C17.77225%2021%2018.443141%2020.563719%2018.744141%2019.886719L21.746094%2013.130859C21.913094%2012.756859%2022%2012.351406%2022%2011.941406L22%2011C22%209.9%2021.1%209%2020%209L13%209C13%209%2014%206.6292813%2014%204.8632812C14%203.2502813%2012.962422%202.5443281%2012.107422%202.2363281C11.964672%202.1845781%2011.818437%202.1687656%2011.677734%202.1816406%20z%20M%203.5%209C2.672%209%202%209.672%202%2010.5L2%2019.5C2%2020.328%202.672%2021%203.5%2021C4.328%2021%205%2020.328%205%2019.5L5%2010.5C5%209.672%204.328%209%203.5%209%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",Q9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M10.5%207C6.9280619%207%204%209.9280619%204%2013.5L4%2030.5C4%2034.071938%206.9280619%2037%2010.5%2037L12%2037L12%2042.5C12%2044.46599%2014.427297%2045.67893%2016%2044.5L26%2037L37.5%2037C41.071938%2037%2044%2034.071938%2044%2030.5L44%2013.5C44%209.9280619%2041.071938%207%2037.5%207L10.5%207%20z%20M%2010.5%2010L37.5%2010C39.450062%2010%2041%2011.549938%2041%2013.5L41%2030.5C41%2032.450062%2039.450062%2034%2037.5%2034L25.5%2034%20A%201.50015%201.50015%200%200%200%2024.599609%2034.300781L15%2041.5L15%2035.5%20A%201.50015%201.50015%200%200%200%2013.5%2034L10.5%2034C8.5499381%2034%207%2032.450062%207%2030.5L7%2013.5C7%2011.549938%208.5499381%2010%2010.5%2010%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",Y9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M26%203%20A%201%201%200%200%200%2025.716797%203.0429688%20A%201%201%200%200%200%2025.636719%203.0683594L3.6503906%2010.060547L3.6503906%2010.064453%20A%201%201%200%200%200%203%2011%20A%201%201%200%200%200%203.4824219%2011.853516L10.164062%2017.154297L23.373047%206.6269531L12.845703%2019.835938L18.142578%2026.513672%20A%201%201%200%200%200%2019%2027%20A%201%201%200%200%200%2019.935547%2026.349609L19.939453%2026.349609L26.9375%204.34375%20A%201%201%200%200%200%2026.957031%204.2832031%20A%201%201%200%200%200%2027%204%20A%201%201%200%200%200%2026%203%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",X9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='480'%20height='480'%3e%3cpath%20d='M6%202C4.897%202%204%202.897%204%204L4%2020C4%2021.103%204.897%2022%206%2022L18%2022C19.103%2022%2020%2021.103%2020%2020L20%2015.25L18.001953%2016.748047L18.001953%2020L6%2020L6%204L18%204L18%207.25L20%208.75L20%204C20%202.897%2019.103%202%2018%202L6%202%20z%20M%2016%208.25L16%2011L11%2011L11%2013L16%2013L16%2015.75L21%2012L16%208.25%20z'%20fill='%23313131'%20/%3e%3c/svg%3e",J9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M12%203%20A%204%204%200%200%200%208%207%20A%204%204%200%200%200%2012%2011%20A%204%204%200%200%200%2016%207%20A%204%204%200%200%200%2012%203%20z%20M%2012%2014C8.996%2014%203%2015.508%203%2018.5L3%2020C3%2020.552%203.448%2021%204%2021L20%2021C20.552%2021%2021%2020.552%2021%2020L21%2018.5C21%2015.508%2015.004%2014%2012%2014%20z'%20/%3e%3c/svg%3e",Z9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M17,18H4c-1.105,0-2-0.895-2-2V6c0-1.105,0.895-2,2-2h13c1.105,0,2,0.895,2,2v10C19,17.105,18.105,18,17,18z'%20opacity='.35'%20/%3e%3ccircle%20cx='14.5'%20cy='7.5'%20r='1.5'%20/%3e%3cpath%20d='M4,15.125C4,15.604,4.364,16,4.812,16h11.375C16.636,16,17,15.611,17,15.125C17,13.932,15.829,12,14.969,12%20c-0.896,0-1.383,1.001-2.969,1.001C10.015,13.001,8.875,9,7.25,9S4,12.817,4,15.125z'%20/%3e%3cpath%20d='M20,6h-1v10c0,1.105-0.895,2-2,2H5c0,1.105,0.895,2,2,2h13c1.105,0,2-0.895,2-2V8C22,6.895,21.105,6,20,6z'%20/%3e%3c/svg%3e",eS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M14,15.5V8h3l-5-5L7,8h3v7.5c0,0.3,0.2,0.5,0.5,0.5h3C13.8,16,14,15.8,14,15.5z'%20opacity='.3'%20/%3e%3cpath%20d='M2%2020H22V22H2zM13.5%2017h-3C9.7%2017%209%2016.3%209%2015.5V9H4.6L12%201.6%2019.4%209H15v6.5C15%2016.3%2014.3%2017%2013.5%2017zM11%2015h2V7h1.6L12%204.4%209.4%207H11V15z'%20/%3e%3c/svg%3e",tS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M14.984375%200.98632812%20A%201.0001%201.0001%200%200%200%2014%202L14%205%20A%201.0001%201.0001%200%201%200%2016%205L16%202%20A%201.0001%201.0001%200%200%200%2014.984375%200.98632812%20z%20M%205.796875%204.7988281%20A%201.0001%201.0001%200%200%200%205.1015625%206.515625L7.2226562%208.6367188%20A%201.0001%201.0001%200%201%200%208.6367188%207.2226562L6.515625%205.1015625%20A%201.0001%201.0001%200%200%200%205.796875%204.7988281%20z%20M%2024.171875%204.7988281%20A%201.0001%201.0001%200%200%200%2023.484375%205.1015625L21.363281%207.2226562%20A%201.0001%201.0001%200%201%200%2022.777344%208.6367188L24.898438%206.515625%20A%201.0001%201.0001%200%200%200%2024.171875%204.7988281%20z%20M%2015%208%20A%207%207%200%200%200%208%2015%20A%207%207%200%200%200%2015%2022%20A%207%207%200%200%200%2022%2015%20A%207%207%200%200%200%2015%208%20z%20M%202%2014%20A%201.0001%201.0001%200%201%200%202%2016L5%2016%20A%201.0001%201.0001%200%201%200%205%2014L2%2014%20z%20M%2025%2014%20A%201.0001%201.0001%200%201%200%2025%2016L28%2016%20A%201.0001%201.0001%200%201%200%2028%2014L25%2014%20z%20M%207.9101562%2021.060547%20A%201.0001%201.0001%200%200%200%207.2226562%2021.363281L5.1015625%2023.484375%20A%201.0001%201.0001%200%201%200%206.515625%2024.898438L8.6367188%2022.777344%20A%201.0001%201.0001%200%200%200%207.9101562%2021.060547%20z%20M%2022.060547%2021.060547%20A%201.0001%201.0001%200%200%200%2021.363281%2022.777344L23.484375%2024.898438%20A%201.0001%201.0001%200%201%200%2024.898438%2023.484375L22.777344%2021.363281%20A%201.0001%201.0001%200%200%200%2022.060547%2021.060547%20z%20M%2014.984375%2023.986328%20A%201.0001%201.0001%200%200%200%2014%2025L14%2028%20A%201.0001%201.0001%200%201%200%2016%2028L16%2025%20A%201.0001%201.0001%200%200%200%2014.984375%2023.986328%20z'%20/%3e%3c/svg%3e",nS="/assets/dark-i8sdGySW.svg",rS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M12%2018.071L6.429%2012.5%204.929%2014%2012%2021.071%2019.071%2014%2017.571%2012.5z'%20/%3e%3cpath%20d='M4%2010H20V12H4z'%20transform='rotate(-90%2012%2011)'%20/%3e%3c/svg%3e",sS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M4,19V5c0-1.657,1.343-3,3-3h7l6,6v11c0,1.657-1.343,3-3,3H7C5.343,22,4,20.657,4,19z'%20opacity='.35'%20/%3e%3cpath%20d='M14,6V2l6,6h-4C14.895,8,14,7.105,14,6z'%20/%3e%3c/svg%3e",iS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M23.277344%204.0175781C15.193866%204.3983176%209%2011.343391%209%2019.380859L9%2026.648438L6.3496094%2031.980469%20A%201.50015%201.50015%200%200%200%206.3359375%2032.009766C5.2696804%2034.277268%206.9957076%2037%209.5019531%2037L18%2037C18%2040.295865%2020.704135%2043%2024%2043C27.295865%2043%2030%2040.295865%2030%2037L38.496094%2037C41.002339%2037%2042.730582%2034.277829%2041.664062%2032.009766%20A%201.50015%201.50015%200%200%200%2041.650391%2031.980469L39%2026.648438L39%2019C39%2010.493798%2031.863289%203.6133643%2023.277344%204.0175781%20z%20M%2023.417969%207.0136719C30.338024%206.6878857%2036%2012.162202%2036%2019L36%2027%20A%201.50015%201.50015%200%200%200%2036.15625%2027.667969L38.949219%2033.289062C39.128826%2033.674017%2038.921017%2034%2038.496094%2034L9.5019531%2034C9.077027%2034%208.8709034%2033.674574%209.0507812%2033.289062C9.0507812%2033.289062%209.0507812%2033.287109%209.0507812%2033.287109L11.84375%2027.667969%20A%201.50015%201.50015%200%200%200%2012%2027L12%2019.380859C12%2012.880328%2016.979446%207.3169324%2023.417969%207.0136719%20z%20M%2021%2037L27%2037C27%2038.674135%2025.674135%2040%2024%2040C22.325865%2040%2021%2038.674135%2021%2037%20z'%20/%3e%3c/svg%3e",oS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='144'%20height='144'%3e%3cpath%20d='M10.5%206C6.9280619%206%204%208.9280619%204%2012.5L4%2028.5L4%2034.535156C4%2036.486795%206.3899087%2037.705105%207.96875%2036.558594%20A%201.50015%201.50015%200%200%200%207.9707031%2036.558594L12.291016%2033.416016C13.114957%2036.061625%2015.594339%2038%2018.5%2038L31.011719%2038L40.029297%2044.558594%20A%201.50015%201.50015%200%200%200%2040.03125%2044.558594C41.610044%2045.705105%2044%2044.486795%2044%2042.535156L44%2036.5L44%2020.5C44%2016.928062%2041.071938%2014%2037.5%2014L36%2014L36%2012.5C36%208.9280619%2033.071938%206%2029.5%206L10.5%206%20z%20M%2010.5%209L29.5%209C31.450062%209%2033%2010.549938%2033%2012.5L33%2023.5C33%2025.450062%2031.450062%2027%2029.5%2027L16.5%2027%20A%201.50015%201.50015%200%200%200%2015.617188%2027.287109L7%2033.554688L7%2028.5L7%2012.5C7%2010.549938%208.5499381%209%2010.5%209%20z%20M%2036%2017L37.5%2017C39.450062%2017%2041%2018.549938%2041%2020.5L41%2036.5L41%2041.554688L32.382812%2035.287109%20A%201.50015%201.50015%200%200%200%2031.5%2035L18.5%2035C16.549938%2035%2015%2033.450062%2015%2031.5L15%2031.445312L16.988281%2030L29.5%2030C33.071938%2030%2036%2027.071938%2036%2023.5L36%2017%20z'%20/%3e%3c/svg%3e",aS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2026%2026'%20width='208'%20height='208'%3e%3cpath%20d='M5%201L10.3125%2011L4%2011L1%207L0%207L1%2013L0%2019L1%2019L4%2015L10.3125%2015L5%2025L7.1875%2025L15.90625%2015L24%2015C25.101563%2015%2026%2014.101563%2026%2013C26%2011.898438%2025.101563%2011%2024%2011L15.90625%2011L7.1875%201Z'%20/%3e%3c/svg%3e",lS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20width='512'%20height='512'%3e%3cpath%20d='M5.40625%205.40625C-0.441406%2011.253906%20-0.441406%2020.746094%205.40625%2026.59375L6.8125%2025.1875C1.726563%2020.101563%201.726563%2011.898438%206.8125%206.8125%20Z%20M%2026.59375%205.40625L25.1875%206.8125C30.273438%2011.898438%2030.273438%2020.101563%2025.1875%2025.1875L26.59375%2026.59375C32.441406%2020.746094%2032.441406%2011.253906%2026.59375%205.40625%20Z%20M%209.625%209.625C6.117188%2013.132813%206.117188%2018.867188%209.625%2022.375L11.0625%2020.9375C8.320313%2018.195313%208.320313%2013.804688%2011.0625%2011.0625%20Z%20M%2022.375%209.625L20.9375%2011.0625C23.679688%2013.804688%2023.679688%2018.195313%2020.9375%2020.9375L22.375%2022.375C25.882813%2018.867188%2025.882813%2013.132813%2022.375%209.625%20Z%20M%2016%2013C14.355469%2013%2013%2014.355469%2013%2016C13%2017.644531%2014.355469%2019%2016%2019C17.644531%2019%2019%2017.644531%2019%2016C19%2014.355469%2017.644531%2013%2016%2013%20Z%20M%2016%2015C16.5625%2015%2017%2015.4375%2017%2016C17%2016.5625%2016.5625%2017%2016%2017C15.4375%2017%2015%2016.5625%2015%2016C15%2015.4375%2015.4375%2015%2016%2015Z'%20/%3e%3c/svg%3e",cS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='240'%20height='240'%3e%3clinearGradient%20id='SO5UwR~UHtGc~sBTMNyFWa'%20x1='21.302'%20x2='27.254'%20y1='21.302'%20y2='27.254'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0'%20stop-color='%2332bdef'%20/%3e%3cstop%20offset='1'%20stop-color='%231ea2e4'%20/%3e%3c/linearGradient%3e%3ccircle%20cx='24'%20cy='24'%20r='4'%20fill='url(%23SO5UwR~UHtGc~sBTMNyFWa)'%20/%3e%3clinearGradient%20id='SO5UwR~UHtGc~sBTMNyFWb'%20x1='21.302'%20x2='27.254'%20y1='7.302'%20y2='13.254'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0'%20stop-color='%2332bdef'%20/%3e%3cstop%20offset='1'%20stop-color='%231ea2e4'%20/%3e%3c/linearGradient%3e%3ccircle%20cx='24'%20cy='10'%20r='4'%20fill='url(%23SO5UwR~UHtGc~sBTMNyFWb)'%20/%3e%3clinearGradient%20id='SO5UwR~UHtGc~sBTMNyFWc'%20x1='21.302'%20x2='27.254'%20y1='35.302'%20y2='41.254'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0'%20stop-color='%2332bdef'%20/%3e%3cstop%20offset='1'%20stop-color='%231ea2e4'%20/%3e%3c/linearGradient%3e%3ccircle%20cx='24'%20cy='38'%20r='4'%20fill='url(%23SO5UwR~UHtGc~sBTMNyFWc)'%20/%3e%3c/svg%3e",uS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M10%202L9%203L4%203L4%205L20%205L20%203L15%203L14%202L10%202%20z%20M%205%207L5%2022L14.220703%2022L16.230469%2020L14%2020L14%209L16%209L16%2015.978516L16.464844%2015.515625L17.878906%2014.101562L19%2015.222656L19%207L5%207%20z%20M%208%209L10%209L10%2020L8%2020L8%209%20z%20M%2017.878906%2016.929688L16.464844%2018.34375L18.585938%2020.464844L16.464844%2022.585938L17.878906%2024L20%2021.878906L22.121094%2024L23.535156%2022.585938L21.414062%2020.464844L23.535156%2018.34375L22.121094%2016.929688L20%2019.050781L17.878906%2016.929688%20z'%20/%3e%3c/svg%3e",hS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M20.011,3.989c-1.318-1.318-3.455-1.318-4.773,0L4.208,14.998c-0.302,0.302-0.503,0.689-0.576,1.11l-0.615,3.567c-0.133,0.772,0.538,1.442,1.31,1.308l3.525-0.613c0.418-0.073,0.804-0.273,1.104-0.573L20.011,8.761C21.33,7.443,21.33,5.307,20.011,3.989z'%20opacity='.35'%20/%3e%3cpolygon%20points='13.075,6.144%2017.848,10.917%2019.832,8.94%2015.059,4.167'%20/%3e%3cpath%20d='M3.392,17.5l-0.375,2.175c-0.133,0.772,0.538,1.442,1.31,1.308l2.171-0.378L3.392,17.5z'%20/%3e%3c/svg%3e",dS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='384'%20height='384'%3e%3cpath%20d='M16.414,7.586c-0.781-0.781-2.047-0.781-2.828,0l-6,6c-0.781,0.781-0.781,2.047,0,2.828c0.781,0.781,2.047,0.781,2.828,0l6-6C17.195,9.633,17.195,8.367,16.414,7.586z'%20/%3e%3cpath%20d='M20.389,3.611c-2.148-2.148-5.63-2.148-7.778,0c-0.171,0.171-0.829,0.829-1,1c-1.548,1.548-1.963,3.786-1.279,5.722%20c-1.936-0.684-4.173-0.27-5.721,1.278c-0.171,0.171-0.829,0.829-1,1c-2.148,2.148-2.148,5.63,0,7.778%20c2.148,2.148,5.63,2.148,7.778,0c0.171-0.171,0.829-0.829,1-1c1.548-1.548,1.963-3.786,1.279-5.722%20c1.936,0.684,4.173,0.27,5.721-1.278c0.171-0.171,0.829-0.829,1-1C22.537,9.241,22.537,5.759,20.389,3.611z'%20opacity='.35'%20/%3e%3c/svg%3e",fS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M15,3C8.373,3,3,8.373,3,15c0,6.627,5.373,12,12,12s12-5.373,12-12C27,8.373,21.627,3,15,3z%20M19.707,13.707%20C19.511,13.903,19.255,14,18.999,14H16v7c0,0.552-0.447,1-1,1s-1-0.448-1-1v-7h-2.999c-0.256,0-0.512-0.097-0.708-0.293%20c-0.391-0.391-0.391-1.023,0-1.414l4-4C14.488,8.098,14.744,8,15,8s0.512,0.098,0.707,0.293l4,4%20C20.098,12.684,20.098,13.316,19.707,13.707z'%20/%3e%3c/svg%3e",pS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='480'%20height='480'%3e%3cpath%20d='M15,3C8.373,3,3,8.373,3,15c0,6.627,5.373,12,12,12s12-5.373,12-12C27,8.373,21.627,3,15,3z%20M19.707,13.707%20C19.511,13.903,19.255,14,18.999,14H16v7c0,0.552-0.447,1-1,1s-1-0.448-1-1v-7h-2.999c-0.256,0-0.512-0.097-0.708-0.293%20c-0.391-0.391-0.391-1.023,0-1.414l4-4C14.488,8.098,14.744,8,15,8s0.512,0.098,0.707,0.293l4,4%20C20.098,12.684,20.098,13.316,19.707,13.707z'%20fill='%238D8D8D'%20/%3e%3c/svg%3e",mS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='96'%20height='96'%3e%3cpath%20d='M19.999,3H4.01c-1.1,0-2.001,0.9-2.001,2L2,16.999C2,18.104,2.895,19,4,19h1.499c0.276,0,0.5,0.224,0.5,0.5v2.086%20c0,0.891,1.077,1.337,1.707,0.707l3-3C10.894,19.105,11.148,19,11.413,19h8.586c1.1,0,2-0.9,2-2V5C21.999,3.9,21.099,3,19.999,3z%20M15.903,15c-0.492,0-0.883-0.363-0.988-0.843C14.472,12.147,12.455,12.006,12,12V14c0,0.404-0.243,0.769-0.617,0.924%20C11.259,14.975,11.129,15,11,15c-0.26,0-0.516-0.102-0.707-0.293l-3-3c-0.391-0.391-0.391-1.023,0-1.414l3-3%20c0.286-0.286,0.715-0.371,1.09-0.217C11.757,7.231,12,7.595,12,8v2v0c1.535,0,4.284,0.823,4.883,3.773%20C17.011,14.403,16.545,15,15.903,15z'%20fill='%23050505'%20/%3e%3c/svg%3e",gS={link:dS,reply:mS,sendLetter:fS,sendingLetter:pS,deleteIcon:uS,editPencil:hS,moreOption:cS,download:rS,offline:aS,online:lS,chat:oS,notification:iS,file:sS,light:tS,dark:nS,upload:eS,trueIcon:u9,falseIcon:h9,error:d9,down:f9,back:p9,thumbUp:m9,redo:g9,next:_9,finish:v9,history:y9,trash:w9,add:E9,edit:x9,save:T9,up:C9,clipboard:I9,admin:S9,menu:A9,home:R9,result:k9,help:N9,about:b9,update:P9,faq:L9,plus:D9,minus:O9,share:M9,review:j9,fullScreen:F9,search:V9,searchLeft:U9,close:$9,copy:z9,google:B9,refresh:W9,exit:H9,exam:q9,like:G9,liked:K9,comment:Q9,send:Y9,logout:X9,user:J9,image:Z9};function he(t){return gS[t]||null}const Re=({data:t})=>{const{clickFn:e,image:n}=t,r=he(n),{theme:s}=I.useContext(Z),i=()=>{e&&e()};return f.jsx("button",{onClick:i,className:`shadow-md border  rounded-full p-2 h-10 w-10  font-medium flex  justify-center items-center hover:opacity-70 transition-all ${s==="light"?"bg-gray-50/50 border-gray-200":"bg-slate-500/70 text-white border-slate-500/70"}`,children:f.jsx("img",{src:r})})};function _S(t,e){let n=!1;return e.forEach(r=>{r.id===t&&(n=!0)}),n}let P_;function vS(t){t(!0),clearTimeout(P_),P_=setTimeout(()=>{t(!1)},[4e3])}function wn(){scrollTo({top:0,behavior:"smooth"})}function fl(){const t=window.innerHeight,n=document.documentElement.scrollHeight-t;scrollTo({top:n+200,behavior:"smooth"})}function Cn(t){document.body.style.overflow=t}function qi(t,e){I.useEffect(()=>{const n=r=>{t.current&&!t.current.contains(r.target)&&e(!1)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[])}function v5(t){try{const e=t.split(":"),n=Number(e[0]),r=Number(e[1]),s=Number(e[2]);return`${K0(n,"hours")} ${K0(r,"minutes")} ${K0(s,"seconds")}`}catch{return null}}function K0(t,e){return t?`${t} ${e}`:""}function L_(t){return t>=10?t:`0${t}`}const xe=({data:t})=>{const{clickFn:e,text:n,image:r}=t,s=he(r),{theme:i}=I.useContext(Z),o=()=>{e&&e()};return f.jsxs("button",{onClick:o,className:`min-h-10 shadow-md hover:opacity-70 border  font-medium px-2 py-1 rounded-lg flex justify-center items-center gap-x-1 transition-all ${i==="light"?"bg-blue-200/60 border-gray-200":"bg-blue-200/60 text-white border-slate-500/70"}`,children:[r&&f.jsx("img",{className:" h-7",src:s}),n&&f.jsx("span",{children:n})]})},Pi=({data:t})=>{const{yesButton:e,noButton:n,text:r,setValue:s}=t,{theme:i}=I.useContext(Z),o=I.useRef(null);return qi(o,s),I.useEffect(()=>(Cn("hidden"),()=>{Cn("auto")}),[]),f.jsx("div",{className:"fixed flex items-center z-20 bg-black/60 justify-center top-0 left-0 right-0 bottom-0",children:f.jsx("div",{ref:o,className:`w-4/5 sm:w-3/5 md:w-2/5 min-h-40 grid gap-y-3 rounded-md items-center border  ${i==="light"?"border-gray-300 bg-white":"border-slate-500/70 text-white bg-slate-600"}`,children:f.jsxs("div",{children:[f.jsx("div",{className:"text-center",children:r}),f.jsxs("div",{className:"flex justify-center mt-2 items-center gap-x-3 ",children:[f.jsx(xe,{data:{clickFn:e,image:"trueIcon",text:"Yes"}}),f.jsx(xe,{data:{clickFn:n,image:"falseIcon",text:"No"}})]})]})})})},yS=({data:t})=>{const{pageTitle:e,currentPage:n,totalPage:r,percentage:s,answerLength:i,questionsLength:o}=t,{stopTest:a,formattedTime:l,theme:c}=I.useContext(Z),[u,h]=I.useState(!1),d=()=>{a(),h(!1)},p=()=>{h(!1)};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:" font-medium text-lg flex items-center justify-start",children:[f.jsx(Re,{data:{clickFn:()=>h(!0),image:"back"}}),f.jsx("div",{className:`ml-2 ${c==="light"?"":"text-white"}`,children:e}),u&&f.jsx(Pi,{data:{yesButton:d,noButton:p,text:"Are you sure to stop the test ?",setValue:h}})]}),f.jsxs("div",{className:`flex justify-between items-center sticky left-0 pt-1 right-0 z-10 ${c==="light"?"":"text-white"}`,children:[f.jsxs("div",{children:["Page ",n," of ",r]}),f.jsxs("div",{className:`w-2/3 border h-7 relative ${c==="light"?"border-gray-300":"border-slate-500/70"}`,children:[f.jsx("div",{style:{width:`${s}%`},className:`text-center h-full ${c==="light"?"bg-lime-200":"bg-slate-500/70"}`}),f.jsxs("div",{className:"absolute top-0 left-2 font-medium",children:[i," ","/"," ",o]})]}),f.jsx("div",{className:"min-h-12 font-medium fixed right-0 top-1/4 h-10 min-w-20 bg-lime-200/50 backdrop-blur-lg flex items-center justify-center rounded-bl-lg rounded-tl-lg border-r-4 border-r-blue-400",children:l})]})]})},wS=({data:t})=>{const{currentQuestions:e,chooseAnswer:n}=t,{answeredQuestions:r,theme:s}=I.useContext(Z);return f.jsx("div",{children:e.map((i,o)=>f.jsxs("div",{children:[f.jsxs("div",{className:`grid gap-y-2 ${s==="light"?"":"text-white"}`,children:[f.jsxs("div",{className:"flex gap-x-3 items-center",children:[f.jsx("div",{className:"bg-blue-600 rounded-sm shadow-lg h-9 w-9 text-white font-bold flex justify-center items-center ",children:i.id}),f.jsx("div",{className:"flex-1 font-padauk",children:i.question})]}),f.jsx("div",{className:"grid gap-y-2",children:i.choices.map((a,l)=>{let c,u=!1;return r.forEach(h=>{i.id===h.id&&(c=h)}),(c==null?void 0:c.userAnswer)===a&&(u=!0),f.jsxs("div",{onClick:()=>{n(i.id,a)},className:`border  h-12 flex gap-x-3 p-2 cursor-pointer items-center rounded-lg font-padauk ${s==="light"?`${u?"border-blue-500 border-dotted font-bold bg-lime-50":"border-lime-200 hover:bg-slate-50"}`:`${u?"border-slate-500/70 border-dotted font-bold bg-slate-500/70":"border-slate-500/70 hover:bg-slate-500/70"}`}`,children:[f.jsx("input",{onChange:()=>{n(i.id,a)},className:"h-5 w-5",name:`question-${i.id}`,type:"radio",checked:!!u}),f.jsx("div",{children:a})]},`choice-${i.id}-${l}-${a}`)})})]}),f.jsx(ES,{})]},`question-${i.id}-${o}-${i.question}`))})},ES=()=>f.jsx("div",{className:" border border-dashed border-gray-500 mb-7 mt-7"}),xS=()=>(I.useContext(Z),f.jsxs("div",{className:"flex gap-x-2 items-center",children:[f.jsx("img",{className:"w-8 ",src:he("error")}),f.jsx("div",{className:"text-red-600 font-bold",children:"You need to answer all questions before proceeding!"})]}));/**
 * @remix-run/router v1.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $l(){return $l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$l.apply(this,arguments)}var ys;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ys||(ys={}));const D_="popstate";function TS(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=Gi(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),w2("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:ph(i))}function r(s,i){yd(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return IS(e,n,r,t)}function ot(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CS(){return Math.random().toString(36).substr(2,8)}function O_(t,e){return{usr:t.state,key:t.key,idx:e}}function w2(t,e,n,r){return n===void 0&&(n=null),$l({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Gi(e):e,{state:n,key:e&&e.key||r||CS()})}function ph(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Gi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function IS(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=ys.Pop,l=null,c=u();c==null&&(c=0,o.replaceState($l({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=ys.Pop;let x=u(),m=x==null?null:x-c;c=x,l&&l({action:a,location:_.location,delta:m})}function d(x,m){a=ys.Push;let v=w2(_.location,x,m);n&&n(v,x),c=u()+1;let y=O_(v,c),C=_.createHref(v);try{o.pushState(y,"",C)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(C)}i&&l&&l({action:a,location:_.location,delta:1})}function p(x,m){a=ys.Replace;let v=w2(_.location,x,m);n&&n(v,x),c=u();let y=O_(v,c),C=_.createHref(v);o.replaceState(y,"",C),i&&l&&l({action:a,location:_.location,delta:0})}function g(x){let m=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof x=="string"?x:ph(x);return ot(m,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,m)}let _={get action(){return a},get location(){return t(s,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(D_,h),l=x,()=>{s.removeEventListener(D_,h),l=null}},createHref(x){return e(s,x)},createURL:g,encodeLocation(x){let m=g(x);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:d,replace:p,go(x){return o.go(x)}};return _}var M_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(M_||(M_={}));function SS(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Gi(e):e,s=pm(r.pathname||"/",n);if(s==null)return null;let i=y5(t);AS(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=MS(i[a],VS(s));return o}function y5(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(ot(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ks([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(ot(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),y5(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:DS(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of w5(i.path))s(i,o,l)}),e}function w5(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=w5(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function AS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:OS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const RS=/^:[\w-]+$/,kS=3,NS=2,bS=1,PS=10,LS=-2,j_=t=>t==="*";function DS(t,e){let n=t.split("/"),r=n.length;return n.some(j_)&&(r+=LS),e&&(r+=NS),n.filter(s=>!j_(s)).reduce((s,i)=>s+(RS.test(i)?kS:i===""?bS:PS),r)}function OS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function MS(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",u=jS({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let h=a.route;i.push({params:r,pathname:ks([s,u.pathname]),pathnameBase:WS(ks([s,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(s=ks([s,u.pathnameBase]))}return i}function jS(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=FS(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:d,isOptional:p}=u;if(d==="*"){let _=a[h]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const g=a[h];return p&&!g?c[d]=void 0:c[d]=US(g||"",d),c},{}),pathname:i,pathnameBase:o,pattern:t}}function FS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),yd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function VS(t){try{return decodeURI(t)}catch(e){return yd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function US(t,e){try{return decodeURIComponent(t)}catch(n){return yd(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function pm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function $S(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Gi(t):t;return{pathname:n?n.startsWith("/")?n:zS(n,e):e,search:HS(r),hash:qS(s)}}function zS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Q0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function BS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function E5(t,e){let n=BS(t);return e?n.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function x5(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Gi(t):(s=$l({},t),ot(!s.pathname||!s.pathname.includes("?"),Q0("?","pathname","search",s)),ot(!s.pathname||!s.pathname.includes("#"),Q0("#","pathname","hash",s)),ot(!s.search||!s.search.includes("#"),Q0("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;s.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=$S(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const ks=t=>t.join("/").replace(/\/\/+/g,"/"),WS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),HS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function GS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const T5=["post","put","patch","delete"];new Set(T5);const KS=["get",...T5];new Set(KS);/**
 * React Router v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zl(){return zl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zl.apply(this,arguments)}const mm=I.createContext(null),QS=I.createContext(null),Ki=I.createContext(null),wd=I.createContext(null),Hs=I.createContext({outlet:null,matches:[],isDataRoute:!1}),C5=I.createContext(null);function YS(t,e){let{relative:n}=e===void 0?{}:e;_c()||ot(!1);let{basename:r,navigator:s}=I.useContext(Ki),{hash:i,pathname:o,search:a}=S5(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ks([r,o])),s.createHref({pathname:l,search:a,hash:i})}function _c(){return I.useContext(wd)!=null}function fa(){return _c()||ot(!1),I.useContext(wd).location}function I5(t){I.useContext(Ki).static||I.useLayoutEffect(t)}function kn(){let{isDataRoute:t}=I.useContext(Hs);return t?cA():XS()}function XS(){_c()||ot(!1);let t=I.useContext(mm),{basename:e,future:n,navigator:r}=I.useContext(Ki),{matches:s}=I.useContext(Hs),{pathname:i}=fa(),o=JSON.stringify(E5(s,n.v7_relativeSplatPath)),a=I.useRef(!1);return I5(()=>{a.current=!0}),I.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=x5(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ks([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,i,t])}function gm(){let{matches:t}=I.useContext(Hs),e=t[t.length-1];return e?e.params:{}}function S5(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=I.useContext(Ki),{matches:s}=I.useContext(Hs),{pathname:i}=fa(),o=JSON.stringify(E5(s,r.v7_relativeSplatPath));return I.useMemo(()=>x5(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function JS(t,e){return ZS(t,e)}function ZS(t,e,n,r){_c()||ot(!1);let{navigator:s}=I.useContext(Ki),{matches:i}=I.useContext(Hs),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=fa(),u;if(e){var h;let x=typeof e=="string"?Gi(e):e;l==="/"||(h=x.pathname)!=null&&h.startsWith(l)||ot(!1),u=x}else u=c;let d=u.pathname||"/",p=l==="/"?d:d.slice(l.length)||"/",g=SS(t,{pathname:p}),_=sA(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:ks([l,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:ks([l,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,n,r);return e&&_?I.createElement(wd.Provider,{value:{location:zl({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ys.Pop}},_):_}function eA(){let t=lA(),e=GS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:s},n):null,i)}const tA=I.createElement(eA,null);class nA extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?I.createElement(Hs.Provider,{value:this.props.routeContext},I.createElement(C5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rA(t){let{routeContext:e,match:n,children:r}=t,s=I.useContext(mm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(Hs.Provider,{value:e},r)}function sA(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id]));u>=0||ot(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:d,errors:p}=n,g=h.route.loader&&d[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,d)=>{let p,g=!1,_=null,x=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,_=h.route.errorElement||tA,l&&(c<0&&d===0?(uA("route-fallback",!1),g=!0,x=null):c===d&&(g=!0,x=h.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,d+1)),v=()=>{let y;return p?y=_:g?y=x:h.route.Component?y=I.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=u,I.createElement(rA,{match:h,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:y})};return n&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?I.createElement(nA,{location:n.location,revalidation:n.revalidation,component:_,error:p,children:v(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):v()},null)}var A5=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(A5||{}),mh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(mh||{});function iA(t){let e=I.useContext(mm);return e||ot(!1),e}function oA(t){let e=I.useContext(QS);return e||ot(!1),e}function aA(t){let e=I.useContext(Hs);return e||ot(!1),e}function R5(t){let e=aA(),n=e.matches[e.matches.length-1];return n.route.id||ot(!1),n.route.id}function lA(){var t;let e=I.useContext(C5),n=oA(mh.UseRouteError),r=R5(mh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function cA(){let{router:t}=iA(A5.UseNavigateStable),e=R5(mh.UseNavigateStable),n=I.useRef(!1);return I5(()=>{n.current=!0}),I.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,zl({fromRouteId:e},i)))},[t,e])}const F_={};function uA(t,e,n){!e&&!F_[t]&&(F_[t]=!0)}function Yt(t){ot(!1)}function hA(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ys.Pop,navigator:i,static:o=!1,future:a}=t;_c()&&ot(!1);let l=e.replace(/^\/*/,"/"),c=I.useMemo(()=>({basename:l,navigator:i,static:o,future:zl({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Gi(r));let{pathname:u="/",search:h="",hash:d="",state:p=null,key:g="default"}=r,_=I.useMemo(()=>{let x=pm(u,l);return x==null?null:{location:{pathname:x,search:h,hash:d,state:p,key:g},navigationType:s}},[l,u,h,d,p,g,s]);return _==null?null:I.createElement(Ki.Provider,{value:c},I.createElement(wd.Provider,{children:n,value:_}))}function dA(t){let{children:e,location:n}=t;return JS(E2(e),n)}new Promise(()=>{});function E2(t,e){e===void 0&&(e=[]);let n=[];return I.Children.forEach(t,(r,s)=>{if(!I.isValidElement(r))return;let i=[...e,s];if(r.type===I.Fragment){n.push.apply(n,E2(r.props.children,i));return}r.type!==Yt&&ot(!1),!r.props.index||!r.props.children||ot(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=E2(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function x2(){return x2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x2.apply(this,arguments)}function fA(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function pA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function mA(t,e){return t.button===0&&(!e||e==="_self")&&!pA(t)}const gA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],_A="6";try{window.__reactRouterVersion=_A}catch{}const vA="startTransition",V_=ZC[vA];function yA(t){let{basename:e,children:n,future:r,window:s}=t,i=I.useRef();i.current==null&&(i.current=TS({window:s,v5Compat:!0}));let o=i.current,[a,l]=I.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=I.useCallback(h=>{c&&V_?V_(()=>l(h)):l(h)},[l,c]);return I.useLayoutEffect(()=>o.listen(u),[o,u]),I.createElement(hA,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const wA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",EA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,k5=I.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:h}=e,d=fA(e,gA),{basename:p}=I.useContext(Ki),g,_=!1;if(typeof c=="string"&&EA.test(c)&&(g=c,wA))try{let y=new URL(window.location.href),C=c.startsWith("//")?new URL(y.protocol+c):new URL(c),N=pm(C.pathname,p);C.origin===y.origin&&N!=null?c=N+C.search+C.hash:_=!0}catch{}let x=YS(c,{relative:s}),m=xA(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,unstable_viewTransition:h});function v(y){r&&r(y),y.defaultPrevented||m(y)}return I.createElement("a",x2({},d,{href:g||x,onClick:_||i?r:v,ref:n,target:l}))});var U_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(U_||(U_={}));var $_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($_||($_={}));function xA(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=kn(),c=fa(),u=S5(t,{relative:o});return I.useCallback(h=>{if(mA(h,n)){h.preventDefault();let d=r!==void 0?r:ph(c)===ph(u);l(t,{replace:d,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:a})}},[c,l,u,r,s,n,t,i,o,a])}function TA(t,e,n){const r=e.name,s=CA(t,e.quizzes),i=IA(s),o=t.length,a=e.gradingRules.length!==0?SA(i,e.gradingRules)||"There is an error in your grading rules":"Level is not defined",l=AA(),c=RA();return{testName:r,results:s,score:i,totalScore:o,level:a,date:l,time:c,timeTaken:n}}function CA(t,e){return e.map(r=>{const{id:s,question:i,answer:o}=r;let a;t.forEach(c=>{s===c.id&&(a=c)});const{userAnswer:l}=a;return l===r.answer?{id:s,question:i,userAnswer:l,answer:o,isTrue:!0}:{id:s,question:i,userAnswer:l,answer:o,isTrue:!1}})}function IA(t){let e=0;return t.forEach(n=>{n.isTrue&&e++}),e}function SA(t,e){let n;try{e.forEach(r=>{t>=Number(r.from)&&t<=Number(r.to)&&(n=r.level)})}catch(r){console.log(r.message)}return n}function AA(){const t=new Date,e=t.getDate(),n=t.getMonth()+1,r=t.getFullYear();return`${e}/${n}/${r}`}function RA(){const t=new Date;let e=t.getHours();const n=t.getMinutes(),r=e>12?"PM":"AM";e=e%12||12;const s=n<10?`0${n}`:n;return`${e}:${s} ${r}`}var z_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K=function(t,e){if(!t)throw pa(e)},pa=function(t){return new Error("Firebase Database ("+N5.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},kA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},_m={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(d=64)),r.push(n[u],n[h],n[d],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(b5(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new NA;const d=i<<2|a>>4;if(r.push(d),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const g=c<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class NA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const P5=function(t){const e=b5(t);return _m.encodeByteArray(e,!0)},gh=function(t){return P5(t).replace(/\./g,"")},_h=function(t){try{return _m.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t){return L5(void 0,t)}function L5(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!PA(n)||(t[n]=L5(t[n],e[n]));return t}function PA(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=()=>LA().__FIREBASE_DEFAULTS__,OA=()=>{if(typeof process>"u"||typeof z_>"u")return;const t=z_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},MA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_h(t[1]);return e&&JSON.parse(e)},Ed=()=>{try{return DA()||OA()||MA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},D5=t=>{var e,n;return(n=(e=Ed())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},vm=t=>{const e=D5(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},O5=()=>{var t;return(t=Ed())===null||t===void 0?void 0:t.config},M5=t=>{var e;return(e=Ed())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[gh(JSON.stringify(n)),gh(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Em(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function jA(){var t;const e=(t=Ed())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function j5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VA(){const t=at();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function F5(){return N5.NODE_ADMIN===!0}function UA(){return!jA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V5(){try{return typeof indexedDB=="object"}catch{return!1}}function $A(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="FirebaseError";class Sr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=zA,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vc.prototype.create)}}class vc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?BA(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Sr(s,a,r)}}function BA(t,e){return t.replace(WA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const WA=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t){return JSON.parse(t)}function Ct(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Bl(_h(i[0])||""),n=Bl(_h(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},HA=function(t){const e=U5(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},qA=function(t){const e=U5(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Yo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function T2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vh(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Wl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(B_(i)&&B_(o)){if(!Wl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function B_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ja(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(d<<1|d>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^i&(o^a),u=1518500249):(c=i^o^a,u=1859775393):h<60?(c=i&o|a&(i|o),u=2400959708):(c=i^o^a,u=3395469782);const d=(s<<5|s>>>27)+c+l+u+r[h]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=d}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function KA(t,e){const n=new QA(t,e);return n.subscribe.bind(n)}class QA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");YA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Y0),s.error===void 0&&(s.error=Y0),s.complete===void 0&&(s.complete=Y0);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Y0(){}function XA(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,K(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},xd=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t){return t&&t._delegate?t._delegate:t}class Gr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ym;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(t8(e))try{this.getOrInitializeService({instanceIdentifier:oi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oi){return this.instances.has(e)}getOptions(e=oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:e8(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=oi){return this.component?this.component.multipleInstances?e:oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function e8(t){return t===oi?void 0:t}function t8(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ce||(ce={}));const r8={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},s8=ce.INFO,i8={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},o8=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=i8[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Td{constructor(e){this.name=e,this._logLevel=s8,this._logHandler=o8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?r8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}}const a8=(t,e)=>e.some(n=>t instanceof n);let W_,H_;function l8(){return W_||(W_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c8(){return H_||(H_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $5=new WeakMap,C2=new WeakMap,z5=new WeakMap,X0=new WeakMap,xm=new WeakMap;function u8(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ns(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&$5.set(n,t)}).catch(()=>{}),xm.set(e,t),e}function h8(t){if(C2.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});C2.set(t,e)}let I2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return C2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||z5.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ns(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function d8(t){I2=t(I2)}function f8(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(J0(this),e,...n);return z5.set(r,e.sort?e.sort():[e]),Ns(r)}:c8().includes(t)?function(...e){return t.apply(J0(this),e),Ns($5.get(this))}:function(...e){return Ns(t.apply(J0(this),e))}}function p8(t){return typeof t=="function"?f8(t):(t instanceof IDBTransaction&&h8(t),a8(t,l8())?new Proxy(t,I2):t)}function Ns(t){if(t instanceof IDBRequest)return u8(t);if(X0.has(t))return X0.get(t);const e=p8(t);return e!==t&&(X0.set(t,e),xm.set(e,t)),e}const J0=t=>xm.get(t);function m8(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ns(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ns(o.result),l.oldVersion,l.newVersion,Ns(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const g8=["get","getKey","getAll","getAllKeys","count"],_8=["put","add","delete","clear"],Z0=new Map;function q_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Z0.get(e))return Z0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=_8.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||g8.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Z0.set(e,i),i}d8(t=>({...t,get:(e,n,r)=>q_(e,n)||t.get(e,n,r),has:(e,n)=>!!q_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(y8(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function y8(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const S2="@firebase/app",G_="0.9.29";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=new Td("@firebase/app"),w8="@firebase/app-compat",E8="@firebase/analytics-compat",x8="@firebase/analytics",T8="@firebase/app-check-compat",C8="@firebase/app-check",I8="@firebase/auth",S8="@firebase/auth-compat",A8="@firebase/database",R8="@firebase/database-compat",k8="@firebase/functions",N8="@firebase/functions-compat",b8="@firebase/installations",P8="@firebase/installations-compat",L8="@firebase/messaging",D8="@firebase/messaging-compat",O8="@firebase/performance",M8="@firebase/performance-compat",j8="@firebase/remote-config",F8="@firebase/remote-config-compat",V8="@firebase/storage",U8="@firebase/storage-compat",$8="@firebase/firestore",z8="@firebase/firestore-compat",B8="firebase",W8="10.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2="[DEFAULT]",H8={[S2]:"fire-core",[w8]:"fire-core-compat",[x8]:"fire-analytics",[E8]:"fire-analytics-compat",[C8]:"fire-app-check",[T8]:"fire-app-check-compat",[I8]:"fire-auth",[S8]:"fire-auth-compat",[A8]:"fire-rtdb",[R8]:"fire-rtdb-compat",[k8]:"fire-fn",[N8]:"fire-fn-compat",[b8]:"fire-iid",[P8]:"fire-iid-compat",[L8]:"fire-fcm",[D8]:"fire-fcm-compat",[O8]:"fire-perf",[M8]:"fire-perf-compat",[j8]:"fire-rc",[F8]:"fire-rc-compat",[V8]:"fire-gcs",[U8]:"fire-gcs-compat",[$8]:"fire-fst",[z8]:"fire-fst-compat","fire-js":"fire-js",[B8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new Map,R2=new Map;function q8(t,e){try{t.container.addComponent(e)}catch(n){Li.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function js(t){const e=t.name;if(R2.has(e))return Li.debug(`There were multiple attempts to register component ${e}.`),!1;R2.set(e,t);for(const n of yh.values())q8(n,t);return!0}function yc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},bs=new vc("app","Firebase",G8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=W8;function B5(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:A2,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw bs.create("bad-app-name",{appName:String(s)});if(n||(n=O5()),!n)throw bs.create("no-options");const i=yh.get(s);if(i){if(Wl(n,i.options)&&Wl(r,i.config))return i;throw bs.create("duplicate-app",{appName:s})}const o=new n8(s);for(const l of R2.values())o.addComponent(l);const a=new K8(n,r,o);return yh.set(s,a),a}function Cd(t=A2){const e=yh.get(t);if(!e&&t===A2&&O5())return B5();if(!e)throw bs.create("no-app",{appName:t});return e}function Vn(t,e,n){var r;let s=(r=H8[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Li.warn(a.join(" "));return}js(new Gr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q8="firebase-heartbeat-database",Y8=1,Hl="firebase-heartbeat-store";let ef=null;function W5(){return ef||(ef=m8(Q8,Y8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hl)}catch(n){console.warn(n)}}}}).catch(t=>{throw bs.create("idb-open",{originalErrorMessage:t.message})})),ef}async function X8(t){try{const n=(await W5()).transaction(Hl),r=await n.objectStore(Hl).get(H5(t));return await n.done,r}catch(e){if(e instanceof Sr)Li.warn(e.message);else{const n=bs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Li.warn(n.message)}}}async function K_(t,e){try{const r=(await W5()).transaction(Hl,"readwrite");await r.objectStore(Hl).put(e,H5(t)),await r.done}catch(n){if(n instanceof Sr)Li.warn(n.message);else{const r=bs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Li.warn(r.message)}}}function H5(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8=1024,Z8=30*24*60*60*1e3;class e7{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new n7(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Q_();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Z8}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Q_(),{heartbeatsToSend:r,unsentEntries:s}=t7(this._heartbeatsCache.heartbeats),i=gh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Q_(){return new Date().toISOString().substring(0,10)}function t7(t,e=J8){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Y_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Y_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class n7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return V5()?$A().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await X8(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return K_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return K_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Y_(t){return gh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r7(t){js(new Gr("platform-logger",e=>new v8(e),"PRIVATE")),js(new Gr("heartbeat",e=>new e7(e),"PRIVATE")),Vn(S2,G_,t),Vn(S2,G_,"esm2017"),Vn("fire-js","")}r7("");var s7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Q,Tm=Tm||{},oe=s7||self;function Id(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function wc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function i7(t){return Object.prototype.hasOwnProperty.call(t,tf)&&t[tf]||(t[tf]=++o7)}var tf="closure_uid_"+(1e9*Math.random()>>>0),o7=0;function a7(t,e,n){return t.call.apply(t.bind,arguments)}function l7(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function zt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?zt=a7:zt=l7,zt.apply(null,arguments)}function uu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function wt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Gs(){this.s=this.s,this.o=this.o}var c7=0;Gs.prototype.s=!1;Gs.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),c7!=0)&&i7(this)};Gs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const q5=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Cm(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function X_(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Id(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function Bt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Bt.prototype.h=function(){this.defaultPrevented=!0};var u7=function(){if(!oe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};oe.addEventListener("test",n,e),oe.removeEventListener("test",n,e)}catch{}return t}();function ql(t){return/^[\s\xa0]*$/.test(t)}function Sd(){var t=oe.navigator;return t&&(t=t.userAgent)?t:""}function hr(t){return Sd().indexOf(t)!=-1}function Im(t){return Im[" "](t),t}Im[" "]=function(){};function h7(t,e){var n=rR;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var d7=hr("Opera"),Xo=hr("Trident")||hr("MSIE"),G5=hr("Edge"),k2=G5||Xo,K5=hr("Gecko")&&!(Sd().toLowerCase().indexOf("webkit")!=-1&&!hr("Edge"))&&!(hr("Trident")||hr("MSIE"))&&!hr("Edge"),f7=Sd().toLowerCase().indexOf("webkit")!=-1&&!hr("Edge");function Q5(){var t=oe.document;return t?t.documentMode:void 0}var N2;e:{var nf="",rf=function(){var t=Sd();if(K5)return/rv:([^\);]+)(\)|;)/.exec(t);if(G5)return/Edge\/([\d\.]+)/.exec(t);if(Xo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(f7)return/WebKit\/(\S+)/.exec(t);if(d7)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(rf&&(nf=rf?rf[1]:""),Xo){var sf=Q5();if(sf!=null&&sf>parseFloat(nf)){N2=String(sf);break e}}N2=nf}var b2;if(oe.document&&Xo){var J_=Q5();b2=J_||parseInt(N2,10)||void 0}else b2=void 0;var p7=b2;function Gl(t,e){if(Bt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(K5){e:{try{Im(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:m7[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Gl.$.h.call(this)}}wt(Gl,Bt);var m7={2:"touch",3:"pen",4:"mouse"};Gl.prototype.h=function(){Gl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ec="closure_listenable_"+(1e6*Math.random()|0),g7=0;function _7(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++g7,this.fa=this.ia=!1}function Ad(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Sm(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function v7(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function Y5(t){const e={};for(const n in t)e[n]=t[n];return e}const Z_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X5(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<Z_.length;i++)n=Z_[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Rd(t){this.src=t,this.g={},this.h=0}Rd.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=L2(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new _7(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function P2(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=q5(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Ad(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function L2(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var Am="closure_lm_"+(1e6*Math.random()|0),of={};function J5(t,e,n,r,s){if(r&&r.once)return eE(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)J5(t,e[i],n,r,s);return null}return n=Nm(n),t&&t[Ec]?t.O(e,n,wc(r)?!!r.capture:!!r,s):Z5(t,e,n,!1,r,s)}function Z5(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=wc(s)?!!s.capture:!!s,a=km(t);if(a||(t[Am]=a=new Rd(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=y7(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)u7||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(nE(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function y7(){function t(n){return e.call(t.src,t.listener,n)}const e=w7;return t}function eE(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)eE(t,e[i],n,r,s);return null}return n=Nm(n),t&&t[Ec]?t.P(e,n,wc(r)?!!r.capture:!!r,s):Z5(t,e,n,!0,r,s)}function tE(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)tE(t,e[i],n,r,s);else r=wc(r)?!!r.capture:!!r,n=Nm(n),t&&t[Ec]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=L2(i,n,r,s),-1<n&&(Ad(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=km(t))&&(e=t.g[e.toString()],t=-1,e&&(t=L2(e,n,r,s)),(n=-1<t?e[t]:null)&&Rm(n))}function Rm(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Ec])P2(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(nE(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=km(e))?(P2(n,t),n.h==0&&(n.src=null,e[Am]=null)):Ad(t)}}}function nE(t){return t in of?of[t]:of[t]="on"+t}function w7(t,e){if(t.fa)t=!0;else{e=new Gl(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Rm(t),t=n.call(r,e)}return t}function km(t){return t=t[Am],t instanceof Rd?t:null}var af="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nm(t){return typeof t=="function"?t:(t[af]||(t[af]=function(e){return t.handleEvent(e)}),t[af])}function yt(){Gs.call(this),this.i=new Rd(this),this.S=this,this.J=null}wt(yt,Gs);yt.prototype[Ec]=!0;yt.prototype.removeEventListener=function(t,e,n,r){tE(this,t,e,n,r)};function At(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Bt(e,t);else if(e instanceof Bt)e.target=e.target||t;else{var s=e;e=new Bt(r,t),X5(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=hu(o,r,!0,e)&&s}if(o=e.g=t,s=hu(o,r,!0,e)&&s,s=hu(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=hu(o,r,!1,e)&&s}yt.prototype.N=function(){if(yt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ad(n[r]);delete t.g[e],t.h--}}this.J=null};yt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};yt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function hu(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&P2(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var bm=oe.JSON.stringify;class E7{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function x7(){var t=Pm;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class T7{constructor(){this.h=this.g=null}add(e,n){const r=rE.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var rE=new E7(()=>new C7,t=>t.reset());class C7{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function I7(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function S7(t){oe.setTimeout(()=>{throw t},0)}let Kl,Ql=!1,Pm=new T7,sE=()=>{const t=oe.Promise.resolve(void 0);Kl=()=>{t.then(A7)}};var A7=()=>{for(var t;t=x7();){try{t.h.call(t.g)}catch(n){S7(n)}var e=rE;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ql=!1};function kd(t,e){yt.call(this),this.h=t||1,this.g=e||oe,this.j=zt(this.qb,this),this.l=Date.now()}wt(kd,yt);Q=kd.prototype;Q.ga=!1;Q.T=null;Q.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),At(this,"tick"),this.ga&&(Lm(this),this.start()))}};Q.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Lm(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}Q.N=function(){kd.$.N.call(this),Lm(this),delete this.g};function Dm(t,e,n){if(typeof t=="function")n&&(t=zt(t,n));else if(t&&typeof t.handleEvent=="function")t=zt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:oe.setTimeout(t,e||0)}function iE(t){t.g=Dm(()=>{t.g=null,t.i&&(t.i=!1,iE(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class R7 extends Gs{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:iE(this)}N(){super.N(),this.g&&(oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yl(t){Gs.call(this),this.h=t,this.g={}}wt(Yl,Gs);var ev=[];function oE(t,e,n,r){Array.isArray(n)||(n&&(ev[0]=n.toString()),n=ev);for(var s=0;s<n.length;s++){var i=J5(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function aE(t){Sm(t.g,function(e,n){this.g.hasOwnProperty(n)&&Rm(e)},t),t.g={}}Yl.prototype.N=function(){Yl.$.N.call(this),aE(this)};Yl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Nd(){this.g=!0}Nd.prototype.Ea=function(){this.g=!1};function k7(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function N7(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function xo(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+P7(t,n)+(r?" "+r:"")})}function b7(t,e){t.info(function(){return"TIMEOUT: "+e})}Nd.prototype.info=function(){};function P7(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return bm(n)}catch{return e}}var Qi={},tv=null;function bd(){return tv=tv||new yt}Qi.Ta="serverreachability";function lE(t){Bt.call(this,Qi.Ta,t)}wt(lE,Bt);function Xl(t){const e=bd();At(e,new lE(e))}Qi.STAT_EVENT="statevent";function cE(t,e){Bt.call(this,Qi.STAT_EVENT,t),this.stat=e}wt(cE,Bt);function Jt(t){const e=bd();At(e,new cE(e,t))}Qi.Ua="timingevent";function uE(t,e){Bt.call(this,Qi.Ua,t),this.size=e}wt(uE,Bt);function xc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return oe.setTimeout(function(){t()},e)}var Pd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},hE={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Om(){}Om.prototype.h=null;function nv(t){return t.h||(t.h=t.i())}function dE(){}var Tc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Mm(){Bt.call(this,"d")}wt(Mm,Bt);function jm(){Bt.call(this,"c")}wt(jm,Bt);var D2;function Ld(){}wt(Ld,Om);Ld.prototype.g=function(){return new XMLHttpRequest};Ld.prototype.i=function(){return{}};D2=new Ld;function Cc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Yl(this),this.P=L7,t=k2?125:void 0,this.V=new kd(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new fE}function fE(){this.i=null,this.g="",this.h=!1}var L7=45e3,pE={},O2={};Q=Cc.prototype;Q.setTimeout=function(t){this.P=t};function M2(t,e,n){t.L=1,t.A=Od(Kr(e)),t.u=n,t.S=!0,mE(t,null)}function mE(t,e){t.G=Date.now(),Ic(t),t.B=Kr(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),TE(n.i,"t",r),t.o=0,n=t.l.J,t.h=new fE,t.g=WE(t.l,n?e:null,!t.u),0<t.O&&(t.M=new R7(zt(t.Pa,t,t.g),t.O)),oE(t.U,t.g,"readystatechange",t.nb),e=t.I?Y5(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Xl(),k7(t.j,t.v,t.B,t.m,t.W,t.u)}Q.nb=function(t){t=t.target;const e=this.M;e&&dr(t)==3?e.l():this.Pa(t)};Q.Pa=function(t){try{if(t==this.g)e:{const u=dr(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||k2||this.g&&(this.h.h||this.g.ja()||ov(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?Xl(3):Xl(2)),Dd(this);var n=this.g.da();this.ca=n;t:if(gE(this)){var r=ov(this.g);t="";var s=r.length,i=dr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){di(this),pl(this);var o="";break t}this.h.i=new oe.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,N7(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ql(a)){var c=a;break t}}c=null}if(n=c)xo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,j2(this,n);else{this.i=!1,this.s=3,Jt(12),di(this),pl(this);break e}}this.S?(_E(this,u,o),k2&&this.i&&u==3&&(oE(this.U,this.V,"tick",this.mb),this.V.start())):(xo(this.j,this.m,o,null),j2(this,o)),u==4&&di(this),this.i&&!this.J&&(u==4?UE(this.l,this):(this.i=!1,Ic(this)))}else eR(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Jt(12)):(this.s=0,Jt(13)),di(this),pl(this)}}}catch{}finally{}};function gE(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function _E(t,e,n){let r=!0,s;for(;!t.J&&t.o<n.length;)if(s=D7(t,n),s==O2){e==4&&(t.s=4,Jt(14),r=!1),xo(t.j,t.m,null,"[Incomplete Response]");break}else if(s==pE){t.s=4,Jt(15),xo(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else xo(t.j,t.m,s,null),j2(t,s);gE(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Jt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bm(e),e.M=!0,Jt(11))):(xo(t.j,t.m,n,"[Invalid Chunked Response]"),di(t),pl(t))}Q.mb=function(){if(this.g){var t=dr(this.g),e=this.g.ja();this.o<e.length&&(Dd(this),_E(this,t,e),this.i&&t!=4&&Ic(this))}};function D7(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?O2:(n=Number(e.substring(n,r)),isNaN(n)?pE:(r+=1,r+n>e.length?O2:(e=e.slice(r,r+n),t.o=r+n,e)))}Q.cancel=function(){this.J=!0,di(this)};function Ic(t){t.Y=Date.now()+t.P,vE(t,t.P)}function vE(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=xc(zt(t.lb,t),e)}function Dd(t){t.C&&(oe.clearTimeout(t.C),t.C=null)}Q.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(b7(this.j,this.B),this.L!=2&&(Xl(),Jt(17)),di(this),this.s=2,pl(this)):vE(this,this.Y-t)};function pl(t){t.l.H==0||t.J||UE(t.l,t)}function di(t){Dd(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Lm(t.V),aE(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function j2(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||F2(n.i,t))){if(!t.K&&F2(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)xh(n),Vd(n);else break e;zm(n),Jt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=xc(zt(n.ib,n),6e3));if(1>=SE(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else fi(n,11)}else if((t.K||n.g==t)&&xh(n),!ql(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const p=t.g;if(p){const g=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var i=r.i;i.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Fm(i,i.h),i.h=null))}if(r.F){const _=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,Ve(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=BE(r,r.J?r.pa:null,r.Y),o.K){AE(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Dd(a),Ic(a)),r.g=o}else FE(r);0<n.j.length&&Ud(n)}else c[0]!="stop"&&c[0]!="close"||fi(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?fi(n,7):$m(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Xl(4)}catch{}}function O7(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Id(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function M7(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Id(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function yE(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Id(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=M7(t),r=O7(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var wE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function j7(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Ti(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ti){this.h=t.h,wh(this,t.j),this.s=t.s,this.g=t.g,Eh(this,t.m),this.l=t.l;var e=t.i,n=new Jl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),rv(this,n),this.o=t.o}else t&&(e=String(t).match(wE))?(this.h=!1,wh(this,e[1]||"",!0),this.s=Za(e[2]||""),this.g=Za(e[3]||"",!0),Eh(this,e[4]),this.l=Za(e[5]||"",!0),rv(this,e[6]||"",!0),this.o=Za(e[7]||"")):(this.h=!1,this.i=new Jl(null,this.h))}Ti.prototype.toString=function(){var t=[],e=this.j;e&&t.push(el(e,sv,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(el(e,sv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(el(n,n.charAt(0)=="/"?U7:V7,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",el(n,z7)),t.join("")};function Kr(t){return new Ti(t)}function wh(t,e,n){t.j=n?Za(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Eh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function rv(t,e,n){e instanceof Jl?(t.i=e,B7(t.i,t.h)):(n||(e=el(e,$7)),t.i=new Jl(e,t.h))}function Ve(t,e,n){t.i.set(e,n)}function Od(t){return Ve(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Za(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function el(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,F7),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function F7(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var sv=/[#\/\?@]/g,V7=/[#\?:]/g,U7=/[#\?]/g,$7=/[#\?@]/g,z7=/#/g;function Jl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ks(t){t.g||(t.g=new Map,t.h=0,t.i&&j7(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}Q=Jl.prototype;Q.add=function(t,e){Ks(this),this.i=null,t=ga(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function EE(t,e){Ks(t),e=ga(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function xE(t,e){return Ks(t),e=ga(t,e),t.g.has(e)}Q.forEach=function(t,e){Ks(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};Q.ta=function(){Ks(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};Q.Z=function(t){Ks(this);let e=[];if(typeof t=="string")xE(this,t)&&(e=e.concat(this.g.get(ga(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};Q.set=function(t,e){return Ks(this),this.i=null,t=ga(this,t),xE(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};Q.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function TE(t,e,n){EE(t,e),0<n.length&&(t.i=null,t.g.set(ga(t,e),Cm(n)),t.h+=n.length)}Q.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function ga(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function B7(t,e){e&&!t.j&&(Ks(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(EE(this,r),TE(this,s,n))},t)),t.j=e}var W7=class{constructor(t,e){this.g=t,this.map=e}};function CE(t){this.l=t||H7,oe.PerformanceNavigationTiming?(t=oe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(oe.g&&oe.g.Ka&&oe.g.Ka()&&oe.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var H7=10;function IE(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function SE(t){return t.h?1:t.g?t.g.size:0}function F2(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Fm(t,e){t.g?t.g.add(e):t.h=e}function AE(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}CE.prototype.cancel=function(){if(this.i=RE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function RE(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Cm(t.i)}var q7=class{stringify(t){return oe.JSON.stringify(t,void 0)}parse(t){return oe.JSON.parse(t,void 0)}};function G7(){this.g=new q7}function K7(t,e,n){const r=n||"";try{yE(t,function(s,i){let o=s;wc(s)&&(o=bm(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Q7(t,e){const n=new Nd;if(oe.Image){const r=new Image;r.onload=uu(du,n,r,"TestLoadImage: loaded",!0,e),r.onerror=uu(du,n,r,"TestLoadImage: error",!1,e),r.onabort=uu(du,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=uu(du,n,r,"TestLoadImage: timeout",!1,e),oe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function du(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Md(t){this.l=t.ec||null,this.j=t.ob||!1}wt(Md,Om);Md.prototype.g=function(){return new jd(this.l,this.j)};Md.prototype.i=function(t){return function(){return t}}({});function jd(t,e){yt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Vm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wt(jd,yt);var Vm=0;Q=jd.prototype;Q.open=function(t,e){if(this.readyState!=Vm)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Zl(this)};Q.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||oe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};Q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sc(this)),this.readyState=Vm};Q.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Zl(this)),this.g&&(this.readyState=3,Zl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof oe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kE(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function kE(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}Q.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Sc(this):Zl(this),this.readyState==3&&kE(this)}};Q.Za=function(t){this.g&&(this.response=this.responseText=t,Sc(this))};Q.Ya=function(t){this.g&&(this.response=t,Sc(this))};Q.ka=function(){this.g&&Sc(this)};function Sc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Zl(t)}Q.setRequestHeader=function(t,e){this.v.append(t,e)};Q.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};Q.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Zl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(jd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Y7=oe.JSON.parse;function Ye(t){yt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=NE,this.L=this.M=!1}wt(Ye,yt);var NE="",X7=/^https?$/i,J7=["POST","PUT"];Q=Ye.prototype;Q.Oa=function(t){this.M=t};Q.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():D2.g(),this.C=this.u?nv(this.u):nv(D2),this.g.onreadystatechange=zt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){iv(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=oe.FormData&&t instanceof oe.FormData,!(0<=q5(J7,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{LE(this),0<this.B&&((this.L=Z7(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zt(this.ua,this)):this.A=Dm(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){iv(this,i)}};function Z7(t){return Xo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}Q.ua=function(){typeof Tm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,At(this,"timeout"),this.abort(8))};function iv(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,bE(t),Fd(t)}function bE(t){t.F||(t.F=!0,At(t,"complete"),At(t,"error"))}Q.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,At(this,"complete"),At(this,"abort"),Fd(this))};Q.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Fd(this,!0)),Ye.$.N.call(this)};Q.La=function(){this.s||(this.G||this.v||this.l?PE(this):this.kb())};Q.kb=function(){PE(this)};function PE(t){if(t.h&&typeof Tm<"u"&&(!t.C[1]||dr(t)!=4||t.da()!=2)){if(t.v&&dr(t)==4)Dm(t.La,0,t);else if(At(t,"readystatechange"),dr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(wE)[1]||null;!s&&oe.self&&oe.self.location&&(s=oe.self.location.protocol.slice(0,-1)),r=!X7.test(s?s.toLowerCase():"")}n=r}if(n)At(t,"complete"),At(t,"success");else{t.m=6;try{var i=2<dr(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",bE(t)}}finally{Fd(t)}}}}function Fd(t,e){if(t.g){LE(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||At(t,"ready");try{n.onreadystatechange=r}catch{}}}function LE(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(oe.clearTimeout(t.A),t.A=null)}Q.isActive=function(){return!!this.g};function dr(t){return t.g?t.g.readyState:0}Q.da=function(){try{return 2<dr(this)?this.g.status:-1}catch{return-1}};Q.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};Q.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Y7(e)}};function ov(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case NE:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function eR(t){const e={};t=(t.g&&2<=dr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(ql(t[r]))continue;var n=I7(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}v7(e,function(r){return r.join(", ")})}Q.Ia=function(){return this.m};Q.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function DE(t){let e="";return Sm(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Um(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=DE(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ve(t,e,n))}function ja(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function OE(t){this.Ga=0,this.j=[],this.l=new Nd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ja("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ja("baseRetryDelayMs",5e3,t),this.hb=ja("retryDelaySeedMs",1e4,t),this.eb=ja("forwardChannelMaxRetries",2,t),this.xa=ja("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new CE(t&&t.concurrentRequestLimit),this.Ja=new G7,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}Q=OE.prototype;Q.ra=8;Q.H=1;function $m(t){if(ME(t),t.H==3){var e=t.W++,n=Kr(t.I);if(Ve(n,"SID",t.K),Ve(n,"RID",e),Ve(n,"TYPE","terminate"),Ac(t,n),e=new Cc(t,t.l,e),e.L=2,e.A=Od(Kr(n)),n=!1,oe.navigator&&oe.navigator.sendBeacon)try{n=oe.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&oe.Image&&(new Image().src=e.A,n=!0),n||(e.g=WE(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Ic(e)}zE(t)}function Vd(t){t.g&&(Bm(t),t.g.cancel(),t.g=null)}function ME(t){Vd(t),t.u&&(oe.clearTimeout(t.u),t.u=null),xh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&oe.clearTimeout(t.m),t.m=null)}function Ud(t){if(!IE(t.i)&&!t.m){t.m=!0;var e=t.Na;Kl||sE(),Ql||(Kl(),Ql=!0),Pm.add(e,t),t.C=0}}function tR(t,e){return SE(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=xc(zt(t.Na,t,e),$E(t,t.C)),t.C++,!0)}Q.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new Cc(this,this.l,t);let i=this.s;if(this.U&&(i?(i=Y5(i),X5(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=jE(this,s,e),n=Kr(this.I),Ve(n,"RID",t),Ve(n,"CVER",22),this.F&&Ve(n,"X-HTTP-Session-Id",this.F),Ac(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(DE(i)))+"&"+e:this.o&&Um(n,this.o,i)),Fm(this.i,s),this.bb&&Ve(n,"TYPE","init"),this.P?(Ve(n,"$req",e),Ve(n,"SID","null"),s.aa=!0,M2(s,n,null)):M2(s,n,e),this.H=2}}else this.H==3&&(t?av(this,t):this.j.length==0||IE(this.i)||av(this))};function av(t,e){var n;e?n=e.m:n=t.W++;const r=Kr(t.I);Ve(r,"SID",t.K),Ve(r,"RID",n),Ve(r,"AID",t.V),Ac(t,r),t.o&&t.s&&Um(r,t.o,t.s),n=new Cc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=jE(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Fm(t.i,n),M2(n,r,e)}function Ac(t,e){t.na&&Sm(t.na,function(n,r){Ve(e,r,n)}),t.h&&yE({},function(n,r){Ve(e,r,n)})}function jE(t,e,n){n=Math.min(t.j.length,n);var r=t.h?zt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const u=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{K7(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function FE(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Kl||sE(),Ql||(Kl(),Ql=!0),Pm.add(e,t),t.A=0}}function zm(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=xc(zt(t.Ma,t),$E(t,t.A)),t.A++,!0)}Q.Ma=function(){if(this.u=null,VE(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=xc(zt(this.jb,this),t)}};Q.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Jt(10),Vd(this),VE(this))};function Bm(t){t.B!=null&&(oe.clearTimeout(t.B),t.B=null)}function VE(t){t.g=new Cc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Kr(t.wa);Ve(e,"RID","rpc"),Ve(e,"SID",t.K),Ve(e,"AID",t.V),Ve(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ve(e,"TO",t.qa),Ve(e,"TYPE","xmlhttp"),Ac(t,e),t.o&&t.s&&Um(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Od(Kr(e)),n.u=null,n.S=!0,mE(n,t)}Q.ib=function(){this.v!=null&&(this.v=null,Vd(this),zm(this),Jt(19))};function xh(t){t.v!=null&&(oe.clearTimeout(t.v),t.v=null)}function UE(t,e){var n=null;if(t.g==e){xh(t),Bm(t),t.g=null;var r=2}else if(F2(t.i,e))n=e.F,AE(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var s=t.C;r=bd(),At(r,new uE(r,n)),Ud(t)}else FE(t);else if(s=e.s,s==3||s==0&&0<e.ca||!(r==1&&tR(t,e)||r==2&&zm(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:fi(t,5);break;case 4:fi(t,10);break;case 3:fi(t,6);break;default:fi(t,2)}}}function $E(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function fi(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=zt(t.pb,t);n||(n=new Ti("//www.google.com/images/cleardot.gif"),oe.location&&oe.location.protocol=="http"||wh(n,"https"),Od(n)),Q7(n.toString(),r)}else Jt(2);t.H=0,t.h&&t.h.za(e),zE(t),ME(t)}Q.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Jt(2)):(this.l.info("Failed to ping google.com"),Jt(1))};function zE(t){if(t.H=0,t.ma=[],t.h){const e=RE(t.i);(e.length!=0||t.j.length!=0)&&(X_(t.ma,e),X_(t.ma,t.j),t.i.i.length=0,Cm(t.j),t.j.length=0),t.h.ya()}}function BE(t,e,n){var r=n instanceof Ti?Kr(n):new Ti(n);if(r.g!="")e&&(r.g=e+"."+r.g),Eh(r,r.m);else{var s=oe.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Ti(null);r&&wh(i,r),e&&(i.g=e),s&&Eh(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&Ve(r,n,e),Ve(r,"VER",t.ra),Ac(t,r),r}function WE(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Ye(new Md({ob:n})):new Ye(t.va),e.Oa(t.J),e}Q.isActive=function(){return!!this.h&&this.h.isActive(this)};function HE(){}Q=HE.prototype;Q.Ba=function(){};Q.Aa=function(){};Q.za=function(){};Q.ya=function(){};Q.isActive=function(){return!0};Q.Va=function(){};function Th(){if(Xo&&!(10<=Number(p7)))throw Error("Environmental error: no available transport.")}Th.prototype.g=function(t,e){return new In(t,e)};function In(t,e){yt.call(this),this.g=new OE(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!ql(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ql(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new _a(this)}wt(In,yt);In.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Jt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=BE(t,null,t.Y),Ud(t)};In.prototype.close=function(){$m(this.g)};In.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=bm(t),t=n);e.j.push(new W7(e.fb++,t)),e.H==3&&Ud(e)};In.prototype.N=function(){this.g.h=null,delete this.j,$m(this.g),delete this.g,In.$.N.call(this)};function qE(t){Mm.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}wt(qE,Mm);function GE(){jm.call(this),this.status=1}wt(GE,jm);function _a(t){this.g=t}wt(_a,HE);_a.prototype.Ba=function(){At(this.g,"a")};_a.prototype.Aa=function(t){At(this.g,new qE(t))};_a.prototype.za=function(t){At(this.g,new GE)};_a.prototype.ya=function(){At(this.g,"b")};function nR(){this.blockSize=-1}function rr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}wt(rr,nR);rr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function lf(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}rr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)lf(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){lf(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){lf(this,r),s=0;break}}this.h=s,this.i+=e};rr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Se(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var rR={};function Wm(t){return-128<=t&&128>t?h7(t,function(e){return new Se([e|0],0>e?-1:0)}):new Se([t|0],0>t?-1:0)}function fr(t){if(isNaN(t)||!isFinite(t))return Lo;if(0>t)return Tt(fr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=V2;return new Se(e,0)}function KE(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Tt(KE(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=fr(Math.pow(e,8)),r=Lo,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=fr(Math.pow(e,i)),r=r.R(i).add(fr(o))):(r=r.R(n),r=r.add(fr(o)))}return r}var V2=4294967296,Lo=Wm(0),U2=Wm(1),lv=Wm(16777216);Q=Se.prototype;Q.ea=function(){if(On(this))return-Tt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:V2+r)*e,e*=V2}return t};Q.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(jr(this))return"0";if(On(this))return"-"+Tt(this).toString(t);for(var e=fr(Math.pow(t,6)),n=this,r="";;){var s=Ih(n,e).g;n=Ch(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,jr(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};Q.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function jr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function On(t){return t.h==-1}Q.X=function(t){return t=Ch(this,t),On(t)?-1:jr(t)?0:1};function Tt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Se(n,~t.h).add(U2)}Q.abs=function(){return On(this)?Tt(this):this};Q.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new Se(n,n[n.length-1]&-2147483648?-1:0)};function Ch(t,e){return t.add(Tt(e))}Q.R=function(t){if(jr(this)||jr(t))return Lo;if(On(this))return On(t)?Tt(this).R(Tt(t)):Tt(Tt(this).R(t));if(On(t))return Tt(this.R(Tt(t)));if(0>this.X(lv)&&0>t.X(lv))return fr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,fu(n,2*r+2*s),n[2*r+2*s+1]+=i*l,fu(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,fu(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,fu(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Se(n,0)};function fu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Fa(t,e){this.g=t,this.h=e}function Ih(t,e){if(jr(e))throw Error("division by zero");if(jr(t))return new Fa(Lo,Lo);if(On(t))return e=Ih(Tt(t),e),new Fa(Tt(e.g),Tt(e.h));if(On(e))return e=Ih(t,Tt(e)),new Fa(Tt(e.g),e.h);if(30<t.g.length){if(On(t)||On(e))throw Error("slowDivide_ only works with positive integers.");for(var n=U2,r=e;0>=r.X(t);)n=cv(n),r=cv(r);var s=so(n,1),i=so(r,1);for(r=so(r,2),n=so(n,2);!jr(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=so(r,1),n=so(n,1)}return e=Ch(t,s.R(e)),new Fa(s,e)}for(s=Lo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=fr(n),o=i.R(e);On(o)||0<o.X(t);)n-=r,i=fr(n),o=i.R(e);jr(i)&&(i=U2),s=s.add(i),t=Ch(t,o)}return new Fa(s,t)}Q.gb=function(t){return Ih(this,t).h};Q.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Se(n,this.h&t.h)};Q.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Se(n,this.h|t.h)};Q.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Se(n,this.h^t.h)};function cv(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Se(n,t.h)}function so(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new Se(s,t.h)}Th.prototype.createWebChannel=Th.prototype.g;In.prototype.send=In.prototype.u;In.prototype.open=In.prototype.m;In.prototype.close=In.prototype.close;Pd.NO_ERROR=0;Pd.TIMEOUT=8;Pd.HTTP_ERROR=6;hE.COMPLETE="complete";dE.EventType=Tc;Tc.OPEN="a";Tc.CLOSE="b";Tc.ERROR="c";Tc.MESSAGE="d";yt.prototype.listen=yt.prototype.O;Ye.prototype.listenOnce=Ye.prototype.P;Ye.prototype.getLastError=Ye.prototype.Sa;Ye.prototype.getLastErrorCode=Ye.prototype.Ia;Ye.prototype.getStatus=Ye.prototype.da;Ye.prototype.getResponseJson=Ye.prototype.Wa;Ye.prototype.getResponseText=Ye.prototype.ja;Ye.prototype.send=Ye.prototype.ha;Ye.prototype.setWithCredentials=Ye.prototype.Oa;rr.prototype.digest=rr.prototype.l;rr.prototype.reset=rr.prototype.reset;rr.prototype.update=rr.prototype.j;Se.prototype.add=Se.prototype.add;Se.prototype.multiply=Se.prototype.R;Se.prototype.modulo=Se.prototype.gb;Se.prototype.compare=Se.prototype.X;Se.prototype.toNumber=Se.prototype.ea;Se.prototype.toString=Se.prototype.toString;Se.prototype.getBits=Se.prototype.D;Se.fromNumber=fr;Se.fromString=KE;var sR=function(){return new Th},iR=function(){return bd()},cf=Pd,oR=hE,aR=Qi,uv={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},pu=dE,lR=Ye,cR=rr,Do=Se;const hv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let va="10.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di=new Td("@firebase/firestore");function Va(){return Di.logLevel}function G(t,...e){if(Di.logLevel<=ce.DEBUG){const n=e.map(Hm);Di.debug(`Firestore (${va}): ${t}`,...n)}}function Tr(t,...e){if(Di.logLevel<=ce.ERROR){const n=e.map(Hm);Di.error(`Firestore (${va}): ${t}`,...n)}}function Jo(t,...e){if(Di.logLevel<=ce.WARN){const n=e.map(Hm);Di.warn(`Firestore (${va}): ${t}`,...n)}}function Hm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t="Unexpected state"){const e=`FIRESTORE (${va}) INTERNAL ASSERTION FAILED: `+t;throw Tr(e),new Error(e)}function Le(t,e){t||se()}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class hR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dR{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new vr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new vr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string"),new QE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new Mt(e)}}class fR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new fR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string"),this.R=n.token,new mR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=_R(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function Zo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ht(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new ht(0,0))}static max(){return new ae(new ht(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(),r===void 0?r=e.length-n:r>e.length-n&&se(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ec.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ec?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class be extends ec{construct(e,n,r){return new be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new be(n)}static emptyPath(){return new be([])}}const vR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends ec{construct(e,n,r){return new It(e,n,r)}static isValidIdentifier(e){return vR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new It(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new q(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new q(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(be.fromString(e))}static fromName(e){return new te(be.fromString(e).popFirst(5))}static empty(){return new te(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new be(e.slice()))}}function yR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ae.fromTimestamp(r===1e9?new ht(n+1,0):new ht(n,r));return new Fs(s,te.empty(),e)}function wR(t){return new Fs(t.readTime,t.key,-1)}class Fs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fs(ae.min(),te.empty(),-1)}static max(){return new Fs(ae.max(),te.empty(),-1)}}function ER(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rc(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==xR)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new vr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ml(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Gm(r.target.error);this.V.reject(new ml(e,s))}}static open(e,n,r,s){try{return new qm(n,e.transaction(s,r))}catch(i){throw new ml(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(G("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new IR(n)}}class pi{constructor(e,n,r){this.name=e,this.version=n,this.p=r,pi.S(at())===12.2&&Tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return G("SimpleDb","Removing database:",e),li(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!V5())return!1;if(pi.C())return!0;const e=at(),n=pi.S(e),r=0<n&&n<10,s=pi.v(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(G("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new ml(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new q(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new q(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ml(e,o))},s.onupgradeneeded=i=>{G("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.N(o,s.transaction,i.oldVersion,this.version).next(()=>{G("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=qm.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),z.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(G("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class CR{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return li(this.k.delete())}}class ml extends q{constructor(e,n){super(U.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function kc(t){return t.name==="IndexedDbTransactionError"}class IR{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(G("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(G("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),li(r)}add(e){return G("SimpleDb","ADD",this.store.name,e,e),li(this.store.add(e))}get(e){return li(this.store.get(e)).next(n=>(n===void 0&&(n=null),G("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return G("SimpleDb","DELETE",this.store.name,e),li(this.store.delete(e))}count(){return G("SimpleDb","COUNT",this.store.name),li(this.store.count())}W(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new z((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.G(i,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new z((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}H(e,n){G("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const s=this.cursor(r);return this.G(s,(i,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.G(s,n)}Z(e){const n=this.cursor({});return new z((r,s)=>{n.onerror=i=>{const o=Gm(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new z((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new CR(a),c=n(a.primaryKey,a.value,l);if(c instanceof z){const u=c.catch(h=>(l.done(),z.reject(h)));r.push(u)}l.isDone?s():l.$===null?a.continue():a.continue(l.$)}}).next(()=>z.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function li(t){return new z((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Gm(r.target.error);n(s)}})}let dv=!1;function Gm(t){const e=pi.S(at());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return dv||(dv=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}Km._e=-1;function $d(t){return t==null}function Sh(t){return t===0&&1/t==-1/0}function SR(t){return typeof t=="number"&&Number.isInteger(t)&&!Sh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function XE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lt=class $2{constructor(e,n){this.comparator=e,this.root=n||Ps.EMPTY}insert(e,n){return new $2(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ps.BLACK,null,null))}remove(e){return new $2(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ps.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mu(this.root,e,this.comparator,!0)}},mu=class{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ps=class br{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??br.RED,this.left=s??br.EMPTY,this.right=i??br.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new br(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return br.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return br.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();const e=this.left.check();if(e!==this.right.check())throw se();return e+(this.isRed()?0:1)}};Ps.EMPTY=null,Ps.RED=!0,Ps.BLACK=!1;Ps.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ps(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pv(this.data.getIterator())}getIteratorFrom(e){return new pv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Rt(this.comparator);return n.data=e,n}}class pv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new gn([])}unionWith(e){let n=new Rt(It.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new JE("Invalid base64 string: "+i):i}}(e);return new qt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const AR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(t){if(Le(!!t),typeof t=="string"){let e=0;const n=AR.exec(t);if(Le(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Oi(t){return typeof t=="string"?qt.fromBase64String(t):qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Qm(t){const e=t.mapValue.fields.__previous_value__;return zd(e)?Qm(e):e}function tc(t){const e=Vs(t.mapValue.fields.__local_write_time__.timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class nc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new nc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof nc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Mi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zd(t)?4:kR(t)?9007199254740991:10:se()}function Cr(t,e){if(t===e)return!0;const n=Mi(t);if(n!==Mi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tc(t).isEqual(tc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Vs(s.timestampValue),a=Vs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Oi(s.bytesValue).isEqual(Oi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return rt(s.geoPointValue.latitude)===rt(i.geoPointValue.latitude)&&rt(s.geoPointValue.longitude)===rt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return rt(s.integerValue)===rt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=rt(s.doubleValue),a=rt(i.doubleValue);return o===a?Sh(o)===Sh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Zo(t.arrayValue.values||[],e.arrayValue.values||[],Cr);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(fv(o)!==fv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Cr(o[l],a[l])))return!1;return!0}(t,e);default:return se()}}function rc(t,e){return(t.values||[]).find(n=>Cr(n,e))!==void 0}function ea(t,e){if(t===e)return 0;const n=Mi(t),r=Mi(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=rt(i.integerValue||i.doubleValue),l=rt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return mv(t.timestampValue,e.timestampValue);case 4:return mv(tc(t),tc(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Oi(i),l=Oi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Ee(a[c],l[c]);if(u!==0)return u}return Ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ee(rt(i.latitude),rt(o.latitude));return a!==0?a:Ee(rt(i.longitude),rt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=ea(a[c],l[c]);if(u)return u}return Ee(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===gu.mapValue&&o===gu.mapValue)return 0;if(i===gu.mapValue)return 1;if(o===gu.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const d=Ee(l[h],u[h]);if(d!==0)return d;const p=ea(a[l[h]],c[u[h]]);if(p!==0)return p}return Ee(l.length,u.length)}(t.mapValue,e.mapValue);default:throw se()}}function mv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=Vs(t),r=Vs(e),s=Ee(n.seconds,r.seconds);return s!==0?s:Ee(n.nanos,r.nanos)}function ta(t){return z2(t)}function z2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Vs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Oi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=z2(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${z2(n.fields[o])}`;return s+"}"}(t.mapValue):se()}function Ah(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function B2(t){return!!t&&"integerValue"in t}function Ym(t){return!!t&&"arrayValue"in t}function gv(t){return!!t&&"nullValue"in t}function _v(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ou(t){return!!t&&"mapValue"in t}function gl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Yi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=gl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=gl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ou(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=gl(n)}setAll(e){let n=It.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=gl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ou(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ou(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Yi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new sn(gl(this.value))}}function ZE(t){const e=[];return Yi(t.fields,(n,r)=>{const s=new It([n]);if(Ou(r)){const i=ZE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ft(e,0,ae.min(),ae.min(),ae.min(),sn.empty(),0)}static newFoundDocument(e,n,r,s){return new Ft(e,1,n,ae.min(),r,s,0)}static newNoDocument(e,n){return new Ft(e,2,n,ae.min(),ae.min(),sn.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,ae.min(),ae.min(),sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n){this.position=e,this.inclusive=n}}function vv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=ea(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function yv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n="asc"){this.field=e,this.dir=n}}function NR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{}class it extends e4{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new PR(e,n,r):n==="array-contains"?new OR(e,r):n==="in"?new MR(e,r):n==="not-in"?new jR(e,r):n==="array-contains-any"?new FR(e,r):new it(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new LR(e,r):new DR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ea(n,this.value)):n!==null&&Mi(this.value)===Mi(n)&&this.matchesComparison(ea(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sr extends e4{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new sr(e,n)}matches(e){return t4(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function t4(t){return t.op==="and"}function n4(t){return bR(t)&&t4(t)}function bR(t){for(const e of t.filters)if(e instanceof sr)return!1;return!0}function W2(t){if(t instanceof it)return t.field.canonicalString()+t.op.toString()+ta(t.value);if(n4(t))return t.filters.map(e=>W2(e)).join(",");{const e=t.filters.map(n=>W2(n)).join(",");return`${t.op}(${e})`}}function r4(t,e){return t instanceof it?function(r,s){return s instanceof it&&r.op===s.op&&r.field.isEqual(s.field)&&Cr(r.value,s.value)}(t,e):t instanceof sr?function(r,s){return s instanceof sr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&r4(o,s.filters[a]),!0):!1}(t,e):void se()}function s4(t){return t instanceof it?function(n){return`${n.field.canonicalString()} ${n.op} ${ta(n.value)}`}(t):t instanceof sr?function(n){return n.op.toString()+" {"+n.getFilters().map(s4).join(" ,")+"}"}(t):"Filter"}class PR extends it{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class LR extends it{constructor(e,n){super(e,"in",n),this.keys=i4("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class DR extends it{constructor(e,n){super(e,"not-in",n),this.keys=i4("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function i4(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class OR extends it{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ym(n)&&rc(n.arrayValue,this.value)}}class MR extends it{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&rc(this.value.arrayValue,n)}}class jR extends it{constructor(e,n){super(e,"not-in",n)}matches(e){if(rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!rc(this.value.arrayValue,n)}}class FR extends it{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ym(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>rc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function wv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new VR(t,e,n,r,s,i,o)}function Xm(t){const e=le(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>W2(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),$d(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ta(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ta(r)).join(",")),e.ce=n}return e.ce}function Jm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!NR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!r4(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yv(t.startAt,e.startAt)&&yv(t.endAt,e.endAt)}function H2(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function UR(t,e,n,r,s,i,o,a){return new Xi(t,e,n,r,s,i,o,a)}function Bd(t){return new Xi(t)}function Ev(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Zm(t){return t.collectionGroup!==null}function Oo(t){const e=le(t);if(e.le===null){e.le=[];const n=new Set;for(const i of e.explicitOrderBy)e.le.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Rt(It.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.le.push(new sc(i,r))}),n.has(It.keyField().canonicalString())||e.le.push(new sc(It.keyField(),r))}return e.le}function yr(t){const e=le(t);return e.he||(e.he=$R(e,Oo(t))),e.he}function $R(t,e){if(t.limitType==="F")return wv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new sc(s.field,i)});const n=t.endAt?new na(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new na(t.startAt.position,t.startAt.inclusive):null;return wv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function q2(t,e){const n=t.filters.concat([e]);return new Xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Rh(t,e,n){return new Xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Wd(t,e){return Jm(yr(t),yr(e))&&t.limitType===e.limitType}function o4(t){return`${Xm(yr(t))}|lt:${t.limitType}`}function oo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>s4(s)).join(", ")}]`),$d(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ta(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ta(s)).join(",")),`Target(${r})`}(yr(t))}; limitType=${t.limitType})`}function Hd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Oo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=vv(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Oo(r),s)||r.endAt&&!function(o,a,l){const c=vv(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Oo(r),s))}(t,e)}function zR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function a4(t){return(e,n)=>{let r=!1;for(const s of Oo(t)){const i=BR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function BR(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?ea(l,c):se()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Yi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return XE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=new lt(te.comparator);function Qr(){return WR}const l4=new lt(te.comparator);function tl(...t){let e=l4;for(const n of t)e=e.insert(n.key,n);return e}function c4(t){let e=l4;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function mi(){return _l()}function u4(){return _l()}function _l(){return new ya(t=>t.toString(),(t,e)=>t.isEqual(e))}const HR=new lt(te.comparator),qR=new Rt(te.comparator);function ue(...t){let e=qR;for(const n of t)e=e.add(n);return e}const GR=new Rt(Ee);function KR(){return GR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sh(e)?"-0":e}}function d4(t){return{integerValue:""+t}}function QR(t,e){return SR(e)?d4(e):h4(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(){this._=void 0}}function YR(t,e,n){return t instanceof ic?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&zd(i)&&(i=Qm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof ra?p4(t,e):t instanceof oc?m4(t,e):function(s,i){const o=f4(s,i),a=xv(o)+xv(s.Ie);return B2(o)&&B2(s.Ie)?d4(a):h4(s.serializer,a)}(t,e)}function XR(t,e,n){return t instanceof ra?p4(t,e):t instanceof oc?m4(t,e):n}function f4(t,e){return t instanceof kh?function(r){return B2(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ic extends qd{}class ra extends qd{constructor(e){super(),this.elements=e}}function p4(t,e){const n=g4(e);for(const r of t.elements)n.some(s=>Cr(s,r))||n.push(r);return{arrayValue:{values:n}}}class oc extends qd{constructor(e){super(),this.elements=e}}function m4(t,e){let n=g4(e);for(const r of t.elements)n=n.filter(s=>!Cr(s,r));return{arrayValue:{values:n}}}class kh extends qd{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function xv(t){return rt(t.integerValue||t.doubleValue)}function g4(t){return Ym(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n){this.field=e,this.transform=n}}function JR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ra&&s instanceof ra||r instanceof oc&&s instanceof oc?Zo(r.elements,s.elements,Cr):r instanceof kh&&s instanceof kh?Cr(r.Ie,s.Ie):r instanceof ic&&s instanceof ic}(t.transform,e.transform)}class ZR{constructor(e,n){this.version=e,this.transformResults=n}}class Un{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Gd{}function v4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new eg(t.key,Un.none()):new Nc(t.key,t.data,Un.none());{const n=t.data,r=sn.empty();let s=new Rt(It.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Qs(t.key,r,new gn(s.toArray()),Un.none())}}function ek(t,e,n){t instanceof Nc?function(s,i,o){const a=s.value.clone(),l=Cv(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Qs?function(s,i,o){if(!Mu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Cv(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(y4(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function vl(t,e,n,r){return t instanceof Nc?function(i,o,a,l){if(!Mu(i.precondition,o))return a;const c=i.value.clone(),u=Iv(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Qs?function(i,o,a,l){if(!Mu(i.precondition,o))return a;const c=Iv(i.fieldTransforms,l,o),u=o.data;return u.setAll(y4(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Mu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function tk(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=f4(r.transform,s||null);i!=null&&(n===null&&(n=sn.empty()),n.set(r.field,i))}return n||null}function Tv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Zo(r,s,(i,o)=>JR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nc extends Gd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Qs extends Gd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function y4(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Cv(t,e,n){const r=new Map;Le(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,XR(o,a,n[s]))}return r}function Iv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,YR(i,o,e))}return r}class eg extends Gd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nk extends Gd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&ek(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=u4();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=v4(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,(n,r)=>Tv(n,r))&&Zo(this.baseMutations,e.baseMutations,(n,r)=>Tv(n,r))}}class tg{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Le(e.mutations.length===r.length);let s=function(){return HR}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new tg(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,me;function ok(t){switch(t){default:return se();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function w4(t){if(t===void 0)return Tr("GRPC error has no .code"),U.UNKNOWN;switch(t){case nt.OK:return U.OK;case nt.CANCELLED:return U.CANCELLED;case nt.UNKNOWN:return U.UNKNOWN;case nt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case nt.INTERNAL:return U.INTERNAL;case nt.UNAVAILABLE:return U.UNAVAILABLE;case nt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case nt.NOT_FOUND:return U.NOT_FOUND;case nt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case nt.ABORTED:return U.ABORTED;case nt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case nt.DATA_LOSS:return U.DATA_LOSS;default:return se()}}(me=nt||(nt={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=new Do([4294967295,4294967295],0);function Sv(t){const e=ak().encode(t),n=new cR;return n.update(e),new Uint8Array(n.digest())}function Av(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Do([n,r],0),new Do([s,i],0)]}class ng{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new nl(`Invalid padding: ${n}`);if(r<0)throw new nl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new nl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new nl(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Do.fromNumber(this.Te)}de(e,n,r){let s=e.add(n.multiply(Do.fromNumber(r)));return s.compare(lk)===1&&(s=new Do([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Sv(e),[r,s]=Av(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ng(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=Sv(e),[r,s]=Av(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,bc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Kd(ae.min(),s,new lt(Ee),Qr(),ue())}}class bc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new bc(r,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n,r,s){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=s}}class E4{constructor(e,n){this.targetId=e,this.fe=n}}class x4{constructor(e,n,r=qt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Rv{constructor(){this.ge=0,this.pe=Nv(),this.ye=qt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ue(),n=ue(),r=ue();return this.pe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:se()}}),new bc(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=Nv()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Le(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class ck{constructor(e){this.Be=e,this.ke=new Map,this.qe=Qr(),this.Qe=kv(),this.Ke=new lt(Ee)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:se()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(e){const n=e.targetId,r=e.fe.count,s=this.Ye(n);if(s){const i=s.target;if(H2(i))if(r===0){const o=new te(i.path);this.We(n,o,Ft.newNoDocument(o,ae.min()))}else Le(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Oi(r).toUint8Array()}catch(l){if(l instanceof JE)return Jo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ng(o,s,i)}catch(l){return Jo(l instanceof nl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.We(n,i,null),s++)}),s}it(e){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&H2(a.target)){const l=new te(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Ft.newNoDocument(l,e))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=ue();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(e));const s=new Kd(e,n,this.Ke,this.qe,r);return this.qe=Qr(),this.Qe=kv(),this.Ke=new lt(Ee),s}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Rv,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Rt(Ee),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Rv),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function kv(){return new lt(te.comparator)}function Nv(){return new lt(te.comparator)}const uk={asc:"ASCENDING",desc:"DESCENDING"},hk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dk={and:"AND",or:"OR"};class fk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function G2(t,e){return t.useProto3Json||$d(e)?e:{value:e}}function Nh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function T4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pk(t,e){return Nh(t,e.toTimestamp())}function wr(t){return Le(!!t),ae.fromTimestamp(function(n){const r=Vs(n);return new ht(r.seconds,r.nanos)}(t))}function rg(t,e){return K2(t,e).canonicalString()}function K2(t,e){const n=function(s){return new be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function C4(t){const e=be.fromString(t);return Le(k4(e)),e}function Q2(t,e){return rg(t.databaseId,e.path)}function uf(t,e){const n=C4(e);if(n.get(1)!==t.databaseId.projectId)throw new q(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(S4(n))}function I4(t,e){return rg(t.databaseId,e)}function mk(t){const e=C4(t);return e.length===4?be.emptyPath():S4(e)}function Y2(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function S4(t){return Le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function bv(t,e,n){return{name:Q2(t,e),fields:n.value.mapValue.fields}}function gk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:se()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(Le(u===void 0||typeof u=="string"),qt.fromBase64String(u||"")):(Le(u===void 0||u instanceof Uint8Array),qt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?U.UNKNOWN:w4(c.code);return new q(u,c.message||"")}(o);n=new x4(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=uf(t,r.document.name),i=wr(r.document.updateTime),o=r.document.createTime?wr(r.document.createTime):ae.min(),a=new sn({mapValue:{fields:r.document.fields}}),l=Ft.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ju(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=uf(t,r.document),i=r.readTime?wr(r.readTime):ae.min(),o=Ft.newNoDocument(s,i),a=r.removedTargetIds||[];n=new ju([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=uf(t,r.document),i=r.removedTargetIds||[];n=new ju([],i,s,null)}else{if(!("filter"in e))return se();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new ik(s,i),a=r.targetId;n=new E4(a,o)}}return n}function _k(t,e){let n;if(e instanceof Nc)n={update:bv(t,e.key,e.value)};else if(e instanceof eg)n={delete:Q2(t,e.key)};else if(e instanceof Qs)n={update:bv(t,e.key,e.data),updateMask:Sk(e.fieldMask)};else{if(!(e instanceof nk))return se();n={verify:Q2(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof ic)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ra)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof oc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof kh)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw se()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:pk(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:se()}(t,e.precondition)),n}function vk(t,e){return t&&t.length>0?(Le(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?wr(s.updateTime):wr(i);return o.isEqual(ae.min())&&(o=wr(i)),new ZR(o,s.transformResults||[])}(n,e))):[]}function yk(t,e){return{documents:[I4(t,e.path)]}}function wk(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=I4(t,s);const i=function(c){if(c.length!==0)return R4(sr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:ao(d.field),direction:Tk(d.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=G2(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:s}}function Ek(t){let e=mk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Le(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(h){const d=A4(h);return d instanceof sr&&n4(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(g){return new sc(lo(g.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,$d(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,p=h.values||[];return new na(p,d)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const d=!h.before,p=h.values||[];return new na(p,d)}(n.endAt)),UR(e,s,o,i,a,"F",l,c)}function xk(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function A4(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=lo(n.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=lo(n.unaryFilter.field);return it.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=lo(n.unaryFilter.field);return it.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=lo(n.unaryFilter.field);return it.create(o,"!=",{nullValue:"NULL_VALUE"});default:return se()}}(t):t.fieldFilter!==void 0?function(n){return it.create(lo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sr.create(n.compositeFilter.filters.map(r=>A4(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return se()}}(n.compositeFilter.op))}(t):se()}function Tk(t){return uk[t]}function Ck(t){return hk[t]}function Ik(t){return dk[t]}function ao(t){return{fieldPath:t.canonicalString()}}function lo(t){return It.fromServerFormat(t.fieldPath)}function R4(t){return t instanceof it?function(n){if(n.op==="=="){if(_v(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NAN"}};if(gv(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_v(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NOT_NAN"}};if(gv(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ao(n.field),op:Ck(n.op),value:n.value}}}(t):t instanceof sr?function(n){const r=n.getFilters().map(s=>R4(s));return r.length===1?r[0]:{compositeFilter:{op:Ik(n.op),filters:r}}}(t):se()}function Sk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function k4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n,r,s,i=ae.min(),o=ae.min(),a=qt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.ct=e}}function Rk(t){const e=Ek({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Rh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(){this._n=new Nk}addToCollectionParentIndex(e,n){return this._n.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Fs.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Fs.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class Nk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Rt(be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Rt(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new sa(0)}static Ln(){return new sa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(){this.changes=new ya(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&vl(r.mutation,s,gn.empty(),ht.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){const s=mi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=tl();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=mi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Qr();const o=_l(),a=function(){return _l()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Qs)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),vl(u.mutation,c,u.mutation.getFieldMask(),ht.now())):o.set(c.key,gn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new Pk(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=_l();let s=new lt((o,a)=>o-a),i=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||gn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(s.get(a.batchId)||ue()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=u4();u.forEach(d=>{if(!i.has(d)){const p=v4(n.get(d),r.get(d));p!==null&&h.set(d,p),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Zm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(mi());let a=-1,l=i;return o.next(c=>z.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?z.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ue())).next(u=>({batchId:a,changes:c4(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=tl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=tl();return this.indexManager.getCollectionParents(e,i).next(a=>z.forEach(a,l=>{const c=function(h,d){return new Xi(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Ft.newInvalidDocument(u)))});let a=tl();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&vl(u.mutation,c,gn.empty(),ht.now()),Hd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return z.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:wr(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:Rk(s.bundledQuery),readTime:wr(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(){this.overlays=new lt(te.comparator),this.hr=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=mi();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=mi(),i=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new lt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=mi(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=mi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return z.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sk(n,r));let i=this.hr.get(n);i===void 0&&(i=ue(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(){this.Pr=new Rt(pt.Ir),this.Tr=new Rt(pt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new pt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new pt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new te(new be([])),r=new pt(n,e),s=new pt(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new te(new be([])),r=new pt(n,e),s=new pt(n,e+1);let i=ue();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new pt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class pt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return te.comparator(e.key,n.key)||Ee(e.pr,n.pr)}static Er(e,n){return Ee(e.pr,n.pr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Rt(pt.Ir)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rk(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new pt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new pt(n,0),s=new pt(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rt(Ee);return n.forEach(s=>{const i=new pt(s,0),o=new pt(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),z.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new pt(new te(i),0);let a=new Rt(Ee);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),z.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Le(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return z.forEach(n.mutations,s=>{const i=new pt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new pt(n,0),s=this.wr.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.vr=e,this.docs=function(){return new lt(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let r=Qr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ft.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Qr();const o=n.path,a=new te(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||ER(wR(u),r)<=0||(s.has(u.key)||Hd(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){se()}Fr(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Fk(this)}getSize(e){return z.resolve(this.size)}}class Fk extends bk{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.persistence=e,this.Mr=new ya(n=>Xm(n),Jm),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Or=0,this.Nr=new sg,this.targetCount=0,this.Lr=sa.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),z.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new sa(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.qn(n),z.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n){this.Br={},this.overlays={},this.kr=new Km(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Vk(this),this.indexManager=new kk,this.remoteDocumentCache=function(s){return new jk(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Ak(n),this.$r=new Dk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ok,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new Mk(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new $k(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return z.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class $k extends TR{constructor(e){super(),this.currentSequenceNumber=e}}class ig{constructor(e){this.persistence=e,this.zr=new sg,this.jr=null}static Hr(e){return new ig(e)}get Jr(){if(this.jr)return this.jr;throw se()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),z.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Jr,r=>{const s=te.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,ae.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return z.or([()=>z.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=ue(),s=ue();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new og(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return UA()?8:pi.v(at())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ji(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new zk;return this.Ji(e,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>i.result)}Yi(e,n,r,s){return r.documentReadCount<this.Wi?(Va()<=ce.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",oo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),z.resolve()):(Va()<=ce.DEBUG&&G("QueryEngine","Query:",oo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(Va()<=ce.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",oo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yr(n))):z.resolve())}ji(e,n){if(Ev(n))return z.resolve(null);let r=yr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Rh(n,null,"F"),r=yr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ue(...i);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,Rh(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,s){return Ev(n)||s.isEqual(ae.min())?z.resolve(null):this.zi.getDocuments(e,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?z.resolve(null):(Va()<=ce.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),oo(n)),this.es(e,o,n,yR(s,-1)).next(a=>a))})}Zi(e,n){let r=new Rt(a4(e));return n.forEach((s,i)=>{Hd(e,i)&&(r=r.add(i))}),r}Xi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(e,n,r){return Va()<=ce.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",oo(n)),this.zi.getDocumentsMatchingQuery(e,n,Fs.min(),r)}es(e,n,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n,r,s){this.persistence=e,this.ts=n,this.serializer=s,this.ns=new lt(Ee),this.rs=new ya(i=>Xm(i),Jm),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lk(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function Hk(t,e,n,r){return new Wk(t,e,n,r)}async function N4(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ue();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function qk(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,d=h.keys();let p=z.resolve();return d.forEach(g=>{p=p.next(()=>u.getEntry(l,g)).next(_=>{const x=c.docVersions.get(g);Le(x!==null),_.version.compareTo(x)<0&&(h.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),u.addEntry(_)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ue();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function b4(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function Gk(t,e){const n=le(t),r=e.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];e.targetChanges.forEach((u,h)=>{const d=s.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,u.addedDocuments,h)));let p=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(qt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),s=s.insert(h,p),function(_,x,m){return _.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0}(d,p,u)&&a.push(n.Qr.updateTargetData(i,p))});let l=Qr(),c=ue();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(Kk(i,o,e.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!r.isEqual(ae.min())){const u=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return z.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.ns=s,i))}function Kk(t,e,n){let r=ue(),s=ue();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Qr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):G("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:s}})}function Qk(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Yk(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new ws(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function X2(t,e,n){const r=le(t),s=r.ns.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!kc(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)}function Pv(t,e,n){const r=le(t);let s=ae.min(),i=ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=le(l),d=h.rs.get(u);return d!==void 0?z.resolve(h.ns.get(d)):h.Qr.getTargetData(c,u)}(r,o,yr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?s:ae.min(),n?i:ue())).next(a=>(Xk(r,zR(e),a),{documents:a,hs:i})))}function Xk(t,e,n){let r=t.ss.get(e)||ae.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.ss.set(e,r)}class Lv{constructor(){this.activeTargetIds=KR()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jk{constructor(){this.no=new Lv,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Lv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _u=null;function hf(){return _u===null?_u=function(){return 268435456+Math.round(2147483648*Math.random())}():_u++,"0x"+_u.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class nN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${s}/databases/${i}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get wo(){return!1}So(n,r,s,i,o){const a=hf(),l=this.bo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,i,o),this.Co(n,l,c,s).then(u=>(G("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Jo("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}vo(n,r,s,i,o,a){return this.So(n,r,s,i,o)}Do(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+va}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}bo(n,r){const s=eN[n];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,s){const i=hf();return new Promise((o,a)=>{const l=new lR;l.setWithCredentials(!0),l.listenOnce(oR.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case cf.NO_ERROR:const u=l.getResponseJson();G(Ot,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),o(u);break;case cf.TIMEOUT:G(Ot,`RPC '${e}' ${i} timed out`),a(new q(U.DEADLINE_EXCEEDED,"Request time out"));break;case cf.HTTP_ERROR:const h=l.getStatus();if(G(Ot,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const g=function(x){const m=x.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(m)>=0?m:U.UNKNOWN}(p.status);a(new q(g,p.message))}else a(new q(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new q(U.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{G(Ot,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);G(Ot,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const s=hf(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=sR(),a=iR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");G(Ot,`Creating RPC '${e}' stream ${s}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,p=!1;const g=new tN({lo:x=>{p?G(Ot,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(d||(G(Ot,`Opening RPC '${e}' stream ${s} transport.`),h.open(),d=!0),G(Ot,`RPC '${e}' stream ${s} sending:`,x),h.send(x))},ho:()=>h.close()}),_=(x,m,v)=>{x.listen(m,y=>{try{v(y)}catch(C){setTimeout(()=>{throw C},0)}})};return _(h,pu.EventType.OPEN,()=>{p||G(Ot,`RPC '${e}' stream ${s} transport opened.`)}),_(h,pu.EventType.CLOSE,()=>{p||(p=!0,G(Ot,`RPC '${e}' stream ${s} transport closed`),g.Vo())}),_(h,pu.EventType.ERROR,x=>{p||(p=!0,Jo(Ot,`RPC '${e}' stream ${s} transport errored:`,x),g.Vo(new q(U.UNAVAILABLE,"The operation could not be completed")))}),_(h,pu.EventType.MESSAGE,x=>{var m;if(!p){const v=x.data[0];Le(!!v);const y=v,C=y.error||((m=y[0])===null||m===void 0?void 0:m.error);if(C){G(Ot,`RPC '${e}' stream ${s} received error:`,C);const N=C.status;let E=function(w){const A=nt[w];if(A!==void 0)return w4(A)}(N),k=C.message;E===void 0&&(E=U.INTERNAL,k="Unknown error status: "+N+" with message "+C.message),p=!0,g.Vo(new q(E,k)),h.close()}else G(Ot,`RPC '${e}' stream ${s} received:`,v),g.mo(v)}}),_(a,aR.STAT_EVENT,x=>{x.stat===uv.PROXY?G(Ot,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===uv.NOPROXY&&G(Ot,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.Ro()},0),g}}function df(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(t){return new fk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=s,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.$o=r,this.Uo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new P4(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Tr(n.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===n&&this.o_(r,s)},r=>{e(()=>{const s=new q(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rN extends L4{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=gk(this.serializer,e),r=function(i){if(!("targetChange"in i))return ae.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?wr(o.readTime):ae.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=Y2(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=H2(l)?{documents:yk(i,l)}:{query:wk(i,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=T4(i,o.resumeToken);const c=G2(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=Nh(i,o.snapshotVersion.toTimestamp());const c=G2(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=xk(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=Y2(this.serializer),n.removeTarget=e,this.t_(n)}}class sN extends L4{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=vk(e.writeResults,e.commitTime),r=wr(e.commitTime);return this.listener.T_(r,n)}return Le(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Y2(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>_k(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new q(U.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,K2(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(U.UNKNOWN,i.toString())})}vo(e,n,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,K2(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(U.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class oN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Tr(n),this.g_=!1):G("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{r.enqueueAndForget(async()=>{Ji(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=le(l);c.v_.add(4),await Pc(c),c.x_.set("Unknown"),c.v_.delete(4),await Yd(c)}(this))})}),this.x_=new oN(r,s)}}async function Yd(t){if(Ji(t))for(const e of t.F_)await e(!0)}async function Pc(t){for(const e of t.F_)await e(!1)}function D4(t,e){const n=le(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),ug(n)?cg(n):wa(n).Jo()&&lg(n,e))}function ag(t,e){const n=le(t),r=wa(n);n.C_.delete(e),r.Jo()&&O4(n,e),n.C_.size===0&&(r.Jo()?r.Xo():Ji(n)&&n.x_.set("Unknown"))}function lg(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}wa(t).c_(e)}function O4(t,e){t.O_.Oe(e),wa(t).l_(e)}function cg(t){t.O_=new ck({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),wa(t).start(),t.x_.p_()}function ug(t){return Ji(t)&&!wa(t).Ho()&&t.C_.size>0}function Ji(t){return le(t).v_.size===0}function M4(t){t.O_=void 0}async function lN(t){t.C_.forEach((e,n)=>{lg(t,e)})}async function cN(t,e){M4(t),ug(t)?(t.x_.S_(e),cg(t)):t.x_.set("Unknown")}async function uN(t,e,n){if(t.x_.set("Online"),e instanceof x4&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.C_.delete(a),s.O_.removeTarget(a))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bh(t,r)}else if(e instanceof ju?t.O_.$e(e):e instanceof E4?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(ae.min()))try{const r=await b4(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.C_.get(c);u&&i.C_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.C_.get(l);if(!u)return;i.C_.set(l,u.withResumeToken(qt.EMPTY_BYTE_STRING,u.snapshotVersion)),O4(i,l);const h=new ws(u.target,l,c,u.sequenceNumber);lg(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await bh(t,r)}}async function bh(t,e,n){if(!kc(e))throw e;t.v_.add(1),await Pc(t),t.x_.set("Offline"),n||(n=()=>b4(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await Yd(t)})}function j4(t,e){return e().catch(n=>bh(t,n,e))}async function Xd(t){const e=le(t),n=Us(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;hN(e);)try{const s=await Qk(e.localStore,r);if(s===null){e.D_.length===0&&n.Xo();break}r=s.batchId,dN(e,s)}catch(s){await bh(e,s)}F4(e)&&V4(e)}function hN(t){return Ji(t)&&t.D_.length<10}function dN(t,e){t.D_.push(e);const n=Us(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function F4(t){return Ji(t)&&!Us(t).Ho()&&t.D_.length>0}function V4(t){Us(t).start()}async function fN(t){Us(t).d_()}async function pN(t){const e=Us(t);for(const n of t.D_)e.I_(n.mutations)}async function mN(t,e,n){const r=t.D_.shift(),s=tg.from(r,e,n);await j4(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Xd(t)}async function gN(t,e){e&&Us(t).P_&&await async function(r,s){if(function(o){return ok(o)&&o!==U.ABORTED}(s.code)){const i=r.D_.shift();Us(r).Zo(),await j4(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Xd(r)}}(t,e),F4(t)&&V4(t)}async function Ov(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=Ji(n);n.v_.add(3),await Pc(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await Yd(n)}async function _N(t,e){const n=le(t);e?(n.v_.delete(2),await Yd(n)):e||(n.v_.add(2),await Pc(n),n.x_.set("Unknown"))}function wa(t){return t.N_||(t.N_=function(n,r,s){const i=le(n);return i.R_(),new rN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:lN.bind(null,t),To:cN.bind(null,t),u_:uN.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),ug(t)?cg(t):t.x_.set("Unknown")):(await t.N_.stop(),M4(t))})),t.N_}function Us(t){return t.L_||(t.L_=function(n,r,s){const i=le(n);return i.R_(),new sN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:fN.bind(null,t),To:gN.bind(null,t),E_:pN.bind(null,t),T_:mN.bind(null,t)}),t.F_.push(async e=>{e?(t.L_.Zo(),await Xd(t)):(await t.L_.stop(),t.D_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new hg(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dg(t,e){if(Tr("AsyncQueue",`${e}: ${t}`),kc(t))return new q(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=tl(),this.sortedSet=new lt(this.comparator)}static emptySet(e){return new Mo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Mo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(){this.B_=new lt(te.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):se():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ia{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ia(e,n,Mo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class yN{constructor(){this.queries=new ya(e=>o4(e),Wd),this.onlineState="Unknown",this.W_=new Set}}async function fg(t,e){const n=le(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.K_()&&e.U_()&&(r=2):(i=new vN,r=e.U_()?0:1);try{switch(r){case 0:i.q_=await n.onListen(s,!0);break;case 1:i.q_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=dg(o,`Initialization of query '${oo(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Q_.push(e),e.G_(n.onlineState),i.q_&&e.z_(i.q_)&&mg(n)}async function pg(t,e){const n=le(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Q_.indexOf(e);o>=0&&(i.Q_.splice(o,1),i.Q_.length===0?s=e.U_()?0:1:!i.K_()&&e.U_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wN(t,e){const n=le(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Q_)a.z_(s)&&(r=!0);o.q_=s}}r&&mg(n)}function EN(t,e,n){const r=le(t),s=r.queries.get(e);if(s)for(const i of s.Q_)i.onError(n);r.queries.delete(e)}function mg(t){t.W_.forEach(e=>{e.next()})}var J2,jv;(jv=J2||(J2={})).j_="default",jv.Cache="cache";class gg{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ia(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==J2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e){this.key=e}}class $4{constructor(e){this.key=e}}class xN{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=ue(),this.mutatedKeys=ue(),this.ha=a4(e),this.Pa=new Mo(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new Mv,s=n?n.Pa:this.Pa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,h)=>{const d=s.get(u),p=Hd(this.query,h)?h:null,g=!!d&&this.mutatedKeys.has(d.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let x=!1;d&&p?d.data.isEqual(p.data)?g!==_&&(r.track({type:3,doc:p}),x=!0):this.da(d,p)||(r.track({type:2,doc:p}),x=!0,(l&&this.ha(p,l)>0||c&&this.ha(p,c)<0)&&(a=!0)):!d&&p?(r.track({type:0,doc:p}),x=!0):d&&!p&&(r.track({type:1,doc:d}),x=!0,(l||c)&&(a=!0)),x&&(p?(o=o.add(p),i=_?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:i}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((u,h)=>function(p,g){const _=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return _(p)-_(g)}(u.type,h.type)||this.ha(u.doc,h.doc)),this.Aa(r),s=s!=null&&s;const a=n&&!s?this.Ra():[],l=this.la.size===0&&this.current&&!s?1:0,c=l!==this.ca;return this.ca=l,o.length!==0||c?{snapshot:new ia(this.query,e.Pa,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Mv,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=ue(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new $4(r))}),this.la.forEach(r=>{e.has(r)||n.push(new U4(r))}),n}fa(e){this.ua=e.hs,this.la=ue();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return ia.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class TN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class CN{constructor(e){this.key=e,this.pa=!1}}class IN{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new ya(a=>o4(a),Wd),this.Sa=new Map,this.ba=new Set,this.Da=new lt(te.comparator),this.Ca=new Map,this.va=new sg,this.Fa={},this.Ma=new Map,this.xa=sa.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function SN(t,e,n=!0){const r=G4(t);let s;const i=r.wa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ga()):s=await z4(r,e,n,!0),s}async function AN(t,e){const n=G4(t);await z4(n,e,!0,!1)}async function z4(t,e,n,r){const s=await Yk(t.localStore,yr(e)),i=s.targetId,o=n?t.sharedClientState.addLocalQueryTarget(i):"not-current";let a;return r&&(a=await RN(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&D4(t.remoteStore,s),a}async function RN(t,e,n,r,s){t.Na=(h,d,p)=>async function(_,x,m,v){let y=x.view.Ta(m);y.Xi&&(y=await Pv(_.localStore,x.query,!1).then(({documents:k})=>x.view.Ta(k,y)));const C=v&&v.targetChanges.get(x.targetId),N=v&&v.targetMismatches.get(x.targetId)!=null,E=x.view.applyChanges(y,_.isPrimaryClient,C,N);return Vv(_,x.targetId,E.Va),E.snapshot}(t,h,d,p);const i=await Pv(t.localStore,e,!0),o=new xN(e,i.hs),a=o.Ta(i.documents),l=bc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Vv(t,n,c.Va);const u=new TN(e,n,o);return t.wa.set(e,u),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}async function kN(t,e,n){const r=le(t),s=r.wa.get(e),i=r.Sa.get(s.targetId);if(i.length>1)return r.Sa.set(s.targetId,i.filter(o=>!Wd(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await X2(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ag(r.remoteStore,s.targetId),Z2(r,s.targetId)}).catch(Rc)):(Z2(r,s.targetId),await X2(r.localStore,s.targetId,!0))}async function NN(t,e){const n=le(t),r=n.wa.get(e),s=n.Sa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ag(n.remoteStore,r.targetId))}async function bN(t,e,n){const r=FN(t);try{const s=await function(o,a){const l=le(o),c=ht.now(),u=a.reduce((p,g)=>p.add(g.key),ue());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=Qr(),_=ue();return l.os.getEntries(p,u).next(x=>{g=x,g.forEach((m,v)=>{v.isValidDocument()||(_=_.add(m))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(x=>{h=x;const m=[];for(const v of a){const y=tk(v,h.get(v.key).overlayedDocument);y!=null&&m.push(new Qs(v.key,y,ZE(y.value.mapValue),Un.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,m,a)}).next(x=>{d=x;const m=x.applyToLocalDocumentSet(h,_);return l.documentOverlayCache.saveOverlays(p,x.batchId,m)})}).then(()=>({batchId:d.batchId,changes:c4(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Fa[o.currentUser.toKey()];c||(c=new lt(Ee)),c=c.insert(a,l),o.Fa[o.currentUser.toKey()]=c}(r,s.batchId,n),await Lc(r,s.changes),await Xd(r.remoteStore)}catch(s){const i=dg(s,"Failed to persist write");n.reject(i)}}async function B4(t,e){const n=le(t);try{const r=await Gk(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Ca.get(i);o&&(Le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.pa=!0:s.modifiedDocuments.size>0?Le(o.pa):s.removedDocuments.size>0&&(Le(o.pa),o.pa=!1))}),await Lc(n,r,e)}catch(r){await Rc(r)}}function Fv(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.wa.forEach((i,o)=>{const a=o.view.G_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=le(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const d of h.Q_)d.G_(a)&&(c=!0)}),c&&mg(l)}(r.eventManager,e),s.length&&r.ya.u_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function PN(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ca.get(e),i=s&&s.key;if(i){let o=new lt(te.comparator);o=o.insert(i,Ft.newNoDocument(i,ae.min()));const a=ue().add(i),l=new Kd(ae.min(),new Map,new lt(Ee),o,a);await B4(r,l),r.Da=r.Da.remove(i),r.Ca.delete(e),_g(r)}else await X2(r.localStore,e,!1).then(()=>Z2(r,e,n)).catch(Rc)}async function LN(t,e){const n=le(t),r=e.batch.batchId;try{const s=await qk(n.localStore,e);H4(n,r,null),W4(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Lc(n,s)}catch(s){await Rc(s)}}async function DN(t,e,n){const r=le(t);try{const s=await function(o,a){const l=le(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Le(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);H4(r,e,n),W4(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Lc(r,s)}catch(s){await Rc(s)}}function W4(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function H4(t,e,n){const r=le(t);let s=r.Fa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Fa[r.currentUser.toKey()]=s}}function Z2(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||q4(t,r)})}function q4(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);n!==null&&(ag(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),_g(t))}function Vv(t,e,n){for(const r of n)r instanceof U4?(t.va.addReference(r.key,e),ON(t,r)):r instanceof $4?(G("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||q4(t,r.key)):se()}function ON(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(G("SyncEngine","New document in limbo: "+n),t.ba.add(r),_g(t))}function _g(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new te(be.fromString(e)),r=t.xa.next();t.Ca.set(r,new CN(n)),t.Da=t.Da.insert(n,r),D4(t.remoteStore,new ws(yr(Bd(n.path)),r,"TargetPurposeLimboResolution",Km._e))}}async function Lc(t,e,n){const r=le(t),s=[],i=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{o.push(r.Na(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=og.Ki(l.targetId,c);i.push(u)}}))}),await Promise.all(o),r.ya.u_(s),await async function(l,c){const u=le(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>z.forEach(c,d=>z.forEach(d.qi,p=>u.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>z.forEach(d.Qi,p=>u.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!kc(h))throw h;G("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const p=u.ns.get(d),g=p.snapshotVersion,_=p.withLastLimboFreeSnapshotVersion(g);u.ns=u.ns.insert(d,_)}}}(r.localStore,i))}async function MN(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await N4(n.localStore,e);n.currentUser=e,function(i,o){i.Ma.forEach(a=>{a.forEach(l=>{l.reject(new q(U.CANCELLED,o))})}),i.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Lc(n,r.us)}}function jN(t,e){const n=le(t),r=n.Ca.get(e);if(r&&r.pa)return ue().add(r.key);{let s=ue();const i=n.Sa.get(e);if(!i)return s;for(const o of i){const a=n.wa.get(o);s=s.unionWith(a.view.Ia)}return s}}function G4(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=B4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PN.bind(null,e),e.ya.u_=wN.bind(null,e.eventManager),e.ya.La=EN.bind(null,e.eventManager),e}function FN(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DN.bind(null,e),e}class Uv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Qd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Hk(this.persistence,new Bk,e.initialUser,this.serializer)}createPersistence(e){return new Uk(ig.Hr,this.serializer)}createSharedClientState(e){return new Jk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class VN{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Fv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=MN.bind(null,this.syncEngine),await _N(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yN}()}createDatastore(e){const n=Qd(e.databaseInfo.databaseId),r=function(i){return new nN(i)}(e.databaseInfo);return function(i,o,a,l){return new iN(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new aN(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Fv(this.syncEngine,n,0),function(){return Dv.D()?new Dv:new Zk}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,u){const h=new IN(s,i,o,a,l,c);return u&&(h.Oa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const s=le(r);G("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await Pc(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Tr("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Mt.UNAUTHENTICATED,this.clientId=YE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{G("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(G("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new q(U.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=dg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ff(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await N4(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $v(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zN(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ov(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ov(e.remoteStore,s)),t._onlineComponents=e}function $N(t){return t.name==="FirebaseError"?t.code===U.FAILED_PRECONDITION||t.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function zN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await ff(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!$N(n))throw n;Jo("Error using user provided cache. Falling back to memory cache: "+n),await ff(t,new Uv)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await ff(t,new Uv);return t._offlineComponents}async function K4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await $v(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await $v(t,new VN))),t._onlineComponents}function BN(t){return K4(t).then(e=>e.syncEngine)}async function Ph(t){const e=await K4(t),n=e.eventManager;return n.onListen=SN.bind(null,e.syncEngine),n.onUnlisten=kN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=AN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=NN.bind(null,e.syncEngine),n}function WN(t,e,n={}){const r=new vr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new vg({next:d=>{o.enqueueAndForget(()=>pg(i,h));const p=d.docs.has(a);!p&&d.fromCache?c.reject(new q(U.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&l&&l.source==="server"?c.reject(new q(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new gg(Bd(a.path),u,{includeMetadataChanges:!0,ta:!0});return fg(i,h)}(await Ph(t),t.asyncQueue,e,n,r)),r.promise}function HN(t,e,n={}){const r=new vr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new vg({next:d=>{o.enqueueAndForget(()=>pg(i,h)),d.fromCache&&l.source==="server"?c.reject(new q(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new gg(a,u,{includeMetadataChanges:!0,ta:!0});return fg(i,h)}(await Ph(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(t,e,n){if(!n)throw new q(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qN(t,e,n,r){if(e===!0&&r===!0)throw new q(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Bv(t){if(!te.isDocumentKey(t))throw new q(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Wv(t){if(te.isDocumentKey(t))throw new q(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Jd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se()}function hn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jd(t);throw new q(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function GN(t,e){if(e<=0)throw new q(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new q(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new q(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uR;switch(r.type){case"firstParty":return new pR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=zv.get(n);r&&(G("ComponentProvider","Removing Datastore"),zv.delete(n),r.terminate())}(this),Promise.resolve()}}function KN(t,e,n,r={}){var s;const i=(t=hn(t,Zd))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Mt.MOCK_USER;else{a=wm(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new q(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Mt(c)}t._authCredentials=new hR(new QE(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ar(this.firestore,e,this._query)}}class Wt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}}class Ls extends Ar{constructor(e,n,r){super(e,n,Bd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new te(e))}withConverter(e){return new Ls(this.firestore,e,this._path)}}function Nt(t,e,...n){if(t=Ne(t),Y4("collection","path",e),t instanceof Zd){const r=be.fromString(e,...n);return Wv(r),new Ls(t,null,r)}{if(!(t instanceof Wt||t instanceof Ls))throw new q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return Wv(r),new Ls(t.firestore,null,r)}}function we(t,e,...n){if(t=Ne(t),arguments.length===1&&(e=YE.newId()),Y4("doc","path",e),t instanceof Zd){const r=be.fromString(e,...n);return Bv(r),new Wt(t,null,new te(r))}{if(!(t instanceof Wt||t instanceof Ls))throw new q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return Bv(r),new Wt(t.firestore,t instanceof Ls?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new P4(this,"async_queue_retry"),this.cu=()=>{const n=df();n&&G("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=df();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=df();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new vr;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!kc(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Tr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const s=hg.createAndSchedule(this,e,n,r,i=>this.Iu(i));return this.su.push(s),s}lu(){this.ou&&se()}verifyOperationInProgress(){}async Tu(){let e;do e=this.nu,await e;while(e!==this.nu)}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function qv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Yr extends Zd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new QN}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||X4(this),this._firestoreClient.terminate()}}function YN(t,e){const n=typeof t=="object"?t:Cd(),r=typeof t=="string"?t:e||"(default)",s=yc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=vm("firestore");i&&KN(s,...i)}return s}function e0(t){return t._firestoreClient||X4(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function X4(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,u){return new RR(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Q4(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new UN(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oa(qt.fromBase64String(e))}catch(n){throw new q(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new oa(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=/^__.*__$/;class JN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Qs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nc(e,this.data,n,this.fieldTransforms)}}class J4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Qs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Z4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}class n0{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new n0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.mu({path:r,gu:!1});return s.pu(e),s}yu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.mu({path:r,gu:!1});return s.Ru(),s}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Lh(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(Z4(this.Vu)&&XN.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class ZN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qd(e)}Cu(e,n,r,s=!1){return new n0({Vu:e,methodName:n,Du:r,path:It.emptyPath(),gu:!1,bu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Oc(t){const e=t._freezeSettings(),n=Qd(t._databaseId);return new ZN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ex(t,e,n,r,s,i={}){const o=t.Cu(i.merge||i.mergeFields?2:0,e,n,s);xg("Data must be an object, but it was:",o,r);const a=nx(r,o);let l,c;if(i.merge)l=new gn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const d=ep(e,h,n);if(!o.contains(d))throw new q(U.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);sx(u,d)||u.push(d)}l=new gn(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new JN(new sn(a),l,c)}class r0 extends Dc{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof r0}}function eb(t,e,n){return new n0({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class wg extends Dc{_toFieldTransform(e){return new _4(e.path,new ic)}isEqual(e){return e instanceof wg}}class Eg extends Dc{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=eb(this,e,!0),r=this.vu.map(i=>Ea(i,n)),s=new ra(r);return new _4(e.path,s)}isEqual(e){return e instanceof Eg&&Wl(this.vu,e.vu)}}function tb(t,e,n,r){const s=t.Cu(1,e,n);xg("Data must be an object, but it was:",s,r);const i=[],o=sn.empty();Yi(r,(l,c)=>{const u=Tg(e,l,n);c=Ne(c);const h=s.yu(u);if(c instanceof r0)i.push(u);else{const d=Ea(c,h);d!=null&&(i.push(u),o.set(u,d))}});const a=new gn(i);return new J4(o,a,s.fieldTransforms)}function nb(t,e,n,r,s,i){const o=t.Cu(1,e,n),a=[ep(e,r,n)],l=[s];if(i.length%2!=0)throw new q(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(ep(e,i[d])),l.push(i[d+1]);const c=[],u=sn.empty();for(let d=a.length-1;d>=0;--d)if(!sx(c,a[d])){const p=a[d];let g=l[d];g=Ne(g);const _=o.yu(p);if(g instanceof r0)c.push(p);else{const x=Ea(g,_);x!=null&&(c.push(p),u.set(p,x))}}const h=new gn(c);return new J4(u,h,o.fieldTransforms)}function tx(t,e,n,r=!1){return Ea(n,t.Cu(r?4:3,e))}function Ea(t,e){if(rx(t=Ne(t)))return xg("Unsupported field value:",e,t),nx(t,e);if(t instanceof Dc)return function(r,s){if(!Z4(s.Vu))throw s.Su(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Su(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Ea(a,s.wu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ht.fromDate(r);return{timestampValue:Nh(s.serializer,i)}}if(r instanceof ht){const i=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nh(s.serializer,i)}}if(r instanceof yg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof oa)return{bytesValue:T4(s.serializer,r._byteString)};if(r instanceof Wt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rg(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Su(`Unsupported field value: ${Jd(r)}`)}(t,e)}function nx(t,e){const n={};return XE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yi(t,(r,s)=>{const i=Ea(s,e.fu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function rx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ht||t instanceof yg||t instanceof oa||t instanceof Wt||t instanceof Dc)}function xg(t,e,n){if(!rx(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Jd(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function ep(t,e,n){if((e=Ne(e))instanceof t0)return e._internalPath;if(typeof e=="string")return Tg(t,e);throw Lh("Field path arguments must be of type string or ",t,!1,void 0,n)}const rb=new RegExp("[~\\*/\\[\\]]");function Tg(t,e,n){if(e.search(rb)>=0)throw Lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new t0(...e.split("."))._internalPath}catch{throw Lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new q(U.INVALID_ARGUMENT,a+t+l)}function sx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ig("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sb extends Cg{data(){return super.data()}}function Ig(t,e){return typeof e=="string"?Tg(t,e):e instanceof t0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sg{}class s0 extends Sg{}function jo(t,e,...n){let r=[];e instanceof Sg&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Rg).length,a=i.filter(l=>l instanceof Ag).length;if(o>1||o>0&&a>0)throw new q(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Ag extends s0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ag(e,n,r)}_apply(e){const n=this._parse(e);return ax(e._query,n),new Ar(e.firestore,e.converter,q2(e._query,n))}_parse(e){const n=Oc(e.firestore);return function(i,o,a,l,c,u,h){let d;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new q(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Kv(h,u);const p=[];for(const g of h)p.push(Gv(l,i,g));d={arrayValue:{values:p}}}else d=Gv(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Kv(h,u),d=tx(a,o,h,u==="in"||u==="not-in");return it.create(c,u,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Rg extends Sg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Rg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:sr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)ax(o,l),o=q2(o,l)}(e._query,n),new Ar(e.firestore,e.converter,q2(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class kg extends s0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new kg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new q(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sc(i,o)}(e._query,this._field,this._direction);return new Ar(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Xi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Dh(t,e="asc"){const n=e,r=Ig("orderBy",t);return kg._create(r,n)}class Ng extends s0{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ng(e,n,r)}_apply(e){return new Ar(e.firestore,e.converter,Rh(e._query,this._limit,this._limitType))}}function Oh(t){return GN("limit",t),Ng._create("limit",t,"F")}class bg extends s0{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new bg(e,n,r)}_apply(e){const n=ib(e,this.type,this._docOrFields,this._inclusive);return new Ar(e.firestore,e.converter,function(s,i){return new Xi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function ox(...t){return bg._create("startAfter",t,!1)}function ib(t,e,n,r){if(n[0]=Ne(n[0]),n[0]instanceof Cg)return function(i,o,a,l,c){if(!l)throw new q(U.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const h of Oo(i))if(h.field.isKeyField())u.push(Ah(o,l.key));else{const d=l.data.field(h.field);if(zd(d))throw new q(U.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const p=h.field.canonicalString();throw new q(U.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}u.push(d)}return new na(u,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Oc(t.firestore);return function(o,a,l,c,u,h){const d=o.explicitOrderBy;if(u.length>d.length)throw new q(U.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let g=0;g<u.length;g++){const _=u[g];if(d[g].field.isKeyField()){if(typeof _!="string")throw new q(U.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof _}`);if(!Zm(o)&&_.indexOf("/")!==-1)throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${_}' contains a slash.`);const x=o.path.child(be.fromString(_));if(!te.isDocumentKey(x))throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const m=new te(x);p.push(Ah(a,m))}else{const x=tx(l,c,_);p.push(x)}}return new na(p,h)}(t._query,t.firestore._databaseId,s,e,n,r)}}function Gv(t,e,n){if(typeof(n=Ne(n))=="string"){if(n==="")throw new q(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zm(e)&&n.indexOf("/")!==-1)throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(be.fromString(n));if(!te.isDocumentKey(r))throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ah(t,new te(r))}if(n instanceof Wt)return Ah(t,n._key);throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jd(n)}.`)}function Kv(t,e){if(!Array.isArray(t)||t.length===0)throw new q(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ax(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ob{convertValue(e,n="none"){switch(Mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw se()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Yi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new yg(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Qm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(tc(e));default:return null}}convertTimestamp(e){const n=Vs(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=be.fromString(e);Le(k4(r));const s=new nc(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||Tr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cx extends Cg{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ig("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Fu extends cx{data(e={}){return super.data(e)}}class ux{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new rl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Fu(this._firestore,this._userDataWriter,r.key,r,new rl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Fu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new rl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Fu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new rl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:ab(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ab(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t){t=hn(t,Wt);const e=hn(t.firestore,Yr);return WN(e0(e),t._key).then(n=>fx(e,t,n))}class Pg extends ob{constructor(e){super(),this.firestore=e}convertBytes(e){return new oa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,n)}}function lb(t){t=hn(t,Ar);const e=hn(t.firestore,Yr),n=e0(e),r=new Pg(e);return ix(t._query),HN(n,t._query).then(s=>new ux(e,r,t,s))}function dx(t,e,n){t=hn(t,Wt);const r=hn(t.firestore,Yr),s=lx(t.converter,e,n);return i0(r,[ex(Oc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Un.none())])}function En(t,e,n,...r){t=hn(t,Wt);const s=hn(t.firestore,Yr),i=Oc(s);let o;return o=typeof(e=Ne(e))=="string"||e instanceof t0?nb(i,"updateDoc",t._key,e,n,r):tb(i,"updateDoc",t._key,e),i0(s,[o.toMutation(t._key,Un.exists(!0))])}function Mc(t){return i0(hn(t.firestore,Yr),[new eg(t._key,Un.none())])}function xa(t,e){const n=hn(t.firestore,Yr),r=we(t),s=lx(t.converter,e);return i0(n,[ex(Oc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Un.exists(!1))]).then(()=>r)}function Ir(t,...e){var n,r,s;t=Ne(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||qv(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(qv(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,u;if(t instanceof Wt)c=hn(t.firestore,Yr),u=Bd(t._key.path),l={next:h=>{e[o]&&e[o](fx(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=hn(t,Ar);c=hn(h.firestore,Yr),u=h._query;const d=new Pg(c);l={next:p=>{e[o]&&e[o](new ux(c,d,h,p))},error:e[o+1],complete:e[o+2]},ix(t._query)}return function(d,p,g,_){const x=new vg(_),m=new gg(p,x,g);return d.asyncQueue.enqueueAndForget(async()=>fg(await Ph(d),m)),()=>{x.Qa(),d.asyncQueue.enqueueAndForget(async()=>pg(await Ph(d),m))}}(e0(c),u,a,l)}function i0(t,e){return function(r,s){const i=new vr;return r.asyncQueue.enqueueAndForget(async()=>bN(await BN(r),s,i)),i.promise}(e0(t),e)}function fx(t,e,n){const r=n.docs.get(e._key),s=new Pg(t);return new cx(t,s,e._key,r,new rl(n.hasPendingWrites,n.fromCache),e.converter)}function _n(){return new wg("serverTimestamp")}function cb(...t){return new Eg("arrayUnion",t)}(function(e,n=!0){(function(s){va=s})(qs),js(new Gr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Yr(new dR(r.getProvider("auth-internal")),new gR(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nc(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Vn(hv,"4.5.0",e),Vn(hv,"4.5.0","esm2017")})();var ub="firebase",hb="10.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn(ub,hb,"app");function Lg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function px(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const db=px,mx=new vc("auth","Firebase",px());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new Td("@firebase/auth");function fb(t,...e){Mh.logLevel<=ce.WARN&&Mh.warn(`Auth (${qs}): ${t}`,...e)}function Vu(t,...e){Mh.logLevel<=ce.ERROR&&Mh.error(`Auth (${qs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t,...e){throw Dg(t,...e)}function Er(t,...e){return Dg(t,...e)}function gx(t,e,n){const r=Object.assign(Object.assign({},db()),{[e]:n});return new vc("auth","Firebase",r).create(e,{appName:t.name})}function pb(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Bn(t,"argument-error"),gx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Dg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return mx.create(t,...e)}function re(t,e,...n){if(!t)throw Dg(e,...n)}function Fr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vu(e),new Error(e)}function Xr(t,e){t||Fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function mb(){return Qv()==="http:"||Qv()==="https:"}function Qv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mb()||FA()||"connection"in navigator)?navigator.onLine:!0}function _b(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xr(n>e,"Short delay should be less than long delay!"),this.isMobile=Em()||j5()}get(){return gb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(t,e){Xr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=new jc(3e4,6e4);function Ys(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xs(t,e,n,r,s={}){return vx(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=ma(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),_x.fetch()(yx(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function vx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},vb),e);try{const s=new Eb(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw vu(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw vu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw vu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw vu(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw gx(t,u,c);Bn(t,u)}}catch(s){if(s instanceof Sr)throw s;Bn(t,"network-request-failed",{message:String(s)})}}async function Fc(t,e,n,r,s={}){const i=await Xs(t,e,n,r,s);return"mfaPendingCredential"in i&&Bn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function yx(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Og(t.config,s):`${t.config.apiScheme}://${s}`}function wb(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Eb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Er(this.auth,"network-request-failed")),yb.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Er(t,e,r);return s.customData._tokenResponse=n,s}function Yv(t){return t!==void 0&&t.enterprise!==void 0}class xb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return wb(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Tb(t,e){return Xs(t,"GET","/v2/recaptchaConfig",Ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cb(t,e){return Xs(t,"POST","/v1/accounts:delete",e)}async function Ib(t,e){return Xs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Sb(t,e=!1){const n=Ne(t),r=await n.getIdToken(e),s=Mg(r);re(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:yl(pf(s.auth_time)),issuedAtTime:yl(pf(s.iat)),expirationTime:yl(pf(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function pf(t){return Number(t)*1e3}function Mg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vu("JWT malformed, contained fewer than 3 sections"),null;try{const s=_h(n);return s?JSON.parse(s):(Vu("Failed to decode base64 JWT payload"),null)}catch(s){return Vu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Ab(t){const e=Mg(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Sr&&Rb(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Rb({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yl(this.lastLoginAt),this.creationTime=yl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jh(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ac(t,Ib(n,{idToken:r}));re(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Pb(i.providerUserInfo):[],a=bb(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new wx(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function Nb(t){const e=Ne(t);await jh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bb(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Pb(t){return t.map(e=>{var{providerId:n}=e,r=Lg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lb(t,e){const n=await vx(t,{},async()=>{const r=ma({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=yx(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",_x.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Db(t,e){return Xs(t,"POST","/v2/accounts:revokeToken",Ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ab(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return re(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Lb(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new lc;return r&&(re(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(re(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(re(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lc,this.toJSON())}_performRefresh(){return Fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ci{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Lg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new wx(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ac(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Sb(this,e)}reload(){return Nb(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ci(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await jh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ac(this,Cb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,m=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:y,emailVerified:C,isAnonymous:N,providerData:E,stsTokenManager:k}=n;re(y&&k,e,"internal-error");const T=lc.fromJSON(this.name,k);re(typeof y=="string",e,"internal-error"),as(h,e.name),as(d,e.name),re(typeof C=="boolean",e,"internal-error"),re(typeof N=="boolean",e,"internal-error"),as(p,e.name),as(g,e.name),as(_,e.name),as(x,e.name),as(m,e.name),as(v,e.name);const w=new Ci({uid:y,auth:e,email:d,emailVerified:C,displayName:h,isAnonymous:N,photoURL:g,phoneNumber:p,tenantId:_,stsTokenManager:T,createdAt:m,lastLoginAt:v});return E&&Array.isArray(E)&&(w.providerData=E.map(A=>Object.assign({},A))),x&&(w._redirectEventId=x),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new lc;s.updateFromServerResponse(n);const i=new Ci({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await jh(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=new Map;function Vr(t){Xr(t instanceof Function,"Expected a class definition");let e=Xv.get(t);return e?(Xr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Xv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ex.type="NONE";const Jv=Ex;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t,e,n){return`firebase:${t}:${e}:${n}`}class Fo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Uu(this.userKey,s.apiKey,i),this.fullPersistenceKey=Uu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ci._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Fo(Vr(Jv),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Vr(Jv);const o=Uu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=Ci._fromJSON(e,u);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Fo(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Fo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Cx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Sx(e))return"Blackberry";if(Ax(e))return"Webos";if(jg(e))return"Safari";if((e.includes("chrome/")||Tx(e))&&!e.includes("edge/"))return"Chrome";if(Ix(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xx(t=at()){return/firefox\//i.test(t)}function jg(t=at()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Tx(t=at()){return/crios\//i.test(t)}function Cx(t=at()){return/iemobile/i.test(t)}function Ix(t=at()){return/android/i.test(t)}function Sx(t=at()){return/blackberry/i.test(t)}function Ax(t=at()){return/webos/i.test(t)}function o0(t=at()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Ob(t=at()){var e;return o0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Mb(){return VA()&&document.documentMode===10}function Rx(t=at()){return o0(t)||Ix(t)||Ax(t)||Sx(t)||/windows phone/i.test(t)||Cx(t)}function jb(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t,e=[]){let n;switch(t){case"Browser":n=Zv(at());break;case"Worker":n=`${Zv(at())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb(t,e={}){return Xs(t,"GET","/v2/passwordPolicy",Ys(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=6;class $b{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Ub,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ey(this),this.idTokenSubscription=new ey(this),this.beforeStateQueue=new Fb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Fo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await jh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_b()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Ne(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Vb(this),n=new $b(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Db(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vr(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await Fo.create(this,[Vr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&fb(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Js(t){return Ne(t)}class ey{constructor(e){this.auth=e,this.observer=null,this.addObserver=KA(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Bb(t){a0=t}function Nx(t){return a0.loadJS(t)}function Wb(){return a0.recaptchaEnterpriseScript}function Hb(){return a0.gapiScript}function qb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Gb="recaptcha-enterprise",Kb="NO_RECAPTCHA";class Qb{constructor(e){this.type=Gb,this.auth=Js(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{Tb(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new xb(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;Yv(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(Kb)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Yv(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Wb();l.length!==0&&(l+=a),Nx(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function ty(t,e,n,r=!1){const s=new Qb(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function np(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ty(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await ty(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(t,e){const n=yc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Wl(i,e??{}))return s;Bn(s,"already-initialized")}return n.initialize({options:e})}function Xb(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Jb(t,e,n){const r=Js(t);re(r._canInitEmulator,r,"emulator-config-failed"),re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=bx(e),{host:o,port:a}=Zb(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||eP()}function bx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Zb(t){const e=bx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ny(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:ny(o)}}}function ny(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function eP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,n){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}}async function tP(t,e){return Xs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nP(t,e){return Fc(t,"POST","/v1/accounts:signInWithPassword",Ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rP(t,e){return Fc(t,"POST","/v1/accounts:signInWithEmailLink",Ys(t,e))}async function sP(t,e){return Fc(t,"POST","/v1/accounts:signInWithEmailLink",Ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc extends Fg{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new cc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new cc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return np(e,n,"signInWithPassword",nP);case"emailLink":return rP(e,{email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return np(e,r,"signUpPassword",tP);case"emailLink":return sP(e,{idToken:n,email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(t,e){return Fc(t,"POST","/v1/accounts:signInWithIdp",Ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP="http://localhost";class ji extends Fg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ji(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Lg(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ji(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Vo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Vo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Vo(e,n)}buildRequest(){const e={requestUri:iP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ma(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aP(t){const e=Xa(Ja(t)).link,n=e?Xa(Ja(e)).deep_link_id:null,r=Xa(Ja(t)).deep_link_id;return(r?Xa(Ja(r)).link:null)||r||n||e||t}class Vg{constructor(e){var n,r,s,i,o,a;const l=Xa(Ja(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,h=oP((s=l.mode)!==null&&s!==void 0?s:null);re(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=aP(e);try{return new Vg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){this.providerId=Ta.PROVIDER_ID}static credential(e,n){return cc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Vg.parseLink(n);return re(r,"argument-error"),cc._fromEmailAndCode(e,r.code,r.tenantId)}}Ta.PROVIDER_ID="password";Ta.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ta.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends Ug{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Vc{constructor(){super("facebook.com")}static credential(e){return ji._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.FACEBOOK_SIGN_IN_METHOD="facebook.com";ds.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Vc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ji._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Dr.credential(n,r)}catch{return null}}}Dr.GOOGLE_SIGN_IN_METHOD="google.com";Dr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends Vc{constructor(){super("github.com")}static credential(e){return ji._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.GITHUB_SIGN_IN_METHOD="github.com";fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends Vc{constructor(){super("twitter.com")}static credential(e,n){return ji._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ps.credential(n,r)}catch{return null}}}ps.TWITTER_SIGN_IN_METHOD="twitter.com";ps.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lP(t,e){return Fc(t,"POST","/v1/accounts:signUp",Ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Ci._fromIdTokenResponse(e,r,s),o=ry(r);return new Fi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=ry(r);return new Fi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function ry(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh extends Sr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Fh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Fh(e,n,r,s)}}function Px(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Fh._fromErrorAndOperation(t,i,e,r):i})}async function cP(t,e,n=!1){const r=await ac(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uP(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await ac(t,Px(r,s,e,t),n);re(i.idToken,r,"internal-error");const o=Mg(i.idToken);re(o,r,"internal-error");const{sub:a}=o;return re(t.uid===a,r,"user-mismatch"),Fi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Bn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(t,e,n=!1){const r="signIn",s=await Px(t,r,e),i=await Fi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function hP(t,e){return Lx(Js(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dx(t){const e=Js(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dP(t,e,n){const r=Js(t),o=await np(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lP).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Dx(t),l}),a=await Fi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function fP(t,e,n){return hP(Ne(t),Ta.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Dx(t),r})}function pP(t,e,n,r){return Ne(t).onIdTokenChanged(e,n,r)}function mP(t,e,n){return Ne(t).beforeAuthStateChanged(e,n)}function gP(t,e,n,r){return Ne(t).onAuthStateChanged(e,n,r)}function _P(t){return Ne(t).signOut()}const Vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vh,"1"),this.storage.removeItem(Vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(){const t=at();return jg(t)||o0(t)}const yP=1e3,wP=10;class Mx extends Ox{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=vP()&&jb(),this.fallbackToPolling=Rx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Mb()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,wP):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},yP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Mx.type="LOCAL";const EP=Mx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx extends Ox{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jx.type="SESSION";const Fx=jx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new l0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await xP(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}l0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=$g("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(d.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(){return window}function CP(t){xr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(){return typeof xr().WorkerGlobalScope<"u"&&typeof xr().importScripts=="function"}async function IP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function AP(){return Vx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="firebaseLocalStorageDb",RP=1,Uh="firebaseLocalStorage",$x="fbase_key";class Uc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function c0(t,e){return t.transaction([Uh],e?"readwrite":"readonly").objectStore(Uh)}function kP(){const t=indexedDB.deleteDatabase(Ux);return new Uc(t).toPromise()}function rp(){const t=indexedDB.open(Ux,RP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Uh,{keyPath:$x})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Uh)?e(r):(r.close(),await kP(),e(await rp()))})})}async function sy(t,e,n){const r=c0(t,!0).put({[$x]:e,value:n});return new Uc(r).toPromise()}async function NP(t,e){const n=c0(t,!1).get(e),r=await new Uc(n).toPromise();return r===void 0?null:r.value}function iy(t,e){const n=c0(t,!0).delete(e);return new Uc(n).toPromise()}const bP=800,PP=3;class zx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>PP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=l0._getInstance(AP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await IP(),!this.activeServiceWorker)return;this.sender=new TP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rp();return await sy(e,Vh,"1"),await iy(e,Vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>sy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>NP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>iy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=c0(s,!1).getAll();return new Uc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zx.type="LOCAL";const LP=zx;new jc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t,e){return e?Vr(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg extends Fg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function DP(t){return Lx(t.auth,new zg(t),t.bypassAuthState)}function OP(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),uP(n,new zg(t),t.bypassAuthState)}async function MP(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),cP(n,new zg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DP;case"linkViaPopup":case"linkViaRedirect":return MP;case"reauthViaPopup":case"reauthViaRedirect":return OP;default:Bn(this.auth,"internal-error")}}resolve(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=new jc(2e3,1e4);async function FP(t,e,n){const r=Js(t);pb(t,e,Ug);const s=Bx(r,n);return new gi(r,"signInViaPopup",e,s).executeNotNull()}class gi extends Wx{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,gi.currentPopupAction&&gi.currentPopupAction.cancel(),gi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Xr(this.filter.length===1,"Popup operations only handle one event");const e=$g();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jP.get())};e()}}gi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP="pendingRedirect",$u=new Map;class UP extends Wx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=$u.get(this.auth._key());if(!e){try{const r=await $P(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}$u.set(this.auth._key(),e)}return this.bypassAuthState||$u.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $P(t,e){const n=WP(e),r=BP(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function zP(t,e){$u.set(t._key(),e)}function BP(t){return Vr(t._redirectPersistence)}function WP(t){return Uu(VP,t.config.apiKey,t.name)}async function HP(t,e,n=!1){const r=Js(t),s=Bx(r,e),o=await new UP(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=10*60*1e3;class GP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Hx(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Er(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qP&&this.cachedEventUids.clear(),this.cachedEventUids.has(oy(e))}saveEventToCache(e){this.cachedEventUids.add(oy(e)),this.lastProcessedEventTime=Date.now()}}function oy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Hx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function KP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QP(t,e={}){return Xs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XP=/^https?/;async function JP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await QP(t);for(const n of e)try{if(ZP(n))return}catch{}Bn(t,"unauthorized-domain")}function ZP(t){const e=tp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!XP.test(n))return!1;if(YP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=new jc(3e4,6e4);function ay(){const t=xr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function tL(t){return new Promise((e,n)=>{var r,s,i;function o(){ay(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ay(),n(Er(t,"network-request-failed"))},timeout:eL.get()})}if(!((s=(r=xr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=xr().gapi)===null||i===void 0)&&i.load)o();else{const a=qb("iframefcb");return xr()[a]=()=>{gapi.load?o():n(Er(t,"network-request-failed"))},Nx(`${Hb()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw zu=null,e})}let zu=null;function nL(t){return zu=zu||tL(t),zu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=new jc(5e3,15e3),sL="__/auth/iframe",iL="emulator/auth/iframe",oL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lL(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Og(e,iL):`https://${t.config.authDomain}/${sL}`,r={apiKey:e.apiKey,appName:t.name,v:qs},s=aL.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ma(r).slice(1)}`}async function cL(t){const e=await nL(t),n=xr().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:lL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oL,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Er(t,"network-request-failed"),a=xr().setTimeout(()=>{i(o)},rL.get());function l(){xr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hL=500,dL=600,fL="_blank",pL="http://localhost";class ly{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mL(t,e,n,r=hL,s=dL){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},uL),{width:r.toString(),height:s.toString(),top:i,left:o}),c=at().toLowerCase();n&&(a=Tx(c)?fL:n),xx(c)&&(e=e||pL,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[p,g])=>`${d}${p}=${g},`,"");if(Ob(c)&&a!=="_self")return gL(e||"",a),new ly(null);const h=window.open(e||"",a,u);re(h,t,"popup-blocked");try{h.focus()}catch{}return new ly(h)}function gL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L="__/auth/handler",vL="emulator/auth/handler",yL=encodeURIComponent("fac");async function cy(t,e,n,r,s,i){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:qs,eventId:s};if(e instanceof Ug){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",T2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(i||{}))o[u]=h}if(e instanceof Vc){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${yL}=${encodeURIComponent(l)}`:"";return`${wL(t)}?${ma(a).slice(1)}${c}`}function wL({config:t}){return t.emulator?Og(t,vL):`https://${t.authDomain}/${_L}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="webStorageSupport";class EL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fx,this._completeRedirectFn=HP,this._overrideRedirectResult=zP}async _openPopup(e,n,r,s){var i;Xr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await cy(e,n,r,tp(),s);return mL(e,o,$g())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await cy(e,n,r,tp(),s);return CP(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Xr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await cL(e),r=new GP(e);return n.register("authEvent",s=>(re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(mf,{type:mf},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[mf];o!==void 0&&n(!!o),Bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=JP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Rx()||jg()||o0()}}const xL=EL;var uy="@firebase/auth",hy="1.6.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IL(t){js(new Gr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kx(t)},c=new zb(r,s,i,l);return Xb(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),js(new Gr("auth-internal",e=>{const n=Js(e.getProvider("auth").getImmediate());return(r=>new TL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vn(uy,hy,CL(t)),Vn(uy,hy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL=5*60,AL=M5("authIdTokenMaxAge")||SL;let dy=null;const RL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>AL)return;const s=n==null?void 0:n.token;dy!==s&&(dy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function kL(t=Cd()){const e=yc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Yb(t,{popupRedirectResolver:xL,persistence:[LP,EP,Fx]}),r=M5("authTokenSyncURL");if(r&&r.match(/^\/[^\/].*/)){const i=RL(r);mP(n,i,()=>i(n.currentUser)),pP(n,o=>i(o))}const s=D5("auth");return s&&Jb(n,`http://${s}`),n}function NL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Bb({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Er("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",NL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IL("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="firebasestorage.googleapis.com",Gx="storageBucket",bL=2*60*1e3,PL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je extends Sr{constructor(e,n,r=0){super(gf(e),`Firebase Storage: ${n} (${gf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Je.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xe||(Xe={}));function gf(t){return"storage/"+t}function Bg(){const t="An unknown error occurred, please check the error payload for server response.";return new Je(Xe.UNKNOWN,t)}function LL(t){return new Je(Xe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function DL(t){return new Je(Xe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function OL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Je(Xe.UNAUTHENTICATED,t)}function ML(){return new Je(Xe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function jL(t){return new Je(Xe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function FL(){return new Je(Xe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function VL(){return new Je(Xe.CANCELED,"User canceled the upload/download.")}function UL(t){return new Je(Xe.INVALID_URL,"Invalid URL '"+t+"'.")}function $L(t){return new Je(Xe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function zL(){return new Je(Xe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Gx+"' property when initializing the app?")}function BL(){return new Je(Xe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function WL(){return new Je(Xe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function HL(t){return new Je(Xe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function sp(t){return new Je(Xe.INVALID_ARGUMENT,t)}function Kx(){return new Je(Xe.APP_DELETED,"The Firebase app was deleted.")}function qL(t){return new Je(Xe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wl(t,e){return new Je(Xe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ua(t){throw new Je(Xe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=vn.makeFromUrl(e,n)}catch{return new vn(e,"")}if(r.path==="")return r;throw $L(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(C){C.path_=decodeURIComponent(C.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${u}/b/${s}/o${d}`,"i"),g={bucket:1,path:3},_=n===qx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",m=new RegExp(`^https?://${_}/${s}/${x}`,"i"),y=[{regex:a,indices:l,postModify:i},{regex:p,indices:g,postModify:c},{regex:m,indices:{bucket:1,path:2},postModify:c}];for(let C=0;C<y.length;C++){const N=y[C],E=N.regex.exec(e);if(E){const k=E[N.indices.bucket];let T=E[N.indices.path];T||(T=""),r=new vn(k,T),N.postModify(r);break}}if(r==null)throw UL(e);return r}}class GL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KL(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...x){c||(c=!0,e.apply(null,x))}function h(x){s=setTimeout(()=>{s=null,t(p,l())},x)}function d(){i&&clearTimeout(i)}function p(x,...m){if(c){d();return}if(x){d(),u.call(null,x,...m);return}if(l()||o){d(),u.call(null,x,...m);return}r<64&&(r*=2);let y;a===1?(a=2,y=0):y=(r+Math.random())*1e3,h(y)}let g=!1;function _(x){g||(g=!0,d(),!c&&(s!==null?(x||(a=2),clearTimeout(s),h(0)):x||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,_(!0)},n),_}function QL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(t){return t!==void 0}function XL(t){return typeof t=="object"&&!Array.isArray(t)}function Wg(t){return typeof t=="string"||t instanceof String}function fy(t){return Hg()&&t instanceof Blob}function Hg(){return typeof Blob<"u"}function py(t,e,n,r){if(r<e)throw sp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw sp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Qx(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ii;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ii||(Ii={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e,n,r,s,i,o,a,l,c,u,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,g)=>{this.resolve_=p,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new yu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Ii.NO_ERROR,l=i.getStatus();if(!a||JL(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===Ii.ABORT;r(!1,new yu(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new yu(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());YL(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Bg();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?Kx():VL();o(l)}else{const l=FL();o(l)}};this.canceled_?n(!1,new yu(!1,null,!0)):this.backoffId_=KL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&QL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class yu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function eD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function tD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function nD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function rD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function sD(t,e,n,r,s,i,o=!0){const a=Qx(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return nD(c,e),eD(c,n),tD(c,i),rD(c,r),new ZL(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function oD(...t){const e=iD();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Hg())return new Blob(t);throw new Je(Xe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function aD(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(t){if(typeof atob>"u")throw HL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _f{constructor(e,n){this.data=e,this.contentType=n||null}}function cD(t,e){switch(t){case pr.RAW:return new _f(Yx(e));case pr.BASE64:case pr.BASE64URL:return new _f(Xx(t,e));case pr.DATA_URL:return new _f(hD(e),dD(e))}throw Bg()}function Yx(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function uD(t){let e;try{e=decodeURIComponent(t)}catch{throw wl(pr.DATA_URL,"Malformed data URL.")}return Yx(e)}function Xx(t,e){switch(t){case pr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw wl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case pr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw wl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=lD(e)}catch(s){throw s.message.includes("polyfill")?s:wl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Jx{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw wl(pr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=fD(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function hD(t){const e=new Jx(t);return e.base64?Xx(pr.BASE64,e.rest):uD(e.rest)}function dD(t){return new Jx(t).contentType}function fD(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n){let r=0,s="";fy(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(fy(this.data_)){const r=this.data_,s=aD(r,e,n);return s===null?null:new ms(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ms(r,!0)}}static getBlob(...e){if(Hg()){const n=e.map(r=>r instanceof ms?r.data_:r);return new ms(oD.apply(null,n))}else{const n=e.map(o=>Wg(o)?cD(pr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new ms(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(t){let e;try{e=JSON.parse(t)}catch{return null}return XL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function mD(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function eT(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(t,e){return e}class Qt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||gD}}let wu=null;function _D(t){return!Wg(t)||t.length<2?t:eT(t)}function tT(){if(wu)return wu;const t=[];t.push(new Qt("bucket")),t.push(new Qt("generation")),t.push(new Qt("metageneration")),t.push(new Qt("name","fullPath",!0));function e(i,o){return _D(o)}const n=new Qt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Qt("size");return s.xform=r,t.push(s),t.push(new Qt("timeCreated")),t.push(new Qt("updated")),t.push(new Qt("md5Hash",null,!0)),t.push(new Qt("cacheControl",null,!0)),t.push(new Qt("contentDisposition",null,!0)),t.push(new Qt("contentEncoding",null,!0)),t.push(new Qt("contentLanguage",null,!0)),t.push(new Qt("contentType",null,!0)),t.push(new Qt("metadata","customMetadata",!0)),wu=t,wu}function vD(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new vn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function yD(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return vD(r,t),r}function nT(t,e,n){const r=Zx(e);return r===null?null:yD(t,r,n)}function wD(t,e,n,r){const s=Zx(e);if(s===null||!Wg(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const u=t.bucket,h=t.fullPath,d="/b/"+o(u)+"/o/"+o(h),p=u0(d,n,r),g=Qx({alt:"media",token:c});return p+g})[0]}function ED(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class qg{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(t){if(!t)throw Bg()}function xD(t,e){function n(r,s){const i=nT(t,s,e);return rT(i!==null),i}return n}function TD(t,e){function n(r,s){const i=nT(t,s,e);return rT(i!==null),wD(i,s,t.host,t._protocol)}return n}function sT(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=ML():s=OL():n.getStatus()===402?s=DL(t.bucket):n.getStatus()===403?s=jL(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function iT(t){const e=sT(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=LL(t.path)),i.serverResponse=s.serverResponse,i}return n}function CD(t,e,n){const r=e.fullServerUrl(),s=u0(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new qg(s,i,TD(t,n),o);return a.errorHandler=iT(e),a}function ID(t,e){const n=e.fullServerUrl(),r=u0(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new qg(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=iT(e),a}function SD(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function AD(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=SD(null,e)),r}function RD(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let y="";for(let C=0;C<2;C++)y=y+Math.random().toString().slice(2);return y}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=AD(e,r,s),u=ED(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,d=`\r
--`+l+"--",p=ms.getBlob(h,r,d);if(p===null)throw BL();const g={name:c.fullPath},_=u0(i,t.host,t._protocol),x="POST",m=t.maxUploadRetryTime,v=new qg(_,x,xD(t,n),m);return v.urlParams=g,v.headers=o,v.body=p.uploadData(),v.errorHandler=sT(e),v}class kD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ii.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ii.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ii.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Ua("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ua("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ua("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ua("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ua("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class ND extends kD{initXhr(){this.xhr_.responseType="text"}}function Gg(){return new ND}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n){this._service=e,n instanceof vn?this._location=n:this._location=vn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Vi(e,n)}get root(){const e=new vn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return eT(this._location.path)}get storage(){return this._service}get parent(){const e=pD(this._location.path);if(e===null)return null;const n=new vn(this._location.bucket,e);return new Vi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw qL(e)}}function bD(t,e,n){t._throwIfRoot("uploadBytes");const r=RD(t.storage,t._location,tT(),new ms(e,!0),n);return t.storage.makeRequestWithTokens(r,Gg).then(s=>({metadata:s,ref:t}))}function PD(t){t._throwIfRoot("getDownloadURL");const e=CD(t.storage,t._location,tT());return t.storage.makeRequestWithTokens(e,Gg).then(n=>{if(n===null)throw WL();return n})}function LD(t){t._throwIfRoot("deleteObject");const e=ID(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Gg)}function DD(t,e){const n=mD(t._location.path,e),r=new vn(t._location.bucket,n);return new Vi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(t){return/^[A-Za-z]+:\/\//.test(t)}function MD(t,e){return new Vi(t,e)}function oT(t,e){if(t instanceof Kg){const n=t;if(n._bucket==null)throw zL();const r=new Vi(n,n._bucket);return e!=null?oT(r,e):r}else return e!==void 0?DD(t,e):t}function jD(t,e){if(e&&OD(e)){if(t instanceof Kg)return MD(t,e);throw sp("To use ref(service, url), the first argument must be a Storage instance.")}else return oT(t,e)}function my(t,e){const n=e==null?void 0:e[Gx];return n==null?null:vn.makeFromBucketSpec(n,t)}function FD(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:wm(s,t.app.options.projectId))}class Kg{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=qx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=bL,this._maxUploadRetryTime=PL,this._requests=new Set,s!=null?this._bucket=vn.makeFromBucketSpec(s,this._host):this._bucket=my(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=vn.makeFromBucketSpec(this._url,e):this._bucket=my(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){py("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){py("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new GL(Kx());{const o=sD(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const gy="@firebase/storage",_y="0.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="storage";function $h(t,e,n){return t=Ne(t),bD(t,e,n)}function zh(t){return t=Ne(t),PD(t)}function ip(t){return t=Ne(t),LD(t)}function _i(t,e){return t=Ne(t),jD(t,e)}function VD(t=Cd(),e){t=Ne(t);const r=yc(t,aT).getImmediate({identifier:e}),s=vm("storage");return s&&UD(r,...s),r}function UD(t,e,n,r={}){FD(t,e,n,r)}function $D(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Kg(n,r,s,e,qs)}function zD(){js(new Gr(aT,$D,"PUBLIC").setMultipleInstances(!0)),Vn(gy,_y,""),Vn(gy,_y,"esm2017")}zD();var vy={};const yy="@firebase/database",wy="1.0.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lT="";function BD(t){lT=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ct(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Bl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ts(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new WD(e)}}catch{}return new HD},vi=cT("localStorage"),op=cT("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=new Td("@firebase/database"),qD=function(){let t=1;return function(){return t++}}(),uT=function(t){const e=JA(t),n=new GA;n.update(e);const r=n.digest();return _m.encodeByteArray(r)},$c=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=$c.apply(null,r):typeof r=="object"?e+=Ct(r):e+=r,e+=" "}return e};let Si=null,Ey=!0;const GD=function(t,e){K(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Uo.logLevel=ce.VERBOSE,Si=Uo.log.bind(Uo),e&&op.set("logging_enabled",!0)):typeof t=="function"?Si=t:(Si=null,op.remove("logging_enabled"))},Vt=function(...t){if(Ey===!0&&(Ey=!1,Si===null&&op.get("logging_enabled")===!0&&GD(!0)),Si){const e=$c.apply(null,t);Si(e)}},zc=function(t){return function(...e){Vt(t,...e)}},ap=function(...t){const e="FIREBASE INTERNAL ERROR: "+$c(...t);Uo.error(e)},Jr=function(...t){const e=`FIREBASE FATAL ERROR: ${$c(...t)}`;throw Uo.error(e),new Error(e)},xn=function(...t){const e="FIREBASE WARNING: "+$c(...t);Uo.warn(e)},KD=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&xn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},hT=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},QD=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},aa="[MIN_NAME]",Ui="[MAX_NAME]",Ca=function(t,e){if(t===e)return 0;if(t===aa||e===Ui)return-1;if(e===aa||t===Ui)return 1;{const n=xy(t),r=xy(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},YD=function(t,e){return t===e?0:t<e?-1:1},$a=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ct(e))},Qg=function(t){if(typeof t!="object"||t===null)return Ct(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Ct(e[r]),n+=":",n+=Qg(t[e[r]]);return n+="}",n},dT=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Wn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const fT=function(t){K(!hT(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,l;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(i%2?1:0),i=Math.floor(i/2);c.push(s?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let d=parseInt(u.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},XD=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},JD=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},ZD=new RegExp("^-?(0*)\\d{1,10}$"),eO=-2147483648,tO=2147483647,xy=function(t){if(ZD.test(t)){const e=Number(t);if(e>=eO&&e<=tO)return e}return null},Bc=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw xn("Exception was thrown by user callback.",n),e},Math.floor(0))}},nO=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},El=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){xn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Vt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xn(e)}}class $o{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}$o.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg="5",pT="v",mT="s",gT="r",_T="f",vT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yT="ls",wT="p",lp="ac",ET="websocket",xT="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n,r,s,i=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=vi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&vi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function iO(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function CT(t,e,n){K(typeof e=="string","typeof type must == string"),K(typeof n=="object","typeof params must == object");let r;if(e===ET)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===xT)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);iO(t)&&(n.ns=t.namespace);const s=[];return Wn(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(){this.counters_={}}incrementCounter(e,n=1){ts(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return bA(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf={},yf={};function Xg(t){const e=t.toString();return vf[e]||(vf[e]=new oO),vf[e]}function aO(t,e){const n=t.toString();return yf[n]||(yf[n]=e()),yf[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Bc(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="start",cO="close",uO="pLPCommand",hO="pRTLPCB",IT="id",ST="pw",AT="ser",dO="cb",fO="seg",pO="ts",mO="d",gO="dframe",RT=1870,kT=30,_O=RT-kT,vO=25e3,yO=3e4;class To{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zc(e),this.stats_=Xg(n),this.urlFn=l=>(this.appCheckToken&&(l[lp]=this.appCheckToken),CT(n,xT,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new lO(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(yO)),QD(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Jg((...i)=>{const[o,a,l,c,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Ty)this.id=a,this.password=l;else if(o===cO)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Ty]="t",r[AT]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[dO]=this.scriptTagHolder.uniqueCallbackIdentifier),r[pT]=Yg,this.transportSessionId&&(r[mT]=this.transportSessionId),this.lastSessionId&&(r[yT]=this.lastSessionId),this.applicationId&&(r[wT]=this.applicationId),this.appCheckToken&&(r[lp]=this.appCheckToken),typeof location<"u"&&location.hostname&&vT.test(location.hostname)&&(r[gT]=_T);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){To.forceAllow_=!0}static forceDisallow(){To.forceDisallow_=!0}static isAvailable(){return To.forceAllow_?!0:!To.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!XD()&&!JD()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ct(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=P5(n),s=dT(r,_O);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[gO]="t",r[IT]=e,r[ST]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ct(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Jg{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=qD(),window[uO+this.uniqueCallbackIdentifier]=e,window[hO+this.uniqueCallbackIdentifier]=n,this.myIFrame=Jg.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Vt("frame writing exception"),a.stack&&Vt(a.stack),Vt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Vt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[IT]=this.myID,e[ST]=this.myPW,e[AT]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+kT+r.length<=RT;){const o=this.pendingSegs.shift();r=r+"&"+fO+s+"="+o.seg+"&"+pO+s+"="+o.ts+"&"+mO+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(vO)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Vt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=16384,EO=45e3;let Bh=null;typeof MozWebSocket<"u"?Bh=MozWebSocket:typeof WebSocket<"u"&&(Bh=WebSocket);class Xn{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zc(this.connId),this.stats_=Xg(n),this.connURL=Xn.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[pT]=Yg,typeof location<"u"&&location.hostname&&vT.test(location.hostname)&&(o[gT]=_T),n&&(o[mT]=n),r&&(o[yT]=r),s&&(o[lp]=s),i&&(o[wT]=i),CT(e,ET,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,vi.set("previous_websocket_failure",!0);try{let r;F5(),this.mySock=new Bh(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Xn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Bh!==null&&!Xn.forceDisallow_}static previouslyFailed(){return vi.isInMemoryStorage||vi.get("previous_websocket_failure")===!0}markConnectionHealthy(){vi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Bl(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(K(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Ct(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=dT(n,wO);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(EO))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Xn.responsesRequiredToBeHealthy=2;Xn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[To,Xn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Xn&&Xn.isAvailable();let r=n&&!Xn.previouslyFailed();if(e.webSocketOnly&&(n||xn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Xn];else{const s=this.transports_=[];for(const i of uc.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);uc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}uc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=6e4,TO=5e3,CO=10*1024,IO=100*1024,wf="t",Cy="d",SO="s",Iy="r",AO="e",Sy="o",Ay="a",Ry="n",ky="p",RO="h";class kO{constructor(e,n,r,s,i,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zc("c:"+this.id+":"),this.transportManager_=new uc(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=El(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>IO?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>CO?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(wf in e){const n=e[wf];n===Ay?this.upgradeIfSecondaryHealthy_():n===Iy?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Sy&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=$a("t",e),r=$a("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ky,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Ay,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Ry,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=$a("t",e),r=$a("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=$a(wf,e);if(Cy in e){const r=e[Cy];if(n===RO){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Ry){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===SO?this.onConnectionShutdown_(r):n===Iy?this.onReset_(r):n===AO?ap("Server Error: "+r):n===Sy?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ap("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Yg!==r&&xn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),El(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(xO))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):El(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(TO))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ky,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(vi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.allowedEvents_=e,this.listeners_={},K(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){K(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends bT{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Em()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Wh}getInitialEvent(e){return K(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=32,by=768;class $e{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ae(){return new $e("")}function ge(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function $s(t){return t.pieces_.length-t.pieceNum_}function Fe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new $e(t.pieces_,e)}function PT(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function NO(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function LT(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function DT(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new $e(e,0)}function _t(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof $e)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new $e(n,0)}function fe(t){return t.pieceNum_>=t.pieces_.length}function jn(t,e){const n=ge(t),r=ge(e);if(n===null)return e;if(n===r)return jn(Fe(t),Fe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function OT(t,e){if($s(t)!==$s(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Jn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if($s(t)>$s(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class bO{constructor(e,n){this.errorPrefix_=n,this.parts_=LT(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=xd(this.parts_[r]);MT(this)}}function PO(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=xd(e),MT(t)}function LO(t){const e=t.parts_.pop();t.byteLength_-=xd(e),t.parts_.length>0&&(t.byteLength_-=1)}function MT(t){if(t.byteLength_>by)throw new Error(t.errorPrefix_+"has a key path longer than "+by+" bytes ("+t.byteLength_+").");if(t.parts_.length>Ny)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ny+") or object contains a cycle "+ai(t))}function ai(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg extends bT{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Zg}getInitialEvent(e){return K(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=1e3,DO=60*5*1e3,Py=30*1e3,OO=1.3,MO=3e4,jO="server_kill",Ly=3;class zr extends NT{constructor(e,n,r,s,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=zr.nextPersistentConnectionId_++,this.log_=zc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=za,this.maxReconnectDelay_=DO,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!F5())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Zg.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Wh.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Ct(i)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new ym,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,c=a.s;zr.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ts(e,"w")){const r=Yo(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();xn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||qA(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Py)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=HA(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ct(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):ap("Unrecognized action received from server: "+Ct(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=za,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=za,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>MO&&(this.reconnectDelay_=za),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*OO)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+zr.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(h){K(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Vt("getToken() completed but was canceled"):(Vt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new kO(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,p=>{xn(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(jO)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&xn(h),l())}}}interrupt(e){Vt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Vt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],T2(this.interruptReasons_)&&(this.reconnectDelay_=za,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>Qg(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new $e(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Vt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ly&&(this.reconnectDelay_=Py,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Vt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ly&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+lT.replace(/\./g,"-")]=1,Em()?e["framework.cordova"]=1:j5()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Wh.getInstance().currentlyOnline();return T2(this.interruptReasons_)&&e}}zr.nextPersistentConnectionId_=0;zr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new _e(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new _e(aa,e),s=new _e(aa,n);return this.compare(r,s)!==0}minPost(){return _e.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eu;class jT extends h0{static get __EMPTY_NODE(){return Eu}static set __EMPTY_NODE(e){Eu=e}compare(e,n){return Ca(e.name,n.name)}isDefinedOn(e){throw pa("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return _e.MIN}maxPost(){return new _e(Ui,Eu)}makePost(e,n){return K(typeof e=="string","KeyIndex indexValue must always be a string."),new _e(e,Eu)}toString(){return".key"}}const zo=new jT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class gt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??gt.RED,this.left=s??an.EMPTY_NODE,this.right=i??an.EMPTY_NODE}copy(e,n,r,s,i){return new gt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return an.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return an.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}gt.RED=!0;gt.BLACK=!1;class FO{copy(e,n,r,s,i){return this}insert(e,n,r){return new gt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class an{constructor(e,n=an.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new an(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,gt.BLACK,null,null))}remove(e){return new an(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,gt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new xu(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new xu(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new xu(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new xu(this.root_,null,this.comparator_,!0,e)}}an.EMPTY_NODE=new FO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(t,e){return Ca(t.name,e.name)}function e1(t,e){return Ca(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cp;function UO(t){cp=t}const FT=function(t){return typeof t=="number"?"number:"+fT(t):"string:"+t},VT=function(t){if(t.isLeafNode()){const e=t.val();K(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ts(e,".sv"),"Priority must be a string or number.")}else K(t===cp||t.isEmpty(),"priority of unexpected type.");K(t===cp||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dy;class ft{constructor(e,n=ft.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,K(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),VT(this.priorityNode_)}static set __childrenNodeConstructor(e){Dy=e}static get __childrenNodeConstructor(){return Dy}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ft(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ft.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return fe(e)?this:ge(e)===".priority"?this.priorityNode_:ft.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ft.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ge(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(K(r!==".priority"||$s(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ft.__childrenNodeConstructor.EMPTY_NODE.updateChild(Fe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+FT(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=fT(this.value_):e+=this.value_,this.lazyHash_=uT(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ft.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ft.__childrenNodeConstructor?-1:(K(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=ft.VALUE_TYPE_ORDER.indexOf(n),i=ft.VALUE_TYPE_ORDER.indexOf(r);return K(s>=0,"Unknown leaf type: "+n),K(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ft.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UT,$T;function $O(t){UT=t}function zO(t){$T=t}class BO extends h0{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Ca(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return _e.MIN}maxPost(){return new _e(Ui,new ft("[PRIORITY-POST]",$T))}makePost(e,n){const r=UT(e);return new _e(n,new ft("[PRIORITY-POST]",r))}toString(){return".priority"}}const $t=new BO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=Math.log(2);class HO{constructor(e){const n=i=>parseInt(Math.log(i)/WO,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Hh=function(t,e,n,r){t.sort(e);const s=function(l,c){const u=c-l;let h,d;if(u===0)return null;if(u===1)return h=t[l],d=n?n(h):h,new gt(d,h.node,gt.BLACK,null,null);{const p=parseInt(u/2,10)+l,g=s(l,p),_=s(p+1,c);return h=t[p],d=n?n(h):h,new gt(d,h.node,gt.BLACK,g,_)}},i=function(l){let c=null,u=null,h=t.length;const d=function(g,_){const x=h-g,m=h;h-=g;const v=s(x+1,m),y=t[x],C=n?n(y):y;p(new gt(C,y.node,_,null,v))},p=function(g){c?(c.left=g,c=g):(u=g,c=g)};for(let g=0;g<l.count;++g){const _=l.nextBitIsOne(),x=Math.pow(2,l.count-(g+1));_?d(x,gt.BLACK):(d(x,gt.BLACK),d(x,gt.RED))}return u},o=new HO(t.length),a=i(o);return new an(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ef;const io={};class Ur{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return K(io&&$t,"ChildrenNode.ts has not been loaded"),Ef=Ef||new Ur({".priority":io},{".priority":$t}),Ef}get(e){const n=Yo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof an?n:null}hasIndex(e){return ts(this.indexSet_,e.toString())}addIndex(e,n){K(e!==zo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(_e.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=Hh(r,e.getCompare()):a=io;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new Ur(u,c)}addToIndexes(e,n){const r=vh(this.indexes_,(s,i)=>{const o=Yo(this.indexSet_,i);if(K(o,"Missing index implementation for "+i),s===io)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(_e.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Hh(a,o.getCompare())}else return io;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new _e(e.name,a))),l.insert(e,e.node)}});return new Ur(r,this.indexSet_)}removeFromIndexes(e,n){const r=vh(this.indexes_,s=>{if(s===io)return s;{const i=n.get(e.name);return i?s.remove(new _e(e.name,i)):s}});return new Ur(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ba;class Te{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&VT(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ba||(Ba=new Te(new an(e1),null,Ur.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ba}updatePriority(e){return this.children_.isEmpty()?this:new Te(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ba:n}}getChild(e){const n=ge(e);return n===null?this:this.getImmediateChild(n).getChild(Fe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(K(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new _e(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Ba:this.priorityNode_;return new Te(s,o,i)}}updateChild(e,n){const r=ge(e);if(r===null)return n;{K(ge(e)!==".priority"||$s(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Fe(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild($t,(o,a)=>{n[o]=a.val(e),r++,i&&Te.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+FT(this.getPriority().val())+":"),this.forEachChild($t,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":uT(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new _e(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new _e(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new _e(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,_e.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,_e.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Wc?-1:0}withIndex(e){if(e===zo||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Te(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===zo||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator($t),s=n.getIterator($t);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===zo?null:this.indexMap_.get(e.toString())}}Te.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class qO extends Te{constructor(){super(new an(e1),Te.EMPTY_NODE,Ur.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Te.EMPTY_NODE}isEmpty(){return!1}}const Wc=new qO;Object.defineProperties(_e,{MIN:{value:new _e(aa,Te.EMPTY_NODE)},MAX:{value:new _e(Ui,Wc)}});jT.__EMPTY_NODE=Te.EMPTY_NODE;ft.__childrenNodeConstructor=Te;UO(Wc);zO(Wc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=!0;function Ut(t,e=null){if(t===null)return Te.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),K(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ft(n,Ut(e))}if(!(t instanceof Array)&&GO){const n=[];let r=!1;if(Wn(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Ut(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new _e(o,l)))}}),n.length===0)return Te.EMPTY_NODE;const i=Hh(n,VO,o=>o.name,e1);if(r){const o=Hh(n,$t.getCompare());return new Te(i,Ut(e),new Ur({".priority":o},{".priority":$t}))}else return new Te(i,Ut(e),Ur.Default)}else{let n=Te.EMPTY_NODE;return Wn(t,(r,s)=>{if(ts(t,r)&&r.substring(0,1)!=="."){const i=Ut(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Ut(e))}}$O(Ut);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO extends h0{constructor(e){super(),this.indexPath_=e,K(!fe(e)&&ge(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Ca(e.name,n.name):i}makePost(e,n){const r=Ut(e),s=Te.EMPTY_NODE.updateChild(this.indexPath_,r);return new _e(n,s)}maxPost(){const e=Te.EMPTY_NODE.updateChild(this.indexPath_,Wc);return new _e(Ui,e)}toString(){return LT(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO extends h0{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Ca(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return _e.MIN}maxPost(){return _e.MAX}makePost(e,n){const r=Ut(e);return new _e(n,r)}toString(){return".value"}}const YO=new QO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t){return{type:"value",snapshotNode:t}}function JO(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ZO(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Oy(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function eM(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$t}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:aa}hasEnd(){return this.endSet_}getIndexEndValue(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ui}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===$t}copy(){const e=new t1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function My(t){const e={};if(t.isDefault())return e;let n;if(t.index_===$t?n="$priority":t.index_===YO?n="$value":t.index_===zo?n="$key":(K(t.index_ instanceof KO,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ct(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Ct(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Ct(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Ct(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Ct(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function jy(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==$t&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh extends NT{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=zc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(K(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=qh.getListenId_(e,r),a={};this.listens_[o]=a;const l=My(e._queryParams);this.restRequest_(i+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(i,h,!1,r),Yo(this.listens_,o)===a){let d;c?c===401?d="permission_denied":d="rest_error:"+c:d="ok",s(d,null)}})}unlisten(e,n){const r=qh.getListenId_(e,n);delete this.listens_[r]}get(e){const n=My(e._queryParams),r=e._path.toString(),s=new ym;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ma(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Bl(a.responseText)}catch{xn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&xn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(){this.rootNode_=Te.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(){return{value:null,children:new Map}}function zT(t,e,n){if(fe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ge(e);t.children.has(r)||t.children.set(r,Gh());const s=t.children.get(r);e=Fe(e),zT(s,e,n)}}function up(t,e,n){t.value!==null?n(e,t.value):nM(t,(r,s)=>{const i=new $e(e.toString()+"/"+r);up(s,i,n)})}function nM(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Wn(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy=10*1e3,sM=30*1e3,iM=5*60*1e3;class oM{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new rM(e);const r=Fy+(sM-Fy)*Math.random();El(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Wn(e,(s,i)=>{i>0&&ts(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),El(this.reportStats_.bind(this),Math.floor(Math.random()*2*iM))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(mr||(mr={}));function BT(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function WT(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function HT(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=mr.ACK_USER_WRITE,this.source=BT()}operationForChild(e){if(fe(this.path)){if(this.affectedTree.value!=null)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new $e(e));return new Kh(Ae(),n,this.revert)}}else return K(ge(this.path)===e,"operationForChild called for unrelated child."),new Kh(Fe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=mr.OVERWRITE}operationForChild(e){return fe(this.path)?new $i(this.source,Ae(),this.snap.getImmediateChild(e)):new $i(this.source,Fe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=mr.MERGE}operationForChild(e){if(fe(this.path)){const n=this.children.subtree(new $e(e));return n.isEmpty()?null:n.value?new $i(this.source,Ae(),n.value):new hc(this.source,Ae(),n)}else return K(ge(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new hc(this.source,Fe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(fe(e))return this.isFullyInitialized()&&!this.filtered_;const n=ge(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function aM(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(eM(o.childName,o.snapshotNode))}),Wa(t,s,"child_removed",e,r,n),Wa(t,s,"child_added",e,r,n),Wa(t,s,"child_moved",i,r,n),Wa(t,s,"child_changed",e,r,n),Wa(t,s,"value",e,r,n),s}function Wa(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,l)=>cM(t,a,l)),o.forEach(a=>{const l=lM(t,a,i);s.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function lM(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function cM(t,e,n){if(e.childName==null||n.childName==null)throw pa("Should only compare child_ events.");const r=new _e(e.childName,e.snapshotNode),s=new _e(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(t,e){return{eventCache:t,serverCache:e}}function xl(t,e,n,r){return qT(new n1(e,n,r),t.serverCache)}function GT(t,e,n,r){return qT(t.eventCache,new n1(e,n,r))}function hp(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function zi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xf;const uM=()=>(xf||(xf=new an(YD)),xf);class je{constructor(e,n=uM()){this.value=e,this.children=n}static fromObject(e){let n=new je(null);return Wn(e,(r,s)=>{n=n.set(new $e(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ae(),value:this.value};if(fe(e))return null;{const r=ge(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Fe(e),n);return i!=null?{path:_t(new $e(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(fe(e))return this;{const n=ge(e),r=this.children.get(n);return r!==null?r.subtree(Fe(e)):new je(null)}}set(e,n){if(fe(e))return new je(n,this.children);{const r=ge(e),i=(this.children.get(r)||new je(null)).set(Fe(e),n),o=this.children.insert(r,i);return new je(this.value,o)}}remove(e){if(fe(e))return this.children.isEmpty()?new je(null):new je(null,this.children);{const n=ge(e),r=this.children.get(n);if(r){const s=r.remove(Fe(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new je(null):new je(this.value,i)}else return this}}get(e){if(fe(e))return this.value;{const n=ge(e),r=this.children.get(n);return r?r.get(Fe(e)):null}}setTree(e,n){if(fe(e))return n;{const r=ge(e),i=(this.children.get(r)||new je(null)).setTree(Fe(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new je(this.value,o)}}fold(e){return this.fold_(Ae(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(_t(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Ae(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(fe(e))return null;{const i=ge(e),o=this.children.get(i);return o?o.findOnPath_(Fe(e),_t(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ae(),n)}foreachOnPath_(e,n,r){if(fe(e))return this;{this.value&&r(n,this.value);const s=ge(e),i=this.children.get(s);return i?i.foreachOnPath_(Fe(e),_t(n,s),r):new je(null)}}foreach(e){this.foreach_(Ae(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(_t(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.writeTree_=e}static empty(){return new tr(new je(null))}}function Tl(t,e,n){if(fe(e))return new tr(new je(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=jn(s,e);return i=i.updateChild(o,n),new tr(t.writeTree_.set(s,i))}else{const s=new je(n),i=t.writeTree_.setTree(e,s);return new tr(i)}}}function Vy(t,e,n){let r=t;return Wn(n,(s,i)=>{r=Tl(r,_t(e,s),i)}),r}function Uy(t,e){if(fe(e))return tr.empty();{const n=t.writeTree_.setTree(e,new je(null));return new tr(n)}}function dp(t,e){return Zi(t,e)!=null}function Zi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(jn(n.path,e)):null}function $y(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild($t,(r,s)=>{e.push(new _e(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new _e(r,s.value))}),e}function Ds(t,e){if(fe(e))return t;{const n=Zi(t,e);return n!=null?new tr(new je(n)):new tr(t.writeTree_.subtree(e))}}function fp(t){return t.writeTree_.isEmpty()}function la(t,e){return KT(Ae(),t.writeTree_,e)}function KT(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(K(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=KT(_t(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(_t(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(t,e){return eC(e,t)}function hM(t,e,n,r,s){K(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Tl(t.visibleWrites,e,n)),t.lastWriteId=r}function dM(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function fM(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);K(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&pM(a,r.path)?s=!1:Jn(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return mM(t),!0;if(r.snap)t.visibleWrites=Uy(t.visibleWrites,r.path);else{const a=r.children;Wn(a,l=>{t.visibleWrites=Uy(t.visibleWrites,_t(r.path,l))})}return!0}else return!1}function pM(t,e){if(t.snap)return Jn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Jn(_t(t.path,n),e))return!0;return!1}function mM(t){t.visibleWrites=YT(t.allWrites,gM,Ae()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function gM(t){return t.visible}function YT(t,e,n){let r=tr.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)Jn(n,o)?(a=jn(n,o),r=Tl(r,a,i.snap)):Jn(o,n)&&(a=jn(o,n),r=Tl(r,Ae(),i.snap.getChild(a)));else if(i.children){if(Jn(n,o))a=jn(n,o),r=Vy(r,a,i.children);else if(Jn(o,n))if(a=jn(o,n),fe(a))r=Vy(r,Ae(),i.children);else{const l=Yo(i.children,ge(a));if(l){const c=l.getChild(Fe(a));r=Tl(r,Ae(),c)}}}else throw pa("WriteRecord should have .snap or .children")}}return r}function XT(t,e,n,r,s){if(!r&&!s){const i=Zi(t.visibleWrites,e);if(i!=null)return i;{const o=Ds(t.visibleWrites,e);if(fp(o))return n;if(n==null&&!dp(o,Ae()))return null;{const a=n||Te.EMPTY_NODE;return la(o,a)}}}else{const i=Ds(t.visibleWrites,e);if(!s&&fp(i))return n;if(!s&&n==null&&!dp(i,Ae()))return null;{const o=function(c){return(c.visible||s)&&(!r||!~r.indexOf(c.writeId))&&(Jn(c.path,e)||Jn(e,c.path))},a=YT(t.allWrites,o,e),l=n||Te.EMPTY_NODE;return la(a,l)}}}function _M(t,e,n){let r=Te.EMPTY_NODE;const s=Zi(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild($t,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Ds(t.visibleWrites,e);return n.forEachChild($t,(o,a)=>{const l=la(Ds(i,new $e(o)),a);r=r.updateImmediateChild(o,l)}),$y(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Ds(t.visibleWrites,e);return $y(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function vM(t,e,n,r,s){K(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=_t(e,n);if(dp(t.visibleWrites,i))return null;{const o=Ds(t.visibleWrites,i);return fp(o)?s.getChild(n):la(o,s.getChild(n))}}function yM(t,e,n,r){const s=_t(e,n),i=Zi(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Ds(t.visibleWrites,s);return la(o,r.getNode().getImmediateChild(n))}else return null}function wM(t,e){return Zi(t.visibleWrites,e)}function EM(t,e,n,r,s,i,o){let a;const l=Ds(t.visibleWrites,e),c=Zi(l,Ae());if(c!=null)a=c;else if(n!=null)a=la(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let p=d.getNext();for(;p&&u.length<s;)h(p,r)!==0&&u.push(p),p=d.getNext();return u}else return[]}function xM(){return{visibleWrites:tr.empty(),allWrites:[],lastWriteId:-1}}function pp(t,e,n,r){return XT(t.writeTree,t.treePath,e,n,r)}function JT(t,e){return _M(t.writeTree,t.treePath,e)}function zy(t,e,n,r){return vM(t.writeTree,t.treePath,e,n,r)}function Qh(t,e){return wM(t.writeTree,_t(t.treePath,e))}function TM(t,e,n,r,s,i){return EM(t.writeTree,t.treePath,e,n,r,s,i)}function r1(t,e,n){return yM(t.writeTree,t.treePath,e,n)}function ZT(t,e){return eC(_t(t.treePath,e),t.writeTree)}function eC(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;K(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),K(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Oy(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,ZO(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,JO(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Oy(r,e.snapshotNode,s.oldSnap));else throw pa("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const tC=new IM;class s1{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new n1(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return r1(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:zi(this.viewCache_),i=TM(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}function SM(t,e){K(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),K(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function AM(t,e,n,r,s){const i=new CM;let o,a;if(n.type===mr.OVERWRITE){const c=n;c.source.fromUser?o=mp(t,e,c.path,c.snap,r,s,i):(K(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!fe(c.path),o=Yh(t,e,c.path,c.snap,r,s,a,i))}else if(n.type===mr.MERGE){const c=n;c.source.fromUser?o=kM(t,e,c.path,c.children,r,s,i):(K(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=gp(t,e,c.path,c.children,r,s,a,i))}else if(n.type===mr.ACK_USER_WRITE){const c=n;c.revert?o=PM(t,e,c.path,r,s,i):o=NM(t,e,c.path,c.affectedTree,r,s,i)}else if(n.type===mr.LISTEN_COMPLETE)o=bM(t,e,n.path,r,i);else throw pa("Unknown operation type: "+n.type);const l=i.getChanges();return RM(e,o,l),{viewCache:o,changes:l}}function RM(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=hp(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(XO(hp(e)))}}function nC(t,e,n,r,s,i){const o=e.eventCache;if(Qh(r,n)!=null)return e;{let a,l;if(fe(n))if(K(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=zi(e),u=c instanceof Te?c:Te.EMPTY_NODE,h=JT(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const c=pp(r,zi(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,i)}else{const c=ge(n);if(c===".priority"){K($s(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=zy(r,n,u,l);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=Fe(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const d=zy(r,n,o.getNode(),l);d!=null?h=o.getNode().getImmediateChild(c).updateChild(u,d):h=o.getNode().getImmediateChild(c)}else h=r1(r,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,u,s,i):a=o.getNode()}}return xl(e,a,o.isFullyInitialized()||fe(n),t.filter.filtersNodes())}}function Yh(t,e,n,r,s,i,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(fe(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),p,null)}else{const p=ge(n);if(!l.isCompleteForPath(n)&&$s(n)>1)return e;const g=Fe(n),x=l.getNode().getImmediateChild(p).updateChild(g,r);p===".priority"?c=u.updatePriority(l.getNode(),x):c=u.updateChild(l.getNode(),p,x,g,tC,null)}const h=GT(e,c,l.isFullyInitialized()||fe(n),u.filtersNodes()),d=new s1(s,h,i);return nC(t,h,n,s,d,a)}function mp(t,e,n,r,s,i,o){const a=e.eventCache;let l,c;const u=new s1(s,e,i);if(fe(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=xl(e,c,!0,t.filter.filtersNodes());else{const h=ge(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=xl(e,c,a.isFullyInitialized(),a.isFiltered());else{const d=Fe(n),p=a.getNode().getImmediateChild(h);let g;if(fe(d))g=r;else{const _=u.getCompleteChild(h);_!=null?PT(d)===".priority"&&_.getChild(DT(d)).isEmpty()?g=_:g=_.updateChild(d,r):g=Te.EMPTY_NODE}if(p.equals(g))l=e;else{const _=t.filter.updateChild(a.getNode(),h,g,d,u,o);l=xl(e,_,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function By(t,e){return t.eventCache.isCompleteForChild(e)}function kM(t,e,n,r,s,i,o){let a=e;return r.foreach((l,c)=>{const u=_t(n,l);By(e,ge(u))&&(a=mp(t,a,u,c,s,i,o))}),r.foreach((l,c)=>{const u=_t(n,l);By(e,ge(u))||(a=mp(t,a,u,c,s,i,o))}),a}function Wy(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function gp(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;fe(n)?c=r:c=new je(null).setTree(n,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const p=e.serverCache.getNode().getImmediateChild(h),g=Wy(t,p,d);l=Yh(t,l,new $e(h),g,s,i,o,a)}}),c.children.inorderTraversal((h,d)=>{const p=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!u.hasChild(h)&&!p){const g=e.serverCache.getNode().getImmediateChild(h),_=Wy(t,g,d);l=Yh(t,l,new $e(h),_,s,i,o,a)}}),l}function NM(t,e,n,r,s,i,o){if(Qh(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(fe(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Yh(t,e,n,l.getNode().getChild(n),s,i,a,o);if(fe(n)){let c=new je(null);return l.getNode().forEachChild(zo,(u,h)=>{c=c.set(new $e(u),h)}),gp(t,e,n,c,s,i,a,o)}else return e}else{let c=new je(null);return r.foreach((u,h)=>{const d=_t(n,u);l.isCompleteForPath(d)&&(c=c.set(u,l.getNode().getChild(d)))}),gp(t,e,n,c,s,i,a,o)}}function bM(t,e,n,r,s){const i=e.serverCache,o=GT(e,i.getNode(),i.isFullyInitialized()||fe(n),i.isFiltered());return nC(t,o,n,r,tC,s)}function PM(t,e,n,r,s,i){let o;if(Qh(r,n)!=null)return e;{const a=new s1(r,e,s),l=e.eventCache.getNode();let c;if(fe(n)||ge(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=pp(r,zi(e));else{const h=e.serverCache.getNode();K(h instanceof Te,"serverChildren would be complete if leaf node"),u=JT(r,h)}u=u,c=t.filter.updateFullNode(l,u,i)}else{const u=ge(n);let h=r1(r,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=t.filter.updateChild(l,u,h,Fe(n),a,i):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,Te.EMPTY_NODE,Fe(n),a,i):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=pp(r,zi(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,i)))}return o=e.serverCache.isFullyInitialized()||Qh(r,Ae())!=null,xl(e,c,o,t.filter.filtersNodes())}}function LM(t,e){const n=zi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!fe(e)&&!n.getImmediateChild(ge(e)).isEmpty())?n.getChild(e):null}function Hy(t,e,n,r){e.type===mr.MERGE&&e.source.queryId!==null&&(K(zi(t.viewCache_),"We should always have a full cache before handling merges"),K(hp(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=AM(t.processor_,s,e,n,r);return SM(t.processor_,i.viewCache),K(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,DM(t,i.changes,i.viewCache.eventCache.getNode(),null)}function DM(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return aM(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qy;function OM(t){K(!qy,"__referenceConstructor has already been defined"),qy=t}function i1(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return K(i!=null,"SyncTree gave us an op for an invalid query."),Hy(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(Hy(o,e,n,r));return i}}function o1(t,e){let n=null;for(const r of t.views.values())n=n||LM(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gy;function MM(t){K(!Gy,"__referenceConstructor has already been defined"),Gy=t}class Ky{constructor(e){this.listenProvider_=e,this.syncPointTree_=new je(null),this.pendingWriteTree_=xM(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function jM(t,e,n,r,s){return hM(t.pendingWriteTree_,e,n,r,s),s?f0(t,new $i(BT(),e,n)):[]}function Co(t,e,n=!1){const r=dM(t.pendingWriteTree_,e);if(fM(t.pendingWriteTree_,e)){let i=new je(null);return r.snap!=null?i=i.set(Ae(),!0):Wn(r.children,o=>{i=i.set(new $e(o),!0)}),f0(t,new Kh(r.path,i,n))}else return[]}function d0(t,e,n){return f0(t,new $i(WT(),e,n))}function FM(t,e,n){const r=je.fromObject(n);return f0(t,new hc(WT(),e,r))}function VM(t,e,n,r){const s=oC(t,r);if(s!=null){const i=aC(s),o=i.path,a=i.queryId,l=jn(o,e),c=new $i(HT(a),l,n);return lC(t,o,c)}else return[]}function UM(t,e,n,r){const s=oC(t,r);if(s){const i=aC(s),o=i.path,a=i.queryId,l=jn(o,e),c=je.fromObject(n),u=new hc(HT(a),l,c);return lC(t,o,u)}else return[]}function rC(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=jn(o,e),c=o1(a,l);if(c)return c});return XT(s,e,i,n,!0)}function f0(t,e){return sC(e,t.syncPointTree_,null,QT(t.pendingWriteTree_,Ae()))}function sC(t,e,n,r){if(fe(t.path))return iC(t,e,n,r);{const s=e.get(Ae());n==null&&s!=null&&(n=o1(s,Ae()));let i=[];const o=ge(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=ZT(r,o);i=i.concat(sC(a,l,c,u))}return s&&(i=i.concat(i1(s,t,r,n))),i}}function iC(t,e,n,r){const s=e.get(Ae());n==null&&s!=null&&(n=o1(s,Ae()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=ZT(r,o),u=t.operationForChild(o);u&&(i=i.concat(iC(u,a,l,c)))}),s&&(i=i.concat(i1(s,t,r,n))),i}function oC(t,e){return t.tagToQueryMap.get(e)}function aC(t){const e=t.indexOf("$");return K(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new $e(t.substr(0,e))}}function lC(t,e,n){const r=t.syncPointTree_.get(e);K(r,"Missing sync point for query tag that we're tracking");const s=QT(t.pendingWriteTree_,e);return i1(r,n,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new a1(n)}node(){return this.node_}}class l1{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=_t(this.path_,e);return new l1(this.syncTree_,n)}node(){return rC(this.syncTree_,this.path_)}}const $M=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Qy=function(t,e,n){if(!t||typeof t!="object")return t;if(K(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return zM(t[".sv"],e,n);if(typeof t[".sv"]=="object")return BM(t[".sv"],e);K(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},zM=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:K(!1,"Unexpected server value: "+t)}},BM=function(t,e,n){t.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&K(!1,"Unexpected increment value: "+r);const s=e.node();if(K(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},WM=function(t,e,n,r){return c1(e,new l1(n,t),r)},HM=function(t,e,n){return c1(t,new a1(e),n)};function c1(t,e,n){const r=t.getPriority().val(),s=Qy(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=Qy(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new ft(a,Ut(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new ft(s))),o.forEachChild($t,(a,l)=>{const c=c1(l,e.getImmediateChild(a),n);c!==l&&(i=i.updateImmediateChild(a,c))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function h1(t,e){let n=e instanceof $e?e:new $e(e),r=t,s=ge(n);for(;s!==null;){const i=Yo(r.node.children,s)||{children:{},childCount:0};r=new u1(s,r,i),n=Fe(n),s=ge(n)}return r}function Ia(t){return t.node.value}function cC(t,e){t.node.value=e,_p(t)}function uC(t){return t.node.childCount>0}function qM(t){return Ia(t)===void 0&&!uC(t)}function p0(t,e){Wn(t.node.children,(n,r)=>{e(new u1(n,t,r))})}function hC(t,e,n,r){n&&!r&&e(t),p0(t,s=>{hC(s,e,!0,r)}),n&&r&&e(t)}function GM(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Hc(t){return new $e(t.parent===null?t.name:Hc(t.parent)+"/"+t.name)}function _p(t){t.parent!==null&&KM(t.parent,t.name,t)}function KM(t,e,n){const r=qM(n),s=ts(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,_p(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,_p(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=/[\[\].#$\/\u0000-\u001F\u007F]/,YM=/[\[\].#$\u0000-\u001F\u007F]/,Tf=10*1024*1024,dC=function(t){return typeof t=="string"&&t.length!==0&&!QM.test(t)},XM=function(t){return typeof t=="string"&&t.length!==0&&!YM.test(t)},JM=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),XM(t)},fC=function(t,e,n){const r=n instanceof $e?new bO(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ai(r));if(typeof e=="function")throw new Error(t+"contains a function "+ai(r)+" with contents = "+e.toString());if(hT(e))throw new Error(t+"contains "+e.toString()+" "+ai(r));if(typeof e=="string"&&e.length>Tf/3&&xd(e)>Tf)throw new Error(t+"contains a string greater than "+Tf+" utf8 bytes "+ai(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Wn(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!dC(o)))throw new Error(t+" contains an invalid key ("+o+") "+ai(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);PO(r,o),fC(t,a,r),LO(r)}),s&&i)throw new Error(t+' contains ".value" child '+ai(r)+" in addition to actual children.")}},ZM=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!dC(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!JM(n))throw new Error(XA(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function tj(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!OT(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function eo(t,e,n){tj(t,n),nj(t,r=>Jn(r,e)||Jn(e,r))}function nj(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(rj(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function rj(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Si&&Vt("event: "+n.toString()),Bc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj="repo_interrupt",ij=25;class oj{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ej,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Gh(),this.transactionQueueTree_=new u1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function aj(t,e,n){if(t.stats_=Xg(t.repoInfo_),t.forceRestClient_||nO())t.server_=new qh(t.repoInfo_,(r,s,i,o)=>{Yy(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Xy(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ct(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new zr(t.repoInfo_,e,(r,s,i,o)=>{Yy(t,r,s,i,o)},r=>{Xy(t,r)},r=>{cj(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=aO(t.repoInfo_,()=>new oM(t.stats_,t.server_)),t.infoData_=new tM,t.infoSyncTree_=new Ky({startListening:(r,s,i,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=d0(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),d1(t,"connected",!1),t.serverSyncTree_=new Ky({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,l)=>{const c=o(a,l);eo(t.eventQueue_,r._path,c)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function lj(t){const n=t.infoData_.getNode(new $e(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function pC(t){return $M({timestamp:lj(t)})}function Yy(t,e,n,r,s){t.dataUpdateCount++;const i=new $e(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const l=vh(n,c=>Ut(c));o=UM(t.serverSyncTree_,i,l,s)}else{const l=Ut(n);o=VM(t.serverSyncTree_,i,l,s)}else if(r){const l=vh(n,c=>Ut(c));o=FM(t.serverSyncTree_,i,l)}else{const l=Ut(n);o=d0(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=p1(t,i)),eo(t.eventQueue_,a,o)}function Xy(t,e){d1(t,"connected",e),e===!1&&hj(t)}function cj(t,e){Wn(e,(n,r)=>{d1(t,n,r)})}function d1(t,e,n){const r=new $e("/.info/"+e),s=Ut(n);t.infoData_.updateSnapshot(r,s);const i=d0(t.infoSyncTree_,r,s);eo(t.eventQueue_,r,i)}function uj(t){return t.nextWriteId_++}function hj(t){mC(t,"onDisconnectEvents");const e=pC(t),n=Gh();up(t.onDisconnect_,Ae(),(s,i)=>{const o=WM(s,i,t.serverSyncTree_,e);zT(n,s,o)});let r=[];up(n,Ae(),(s,i)=>{r=r.concat(d0(t.serverSyncTree_,s,i));const o=mj(t,s);p1(t,o)}),t.onDisconnect_=Gh(),eo(t.eventQueue_,Ae(),r)}function dj(t){t.persistentConnection_&&t.persistentConnection_.interrupt(sj)}function mC(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Vt(n,...e)}function gC(t,e,n){return rC(t.serverSyncTree_,e,n)||Te.EMPTY_NODE}function f1(t,e=t.transactionQueueTree_){if(e||m0(t,e),Ia(e)){const n=vC(t,e);K(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&fj(t,Hc(e),n)}else uC(e)&&p0(e,n=>{f1(t,n)})}function fj(t,e,n){const r=n.map(c=>c.currentWriteId),s=gC(t,e,r);let i=s;const o=s.hash();for(let c=0;c<n.length;c++){const u=n[c];K(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=jn(e,u.path);i=i.updateChild(h,u.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,c=>{mC(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(Co(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();m0(t,h1(t.transactionQueueTree_,e)),f1(t,t.transactionQueueTree_),eo(t.eventQueue_,e,u);for(let d=0;d<h.length;d++)Bc(h[d])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{xn("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}p1(t,e)}},o)}function p1(t,e){const n=_C(t,e),r=Hc(n),s=vC(t,n);return pj(t,s,r),r}function pj(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=jn(n,l.path);let u=!1,h;if(K(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,s=s.concat(Co(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=ij)u=!0,h="maxretry",s=s.concat(Co(t.serverSyncTree_,l.currentWriteId,!0));else{const d=gC(t,l.path,o);l.currentInputSnapshot=d;const p=e[a].update(d.val());if(p!==void 0){fC("transaction failed: Data returned ",p,l.path);let g=Ut(p);typeof p=="object"&&p!=null&&ts(p,".priority")||(g=g.updatePriority(d.getPriority()));const x=l.currentWriteId,m=pC(t),v=HM(g,d,m);l.currentOutputSnapshotRaw=g,l.currentOutputSnapshotResolved=v,l.currentWriteId=uj(t),o.splice(o.indexOf(x),1),s=s.concat(jM(t.serverSyncTree_,l.path,v,l.currentWriteId,l.applyLocally)),s=s.concat(Co(t.serverSyncTree_,x,!0))}else u=!0,h="nodata",s=s.concat(Co(t.serverSyncTree_,l.currentWriteId,!0))}eo(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}m0(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Bc(r[a]);f1(t,t.transactionQueueTree_)}function _C(t,e){let n,r=t.transactionQueueTree_;for(n=ge(e);n!==null&&Ia(r)===void 0;)r=h1(r,n),e=Fe(e),n=ge(e);return r}function vC(t,e){const n=[];return yC(t,e,n),n.sort((r,s)=>r.order-s.order),n}function yC(t,e,n){const r=Ia(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);p0(e,s=>{yC(t,s,n)})}function m0(t,e){const n=Ia(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,cC(e,n.length>0?n:void 0)}p0(e,r=>{m0(t,r)})}function mj(t,e){const n=Hc(_C(t,e)),r=h1(t.transactionQueueTree_,e);return GM(r,s=>{Cf(t,s)}),Cf(t,r),hC(r,s=>{Cf(t,s)}),n}function Cf(t,e){const n=Ia(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(K(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(K(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Co(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?cC(e,void 0):n.length=i+1,eo(t.eventQueue_,Hc(e),s);for(let o=0;o<r.length;o++)Bc(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gj(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function _j(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):xn(`Invalid query segment '${n}' in query '${t}'`)}return e}const Jy=function(t,e){const n=vj(t),r=n.namespace;n.domain==="firebase.com"&&Jr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Jr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||KD();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new TT(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new $e(n.pathString)}},vj=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(s=gj(t.substring(u,h)));const d=_j(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),i=r}"ns"in d&&(i=d.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return fe(this._path)?null:PT(this._path)}get ref(){return new Sa(this._repo,this._path)}get _queryIdentifier(){const e=jy(this._queryParams),n=Qg(e);return n==="{}"?"default":n}get _queryObject(){return jy(this._queryParams)}isEqual(e){if(e=Ne(e),!(e instanceof m1))return!1;const n=this._repo===e._repo,r=OT(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+NO(this._path)}}class Sa extends m1{constructor(e,n){super(e,n,new t1,!1)}get parent(){const e=DT(this._path);return e===null?null:new Sa(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}OM(Sa);MM(Sa);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj="FIREBASE_DATABASE_EMULATOR_HOST",vp={};let wj=!1;function Ej(t,e,n,r){t.repoInfo_=new TT(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function xj(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Jr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vt("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Jy(i,s),a=o.repoInfo,l,c;typeof process<"u"&&vy&&(c=vy[yj]),c?(l=!0,i=`http://${c}?ns=${a.namespace}`,o=Jy(i,s),a=o.repoInfo):l=!o.repoInfo.secure;const u=s&&l?new $o($o.OWNER):new sO(t.name,t.options,e);ZM("Invalid Firebase Database URL",o),fe(o.path)||Jr("Database URL must point to the root of a Firebase Database (not including a child path).");const h=Cj(a,t,u,new rO(t.name,n));return new Ij(h,t)}function Tj(t,e){const n=vp[e];(!n||n[t.key]!==t)&&Jr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),dj(t),delete n[t.key]}function Cj(t,e,n,r){let s=vp[e.name];s||(s={},vp[e.name]=s);let i=s[t.toURLString()];return i&&Jr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new oj(t,wj,n,r),s[t.toURLString()]=i,i}class Ij{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(aj(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Sa(this._repo,Ae())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Tj(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Jr("Cannot call "+e+" on a deleted database.")}}function Sj(t=Cd(),e){const n=yc(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=vm("database");r&&Aj(n,...r)}return n}function Aj(t,e,n,r={}){t=Ne(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Jr("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Jr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new $o($o.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:wm(r.mockUserToken,t.app.options.projectId);i=new $o(o)}Ej(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(t){BD(qs),js(new Gr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return xj(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Vn(yy,wy,t),Vn(yy,wy,"esm2017")}zr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};zr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Rj();function yp(t,e){localStorage.setItem(t,JSON.stringify(e))}function Zy(t){let e=localStorage.getItem(t);try{return JSON.parse(e)}catch{return null}}const kj={apiKey:"AIzaSyCwF75LGVuWriGfXEyHzoGBvobiOdMEwHs",authDomain:"star-education-academy.firebaseapp.com",projectId:"star-education-academy",storageBucket:"star-education-academy.appspot.com",messagingSenderId:"693801186794",appId:"1:693801186794:web:b202cdffa55530e687ee93",measurementId:"G-JN1DV2YT81",databaseURL:"https://star-education-academy-default-rtdb.asia-southeast1.firebasedatabase.app"},g0=B5(kj),ne=kL(g0),Nj=new Dr,Ce=YN(g0),yi=VD(g0);Sj(g0);const ca=(t,e,n)=>{I.useEffect(()=>{try{if(n){const r=Nt(Ce,t),s=Ir(r,i=>{const o=i.docs.map(a=>({...a.data(),[t==="users"?"uid":"id"]:a.id}));o.length!==0&&e(o)});return()=>{s()}}}catch(r){console.log(r.message)}},[n])},bj=(t,e,n)=>{I.useEffect(()=>{var r;try{if(n){const s=we(Ce,t,(r=ne==null?void 0:ne.currentUser)==null?void 0:r.uid),i=Ir(s,o=>{const a={uid:o.id,...o.data()};return a!=null&&a.name&&e(a),()=>i()})}}catch(s){console.log(s.message)}},[n])};function Rr(t,e){let n;return t.forEach(r=>{r.uid===e&&(n=r)}),n}async function g1(t,e,n,r=null){try{const s=Nt(Ce,"notifications"),i={uid:ne.currentUser.uid,type:t,[e]:n,isReadBy:[],timestamp:_n(),comment:r};await xa(s,i)}catch(s){console.log(s.message)}}const Pj=({data:t})=>{const{nextPage:e,prevPage:n,isEnded:r,startIndex:s}=t,{startTimer:i,formattedTime:o,stopTest:a,currentTest:l,answeredQuestions:c}=I.useContext(Z),u=kn(),h=async()=>{try{const p=Nt(we(Ce,"users",ne.currentUser.uid),"history"),g=TA(c,l,o),_=await xa(p,g),x=(await hx(_)).id;u(`/app/history/${x}`)}catch(p){console.log(p.message)}},d=()=>{i(),h(),a(),g1(["took","test"],"testName",l.name)};return f.jsxs("div",{className:"flex justify-center gap-x-5",children:[s!==0&&f.jsx(xe,{data:{clickFn:n,text:"Previous",image:"back"}}),r?f.jsx(xe,{data:{clickFn:d,text:"Finish",image:"finish"}}):f.jsx(xe,{data:{clickFn:e,text:"Next",image:"next"}})]})},ir=()=>{const[t,e]=I.useState(!0),[n,r]=I.useState(0),{theme:s}=I.useContext(Z);if(I.useEffect(()=>{const i=setInterval(()=>{r(Math.min(n+1,100)),n===100&&(e(!1),r(0))},5);return()=>{clearInterval(i)}},[n]),t&&(document.title="Loading..."),t)return f.jsx("div",{className:`transition-all fixed z-30  top-0 right-0 left-0 bottom-0 flex  items-center justify-center ${s==="light"?"bg-white":"bg-slate-600 text-white"}`,children:f.jsxs("div",{className:"flex flex-col items-center justify-center gap-y-4",children:[f.jsx("img",{className:"w-20 rounded-lg",src:"/images/sea-logo.jpg"}),f.jsx("div",{className:"h-3 w-[200px] rounded-md overflow-hidden",children:f.jsx("div",{style:{width:`${n}%`},className:"h-full bg-blue-300"})}),f.jsxs("p",{className:"text-lg",children:[n,"%"]})]})})},Lj=()=>{const{answeredQuestions:t,setAnsweredQuestions:e,currentTest:n,seaLocalStorage:r,seconds:s,hours:i,minutes:o}=I.useContext(Z),a=t.length,l=n.quizzes.length,[c,u]=I.useState((r==null?void 0:r.startIndex)||0),[h,d]=I.useState(!1),[p,g]=I.useState(!1),[_,x]=I.useState(!1),m=10;let v=n.quizzes.slice(c,c+m);const y=n.name,C=Math.ceil(l/m),N=Math.ceil((c+m)/m),E=Math.round(a/l*100);I.useEffect(()=>(wn(),wn()),[]),I.useEffect(()=>{yp("sea-localStorage",{answeredQuestions:t,currentTest:n,startIndex:c,timer:{seconds:s,minutes:o,hours:i}})},[t,n,c,s]),I.useEffect(()=>{a===l&&c+m>=l?d(!0):d(!1)},[c,t]),I.useEffect(()=>{a>=c+m?g(!0):g(!1)},[t,c]);const A={pageTitle:y,currentPage:N,totalPage:C,percentage:E,answerLength:a,questionsLength:l,currentQuestions:v,isEnded:h,chooseAnswer:(P,b)=>{const D=_S(P,t);e(D?t.map(L=>P===L.id?{id:P,userAnswer:b}:L):[...t,{id:P,userAnswer:b}])},nextPage:()=>{p?(u(c+m),a<=c+m&&wn()):vS(x)},prevPage:()=>{u(Math.max(c-m,0))},startIndex:c};return f.jsxs("div",{className:"p-3 grid gap-y-3",children:[f.jsx(ir,{}),f.jsx(yS,{data:A}),f.jsx(wS,{data:A}),_&&f.jsx(xS,{}),f.jsx(Pj,{data:A})]})},_0=({title:t,text:e})=>{const{isLogin:n,theme:r}=I.useContext(Z),s=kn();return f.jsxs("div",{className:"grid p-5 gap-y-2",children:[e&&f.jsx("div",{className:` ${r==="light"?"":"text-white"}`,children:e}),f.jsx("div",{children:f.jsx(xe,{data:{clickFn:()=>s(n?"/app/posts":"/login"),image:"redo",text:n?"Return Home":"Login"}})})]})},Dj=()=>{const{theme:t,userData:e}=I.useContext(Z),[n,r]=I.useState(null),s=`${n==null?void 0:n.testName} - Results`,i=Math.round((n==null?void 0:n.score)/(n==null?void 0:n.totalScore)*100),o=kn(),{resultId:a}=gm(),l=()=>{try{const u=Nt(we(Ce,"users",e.uid),"history"),h=we(u,a);return Ir(h,p=>{const g={id:p.id,...p.data()};r(g)})}catch(u){return console.log(u.message),()=>{}}};I.useEffect(()=>{const u=l();return()=>{u()}},[a]),I.useEffect(()=>(wn(),wn()),[]);const c=async()=>{try{await navigator.share({title:"Check out my score!",text:`I scored ${n.score} out of ${n.totalScore} in '${n.testName}'.
Website URL - https://wwww.seaacademy.onrender.com
        `})}catch{console.log("Error")}};return f.jsxs("div",{className:"p-5 ",children:[f.jsx(ir,{}),n?f.jsxs("div",{className:"",children:[f.jsxs("div",{className:"flex items-center gap-x-1 h-10 font-medium mb-4",children:[f.jsx(Re,{data:{image:"back",clickFn:()=>o("/app/history")}}),f.jsx("div",{className:`text-lg pl-2 place-items-center bg-blue-40 ${t==="light"?"text-gray-500":"text-white"}`,children:s})]}),f.jsxs("div",{className:"flex items-center gap-x-1 mb-2",children:[f.jsx("div",{children:f.jsx("div",{className:"grid items-center justify-center bg-blue-300/50 h-40 w-40 rounded-full",children:f.jsx("div",{className:"grid items-center justify-center bg-blue-400/50 h-32 w-32 rounded-full",children:f.jsx("div",{className:"grid items-center justify-center bg-blue-500/50 h-28 w-28 rounded-full",children:f.jsx("div",{className:`grid  h-20 w-20 items-center justify-center rounded-full ${t==="light"?"bg-slate-50":"bg-slate-600"}`,children:f.jsxs("div",{className:`flex flex-col items-center justify-center font-medium ${t==="light"?"text-blue-500":"text-white"}`,children:[f.jsx("div",{className:"text-sm font-bold",children:"Your Score"}),f.jsxs("div",{className:" text-lg ",children:[n.score," / ",n.totalScore]})]})})})})})}),f.jsx("div",{className:`grid items-center justify-center font-bold
             text-lg ${t==="light"?"text-blue-700":"text-white"}`,children:f.jsx("div",{children:n.level})})]}),f.jsxs("div",{className:"mt-1 mb-2 h-2 border flex ",children:[f.jsx("div",{className:`h-full ${t==="light"?"bg-lime-400":"bg-slate-500"}`,style:{width:`${i}%`}}),f.jsx("div",{className:"h-full bg-gray-200",style:{width:`${100-i}%`}})]}),f.jsxs("div",{className:`grid grid-cols-2 gap-y-2 border p-2 rounded-lg ${t==="light"?"bg-white border-gray-200":"border-slate-500/70 text-white"}`,children:[f.jsx(ri,{text:"Score Percentage",value:`${i}%`,color:"text-lime-500"}),f.jsx(ri,{text:"Total Questions",value:n.totalScore,color:"text-lime-500"}),f.jsx(ri,{text:"Correct",value:n.score,color:"text-green-500"}),f.jsx(ri,{text:"Wrong",value:n.totalScore-n.score,color:"text-red-500"}),f.jsx(ri,{text:"Date",value:n.date,color:"text-lime-500"}),f.jsx(ri,{text:"Time",value:n.time,color:"text-lime-500"}),f.jsx(ri,{text:"Time taken",value:v5(n.timeTaken)||"Unknown",color:"text-lime-500"})]}),f.jsxs("div",{className:`grid grid-cols-3 justify-center gap-y-2 mt-5 ${t==="light"?"":"text-white"}`,children:[f.jsxs("div",{className:"flex flex-col items-center justify-center",children:[f.jsx(Re,{data:{clickFn:()=>o(`/app/history/${a}/reviews`),image:"review"}}),f.jsx("div",{className:"text-sm",children:"Review Answers"})]}),f.jsxs("div",{className:"flex flex-col items-center justify-center",children:[f.jsx(Re,{data:{clickFn:c,image:"share"}}),f.jsx("div",{className:"text-sm",children:"Share Score"})]}),f.jsxs("div",{className:"flex flex-col items-center justify-center",children:[f.jsx(Re,{data:{clickFn:()=>o("/app/posts"),image:"home"}}),f.jsx("div",{className:"text-sm",children:"Home"})]})]})]}):f.jsx(_0,{text:"Unavailable"})]})},ri=({text:t,value:e,color:n})=>f.jsxs("div",{children:[f.jsxs("div",{className:`font-medium ${n}`,children:[" ",e]}),f.jsx("div",{className:"text-sm",children:t})]}),wC=({image:t,clickFn:e,active:n})=>{const{theme:r}=I.useContext(Z);return f.jsx("button",{className:`transition-all rounded-full p-2  ${r==="light"?`hover:bg-slate-200/70 ${n?"bg-slate-200/70":""}`:`hover:bg-slate-600/70 ${n?"bg-slate-500/70":""}`} mr-2`,onClick:e,children:f.jsx("img",{className:"w-8",src:he(t)})})};function kr(t,e=15){const n=t.slice(0,e);return e>=t.length?n:`${n}...`}const ns=({image:t,name:e,size:n="size-10",fontSize:r="text-lg"})=>{const s=t&&t.trim(),i=e&&e.trim(),o=s&&i,a=()=>{const l=e.trim().split(" ");return l.length<=3?l[0][0].toUpperCase():`${l[0][0]}${l[1][0]}`.toUpperCase()};if(s||o)return f.jsx("img",{className:`${n} rounded-full object-cover`,src:t});if(i)return f.jsx("div",{className:`flex font-roboto justify-center ${r} items-center  rounded-full font-bold text-white bg-blue-400 ${n}`,children:a()});if(!o)return f.jsx("div",{className:`flex font-roboto justify-center ${r} items-center  rounded-full font-bold text-white bg-blue-400 ${n}`,children:"U"})},Oj=({data:t})=>{const{setIsMenuOpen:e}=t,[n,r]=I.useState(!1),[s,i]=I.useState(!1),o=I.useRef(null),a=kn(),{setIsLogIn:l,theme:c,userData:u,refreshUserData:h,inspecting:d,isOnline:p}=I.useContext(Z),g=async()=>{try{await _P(ne),e(!1),l(!1)}catch(_){console.log(_.message)}};return qi(o,r),f.jsxs("div",{ref:o,className:"p-2 ",children:[f.jsx("div",{className:"relative top-0 right-0 left-0 bottom-0",children:s&&f.jsx(Pi,{data:{yesButton:g,noButton:()=>{i(!1)},text:"Are you sure to log out ?",setValue:i}})}),f.jsx("button",{onClick:()=>r(!n),className:`transition-all p-1 rounded-md cursor-pointer w-full min-h-14 ${c==="light"?`${n?"bg-slate-200/70":"hover:bg-slate-200/70"}`:`${n?"bg-slate-500/70":"hover:bg-slate-500/70"}`}`,children:f.jsxs("div",{className:"flex gap-x-2 items-center mb-2",children:[f.jsx("div",{className:"relative w-10",children:f.jsx(ns,{image:u==null?void 0:u.image,name:u==null?void 0:u.name})}),f.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[f.jsx("div",{className:"font-medium",children:u!=null&&u.name?u.name:"User"}),d&&f.jsx(Re,{data:{clickFn:h,image:"exit"}})]})]})}),n&&f.jsxs("div",{className:`fixed bottom-[70px] left-1 border w-4/6 sm:w-3/5 md:w-4/6  p-2 rounded-md ${c==="light"?"border-gray-200 bg-white ":"bg-slate-500 text-white border-slate-500 "}`,children:[f.jsx("div",{children:f.jsxs("button",{onClick:()=>{a("/app/settings"),e(!1),r(!1)},className:`flex w-full p-1 rounded-md gap-x-2 items-center  ${c==="light"?"hover:bg-gray-200/70":"hover:bg-slate-600 text-white"}`,children:[f.jsx("img",{className:"w-6",src:he("admin")}),f.jsx("div",{children:"Settings"})]})}),f.jsxs("button",{onClick:()=>{i(!0)},className:`flex w-full p-1 rounded-md gap-x-2 items-center ${c==="light"?"hover:bg-gray-200/70":"hover:bg-slate-600 text-white"}`,children:[f.jsx("img",{className:"w-6",src:he("logout")}),f.jsx("div",{children:"Log out"})]})]})]})},Mj=({data:t})=>{const{isMenuOpen:e,setIsMenuOpen:n,homeActive:r,historyActive:s,helpActive:i,notificationActive:o,chatroomActive:a,adminActive:l}=t,c=I.useRef(null),{theme:u,userData:h}=I.useContext(Z),d=[{text:"Home",image:"home",path:"/app/posts",active:r,clickFn:()=>n(!1)},{text:"History",image:"history",path:"/app/history",active:s,clickFn:()=>n(!1)},{text:"Help",image:"help",path:"/app/help",active:i,clickFn:()=>n(!1)},{text:"Notifications",image:"notification",path:"/app/notifications",color:"bg-red-600",active:o,clickFn:()=>n(!1)},{text:"Chat Room",image:"chat",path:"/app/chatroom",color:"bg-red-600",active:a,clickFn:()=>n(!1)},{text:"Admin",image:"admin",path:"/app/admin",active:l,clickFn:()=>n(!1)}],p=["Admin","Notifications"],g=d.filter(_=>h.isAdmin?!0:!p.includes(_.text));return qi(c,n),f.jsx("div",{className:"z-30 transition-all duration-300 fixed right-0 left-0  top-0 bottom-0 bg-black/40",children:f.jsxs("div",{ref:c,className:`flex flex-col backdrop-blur-sm  justify-between transition-all duration-300 h-full bg-slate-50 w-5/6 sm:w-3/5 md:w-3/6 lg:w-2/6 shadow-lg shadow-black ${u==="light"?"bg-white/60 ":" bg-slate-500/60 text-white"}`,children:[f.jsxs("div",{children:[f.jsx("div",{className:"flex p-3 items-center",children:f.jsxs("div",{className:"font-medium text-md flex-1 flex items-center",children:[f.jsx(wC,{clickFn:()=>n(!1),image:e?"close":"menu",active:e}),f.jsx("div",{className:`font-bold  ${u==="light"?"text-blue-500":" text-slate-700"}`,children:"STAR EDUCATION ACADEMY"})]})}),f.jsx("div",{className:"mr-2",children:g.map(_=>f.jsx(jj,{data:{active:_.active,image:_.image,path:_.path,text:_.text,items:_==null?void 0:_.items,clickFn:_.clickFn,color:_.color}},_.text))})]}),f.jsx(Oj,{data:{setIsMenuOpen:n}})]})})},jj=({data:t})=>{const{active:e,image:n,text:r,items:s,path:i,clickFn:o,color:a}=t,l=kn(),{theme:c,currentTest:u}=I.useContext(Z),h=()=>{o&&o()};return f.jsxs("button",{onClick:()=>{l(i),h()},className:`p-2 pl-2 transition-all font-medium rounded-tr-3xl rounded-br-3xl flex relative items-center gap-x-1 w-full  hover:shadow-md 
      ${c==="light"?` ${e?"bg-blue-500/70":"hover:bg-slate-200/70"}`:` ${e?"bg-blue-500/70":"hover:bg-slate-500/70"}`}
      `,children:[f.jsx("img",{className:`h-9 w-9 p-1 transition-all
        `,src:he(n)}),f.jsx("div",{children:r}),s>=0&&f.jsx("div",{className:` flex items-center rounded-full justify-center w-6 h-6 text-sm  top-0 -left-1 font-bold text-white ${a||"bg-black"}`,children:s}),u&&r==="Home"&&f.jsxs("div",{className:"text-sm",children:["(Taking ",kr(u.name,45),")"]})]})},EC=({theme:t,setTheme:e})=>{const n=()=>{e(t==="light"?"dark":"light")};return f.jsxs("div",{className:`flex items-center gap-x-2 ${t==="light"?"":"text-white"} `,children:[f.jsx("div",{children:"Theme"}),f.jsx(Re,{data:{clickFn:n,image:t==="light"?"light":"dark"}})]})},Fj=()=>{const{headerTitle:t,theme:e,setTheme:n,isLogin:r,setHeaderTitle:s}=I.useContext(Z),[i,o]=I.useState(!1),a=fa(),l=["/app/admin","/app/admin/posts","/app/admin/users","/app/admin/helps","/app/admin/tests"],c=["/app/posts","/app/tests"],u=a.pathname.includes("/app/history"),h=l.includes(a.pathname),d=c.includes(a.pathname),p=a.pathname==="/app/help",g=a.pathname==="/app/settings",_=a.pathname==="/login",x=a.pathname==="/app/notifications",m=a.pathname==="/app/chatroom";if(u)s("History");else if(p)s("Help");else if(h)switch(a.pathname){case"/app/admin":s("Admin");break;case"/app/admin/posts":s("Admin - Posts");break;case"/app/admin/users":s("Admin - Users");break;case"/app/admin/tests":s("Admin - Tests");break;case"/app/admin/help":s("Admin - Help");break}else g?s("Settings"):(_||d)&&s("STAR EDUCATION ACADEMY");return I.useEffect(()=>{Cn(i?"hidden":"auto")},[i]),f.jsxs("header",{className:`p-2 w-full shadow-sm flex justify-between items-center sticky top-0 right-0 left-0 z-20 ${e==="light"?"bg-slate-50 ":"bg-slate-500"}`,children:[f.jsxs("div",{className:"flex items-center",children:[r&&f.jsxs(f.Fragment,{children:[f.jsx(wC,{clickFn:()=>o(!0),image:"menu",active:i}),i&&f.jsx(Mj,{data:{homeActive:d,historyActive:u,helpActive:p,notificationActive:x,chatroomActive:m,adminActive:h,isMenuOpen:i,setIsMenuOpen:o}})]}),f.jsx("div",{className:"font-medium text-md flex-1 flex items-center gap-x-2",children:f.jsx("div",{className:`font-bold ${e==="light"?"text-blue-500":"text-slate-700"}`,children:t})})]}),f.jsxs("div",{className:"flex gap-x-2 items-center",children:[f.jsx("div",{className:"hidden md:block",children:f.jsx(EC,{setTheme:n,theme:e})}),f.jsx("img",{className:"size-12 rounded-full",src:"images/sea-logo.jpg"})]})]})},Io=()=>f.jsx("div",{className:"h-0.5 border border-dashed border-gray-200 mb-2 mt-2"}),Vj=()=>{var _;const{theme:t,userData:e}=I.useContext(Z),n=0,r=10,[s,i]=I.useState(r),[o,a]=I.useState(!1),[l,c]=I.useState({}),u=(_=l==null?void 0:l.results)==null?void 0:_.slice(n,s),h=`${l==null?void 0:l.testName} - Review your answers`,{resultId:d}=gm(),p=()=>{try{const x=Nt(we(Ce,"users",e.uid),"history"),m=we(x,d);return Ir(m,y=>{const C={id:y.id,...y.data()};c(C)})}catch(x){console.log(x.message)}};I.useEffect(()=>{const x=p();return()=>{x()}},[d]),I.useEffect(()=>(wn(),wn()),[]);const g=()=>{i(s+r)};return I.useEffect(()=>{var x;s>=((x=l==null?void 0:l.results)==null?void 0:x.length)&&a(!0)},[s]),document.title=h,f.jsxs("div",{className:"p-5",children:[f.jsx(ir,{}),l?f.jsxs("div",{className:"grid gap-y-5",children:[f.jsx("div",{className:`font-medium text-lg ${t==="light"?"":"text-white"}`,children:h}),u==null?void 0:u.map(x=>{const{id:m,question:v,isTrue:y,answer:C,userAnswer:N}=x;return y?f.jsxs("div",{className:"grid font-padauk gap-y-2",children:[f.jsxs("div",{className:"flex gap-x-3 items-center",children:[f.jsx("div",{className:"bg-green-500 h-9 w-9 text-white font-bold rounded-sm flex justify-center items-center ",children:m}),f.jsx("div",{className:`flex-1 ${t==="light"?"":"text-white"}`,children:v})]}),f.jsx("div",{children:f.jsxs("div",{className:"grid gap-y-1",children:[f.jsx("div",{className:"text-green-500 font-bold",children:"Correct (your answer)"}),f.jsxs("div",{className:"min-h-12  flex gap-x-3 p-2 border text-green-500 border-green-500 rounded-lg items-center shadow-md shadow-lime-200",children:[f.jsx("img",{className:"w-5 h-5",src:he("trueIcon")}),f.jsx("div",{children:C})]})]})}),f.jsx(Io,{})]},`result-${m}`):f.jsxs("div",{className:"grid font-padauk gap-y-2",children:[f.jsxs("div",{className:"flex gap-x-3 items-center",children:[f.jsx("div",{className:"bg-red-500 h-9 w-9 text-white font-bold rounded-sm flex justify-center items-center ",children:m}),f.jsx("div",{className:`flex-1 ${t==="light"?"":"text-white"}`,children:v})]}),f.jsxs("div",{className:"grid gap-y-1",children:[f.jsxs("div",{className:"grid gap-y-1",children:[f.jsx("div",{className:"text-red-500 font-bold",children:"Incorrect (your answer)"}),f.jsxs("div",{className:"min-h-12 flex gap-x-3 p-2 border text-red-500 border-red-500 rounded-lg items-center shadow-md shadow-red-200",children:[f.jsx("img",{className:"w-5 h-5",src:he("falseIcon")}),f.jsx("div",{children:N})]})]}),f.jsxs("div",{className:"grid gap-y-1",children:[f.jsx("div",{className:"text-green-500 font-bold",children:"Correct"}),f.jsxs("div",{className:" min-h-12  flex gap-x-3 p-2 border text-green-500 shadow-md shadow-lime-200 border-green-500 rounded-lg items-center",children:[f.jsx("img",{className:"w-5 h-5",src:he("trueIcon")}),f.jsx("div",{children:C})]})]})]}),f.jsx(Io,{})]},`result-${m}`)}),o?"":f.jsx("div",{className:"flex justify-center",children:f.jsx(xe,{data:{image:"down",text:"See More",clickFn:g}})}),f.jsx("div",{children:f.jsx(k5,{to:`/app/history/${d}`,children:f.jsx(xe,{data:{image:"back",text:"Back to results"}})})})]}):f.jsx(_0,{text:"Unavailable"})]})},Uj=()=>{const{deleteFromHistory:t,theme:e,history:n,setHistory:r,userData:s}=I.useContext(Z),i=kn(),[o,a]=I.useState(null),[l,c]=I.useState(!1),[u,h]=I.useState(!1),[d,p]=I.useState(!1),[g,_]=I.useState([]),x=()=>{try{const E=Nt(we(Ce,"users",s.uid),"history");return Ir(E,T=>{const w=T.docs.map(A=>({id:A.id,...A.data()}));w.length!==0&&r(w)})}catch(E){return console.log(E.message),()=>{}}};I.useEffect(()=>{wn();const E=x();return()=>{wn(),E()}},[]);const m=E=>{d||i(`/app/history/${E.id}`)},v=()=>{t(o),a(null),c(!1)},y=()=>{c(!1),a(null)},C=(E,k)=>{E.target.checked?_([...g,k]):_(g.filter(T=>T!==k))},N=()=>{const E=n.filter(k=>!g.includes(k.id));r(E),_([]),h(!1),p(!1)};return f.jsxs("div",{className:"p-5",children:[f.jsx(ir,{}),u&&f.jsx(Pi,{data:{text:`Are you sure to delete ${g.length} ${g.length<=1?"item":"items"} ?`,yesButton:N,noButton:()=>h(!1),setValue:h}}),l&&f.jsx(Pi,{data:{text:"Are you sure to delete ?",yesButton:v,noButton:y,setValue:c}}),n.length!==0?f.jsxs("div",{className:"grid gap-y-2  ",children:[f.jsxs("div",{className:"flex items-center gap-x-2 justify-between",children:[f.jsx(xe,{data:{clickFn:()=>{p(!d),_([])},text:d?"Done":"Select"}}),d&&f.jsxs("div",{className:"flex items-center gap-x-2",children:[f.jsxs("div",{className:"font-medium rounded-lg",children:[g.length," ",g.length<=1?"item":"items"," selected"]}),f.jsx(Re,{data:{clickFn:()=>{g.length&&h(!0)},image:"trash"}})]})]}),n.map((E,k)=>f.jsxs("div",{className:`min-h-20 border rounded-md gap-x-3 ${e==="light"?"border-slate-200 shadow-gray-200":"border-slate-500/70 text-white shadow-slate-500"}`,children:[f.jsx("div",{className:`font-medium border-b p-2 rounded-tl-md rounded-tr-md ${e==="light"?"bg-slate-100 border-b-slate-200":"bg-slate-500/70 border-b-slate-400"}`,children:E.testName}),f.jsxs("div",{className:"p-2 flex items-center gap-x-2",children:[d&&f.jsx("input",{checked:g.includes(E.id),onChange:T=>C(T,E.id),className:"form-checkbox rounded-lg border-2 w-6 h-6 border-gray-200 checked:bg-transparent ",type:"checkbox"}),f.jsx("div",{onClick:()=>m(E),className:"flex flex-1 items-center gap-x-3 cursor-pointer",children:f.jsxs("div",{className:"flex-1 sm:flex items-center gap-x-3 ",children:[f.jsxs("div",{className:"",children:["Score: ",E.score," / ",E.results.length," "]}),f.jsxs("div",{className:"",children:["Message: ",kr(E.level,15)]}),f.jsxs("div",{className:" ",children:["Date: ",E.date," (",` ${E.time}`,")"]}),f.jsxs("div",{className:"",children:["Time taken: ",v5(E.timeTaken)||"Unknown"]})]})}),!1]})]},`shadow-md history-item-${E.id}`)),f.jsx(k5,{to:"/posts",children:f.jsx(xe,{data:{image:"redo",text:"Return Home"}})})]}):f.jsx(_0,{text:"No items"})]})},$j=()=>{const[t,e]=I.useState(0),n=()=>{const r=window.innerHeight,s=document.documentElement.scrollHeight,i=window.scrollY,o=s-r,a=i/o*100;e(a)};return I.useEffect(()=>(window.addEventListener("scroll",n),()=>{window.removeEventListener("scroll",n)}),[]),f.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-20",children:f.jsx("div",{style:{width:`${t}%`},className:"h-1 bg-blue-600"})})},zj=()=>{const{users:t,theme:e}=I.useContext(Z),n=kn(),r=[{name:"Posts",image:"home",path:"/app/admin/posts"},{name:"Tests",image:"exam",path:"/app/admin/tests"},{name:"Users",image:"user",path:"/app/admin/users"}];return f.jsxs("div",{className:"p-5 grid gap-y-2",children:[f.jsx(ir,{}),r.map(s=>f.jsxs("button",{onClick:()=>{n(s.path)},className:`transition-all flex items-center gap-x-2 border  p-2 rounded-lg hover:shadow-md  hover:font-bold min-h-[70px] ${e==="light"?"border-gray-200 hover:bg-slate-100 hover:shadow-gray-500 ":"border-slate-500/70 hover:bg-slate-500/70 text-white"}`,children:[f.jsx("img",{className:"w-7 ",src:he(s.image)}),f.jsx("div",{children:s.name})]},s.name))]})},Bj=["January","February","March","April","May","June","July","August","September","October","November","December"];function to(t){const n=new Date().getTime()-t,r=Math.floor(n/1e3),s=Math.floor(r/60),i=Math.floor(s/60),o=Math.floor(i/24),a=Math.floor(o/7),l=Math.floor(o/30),c=Math.floor(l/12),u=new Date(t),h=u.getFullYear(),d=u.getMonth(),p=u.getDate(),g=`${Bj[d]} ${p}, ${h}`;if(c>0)return g;if(l>0)return`${l}m  ${g}`;if(a>0)return`${a}w  ${g}`;if(o>0)return`${o}d`;if(i>0)return`${i}h`;if(s>0)return`${s}min`;if(r>0)return`${r}s`}const v0=({options:t,left:e="-left-[102px]"})=>{const[n,r]=I.useState(!1),s=I.useRef(null),{theme:i}=I.useContext(Z);qi(s,r);const o=()=>{r(!n)};return f.jsxs("button",{className:`relative rounded-full p-1 ${i==="light"?"bg-slate-100":"bg-slate-500/70"}`,onClick:o,ref:s,children:[f.jsx("img",{className:"w-6",src:he("moreOption")}),n&&f.jsx("div",{className:`border p-1 rounded-md  grid absolute ${e} bottom-0 w-[100px] ${i==="light"?"border-gray-200 bg-white":"border-gray-500/70 bg-slate-500"}`,children:t.map(a=>{if(a)return f.jsxs("button",{onClick:a.onClick,className:`flex rounded-md items-center gap-x-1 b  p-2 ${i==="light"?"hover:bg-slate-100":"hover:bg-slate-600"}`,children:[f.jsx("img",{className:"w-6",src:he(a.icon)}),f.jsx("p",{children:a.text})]},a.text)})})]})},Wj=["January","February","March","April","May","June","July","August","September","October","November","December"],Hj=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Bi(t){const n=new Date().getTime()-t,r=Math.floor(n/1e3),s=Math.floor(r/60),i=Math.floor(s/60),o=Math.floor(i/24),a=Math.floor(o/7),l=Math.floor(o/30),c=Math.floor(l/12),u=new Date(t),h=u.getFullYear(),d=u.getMonth(),p=u.getDate(),g=Hj[u.getDay()],_=Wj[d],x=`${_} ${p}, ${h}`,m=u.toLocaleTimeString([],{hour:"numeric",minute:"numeric",hour12:!0});if(c>0)return`${m}  ${x}`;if(l>0)return`${m}  ${_} ${p}`;if(a>0)return`${g}, ${m}  ${_} ${p}`;if(o>0)return`${g}, ${m}`;if(i>0)return m;if(s>0)return m;if(r>0)return m}function Zr(t,e,n="timestamp",r="older"){var o,a;const s=new Date((o=t[n])!=null&&o.seconds?t[n].seconds*1e3:t[n]),i=new Date((a=e[n])!=null&&a.seconds?e[n].seconds*1e3:e[n]);return r==="older"?s-i:i-s}function Sn(t){return t!=null&&t.seconds?t.seconds*1e3:t}const xC=({post:t,collectionName:e})=>{const{id:n}=t,[r,s]=I.useState([]),[i,o]=I.useState([]),{users:a,theme:l}=I.useContext(Z),[c,u]=I.useState(!1),[h,d]=I.useState(!1),p=e==="posts",g=Nt(we(Ce,e,n),"comments"),_=Nt(we(Ce,e,n),"likes"),x=()=>Ir(_,k=>{const T=k.docs.map(w=>({id:w.id,...w.data()})).sort((w,A)=>Zr(w,A,"timestamp","newer"));s(T)}),m=()=>Ir(g,k=>{const T=k.docs.map(w=>({id:w.id,...w.data()})).sort((w,A)=>Zr(w,A,"timestamp"));o(T)});I.useEffect(()=>{const E=x(),k=m();return()=>{E(),k()}},[]);const v=()=>{let E=!1;return r.forEach(k=>{var T;k.uid===((T=ne==null?void 0:ne.currentUser)==null?void 0:T.uid)&&(E=!0)}),E},y=async()=>{try{const E=we(_,ne.currentUser.uid),k=v(),T={uid:ne.currentUser.uid,timestamp:_n()};k?await Mc(E):(await dx(E,T),g1(["like",p?"post":"test"],p?"description":"testName",p?t.description:t.name))}catch(E){console.log(E.message)}},C=v(),N=()=>{var k;return Rr(a,(k=r[0])==null?void 0:k.uid)||null};return f.jsxs("div",{className:"mt-2",children:[f.jsxs("div",{className:"transition-all mb-1 flex justify-between",children:[f.jsx("button",{onClick:()=>{u(!c),d(!1)},className:`transition-all ${l==="light"?`${c?"bg-slate-200":"hover:bg-slate-200"}`:`${c?"bg-slate-500/70":"hover:bg-slate-500/70"}`}  p-1 rounded-lg`,children:N()?f.jsx("span",{children:r.length===1?N().name:`${N().name} and ${r.length-1} others`}):f.jsxs("span",{children:[r.length," ",r.length>1?"likes":"like"]})}),f.jsxs("button",{onClick:()=>{d(!h),u(!1)},className:`transition-all ${l==="light"?`${h?"bg-slate-200":"hover:bg-slate-200"}`:`${h?"bg-slate-500/70":"hover:bg-slate-500/70"}`}  p-1 rounded-lg`,children:[i.length," ",i.length>1?"comments":"comment"]})]}),f.jsxs("div",{className:`border-t pt-2 flex gap-x-2 ${l==="light"?"border-t-slate-300":"border-t-slate-500/70"}`,children:[f.jsx(xe,{data:{clickFn:y,image:C?"liked":"like",text:C?"Liked":"Like"}}),f.jsx(xe,{data:{clickFn:()=>{d(!h),u(!1)},image:"comment",text:"Comment"}})]}),c&&f.jsx(qj,{likes:r,users:a}),h&&f.jsx(Gj,{isPost:p,post:t,id:n,comments:i,collectionName:e})]})},qj=({likes:t})=>{const{users:e}=I.useContext(Z);return f.jsx("div",{className:"mt-2 grid gap-y-2",children:t.map(n=>{const r=Rr(e,n.uid);return f.jsxs("div",{className:"flex gap-x-2 items-center",children:[f.jsx(ns,{image:r==null?void 0:r.image,name:r==null?void 0:r.name}),f.jsx("div",{children:r==null?void 0:r.name})]},`user-${r==null?void 0:r.uid}`)})})},Gj=({post:t,isPost:e,comments:n,id:r,collectionName:s})=>{const[i,o]=I.useState(""),{users:a,theme:l,userData:c}=I.useContext(Z),u=Nt(we(Ce,s,r),"comments"),[h,d]=I.useState(null),p=async()=>{if(i.trim()){const x={uid:ne.currentUser.uid,text:i.trim(),timestamp:_n()};await xa(u,x),o(""),g1(["comment",e?"post":"test"],e?"description":"testName",e?t.description:t.name,i.trim())}},g=async()=>{const x=we(u,h);if(i.trim()){const m={text:i.trim(),editedTime:_n()};await En(x,m),o(""),d(null)}},_=async x=>{const m=we(u,x);try{await Mc(m)}catch(v){console.log(v.message)}};return f.jsxs("div",{className:"mt-2",children:[f.jsx("div",{className:"grid gap-y-2",children:n.map(x=>{var C;const m=Rr(a,x.uid);console.log(m);const v=x.uid===((C=ne==null?void 0:ne.currentUser)==null?void 0:C.uid),y=v&&{text:"Edit",icon:"editPencil",onClick:()=>{d(x.id),o(x.text)}};return f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{className:"flex gap-x-1",children:[f.jsx("div",{children:f.jsx(ns,{image:m==null?void 0:m.image,name:m==null?void 0:m.name})}),f.jsxs("div",{className:"max-w-[250px]",children:[f.jsxs("div",{className:`p-2  rounded-lg ${l==="light"?"bg-slate-100":"bg-slate-500/70 text-white"}`,children:[f.jsx("div",{className:"font-bold",children:m==null?void 0:m.name}),f.jsx("div",{children:x.text})]}),f.jsx("div",{className:`text-sm mt-1 ${l==="light"?"text-gray-600":"text-white"}`,children:x!=null&&x.editedTime?f.jsxs("span",{children:["edited ",Bi(Sn(x.editedTime))]}):f.jsx("span",{children:Bi(Sn(x.timestamp))})})]})]}),v||c!=null&&c.isAdmin?f.jsx(v0,{options:[y,{text:"Delete",icon:"deleteIcon",onClick:()=>_(x.id)}]}):""]},`${x.uid}-${x.id}`)})}),f.jsxs("div",{className:"mt-2 flex gap-x-1",children:[f.jsx("input",{autoFocus:!0,onChange:x=>o(x.target.value),value:i,className:`h-10 flex-1 rounded-lg pl-2 border ${l==="light"?"border-gray-300 focus:outline-blue-500":"outline-none bg-slate-500/70 border-slate-500/70"}`,placeholder:"Write a comment..."}),f.jsxs("div",{className:"flex gap-x-1",children:[h&&f.jsx(xe,{data:{image:"falseIcon",clickFn:()=>{d(null),o("")}}}),f.jsx(xe,{data:{clickFn:()=>{i.trim()&&(h?g():p())},image:"send"}})]})]})]})},Kj=({t,takeTest:e})=>{const{users:n,theme:r}=I.useContext(Z),s=Rr(n,t.uid);return f.jsxs("div",{className:`flex flex-col justify-between min-h-60 border shadow-md  rounded-md bg-gradient-to-tr ${r==="light"?"border-blue-200 shadow-gray-200":"border-blue-200 text-white shadow-slate-500"}`,children:[f.jsxs("div",{className:"flex gap-x-2 mb-2 p-2",children:[f.jsx("img",{className:"size-10 rounded-full shadow-md object-cover",src:s.image}),f.jsxs("div",{children:[f.jsx("div",{className:"font-medium",children:s.name}),f.jsx("div",{className:` text-sm ${r==="light"?"text-gray-500 ":"text-white"}`,children:to(Sn(t.time))})]}),f.jsxs("span",{className:`rounded-md flex items-center p-1 ${r==="light"?"bg-slate-100 ":"bg-slate-500/70 "}`,children:[t.quizzes.length,t.quizzes.length>1?" questions":" question"]})]}),t.image&&f.jsx("div",{className:"m-2 min-h-32",children:f.jsx("img",{className:"w-full",src:`images/tests/${t.image}`})}),f.jsxs("div",{className:`rounded-bl-lg rounded-br-lg border-t  p-2 pb-5 ${r==="light"?"border-t-slate-300":"border-t-slate-500/70"}`,children:[f.jsx("div",{className:"font-medium text-lg",children:t.name}),f.jsx("p",{className:" mb-2 break-words white-space-pre-wrap",children:t.description.trim()||"No description"}),f.jsx(xe,{data:{clickFn:()=>e(t),text:"Take the test"}}),f.jsx(xC,{post:t,collectionName:"tests"})]})]})},ew=({text:t})=>{const{theme:e}=I.useContext(Z);return f.jsx("div",{className:"h-[300px] flex flex-col justify-center items-center",children:f.jsx("p",{className:`text-center ${e==="light"?"":"text-white"}`,children:t})})},Qj=()=>{const{setCurrentTest:t,startTimer:e,users:n,theme:r,isLogin:s,posts:i,setPosts:o,tests:a,setTests:l}=I.useContext(Z),{page:c}=gm(),u=fa(),h=kn(),d=u.pathname==="/app/posts",p=u.pathname==="/app/tests";I.useState(!0),I.useState(!0);const g=[{name:"Posts",active:d,image:"home",path:"/app/posts"},{name:"Tests",active:p,image:"exam",path:"/app/tests"}];ca("posts",o,s),ca("tests",l,s);const _=m=>{scrollTo({top:0}),t(m),e()},x=()=>{switch(c){case"posts":return f.jsx("div",{className:"grid gap-y-2 mb-2",children:i.length===0?f.jsx(ew,{text:"No posts"}):i.sort((m,v)=>Zr(m,v,"time","newer")).map(m=>{var y,C;const v=Rr(n,m.uid);if(!m.draft)return f.jsxs("div",{className:`w-full border rounded-md shadow-md p-2 ${r==="light"?"border-blue-200 shadow-gray-200":"border-blue-200 text-white shadow-slate-500"}`,children:[f.jsxs("div",{className:"top-section flex gap-x-2 mb-2",children:[f.jsx("img",{className:"size-10 rounded-full shadow-md object-cover",src:v.image}),f.jsxs("div",{children:[f.jsx("div",{className:"font-medium",children:v.name}),f.jsx("div",{className:` text-sm ${r==="light"?"text-gray-500":"text-white"}`,children:to(Sn(m.time))})]})]}),(m==null?void 0:m.description)&&f.jsx("p",{className:"mb-2 break-words whitespace-pre-wrap",children:m.description}),m.images.length!==0&&f.jsx("div",{className:"image grid gap-y-2",children:f.jsx(Yj,{data:{post:m}})}),m.files&&((y=m==null?void 0:m.files)==null?void 0:y.length)!==0&&f.jsx(Xj,{files:m.files}),(m==null?void 0:m.links)&&((C=m==null?void 0:m.links)==null?void 0:C.length)!==0&&f.jsx(Jj,{links:m.links}),f.jsx(xC,{post:m,collectionName:"posts"})]},`post-${m.id}`)})});case"tests":return f.jsx("div",{className:"grid gap-y-2 mb-2",children:a.length===0?f.jsx(ew,{text:"No tests"}):a.sort((m,v)=>Zr(m,v,"timestamp","newer")).map(m=>{if(m.isUploaded)return f.jsx(Kj,{t:m,takeTest:_},`tests-${m.id}-${m.name}`)})})}};return f.jsxs("div",{children:[f.jsx(ir,{}),f.jsxs("div",{className:"grid p-5",children:[f.jsx("div",{className:"flex mb-2 -mt-5 justify-center",children:f.jsx("div",{className:`flex -mt-[2px] gap-x-1 w-2/3 justify-center rounded-bl-lg rounded-br-lg shadow-sm p-2 ${r==="light"?"bg-slate-50/50":"bg-slate-500/70"}`,children:g.map(m=>f.jsxs("button",{onClick:()=>h(m.path),className:`transition text-slate-700 shadow-sm rounded-lg border-solid flex font-bold gap-x-1 items-center p-2 pl-3 pr-3 ${r==="light"?`${m.active?" bg-blue-500/70":"hover:bg-slate-200 border-transparent"}`:`${m.active?" bg-blue-500/70":"hover:bg-slate-500 border-transparent"}`} font-bold text-md`,children:[f.jsx("img",{className:"w-6",src:he(m.image)}),f.jsx("div",{children:m.name})]},m.name))})}),x()]})]})},Yj=({data:t})=>{const{post:e}=t,n=0,[r,s]=I.useState(4),[i,o]=I.useState(!0),a=e.images.slice(n,r),l=e.images.length-4,c=()=>{o(!1),s(e.images.length)};return a.map((u,h)=>f.jsxs("div",{className:"relative ",children:[f.jsx("img",{className:"w-full shadow-md min-h-48",src:u.imageURL,alt:u.name}),f.jsx("div",{className:"z-20 absolute right-1 top-1"}),h+1===4&&i&&l?f.jsx("div",{onClick:c,className:"z-10 absolute top-0 right-0 left-0 bottom-0 flex cursor-pointer items-center justify-center",children:f.jsxs("div",{className:"font-medium text-8xl text-white",children:["+",l]})}):""]},`post-${e.id}-image-${u.imageURL}`))},Xj=({files:t})=>{const{theme:e}=I.useContext(Z);return f.jsx("div",{className:"grid gap-y-2 mt-2",children:t.map((n,r)=>f.jsx("a",{href:n.fileURL,download:n.name,target:"_blank",children:f.jsxs("div",{className:`p-1 cursor-pointer  min-h-14 rounded-md flex gap-x-1 items-center font-bold border  border-l-4 border-l-green-500 ${e==="light"?"bg-slate-50 border-gray-300 text-blue-600":"bg-slate-500/70 border-slate-500/70 text-white"}`,children:[f.jsx("img",{className:"w-7 ",src:he("download")}),f.jsxs("div",{children:[f.jsx("p",{className:"underline",children:n.name}),(n==null?void 0:n.size)&&f.jsxs("p",{children:[(n.size/(1024*1024)).toFixed(2)," MB"]})]})]})},`${r}-${n.fileURL}`))})},Jj=({links:t})=>{const{theme:e}=I.useContext(Z);return f.jsx("div",{className:"grid gap-y-2 mt-2",children:t.map((n,r)=>f.jsx("a",{href:n.link,target:"_blank",children:f.jsxs("div",{className:`p-1 cursor-pointer  min-h-14 rounded-md flex ga-x-1 items-center font-bold border  border-l-4 border-l-green-500 ${e==="light"?"bg-slate-50 border-gray-300 text-blue-600":"bg-slate-500/70 border-slate-500/70 text-white"}`,children:[f.jsx("img",{className:"w-7 ",src:he("link")}),f.jsx("div",{children:f.jsx("p",{className:"underline",children:n.title})})]})},`${r}-${n.link}`))})},Zj=()=>{const e=new Date().getFullYear(),{theme:n}=I.useContext(Z);return f.jsxs("footer",{className:`w-full flex flex-col items-center p-1 bg-slate-50 border-t  mt-auto ${n==="light"?"border-t-gray-100":"bg-slate-600 text-white border-t-slate-500"}`,children:[f.jsxs("div",{children:["SEA copyright 2015 - ",e]}),f.jsx("div",{children:"All rights reserved."}),f.jsx("div",{children:"Author: Than Aung Naing"})]})},Xh=({message:t,bgColor:e="bg-slate-200"})=>f.jsx("div",{className:"z-30 fixed flex justify-center bottom-5 left-0 right-0 ",children:f.jsx("div",{className:`${e} font-bold p-3 rounded-lg`,children:t})}),eF=({data:t})=>{const{isLogin:e,refreshUserData:n,setHeaderTitle:r,theme:s}=I.useContext(Z),[i,o]=I.useState(""),[a,l]=I.useState(""),[c,u]=I.useState(""),[h,d]=I.useState(null),[p,g]=I.useState("login"),_=kn();let x;document.title="Login",I.useEffect(()=>{e&&_("/"),r("STAR EDUCATION ACADEMY")},[]),Cn("auto");const m=async(E,k,T,w)=>{try{const A=we(Ce,"users",ne.currentUser.uid),P=await hx(A),b={name:E,email:k,password:T,image:w,isAdmin:!1,createdAt:_n()};P.exists()||await dx(A,b),n()}catch(A){console.log(A.message)}},v=async()=>{try{await FP(ne,Nj),m(ne.currentUser.displayName,ne.currentUser.email,"",ne.currentUser.photoURL)}catch(E){clearTimeout(x),d(E.message),x=setTimeout(()=>{d(null)},3e3)}},y=async()=>{try{await fP(ne,a,c)}catch(E){clearTimeout(x),d(E.message),x=setTimeout(()=>{d(null)},3e3)}},C=async()=>{try{await dP(ne,a,c),m(i,a,c,null)}catch(E){clearTimeout(x),d(E.message),x=setTimeout(()=>{d(null)},3e3)}},N=()=>{switch(p){case"login":return f.jsxs("div",{children:[f.jsx("div",{className:`text-md rounded-md font-medium  p-1 pl-2 border-b  ${s==="light"?"text-lime-700 bg-lime-100/70 border-b-lime-300":"text-white bg-slate-500/70 border-slate-500/70"}`,children:"You must log in first."}),f.jsxs("div",{className:"mt-10 flex flex-col items-center ",children:[f.jsx("div",{className:"text-lg font-medium text-blue-500",children:"Log in"}),f.jsxs("div",{className:"grid p-2 w-5/6 sm:w-3/5 lg:w-4/6 gap-y-2",children:[f.jsx(Ha,{data:{type:"text",value:a,setValue:l,placeholder:"Enter your email"}}),f.jsx(Ha,{data:{type:"password",value:c,setValue:u,placeholder:"Enter your password"}}),h&&f.jsx(Xh,{message:h,bgColor:"bg-red-300"}),f.jsx("button",{onClick:y,className:"transition-all bg-blue-400 text-white font-medium h-10 rounded-lg border border-transparent hover:border-lime-500",children:"Log in"})]}),f.jsx(tw,{}),f.jsx("div",{children:f.jsx(xe,{data:{clickFn:v,image:"google",text:"Sign in with Google"}})}),f.jsx(tw,{}),f.jsx("div",{children:f.jsx(xe,{data:{clickFn:()=>g("signup"),text:"Create new Account"}})})]})]});case"signup":return f.jsxs("div",{children:[f.jsx("div",{className:`text-md rounded-md font-medium  p-1 pl-2 border-b  ${s==="light"?"text-lime-700 bg-lime-100/70 border-b-lime-300":" bg-slate-500/70 border-slate-500/70 text-white"}`,children:"You must log in first."}),f.jsxs("div",{className:"mt-10 flex flex-col items-center ",children:[f.jsx("div",{className:"text-lg font-medium text-blue-500",children:"Create new account"}),f.jsxs("div",{className:"grid p-2 w-5/6 sm:w-3/5 lg:w-4/6 gap-y-2",children:[f.jsx(Ha,{data:{type:"text",value:i,setValue:o,placeholder:"Enter your name"}}),f.jsx(Ha,{data:{type:"text",value:a,setValue:l,placeholder:"Enter your email"}}),f.jsx(Ha,{data:{type:"password",value:c,setValue:u,placeholder:"Enter your password"}}),h&&f.jsx(Xh,{message:h,bgColor:"bg-red-300"}),f.jsx("button",{onClick:()=>{i.trim()&&C()},className:"transition-all bg-blue-400 text-white font-medium h-10 rounded-lg border border-transparent hover:border-lime-500",children:"Sign up"}),f.jsx("div",{children:f.jsx(xe,{data:{clickFn:()=>g("login"),text:"Back",image:"back"}})})]})]})]})}};return f.jsxs("div",{className:"Login mb-5",children:[f.jsx(ir,{}),N()]})},Ha=({data:t})=>{const{value:e,setValue:n,placeholder:r,type:s}=t,{theme:i}=I.useContext(Z);return f.jsx("input",{type:s,value:e,onChange:o=>n(o.target.value),className:`h-10  pl-1 border rounded-lg   ${i==="light"?"border-gray-200 focus:outline-blue-500":"bg-slate-500/70 outline-none border-slate-500/70 text-white"}`,placeholder:r})},tw=()=>{const{theme:t}=I.useContext(Z);return f.jsx("div",{className:`mt-2 mb-2 ${t==="light"?"":"text-white"}`,children:"OR"})};function tF(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function TC(t,e){return new Promise(function(n,r){let s;return nF(t).then(function(i){try{return s=i,n(new Blob([e.slice(0,2),s,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const nF=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:s}})=>{const i=new DataView(s);let o=0;if(i.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const a=i.getUint16(o);if(a===65498)break;const l=i.getUint16(o+2);if(a===65505&&i.getUint32(o+4)===1165519206){const c=o+10;let u;switch(i.getUint16(c)){case 18761:u=!0;break;case 19789:u=!1;break;default:return n("TIFF header contains invalid endian")}if(i.getUint16(c+2,u)!==42)return n("TIFF header contains invalid version");const h=i.getUint32(c+4,u),d=c+h+2+12*i.getUint16(c+h,u);for(let p=c+h+2;p<d;p+=12)if(i.getUint16(p,u)==274){if(i.getUint16(p+2,u)!==3)return n("Orientation data type is invalid");if(i.getUint32(p+4,u)!==1)return n("Orientation data count is invalid");i.setUint16(p+8,1,u);break}return e(s.slice(o,o+2+l))}o+=2+l}return e(new Blob)}),r.readAsArrayBuffer(t)});var Jh={},rF={get exports(){return Jh},set exports(t){Jh=t}};(function(t){var e,n,r={};rF.exports=r,r.parse=function(s,i){for(var o=r.bin.readUshort,a=r.bin.readUint,l=0,c={},u=new Uint8Array(s),h=u.length-4;a(u,h)!=101010256;)h--;l=h,l+=4;var d=o(u,l+=4);o(u,l+=2);var p=a(u,l+=2),g=a(u,l+=4);l+=4,l=g;for(var _=0;_<d;_++){a(u,l),l+=4,l+=4,l+=4,a(u,l+=4),p=a(u,l+=4);var x=a(u,l+=4),m=o(u,l+=4),v=o(u,l+2),y=o(u,l+4);l+=6;var C=a(u,l+=8);l+=4,l+=m+v+y,r._readLocal(u,C,c,p,x,i)}return c},r._readLocal=function(s,i,o,a,l,c){var u=r.bin.readUshort,h=r.bin.readUint;h(s,i),u(s,i+=4),u(s,i+=2);var d=u(s,i+=2);h(s,i+=2),h(s,i+=4),i+=4;var p=u(s,i+=8),g=u(s,i+=2);i+=2;var _=r.bin.readUTF8(s,i,p);if(i+=p,i+=g,c)o[_]={size:l,csize:a};else{var x=new Uint8Array(s.buffer,i);if(d==0)o[_]=new Uint8Array(x.buffer.slice(i,i+a));else{if(d!=8)throw"unknown compression method: "+d;var m=new Uint8Array(l);r.inflateRaw(x,m),o[_]=m}}},r.inflateRaw=function(s,i){return r.F.inflate(s,i)},r.inflate=function(s,i){return s[0],s[1],r.inflateRaw(new Uint8Array(s.buffer,s.byteOffset+2,s.length-6),i)},r.deflate=function(s,i){i==null&&(i={level:6});var o=0,a=new Uint8Array(50+Math.floor(1.1*s.length));a[o]=120,a[o+1]=156,o+=2,o=r.F.deflateRaw(s,a,o,i.level);var l=r.adler(s,0,s.length);return a[o+0]=l>>>24&255,a[o+1]=l>>>16&255,a[o+2]=l>>>8&255,a[o+3]=l>>>0&255,new Uint8Array(a.buffer,0,o+4)},r.deflateRaw=function(s,i){i==null&&(i={level:6});var o=new Uint8Array(50+Math.floor(1.1*s.length)),a=r.F.deflateRaw(s,o,a,i.level);return new Uint8Array(o.buffer,0,a)},r.encode=function(s,i){i==null&&(i=!1);var o=0,a=r.bin.writeUint,l=r.bin.writeUshort,c={};for(var u in s){var h=!r._noNeed(u)&&!i,d=s[u],p=r.crc.crc(d,0,d.length);c[u]={cpr:h,usize:d.length,crc:p,file:h?r.deflateRaw(d):d}}for(var u in c)o+=c[u].file.length+30+46+2*r.bin.sizeUTF8(u);o+=22;var g=new Uint8Array(o),_=0,x=[];for(var u in c){var m=c[u];x.push(_),_=r._writeHeader(g,_,u,m,0)}var v=0,y=_;for(var u in c)m=c[u],x.push(_),_=r._writeHeader(g,_,u,m,1,x[v++]);var C=_-y;return a(g,_,101010256),_+=4,l(g,_+=4,v),l(g,_+=2,v),a(g,_+=2,C),a(g,_+=4,y),_+=4,_+=2,g.buffer},r._noNeed=function(s){var i=s.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(i)!=-1},r._writeHeader=function(s,i,o,a,l,c){var u=r.bin.writeUint,h=r.bin.writeUshort,d=a.file;return u(s,i,l==0?67324752:33639248),i+=4,l==1&&(i+=2),h(s,i,20),h(s,i+=2,0),h(s,i+=2,a.cpr?8:0),u(s,i+=2,0),u(s,i+=4,a.crc),u(s,i+=4,d.length),u(s,i+=4,a.usize),h(s,i+=4,r.bin.sizeUTF8(o)),h(s,i+=2,0),i+=2,l==1&&(i+=2,i+=2,u(s,i+=6,c),i+=4),i+=r.bin.writeUTF8(s,i,o),l==0&&(s.set(d,i),i+=d.length),i},r.crc={table:function(){for(var s=new Uint32Array(256),i=0;i<256;i++){for(var o=i,a=0;a<8;a++)1&o?o=3988292384^o>>>1:o>>>=1;s[i]=o}return s}(),update:function(s,i,o,a){for(var l=0;l<a;l++)s=r.crc.table[255&(s^i[o+l])]^s>>>8;return s},crc:function(s,i,o){return 4294967295^r.crc.update(4294967295,s,i,o)}},r.adler=function(s,i,o){for(var a=1,l=0,c=i,u=i+o;c<u;){for(var h=Math.min(c+5552,u);c<h;)l+=a+=s[c++];a%=65521,l%=65521}return l<<16|a},r.bin={readUshort:function(s,i){return s[i]|s[i+1]<<8},writeUshort:function(s,i,o){s[i]=255&o,s[i+1]=o>>8&255},readUint:function(s,i){return 16777216*s[i+3]+(s[i+2]<<16|s[i+1]<<8|s[i])},writeUint:function(s,i,o){s[i]=255&o,s[i+1]=o>>8&255,s[i+2]=o>>16&255,s[i+3]=o>>24&255},readASCII:function(s,i,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(s[i+l]);return a},writeASCII:function(s,i,o){for(var a=0;a<o.length;a++)s[i+a]=o.charCodeAt(a)},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,i,o){for(var a,l="",c=0;c<o;c++)l+="%"+r.bin.pad(s[i+c].toString(16));try{a=decodeURIComponent(l)}catch{return r.bin.readASCII(s,i,o)}return a},writeUTF8:function(s,i,o){for(var a=o.length,l=0,c=0;c<a;c++){var u=o.charCodeAt(c);if(!(4294967168&u))s[i+l]=u,l++;else if(!(4294965248&u))s[i+l]=192|u>>6,s[i+l+1]=128|u>>0&63,l+=2;else if(!(4294901760&u))s[i+l]=224|u>>12,s[i+l+1]=128|u>>6&63,s[i+l+2]=128|u>>0&63,l+=3;else{if(4292870144&u)throw"e";s[i+l]=240|u>>18,s[i+l+1]=128|u>>12&63,s[i+l+2]=128|u>>6&63,s[i+l+3]=128|u>>0&63,l+=4}}return l},sizeUTF8:function(s){for(var i=s.length,o=0,a=0;a<i;a++){var l=s.charCodeAt(a);if(!(4294967168&l))o++;else if(!(4294965248&l))o+=2;else if(!(4294901760&l))o+=3;else{if(4292870144&l)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(s,i,o,a){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],c=r.F.U,u=r.F._goodIndex;r.F._hash;var h=r.F._putsE,d=0,p=o<<3,g=0,_=s.length;if(a==0){for(;d<_;)h(i,p,d+(P=Math.min(65535,_-d))==_?1:0),p=r.F._copyExact(s,d,P,i,p+8),d+=P;return p>>>3}var x=c.lits,m=c.strt,v=c.prev,y=0,C=0,N=0,E=0,k=0,T=0;for(_>2&&(m[T=r.F._hash(s,0)]=0),d=0;d<_;d++){if(k=T,d+1<_-2){T=r.F._hash(s,d+1);var w=d+1&32767;v[w]=m[T],m[T]=w}if(g<=d){(y>14e3||C>26697)&&_-d>100&&(g<d&&(x[y]=d-g,y+=2,g=d),p=r.F._writeBlock(d==_-1||g==_?1:0,x,y,E,s,N,d-N,i,p),y=C=E=0,N=d);var A=0;d<_-2&&(A=r.F._bestMatch(s,d,v,k,Math.min(l[2],_-d),l[3]));var P=A>>>16,b=65535&A;if(A!=0){b=65535&A;var D=u(P=A>>>16,c.of0);c.lhst[257+D]++;var L=u(b,c.df0);c.dhst[L]++,E+=c.exb[D]+c.dxb[L],x[y]=P<<23|d-g,x[y+1]=b<<16|D<<8|L,y+=2,g=d+P}else c.lhst[s[d]]++;C++}}for(N==d&&s.length!=0||(g<d&&(x[y]=d-g,y+=2,g=d),p=r.F._writeBlock(1,x,y,E,s,N,d-N,i,p),y=0,C=0,y=C=E=0,N=d);7&p;)p++;return p>>>3},r.F._bestMatch=function(s,i,o,a,l,c){var u=32767&i,h=o[u],d=u-h+32768&32767;if(h==u||a!=r.F._hash(s,i-d))return 0;for(var p=0,g=0,_=Math.min(32767,i);d<=_&&--c!=0&&h!=u;){if(p==0||s[i+p]==s[i+p-d]){var x=r.F._howLong(s,i,d);if(x>p){if(g=d,(p=x)>=l)break;d+2<x&&(x=d+2);for(var m=0,v=0;v<x-2;v++){var y=i-d+v+32768&32767,C=y-o[y]+32768&32767;C>m&&(m=C,h=y)}}}d+=(u=h)-(h=o[u])+32768&32767}return p<<16|g},r.F._howLong=function(s,i,o){if(s[i]!=s[i-o]||s[i+1]!=s[i+1-o]||s[i+2]!=s[i+2-o])return 0;var a=i,l=Math.min(s.length,i+258);for(i+=3;i<l&&s[i]==s[i-o];)i++;return i-a},r.F._hash=function(s,i){return(s[i]<<8|s[i+1])+(s[i+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(s,i,o,a,l,c,u,h,d){var p,g,_,x,m,v,y,C,N,E=r.F.U,k=r.F._putsF,T=r.F._putsE;E.lhst[256]++,g=(p=r.F.getTrees())[0],_=p[1],x=p[2],m=p[3],v=p[4],y=p[5],C=p[6],N=p[7];var w=32+(d+3&7?8-(d+3&7):0)+(u<<3),A=a+r.F.contSize(E.fltree,E.lhst)+r.F.contSize(E.fdtree,E.dhst),P=a+r.F.contSize(E.ltree,E.lhst)+r.F.contSize(E.dtree,E.dhst);P+=14+3*y+r.F.contSize(E.itree,E.ihst)+(2*E.ihst[16]+3*E.ihst[17]+7*E.ihst[18]);for(var b=0;b<286;b++)E.lhst[b]=0;for(b=0;b<30;b++)E.dhst[b]=0;for(b=0;b<19;b++)E.ihst[b]=0;var D=w<A&&w<P?0:A<P?1:2;if(k(h,d,s),k(h,d+1,D),d+=3,D==0){for(;7&d;)d++;d=r.F._copyExact(l,c,u,h,d)}else{var L,F;if(D==1&&(L=E.fltree,F=E.fdtree),D==2){r.F.makeCodes(E.ltree,g),r.F.revCodes(E.ltree,g),r.F.makeCodes(E.dtree,_),r.F.revCodes(E.dtree,_),r.F.makeCodes(E.itree,x),r.F.revCodes(E.itree,x),L=E.ltree,F=E.dtree,T(h,d,m-257),T(h,d+=5,v-1),T(h,d+=5,y-4),d+=4;for(var R=0;R<y;R++)T(h,d+3*R,E.itree[1+(E.ordr[R]<<1)]);d+=3*y,d=r.F._codeTiny(C,E.itree,h,d),d=r.F._codeTiny(N,E.itree,h,d)}for(var S=c,M=0;M<o;M+=2){for(var O=i[M],j=O>>>23,H=S+(8388607&O);S<H;)d=r.F._writeLit(l[S++],L,h,d);if(j!=0){var $=i[M+1],Y=$>>16,B=$>>8&255,V=255&$;T(h,d=r.F._writeLit(257+B,L,h,d),j-E.of0[B]),d+=E.exb[B],k(h,d=r.F._writeLit(V,F,h,d),Y-E.df0[V]),d+=E.dxb[V],S+=j}}d=r.F._writeLit(256,L,h,d)}return d},r.F._copyExact=function(s,i,o,a,l){var c=l>>>3;return a[c]=o,a[c+1]=o>>>8,a[c+2]=255-a[c],a[c+3]=255-a[c+1],c+=4,a.set(new Uint8Array(s.buffer,i,o),c),l+(o+4<<3)},r.F.getTrees=function(){for(var s=r.F.U,i=r.F._hufTree(s.lhst,s.ltree,15),o=r.F._hufTree(s.dhst,s.dtree,15),a=[],l=r.F._lenCodes(s.ltree,a),c=[],u=r.F._lenCodes(s.dtree,c),h=0;h<a.length;h+=2)s.ihst[a[h]]++;for(h=0;h<c.length;h+=2)s.ihst[c[h]]++;for(var d=r.F._hufTree(s.ihst,s.itree,7),p=19;p>4&&s.itree[1+(s.ordr[p-1]<<1)]==0;)p--;return[i,o,d,l,u,p,a,c]},r.F.getSecond=function(s){for(var i=[],o=0;o<s.length;o+=2)i.push(s[o+1]);return i},r.F.nonZero=function(s){for(var i="",o=0;o<s.length;o+=2)s[o+1]!=0&&(i+=(o>>1)+",");return i},r.F.contSize=function(s,i){for(var o=0,a=0;a<i.length;a++)o+=i[a]*s[1+(a<<1)];return o},r.F._codeTiny=function(s,i,o,a){for(var l=0;l<s.length;l+=2){var c=s[l],u=s[l+1];a=r.F._writeLit(c,i,o,a);var h=c==16?2:c==17?3:7;c>15&&(r.F._putsE(o,a,u,h),a+=h)}return a},r.F._lenCodes=function(s,i){for(var o=s.length;o!=2&&s[o-1]==0;)o-=2;for(var a=0;a<o;a+=2){var l=s[a+1],c=a+3<o?s[a+3]:-1,u=a+5<o?s[a+5]:-1,h=a==0?-1:s[a-1];if(l==0&&c==l&&u==l){for(var d=a+5;d+2<o&&s[d+2]==l;)d+=2;(p=Math.min(d+1-a>>>1,138))<11?i.push(17,p-3):i.push(18,p-11),a+=2*p-2}else if(l==h&&c==l&&u==l){for(d=a+5;d+2<o&&s[d+2]==l;)d+=2;var p=Math.min(d+1-a>>>1,6);i.push(16,p-3),a+=2*p-2}else i.push(l,0)}return o>>>1},r.F._hufTree=function(s,i,o){var a=[],l=s.length,c=i.length,u=0;for(u=0;u<c;u+=2)i[u]=0,i[u+1]=0;for(u=0;u<l;u++)s[u]!=0&&a.push({lit:u,f:s[u]});var h=a.length,d=a.slice(0);if(h==0)return 0;if(h==1){var p=a[0].lit;return d=p==0?1:0,i[1+(p<<1)]=1,i[1+(d<<1)]=1,1}a.sort(function(C,N){return C.f-N.f});var g=a[0],_=a[1],x=0,m=1,v=2;for(a[0]={lit:-1,f:g.f+_.f,l:g,r:_,d:0};m!=h-1;)g=x!=m&&(v==h||a[x].f<a[v].f)?a[x++]:a[v++],_=x!=m&&(v==h||a[x].f<a[v].f)?a[x++]:a[v++],a[m++]={lit:-1,f:g.f+_.f,l:g,r:_};var y=r.F.setDepth(a[m-1],0);for(y>o&&(r.F.restrictDepth(d,o,y),y=o),u=0;u<h;u++)i[1+(d[u].lit<<1)]=d[u].d;return y},r.F.setDepth=function(s,i){return s.lit!=-1?(s.d=i,i):Math.max(r.F.setDepth(s.l,i+1),r.F.setDepth(s.r,i+1))},r.F.restrictDepth=function(s,i,o){var a=0,l=1<<o-i,c=0;for(s.sort(function(h,d){return d.d==h.d?h.f-d.f:d.d-h.d}),a=0;a<s.length&&s[a].d>i;a++){var u=s[a].d;s[a].d=i,c+=l-(1<<o-u)}for(c>>>=o-i;c>0;)(u=s[a].d)<i?(s[a].d++,c-=1<<i-u-1):a++;for(;a>=0;a--)s[a].d==i&&c<0&&(s[a].d--,c++);c!=0&&console.log("debt left")},r.F._goodIndex=function(s,i){var o=0;return i[16|o]<=s&&(o|=16),i[8|o]<=s&&(o|=8),i[4|o]<=s&&(o|=4),i[2|o]<=s&&(o|=2),i[1|o]<=s&&(o|=1),o},r.F._writeLit=function(s,i,o,a){return r.F._putsF(o,a,i[s<<1]),a+i[1+(s<<1)]},r.F.inflate=function(s,i){var o=Uint8Array;if(s[0]==3&&s[1]==0)return i||new o(0);var a=r.F,l=a._bitsF,c=a._bitsE,u=a._decodeTiny,h=a.makeCodes,d=a.codes2map,p=a._get17,g=a.U,_=i==null;_&&(i=new o(s.length>>>2<<3));for(var x,m,v=0,y=0,C=0,N=0,E=0,k=0,T=0,w=0,A=0;v==0;)if(v=l(s,A,1),y=l(s,A+1,2),A+=3,y!=0){if(_&&(i=r.F._check(i,w+(1<<17))),y==1&&(x=g.flmap,m=g.fdmap,k=511,T=31),y==2){C=c(s,A,5)+257,N=c(s,A+5,5)+1,E=c(s,A+10,4)+4,A+=14;for(var P=0;P<38;P+=2)g.itree[P]=0,g.itree[P+1]=0;var b=1;for(P=0;P<E;P++){var D=c(s,A+3*P,3);g.itree[1+(g.ordr[P]<<1)]=D,D>b&&(b=D)}A+=3*E,h(g.itree,b),d(g.itree,b,g.imap),x=g.lmap,m=g.dmap,A=u(g.imap,(1<<b)-1,C+N,s,A,g.ttree);var L=a._copyOut(g.ttree,0,C,g.ltree);k=(1<<L)-1;var F=a._copyOut(g.ttree,C,N,g.dtree);T=(1<<F)-1,h(g.ltree,L),d(g.ltree,L,x),h(g.dtree,F),d(g.dtree,F,m)}for(;;){var R=x[p(s,A)&k];A+=15&R;var S=R>>>4;if(!(S>>>8))i[w++]=S;else{if(S==256)break;var M=w+S-254;if(S>264){var O=g.ldef[S-257];M=w+(O>>>3)+c(s,A,7&O),A+=7&O}var j=m[p(s,A)&T];A+=15&j;var H=j>>>4,$=g.ddef[H],Y=($>>>4)+l(s,A,15&$);for(A+=15&$,_&&(i=r.F._check(i,w+(1<<17)));w<M;)i[w]=i[w++-Y],i[w]=i[w++-Y],i[w]=i[w++-Y],i[w]=i[w++-Y];w=M}}}else{7&A&&(A+=8-(7&A));var B=4+(A>>>3),V=s[B-4]|s[B-3]<<8;_&&(i=r.F._check(i,w+V)),i.set(new o(s.buffer,s.byteOffset+B,V),w),A=B+V<<3,w+=V}return i.length==w?i:i.slice(0,w)},r.F._check=function(s,i){var o=s.length;if(i<=o)return s;var a=new Uint8Array(Math.max(o<<1,i));return a.set(s,0),a},r.F._decodeTiny=function(s,i,o,a,l,c){for(var u=r.F._bitsE,h=r.F._get17,d=0;d<o;){var p=s[h(a,l)&i];l+=15&p;var g=p>>>4;if(g<=15)c[d]=g,d++;else{var _=0,x=0;g==16?(x=3+u(a,l,2),l+=2,_=c[d-1]):g==17?(x=3+u(a,l,3),l+=3):g==18&&(x=11+u(a,l,7),l+=7);for(var m=d+x;d<m;)c[d]=_,d++}}return l},r.F._copyOut=function(s,i,o,a){for(var l=0,c=0,u=a.length>>>1;c<o;){var h=s[c+i];a[c<<1]=0,a[1+(c<<1)]=h,h>l&&(l=h),c++}for(;c<u;)a[c<<1]=0,a[1+(c<<1)]=0,c++;return l},r.F.makeCodes=function(s,i){for(var o,a,l,c,u=r.F.U,h=s.length,d=u.bl_count,p=0;p<=i;p++)d[p]=0;for(p=1;p<h;p+=2)d[s[p]]++;var g=u.next_code;for(o=0,d[0]=0,a=1;a<=i;a++)o=o+d[a-1]<<1,g[a]=o;for(l=0;l<h;l+=2)(c=s[l+1])!=0&&(s[l]=g[c],g[c]++)},r.F.codes2map=function(s,i,o){for(var a=s.length,l=r.F.U.rev15,c=0;c<a;c+=2)if(s[c+1]!=0)for(var u=c>>1,h=s[c+1],d=u<<4|h,p=i-h,g=s[c]<<p,_=g+(1<<p);g!=_;)o[l[g]>>>15-i]=d,g++},r.F.revCodes=function(s,i){for(var o=r.F.U.rev15,a=15-i,l=0;l<s.length;l+=2){var c=s[l]<<i-s[l+1];s[l]=o[c]>>>a}},r.F._putsE=function(s,i,o){o<<=7&i;var a=i>>>3;s[a]|=o,s[a+1]|=o>>>8},r.F._putsF=function(s,i,o){o<<=7&i;var a=i>>>3;s[a]|=o,s[a+1]|=o>>>8,s[a+2]|=o>>>16},r.F._bitsE=function(s,i,o){return(s[i>>>3]|s[1+(i>>>3)]<<8)>>>(7&i)&(1<<o)-1},r.F._bitsF=function(s,i,o){return(s[i>>>3]|s[1+(i>>>3)]<<8|s[2+(i>>>3)]<<16)>>>(7&i)&(1<<o)-1},r.F._get17=function(s,i){return(s[i>>>3]|s[1+(i>>>3)]<<8|s[2+(i>>>3)]<<16)>>>(7&i)},r.F._get25=function(s,i){return(s[i>>>3]|s[1+(i>>>3)]<<8|s[2+(i>>>3)]<<16|s[3+(i>>>3)]<<24)>>>(7&i)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var s=r.F.U,i=0;i<32768;i++){var o=i;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,s.rev15[i]=(o>>>16|o<<16)>>>17}function a(l,c,u){for(;c--!=0;)l.push(0,u)}for(i=0;i<32;i++)s.ldef[i]=s.of0[i]<<3|s.exb[i],s.ddef[i]=s.df0[i]<<4|s.dxb[i];a(s.fltree,144,8),a(s.fltree,112,9),a(s.fltree,24,7),a(s.fltree,8,8),r.F.makeCodes(s.fltree,9),r.F.codes2map(s.fltree,9,s.flmap),r.F.revCodes(s.fltree,9),a(s.fdtree,32,5),r.F.makeCodes(s.fdtree,5),r.F.codes2map(s.fdtree,5,s.fdmap),r.F.revCodes(s.fdtree,5),a(s.itree,19,0),a(s.ltree,286,0),a(s.dtree,30,0),a(s.ttree,320,0)}()})();var sF=tF({__proto__:null,default:Jh},[Jh]);const Gn=function(){var t={nextZero(u,h){for(;u[h]!=0;)h++;return h},readUshort:(u,h)=>u[h]<<8|u[h+1],writeUshort(u,h,d){u[h]=d>>8&255,u[h+1]=255&d},readUint:(u,h)=>16777216*u[h]+(u[h+1]<<16|u[h+2]<<8|u[h+3]),writeUint(u,h,d){u[h]=d>>24&255,u[h+1]=d>>16&255,u[h+2]=d>>8&255,u[h+3]=255&d},readASCII(u,h,d){let p="";for(let g=0;g<d;g++)p+=String.fromCharCode(u[h+g]);return p},writeASCII(u,h,d){for(let p=0;p<d.length;p++)u[h+p]=d.charCodeAt(p)},readBytes(u,h,d){const p=[];for(let g=0;g<d;g++)p.push(u[h+g]);return p},pad:u=>u.length<2?`0${u}`:u,readUTF8(u,h,d){let p,g="";for(let _=0;_<d;_++)g+=`%${t.pad(u[h+_].toString(16))}`;try{p=decodeURIComponent(g)}catch{return t.readASCII(u,h,d)}return p}};function e(u,h,d,p){const g=h*d,_=i(p),x=Math.ceil(h*_/8),m=new Uint8Array(4*g),v=new Uint32Array(m.buffer),{ctype:y}=p,{depth:C}=p,N=t.readUshort;if(y==6){const O=g<<2;if(C==8)for(var E=0;E<O;E+=4)m[E]=u[E],m[E+1]=u[E+1],m[E+2]=u[E+2],m[E+3]=u[E+3];if(C==16)for(E=0;E<O;E++)m[E]=u[E<<1]}else if(y==2){const O=p.tabs.tRNS;if(O==null){if(C==8)for(E=0;E<g;E++){var k=3*E;v[E]=255<<24|u[k+2]<<16|u[k+1]<<8|u[k]}if(C==16)for(E=0;E<g;E++)k=6*E,v[E]=255<<24|u[k+4]<<16|u[k+2]<<8|u[k]}else{var T=O[0];const j=O[1],H=O[2];if(C==8)for(E=0;E<g;E++){var w=E<<2;k=3*E,v[E]=255<<24|u[k+2]<<16|u[k+1]<<8|u[k],u[k]==T&&u[k+1]==j&&u[k+2]==H&&(m[w+3]=0)}if(C==16)for(E=0;E<g;E++)w=E<<2,k=6*E,v[E]=255<<24|u[k+4]<<16|u[k+2]<<8|u[k],N(u,k)==T&&N(u,k+2)==j&&N(u,k+4)==H&&(m[w+3]=0)}}else if(y==3){const O=p.tabs.PLTE,j=p.tabs.tRNS,H=j?j.length:0;if(C==1)for(var A=0;A<d;A++){var P=A*x,b=A*h;for(E=0;E<h;E++){w=b+E<<2;var D=3*(L=u[P+(E>>3)]>>7-((7&E)<<0)&1);m[w]=O[D],m[w+1]=O[D+1],m[w+2]=O[D+2],m[w+3]=L<H?j[L]:255}}if(C==2)for(A=0;A<d;A++)for(P=A*x,b=A*h,E=0;E<h;E++)w=b+E<<2,D=3*(L=u[P+(E>>2)]>>6-((3&E)<<1)&3),m[w]=O[D],m[w+1]=O[D+1],m[w+2]=O[D+2],m[w+3]=L<H?j[L]:255;if(C==4)for(A=0;A<d;A++)for(P=A*x,b=A*h,E=0;E<h;E++)w=b+E<<2,D=3*(L=u[P+(E>>1)]>>4-((1&E)<<2)&15),m[w]=O[D],m[w+1]=O[D+1],m[w+2]=O[D+2],m[w+3]=L<H?j[L]:255;if(C==8)for(E=0;E<g;E++){var L;w=E<<2,D=3*(L=u[E]),m[w]=O[D],m[w+1]=O[D+1],m[w+2]=O[D+2],m[w+3]=L<H?j[L]:255}}else if(y==4){if(C==8)for(E=0;E<g;E++){w=E<<2;var F=u[R=E<<1];m[w]=F,m[w+1]=F,m[w+2]=F,m[w+3]=u[R+1]}if(C==16)for(E=0;E<g;E++){var R;w=E<<2,F=u[R=E<<2],m[w]=F,m[w+1]=F,m[w+2]=F,m[w+3]=u[R+2]}}else if(y==0)for(T=p.tabs.tRNS?p.tabs.tRNS:-1,A=0;A<d;A++){const O=A*x,j=A*h;if(C==1)for(var S=0;S<h;S++){var M=(F=255*(u[O+(S>>>3)]>>>7-(7&S)&1))==255*T?0:255;v[j+S]=M<<24|F<<16|F<<8|F}else if(C==2)for(S=0;S<h;S++)M=(F=85*(u[O+(S>>>2)]>>>6-((3&S)<<1)&3))==85*T?0:255,v[j+S]=M<<24|F<<16|F<<8|F;else if(C==4)for(S=0;S<h;S++)M=(F=17*(u[O+(S>>>1)]>>>4-((1&S)<<2)&15))==17*T?0:255,v[j+S]=M<<24|F<<16|F<<8|F;else if(C==8)for(S=0;S<h;S++)M=(F=u[O+S])==T?0:255,v[j+S]=M<<24|F<<16|F<<8|F;else if(C==16)for(S=0;S<h;S++)F=u[O+(S<<1)],M=N(u,O+(S<<1))==T?0:255,v[j+S]=M<<24|F<<16|F<<8|F}return m}function n(u,h,d,p){const g=i(u),_=Math.ceil(d*g/8),x=new Uint8Array((_+1+u.interlace)*p);return h=u.tabs.CgBI?s(h,x):r(h,x),u.interlace==0?h=o(h,u,0,d,p):u.interlace==1&&(h=function(v,y){const C=y.width,N=y.height,E=i(y),k=E>>3,T=Math.ceil(C*E/8),w=new Uint8Array(N*T);let A=0;const P=[0,0,4,0,2,0,1],b=[0,4,0,2,0,1,0],D=[8,8,8,4,4,2,2],L=[8,8,4,4,2,2,1];let F=0;for(;F<7;){const S=D[F],M=L[F];let O=0,j=0,H=P[F];for(;H<N;)H+=S,j++;let $=b[F];for(;$<C;)$+=M,O++;const Y=Math.ceil(O*E/8);o(v,y,A,O,j);let B=0,V=P[F];for(;V<N;){let ee=b[F],pe=A+B*Y<<3;for(;ee<C;){var R;if(E==1&&(R=(R=v[pe>>3])>>7-(7&pe)&1,w[V*T+(ee>>3)]|=R<<7-((7&ee)<<0)),E==2&&(R=(R=v[pe>>3])>>6-(7&pe)&3,w[V*T+(ee>>2)]|=R<<6-((3&ee)<<1)),E==4&&(R=(R=v[pe>>3])>>4-(7&pe)&15,w[V*T+(ee>>1)]|=R<<4-((1&ee)<<2)),E>=8){const ye=V*T+ee*k;for(let X=0;X<k;X++)w[ye+X]=v[(pe>>3)+X]}pe+=E,ee+=M}B++,V+=S}O*j!=0&&(A+=j*(1+Y)),F+=1}return w}(h,u)),h}function r(u,h){return s(new Uint8Array(u.buffer,2,u.length-6),h)}var s=function(){const u={H:{}};return u.H.N=function(h,d){const p=Uint8Array;let g,_,x=0,m=0,v=0,y=0,C=0,N=0,E=0,k=0,T=0;if(h[0]==3&&h[1]==0)return d||new p(0);const w=u.H,A=w.b,P=w.e,b=w.R,D=w.n,L=w.A,F=w.Z,R=w.m,S=d==null;for(S&&(d=new p(h.length>>>2<<5));x==0;)if(x=A(h,T,1),m=A(h,T+1,2),T+=3,m!=0){if(S&&(d=u.H.W(d,k+(1<<17))),m==1&&(g=R.J,_=R.h,N=511,E=31),m==2){v=P(h,T,5)+257,y=P(h,T+5,5)+1,C=P(h,T+10,4)+4,T+=14;let O=1;for(var M=0;M<38;M+=2)R.Q[M]=0,R.Q[M+1]=0;for(M=0;M<C;M++){const $=P(h,T+3*M,3);R.Q[1+(R.X[M]<<1)]=$,$>O&&(O=$)}T+=3*C,D(R.Q,O),L(R.Q,O,R.u),g=R.w,_=R.d,T=b(R.u,(1<<O)-1,v+y,h,T,R.v);const j=w.V(R.v,0,v,R.C);N=(1<<j)-1;const H=w.V(R.v,v,y,R.D);E=(1<<H)-1,D(R.C,j),L(R.C,j,g),D(R.D,H),L(R.D,H,_)}for(;;){const O=g[F(h,T)&N];T+=15&O;const j=O>>>4;if(!(j>>>8))d[k++]=j;else{if(j==256)break;{let H=k+j-254;if(j>264){const ee=R.q[j-257];H=k+(ee>>>3)+P(h,T,7&ee),T+=7&ee}const $=_[F(h,T)&E];T+=15&$;const Y=$>>>4,B=R.c[Y],V=(B>>>4)+A(h,T,15&B);for(T+=15&B;k<H;)d[k]=d[k++-V],d[k]=d[k++-V],d[k]=d[k++-V],d[k]=d[k++-V];k=H}}}}else{7&T&&(T+=8-(7&T));const O=4+(T>>>3),j=h[O-4]|h[O-3]<<8;S&&(d=u.H.W(d,k+j)),d.set(new p(h.buffer,h.byteOffset+O,j),k),T=O+j<<3,k+=j}return d.length==k?d:d.slice(0,k)},u.H.W=function(h,d){const p=h.length;if(d<=p)return h;const g=new Uint8Array(p<<1);return g.set(h,0),g},u.H.R=function(h,d,p,g,_,x){const m=u.H.e,v=u.H.Z;let y=0;for(;y<p;){const C=h[v(g,_)&d];_+=15&C;const N=C>>>4;if(N<=15)x[y]=N,y++;else{let E=0,k=0;N==16?(k=3+m(g,_,2),_+=2,E=x[y-1]):N==17?(k=3+m(g,_,3),_+=3):N==18&&(k=11+m(g,_,7),_+=7);const T=y+k;for(;y<T;)x[y]=E,y++}}return _},u.H.V=function(h,d,p,g){let _=0,x=0;const m=g.length>>>1;for(;x<p;){const v=h[x+d];g[x<<1]=0,g[1+(x<<1)]=v,v>_&&(_=v),x++}for(;x<m;)g[x<<1]=0,g[1+(x<<1)]=0,x++;return _},u.H.n=function(h,d){const p=u.H.m,g=h.length;let _,x,m,v;const y=p.j;for(var C=0;C<=d;C++)y[C]=0;for(C=1;C<g;C+=2)y[h[C]]++;const N=p.K;for(_=0,y[0]=0,x=1;x<=d;x++)_=_+y[x-1]<<1,N[x]=_;for(m=0;m<g;m+=2)v=h[m+1],v!=0&&(h[m]=N[v],N[v]++)},u.H.A=function(h,d,p){const g=h.length,_=u.H.m.r;for(let x=0;x<g;x+=2)if(h[x+1]!=0){const m=x>>1,v=h[x+1],y=m<<4|v,C=d-v;let N=h[x]<<C;const E=N+(1<<C);for(;N!=E;)p[_[N]>>>15-d]=y,N++}},u.H.l=function(h,d){const p=u.H.m.r,g=15-d;for(let _=0;_<h.length;_+=2){const x=h[_]<<d-h[_+1];h[_]=p[x]>>>g}},u.H.M=function(h,d,p){p<<=7&d;const g=d>>>3;h[g]|=p,h[g+1]|=p>>>8},u.H.I=function(h,d,p){p<<=7&d;const g=d>>>3;h[g]|=p,h[g+1]|=p>>>8,h[g+2]|=p>>>16},u.H.e=function(h,d,p){return(h[d>>>3]|h[1+(d>>>3)]<<8)>>>(7&d)&(1<<p)-1},u.H.b=function(h,d,p){return(h[d>>>3]|h[1+(d>>>3)]<<8|h[2+(d>>>3)]<<16)>>>(7&d)&(1<<p)-1},u.H.Z=function(h,d){return(h[d>>>3]|h[1+(d>>>3)]<<8|h[2+(d>>>3)]<<16)>>>(7&d)},u.H.i=function(h,d){return(h[d>>>3]|h[1+(d>>>3)]<<8|h[2+(d>>>3)]<<16|h[3+(d>>>3)]<<24)>>>(7&d)},u.H.m=function(){const h=Uint16Array,d=Uint32Array;return{K:new h(16),j:new h(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new h(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new d(32),J:new h(512),_:[],h:new h(32),$:[],w:new h(32768),C:[],v:[],d:new h(32768),D:[],u:new h(512),Q:[],r:new h(32768),s:new d(286),Y:new d(30),a:new d(19),t:new d(15e3),k:new h(65536),g:new h(32768)}}(),function(){const h=u.H.m;for(var d=0;d<32768;d++){let g=d;g=(2863311530&g)>>>1|(1431655765&g)<<1,g=(3435973836&g)>>>2|(858993459&g)<<2,g=(4042322160&g)>>>4|(252645135&g)<<4,g=(4278255360&g)>>>8|(16711935&g)<<8,h.r[d]=(g>>>16|g<<16)>>>17}function p(g,_,x){for(;_--!=0;)g.push(0,x)}for(d=0;d<32;d++)h.q[d]=h.S[d]<<3|h.T[d],h.c[d]=h.p[d]<<4|h.z[d];p(h._,144,8),p(h._,112,9),p(h._,24,7),p(h._,8,8),u.H.n(h._,9),u.H.A(h._,9,h.J),u.H.l(h._,9),p(h.$,32,5),u.H.n(h.$,5),u.H.A(h.$,5,h.h),u.H.l(h.$,5),p(h.Q,19,0),p(h.C,286,0),p(h.D,30,0),p(h.v,320,0)}(),u.H.N}();function i(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth}function o(u,h,d,p,g){let _=i(h);const x=Math.ceil(p*_/8);let m,v;_=Math.ceil(_/8);let y=u[d],C=0;if(y>1&&(u[d]=[0,0,1][y-2]),y==3)for(C=_;C<x;C++)u[C+1]=u[C+1]+(u[C+1-_]>>>1)&255;for(let N=0;N<g;N++)if(m=d+N*x,v=m+N+1,y=u[v-1],C=0,y==0)for(;C<x;C++)u[m+C]=u[v+C];else if(y==1){for(;C<_;C++)u[m+C]=u[v+C];for(;C<x;C++)u[m+C]=u[v+C]+u[m+C-_]}else if(y==2)for(;C<x;C++)u[m+C]=u[v+C]+u[m+C-x];else if(y==3){for(;C<_;C++)u[m+C]=u[v+C]+(u[m+C-x]>>>1);for(;C<x;C++)u[m+C]=u[v+C]+(u[m+C-x]+u[m+C-_]>>>1)}else{for(;C<_;C++)u[m+C]=u[v+C]+a(0,u[m+C-x],0);for(;C<x;C++)u[m+C]=u[v+C]+a(u[m+C-_],u[m+C-x],u[m+C-_-x])}return u}function a(u,h,d){const p=u+h-d,g=p-u,_=p-h,x=p-d;return g*g<=_*_&&g*g<=x*x?u:_*_<=x*x?h:d}function l(u,h,d){d.width=t.readUint(u,h),h+=4,d.height=t.readUint(u,h),h+=4,d.depth=u[h],h++,d.ctype=u[h],h++,d.compress=u[h],h++,d.filter=u[h],h++,d.interlace=u[h],h++}function c(u,h,d,p,g,_,x,m,v){const y=Math.min(h,g),C=Math.min(d,_);let N=0,E=0;for(let F=0;F<C;F++)for(let R=0;R<y;R++)if(x>=0&&m>=0?(N=F*h+R<<2,E=(m+F)*g+x+R<<2):(N=(-m+F)*h-x+R<<2,E=F*g+R<<2),v==0)p[E]=u[N],p[E+1]=u[N+1],p[E+2]=u[N+2],p[E+3]=u[N+3];else if(v==1){var k=u[N+3]*.00392156862745098,T=u[N]*k,w=u[N+1]*k,A=u[N+2]*k,P=p[E+3]*(1/255),b=p[E]*P,D=p[E+1]*P,L=p[E+2]*P;const S=1-k,M=k+P*S,O=M==0?0:1/M;p[E+3]=255*M,p[E+0]=(T+b*S)*O,p[E+1]=(w+D*S)*O,p[E+2]=(A+L*S)*O}else if(v==2)k=u[N+3],T=u[N],w=u[N+1],A=u[N+2],P=p[E+3],b=p[E],D=p[E+1],L=p[E+2],k==P&&T==b&&w==D&&A==L?(p[E]=0,p[E+1]=0,p[E+2]=0,p[E+3]=0):(p[E]=T,p[E+1]=w,p[E+2]=A,p[E+3]=k);else if(v==3){if(k=u[N+3],T=u[N],w=u[N+1],A=u[N+2],P=p[E+3],b=p[E],D=p[E+1],L=p[E+2],k==P&&T==b&&w==D&&A==L)continue;if(k<220&&P>20)return!1}return!0}return{decode:function(h){const d=new Uint8Array(h);let p=8;const g=t,_=g.readUshort,x=g.readUint,m={tabs:{},frames:[]},v=new Uint8Array(d.length);let y,C=0,N=0;const E=[137,80,78,71,13,10,26,10];for(var k=0;k<8;k++)if(d[k]!=E[k])throw"The input is not a PNG file!";for(;p<d.length;){const F=g.readUint(d,p);p+=4;const R=g.readASCII(d,p,4);if(p+=4,R=="IHDR")l(d,p,m);else if(R=="iCCP"){for(var T=p;d[T]!=0;)T++;g.readASCII(d,p,T-p),d[T+1];const S=d.slice(T+2,p+F);let M=null;try{M=r(S)}catch{M=s(S)}m.tabs[R]=M}else if(R=="CgBI")m.tabs[R]=d.slice(p,p+4);else if(R=="IDAT"){for(k=0;k<F;k++)v[C+k]=d[p+k];C+=F}else if(R=="acTL")m.tabs[R]={num_frames:x(d,p),num_plays:x(d,p+4)},y=new Uint8Array(d.length);else if(R=="fcTL"){N!=0&&((L=m.frames[m.frames.length-1]).data=n(m,y.slice(0,N),L.rect.width,L.rect.height),N=0);const S={x:x(d,p+12),y:x(d,p+16),width:x(d,p+4),height:x(d,p+8)};let M=_(d,p+22);M=_(d,p+20)/(M==0?100:M);const O={rect:S,delay:Math.round(1e3*M),dispose:d[p+24],blend:d[p+25]};m.frames.push(O)}else if(R=="fdAT"){for(k=0;k<F-4;k++)y[N+k]=d[p+k+4];N+=F-4}else if(R=="pHYs")m.tabs[R]=[g.readUint(d,p),g.readUint(d,p+4),d[p+8]];else if(R=="cHRM")for(m.tabs[R]=[],k=0;k<8;k++)m.tabs[R].push(g.readUint(d,p+4*k));else if(R=="tEXt"||R=="zTXt"){m.tabs[R]==null&&(m.tabs[R]={});var w=g.nextZero(d,p),A=g.readASCII(d,p,w-p),P=p+F-w-1;if(R=="tEXt")D=g.readASCII(d,w+1,P);else{var b=r(d.slice(w+2,w+2+P));D=g.readUTF8(b,0,b.length)}m.tabs[R][A]=D}else if(R=="iTXt"){m.tabs[R]==null&&(m.tabs[R]={}),w=0,T=p,w=g.nextZero(d,T),A=g.readASCII(d,T,w-T);const S=d[T=w+1];var D;d[T+1],T+=2,w=g.nextZero(d,T),g.readASCII(d,T,w-T),T=w+1,w=g.nextZero(d,T),g.readUTF8(d,T,w-T),P=F-((T=w+1)-p),S==0?D=g.readUTF8(d,T,P):(b=r(d.slice(T,T+P)),D=g.readUTF8(b,0,b.length)),m.tabs[R][A]=D}else if(R=="PLTE")m.tabs[R]=g.readBytes(d,p,F);else if(R=="hIST"){const S=m.tabs.PLTE.length/3;for(m.tabs[R]=[],k=0;k<S;k++)m.tabs[R].push(_(d,p+2*k))}else if(R=="tRNS")m.ctype==3?m.tabs[R]=g.readBytes(d,p,F):m.ctype==0?m.tabs[R]=_(d,p):m.ctype==2&&(m.tabs[R]=[_(d,p),_(d,p+2),_(d,p+4)]);else if(R=="gAMA")m.tabs[R]=g.readUint(d,p)/1e5;else if(R=="sRGB")m.tabs[R]=d[p];else if(R=="bKGD")m.ctype==0||m.ctype==4?m.tabs[R]=[_(d,p)]:m.ctype==2||m.ctype==6?m.tabs[R]=[_(d,p),_(d,p+2),_(d,p+4)]:m.ctype==3&&(m.tabs[R]=d[p]);else if(R=="IEND")break;p+=F,g.readUint(d,p),p+=4}var L;return N!=0&&((L=m.frames[m.frames.length-1]).data=n(m,y.slice(0,N),L.rect.width,L.rect.height)),m.data=n(m,v,m.width,m.height),delete m.compress,delete m.interlace,delete m.filter,m},toRGBA8:function(h){const d=h.width,p=h.height;if(h.tabs.acTL==null)return[e(h.data,d,p,h).buffer];const g=[];h.frames[0].data==null&&(h.frames[0].data=h.data);const _=d*p*4,x=new Uint8Array(_),m=new Uint8Array(_),v=new Uint8Array(_);for(let C=0;C<h.frames.length;C++){const N=h.frames[C],E=N.rect.x,k=N.rect.y,T=N.rect.width,w=N.rect.height,A=e(N.data,T,w,h);if(C!=0)for(var y=0;y<_;y++)v[y]=x[y];if(N.blend==0?c(A,T,w,x,d,p,E,k,0):N.blend==1&&c(A,T,w,x,d,p,E,k,1),g.push(x.buffer.slice(0)),N.dispose!=0){if(N.dispose==1)c(m,T,w,x,d,p,E,k,0);else if(N.dispose==2)for(y=0;y<_;y++)x[y]=v[y]}}return g},_paeth:a,_copyTile:c,_bin:t}}();(function(){const{_copyTile:t}=Gn,{_bin:e}=Gn,n=Gn._paeth;var r={table:function(){const T=new Uint32Array(256);for(let w=0;w<256;w++){let A=w;for(let P=0;P<8;P++)1&A?A=3988292384^A>>>1:A>>>=1;T[w]=A}return T}(),update(T,w,A,P){for(let b=0;b<P;b++)T=r.table[255&(T^w[A+b])]^T>>>8;return T},crc:(T,w,A)=>4294967295^r.update(4294967295,T,w,A)};function s(T,w,A,P){w[A]+=T[0]*P>>4,w[A+1]+=T[1]*P>>4,w[A+2]+=T[2]*P>>4,w[A+3]+=T[3]*P>>4}function i(T){return Math.max(0,Math.min(255,T))}function o(T,w){const A=T[0]-w[0],P=T[1]-w[1],b=T[2]-w[2],D=T[3]-w[3];return A*A+P*P+b*b+D*D}function a(T,w,A,P,b,D,L){L==null&&(L=1);const F=P.length,R=[];for(var S=0;S<F;S++){const V=P[S];R.push([V>>>0&255,V>>>8&255,V>>>16&255,V>>>24&255])}for(S=0;S<F;S++){let V=4294967295;for(var M=0,O=0;O<F;O++){var j=o(R[S],R[O]);O!=S&&j<V&&(V=j,M=O)}}const H=new Uint32Array(b.buffer),$=new Int16Array(w*A*4),Y=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(S=0;S<Y.length;S++)Y[S]=255*((Y[S]+.5)/16-.5);for(let V=0;V<A;V++)for(let ee=0;ee<w;ee++){var B;S=4*(V*w+ee),L!=2?B=[i(T[S]+$[S]),i(T[S+1]+$[S+1]),i(T[S+2]+$[S+2]),i(T[S+3]+$[S+3])]:(j=Y[4*(3&V)+(3&ee)],B=[i(T[S]+j),i(T[S+1]+j),i(T[S+2]+j),i(T[S+3]+j)]),M=0;let pe=16777215;for(O=0;O<F;O++){const ie=o(B,R[O]);ie<pe&&(pe=ie,M=O)}const ye=R[M],X=[B[0]-ye[0],B[1]-ye[1],B[2]-ye[2],B[3]-ye[3]];L==1&&(ee!=w-1&&s(X,$,S+4,7),V!=A-1&&(ee!=0&&s(X,$,S+4*w-4,3),s(X,$,S+4*w,5),ee!=w-1&&s(X,$,S+4*w+4,1))),D[S>>2]=M,H[S>>2]=P[M]}}function l(T,w,A,P,b){b==null&&(b={});const{crc:D}=r,L=e.writeUint,F=e.writeUshort,R=e.writeASCII;let S=8;const M=T.frames.length>1;let O,j=!1,H=33+(M?20:0);if(b.sRGB!=null&&(H+=13),b.pHYs!=null&&(H+=21),b.iCCP!=null&&(O=pako.deflate(b.iCCP),H+=21+O.length+4),T.ctype==3){for(var $=T.plte.length,Y=0;Y<$;Y++)T.plte[Y]>>>24!=255&&(j=!0);H+=8+3*$+4+(j?8+1*$+4:0)}for(var B=0;B<T.frames.length;B++)M&&(H+=38),H+=(ye=T.frames[B]).cimg.length+12,B!=0&&(H+=4);H+=12;const V=new Uint8Array(H),ee=[137,80,78,71,13,10,26,10];for(Y=0;Y<8;Y++)V[Y]=ee[Y];if(L(V,S,13),S+=4,R(V,S,"IHDR"),S+=4,L(V,S,w),S+=4,L(V,S,A),S+=4,V[S]=T.depth,S++,V[S]=T.ctype,S++,V[S]=0,S++,V[S]=0,S++,V[S]=0,S++,L(V,S,D(V,S-17,17)),S+=4,b.sRGB!=null&&(L(V,S,1),S+=4,R(V,S,"sRGB"),S+=4,V[S]=b.sRGB,S++,L(V,S,D(V,S-5,5)),S+=4),b.iCCP!=null){const X=13+O.length;L(V,S,X),S+=4,R(V,S,"iCCP"),S+=4,R(V,S,"ICC profile"),S+=11,S+=2,V.set(O,S),S+=O.length,L(V,S,D(V,S-(X+4),X+4)),S+=4}if(b.pHYs!=null&&(L(V,S,9),S+=4,R(V,S,"pHYs"),S+=4,L(V,S,b.pHYs[0]),S+=4,L(V,S,b.pHYs[1]),S+=4,V[S]=b.pHYs[2],S++,L(V,S,D(V,S-13,13)),S+=4),M&&(L(V,S,8),S+=4,R(V,S,"acTL"),S+=4,L(V,S,T.frames.length),S+=4,L(V,S,b.loop!=null?b.loop:0),S+=4,L(V,S,D(V,S-12,12)),S+=4),T.ctype==3){for(L(V,S,3*($=T.plte.length)),S+=4,R(V,S,"PLTE"),S+=4,Y=0;Y<$;Y++){const X=3*Y,ie=T.plte[Y],ke=255&ie,ze=ie>>>8&255,Nn=ie>>>16&255;V[S+X+0]=ke,V[S+X+1]=ze,V[S+X+2]=Nn}if(S+=3*$,L(V,S,D(V,S-3*$-4,3*$+4)),S+=4,j){for(L(V,S,$),S+=4,R(V,S,"tRNS"),S+=4,Y=0;Y<$;Y++)V[S+Y]=T.plte[Y]>>>24&255;S+=$,L(V,S,D(V,S-$-4,$+4)),S+=4}}let pe=0;for(B=0;B<T.frames.length;B++){var ye=T.frames[B];M&&(L(V,S,26),S+=4,R(V,S,"fcTL"),S+=4,L(V,S,pe++),S+=4,L(V,S,ye.rect.width),S+=4,L(V,S,ye.rect.height),S+=4,L(V,S,ye.rect.x),S+=4,L(V,S,ye.rect.y),S+=4,F(V,S,P[B]),S+=2,F(V,S,1e3),S+=2,V[S]=ye.dispose,S++,V[S]=ye.blend,S++,L(V,S,D(V,S-30,30)),S+=4);const X=ye.cimg;L(V,S,($=X.length)+(B==0?0:4)),S+=4;const ie=S;R(V,S,B==0?"IDAT":"fdAT"),S+=4,B!=0&&(L(V,S,pe++),S+=4),V.set(X,S),S+=$,L(V,S,D(V,ie,S-ie)),S+=4}return L(V,S,0),S+=4,R(V,S,"IEND"),S+=4,L(V,S,D(V,S-4,4)),S+=4,V.buffer}function c(T,w,A){for(let P=0;P<T.frames.length;P++){const b=T.frames[P];b.rect.width;const D=b.rect.height,L=new Uint8Array(D*b.bpl+D);b.cimg=p(b.img,D,b.bpp,b.bpl,L,w,A)}}function u(T,w,A,P,b){const D=b[0],L=b[1],F=b[2],R=b[3],S=b[4],M=b[5];let O=6,j=8,H=255;for(var $=0;$<T.length;$++){const bt=new Uint8Array(T[$]);for(var Y=bt.length,B=0;B<Y;B+=4)H&=bt[B+3]}const V=H!=255,ee=function(We,De,Et,Gt,et,dn){const tt=[];for(var Oe=0;Oe<We.length;Oe++){const Kt=new Uint8Array(We[Oe]),Hn=new Uint32Array(Kt.buffer);var fn;let Pn=0,Nr=0,or=De,ei=Et,w0=Gt?1:0;if(Oe!=0){const DC=dn||Gt||Oe==1||tt[Oe-2].dispose!=0?1:2;let E0=0,E1=1e9;for(let Aa=0;Aa<DC;Aa++){var rs=new Uint8Array(We[Oe-1-Aa]);const OC=new Uint32Array(We[Oe-1-Aa]);let ss=De,is=Et,no=-1,Ra=-1;for(let ti=0;ti<Et;ti++)for(let ni=0;ni<De;ni++)Hn[Pt=ti*De+ni]!=OC[Pt]&&(ni<ss&&(ss=ni),ni>no&&(no=ni),ti<is&&(is=ti),ti>Ra&&(Ra=ti));no==-1&&(ss=is=no=Ra=0),et&&((1&ss)==1&&ss--,(1&is)==1&&is--);const x1=(no-ss+1)*(Ra-is+1);x1<E1&&(E1=x1,E0=Aa,Pn=ss,Nr=is,or=no-ss+1,ei=Ra-is+1)}rs=new Uint8Array(We[Oe-1-E0]),E0==1&&(tt[Oe-1].dispose=2),fn=new Uint8Array(or*ei*4),t(rs,De,Et,fn,or,ei,-Pn,-Nr,0),w0=t(Kt,De,Et,fn,or,ei,-Pn,-Nr,3)?1:0,w0==1?d(Kt,De,Et,fn,{x:Pn,y:Nr,width:or,height:ei}):t(Kt,De,Et,fn,or,ei,-Pn,-Nr,0)}else fn=Kt.slice(0);tt.push({rect:{x:Pn,y:Nr,width:or,height:ei},img:fn,blend:w0,dispose:0})}if(Gt)for(Oe=0;Oe<tt.length;Oe++){if((Zs=tt[Oe]).blend==1)continue;const Kt=Zs.rect,Hn=tt[Oe-1].rect,Pn=Math.min(Kt.x,Hn.x),Nr=Math.min(Kt.y,Hn.y),or={x:Pn,y:Nr,width:Math.max(Kt.x+Kt.width,Hn.x+Hn.width)-Pn,height:Math.max(Kt.y+Kt.height,Hn.y+Hn.height)-Nr};tt[Oe-1].dispose=1,Oe-1!=0&&h(We,De,Et,tt,Oe-1,or,et),h(We,De,Et,tt,Oe,or,et)}let qc=0;if(We.length!=1)for(var Pt=0;Pt<tt.length;Pt++){var Zs;qc+=(Zs=tt[Pt]).rect.width*Zs.rect.height}return tt}(T,w,A,D,L,F),pe={},ye=[],X=[];if(P!=0){const bt=[];for(B=0;B<ee.length;B++)bt.push(ee[B].img.buffer);const We=function(et){let dn=0;for(var tt=0;tt<et.length;tt++)dn+=et[tt].byteLength;const Oe=new Uint8Array(dn);let fn=0;for(tt=0;tt<et.length;tt++){const rs=new Uint8Array(et[tt]),qc=rs.length;for(let Pt=0;Pt<qc;Pt+=4){let Zs=rs[Pt],Kt=rs[Pt+1],Hn=rs[Pt+2];const Pn=rs[Pt+3];Pn==0&&(Zs=Kt=Hn=0),Oe[fn+Pt]=Zs,Oe[fn+Pt+1]=Kt,Oe[fn+Pt+2]=Hn,Oe[fn+Pt+3]=Pn}fn+=qc}return Oe.buffer}(bt),De=_(We,P);for(B=0;B<De.plte.length;B++)ye.push(De.plte[B].est.rgba);let Et=0;for(B=0;B<ee.length;B++){const Gt=(ke=ee[B]).img.length;var ie=new Uint8Array(De.inds.buffer,Et>>2,Gt>>2);X.push(ie);const et=new Uint8Array(De.abuf,Et,Gt);M&&a(ke.img,ke.rect.width,ke.rect.height,ye,et,ie),ke.img.set(et),Et+=Gt}}else for($=0;$<ee.length;$++){var ke=ee[$];const bt=new Uint32Array(ke.img.buffer);var ze=ke.rect.width;for(Y=bt.length,ie=new Uint8Array(Y),X.push(ie),B=0;B<Y;B++){const We=bt[B];if(B!=0&&We==bt[B-1])ie[B]=ie[B-1];else if(B>ze&&We==bt[B-ze])ie[B]=ie[B-ze];else{let De=pe[We];if(De==null&&(pe[We]=De=ye.length,ye.push(We),ye.length>=300))break;ie[B]=De}}}const Nn=ye.length;for(Nn<=256&&S==0&&(j=Nn<=2?1:Nn<=4?2:Nn<=16?4:8,j=Math.max(j,R)),$=0;$<ee.length;$++){(ke=ee[$]).rect.x,ke.rect.y,ze=ke.rect.width;const bt=ke.rect.height;let We=ke.img;new Uint32Array(We.buffer);let De=4*ze,Et=4;if(Nn<=256&&S==0){De=Math.ceil(j*ze/8);var bn=new Uint8Array(De*bt);const Gt=X[$];for(let et=0;et<bt;et++){B=et*De;const dn=et*ze;if(j==8)for(var Be=0;Be<ze;Be++)bn[B+Be]=Gt[dn+Be];else if(j==4)for(Be=0;Be<ze;Be++)bn[B+(Be>>1)]|=Gt[dn+Be]<<4-4*(1&Be);else if(j==2)for(Be=0;Be<ze;Be++)bn[B+(Be>>2)]|=Gt[dn+Be]<<6-2*(3&Be);else if(j==1)for(Be=0;Be<ze;Be++)bn[B+(Be>>3)]|=Gt[dn+Be]<<7-1*(7&Be)}We=bn,O=3,Et=1}else if(V==0&&ee.length==1){bn=new Uint8Array(ze*bt*3);const Gt=ze*bt;for(B=0;B<Gt;B++){const et=3*B,dn=4*B;bn[et]=We[dn],bn[et+1]=We[dn+1],bn[et+2]=We[dn+2]}We=bn,O=2,Et=3,De=3*ze}ke.img=We,ke.bpl=De,ke.bpp=Et}return{ctype:O,depth:j,plte:ye,frames:ee}}function h(T,w,A,P,b,D,L){const F=Uint8Array,R=Uint32Array,S=new F(T[b-1]),M=new R(T[b-1]),O=b+1<T.length?new F(T[b+1]):null,j=new F(T[b]),H=new R(j.buffer);let $=w,Y=A,B=-1,V=-1;for(let pe=0;pe<D.height;pe++)for(let ye=0;ye<D.width;ye++){const X=D.x+ye,ie=D.y+pe,ke=ie*w+X,ze=H[ke];ze==0||P[b-1].dispose==0&&M[ke]==ze&&(O==null||O[4*ke+3]!=0)||(X<$&&($=X),X>B&&(B=X),ie<Y&&(Y=ie),ie>V&&(V=ie))}B==-1&&($=Y=B=V=0),L&&((1&$)==1&&$--,(1&Y)==1&&Y--),D={x:$,y:Y,width:B-$+1,height:V-Y+1};const ee=P[b];ee.rect=D,ee.blend=1,ee.img=new Uint8Array(D.width*D.height*4),P[b-1].dispose==0?(t(S,w,A,ee.img,D.width,D.height,-D.x,-D.y,0),d(j,w,A,ee.img,D)):t(j,w,A,ee.img,D.width,D.height,-D.x,-D.y,0)}function d(T,w,A,P,b){t(T,w,A,P,b.width,b.height,-b.x,-b.y,2)}function p(T,w,A,P,b,D,L){const F=[];let R,S=[0,1,2,3,4];D!=-1?S=[D]:(w*P>5e5||A==1)&&(S=[0]),L&&(R={level:0});const M=sF;for(var O=0;O<S.length;O++){for(let $=0;$<w;$++)g(b,T,$,P,A,S[O]);F.push(M.deflate(b,R))}let j,H=1e9;for(O=0;O<F.length;O++)F[O].length<H&&(j=O,H=F[O].length);return F[j]}function g(T,w,A,P,b,D){const L=A*P;let F=L+A;if(T[F]=D,F++,D==0)if(P<500)for(var R=0;R<P;R++)T[F+R]=w[L+R];else T.set(new Uint8Array(w.buffer,L,P),F);else if(D==1){for(R=0;R<b;R++)T[F+R]=w[L+R];for(R=b;R<P;R++)T[F+R]=w[L+R]-w[L+R-b]+256&255}else if(A==0){for(R=0;R<b;R++)T[F+R]=w[L+R];if(D==2)for(R=b;R<P;R++)T[F+R]=w[L+R];if(D==3)for(R=b;R<P;R++)T[F+R]=w[L+R]-(w[L+R-b]>>1)+256&255;if(D==4)for(R=b;R<P;R++)T[F+R]=w[L+R]-n(w[L+R-b],0,0)+256&255}else{if(D==2)for(R=0;R<P;R++)T[F+R]=w[L+R]+256-w[L+R-P]&255;if(D==3){for(R=0;R<b;R++)T[F+R]=w[L+R]+256-(w[L+R-P]>>1)&255;for(R=b;R<P;R++)T[F+R]=w[L+R]+256-(w[L+R-P]+w[L+R-b]>>1)&255}if(D==4){for(R=0;R<b;R++)T[F+R]=w[L+R]+256-n(0,w[L+R-P],0)&255;for(R=b;R<P;R++)T[F+R]=w[L+R]+256-n(w[L+R-b],w[L+R-P],w[L+R-b-P])&255}}}function _(T,w){const A=new Uint8Array(T),P=A.slice(0),b=new Uint32Array(P.buffer),D=x(P,w),L=D[0],F=D[1],R=A.length,S=new Uint8Array(R>>2);let M;if(A.length<2e7)for(var O=0;O<R;O+=4)M=m(L,j=A[O]*(1/255),H=A[O+1]*(1/255),$=A[O+2]*(1/255),Y=A[O+3]*(1/255)),S[O>>2]=M.ind,b[O>>2]=M.est.rgba;else for(O=0;O<R;O+=4){var j=A[O]*.00392156862745098,H=A[O+1]*(1/255),$=A[O+2]*(1/255),Y=A[O+3]*(1/255);for(M=L;M.left;)M=v(M.est,j,H,$,Y)<=0?M.left:M.right;S[O>>2]=M.ind,b[O>>2]=M.est.rgba}return{abuf:P.buffer,inds:S,plte:F}}function x(T,w,A){A==null&&(A=1e-4);const P=new Uint32Array(T.buffer),b={i0:0,i1:T.length,bst:null,est:null,tdst:0,left:null,right:null};b.bst=N(T,b.i0,b.i1),b.est=E(b.bst);const D=[b];for(;D.length<w;){let F=0,R=0;for(var L=0;L<D.length;L++)D[L].est.L>F&&(F=D[L].est.L,R=L);if(F<A)break;const S=D[R],M=y(T,P,S.i0,S.i1,S.est.e,S.est.eMq255);if(S.i0>=M||S.i1<=M){S.est.L=0;continue}const O={i0:S.i0,i1:M,bst:null,est:null,tdst:0,left:null,right:null};O.bst=N(T,O.i0,O.i1),O.est=E(O.bst);const j={i0:M,i1:S.i1,bst:null,est:null,tdst:0,left:null,right:null};for(j.bst={R:[],m:[],N:S.bst.N-O.bst.N},L=0;L<16;L++)j.bst.R[L]=S.bst.R[L]-O.bst.R[L];for(L=0;L<4;L++)j.bst.m[L]=S.bst.m[L]-O.bst.m[L];j.est=E(j.bst),S.left=O,S.right=j,D[R]=O,D.push(j)}for(D.sort((F,R)=>R.bst.N-F.bst.N),L=0;L<D.length;L++)D[L].ind=L;return[b,D]}function m(T,w,A,P,b){if(T.left==null)return T.tdst=function(O,j,H,$,Y){const B=j-O[0],V=H-O[1],ee=$-O[2],pe=Y-O[3];return B*B+V*V+ee*ee+pe*pe}(T.est.q,w,A,P,b),T;const D=v(T.est,w,A,P,b);let L=T.left,F=T.right;D>0&&(L=T.right,F=T.left);const R=m(L,w,A,P,b);if(R.tdst<=D*D)return R;const S=m(F,w,A,P,b);return S.tdst<R.tdst?S:R}function v(T,w,A,P,b){const{e:D}=T;return D[0]*w+D[1]*A+D[2]*P+D[3]*b-T.eMq}function y(T,w,A,P,b,D){for(P-=4;A<P;){for(;C(T,A,b)<=D;)A+=4;for(;C(T,P,b)>D;)P-=4;if(A>=P)break;const L=w[A>>2];w[A>>2]=w[P>>2],w[P>>2]=L,A+=4,P-=4}for(;C(T,A,b)>D;)A-=4;return A+4}function C(T,w,A){return T[w]*A[0]+T[w+1]*A[1]+T[w+2]*A[2]+T[w+3]*A[3]}function N(T,w,A){const P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=[0,0,0,0],D=A-w>>2;for(let L=w;L<A;L+=4){const F=T[L]*.00392156862745098,R=T[L+1]*(1/255),S=T[L+2]*(1/255),M=T[L+3]*(1/255);b[0]+=F,b[1]+=R,b[2]+=S,b[3]+=M,P[0]+=F*F,P[1]+=F*R,P[2]+=F*S,P[3]+=F*M,P[5]+=R*R,P[6]+=R*S,P[7]+=R*M,P[10]+=S*S,P[11]+=S*M,P[15]+=M*M}return P[4]=P[1],P[8]=P[2],P[9]=P[6],P[12]=P[3],P[13]=P[7],P[14]=P[11],{R:P,m:b,N:D}}function E(T){const{R:w}=T,{m:A}=T,{N:P}=T,b=A[0],D=A[1],L=A[2],F=A[3],R=P==0?0:1/P,S=[w[0]-b*b*R,w[1]-b*D*R,w[2]-b*L*R,w[3]-b*F*R,w[4]-D*b*R,w[5]-D*D*R,w[6]-D*L*R,w[7]-D*F*R,w[8]-L*b*R,w[9]-L*D*R,w[10]-L*L*R,w[11]-L*F*R,w[12]-F*b*R,w[13]-F*D*R,w[14]-F*L*R,w[15]-F*F*R],M=S,O=k;let j=[Math.random(),Math.random(),Math.random(),Math.random()],H=0,$=0;if(P!=0)for(let B=0;B<16&&(j=O.multVec(M,j),$=Math.sqrt(O.dot(j,j)),j=O.sml(1/$,j),!(B!=0&&Math.abs($-H)<1e-9));B++)H=$;const Y=[b*R,D*R,L*R,F*R];return{Cov:S,q:Y,e:j,L:H,eMq255:O.dot(O.sml(255,Y),j),eMq:O.dot(j,Y),rgba:(Math.round(255*Y[3])<<24|Math.round(255*Y[2])<<16|Math.round(255*Y[1])<<8|Math.round(255*Y[0])<<0)>>>0}}var k={multVec:(T,w)=>[T[0]*w[0]+T[1]*w[1]+T[2]*w[2]+T[3]*w[3],T[4]*w[0]+T[5]*w[1]+T[6]*w[2]+T[7]*w[3],T[8]*w[0]+T[9]*w[1]+T[10]*w[2]+T[11]*w[3],T[12]*w[0]+T[13]*w[1]+T[14]*w[2]+T[15]*w[3]],dot:(T,w)=>T[0]*w[0]+T[1]*w[1]+T[2]*w[2]+T[3]*w[3],sml:(T,w)=>[T*w[0],T*w[1],T*w[2],T*w[3]]};Gn.encode=function(w,A,P,b,D,L,F){b==null&&(b=0),F==null&&(F=!1);const R=u(w,A,P,b,[!1,!1,!1,0,F,!1]);return c(R,-1),l(R,A,P,D,L)},Gn.encodeLL=function(w,A,P,b,D,L,F,R){const S={ctype:0+(b==1?0:2)+(D==0?0:4),depth:L,frames:[]},M=(b+D)*L,O=M*A;for(let j=0;j<w.length;j++)S.frames.push({rect:{x:0,y:0,width:A,height:P},img:new Uint8Array(w[j]),blend:0,dispose:1,bpp:Math.ceil(M/8),bpl:Math.ceil(O/8)});return c(S,0,!0),l(S,A,P,F,R)},Gn.encode.compress=u,Gn.encode.dither=a,Gn.quantize=_,Gn.quantize.getKDtree=x,Gn.quantize.getNearest=m})();const CC={toArrayBuffer(t,e){const n=t.width,r=t.height,s=n<<2,i=t.getContext("2d").getImageData(0,0,n,r),o=new Uint32Array(i.data.buffer),a=(32*n+31)/32<<2,l=a*r,c=122+l,u=new ArrayBuffer(c),h=new DataView(u),d=1<<20;let p,g,_,x,m=d,v=0,y=0,C=0;function N(T){h.setUint16(y,T,!0),y+=2}function E(T){h.setUint32(y,T,!0),y+=4}function k(T){y+=T}N(19778),E(c),k(4),E(122),E(108),E(n),E(-r>>>0),N(1),N(32),E(3),E(l),E(2835),E(2835),k(8),E(16711680),E(65280),E(255),E(4278190080),E(1466527264),function T(){for(;v<r&&m>0;){for(x=122+v*a,p=0;p<s;)m--,g=o[C++],_=g>>>24,h.setUint32(x+p,g<<8|_),p+=4;v++}C<o.length?(m=d,setTimeout(T,CC._dly)):e(u)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var rn={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},iF={[rn.CHROME]:16384,[rn.FIREFOX]:11180,[rn.DESKTOP_SAFARI]:16384,[rn.IE]:8192,[rn.IOS]:4096,[rn.ETC]:8192};const _1=typeof window<"u",IC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Zh=_1&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),oF=(_1||IC)&&(Zh&&Zh.getOriginalSymbol(window,"File")||typeof File<"u"&&File),SC=(_1||IC)&&(Zh&&Zh.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function v1(t,e,n=Date.now()){return new Promise(r=>{const s=t.split(","),i=s[0].match(/:(.*?);/)[1],o=globalThis.atob(s[1]);let a=o.length;const l=new Uint8Array(a);for(;a--;)l[a]=o.charCodeAt(a);const c=new Blob([l],{type:i});c.name=e,c.lastModified=n,r(c)})}function AC(t){return new Promise((e,n)=>{const r=new SC;r.onload=()=>e(r.result),r.onerror=s=>n(s),r.readAsDataURL(t)})}function RC(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=s=>n(s),r.src=t})}function wi(){if(wi.cachedResult!==void 0)return wi.cachedResult;let t=rn.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=rn.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=rn.IOS:/Safari/i.test(e)?t=rn.DESKTOP_SAFARI:/Firefox/i.test(e)?t=rn.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=rn.IE),wi.cachedResult=t,wi.cachedResult}function kC(t,e){const n=wi(),r=iF[n];let s=t,i=e,o=s*i;const a=s>i?i/s:s/i;for(;o>r*r;){const l=(r+s)/2,c=(r+i)/2;l<c?(i=c,s=c*a):(i=l*a,s=l),o=s*i}return{width:s,height:i}}function y0(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function NC(t,e){const{width:n,height:r}=kC(t.width,t.height),[s,i]=y0(n,r);return e&&/jpe?g/.test(e)&&(i.fillStyle="white",i.fillRect(0,0,s.width,s.height)),i.drawImage(t,0,0,s.width,s.height),s}function Bu(){return Bu.cachedResult!==void 0||(Bu.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Bu.cachedResult}function ed(t,e={}){return new Promise(function(n,r){let s,i;var o=function(){try{return i=NC(s,e.fileType||t.type),n([s,i])}catch(l){return r(l)}},a=function(l){try{var c=function(u){try{throw u}catch(h){return r(h)}};try{let u;return AC(t).then(function(h){try{return u=h,RC(u).then(function(d){try{return s=d,function(){try{return o()}catch(p){return r(p)}}()}catch(p){return c(p)}},c)}catch(d){return c(d)}},c)}catch(u){c(u)}}catch(u){return r(u)}};try{if(Bu()||[rn.DESKTOP_SAFARI,rn.MOBILE_SAFARI].includes(wi()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return s=l,o()}catch{return a()}},a)}catch{a()}})}function td(t,e,n,r,s=1){return new Promise(function(i,o){let a;if(e==="image/png"){let h,d,p;return h=t.getContext("2d"),{data:d}=h.getImageData(0,0,t.width,t.height),p=Gn.encode([d.buffer],t.width,t.height,4096*s),a=new Blob([p],{type:e}),a.name=n,a.lastModified=r,l.call(this)}{let h=function(){return l.call(this)};var c=h;if(e==="image/bmp")return new Promise(d=>CC.toBlob(t,d)).then((function(d){try{return a=d,a.name=n,a.lastModified=r,h.call(this)}catch(p){return o(p)}}).bind(this),o);{let d=function(){return h.call(this)};var u=d;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:s}).then((function(p){try{return a=p,a.name=n,a.lastModified=r,d.call(this)}catch(g){return o(g)}}).bind(this),o);{let p;return p=t.toDataURL(e,s),v1(p,n,r).then((function(g){try{return a=g,d.call(this)}catch(_){return o(_)}}).bind(this),o)}}}function l(){return i(a)}})}function cr(t){t.width=0,t.height=0}function So(){return new Promise(function(t,e){let n,r,s,i;return So.cachedResult!==void 0?t(So.cachedResult):v1("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return n=o,ed(n).then(function(a){try{return r=a[1],td(r,n.type,n.name,n.lastModified).then(function(l){try{return s=l,cr(r),ed(s).then(function(c){try{return i=c[0],So.cachedResult=i.width===1&&i.height===2,t(So.cachedResult)}catch(u){return e(u)}},e)}catch(c){return e(c)}},e)}catch(l){return e(l)}},e)}catch(a){return e(a)}},e)})}function bC(t){return new Promise((e,n)=>{const r=new SC;r.onload=s=>{const i=new DataView(s.target.result);if(i.getUint16(0,!1)!=65496)return e(-2);const o=i.byteLength;let a=2;for(;a<o;){if(i.getUint16(a+2,!1)<=8)return e(-1);const l=i.getUint16(a,!1);if(a+=2,l==65505){if(i.getUint32(a+=2,!1)!=1165519206)return e(-1);const c=i.getUint16(a+=6,!1)==18761;a+=i.getUint32(a+4,c);const u=i.getUint16(a,c);a+=2;for(let h=0;h<u;h++)if(i.getUint16(a+12*h,c)==274)return e(i.getUint16(a+12*h+8,c))}else{if((65280&l)!=65280)break;a+=i.getUint16(a,!1)}}return e(-1)},r.onerror=s=>n(s),r.readAsArrayBuffer(t)})}function PC(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:s}=e;let i,o=t;return isFinite(s)&&(n>s||r>s)&&([o,i]=y0(n,r),n>r?(o.width=s,o.height=r/n*s):(o.width=n/r*s,o.height=s),i.drawImage(t,0,0,o.width,o.height),cr(t)),o}function LC(t,e){const{width:n}=t,{height:r}=t,[s,i]=y0(n,r);switch(e>4&&e<9?(s.width=r,s.height=n):(s.width=n,s.height=r),e){case 2:i.transform(-1,0,0,1,n,0);break;case 3:i.transform(-1,0,0,-1,n,r);break;case 4:i.transform(1,0,0,-1,0,r);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,r,0);break;case 7:i.transform(0,-1,-1,0,r,n);break;case 8:i.transform(0,-1,1,0,0,n)}return i.drawImage(t,0,0,n,r),cr(t),s}function nw(t,e,n=0){return new Promise(function(r,s){let i,o,a,l,c,u,h,d,p,g,_,x,m,v,y,C,N,E,k,T;function w(P=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;i+=P,e.onProgress(Math.min(i,100))}function A(P){if(e.signal&&e.signal.aborted)throw e.signal.reason;i=Math.min(Math.max(P,i),100),e.onProgress(i)}return i=n,o=e.maxIteration||10,a=1024*e.maxSizeMB*1024,w(),ed(t,e).then((function(P){try{return[,l]=P,w(),c=PC(l,e),w(),new Promise(function(b,D){var L;if(!(L=e.exifOrientation))return bC(t).then((function(R){try{return L=R,F.call(this)}catch(S){return D(S)}}).bind(this),D);function F(){return b(L)}return F.call(this)}).then((function(b){try{return u=b,w(),So().then((function(D){try{return h=D?c:LC(c,u),w(),d=e.initialQuality||1,p=e.fileType||t.type,td(h,p,t.name,t.lastModified,d).then((function(L){try{{let M=function(){if(o--&&(y>a||y>m)){let j,H;return j=T?.95*k.width:k.width,H=T?.95*k.height:k.height,[N,E]=y0(j,H),E.drawImage(k,0,0,j,H),d*=p==="image/png"?.85:.95,td(N,p,t.name,t.lastModified,d).then(function($){try{return C=$,cr(k),k=N,y=C.size,A(Math.min(99,Math.floor((v-y)/(v-a)*100))),M}catch(Y){return s(Y)}},s)}return[1]},O=function(){return cr(k),cr(N),cr(c),cr(h),cr(l),A(100),r(C)};var R=M,S=O;if(g=L,w(),_=g.size>a,x=g.size>t.size,!_&&!x)return A(100),r(g);var F;return m=t.size,v=g.size,y=v,k=h,T=!e.alwaysKeepResolution&&_,(F=(function(j){for(;j;){if(j.then)return void j.then(F,s);try{if(j.pop){if(j.length)return j.pop()?O.call(this):j;j=M}else j=j.call(this)}catch(H){return s(H)}}}).bind(this))(M)}}catch(M){return s(M)}}).bind(this),s)}catch(L){return s(L)}}).bind(this),s)}catch(D){return s(D)}}).bind(this),s)}catch(b){return s(b)}}).bind(this),s)})}const aF=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let If;function lF(t,e){return new Promise((n,r)=>{If||(If=function(o){const a=[];return typeof o=="function"?a.push(`(${o})()`):a.push(o),URL.createObjectURL(new Blob(a))}(aF));const s=new Worker(If);s.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)s.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void s.terminate();n(o.data.file),s.terminate()}else e.onProgress(o.data.progress)}),s.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),s.terminate()}),s.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function dt(t,e){return new Promise(function(n,r){let s,i,o,a,l,c;if(s={...e},o=0,{onProgress:a}=s,s.maxSizeMB=s.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof s.useWebWorker!="boolean"||s.useWebWorker,delete s.useWebWorker,s.onProgress=p=>{o=p,typeof a=="function"&&a(o)},!(t instanceof Blob||t instanceof oF))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(c=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||c)return nw(t,s).then((function(p){try{return i=p,d.call(this)}catch(g){return r(g)}}).bind(this),r);var u=(function(){try{return d.call(this)}catch(p){return r(p)}}).bind(this),h=function(p){try{return nw(t,s).then(function(g){try{return i=g,u()}catch(_){return r(_)}},r)}catch(g){return r(g)}};try{return s.libURL=s.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",lF(t,s).then(function(p){try{return i=p,u()}catch{return h()}},h)}catch{h()}function d(){try{i.name=t.name,i.lastModified=t.lastModified}catch{}try{s.preserveExif&&t.type==="image/jpeg"&&(!s.fileType||s.fileType&&s.fileType===t.type)&&(i=TC(t,i))}catch{}return n(i)}})}dt.getDataUrlFromFile=AC,dt.getFilefromDataUrl=v1,dt.loadImage=RC,dt.drawImageInCanvas=NC,dt.drawFileInCanvas=ed,dt.canvasToFile=td,dt.getExifOrientation=bC,dt.handleMaxWidthOrHeight=PC,dt.followExifOrientation=LC,dt.cleanupCanvasMemory=cr,dt.isAutoOrientationInBrowser=So,dt.approximateBelowMaximumCanvasSizeOfBrowser=kC,dt.copyExifWithoutOrientation=TC,dt.getBrowserName=wi,dt.version="2.0.2";const cF=()=>{const{userData:t,refreshUserData:e,theme:n,setTheme:r,isOnline:s}=I.useContext(Z),[i,o]=I.useState(t.name||""),[a,l]=I.useState(null),[c,u]=I.useState(!1),h=I.useRef(null),[d,p]=I.useState(null),g=async()=>{var y;if(i.trim())try{const C=we(Ce,"users",(y=ne==null?void 0:ne.currentUser)==null?void 0:y.uid),N={name:i.trim()};await En(C,N),e(),v("Updated name successfully!")}catch(C){v(C.message)}};qi(h,u),I.useEffect(()=>{o(t.name)},[t]);const _=async()=>{const y=await dt(a,{maxSizeMB:.3,maxWidthOrHeight:300,useWebWorker:!0}),C=_i(yi,`profile/${t.uid}/${t.name}-${a.name}`);try{const N=we(Ce,"users",t.uid);v("Uploading image...");const E=await $h(C,y),T={image:await zh(E.ref)};await En(N,T),l(null),v("Updated profile picture successfully!")}catch(N){v(N.message)}},x=()=>{a&&_(),i.trim()!==t.name&&g()};let m;const v=(y,C=3e3)=>{clearTimeout(m),p(y),m=setTimeout(()=>{p(null)},C)};return f.jsxs("div",{className:"Settings p-2",children:[f.jsx(ir,{}),f.jsxs("div",{className:"p-2",children:[f.jsxs("div",{className:"relative size-20",children:[f.jsx(ns,{name:t.name||i||"User",image:a?URL.createObjectURL(a):t.image,size:"size-full",fontSize:"text-3xl"}),f.jsx("input",{type:"file",accept:"image/*",id:"imageInput",className:"hidden",onChange:y=>l(y.target.files[0])}),f.jsx("label",{htmlFor:"imageInput",className:` p-1 rounded-full absolute -bottom-1 -right-1 cursor-pointer ${n==="light"?"bg-gray-200":"bg-slate-500/70"}`,children:f.jsx("img",{className:"w-5",src:he("edit")})})]}),f.jsxs("div",{className:`${n==="light"?"":"text-white"}`,children:["Hi, ",kr(t.name||i||"User",25),"!"]})]}),f.jsxs("div",{className:`grid gap-y-2 border  p-2 rounded-md ${n==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[f.jsxs("div",{children:[f.jsx("div",{children:"Name"}),f.jsxs("div",{ref:h,className:"flex gap-x-2 items-center",children:[!c&&f.jsx("div",{children:i||t.name||"User"}),c&&f.jsx("input",{autoFocus:!0,value:i,onChange:y=>o(y.target.value),className:` ${n==="light"?"focus:outline-blue-500":"bg-slate-500/70 outline-none"}`,placeholder:"Enter your full name"}),f.jsx("button",{onClick:()=>{u(!c)},className:` p-1 rounded-full cursor-pointer ${n==="light"?"bg-gray-200":"bg-slate-500/70"}`,children:f.jsx("img",{className:"w-5",src:he(c?"save":"edit")})})]})]}),f.jsxs("div",{children:[f.jsx("div",{children:"Email"}),f.jsx("div",{children:t.email||"example@gmail.com"})]})]}),f.jsx("div",{className:"flex gap-x-2 mt-2",children:a||i.trim()!==t.name?f.jsx(xe,{data:{clickFn:()=>{x()},image:"save",text:"Update"}}):""}),d&&f.jsx(Xh,{message:d}),f.jsx("div",{className:`mt-4 ${n==="light"?"":"text-white"} md:hidden`,children:f.jsx(EC,{setTheme:r,theme:n})})]})},nd=({data:t})=>{const{text:e,onChangeFn:n,value:r,placeholder:s}=t,{theme:i}=I.useContext(Z);return f.jsxs("div",{className:"grid items-center gap-y-2",children:[f.jsx("div",{className:"font-medium",children:e}),f.jsx("input",{onChange:n,value:r,className:`border rounded-md h-10 pl-1 pr-1  w-full outline-2  ${i==="light"?"focus:outline-blue-300 border-gray-300":"border-slate-500/70 outline-none bg-slate-500/70"}`,placeholder:s})]})},uF=({data:t})=>{const{close:e}=t,{theme:n}=I.useContext(Z),[r,s]=I.useState(""),[i,o]=I.useState(""),a=r.trim(),l=Nt(Ce,"tests"),c=async d=>{try{await xa(l,d)}catch(p){console.log(p.message)}},u=()=>{const d={uid:ne.currentUser.uid,isUploaded:!1,name:r,description:i,quizzes:[],gradingRules:[],time:_n()};c(d),e()},h=()=>{a&&u()};return I.useEffect(()=>(Cn("hidden"),()=>{Cn("auto")}),[]),f.jsx("div",{className:"fixed flex items-center z-20 bg-black/60 justify-center top-0 left-0 right-0 bottom-0",children:f.jsxs("div",{className:`border w-4/5 sm:w-4/5 md:w-3/5 lg:w-2/5 rounded-md p-10 pb-5 grid gap-y-5 ${n==="light"?"bg-white border-gray-300":"bg-slate-600 border-slate-500/70 text-white"}`,children:[f.jsxs("div",{className:"grid gap-y-2",children:[f.jsx(nd,{data:{text:"Name",onChangeFn:d=>s(d.target.value),value:r,placeholder:"Type test name here"}}),f.jsx(nd,{data:{text:"Description",onChangeFn:d=>o(d.target.value),value:i,placeholder:"Type description here"}})]}),f.jsxs("div",{className:"flex items-center gap-x-3 justify-center",children:[f.jsx(xe,{data:{clickFn:h,text:"Save",image:"save"}}),f.jsx(xe,{data:{clickFn:e,text:"Cancel"}})]})]})})},hF=({data:t})=>{const{options:e,value:n,setValue:r}=t,{theme:s}=I.useContext(Z),[i,o]=I.useState(!1),a=I.useRef(null);qi(a,o);const l=()=>{o(!i)},c=u=>{r(u)};return f.jsxs("div",{ref:a,className:"w-full relative font-padauk",children:[f.jsxs("button",{onClick:l,className:`border flex items-center rounded-lg justify-between h-10 w-full cursor-pointer hover:border-blue-500 shadow-sm gap-x-2 px-2 ${s==="light"?"border-gray-300 hover:bg-gray-50":"hover:bg-slate-500/70 text-white border-slate-500/70"}`,children:[f.jsx("span",{children:n||"Select correct answer"}),f.jsx("img",{className:"h-6 w-6",src:he(i?"up":"down")})]}),i&&e.length!==0?f.jsx("div",{className:`absolute grid gap-y-1 min-w-full p-2 rounded-md border -top-40 ${s==="light"?"border-gray-200 bg-white":"text-white bg-slate-500/70 border-slate-500/70"}`,children:e.map(u=>f.jsx("div",{onClick:()=>{l(),c(u)},className:`p-1 cursor-pointer rounded-lg transition-all ${s==="light"?`${u===n?"bg-black font-medium text-white ":"hover:bg-gray-200"}`:`${u===n?"bg-slate-600 font-medium text-white ":"hover:bg-slate-600"}`}`,children:u},`choice-${u}`))}):""]})},gs=({data:t})=>{const{choice:e,handleFn:n,value:r,placeholder:s}=t,{theme:i}=I.useContext(Z);return f.jsxs("div",{className:"grid gap-y-2 font-padauk",children:[f.jsx("div",{className:`font-medium ${i==="light"?"":"text-white"}`,children:e}),f.jsx("input",{onChange:o=>n(e,o),value:r,className:` w-full border rounded-md h-10 pl-1 pr-1  ${i==="light"?"focus:outline-blue-500 border-gray-300":"text-white outline-none border-slate-500/70 bg-slate-600"}`,placeholder:s})]})},dF=({data:t})=>{const{cancel:e,quizzes:n,setQuizzes:r,editData:s,clearEditData:i}=t,{theme:o}=I.useContext(Z),[a,l]=I.useState(s?s.question:""),[c,u]=I.useState(s?s.choices[0]:""),[h,d]=I.useState(s?s.choices[1]:""),[p,g]=I.useState(s?s.choices[2]:""),[_,x]=I.useState(s?s.choices[3]:""),[m,v]=I.useState(s?s.answer:"");let y=[];const C=c.trim()&&h.trim()&&p.trim()&&_.trim(),N=a.trim()&&c.trim()&&h.trim()&&p.trim()&&_.trim()&&m.trim();C&&(y=[c,h,p,_]);const E=(b,D)=>{b.toLowerCase()==="question"?l(D.target.value):v(D.target.value)},k=()=>{let b,D;N&&(b={id:n.length===0?1:n[n.length-1].id+1,question:a,choices:y,answer:m},D=[...n,b],r(D),fl(),e())},T=()=>{const b=s.id,D={id:b,question:a,choices:y,answer:m},L=n.map(F=>b===F.id?D:F);r(L),e(),i()},w=(b,D)=>{b.toLowerCase()==="choice 1"?u(D.target.value):b.toLowerCase()==="choice 2"?d(D.target.value):b.toLowerCase()==="choice 3"?g(D.target.value):x(D.target.value)},A=()=>{s?T():k()},P=()=>{e(),i()};return I.useEffect(()=>(Cn("hidden"),()=>{Cn("auto")}),[]),f.jsx("div",{className:"fixed flex items-center z-20 bg-black/60 justify-center top-0 left-0 right-0 bottom-0",children:f.jsxs("div",{className:`border w-5/6 sm:w-4/5 md:w-3/5 lg:w-2/5 grid gap-y-2  p-3  top-0 left-0 right-0 bottom-0 rounded-lg relative ${o==="light"?"bg-white border-gray-200":"text-white border-slate-500/70 bg-slate-600"}`,children:[f.jsx("div",{className:`top-1 shadow-md border rounded-full right-1 h-9 w-9 text-white font-medium flex justify-center absolute items-center ${o==="light"?"bg-black border-gray-200":"bg-slate-500/70 border-slate-600"}`,children:s?s.number:n.length+1}),f.jsxs("div",{className:"grid gap-y-2",children:[f.jsx(gs,{data:{handleFn:E,value:a,choice:"Question",placeholder:"Enter question"}}),f.jsx(gs,{data:{handleFn:w,value:c,choice:"Choice 1",placeholder:"Enter choice 1"}}),f.jsx(gs,{data:{handleFn:w,value:h,choice:"Choice 2",placeholder:"Enter choice 2"}}),f.jsx(gs,{data:{handleFn:w,value:p,choice:"Choice 3",placeholder:"Enter choice 3"}}),f.jsx(gs,{data:{handleFn:w,value:_,choice:"Choice 4",placeholder:"Enter choice 4"}}),f.jsxs("div",{className:"flex items-center gap-x-5",children:[f.jsx("div",{className:"font-medium",children:"Answer"}),f.jsx(hF,{data:{options:y,value:m,setValue:v}})]})]}),f.jsxs("div",{className:"flex justify-end gap-x-2",children:[f.jsx(xe,{data:{clickFn:A,text:"Save",image:"save"}}),f.jsx(xe,{data:{clickFn:P,text:"Cancel"}})]})]})})},fF=({data:t})=>{const{theme:e}=I.useContext(Z),{testName:n,numbers:r,changePage:s}=t;return f.jsx("div",{className:`text-lg p-1 font-medium sticky top-0 z-10 flex justify-between items-center ${e==="light"?"":"text-white"}`,children:f.jsxs("div",{className:"flex items-center gap-x-2",children:[f.jsx(Re,{data:{clickFn:()=>s("test"),image:"back"}}),f.jsxs("div",{children:[n,f.jsxs("span",{className:"text-sm",children:["  "," ",r," ",r>1?"questions":"question"]})]})]})})},pF=({data:t})=>{const{quizzes:e,editQuestion:n,askToDelete:r,add:s,changePage:i}=t,{theme:o}=I.useContext(Z);return f.jsxs("div",{className:"grid gap-y-2",children:[f.jsx("div",{className:`pl-1 font-medium ${o==="light"?"":"text-white"}`,children:"Questions"}),e.map((a,l)=>f.jsxs("div",{className:`border font-padauk p-2 relative ${o==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[f.jsxs("div",{className:"absolute bottom-2 right-2 flex items-center gap-x-2",children:[f.jsx(Re,{data:{clickFn:()=>n(a,l),image:"edit"}}),f.jsx(Re,{data:{clickFn:()=>r(a.id),image:"trash"}})]}),f.jsxs("div",{className:"flex items-center justify-between gap-x-2",children:[f.jsx("div",{className:"overflow-x-auto p-0.5 flex-1",children:a.question}),f.jsx("div",{className:`top-0 shadow-md border rounded-full right-1 h-9 w-9 text-white font-medium flex justify-center absolute items-center ${o==="light"?"bg-black border-gray-200":"bg-slate-500/70 border-slate-600"}`,children:l+1})]}),f.jsx("div",{className:"pl-2 pt-2 grid gap-y-1",children:a.choices.map((c,u)=>f.jsxs("div",{className:"flex gap-x-2",children:[f.jsx("div",{className:`w-8 flex h-8 items-center  justify-center text-white font-medium rounded-md ${o==="light"?"bg-black":"bg-slate-500/70"}`,children:u+1}),f.jsx("div",{className:"flex-1",children:c})]},`choice-${l}-${u}`))})]},`question-${l}`)),f.jsx("div",{className:"flex justify-center sticky bottom-5",children:f.jsx(Re,{data:{clickFn:s,image:"add"}})})]})},mF=({data:t})=>{const{currentTest:e,setCurrentTest:n,setIsRulesAdding:r,setEditData:s}=t,{theme:i}=I.useContext(Z),{gradingRules:o}=e,[a,l]=I.useState(null),c=g=>{const _=o.filter(m=>m.id!==g),x={...e,gradingRules:_};n(x)},u=g=>{l(g)},h=g=>{s(g),r(!0)},d=()=>{c(a),l(null)},p=()=>{l(null)};return f.jsxs("div",{className:"grid gap-y-3",children:[f.jsx("div",{className:`pl-1 font-medium ${i==="light"?"":"text-white"}`,children:"Grading Rules"}),a&&f.jsx(Pi,{data:{yesButton:d,noButton:p,text:"Are you sure to delete?"}}),o.map((g,_)=>f.jsxs("div",{className:`flex font-padauk items-center justify-between border  p-2 ${i==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[f.jsxs("div",{className:"grid flex-1 grid-cols-3 justify-between mr-10",children:[f.jsx(Sf,{data:{text:"From",value:g.from}}),f.jsx(Sf,{data:{text:"To",value:g.to}}),f.jsx(Sf,{data:{text:"Level",value:g.level}})]}),f.jsxs("div",{className:"flex items-center gap-x-1 h-full ",children:[f.jsx(Re,{data:{clickFn:()=>h(g),image:"edit"}}),f.jsx(Re,{data:{clickFn:()=>u(g.id),image:"trash"}})]})]},`rule-${_}-${g.from}-${g.to}-${g.level}`)),f.jsx("div",{className:"flex justify-center sticky bottom-5",children:f.jsx(Re,{data:{clickFn:()=>r(!0),image:"add"}})})]})},Sf=({data:t})=>{const{text:e,value:n}=t,{theme:r}=I.useContext(Z);return f.jsxs("div",{className:"grid gap-y-1",children:[f.jsx("div",{className:"font-medium",children:e}),f.jsx("div",{className:`font-medium max-h-10 ${r==="light"?"text-slate-600":"text-white"}`,children:typeof n=="string"?kr(n,15):n})]})},gF=({data:t})=>{const{currentTest:e,setCurrentTest:n,editData:r,setEditData:s,setIsRulesAdding:i}=t,{theme:o}=I.useContext(Z),{gradingRules:a}=e,[l,c]=I.useState(r?r.from:null),[u,h]=I.useState(r?r.to:null),[d,p]=I.useState(r?r.level:""),g=l&&u&&d.trim(),_=()=>{const C={id:a.length===0?1:a[a.length-1].id+1,from:Number(l),to:Number(u),level:d},N={...e,gradingRules:[...a,C]};n(N)},x=()=>{const C=r.id,N={id:C,from:Number(l),to:Number(u),level:d},E=a.map(T=>C===T.id?N:T),k={...e,gradingRules:E};n(k)},m=()=>{i(!1),s(null)},v=()=>{g&&(r?x():_(),m())},y=(C,N)=>{const E=N.target.value;C.toLowerCase()==="from"?c(E):C.toLowerCase()==="to"?h(E):p(E)};return I.useEffect(()=>(Cn("hidden"),()=>{Cn("auto")}),[]),f.jsx("div",{className:"fixed z-20 bg-black/50 top-0 right-0 left-0 bottom-0 flex justify-center items-center",children:f.jsxs("div",{className:`border w-5/6 sm:w-4/5 md:w-3/5 lg:w-2/5 grid gap-y-2 p-3  top-0 left-0 right-0 bottom-0 rounded-lg relative ${o==="light"?"border-gray-200 bg-white":"text-white bg-slate-600 border-slate-500/70"}`,children:[f.jsx(gs,{data:{handleFn:y,value:l!==null?l:"",choice:"From",placeholder:"Enter 'from' value"}}),f.jsx(gs,{data:{handleFn:y,value:u!==null?u:"",choice:"To",placeholder:"Enter 'to' value"}}),f.jsx(gs,{data:{handleFn:y,value:d,choice:"Level",placeholder:"Enter level"}}),f.jsxs("div",{className:"flex justify-end gap-x-2",children:[f.jsx(xe,{data:{clickFn:v,text:"Save",image:"save"}}),f.jsx(xe,{data:{clickFn:m,text:"Cancel"}})]})]})})},rw=({data:t})=>{const{currentTest:e,setCurrentTest:n,title:r}=t,{theme:s}=I.useContext(Z),{description:i,name:o}=e,[a,l]=I.useState(r==="Description"?i:o),[c,u]=I.useState(!1),h=_=>{l(_.target.value)},d=()=>{if(r==="Description"){const _={...e,description:a};n(_)}else{const _={...e,name:a};n(_)}},p=()=>{d(),u(!1)},g=()=>{u(!1),l(r==="Description"?i:o)};return f.jsxs("div",{className:"grid gap-y-2",children:[f.jsx("div",{className:`font-medium ${s==="light"?"":"text-white"}`,children:r}),c?f.jsx("textarea",{autoFocus:!0,placeholder:`Type ${r.toLowerCase()} here`,onChange:h,className:`p-1 border border-gray-200 outline-none ${s==="light"?"":"text-white bg-slate-600"}`,value:a}):f.jsx("div",{className:`text-gray-500 p-1 ${s==="light"?"":"text-white"}`,children:a||"No description"}),c?f.jsxs("div",{className:"flex gap-x-2",children:[f.jsx(Re,{data:{clickFn:p,image:"save"}}),f.jsx(Re,{data:{clickFn:g,image:"falseIcon"}})]}):f.jsx(Re,{data:{clickFn:()=>u(!0),image:"edit"}})]})},_F=({data:t})=>{const{setHeaderTitle:e}=I.useContext(Z),{setPage:n,currentTest:r,setCurrentTest:s}=t,[i,o]=I.useState(!1),[a,l]=I.useState(!1),[c,u]=I.useState(r.quizzes),[h,d]=I.useState(null),[p,g]=I.useState(null);I.useEffect(()=>{e(r.name)});const _=async(b,D)=>{try{const L=we(Ce,"tests",b);await En(L,D)}catch(L){console.log(L.message)}};I.useEffect(()=>{x()},[r,c]);const x=()=>{_(r.id,{...r,quizzes:c})},m=()=>{o(!0)},v=()=>{o(!1),g(null)},y=b=>{g(b)},C=()=>{k(p),g(null)},N=()=>{g(null)},E=b=>{n(b)},k=b=>{const D=c.filter(L=>L.id!==b);u(D)},T=(b,D)=>{const L={...b,number:D+1};d(L),m()},w=()=>{d(null)},A={testName:r.name,numbers:c.length,changePage:E},P={quizzes:c,editQuestion:T,askToDelete:y,add:m};return f.jsxs("div",{className:"grid gap-y-2 z-65 p-5",children:[f.jsx(fF,{data:A}),f.jsx(Io,{}),f.jsx(rw,{data:{title:"Test Name",currentTest:r,setCurrentTest:s}}),f.jsx(rw,{data:{title:"Description",currentTest:r,setCurrentTest:s}}),f.jsx(Io,{}),f.jsx(mF,{data:{currentTest:r,setEditData:d,setCurrentTest:s,setIsRulesAdding:l}}),f.jsx(Io,{}),f.jsx(pF,{data:P}),i&&f.jsx(dF,{data:{cancel:v,setQuizzes:u,quizzes:c,editData:h,clearEditData:w}}),a&&f.jsx(gF,{data:{currentTest:r,setCurrentTest:s,editData:h,setEditData:d,setIsRulesAdding:l}}),p&&f.jsx(Pi,{data:{yesButton:C,noButton:N,text:"Are you sure to delete ?"}}),f.jsx(Io,{})]})},y1=({text:t,length:e})=>{const n=kn(),{theme:r}=I.useContext(Z);return f.jsxs("div",{className:`flex items-center gap-x-1 mb-2 ${r==="light"?"":"text-white"}`,children:[f.jsx(Re,{data:{clickFn:()=>n("/app/admin"),image:"back"}}),f.jsxs("p",{children:[t," (",e,")"]})]})},vF=()=>{const[t,e]=I.useState("test"),{theme:n,isLogin:r,tests:s,setTests:i}=I.useContext(Z),[o,a]=I.useState({}),[l,c]=I.useState(!1),[u,h]=I.useState(!1),[d,p]=I.useState(null);ca("tests",i,r),I.useEffect(()=>(wn(),wn()),[]);const g=k=>{a(k),e("editTest")},_=k=>{p(k),h(!0)},x=async k=>{const T=we(Ce,"tests",k.id);await En(T,{isUploaded:!k.isUploaded})},m=()=>{N(d),p(null),h(!1)},v=()=>{h(!1)},y=()=>{c(!0)},C=()=>{c(!1)},N=async k=>{try{const T=we(Ce,"tests",k);await Mc(T)}catch(T){console.log(T.message)}};return(()=>{switch(t){case"test":return f.jsxs("div",{className:"p-5 grid gap-y-2",children:[f.jsx("div",{className:"flex justify-between",children:f.jsx(y1,{text:"Tests",length:s.length})}),l&&f.jsx(uF,{data:{close:C}}),u&&f.jsx(Pi,{data:{yesButton:m,noButton:v,text:"Are you sure to delete ?"}}),f.jsx("div",{className:"grid gap-y-2",children:s.map(k=>f.jsxs("div",{className:`flex items-center border p-2 rounded-md min-h-[100px] ${n==="light"?"border-gray-100":"border-slate-500/70 text-white"}`,children:[f.jsxs("div",{className:"flex flex-1 gap-x-2 items-center",children:[f.jsx("input",{checked:k.isUploaded,onChange:()=>x(k),className:"size-6",type:"checkbox"}),f.jsxs("div",{children:[f.jsx("div",{className:"font-medium",children:k.name}),f.jsxs("div",{className:`text-sm ${n==="light"?"text-gray-500":"text-white"}`,children:[k.quizzes.length,k.quizzes.length>1?" questions":" question",k.isUploaded?" (Uploaded)":" (Not uploaded)"]})]})]}),f.jsx("div",{className:"flex gap-x-2",children:f.jsx(v0,{options:[{text:"Edit",icon:"editPencil",onClick:()=>{g(k)}},{text:"Delete",icon:"deleteIcon",onClick:()=>_(k.id)}]})})]},`tests-${k.id}`))}),f.jsx("div",{children:f.jsx(xe,{data:{clickFn:y,text:"New Test",image:"add"}})})]});case"editTest":return f.jsx(_F,{data:{setPage:e,currentTest:o,setCurrentTest:a}})}})()},yF=({password:t})=>{const[e,n]=I.useState(!1);return f.jsxs("div",{children:["Password: ",e?t:"*********"," ",f.jsx("span",{onClick:()=>n(!e),className:"cursor-pointer text-blue-500 underline",children:e?"hide":"show"})]})},wF=()=>{const{setUserData:t,users:e,theme:n}=I.useContext(Z);I.useEffect(()=>(wn(),wn()),[]);const r=kn(),s=o=>{t(o),r("/app/posts")},i=async o=>{const a=we(Ce,"users",o.uid);await En(a,{isAdmin:!o.isAdmin})};return f.jsxs("div",{className:"mt-2 p-5",children:[f.jsx(y1,{text:"Users",length:e==null?void 0:e.length}),f.jsx("div",{className:"mt-2 grid gap-y-2",children:e.sort((o,a)=>Zr(o,a,"timestamp","newer")).map(o=>{var a,l,c,u,h;return f.jsxs("div",{className:`hover:border-blue-300 border p-2  ${n==="light"?`hover:bg-slate-50 ${((a=ne==null?void 0:ne.currentUser)==null?void 0:a.uid)===o.uid?"bg-slate-50 border-blue-300 ":"border-gray-200"}`:`hover:bg-slate-500/70 text-white ${((l=ne==null?void 0:ne.currentUser)==null?void 0:l.uid)===o.uid?" border-blue-300 bg-slate-500/70":"border-slate-500/70 "}`}`,children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{className:"flex w-5/6 gap-x-2 items-center",children:[f.jsx(ns,{image:o.image,name:o.name}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"font-medium",children:[o.name," ",f.jsxs("span",{className:`${o!=null&&o.isAdmin?"text-blue-500":"text-white"}`,children:["(",o!=null&&o.isAdmin?"admin":"user",")"," ",((c=ne==null?void 0:ne.currentUser)==null?void 0:c.uid)===o.uid?"(You)":""]})]}),f.jsx("div",{className:"text-md ",children:o.email}),f.jsxs("div",{className:"text-md",children:["Created: ",Bi(Sn(o.createdAt))]}),f.jsxs("div",{className:"text-md font-medium text-lime-600",children:["UID : ",o.uid]}),f.jsx(yF,{password:o.password})]})]}),((u=ne==null?void 0:ne.currentUser)==null?void 0:u.uid)!==o.uid&&f.jsx(Re,{data:{clickFn:()=>s(o),image:"review"}})]}),((h=ne==null?void 0:ne.currentUser)==null?void 0:h.uid)!==o.uid&&f.jsx(xe,{data:{image:"admin",clickFn:()=>i(o),text:o.isAdmin?"Remove from admin":"Set as admin"}})]},o.uid)})})]})},w1=({data:t,children:e})=>{const{setValue:n}=t,{theme:r}=I.useContext(Z),s=I.useRef(null);return qi(s,n),I.useEffect(()=>(Cn("hidden"),()=>{Cn("auto")}),[]),f.jsx("div",{className:"fixed flex items-center z-40 bg-black/60 justify-center top-0 left-0 right-0 bottom-0 ",children:f.jsx("div",{ref:s,className:`w-4/5 sm:w-3/5 md:w-2/5 p-5 min-h-40 grid gap-y-3 rounded-md items-center border  ${r==="light"?"border-gray-300 bg-white":"border-slate-500/70 text-white bg-slate-600"}`,children:e})})},EF=({data:t})=>{const{links:e,setLinks:n,setIsLinkAdding:r}=t,[s,i]=I.useState(""),[o,a]=I.useState(""),l=s.trim()&&o.trim(),c=()=>{if(l){const u={id:e.length===0?1:e[e.length-1].id+1,title:s.trim(),link:o.trim()},h=[...e,u];n(h),r(!1)}};return f.jsxs(w1,{data:{setValue:r},children:[f.jsxs("div",{className:"grid gap-y-2",children:[f.jsx(nd,{data:{text:"Title",onChangeFn:u=>i(u.target.value),value:s,placeholder:"Enter title..."}}),f.jsx(nd,{data:{text:"Link",onChangeFn:u=>a(u.target.value),value:o,placeholder:"Enter link..."}})]}),f.jsx("div",{children:f.jsx(xe,{data:{image:"add",text:"Add Link",clickFn:c}})})]})},xF=()=>{const{users:t,theme:e,isLogin:n,posts:r,setPosts:s}=I.useContext(Z),[i,o]=I.useState("posts"),[a,l]=I.useState(null);ca("posts",s,n);const c=async h=>{const d=we(Ce,"posts",h);await Mc(d)},u=()=>{switch(i){case"posts":return f.jsxs("div",{className:"grid gap-y-2",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx(y1,{text:"Posts",length:r.length}),f.jsx(xe,{data:{clickFn:()=>o("createPost"),text:"Create a post"}})]}),f.jsx("div",{className:"grid gap-y-2 mb-2",children:r.sort((h,d)=>Zr(h,d,"time","newer")).map(h=>{var p,g,_;let d;return t.forEach(x=>{x.uid===h.uid&&(d=x)}),f.jsxs("div",{className:`p-2 border min-h-20 flex items-center rounded-md ${e==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"top-section flex mb-2 gap-x-2",children:[f.jsx("img",{className:"size-10 rounded-full shadow-md object-cover",src:d.image}),f.jsxs("div",{children:[f.jsx("div",{className:"font-medium",children:d.name}),f.jsx("div",{className:` text-sm ${e==="light"?"text-gray-500":"text-white"}`,children:to(Sn(h.time))})]})]}),f.jsx("p",{className:"mb-2 break-words whitespace-normal",children:kr(h.description,25)}),f.jsxs("div",{className:"flex items-center gap-x-1",children:[h.images.length!==0&&f.jsxs("div",{className:`p-1 min-h-9 flex items-center gap-x-1  rounded-md ${e==="light"?"bg-green-100":"bg-slate-500/70"}`,children:[f.jsx("img",{className:"w-7",src:he("image")}),f.jsxs("span",{children:[h.images.length," ",h.images.length<=1?"image":"images"]})]}),h.files.length!==0&&f.jsxs("div",{className:`p-1 min-h-9  flex items-center gap-x-1 rounded-md ${e==="light"?"bg-green-100":"bg-slate-500/70"}`,children:[f.jsx("img",{className:"w-7",src:he("file")}),f.jsxs("span",{children:[h.files.length," ",h.files.length<=1?"file":"files"]})]}),h.links&&((p=h==null?void 0:h.links)==null?void 0:p.length)!==0&&f.jsxs("div",{className:`p-1 min-h-9  flex items-center gap-x-1 rounded-md ${e==="light"?"bg-green-100":"bg-slate-500/70"}`,children:[f.jsx("img",{className:"w-7",src:he("link")}),f.jsxs("span",{children:[(g=h==null?void 0:h.links)==null?void 0:g.length," ",((_=h==null?void 0:h.links)==null?void 0:_.length)<=1?"link":"links"]})]}),h.draft&&f.jsx("div",{className:`p-1 min-h-9 flex items-center gap-x-1 rounded-md ${e==="light"?"bg-green-100":"bg-slate-500/70"}`,children:f.jsx("span",{className:"font-bold text-red-500",children:"(Draft)"})})]})]}),f.jsx("div",{className:"flex items-center gap-x-1",children:f.jsx(v0,{options:[{text:"Edit",icon:"editPencil",onClick:()=>{l(h),o("createPost")}},{text:"Delete",icon:"deleteIcon",onClick:()=>c(h.id)}]})})]},`post-${h.id}`)})})]});case"createPost":return f.jsx(TF,{setPage:o,postData:a,setPostData:l})}};return f.jsx("div",{className:"p-5",children:u()})},TF=({setPage:t,postData:e,setPostData:n})=>{const{theme:r}=I.useContext(Z),[s,i]=I.useState(e?e.images:[]),[o,a]=I.useState(null),[l,c]=I.useState(e?e.description:""),[u,h]=I.useState(e?e==null?void 0:e.files:[]),[d,p]=I.useState(e?(e==null?void 0:e.links)||[]:[]),[g,_]=I.useState(!1),x=l.trim()||s.length!==0||u.length!==0||d.length!==0,m=async(w=!1)=>{try{const A=Nt(Ce,"posts");await xa(A,{uid:ne.currentUser.uid,time:_n(),editedTime:_n(),description:l,images:s,files:u,links:d,draft:w}),t("posts")}catch(A){console.log(A.message)}},v=async()=>{try{const w=we(Ce,"posts",e.id);await En(w,{editedTime:_n(),description:l,images:s,files:u,links:d,draft:!1}),t("posts")}catch(w){console.log(w.message)}},y=async()=>{try{if(e){const w=we(Ce,"posts",e.id);await En(w,{editedTime:_n(),description:l,images:s,files:u,links:d,draft:!0})}else m(!0);t("posts")}catch(w){console.log(w.message)}},C=async w=>{try{const A=await dt(w,{maxSizeMB:.5,maxWidthOrHeight:1280,useWebWorker:!0}),P=`posts/${ne.currentUser.uid}/${w.name}`,b=_i(yi,P);a("Uploading image...");const D=await $h(b,A),L=await zh(D.ref),F=[...s,{name:w.name,path:P,imageURL:L}];i(F),a("Uploaded image"),setTimeout(()=>{a(null)},3e3)}catch(A){a(A.message),setTimeout(()=>{a(null)},3e3)}},N=async w=>{try{const A=`posts/${ne.currentUser.uid}/${w.name}`,P=_i(yi,A);a("Uploading file...");const b=await $h(P,w),D=await zh(b.ref),L=[...u,{name:w.name,path:A,fileURL:D,size:w.size}];h(L),a("Uploaded file"),setTimeout(()=>{a(null)},3e3)}catch(A){a(A.message),setTimeout(()=>{a(null)},3e3)}},E=async(w,A)=>{const P=s.filter(D=>A!==D.imageURL);i(P);const b=_i(yi,w);await ip(b)},k=async(w,A)=>{const P=u.filter(D=>A!==D.fileURL);h(P);const b=_i(yi,w);await ip(b)},T=w=>{const A=d.filter(P=>w!==P.id);p(A)};return f.jsxs("div",{children:[f.jsxs("div",{className:"flex mb-2 items-center justify-between",children:[o&&f.jsx(Xh,{message:o}),f.jsxs("div",{className:"flex gap-x-1 items-center",children:[f.jsx(Re,{data:{clickFn:()=>{t("posts"),n(null)},image:"back"}}),f.jsx("div",{className:r==="light"?"":"text-white",children:e?"Edit post":"Create a post"})]}),f.jsxs("div",{className:"flex items-center gap-x-1",children:[f.jsx(xe,{data:{text:"Draft",clickFn:()=>{x&&y()}}}),f.jsx(xe,{data:{clickFn:()=>{x?(e?v():m(),n(null)):a("Create a post first!")},text:e?"Save":"Publish",image:e?"save":"upload"}})]})]}),f.jsxs("div",{className:"mb-2",children:[f.jsx("textarea",{value:l,onChange:w=>c(w.target.value),className:`w-full p-2 resize-none border min-h-28 ${r==="light"?"border-slate-200  focus:outline-blue-500":"border-slate-500/70 outline-none bg-slate-600 text-white"}`,placeholder:"Write description here"}),f.jsx("input",{className:"hidden",id:"imagesInput",type:"file",accept:"image/*",onChange:w=>C(w.target.files[0])}),f.jsx("input",{className:"hidden",id:"filesInput",type:"file",onChange:w=>N(w.target.files[0])}),f.jsxs("div",{className:"flex justify-start gap-x-2 mt-1",children:[f.jsxs("label",{htmlFor:"imagesInput",className:`min-h-10 shadow-md hover:opacity-70 border  font-medium px-2 py-1 rounded-lg flex justify-center items-center gap-x-1 transition-all ${r==="light"?"bg-gray-50/50 border-gray-200":"bg-slate-500/70 text-white border-slate-500/70"}`,children:[f.jsx("img",{className:" h-7",src:he("image")}),f.jsx("span",{children:"Image"})]}),f.jsxs("label",{htmlFor:"filesInput",className:`min-h-10 shadow-md hover:opacity-70 border  font-medium px-2 py-1 rounded-lg flex justify-center items-center gap-x-1 transition-all ${r==="light"?"bg-gray-50/50 border-gray-200":"bg-slate-500/70 text-white border-slate-500/70"}`,children:[f.jsx("img",{className:" h-7",src:he("file")}),f.jsx("span",{children:"File"})]}),f.jsxs("label",{onClick:()=>{_(!0)},className:`min-h-10 shadow-md hover:opacity-70 border  font-medium px-2 py-1 rounded-lg flex justify-center items-center gap-x-1 transition-all ${r==="light"?"bg-gray-50/50 border-gray-200":"bg-slate-500/70 text-white border-slate-500/70"}`,children:[f.jsx("img",{className:" h-7",src:he("link")}),f.jsx("span",{children:"Link"})]}),g&&f.jsx(EF,{data:{links:d,setLinks:p,setIsLinkAdding:_}})]})]}),s.length!==0&&f.jsx("div",{className:"grid gap-y-2",children:s.map(w=>f.jsxs("div",{className:"relative min-h-20",children:[f.jsx("img",{alt:w.name,className:"size-full",src:w.imageURL}),f.jsx("div",{className:"absolute top-1 right-1",children:f.jsx(Re,{data:{clickFn:()=>E(w.path,w.imageURL),image:"falseIcon"}})})]},w.imageURL))}),u.length!==0&&f.jsx("div",{className:"grid gap-y-1 mt-2",children:u.map(w=>f.jsxs("div",{className:"relative",children:[f.jsxs("div",{className:`p-1  min-h-14 rounded-md flex gap-x-1 items-center font-bold border  border-l-4 border-l-green-500 ${r==="light"?"bg-slate-50 border-gray-300 text-blue-600":"bg-slate-500/70 border-slate-500/70 text-white"}`,children:[f.jsx("img",{className:"w-7 ",src:he("download")}),f.jsxs("div",{children:[f.jsx("p",{className:"underline text-blue-600",children:w.name}),(w==null?void 0:w.size)&&f.jsxs("p",{children:[(w.size/(1024*1024)).toFixed(2)," MB"]})]})]}),f.jsx("div",{className:"absolute top-1 right-1",children:f.jsx(Re,{data:{clickFn:()=>k(w.path,w.fileURL),image:"falseIcon"}})})]},w.fileURL))}),d.length!==0&&f.jsx("div",{className:"grid gap-y-1 mt-2",children:d.map(w=>f.jsxs("div",{className:"relative",children:[f.jsxs("div",{className:`p-1  min-h-14 rounded-md flex gap-x-1 items-center font-bold border  border-l-4 border-l-green-500 ${r==="light"?"bg-slate-50 border-gray-300 text-blue-600":"bg-slate-500/70 border-slate-500/70 text-white"}`,children:[f.jsx("img",{className:"w-7 ",src:he("link")}),f.jsx("div",{children:f.jsx("p",{className:"underline text-blue-600",children:w.title})})]}),f.jsx("div",{className:"absolute top-1 right-1",children:f.jsx(Re,{data:{image:"falseIcon",clickFn:()=>T(w.id)}})})]},w.link))})]})},CF=()=>{const{users:t,setHeaderTitle:e,theme:n,notifications:r,setNotifications:s}=I.useContext(Z),[i,o]=I.useState(null),a=5,l=()=>{const c=Nt(Ce,"notifications");let u=jo(c,Dh("timestamp","desc"),Oh(a));i&&(u=jo(u,ox(i))),Ir(u,h=>{const d=h.docs.map(p=>({id:p.id,...p.data()}));s([...r,...d]),o(h.docs[h.docs.length-1])})};return I.useEffect(()=>{const c=Nt(Ce,"notifications"),u=jo(c,Dh("timestamp","desc"),Oh(5)),h=Ir(u,d=>{const p=d.docs.map(g=>({id:g.id,...g.data()}));p.length!==0&&(s(p),o(d.docs[d.docs.length-1]))});return()=>h()},[]),I.useEffect(()=>{e("Notifications")},[]),f.jsxs("div",{className:"p-5 grid gap-y-2 ",children:[f.jsx(ir,{}),r.map(c=>{let u;return t.forEach(h=>{c.uid===h.uid&&(u=h)}),f.jsx(IF,{notification:c,user:u},c.id)}),r.length===0&&f.jsx("div",{className:`${n==="light"?"":"text-white"}`,children:"No notifications"}),r.length>=a&&f.jsx("div",{className:"flex justify-center mt-1 mb-2 ",children:f.jsx("button",{onClick:l,className:`border  rounded-md text-sm p-1 ${n==="light"?"border-gray-100":"text-white bg-slate-500/70"}`,children:"load more"})})]})},IF=({notification:t,user:e})=>{let n;const{type:r,description:s,timestamp:i,testName:o,comment:a}=t,{theme:l}=I.useContext(Z);switch(`${r[0]} ${r[1]}`){case"like post":n="liked a post";break;case"like test":n="liked a test";break;case"comment post":n="commented on a post";break;case"comment test":n="commented on a test";break;case"added post":n="added a post";break;case"added test":n="added a test";break;case"took test":n="took a test";break}return f.jsxs("div",{className:`cursor-pointer shadow-md flex items-center gap-x-2 p-2 border  rounded-md ${l==="light"?"border-slate-300 bg-white shadow-gray-200":"border-slate-500/70 bg-slate-500/70 text-white shadow-slate-500 "}`,children:[f.jsx("div",{children:f.jsx("img",{className:"size-10 object-cover rounded-full object-center bg-cover",src:e==null?void 0:e.image})}),f.jsxs("div",{children:[f.jsxs("p",{children:[f.jsx("b",{children:e==null?void 0:e.name})," ",n]}),s&&f.jsx("p",{children:kr(s,30)}),o&&f.jsx("p",{children:o}),a&&f.jsx("p",{children:a}),f.jsx("p",{children:to(Sn(i))})]})]})},SF=({members:t})=>{const{users:e,theme:n}=I.useContext(Z);return f.jsxs("div",{className:`p-2 grid gap-y-2 ${n==="light"?"":"text-white"}`,children:[f.jsx("p",{className:"text-lg font-bold",children:"Members"}),t.sort((r,s)=>Zr(r,s,"joinedAt","newer")).map(r=>{const s=Rr(e,r.uid);return f.jsxs("div",{className:`p-2 flex gap-x-2 items-center border  rounded-md ${n==="light"?"border-slate-200":"bg-slate-500/70 border-slate-500"}`,children:[f.jsxs("div",{className:"relative",children:[f.jsx(ns,{image:s.image,name:s.name}),f.jsx("div",{className:`absolute bottom-0 right-0 size-3 rounded-full ${s!=null&&s.isOnline?"bg-green-500":"bg-gray-500"}`})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{children:s==null?void 0:s.name}),f.jsx("p",{className:`text-sm ${s!=null&&s.isOnline?"text-blue-500":"text-red-500"}`,children:s!=null&&s.isOnline?"Online":to(Sn(s==null?void 0:s.lastSeen))})]})]},r.uid+r.joinedAt)})]})},AF=({setSubPage:t,currentChat:e})=>{const{theme:n,users:r,userData:s}=I.useContext(Z),{members:i}=e,o=async c=>{try{const u=we(Ce,"chats",e.id);await En(u,{members:cb({uid:c,joinedAt:new Date().getTime()})})}catch(u){console.log(u.message)}},a=async c=>{try{const u=we(Ce,"chats",e.id),h=i.filter(d=>c!==d.uid);await En(u,{members:h})}catch(u){console.log(u.message)}},l=c=>{let u=!1;return i.forEach(h=>{c===h.uid&&(u=!0)}),u};return f.jsxs("div",{className:"",children:[f.jsx("div",{className:`h-[70px] z-30 fixed top-0 right-0 left-0 p-2 min-h-10 pb-2 flex items-center justify-between gap-x-1 border-b ${n==="light"?"border-b-slate-200 bg-slate-50":"border-b-slate-500/70 bg-slate-500"}`,children:f.jsxs("div",{className:"flex gap-x-1",children:[f.jsx("div",{children:f.jsx(Re,{data:{image:"back",clickFn:()=>t("chat")}})}),f.jsxs("div",{className:` ${n==="light"?"":"text-white"}`,children:[f.jsx("p",{className:"text-lg font-bold",children:e.name}),f.jsxs("p",{className:"text-sm",children:[i.length," ",i.length<=1?"member":"members"]})]})]})}),(s==null?void 0:s.isAdmin)&&f.jsxs("div",{className:"p-2",children:[f.jsx("input",{id:"imageInput",className:"hidden",type:"file",accept:"image/*"}),f.jsxs("div",{className:"relative size-24",children:[f.jsx("img",{src:"images/sea-logo.jpg",className:"size-24 rounded-full object-cover object-center bg-cover"}),f.jsx("label",{htmlFor:"imageInput",className:` p-1 rounded-full absolute -bottom-1 -right-1 cursor-pointer ${n==="light"?"bg-gray-200":"bg-slate-500/70"}`,children:f.jsx("img",{className:"w-5",src:he("edit")})})]}),f.jsxs("div",{className:`mt-2 ${n==="light"?"":"text-white"}`,children:[f.jsx("p",{children:"Group Name"}),f.jsx("p",{children:e.name})]})]}),f.jsx(SF,{members:i}),(s==null?void 0:s.isAdmin)&&f.jsxs("div",{className:`p-2 grid gap-y-2 ${n==="light"?"":"text-white"}`,children:[f.jsx("p",{className:"text-lg font-bold",children:"Manage Members"}),r.sort((c,u)=>Zr(c,u,"createdAt","newer")).map((c,u)=>f.jsxs("div",{className:`p-2 flex justify-between items-center border  rounded-md ${n==="light"?"border-slate-200":"bg-slate-500/70 border-slate-500"}`,children:[f.jsxs("div",{className:"flex gap-x-2 items-center",children:[f.jsxs("div",{className:"relative",children:[f.jsx(ns,{image:c.image,name:c.name}),f.jsx("div",{className:`absolute bottom-0 right-0 size-3 rounded-full ${c!=null&&c.isOnline?"bg-green-500":"bg-gray-500"}`})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{children:c.name}),f.jsx("p",{className:`text-sm ${c!=null&&c.isOnline?"text-blue-500":"text-red-500"}`,children:c!=null&&c.isOnline?"Online":to(Sn(c==null?void 0:c.lastSeen))})]})]}),f.jsx("div",{children:l(c.uid)?!c.isAdmin&&f.jsx(Re,{data:{clickFn:()=>a(c.uid),image:"trash"}}):f.jsx(Re,{data:{clickFn:()=>o(c.uid),image:"add"}})})]},c.name+" "+c.image+u))]})]})},RF=({message:t,deleteMessage:e,setMessage:n,setImageObject:r,setEditMessageId:s,setViewingImage:i,setReplyMessage:o})=>{const{users:a,theme:l,userData:c}=I.useContext(Z),u=ne.currentUser.uid===t.senderId,h=Rr(a,t.senderId),d=u&&{text:"Edit",icon:"editPencil",onClick:()=>{s(t.id),n(t.content),r(t==null?void 0:t.image),o(t==null?void 0:t.reply)}};return f.jsxs("div",{className:`flex mb-2 gap-x-2 ${u?"flex-row-reverse":""} `,children:[f.jsxs("div",{className:"size-10 relative",children:[f.jsx(ns,{name:h.name,image:h.image}),f.jsx("div",{className:`absolute bottom-0 right-0 size-3 rounded-full ${h!=null&&h.isOnline?"bg-green-500":"bg-gray-500"}`})]}),f.jsxs("div",{className:`grid gap-y-1 whitespace-pre-wrap ${l==="light"?"":"text-white"}`,children:[f.jsx("p",{className:`font-bold ${u?"text-right":"text-left"} `,children:h==null?void 0:h.name}),f.jsxs("div",{className:`flex items-start gap-x-1 ${u?"flex-row-reverse justify-start":""}`,children:[f.jsxs("div",{children:[(t==null?void 0:t.content)&&f.jsxs("p",{className:`max-w-[250px] break-words whitespace-pre-wrap text-wrap rounded-[10px] border border-slate-200 p-2  ${l==="light"?`${u?"rounded-tr-none bg-blue-300":"bg-white rounded-tl-none"}`:`${u?"rounded-tr-none bg-blue-300":"bg-white rounded-tl-none text-black"}`}`,children:[(t==null?void 0:t.reply)&&f.jsx(kF,{message:t}),t.content]}),(t==null?void 0:t.image)&&f.jsx("img",{onClick:()=>{i(t.image)},className:"cursor-pointer border mt-1 rounded-sm border-slate-200 w-[200px] min-h-[100px]",alt:t.image.name,src:t.image.URL})]}),u||c!=null&&c.isAdmin?f.jsx(v0,{options:[d,{text:"Delete",icon:"deleteIcon",onClick:()=>e(t.id)}],left:u?"left-[35px]":"-left-[102px]"}):""]}),f.jsxs("div",{className:`flex  ${u?"flex-row-reverse":""} gap-x-1 items-center`,children:[f.jsx("button",{onClick:()=>{o(t)},children:f.jsx("img",{className:"w-6",src:he("reply")})}),f.jsx("p",{className:`text-sm ${u?"text-right":"text-left"}`,children:t!=null&&t.editedTime?f.jsxs("span",{children:["edited ",Bi(Sn(t.editedTime))]}):f.jsx("span",{children:Bi(Sn(t.timestamp))})})]})]})]})},kF=({message:t})=>{const{users:e,theme:n}=I.useContext(Z),{senderId:r,content:s,image:i}=t.reply,[o,a]=I.useState(!1),l=Rr(e,r);return f.jsxs("div",{className:`mb-1 border-l-4 p-1 rounded-md border-l-green-500  ${n==="light"?"bg-green-200":"bg-green-300"}`,children:[f.jsx("p",{className:"font-bold ",children:l.name}),s&&f.jsxs("p",{children:[o?s:kr(s,25),s.length>=25&&f.jsx("span",{onClick:()=>{a(!o)},className:"font-bold text-blue-400 cursor-pointer",children:o?" see less":" see more"})]}),i&&f.jsx("p",{children:"Image"})]})},NF=({image:t,setViewingImage:e})=>f.jsx(w1,{data:{setValue:e},children:t&&f.jsxs("div",{className:"",children:[f.jsxs("p",{children:["File size: ",(t.size/(1024*1024)).toFixed(2)," MB"]}),f.jsx("img",{alt:t.name,className:"mt-1 h-full w-full",src:t.URL})]})}),bF=({setIsRulesOpen:t,rules:e=[" - Group         ","No spamming -    (link)   emoji   ","Privacy  -        ","  (rules)    Group       ()   "]})=>f.jsx(w1,{data:{setValue:t},children:e?f.jsxs("div",{className:"p-2 max-h-[80%] overflow-auto",children:[f.jsx("p",{className:"font-bold mb-1",children:"Group Rules"}),e.map((n,r)=>f.jsxs("div",{className:"flex items-center gap-x-1 mb-2",children:[f.jsx("p",{className:"size-10 flex items-center justify-center rounded-full bg-gray-300",children:r+1}),f.jsx("p",{className:"flex-1",children:n})]},`${r}-${n}`))]}):f.jsx("div",{className:"p-2",children:"No rules"})}),PF=({message:t,loadMessages:e,setNewMessage:n,setViewingOldMessages:r})=>{const{senderId:s,content:i,timestamp:o}=t,{users:a,theme:l}=I.useContext(Z),c=Rr(a,s);return f.jsx("div",{onClick:()=>{e(),fl(),n(null),r(!1)},className:`z-30 cursor-pointer fixed  right-2 bottom-[200px] rounded-md border border-slate-300 p-2 ${l==="light"?"bg-white":"bg-slate-500 text-white"}`,children:f.jsxs("div",{children:[f.jsxs("div",{className:"flex gap-x-1 mb-1",children:[f.jsx("img",{className:"size-7 rounded-full object-center object-cover",src:c.image}),f.jsx("p",{className:"font-bold",children:c.name})]}),f.jsx("div",{children:kr(i)}),f.jsx("p",{className:"text-sm text-gray-300",children:Bi(Sn(o))})]})})},LF=({data:t})=>{const{setPage:e,chatId:n,chats:r,messages:s,viewingOldMessages:i,setViewingOldMessages:o,loadMoreWithoutSnapshot:a,loadMessages:l}=t,{theme:c,userData:u,users:h,setIsOnline:d}=I.useContext(Z),[p,g]=I.useState(""),[_,x]=I.useState("chat"),[m,v]=I.useState(null),y=we(Ce,"chats",n),C=Nt(y,"messages"),[N,E]=I.useState(null),[k,T]=I.useState(!1),[w,A]=I.useState(!1),[P,b]=I.useState(null),[D,L]=I.useState(null),[F,R]=I.useState(null),[S,M]=I.useState(!1),[O,j]=I.useState(null);let H=0;I.useEffect(()=>(j($==null?void 0:$.lastMessage),H=setTimeout(()=>{j(null)},12e4),()=>clearTimeout(H)),[r]),I.useEffect(()=>{const X=async ie=>{var Nn;let ke;const ze=we(Nt(Ce,"users"),(Nn=ne==null?void 0:ne.currentUser)==null?void 0:Nn.uid);ie?ke={isOnline:ie}:ke={isOnline:ie,lastSeen:_n()},await En(ze,ke),d(ie)};return X(!0),()=>{X(!1)}},[]);let $;r.forEach(X=>{n===X.id&&($=X)}),I.useEffect(()=>{const X=Rr(h,D==null?void 0:D.senderId);R(X),console.log(D,X)},[D]),I.useEffect(()=>{fl()},[]);const Y=async X=>{const ie=`chats/${n}/${u.name}-${X.name}`,ke=_i(yi,ie);T(!0),A(!0);const ze=await dt(X,{maxSizeMB:.5,maxWidthOrHeight:1280,useWebWorker:!0}),Nn=await $h(ke,ze),bn=await zh(Nn.ref),Be={name:X.name,path:ie,URL:bn,size:ze.size};E(Be),T(!1),A(!1)},B=async X=>{const ie=_i(yi,X);await ip(ie),E(null)},V=async()=>{try{const X={senderId:ne.currentUser.uid,content:p.trim(),timestamp:_n(),image:N||null,reply:D||null};A(!0),await xa(C,X),await En(y,{lastMessage:X}),g(""),E(null),fl(),A(!1),L(null),R(null)}catch(X){console.log(X.message)}},ee=async()=>{try{const X=we(C,m),ie={content:p.trim(),editedTime:_n(),image:N||null,reply:D||null};A(!0),await En(X,ie),g(""),E(null),v(null),A(!1),L(null),R(null)}catch(X){console.log(X.message)}},pe=async X=>{const ie=we(C,X);await Mc(ie)},ye=()=>{switch(_){case"chat":return f.jsxs("div",{className:"",children:[O&&i?f.jsx(PF,{message:O,loadMessages:l,setNewMessage:j,setViewingOldMessages:o}):"",P&&f.jsx(NF,{image:P,setViewingImage:b}),S&&f.jsx(bF,{setIsRulesOpen:M,rules:$==null?void 0:$.rules}),f.jsxs("div",{className:`h-[70px] z-30 fixed top-0 right-0 left-0 p-2 min-h-10 pb-2 flex items-center justify-between gap-x-1 border-b ${c==="light"?"border-b-slate-200 bg-slate-50":"border-b-slate-500/70 bg-slate-500"}`,children:[f.jsxs("div",{className:"flex gap-x-1",children:[f.jsx("div",{children:f.jsx(Re,{data:{image:"back",clickFn:()=>e("chatroom")}})}),f.jsxs("div",{className:` ${c==="light"?"":"text-white"}`,children:[f.jsx("p",{className:"text-lg font-bold",children:$.name}),f.jsxs("p",{className:"text-sm",children:[$.members.length," ",$.members.length<=1?"member":"members"]})]})]}),f.jsx("button",{onClick:()=>x("info"),children:f.jsx("img",{src:"images/sea-logo.jpg",alt:"group-image",className:"size-12 rounded-full object-center object-cover "})})]}),f.jsxs("div",{className:"p-2 gap-y-2 mb-[98px]",children:[f.jsx("div",{className:"flex justify-center mt-1 mb-2",children:f.jsx("button",{onClick:()=>{a("old"),o(!0)},className:`border  rounded-md text-sm p-1 ${c==="light"?"border-gray-100":"text-white bg-slate-500/70"}`,children:"Older messages"})}),s.sort((X,ie)=>Zr(X,ie)).map((X,ie)=>f.jsx(RF,{editMessage:ee,setEditMessageId:v,deleteMessage:pe,message:X,setMessage:g,setImageObject:E,setViewingImage:b,setReplyMessage:L},`${ie}-${X.content}`)),i&&f.jsxs("div",{className:"flex gap-x-1 justify-center mt-1 mb-2",children:[f.jsx("button",{onClick:()=>{a("newer")},className:`border  rounded-md text-sm p-1 ${c==="light"?"border-gray-100":"text-white bg-slate-500/70"}`,children:"Newer messages"}),f.jsx("button",{onClick:()=>{l(),o(!1),fl()},className:`border  rounded-md text-sm p-1 ${c==="light"?"border-gray-100":"text-white bg-slate-500/70"}`,children:"Latest messages"})]})]}),f.jsxs("div",{className:`fixed bottom-0 right-0 left-0 p-2 min-h-[80px] flex flex-col items-center  ${c==="light"?" bg-slate-50":" bg-slate-500 text-white"}`,children:[f.jsx("div",{className:"w-full flex justify-between items-center text-sm p-1 pt-0 md:w-2/3 lg:w-1/2",children:f.jsx("button",{onClick:()=>M(!0),className:"text-sm underline text-blue-300",children:"Group Rules"})}),m&&f.jsxs("div",{className:"w-full flex justify-between items-center text-sm p-1 md:w-2/3 lg:w-1/2",children:[f.jsx("p",{children:"Editing a message"}),f.jsx("button",{onClick:()=>{v(null),g(""),E(null),L(null),R(null)},className:" rounded-full shadow-sm p-1",children:f.jsx("img",{className:"w-6",src:he("falseIcon")})})]}),D&&f.jsxs("div",{className:"w-full flex justify-between items-center text-sm p-1 md:w-2/3 lg:w-1/2",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("p",{className:"font-bold",children:["Reply to ",F==null?void 0:F.name]}),f.jsx("p",{children:kr(D==null?void 0:D.content,25)})]}),f.jsx("button",{onClick:()=>{L(null),R(null)},className:"rounded-full shadow-sm p-1",children:f.jsx("img",{className:"w-6",src:he("falseIcon")})})]}),k&&f.jsx("div",{className:"w-full flex justify-between items-center text-sm p-1 md:w-2/3 lg:w-1/2",children:f.jsx("p",{children:"Uploading image..."})}),N&&f.jsxs("div",{className:"w-full flex justify-between items-center text-sm p-1 md:w-2/3 lg:w-1/2",children:[f.jsxs("div",{className:"flex flex-1 items-center gap-x-1",children:[f.jsx("img",{src:N.URL,className:"h-10 rounded-sm"}),f.jsx("p",{children:N.name})]}),f.jsx("button",{onClick:()=>{B(N.path),E(null)},className:"rounded-full shadow-sm p-1",children:f.jsx("img",{className:"w-6",src:he("falseIcon")})})]}),f.jsxs("div",{className:`border shadow-sm w-full md:w-2/3 lg:w-1/2 p-1 rounded-[12px] flex items-center justify-between ${c==="light"?"border-slate-200":"border-slate-600"}`,children:[f.jsx("input",{id:"imageFile",className:"hidden",type:"file",onChange:X=>{Y(X.target.files[0])},accept:"image/*"}),f.jsx("label",{htmlFor:"imageFile",className:"p-1 cursor-pointer rounded-md",children:f.jsx("img",{className:"w-7",src:he("image")})}),f.jsx("textarea",{onChange:X=>g(X.target.value),value:p,className:`h-auto resize-none outline-none flex-1 p-1 pl-1 pr-1 rounded-md mr-2 ${c==="light"?"bg-transparent":"bg-transparent text-white"}`,placeholder:"Type message..."}),f.jsx("button",{onClick:()=>{!w&&(p.trim()||N)&&(m?ee():V())},children:f.jsx("img",{className:"w-10",src:he(w?"sendingLetter":"sendLetter")})})]})]})]});case"info":return f.jsx(AF,{setSubPage:x,currentChat:$})}};return f.jsx(f.Fragment,{children:ye()})},DF=()=>{const[t,e]=I.useState("chatroom"),[n,r]=I.useState(null),[s,i]=I.useState(null),[o,a]=I.useState(!1),{theme:l,users:c,setHeaderTitle:u,isLogin:h,chats:d,setChats:p,messages:g,setMessages:_}=I.useContext(Z);let x=0;ca("chats",p,h);const m=()=>{let E;try{if(!o){const k=Nt(we(Ce,"chats",n),"messages");let T=jo(k,Dh("timestamp","desc"),Oh(15));return E=Ir(T,w=>{const A=w.docs.map(P=>({id:P.id,...P.data()}));A.length!==0&&_(A),i(w.docs[w.docs.length-1])}),()=>{E&&E()}}}catch(k){console.log(k.message)}},v=async E=>{try{const k=Nt(we(Ce,"chats",n),"messages");let w=jo(k,Dh("timestamp",E==="newer"?"asc":"desc"),Oh(15));s&&(w=jo(w,ox(s)));const A=await lb(w),P=A.docs.map(b=>({id:b.id,...b.data()}));P.length!==0&&_(P),i(A.docs[A.docs.length-1])}catch(k){console.log(k.message)}};I.useEffect(()=>m(),[o,n]),I.useEffect(()=>{u("Chat Room")},[]);const y=E=>{e("chat"),r(E)},C=(E,k)=>{let T=!1;return E.forEach(w=>{k===w.uid&&(T=!0)}),T},N=()=>{switch(t){case"chatroom":return f.jsxs("div",{className:"p-5 grid gap-y-2",children:[d.map(E=>{var T,w;let k;if(c.forEach(A=>{var P;A.uid===((P=E==null?void 0:E.lastMessage)==null?void 0:P.senderId)&&(k=A)}),C(E.members,(T=ne==null?void 0:ne.currentUser)==null?void 0:T.uid))return x++,f.jsxs("div",{onClick:()=>y(E.id),className:`p-1 min-h-[130px] shadow-md flex gap-x-2 items-center border rounded-md cursor-pointer relative  ${l==="light"?"border-slate-200 shadow-gray-200":"border-slate-500/70 text-white shadow-slate-500"}`,children:[f.jsx("div",{children:f.jsx("img",{src:"images/sea-logo.jpg",className:"size-12 object-cover object-center aspect-square bg-cover rounded-full "})}),f.jsxs("div",{children:[f.jsx("div",{className:"font-bold text-lg",children:E==null?void 0:E.name}),f.jsxs("div",{children:[f.jsx("div",{className:"flex gap-x-1 items-center",children:(E==null?void 0:E.lastMessage)&&f.jsxs(f.Fragment,{children:[f.jsx(ns,{size:"size-5",fontSize:"text-sm",name:k.name,image:k.image}),f.jsx("p",{children:k==null?void 0:k.name})]})}),(E==null?void 0:E.lastMessage)&&f.jsxs("div",{className:"text-sm mt-2",children:[f.jsx("p",{children:kr(E.lastMessage.content,30)}),((w=E.lastMessage)==null?void 0:w.image)&&f.jsx("p",{children:"1 image"})]})]}),(E==null?void 0:E.lastMessage)&&f.jsx("div",{className:"text-sm",children:Bi(Sn(E.lastMessage.timestamp))})]})]},E.id)}),x===0&&f.jsxs("div",{className:`${l==="light"?"":"text-white"}`,children:[f.jsx("p",{children:"You don't have any chat rooms."}),f.jsx("p",{children:"Ask the admin to add you to a chat room."})]})]});case"chat":return f.jsx(LF,{data:{page:t,chats:d,setPage:e,chatId:n,messages:g,viewingOldMessages:o,setViewingOldMessages:a,setLastDoc:i,loadMoreWithoutSnapshot:v,loadMessages:m}})}};return f.jsxs(f.Fragment,{children:[f.jsx(ir,{}),N()]})},OF=()=>{const{headerTitle:t,refreshUserData:e,isLogin:n,setIsLogIn:r,setUserId:s}=I.useContext(Z);document.title=t;const i=kn();I.useEffect(()=>{e()},[n]),I.useEffect(()=>{const o=gP(ne,a=>{a&&(r(a),s(ne.currentUser.uid))});return()=>{o()}},[]),I.useEffect(()=>{i(n?"/app/posts":"/login")},[n])},MF=()=>{const t={text:"About SEA",image:"about",answer:`SEA stands for Star Education Academy, is an education academy founded by U Aye Kyaw and Daw Sandar Lwin in 2015. At SEA, you can study variety of subjects including
    English Language and four skills,
    Philosophy, Maths and Science.`},e=[{text:"Is my data private ?",answer:"Yes, your data is private."},{text:"Where can I give feedback to developer ?",answer:"You can give feedback at aungnaingthan22@gmail.com"}],n=[{text:"What are updated in the latest version ?",answer:"Updated UI design and fix bugs."},{text:"What is the last update time ?",answer:` Updated ${to(1712655376346)}.`}];return f.jsxs("div",{className:"p-5 ",children:[f.jsx(ir,{}),f.jsx(qa,{image:t.image,text:t.text,answer:t.answer}),f.jsx(qa,{text:"FAQ",image:"faq",answer:e.map(r=>f.jsx(qa,{text:r.text,answer:r.answer},r.text))}),f.jsx(qa,{image:"update",text:"Updates",answer:n.map(r=>f.jsx(qa,{text:r.text,answer:r.answer},r.text))})]})},qa=({image:t,text:e,answer:n})=>{const[r,s]=I.useState(!1),{theme:i}=I.useContext(Z);return f.jsxs("div",{className:`border p-2  mb-2 ${i==="light"?"border-gray-200":"border-slate-500/70 text-white"}`,children:[f.jsxs("div",{className:"transition-all flex items-center rounded-md min-h-14 justify-between",children:[f.jsxs("div",{className:"flex items-center gap-x-2",children:[t&&f.jsx(jF,{image:t}),f.jsx("div",{children:e})]}),f.jsx("button",{onClick:()=>s(!r),className:`mr-2  rounded-full p-1 ${i==="light"?"bg-gray-200":"bg-slate-500"}`,children:f.jsx("img",{className:"w-6",src:he(r?"up":"down")})})]}),r&&f.jsx("div",{className:"font-medium ",children:n})]})},jF=({image:t})=>f.jsx("img",{className:"w-7",src:he(t)}),Z=I.createContext();function FF(){var pe,ye,X;const t=Zy("sea-localStorage"),[e,n]=I.useState(Zy("seaacademy-theme-data")||"light"),[r,s]=I.useState(((pe=t==null?void 0:t.timer)==null?void 0:pe.seconds)||0),[i,o]=I.useState(((ye=t==null?void 0:t.timer)==null?void 0:ye.minutes)||0),[a,l]=I.useState(((X=t==null?void 0:t.timer)==null?void 0:X.hours)||0),[c,u]=I.useState(!1),[h,d]=I.useState({}),[p,g]=I.useState([]),[_,x]=I.useState(null),[m,v]=I.useState((t==null?void 0:t.answeredQuestions)||[]),[y,C]=I.useState((t==null?void 0:t.currentTest)||null),[N,E]=I.useState(!1),[k,T]=I.useState(""),[w,A]=I.useState(!1),[P,b]=I.useState([]),[D,L]=I.useState([]),[F,R]=I.useState([]),[S,M]=I.useState([]),[O,j]=I.useState([]),[H,$]=I.useState([]);ca("users",g,c),bj("users",d,c);const Y=()=>{},B=()=>{s(0),o(0),l(0)},V=()=>{B(),v([]),C(null),yp("sea-localStorage",{answeredQuestions:[],currentTest:null,startIndex:null,timer:{seconds:0,minutes:0,hours:0}})};I.useEffect(()=>{yp("seaacademy-theme-data",e)},[e]);const ee=`${a}:${L_(i)}:${L_(r)}`;return I.useEffect(()=>{const ie=setInterval(()=>{r<59?s(r+1):(s(0),o(i+1)),i===59&&(o(0),l(a+1))},1e3);return()=>{clearInterval(ie)}},[r]),f.jsx(Z.Provider,{value:{answeredQuestions:m,setAnsweredQuestions:v,currentTest:y,stopTest:V,seaLocalStorage:t,formattedTime:ee,startTimer:B,seconds:r,minutes:i,hours:a,inspecting:N,userData:h,isLogin:c,setUserData:d,users:p,setCurrentTest:C,headerTitle:k,setHeaderTitle:T,theme:e,setTheme:n,refreshUserData:Y,isOnline:w,setIsOnline:A,userId:_,setUserId:x,setInspecting:E,setIsLogIn:u,posts:P,setPosts:b,tests:D,setTests:L,history:F,setHistory:R,chats:S,setChats:M,messages:O,setMessages:j,notifications:H,setNotifications:$},children:f.jsx("div",{className:`transition-all duration-300 App font-padauk flex flex-col items-center min-h-screen ${e==="light"?"":"bg-slate-600"}`,children:f.jsxs(yA,{children:[f.jsx(OF,{}),f.jsx(Fj,{}),f.jsx($j,{}),f.jsx("div",{className:"flex-1 w-full h-full md:w-4/5 lg:w-3/5",children:f.jsxs(dA,{children:[!c&&f.jsx(Yt,{exact:!0,path:"/login",element:f.jsx(eF,{})}),c&&f.jsxs(f.Fragment,{children:[f.jsx(Yt,{exact:!0,path:"/app/:page",element:y?f.jsx(Lj,{}):f.jsx(Qj,{})}),f.jsx(Yt,{exact:!0,path:"/app/history/:resultId",element:f.jsx(Dj,{})}),f.jsx(Yt,{exact:!0,path:"/app/help",element:f.jsx(MF,{})}),f.jsx(Yt,{exact:!0,path:"/app/history/:resultId/reviews",element:f.jsx(Vj,{})}),f.jsx(Yt,{path:"/app/history",element:f.jsx(Uj,{})}),f.jsx(Yt,{path:"/app/chatroom",element:f.jsx(DF,{})}),(h==null?void 0:h.isAdmin)&&f.jsxs(f.Fragment,{children:[f.jsx(Yt,{path:"/app/notifications",element:f.jsx(CF,{})}),f.jsx(Yt,{path:"/app/admin",element:f.jsx(zj,{})}),f.jsx(Yt,{path:"/app/admin/tests",element:f.jsx(vF,{})}),f.jsx(Yt,{path:"/app/admin/users",element:f.jsx(wF,{})}),f.jsx(Yt,{path:"/app/admin/posts",element:f.jsx(xF,{})})]}),f.jsx(Yt,{exact:!0,path:"/app/settings",element:f.jsx(cF,{})})]}),f.jsx(Yt,{path:"*",element:f.jsx(_0,{title:"No page found!",text:"There is no page!"})})]})}),k!=="Chat Room"&&f.jsx(Zj,{})]})})})}Af.createRoot(document.getElementById("root")).render(f.jsx(fw.StrictMode,{children:f.jsx(FF,{})}));
