import{r,A as b,u as k,c as N,aE as T,O as v,Q as w,j as e,I as S,h as y,aG as C,E as j,d as E}from"./index-14pqm9y1.js";import{s as $}from"./sortByDateNewer-X-Bb2bKS.js";import{p as L}from"./prettyDate-uNOGf4QX.js";import{f as z}from"./fixTime-t8Fgsaat.js";import{R}from"./Reactions-FlB2PVA1.js";import{L as q}from"./LoadingScreen-EYXdXKre.js";import{M as g}from"./EmptyComponent-LbBV4xaA.js";import{S as A}from"./SkeletongTest-NXSTRACK.js";import{M as B}from"./MoreOption-CBEm1e9N.js";import{F as I}from"./FabSearch-egk5RJGK.js";import{E as M}from"./EditSharp-Qr3GQduu.js";import{T as h}from"./Tooltip-cTALVPIn.js";import{T as D}from"./Typography-F2i8tb5R.js";import{L as O}from"./LinkSharp-V12iGhFD.js";import{B as F}from"./Button-dux8T5OH.js";import"./notify-fX9PdEbD.js";import"./IconButton-x0ar69Y7.js";import"./ButtonBase-ryrwXNwG.js";import"./FavoriteBorder-zXnu4wal.js";import"./createSvgIcon-BoAk_7pD.js";import"./Skeleton-aRLWJJ7b.js";import"./OtherActions-na3csAt4.js";import"./getImage-SzyEh5nT.js";import"./Dialog-7UnCDBMC.js";import"./Modal-XJP-E1k3.js";import"./Portal-YB56xSUH.js";import"./Fab-Y1qd__Pp.js";import"./SearchSharp-j_EjSxko.js";import"./useControlled-qBYEK2eV.js";const ge=()=>{const{tests:t,setTests:m,setHeaderTitle:l,startTimer:p}=r.useContext(b);k();const a=N(E,"tests"),[s,c]=r.useState(!0),[d,x]=r.useState(!1),[o,u]=r.useState(null);T(a,[],m,c,x,!1,u,500),r.useEffect(()=>{l("Tests")},[]);const n=()=>{p()};return v("tests-page"),w("tests-page"),s?e.jsx(q,{isLoading:s,text:"Loading tests..."}):d?e.jsx(g,{text:"No tests available"}):o?e.jsx(g,{text:o}):e.jsx("div",{className:"grid gap-y-6 mb-2 m-2",children:t.sort((i,f)=>$(i,f,"timestamp","newer")).map(i=>e.jsx(P,{takeTest:n,t:i},i.id))})},P=S.memo(({t,takeTest:m})=>{const{users:l,openSnackbar:p,userData:a}=r.useContext(b),[s,c]=r.useState(null),[d,x]=r.useState(!0),o=k(),u=y(),{mode:n}=u.palette;C(t.uid,l,c,x);const i=a!=null&&a.isAdmin?{text:"Edit Test",icon:e.jsx(M,{}),onClick:()=>{o("/app/admin/tests/")}}:null;return d?e.jsx(A,{}):e.jsxs(j,{bgcolor:"background.default",color:"text.primary",className:`${n==="dark"?"border-slate-700":"border-slate-200"} flex flex-col justify-between min-h-60 border shadow-md rounded-md bg-gradient-to-tr`,children:[e.jsx(I,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex gap-x-2 mb-2 p-2",children:[e.jsx(h,{title:`View ${s&&s.name}'s profile`,arrow:!0,placement:"top",children:e.jsx("div",{className:"cursor-pointer",onClick:()=>o(`/app/profile/${s.uid}`),children:e.jsx("img",{className:"size-10 rounded-full shadow-md object-cover",src:s==null?void 0:s.image})})}),e.jsxs("div",{children:[e.jsx(h,{title:`View ${s&&s.name}'s profile`,arrow:!0,placement:"top",children:e.jsx(D,{onClick:()=>o(`/app/profile/${s.uid}`),variant:"h6",fontSize:"1rem",sx:{cursor:"pointer"},children:s==null?void 0:s.name})}),e.jsx("div",{className:" text-sm",children:L(z(t.time))})]}),e.jsxs("span",{className:`rounded-md border  text-sm text-gray-400 flex items-center p-1 ${n==="dark"?"border-slate-700":"border-slate-200"}`,children:[t.quizzes.length,t.quizzes.length>1?" questions":" question"]})]}),e.jsx(j,{children:e.jsx(B,{options:[{text:"Copy link",icon:e.jsx(O,{}),onClick:()=>{const f=`${location.origin}/#/app/tests/st/${t.id}`;navigator.clipboard.writeText(f),p("Link copied successfully")}},i],isComment:!0})})]}),t.image&&e.jsx("div",{className:"m-2 flex justify-center p-2",children:e.jsx("img",{className:"h-[250px]",src:`images/tests/${t.image}`})}),e.jsxs("div",{className:`${n==="dark"?"border-slate-700":"border-slate-200"} p-2 rounded-bl-lg rounded-br-lg border-t shadow-t-md`,children:[e.jsx("div",{className:"font-medium text-lg",children:t.name}),e.jsx("p",{className:" mb-2 break-words white-space-pre-wrap",children:t.description.trim()||"No description"}),e.jsx(F,{sx:{textDecoration:"underline"},size:"small",onClick:()=>{m(),o(`/app/tests/${t.id}`)},children:"Take the test"})]}),e.jsx(R,{post:t,collectionName:"tests"})]})});export{ge as default};
