import{r,A as b,u as k,c as N,aH as v,S,U as T,j as e,K as w,h as y,aJ as C,E as j,G as $,F as E,d as L}from"./index-bRWVs4uH.js";import{s as z}from"./sortByDateNewer-X-Bb2bKS.js";import{p as R}from"./prettyDate-uNOGf4QX.js";import{f as q}from"./fixTime-t8Fgsaat.js";import{R as A}from"./Reactions-QLTC-P8k.js";import{L as M}from"./LoadingScreen-s9LTCXQM.js";import{M as g}from"./EmptyComponent-B0v7Kud4.js";import{S as B}from"./SkeletongTest-7joSH7xN.js";import{M as D}from"./MoreOption-hnrvXzOA.js";import{F}from"./FabSearch-zXVrhWod.js";import{E as I}from"./EditSharp-_9lv0TsH.js";import{T as h}from"./Tooltip-nMSGeA9R.js";import{L as H}from"./LinkSharp-YMvrkRA0.js";import"./notify-SVbv2jGG.js";import"./IconButton-G7F5S18q.js";import"./FavoriteBorder-rU_pQKIY.js";import"./createSvgIcon-WuW5eNVd.js";import"./Skeleton-gudHJ97I.js";import"./OtherActions-oKlie0qg.js";import"./getImage-SzyEh5nT.js";import"./Dialog-uv1MMool.js";import"./Modal-AoQCLYuG.js";import"./Portal-VKXgkAI7.js";import"./Fab-d6Kpdxwd.js";import"./SearchSharp-QUcKE6GG.js";import"./useControlled-W8367X1y.js";const ue=()=>{const{tests:t,setTests:m,setHeaderTitle:l,startTimer:c}=r.useContext(b);k();const a=N(L,"tests"),[s,p]=r.useState(!0),[d,x]=r.useState(!1),[o,u]=r.useState(null);v(a,[],m,p,x,!1,u,500),r.useEffect(()=>{l("Tests")},[]);const n=()=>{c()};return S("tests-page"),T("tests-page"),s?e.jsx(M,{isLoading:s,text:"Loading tests..."}):d?e.jsx(g,{text:"No tests available"}):o?e.jsx(g,{text:o}):e.jsx("div",{className:"grid gap-y-6 mb-2 m-2",children:t.sort((i,f)=>z(i,f,"timestamp","newer")).map(i=>e.jsx(O,{takeTest:n,t:i},i.id))})},O=w.memo(({t,takeTest:m})=>{const{users:l,openSnackbar:c,userData:a}=r.useContext(b),[s,p]=r.useState(null),[d,x]=r.useState(!0),o=k(),u=y(),{mode:n}=u.palette;C(t.uid,l,p,x);const i=a!=null&&a.isAdmin?{text:"Edit Test",icon:e.jsx(I,{}),onClick:()=>{o("/app/admin/tests/")}}:null;return d?e.jsx(B,{}):e.jsxs(j,{bgcolor:"background.default",color:"text.primary",className:`${n==="dark"?"border-slate-700":"border-slate-200"} flex flex-col justify-between min-h-60 border shadow-md rounded-md bg-gradient-to-tr`,children:[e.jsx(F,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex gap-x-2 mb-2 p-2",children:[e.jsx(h,{title:`View ${s&&s.name}'s profile`,arrow:!0,placement:"top",children:e.jsx("div",{className:"cursor-pointer",onClick:()=>o(`/app/profile/${s.uid}`),children:e.jsx("img",{className:"size-10 rounded-full shadow-md object-cover",src:s==null?void 0:s.image})})}),e.jsxs("div",{children:[e.jsx(h,{title:`View ${s&&s.name}'s profile`,arrow:!0,placement:"top",children:e.jsx($,{onClick:()=>o(`/app/profile/${s.uid}`),variant:"h6",fontSize:"1rem",sx:{cursor:"pointer"},children:s==null?void 0:s.name})}),e.jsx("div",{className:" text-sm",children:R(q(t.time))})]}),e.jsxs("span",{className:`rounded-md border  text-sm text-gray-400 flex items-center p-1 ${n==="dark"?"border-slate-700":"border-slate-200"}`,children:[t.quizzes.length,t.quizzes.length>1?" questions":" question"]})]}),e.jsx(j,{children:e.jsx(D,{options:[{text:"Copy link",icon:e.jsx(H,{}),onClick:()=>{const f=`${location.origin}/#/app/tests/st/${t.id}`;navigator.clipboard.writeText(f),c("Link copied successfully")}},i],isComment:!0})})]}),t.image&&e.jsx("div",{className:"m-2 flex justify-center p-2",children:e.jsx("img",{className:"h-[250px]",src:`images/tests/${t.image}`})}),e.jsxs("div",{className:`${n==="dark"?"border-slate-700":"border-slate-200"} p-2 rounded-bl-lg rounded-br-lg border-t shadow-t-md`,children:[e.jsx("div",{className:"font-medium text-lg",children:t.name}),e.jsx("p",{className:" mb-2 break-words white-space-pre-wrap",children:t.description.trim()||"No description"}),e.jsx(E,{sx:{textDecoration:"underline"},size:"small",onClick:()=>{m(),o(`/app/tests/${t.id}`)},children:"Take the test"})]}),e.jsx(A,{post:t,collectionName:"tests"})]})});export{ue as default};
